(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();const xS=()=>{};var vg={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OE=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let a=t.charCodeAt(n);a<128?e[r++]=a:a<2048?(e[r++]=a>>6|192,e[r++]=a&63|128):(a&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(a=65536+((a&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=a>>18|240,e[r++]=a>>12&63|128,e[r++]=a>>6&63|128,e[r++]=a&63|128):(e[r++]=a>>12|224,e[r++]=a>>6&63|128,e[r++]=a&63|128)}return e},TS=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const a=t[r++];if(a<128)e[n++]=String.fromCharCode(a);else if(a>191&&a<224){const i=t[r++];e[n++]=String.fromCharCode((a&31)<<6|i&63)}else if(a>239&&a<365){const i=t[r++],s=t[r++],o=t[r++],u=((a&7)<<18|(i&63)<<12|(s&63)<<6|o&63)-65536;e[n++]=String.fromCharCode(55296+(u>>10)),e[n++]=String.fromCharCode(56320+(u&1023))}else{const i=t[r++],s=t[r++];e[n++]=String.fromCharCode((a&15)<<12|(i&63)<<6|s&63)}}return e.join("")},PE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let a=0;a<t.length;a+=3){const i=t[a],s=a+1<t.length,o=s?t[a+1]:0,u=a+2<t.length,l=u?t[a+2]:0,f=i>>2,c=(i&3)<<4|o>>4;let h=(o&15)<<2|l>>6,d=l&63;u||(d=64,s||(h=64)),n.push(r[f],r[c],r[h],r[d])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(OE(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):TS(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let a=0;a<t.length;){const i=r[t.charAt(a++)],o=a<t.length?r[t.charAt(a)]:0;++a;const l=a<t.length?r[t.charAt(a)]:64;++a;const c=a<t.length?r[t.charAt(a)]:64;if(++a,i==null||o==null||l==null||c==null)throw new CS;const h=i<<2|o>>4;if(n.push(h),l!==64){const d=o<<4&240|l>>2;if(n.push(d),c!==64){const v=l<<6&192|c;n.push(v)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class CS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const SS=function(t){const e=OE(t);return PE.encodeByteArray(e,!0)},kE=function(t){return SS(t).replace(/\./g,"")},AS=function(t){try{return PE.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IS=()=>RS().__FIREBASE_DEFAULTS__,DS=()=>{if(typeof process>"u"||typeof vg>"u")return;const t=vg.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},_S=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&AS(t[1]);return e&&JSON.parse(e)},LS=()=>{try{return xS()||IS()||DS()||_S()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},NE=()=>{var t;return(t=LS())==null?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}}function OS(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function BE(){try{return typeof indexedDB=="object"}catch{return!1}}function FE(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(n);a.onsuccess=()=>{a.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},a.onupgradeneeded=()=>{r=!1},a.onerror=()=>{var i;e(((i=a.error)==null?void 0:i.message)||"")}}catch(r){e(r)}})}function PS(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kS="FirebaseError";class hn extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=kS,Object.setPrototypeOf(this,hn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,$i.prototype.create)}}class $i{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},a=`${this.service}/${e}`,i=this.errors[e],s=i?NS(i,n):"Error",o=`${this.serviceName}: ${s} (${a}).`;return new hn(a,o,n)}}function NS(t,e){return t.replace(BS,(r,n)=>{const a=e[n];return a!=null?String(a):`<${n}?>`})}const BS=/\{\$([^}]+)}/g;function wi(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const a of r){if(!n.includes(a))return!1;const i=t[a],s=e[a];if(gg(i)&&gg(s)){if(!wi(i,s))return!1}else if(i!==s)return!1}for(const a of n)if(!r.includes(a))return!1;return!0}function gg(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FS=1e3,qS=2,GS=4*60*60*1e3,zS=.5;function pg(t,e=FS,r=qS){const n=e*Math.pow(r,t),a=Math.round(zS*n*(Math.random()-.5)*2);return Math.min(GS,n+a)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fv(t){return t&&t._delegate?t._delegate:t}class Mr{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $S{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new MS;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:r});a&&n.resolve(a)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),n=(e==null?void 0:e.optional)??!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(n)return null;throw a}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(US(e))try{this.getOrInitializeService({instanceIdentifier:Xr})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(r);try{const i=this.getOrInitializeService({instanceIdentifier:a});n.resolve(i)}catch{}}}}clearInstance(e=Xr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Xr){return this.instances.has(e)}getOptions(e=Xr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[i,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(i);n===o&&s.resolve(a)}return a}onInit(e,r){const n=this.normalizeInstanceIdentifier(r),a=this.onInitCallbacks.get(n)??new Set;a.add(e),this.onInitCallbacks.set(n,a);const i=this.instances.get(n);return i&&e(i,n),()=>{a.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const a of n)try{a(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:VS(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=Xr){return this.component?this.component.multipleInstances?e:Xr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function VS(t){return t===Xr?void 0:t}function US(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HS{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new $S(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var He;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(He||(He={}));const YS={debug:He.DEBUG,verbose:He.VERBOSE,info:He.INFO,warn:He.WARN,error:He.ERROR,silent:He.SILENT},WS=He.INFO,XS={[He.DEBUG]:"log",[He.VERBOSE]:"log",[He.INFO]:"info",[He.WARN]:"warn",[He.ERROR]:"error"},KS=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),a=XS[e];if(a)console[a](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class qE{constructor(e){this.name=e,this._logLevel=WS,this._logHandler=KS,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in He))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?YS[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,He.DEBUG,...e),this._logHandler(this,He.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,He.VERBOSE,...e),this._logHandler(this,He.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,He.INFO,...e),this._logHandler(this,He.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,He.WARN,...e),this._logHandler(this,He.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,He.ERROR,...e),this._logHandler(this,He.ERROR,...e)}}const jS=(t,e)=>e.some(r=>t instanceof r);let yg,mg;function ZS(){return yg||(yg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function QS(){return mg||(mg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const GE=new WeakMap,kd=new WeakMap,zE=new WeakMap,_s=new WeakMap,cv=new WeakMap;function JS(t){const e=new Promise((r,n)=>{const a=()=>{t.removeEventListener("success",i),t.removeEventListener("error",s)},i=()=>{r(Ar(t.result)),a()},s=()=>{n(t.error),a()};t.addEventListener("success",i),t.addEventListener("error",s)});return e.then(r=>{r instanceof IDBCursor&&GE.set(r,t)}).catch(()=>{}),cv.set(e,t),e}function eA(t){if(kd.has(t))return;const e=new Promise((r,n)=>{const a=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",s),t.removeEventListener("abort",s)},i=()=>{r(),a()},s=()=>{n(t.error||new DOMException("AbortError","AbortError")),a()};t.addEventListener("complete",i),t.addEventListener("error",s),t.addEventListener("abort",s)});kd.set(t,e)}let Nd={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return kd.get(t);if(e==="objectStoreNames")return t.objectStoreNames||zE.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return Ar(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function tA(t){Nd=t(Nd)}function rA(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(Ls(this),e,...r);return zE.set(n,e.sort?e.sort():[e]),Ar(n)}:QS().includes(t)?function(...e){return t.apply(Ls(this),e),Ar(GE.get(this))}:function(...e){return Ar(t.apply(Ls(this),e))}}function nA(t){return typeof t=="function"?rA(t):(t instanceof IDBTransaction&&eA(t),jS(t,ZS())?new Proxy(t,Nd):t)}function Ar(t){if(t instanceof IDBRequest)return JS(t);if(_s.has(t))return _s.get(t);const e=nA(t);return e!==t&&(_s.set(t,e),cv.set(e,t)),e}const Ls=t=>cv.get(t);function $E(t,e,{blocked:r,upgrade:n,blocking:a,terminated:i}={}){const s=indexedDB.open(t,e),o=Ar(s);return n&&s.addEventListener("upgradeneeded",u=>{n(Ar(s.result),u.oldVersion,u.newVersion,Ar(s.transaction),u)}),r&&s.addEventListener("blocked",u=>r(u.oldVersion,u.newVersion,u)),o.then(u=>{i&&u.addEventListener("close",()=>i()),a&&u.addEventListener("versionchange",l=>a(l.oldVersion,l.newVersion,l))}).catch(()=>{}),o}const aA=["get","getKey","getAll","getAllKeys","count"],iA=["put","add","delete","clear"],Ms=new Map;function bg(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Ms.get(e))return Ms.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,a=iA.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(a||aA.includes(r)))return;const i=async function(s,...o){const u=this.transaction(s,a?"readwrite":"readonly");let l=u.store;return n&&(l=l.index(o.shift())),(await Promise.all([l[r](...o),a&&u.done]))[0]};return Ms.set(e,i),i}tA(t=>({...t,get:(e,r,n)=>bg(e,r)||t.get(e,r,n),has:(e,r)=>!!bg(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(oA(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function oA(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Bd="@firebase/app",wg="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lr=new qE("@firebase/app"),uA="@firebase/app-compat",lA="@firebase/analytics-compat",fA="@firebase/analytics",cA="@firebase/app-check-compat",hA="@firebase/app-check",dA="@firebase/auth",vA="@firebase/auth-compat",gA="@firebase/database",pA="@firebase/data-connect",yA="@firebase/database-compat",mA="@firebase/functions",bA="@firebase/functions-compat",wA="@firebase/installations",EA="@firebase/installations-compat",xA="@firebase/messaging",TA="@firebase/messaging-compat",CA="@firebase/performance",SA="@firebase/performance-compat",AA="@firebase/remote-config",RA="@firebase/remote-config-compat",IA="@firebase/storage",DA="@firebase/storage-compat",_A="@firebase/firestore",LA="@firebase/ai",MA="@firebase/firestore-compat",OA="firebase";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fd="[DEFAULT]",PA={[Bd]:"fire-core",[uA]:"fire-core-compat",[fA]:"fire-analytics",[lA]:"fire-analytics-compat",[hA]:"fire-app-check",[cA]:"fire-app-check-compat",[dA]:"fire-auth",[vA]:"fire-auth-compat",[gA]:"fire-rtdb",[pA]:"fire-data-connect",[yA]:"fire-rtdb-compat",[mA]:"fire-fn",[bA]:"fire-fn-compat",[wA]:"fire-iid",[EA]:"fire-iid-compat",[xA]:"fire-fcm",[TA]:"fire-fcm-compat",[CA]:"fire-perf",[SA]:"fire-perf-compat",[AA]:"fire-rc",[RA]:"fire-rc-compat",[IA]:"fire-gcs",[DA]:"fire-gcs-compat",[_A]:"fire-fst",[MA]:"fire-fst-compat",[LA]:"fire-vertex","fire-js":"fire-js",[OA]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ei=new Map,kA=new Map,qd=new Map;function Eg(t,e){try{t.container.addComponent(e)}catch(r){lr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function nn(t){const e=t.name;if(qd.has(e))return lr.debug(`There were multiple attempts to register component ${e}.`),!1;qd.set(e,t);for(const r of Ei.values())Eg(r,t);for(const r of kA.values())Eg(r,t);return!0}function Vi(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Rr=new $i("app","Firebase",NA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BA{constructor(e,r,n){this._isDeleted=!1,this._options={...e},this._config={...r},this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Mr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Rr.create("app-deleted",{appName:this._name})}}function VE(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n={name:Fd,automaticDataCollectionEnabled:!0,...e},a=n.name;if(typeof a!="string"||!a)throw Rr.create("bad-app-name",{appName:String(a)});if(r||(r=NE()),!r)throw Rr.create("no-options");const i=Ei.get(a);if(i){if(wi(r,i.options)&&wi(n,i.config))return i;throw Rr.create("duplicate-app",{appName:a})}const s=new HS(a);for(const u of qd.values())s.addComponent(u);const o=new BA(r,n,s);return Ei.set(a,o),o}function FA(t=Fd){const e=Ei.get(t);if(!e&&t===Fd&&NE())return VE();if(!e)throw Rr.create("no-app",{appName:t});return e}function Ir(t,e,r){let n=PA[t]??t;r&&(n+=`-${r}`);const a=n.match(/\s|\//),i=e.match(/\s|\//);if(a||i){const s=[`Unable to register library "${n}" with version "${e}":`];a&&s.push(`library name "${n}" contains illegal characters (whitespace or "/")`),a&&i&&s.push("and"),i&&s.push(`version name "${e}" contains illegal characters (whitespace or "/")`),lr.warn(s.join(" "));return}nn(new Mr(`${n}-version`,()=>({library:n,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qA="firebase-heartbeat-database",GA=1,ba="firebase-heartbeat-store";let Os=null;function UE(){return Os||(Os=$E(qA,GA,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ba)}catch(r){console.warn(r)}}}}).catch(t=>{throw Rr.create("idb-open",{originalErrorMessage:t.message})})),Os}async function zA(t){try{const r=(await UE()).transaction(ba),n=await r.objectStore(ba).get(HE(t));return await r.done,n}catch(e){if(e instanceof hn)lr.warn(e.message);else{const r=Rr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});lr.warn(r.message)}}}async function xg(t,e){try{const n=(await UE()).transaction(ba,"readwrite");await n.objectStore(ba).put(e,HE(t)),await n.done}catch(r){if(r instanceof hn)lr.warn(r.message);else{const n=Rr.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});lr.warn(n.message)}}}function HE(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $A=1024,VA=30;class UA{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new YA(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,r;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Tg();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)==null?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(s=>s.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:a}),this._heartbeatsCache.heartbeats.length>VA){const s=WA(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){lr.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=Tg(),{heartbeatsToSend:n,unsentEntries:a}=HA(this._heartbeatsCache.heartbeats),i=kE(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(r){return lr.warn(r),""}}}function Tg(){return new Date().toISOString().substring(0,10)}function HA(t,e=$A){const r=[];let n=t.slice();for(const a of t){const i=r.find(s=>s.agent===a.agent);if(i){if(i.dates.push(a.date),Cg(r)>e){i.dates.pop();break}}else if(r.push({agent:a.agent,dates:[a.date]}),Cg(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class YA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return BE()?FE().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await zA(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return xg(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return xg(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}else return}}function Cg(t){return kE(JSON.stringify({version:2,heartbeats:t})).length}function WA(t){if(t.length===0)return-1;let e=0,r=t[0].date;for(let n=1;n<t.length;n++)t[n].date<r&&(r=t[n].date,e=n);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XA(t){nn(new Mr("platform-logger",e=>new sA(e),"PRIVATE")),nn(new Mr("heartbeat",e=>new UA(e),"PRIVATE")),Ir(Bd,wg,t),Ir(Bd,wg,"esm2020"),Ir("fire-js","")}XA("");var KA="firebase",jA="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ir(KA,jA,"app");const YE="@firebase/installations",hv="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WE=1e4,XE=`w:${hv}`,KE="FIS_v2",ZA="https://firebaseinstallations.googleapis.com/v1",QA=60*60*1e3,JA="installations",eR="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tR={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},an=new $i(JA,eR,tR);function jE(t){return t instanceof hn&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZE({projectId:t}){return`${ZA}/projects/${t}/installations`}function QE(t){return{token:t.token,requestStatus:2,expiresIn:nR(t.expiresIn),creationTime:Date.now()}}async function JE(t,e){const n=(await e.json()).error;return an.create("request-failed",{requestName:t,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function ex({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function rR(t,{refreshToken:e}){const r=ex(t);return r.append("Authorization",aR(e)),r}async function tx(t){const e=await t();return e.status>=500&&e.status<600?t():e}function nR(t){return Number(t.replace("s","000"))}function aR(t){return`${KE} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iR({appConfig:t,heartbeatServiceProvider:e},{fid:r}){const n=ZE(t),a=ex(t),i=e.getImmediate({optional:!0});if(i){const l=await i.getHeartbeatsHeader();l&&a.append("x-firebase-client",l)}const s={fid:r,authVersion:KE,appId:t.appId,sdkVersion:XE},o={method:"POST",headers:a,body:JSON.stringify(s)},u=await tx(()=>fetch(n,o));if(u.ok){const l=await u.json();return{fid:l.fid||r,registrationStatus:2,refreshToken:l.refreshToken,authToken:QE(l.authToken)}}else throw await JE("Create Installation",u)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rx(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sR(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oR=/^[cdef][\w-]{21}$/,Gd="";function uR(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const r=lR(t);return oR.test(r)?r:Gd}catch{return Gd}}function lR(t){return sR(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ui(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nx=new Map;function ax(t,e){const r=Ui(t);ix(r,e),fR(r,e)}function ix(t,e){const r=nx.get(t);if(r)for(const n of r)n(e)}function fR(t,e){const r=cR();r&&r.postMessage({key:t,fid:e}),hR()}let en=null;function cR(){return!en&&"BroadcastChannel"in self&&(en=new BroadcastChannel("[Firebase] FID Change"),en.onmessage=t=>{ix(t.data.key,t.data.fid)}),en}function hR(){nx.size===0&&en&&(en.close(),en=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dR="firebase-installations-database",vR=1,sn="firebase-installations-store";let Ps=null;function dv(){return Ps||(Ps=$E(dR,vR,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(sn)}}})),Ps}async function xi(t,e){const r=Ui(t),a=(await dv()).transaction(sn,"readwrite"),i=a.objectStore(sn),s=await i.get(r);return await i.put(e,r),await a.done,(!s||s.fid!==e.fid)&&ax(t,e.fid),e}async function sx(t){const e=Ui(t),n=(await dv()).transaction(sn,"readwrite");await n.objectStore(sn).delete(e),await n.done}async function Hi(t,e){const r=Ui(t),a=(await dv()).transaction(sn,"readwrite"),i=a.objectStore(sn),s=await i.get(r),o=e(s);return o===void 0?await i.delete(r):await i.put(o,r),await a.done,o&&(!s||s.fid!==o.fid)&&ax(t,o.fid),o}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vv(t){let e;const r=await Hi(t.appConfig,n=>{const a=gR(n),i=pR(t,a);return e=i.registrationPromise,i.installationEntry});return r.fid===Gd?{installationEntry:await e}:{installationEntry:r,registrationPromise:e}}function gR(t){const e=t||{fid:uR(),registrationStatus:0};return ox(e)}function pR(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const a=Promise.reject(an.create("app-offline"));return{installationEntry:e,registrationPromise:a}}const r={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},n=yR(t,r);return{installationEntry:r,registrationPromise:n}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:mR(t)}:{installationEntry:e}}async function yR(t,e){try{const r=await iR(t,e);return xi(t.appConfig,r)}catch(r){throw jE(r)&&r.customData.serverCode===409?await sx(t.appConfig):await xi(t.appConfig,{fid:e.fid,registrationStatus:0}),r}}async function mR(t){let e=await Sg(t.appConfig);for(;e.registrationStatus===1;)await rx(100),e=await Sg(t.appConfig);if(e.registrationStatus===0){const{installationEntry:r,registrationPromise:n}=await vv(t);return n||r}return e}function Sg(t){return Hi(t,e=>{if(!e)throw an.create("installation-not-found");return ox(e)})}function ox(t){return bR(t)?{fid:t.fid,registrationStatus:0}:t}function bR(t){return t.registrationStatus===1&&t.registrationTime+WE<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wR({appConfig:t,heartbeatServiceProvider:e},r){const n=ER(t,r),a=rR(t,r),i=e.getImmediate({optional:!0});if(i){const l=await i.getHeartbeatsHeader();l&&a.append("x-firebase-client",l)}const s={installation:{sdkVersion:XE,appId:t.appId}},o={method:"POST",headers:a,body:JSON.stringify(s)},u=await tx(()=>fetch(n,o));if(u.ok){const l=await u.json();return QE(l)}else throw await JE("Generate Auth Token",u)}function ER(t,{fid:e}){return`${ZE(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gv(t,e=!1){let r;const n=await Hi(t.appConfig,i=>{if(!ux(i))throw an.create("not-registered");const s=i.authToken;if(!e&&CR(s))return i;if(s.requestStatus===1)return r=xR(t,e),i;{if(!navigator.onLine)throw an.create("app-offline");const o=AR(i);return r=TR(t,o),o}});return r?await r:n.authToken}async function xR(t,e){let r=await Ag(t.appConfig);for(;r.authToken.requestStatus===1;)await rx(100),r=await Ag(t.appConfig);const n=r.authToken;return n.requestStatus===0?gv(t,e):n}function Ag(t){return Hi(t,e=>{if(!ux(e))throw an.create("not-registered");const r=e.authToken;return RR(r)?{...e,authToken:{requestStatus:0}}:e})}async function TR(t,e){try{const r=await wR(t,e),n={...e,authToken:r};return await xi(t.appConfig,n),r}catch(r){if(jE(r)&&(r.customData.serverCode===401||r.customData.serverCode===404))await sx(t.appConfig);else{const n={...e,authToken:{requestStatus:0}};await xi(t.appConfig,n)}throw r}}function ux(t){return t!==void 0&&t.registrationStatus===2}function CR(t){return t.requestStatus===2&&!SR(t)}function SR(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+QA}function AR(t){const e={requestStatus:1,requestTime:Date.now()};return{...t,authToken:e}}function RR(t){return t.requestStatus===1&&t.requestTime+WE<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IR(t){const e=t,{installationEntry:r,registrationPromise:n}=await vv(e);return n?n.catch(console.error):gv(e).catch(console.error),r.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DR(t,e=!1){const r=t;return await _R(r),(await gv(r,e)).token}async function _R(t){const{registrationPromise:e}=await vv(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LR(t){if(!t||!t.options)throw ks("App Configuration");if(!t.name)throw ks("App Name");const e=["projectId","apiKey","appId"];for(const r of e)if(!t.options[r])throw ks(r);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function ks(t){return an.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lx="installations",MR="installations-internal",OR=t=>{const e=t.getProvider("app").getImmediate(),r=LR(e),n=Vi(e,"heartbeat");return{app:e,appConfig:r,heartbeatServiceProvider:n,_delete:()=>Promise.resolve()}},PR=t=>{const e=t.getProvider("app").getImmediate(),r=Vi(e,lx).getImmediate();return{getId:()=>IR(r),getToken:a=>DR(r,a)}};function kR(){nn(new Mr(lx,OR,"PUBLIC")),nn(new Mr(MR,PR,"PRIVATE"))}kR();Ir(YE,hv);Ir(YE,hv,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ti="analytics",NR="firebase_id",BR="origin",FR=60*1e3,qR="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",pv="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ct=new qE("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GR={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Ot=new $i("analytics","Analytics",GR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zR(t){if(!t.startsWith(pv)){const e=Ot.create("invalid-gtag-resource",{gtagURL:t});return Ct.warn(e.message),""}return t}function fx(t){return Promise.all(t.map(e=>e.catch(r=>r)))}function $R(t,e){let r;return window.trustedTypes&&(r=window.trustedTypes.createPolicy(t,e)),r}function VR(t,e){const r=$R("firebase-js-sdk-policy",{createScriptURL:zR}),n=document.createElement("script"),a=`${pv}?l=${t}&id=${e}`;n.src=r?r==null?void 0:r.createScriptURL(a):a,n.async=!0,document.head.appendChild(n)}function UR(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function HR(t,e,r,n,a,i){const s=n[a];try{if(s)await e[s];else{const u=(await fx(r)).find(l=>l.measurementId===a);u&&await e[u.appId]}}catch(o){Ct.error(o)}t("config",a,i)}async function YR(t,e,r,n,a){try{let i=[];if(a&&a.send_to){let s=a.send_to;Array.isArray(s)||(s=[s]);const o=await fx(r);for(const u of s){const l=o.find(c=>c.measurementId===u),f=l&&e[l.appId];if(f)i.push(f);else{i=[];break}}}i.length===0&&(i=Object.values(e)),await Promise.all(i),t("event",n,a||{})}catch(i){Ct.error(i)}}function WR(t,e,r,n){async function a(i,...s){try{if(i==="event"){const[o,u]=s;await YR(t,e,r,o,u)}else if(i==="config"){const[o,u]=s;await HR(t,e,r,n,o,u)}else if(i==="consent"){const[o,u]=s;t("consent",o,u)}else if(i==="get"){const[o,u,l]=s;t("get",o,u,l)}else if(i==="set"){const[o]=s;t("set",o)}else t(i,...s)}catch(o){Ct.error(o)}}return a}function XR(t,e,r,n,a){let i=function(...s){window[n].push(arguments)};return window[a]&&typeof window[a]=="function"&&(i=window[a]),window[a]=WR(i,t,e,r),{gtagCore:i,wrappedGtag:window[a]}}function KR(t){const e=window.document.getElementsByTagName("script");for(const r of Object.values(e))if(r.src&&r.src.includes(pv)&&r.src.includes(t))return r;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jR=30,ZR=1e3;class QR{constructor(e={},r=ZR){this.throttleMetadata=e,this.intervalMillis=r}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,r){this.throttleMetadata[e]=r}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const cx=new QR;function JR(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function eI(t){var s;const{appId:e,apiKey:r}=t,n={method:"GET",headers:JR(r)},a=qR.replace("{app-id}",e),i=await fetch(a,n);if(i.status!==200&&i.status!==304){let o="";try{const u=await i.json();(s=u.error)!=null&&s.message&&(o=u.error.message)}catch{}throw Ot.create("config-fetch-failed",{httpStatus:i.status,responseMessage:o})}return i.json()}async function tI(t,e=cx,r){const{appId:n,apiKey:a,measurementId:i}=t.options;if(!n)throw Ot.create("no-app-id");if(!a){if(i)return{measurementId:i,appId:n};throw Ot.create("no-api-key")}const s=e.getThrottleMetadata(n)||{backoffCount:0,throttleEndTimeMillis:Date.now()},o=new aI;return setTimeout(async()=>{o.abort()},FR),hx({appId:n,apiKey:a,measurementId:i},s,o,e)}async function hx(t,{throttleEndTimeMillis:e,backoffCount:r},n,a=cx){var o;const{appId:i,measurementId:s}=t;try{await rI(n,e)}catch(u){if(s)return Ct.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${s} provided in the "measurementId" field in the local Firebase config. [${u==null?void 0:u.message}]`),{appId:i,measurementId:s};throw u}try{const u=await eI(t);return a.deleteThrottleMetadata(i),u}catch(u){const l=u;if(!nI(l)){if(a.deleteThrottleMetadata(i),s)return Ct.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${s} provided in the "measurementId" field in the local Firebase config. [${l==null?void 0:l.message}]`),{appId:i,measurementId:s};throw u}const f=Number((o=l==null?void 0:l.customData)==null?void 0:o.httpStatus)===503?pg(r,a.intervalMillis,jR):pg(r,a.intervalMillis),c={throttleEndTimeMillis:Date.now()+f,backoffCount:r+1};return a.setThrottleMetadata(i,c),Ct.debug(`Calling attemptFetch again in ${f} millis`),hx(t,c,n,a)}}function rI(t,e){return new Promise((r,n)=>{const a=Math.max(e-Date.now(),0),i=setTimeout(r,a);t.addEventListener(()=>{clearTimeout(i),n(Ot.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function nI(t){if(!(t instanceof hn)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class aI{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function iI(t,e,r,n,a){if(a&&a.global){t("event",r,n);return}else{const i=await e,s={...n,send_to:i};t("event",r,s)}}async function sI(t,e,r,n){if(n&&n.global){const a={};for(const i of Object.keys(r))a[`user_properties.${i}`]=r[i];return t("set",a),Promise.resolve()}else{const a=await e;t("config",a,{update:!0,user_properties:r})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oI(){if(BE())try{await FE()}catch(t){return Ct.warn(Ot.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return Ct.warn(Ot.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function uI(t,e,r,n,a,i,s){const o=tI(t);o.then(h=>{r[h.measurementId]=h.appId,t.options.measurementId&&h.measurementId!==t.options.measurementId&&Ct.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${h.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(h=>Ct.error(h)),e.push(o);const u=oI().then(h=>{if(h)return n.getId()}),[l,f]=await Promise.all([o,u]);KR(i)||VR(i,l.measurementId),a("js",new Date);const c=(s==null?void 0:s.config)??{};return c[BR]="firebase",c.update=!0,f!=null&&(c[NR]=f),a("config",l.measurementId,c),l.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lI{constructor(e){this.app=e}_delete(){return delete Mn[this.app.options.appId],Promise.resolve()}}let Mn={},Rg=[];const Ig={};let Ns="dataLayer",fI="gtag",Dg,yv,_g=!1;function cI(){const t=[];if(OS()&&t.push("This is a browser extension environment."),PS()||t.push("Cookies are not available."),t.length>0){const e=t.map((n,a)=>`(${a+1}) ${n}`).join(" "),r=Ot.create("invalid-analytics-context",{errorInfo:e});Ct.warn(r.message)}}function hI(t,e,r){cI();const n=t.options.appId;if(!n)throw Ot.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)Ct.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Ot.create("no-api-key");if(Mn[n]!=null)throw Ot.create("already-exists",{id:n});if(!_g){UR(Ns);const{wrappedGtag:i,gtagCore:s}=XR(Mn,Rg,Ig,Ns,fI);yv=i,Dg=s,_g=!0}return Mn[n]=uI(t,Rg,Ig,e,Dg,Ns,r),new lI(t)}function dI(t=FA()){t=fv(t);const e=Vi(t,Ti);return e.isInitialized()?e.getImmediate():vI(t)}function vI(t,e={}){const r=Vi(t,Ti);if(r.isInitialized()){const a=r.getImmediate();if(wi(e,r.getOptions()))return a;throw Ot.create("already-initialized")}return r.initialize({options:e})}function gI(t,e,r){t=fv(t),sI(yv,Mn[t.app.options.appId],e,r).catch(n=>Ct.error(n))}function _a(t,e,r,n){t=fv(t),iI(yv,Mn[t.app.options.appId],e,r,n).catch(a=>Ct.error(a))}const Lg="@firebase/analytics",Mg="0.10.19";function pI(){nn(new Mr(Ti,(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),a=e.getProvider("installations-internal").getImmediate();return hI(n,a,r)},"PUBLIC")),nn(new Mr("analytics-internal",t,"PRIVATE")),Ir(Lg,Mg),Ir(Lg,Mg,"esm2020");function t(e){try{const r=e.getProvider(Ti).getImmediate();return{logEvent:(n,a,i)=>_a(r,n,a,i),setUserProperties:(n,a)=>gI(r,n,a)}}catch(r){throw Ot.create("interop-component-reg-failed",{reason:r})}}}pI();const yI={apiKey:"AIzaSyAZ5sd0eEFgm6tHzxHiQY3EY0RpkU1CfOI",authDomain:"naruto-matchups.firebaseapp.com",projectId:"naruto-matchups",storageBucket:"naruto-matchups.firebasestorage.app",messagingSenderId:"364303812216",appId:"1:364303812216:web:26c71433d2d0131e5d4f8d",measurementId:"G-XMRML5QPLT"},mI=VE(yI),Yi=dI(mI);_a(Yi,"app_initialized");function bI(t){_a(Yi,"select_content",{content_type:"character",item_id:t})}function wI(t){_a(Yi,"screen_view",{screen_name:t})}function EI(t){_a(Yi,"search",{search_term:t})}function zd(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function xI(t){if(Array.isArray(t))return t}function TI(t){if(Array.isArray(t))return zd(t)}function qr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function CI(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,vx(n.key),n)}}function Gr(t,e,r){return e&&CI(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Lt(t,e){var r=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=mv(t))||e){r&&(t=r);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(u){throw u},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i,s=!0,o=!1;return{s:function(){r=r.call(t)},n:function(){var u=r.next();return s=u.done,u},e:function(u){o=!0,i=u},f:function(){try{s||r.return==null||r.return()}finally{if(o)throw i}}}}function dx(t,e,r){return(e=vx(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function SI(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function AI(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,s,o=[],u=!0,l=!1;try{if(i=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(o.push(n.value),o.length!==e);u=!0);}catch(f){l=!0,a=f}finally{try{if(!u&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(l)throw a}}return o}}function RI(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function II(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tt(t,e){return xI(t)||AI(t,e)||mv(t,e)||RI()}function Ci(t){return TI(t)||SI(t)||mv(t)||II()}function DI(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function vx(t){var e=DI(t,"string");return typeof e=="symbol"?e:e+""}function ot(t){"@babel/helpers - typeof";return ot=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ot(t)}function mv(t,e){if(t){if(typeof t=="string")return zd(t,e);var r={}.toString.call(t).slice(8,-1);return r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set"?Array.from(t):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?zd(t,e):void 0}}var it=typeof window>"u"?null:window,Og=it?it.navigator:null;it&&it.document;var _I=ot(""),gx=ot({}),LI=ot(function(){}),MI=typeof HTMLElement>"u"?"undefined":ot(HTMLElement),La=function(e){return e&&e.instanceString&&Ke(e.instanceString)?e.instanceString():null},we=function(e){return e!=null&&ot(e)==_I},Ke=function(e){return e!=null&&ot(e)===LI},$e=function(e){return!Pt(e)&&(Array.isArray?Array.isArray(e):e!=null&&e instanceof Array)},Be=function(e){return e!=null&&ot(e)===gx&&!$e(e)&&e.constructor===Object},OI=function(e){return e!=null&&ot(e)===gx},ie=function(e){return e!=null&&ot(e)===ot(1)&&!isNaN(e)},PI=function(e){return ie(e)&&Math.floor(e)===e},Si=function(e){if(MI!=="undefined")return e!=null&&e instanceof HTMLElement},Pt=function(e){return Ma(e)||px(e)},Ma=function(e){return La(e)==="collection"&&e._private.single},px=function(e){return La(e)==="collection"&&!e._private.single},bv=function(e){return La(e)==="core"},yx=function(e){return La(e)==="stylesheet"},kI=function(e){return La(e)==="event"},Or=function(e){return e==null?!0:!!(e===""||e.match(/^\s+$/))},NI=function(e){return typeof HTMLElement>"u"?!1:e instanceof HTMLElement},BI=function(e){return Be(e)&&ie(e.x1)&&ie(e.x2)&&ie(e.y1)&&ie(e.y2)},FI=function(e){return OI(e)&&Ke(e.then)},qI=function(){return Og&&Og.userAgent.match(/msie|trident|edge/i)},Fn=function(e,r){r||(r=function(){if(arguments.length===1)return arguments[0];if(arguments.length===0)return"undefined";for(var i=[],s=0;s<arguments.length;s++)i.push(arguments[s]);return i.join("$")});var n=function(){var i=this,s=arguments,o,u=r.apply(i,s),l=n.cache;return(o=l[u])||(o=l[u]=e.apply(i,s)),o};return n.cache={},n},wv=Fn(function(t){return t.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}),Wi=Fn(function(t){return t.replace(/(-\w)/g,function(e){return e[1].toUpperCase()})}),mx=Fn(function(t,e){return t+e[0].toUpperCase()+e.substring(1)},function(t,e){return t+"$"+e}),Pg=function(e){return Or(e)?e:e.charAt(0).toUpperCase()+e.substring(1)},xr=function(e,r){return e.slice(-1*r.length)===r},st="(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))",GI="rgb[a]?\\(("+st+"[%]?)\\s*,\\s*("+st+"[%]?)\\s*,\\s*("+st+"[%]?)(?:\\s*,\\s*("+st+"))?\\)",zI="rgb[a]?\\((?:"+st+"[%]?)\\s*,\\s*(?:"+st+"[%]?)\\s*,\\s*(?:"+st+"[%]?)(?:\\s*,\\s*(?:"+st+"))?\\)",$I="hsl[a]?\\(("+st+")\\s*,\\s*("+st+"[%])\\s*,\\s*("+st+"[%])(?:\\s*,\\s*("+st+"))?\\)",VI="hsl[a]?\\((?:"+st+")\\s*,\\s*(?:"+st+"[%])\\s*,\\s*(?:"+st+"[%])(?:\\s*,\\s*(?:"+st+"))?\\)",UI="\\#[0-9a-fA-F]{3}",HI="\\#[0-9a-fA-F]{6}",bx=function(e,r){return e<r?-1:e>r?1:0},YI=function(e,r){return-1*bx(e,r)},xe=Object.assign!=null?Object.assign.bind(Object):function(t){for(var e=arguments,r=1;r<e.length;r++){var n=e[r];if(n!=null)for(var a=Object.keys(n),i=0;i<a.length;i++){var s=a[i];t[s]=n[s]}}return t},WI=function(e){if(!(!(e.length===4||e.length===7)||e[0]!=="#")){var r=e.length===4,n,a,i,s=16;return r?(n=parseInt(e[1]+e[1],s),a=parseInt(e[2]+e[2],s),i=parseInt(e[3]+e[3],s)):(n=parseInt(e[1]+e[2],s),a=parseInt(e[3]+e[4],s),i=parseInt(e[5]+e[6],s)),[n,a,i]}},XI=function(e){var r,n,a,i,s,o,u,l;function f(v,p,g){return g<0&&(g+=1),g>1&&(g-=1),g<1/6?v+(p-v)*6*g:g<1/2?p:g<2/3?v+(p-v)*(2/3-g)*6:v}var c=new RegExp("^"+$I+"$").exec(e);if(c){if(n=parseInt(c[1]),n<0?n=(360- -1*n%360)%360:n>360&&(n=n%360),n/=360,a=parseFloat(c[2]),a<0||a>100||(a=a/100,i=parseFloat(c[3]),i<0||i>100)||(i=i/100,s=c[4],s!==void 0&&(s=parseFloat(s),s<0||s>1)))return;if(a===0)o=u=l=Math.round(i*255);else{var h=i<.5?i*(1+a):i+a-i*a,d=2*i-h;o=Math.round(255*f(d,h,n+1/3)),u=Math.round(255*f(d,h,n)),l=Math.round(255*f(d,h,n-1/3))}r=[o,u,l,s]}return r},KI=function(e){var r,n=new RegExp("^"+GI+"$").exec(e);if(n){r=[];for(var a=[],i=1;i<=3;i++){var s=n[i];if(s[s.length-1]==="%"&&(a[i]=!0),s=parseFloat(s),a[i]&&(s=s/100*255),s<0||s>255)return;r.push(Math.floor(s))}var o=a[1]||a[2]||a[3],u=a[1]&&a[2]&&a[3];if(o&&!u)return;var l=n[4];if(l!==void 0){if(l=parseFloat(l),l<0||l>1)return;r.push(l)}}return r},jI=function(e){return ZI[e.toLowerCase()]},wx=function(e){return($e(e)?e:null)||jI(e)||WI(e)||KI(e)||XI(e)},ZI={transparent:[0,0,0,0],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},Ex=function(e){for(var r=e.map,n=e.keys,a=n.length,i=0;i<a;i++){var s=n[i];if(Be(s))throw Error("Tried to set map with object key");i<n.length-1?(r[s]==null&&(r[s]={}),r=r[s]):r[s]=e.value}},xx=function(e){for(var r=e.map,n=e.keys,a=n.length,i=0;i<a;i++){var s=n[i];if(Be(s))throw Error("Tried to get map with object key");if(r=r[s],r==null)return r}return r},ja=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Oa(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Bs,kg;function Pa(){if(kg)return Bs;kg=1;function t(e){var r=typeof e;return e!=null&&(r=="object"||r=="function")}return Bs=t,Bs}var Fs,Ng;function QI(){if(Ng)return Fs;Ng=1;var t=typeof ja=="object"&&ja&&ja.Object===Object&&ja;return Fs=t,Fs}var qs,Bg;function Xi(){if(Bg)return qs;Bg=1;var t=QI(),e=typeof self=="object"&&self&&self.Object===Object&&self,r=t||e||Function("return this")();return qs=r,qs}var Gs,Fg;function JI(){if(Fg)return Gs;Fg=1;var t=Xi(),e=function(){return t.Date.now()};return Gs=e,Gs}var zs,qg;function eD(){if(qg)return zs;qg=1;var t=/\s/;function e(r){for(var n=r.length;n--&&t.test(r.charAt(n)););return n}return zs=e,zs}var $s,Gg;function tD(){if(Gg)return $s;Gg=1;var t=eD(),e=/^\s+/;function r(n){return n&&n.slice(0,t(n)+1).replace(e,"")}return $s=r,$s}var Vs,zg;function Ev(){if(zg)return Vs;zg=1;var t=Xi(),e=t.Symbol;return Vs=e,Vs}var Us,$g;function rD(){if($g)return Us;$g=1;var t=Ev(),e=Object.prototype,r=e.hasOwnProperty,n=e.toString,a=t?t.toStringTag:void 0;function i(s){var o=r.call(s,a),u=s[a];try{s[a]=void 0;var l=!0}catch{}var f=n.call(s);return l&&(o?s[a]=u:delete s[a]),f}return Us=i,Us}var Hs,Vg;function nD(){if(Vg)return Hs;Vg=1;var t=Object.prototype,e=t.toString;function r(n){return e.call(n)}return Hs=r,Hs}var Ys,Ug;function Tx(){if(Ug)return Ys;Ug=1;var t=Ev(),e=rD(),r=nD(),n="[object Null]",a="[object Undefined]",i=t?t.toStringTag:void 0;function s(o){return o==null?o===void 0?a:n:i&&i in Object(o)?e(o):r(o)}return Ys=s,Ys}var Ws,Hg;function aD(){if(Hg)return Ws;Hg=1;function t(e){return e!=null&&typeof e=="object"}return Ws=t,Ws}var Xs,Yg;function ka(){if(Yg)return Xs;Yg=1;var t=Tx(),e=aD(),r="[object Symbol]";function n(a){return typeof a=="symbol"||e(a)&&t(a)==r}return Xs=n,Xs}var Ks,Wg;function iD(){if(Wg)return Ks;Wg=1;var t=tD(),e=Pa(),r=ka(),n=NaN,a=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,s=/^0o[0-7]+$/i,o=parseInt;function u(l){if(typeof l=="number")return l;if(r(l))return n;if(e(l)){var f=typeof l.valueOf=="function"?l.valueOf():l;l=e(f)?f+"":f}if(typeof l!="string")return l===0?l:+l;l=t(l);var c=i.test(l);return c||s.test(l)?o(l.slice(2),c?2:8):a.test(l)?n:+l}return Ks=u,Ks}var js,Xg;function sD(){if(Xg)return js;Xg=1;var t=Pa(),e=JI(),r=iD(),n="Expected a function",a=Math.max,i=Math.min;function s(o,u,l){var f,c,h,d,v,p,g=0,y=!1,m=!1,b=!0;if(typeof o!="function")throw new TypeError(n);u=r(u)||0,t(l)&&(y=!!l.leading,m="maxWait"in l,h=m?a(r(l.maxWait)||0,u):h,b="trailing"in l?!!l.trailing:b);function E(D){var _=f,M=c;return f=c=void 0,g=D,d=o.apply(M,_),d}function x(D){return g=D,v=setTimeout(T,u),y?E(D):d}function S(D){var _=D-p,M=D-g,k=u-_;return m?i(k,h-M):k}function w(D){var _=D-p,M=D-g;return p===void 0||_>=u||_<0||m&&M>=h}function T(){var D=e();if(w(D))return C(D);v=setTimeout(T,S(D))}function C(D){return v=void 0,b&&f?E(D):(f=c=void 0,d)}function A(){v!==void 0&&clearTimeout(v),g=0,f=p=c=v=void 0}function R(){return v===void 0?d:C(e())}function I(){var D=e(),_=w(D);if(f=arguments,c=this,p=D,_){if(v===void 0)return x(p);if(m)return clearTimeout(v),v=setTimeout(T,u),E(p)}return v===void 0&&(v=setTimeout(T,u)),d}return I.cancel=A,I.flush=R,I}return js=s,js}var oD=sD(),Na=Oa(oD),Zs=it?it.performance:null,Cx=Zs&&Zs.now?function(){return Zs.now()}:function(){return Date.now()},uD=function(){if(it){if(it.requestAnimationFrame)return function(t){it.requestAnimationFrame(t)};if(it.mozRequestAnimationFrame)return function(t){it.mozRequestAnimationFrame(t)};if(it.webkitRequestAnimationFrame)return function(t){it.webkitRequestAnimationFrame(t)};if(it.msRequestAnimationFrame)return function(t){it.msRequestAnimationFrame(t)}}return function(t){t&&setTimeout(function(){t(Cx())},1e3/60)}}(),Ai=function(e){return uD(e)},fr=Cx,Qr=9261,Sx=65599,In=5381,Ax=function(e){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Qr,n=r,a;a=e.next(),!a.done;)n=n*Sx+a.value|0;return n},wa=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Qr;return r*Sx+e|0},Ea=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:In;return(r<<5)+r+e|0},lD=function(e,r){return e*2097152+r},mr=function(e){return e[0]*2097152+e[1]},Za=function(e,r){return[wa(e[0],r[0]),Ea(e[1],r[1])]},Kg=function(e,r){var n={value:0,done:!1},a=0,i=e.length,s={next:function(){return a<i?n.value=e[a++]:n.done=!0,n}};return Ax(s,r)},on=function(e,r){var n={value:0,done:!1},a=0,i=e.length,s={next:function(){return a<i?n.value=e.charCodeAt(a++):n.done=!0,n}};return Ax(s,r)},Rx=function(){return fD(arguments)},fD=function(e){for(var r,n=0;n<e.length;n++){var a=e[n];n===0?r=on(a):r=on(a,r)}return r};function cD(t,e,r,n,a){var i=a*Math.PI/180,s=Math.cos(i)*(t-r)-Math.sin(i)*(e-n)+r,o=Math.sin(i)*(t-r)+Math.cos(i)*(e-n)+n;return{x:s,y:o}}var hD=function(e,r,n,a,i,s){return{x:(e-n)*i+n,y:(r-a)*s+a}};function dD(t,e,r){if(r===0)return t;var n=(e.x1+e.x2)/2,a=(e.y1+e.y2)/2,i=e.w/e.h,s=1/i,o=cD(t.x,t.y,n,a,r),u=hD(o.x,o.y,n,a,i,s);return{x:u.x,y:u.y}}var jg=!0,vD=console.warn!=null,gD=console.trace!=null,xv=Number.MAX_SAFE_INTEGER||9007199254740991,Ix=function(){return!0},Ri=function(){return!1},Zg=function(){return 0},Tv=function(){},We=function(e){throw new Error(e)},Dx=function(e){if(e!==void 0)jg=!!e;else return jg},Ge=function(e){Dx()&&(vD?console.warn(e):(console.log(e),gD&&console.trace()))},pD=function(e){return xe({},e)},Jt=function(e){return e==null?e:$e(e)?e.slice():Be(e)?pD(e):e},yD=function(e){return e.slice()},_x=function(e,r){for(r=e="";e++<36;r+=e*51&52?(e^15?8^Math.random()*(e^20?16:4):4).toString(16):"-");return r},mD={},Lx=function(){return mD},pt=function(e){var r=Object.keys(e);return function(n){for(var a={},i=0;i<r.length;i++){var s=r[i],o=n==null?void 0:n[s];a[s]=o===void 0?e[s]:o}return a}},Pr=function(e,r,n){for(var a=e.length-1;a>=0;a--)e[a]===r&&e.splice(a,1)},Cv=function(e){e.splice(0,e.length)},bD=function(e,r){for(var n=0;n<r.length;n++){var a=r[n];e.push(a)}},Dt=function(e,r,n){return n&&(r=mx(n,r)),e[r]},or=function(e,r,n,a){n&&(r=mx(n,r)),e[r]=a},wD=function(){function t(){qr(this,t),this._obj={}}return Gr(t,[{key:"set",value:function(r,n){return this._obj[r]=n,this}},{key:"delete",value:function(r){return this._obj[r]=void 0,this}},{key:"clear",value:function(){this._obj={}}},{key:"has",value:function(r){return this._obj[r]!==void 0}},{key:"get",value:function(r){return this._obj[r]}}])}(),ur=typeof Map<"u"?Map:wD,ED="undefined",xD=function(){function t(e){if(qr(this,t),this._obj=Object.create(null),this.size=0,e!=null){var r;e.instanceString!=null&&e.instanceString()===this.instanceString()?r=e.toArray():r=e;for(var n=0;n<r.length;n++)this.add(r[n])}}return Gr(t,[{key:"instanceString",value:function(){return"set"}},{key:"add",value:function(r){var n=this._obj;n[r]!==1&&(n[r]=1,this.size++)}},{key:"delete",value:function(r){var n=this._obj;n[r]===1&&(n[r]=0,this.size--)}},{key:"clear",value:function(){this._obj=Object.create(null)}},{key:"has",value:function(r){return this._obj[r]===1}},{key:"toArray",value:function(){var r=this;return Object.keys(this._obj).filter(function(n){return r.has(n)})}},{key:"forEach",value:function(r,n){return this.toArray().forEach(r,n)}}])}(),zn=(typeof Set>"u"?"undefined":ot(Set))!==ED?Set:xD,Ki=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(e===void 0||r===void 0||!bv(e)){We("An element must have a core reference and parameters set");return}var a=r.group;if(a==null&&(r.data&&r.data.source!=null&&r.data.target!=null?a="edges":a="nodes"),a!=="nodes"&&a!=="edges"){We("An element must be of type `nodes` or `edges`; you specified `"+a+"`");return}this.length=1,this[0]=this;var i=this._private={cy:e,single:!0,data:r.data||{},position:r.position||{x:0,y:0},autoWidth:void 0,autoHeight:void 0,autoPadding:void 0,compoundBoundsClean:!1,listeners:[],group:a,style:{},rstyle:{},styleCxts:[],styleKeys:{},removed:!0,selected:!!r.selected,selectable:r.selectable===void 0?!0:!!r.selectable,locked:!!r.locked,grabbed:!1,grabbable:r.grabbable===void 0?!0:!!r.grabbable,pannable:r.pannable===void 0?a==="edges":!!r.pannable,active:!1,classes:new zn,animation:{current:[],queue:[]},rscratch:{},scratch:r.scratch||{},edges:[],children:[],parent:r.parent&&r.parent.isNode()?r.parent:null,traversalCache:{},backgrounding:!1,bbCache:null,bbCacheShift:{x:0,y:0},bodyBounds:null,overlayBounds:null,labelBounds:{all:null,source:null,target:null,main:null},arrowBounds:{source:null,target:null,"mid-source":null,"mid-target":null}};if(i.position.x==null&&(i.position.x=0),i.position.y==null&&(i.position.y=0),r.renderedPosition){var s=r.renderedPosition,o=e.pan(),u=e.zoom();i.position={x:(s.x-o.x)/u,y:(s.y-o.y)/u}}var l=[];$e(r.classes)?l=r.classes:we(r.classes)&&(l=r.classes.split(/\s+/));for(var f=0,c=l.length;f<c;f++){var h=l[f];!h||h===""||i.classes.add(h)}this.createEmitter(),(n===void 0||n)&&this.restore();var d=r.style||r.css;d&&(Ge("Setting a `style` bypass at element creation should be done only when absolutely necessary.  Try to use the stylesheet instead."),this.style(d))},Qg=function(e){return e={bfs:e.bfs||!e.dfs,dfs:e.dfs||!e.bfs},function(n,a,i){var s;Be(n)&&!Pt(n)&&(s=n,n=s.roots||s.root,a=s.visit,i=s.directed),i=arguments.length===2&&!Ke(a)?a:i,a=Ke(a)?a:function(){};for(var o=this._private.cy,u=n=we(n)?this.filter(n):n,l=[],f=[],c={},h={},d={},v=0,p,g=this.byGroup(),y=g.nodes,m=g.edges,b=0;b<u.length;b++){var E=u[b],x=E.id();E.isNode()&&(l.unshift(E),e.bfs&&(d[x]=!0,f.push(E)),h[x]=0)}for(var S=function(){var D=e.bfs?l.shift():l.pop(),_=D.id();if(e.dfs){if(d[_])return 0;d[_]=!0,f.push(D)}var M=h[_],k=c[_],O=k!=null?k.source():null,P=k!=null?k.target():null,q=k==null?void 0:D.same(O)?P[0]:O[0],G;if(G=a(D,k,q,v++,M),G===!0)return p=D,1;if(G===!1)return 1;for(var F=D.connectedEdges().filter(function($){return(!i||$.source().same(D))&&m.has($)}),z=0;z<F.length;z++){var W=F[z],N=W.connectedNodes().filter(function($){return!$.same(D)&&y.has($)}),B=N.id();N.length!==0&&!d[B]&&(N=N[0],l.push(N),e.bfs&&(d[B]=!0,f.push(N)),c[B]=W,h[B]=h[_]+1)}},w;l.length!==0&&(w=S(),!(w!==0&&w===1)););for(var T=o.collection(),C=0;C<f.length;C++){var A=f[C],R=c[A.id()];R!=null&&T.push(R),T.push(A)}return{path:o.collection(T),found:o.collection(p)}}},xa={breadthFirstSearch:Qg({bfs:!0}),depthFirstSearch:Qg({dfs:!0})};xa.bfs=xa.breadthFirstSearch;xa.dfs=xa.depthFirstSearch;var li={exports:{}},TD=li.exports,Jg;function CD(){return Jg||(Jg=1,function(t,e){(function(){var r,n,a,i,s,o,u,l,f,c,h,d,v,p,g;a=Math.floor,c=Math.min,n=function(y,m){return y<m?-1:y>m?1:0},f=function(y,m,b,E,x){var S;if(b==null&&(b=0),x==null&&(x=n),b<0)throw new Error("lo must be non-negative");for(E==null&&(E=y.length);b<E;)S=a((b+E)/2),x(m,y[S])<0?E=S:b=S+1;return[].splice.apply(y,[b,b-b].concat(m)),m},o=function(y,m,b){return b==null&&(b=n),y.push(m),p(y,0,y.length-1,b)},s=function(y,m){var b,E;return m==null&&(m=n),b=y.pop(),y.length?(E=y[0],y[0]=b,g(y,0,m)):E=b,E},l=function(y,m,b){var E;return b==null&&(b=n),E=y[0],y[0]=m,g(y,0,b),E},u=function(y,m,b){var E;return b==null&&(b=n),y.length&&b(y[0],m)<0&&(E=[y[0],m],m=E[0],y[0]=E[1],g(y,0,b)),m},i=function(y,m){var b,E,x,S,w,T;for(m==null&&(m=n),S=(function(){T=[];for(var C=0,A=a(y.length/2);0<=A?C<A:C>A;0<=A?C++:C--)T.push(C);return T}).apply(this).reverse(),w=[],E=0,x=S.length;E<x;E++)b=S[E],w.push(g(y,b,m));return w},v=function(y,m,b){var E;if(b==null&&(b=n),E=y.indexOf(m),E!==-1)return p(y,0,E,b),g(y,E,b)},h=function(y,m,b){var E,x,S,w,T;if(b==null&&(b=n),x=y.slice(0,m),!x.length)return x;for(i(x,b),T=y.slice(m),S=0,w=T.length;S<w;S++)E=T[S],u(x,E,b);return x.sort(b).reverse()},d=function(y,m,b){var E,x,S,w,T,C,A,R,I;if(b==null&&(b=n),m*10<=y.length){if(S=y.slice(0,m).sort(b),!S.length)return S;for(x=S[S.length-1],A=y.slice(m),w=0,C=A.length;w<C;w++)E=A[w],b(E,x)<0&&(f(S,E,0,null,b),S.pop(),x=S[S.length-1]);return S}for(i(y,b),I=[],T=0,R=c(m,y.length);0<=R?T<R:T>R;0<=R?++T:--T)I.push(s(y,b));return I},p=function(y,m,b,E){var x,S,w;for(E==null&&(E=n),x=y[b];b>m;){if(w=b-1>>1,S=y[w],E(x,S)<0){y[b]=S,b=w;continue}break}return y[b]=x},g=function(y,m,b){var E,x,S,w,T;for(b==null&&(b=n),x=y.length,T=m,S=y[m],E=2*m+1;E<x;)w=E+1,w<x&&!(b(y[E],y[w])<0)&&(E=w),y[m]=y[E],m=E,E=2*m+1;return y[m]=S,p(y,T,m,b)},r=function(){y.push=o,y.pop=s,y.replace=l,y.pushpop=u,y.heapify=i,y.updateItem=v,y.nlargest=h,y.nsmallest=d;function y(m){this.cmp=m??n,this.nodes=[]}return y.prototype.push=function(m){return o(this.nodes,m,this.cmp)},y.prototype.pop=function(){return s(this.nodes,this.cmp)},y.prototype.peek=function(){return this.nodes[0]},y.prototype.contains=function(m){return this.nodes.indexOf(m)!==-1},y.prototype.replace=function(m){return l(this.nodes,m,this.cmp)},y.prototype.pushpop=function(m){return u(this.nodes,m,this.cmp)},y.prototype.heapify=function(){return i(this.nodes,this.cmp)},y.prototype.updateItem=function(m){return v(this.nodes,m,this.cmp)},y.prototype.clear=function(){return this.nodes=[]},y.prototype.empty=function(){return this.nodes.length===0},y.prototype.size=function(){return this.nodes.length},y.prototype.clone=function(){var m;return m=new y,m.nodes=this.nodes.slice(0),m},y.prototype.toArray=function(){return this.nodes.slice(0)},y.prototype.insert=y.prototype.push,y.prototype.top=y.prototype.peek,y.prototype.front=y.prototype.peek,y.prototype.has=y.prototype.contains,y.prototype.copy=y.prototype.clone,y}(),function(y,m){return t.exports=m()}(this,function(){return r})}).call(TD)}(li)),li.exports}var Qs,ep;function SD(){return ep||(ep=1,Qs=CD()),Qs}var AD=SD(),Ba=Oa(AD),RD=pt({root:null,weight:function(e){return 1},directed:!1}),ID={dijkstra:function(e){if(!Be(e)){var r=arguments;e={root:r[0],weight:r[1],directed:r[2]}}var n=RD(e),a=n.root,i=n.weight,s=n.directed,o=this,u=i,l=we(a)?this.filter(a)[0]:a[0],f={},c={},h={},d=this.byGroup(),v=d.nodes,p=d.edges;p.unmergeBy(function(M){return M.isLoop()});for(var g=function(k){return f[k.id()]},y=function(k,O){f[k.id()]=O,m.updateItem(k)},m=new Ba(function(M,k){return g(M)-g(k)}),b=0;b<v.length;b++){var E=v[b];f[E.id()]=E.same(l)?0:1/0,m.push(E)}for(var x=function(k,O){for(var P=(s?k.edgesTo(O):k.edgesWith(O)).intersect(p),q=1/0,G,F=0;F<P.length;F++){var z=P[F],W=u(z);(W<q||!G)&&(q=W,G=z)}return{edge:G,dist:q}};m.size()>0;){var S=m.pop(),w=g(S),T=S.id();if(h[T]=w,w!==1/0)for(var C=S.neighborhood().intersect(v),A=0;A<C.length;A++){var R=C[A],I=R.id(),D=x(S,R),_=w+D.dist;_<g(R)&&(y(R,_),c[I]={node:S,edge:D.edge})}}return{distanceTo:function(k){var O=we(k)?v.filter(k)[0]:k[0];return h[O.id()]},pathTo:function(k){var O=we(k)?v.filter(k)[0]:k[0],P=[],q=O,G=q.id();if(O.length>0)for(P.unshift(O);c[G];){var F=c[G];P.unshift(F.edge),P.unshift(F.node),q=F.node,G=q.id()}return o.spawn(P)}}}},DD={kruskal:function(e){e=e||function(b){return 1};for(var r=this.byGroup(),n=r.nodes,a=r.edges,i=n.length,s=new Array(i),o=n,u=function(E){for(var x=0;x<s.length;x++){var S=s[x];if(S.has(E))return x}},l=0;l<i;l++)s[l]=this.spawn(n[l]);for(var f=a.sort(function(b,E){return e(b)-e(E)}),c=0;c<f.length;c++){var h=f[c],d=h.source()[0],v=h.target()[0],p=u(d),g=u(v),y=s[p],m=s[g];p!==g&&(o.merge(h),y.merge(m),s.splice(g,1))}return o}},_D=pt({root:null,goal:null,weight:function(e){return 1},heuristic:function(e){return 0},directed:!1}),LD={aStar:function(e){var r=this.cy(),n=_D(e),a=n.root,i=n.goal,s=n.heuristic,o=n.directed,u=n.weight;a=r.collection(a)[0],i=r.collection(i)[0];var l=a.id(),f=i.id(),c={},h={},d={},v=new Ba(function(G,F){return h[G.id()]-h[F.id()]}),p=new zn,g={},y={},m=function(F,z){v.push(F),p.add(z)},b,E,x=function(){b=v.pop(),E=b.id(),p.delete(E)},S=function(F){return p.has(F)};m(a,l),c[l]=0,h[l]=s(a);for(var w=0;v.size()>0;){if(x(),w++,E===f){for(var T=[],C=i,A=f,R=y[A];T.unshift(C),R!=null&&T.unshift(R),C=g[A],C!=null;)A=C.id(),R=y[A];return{found:!0,distance:c[E],path:this.spawn(T),steps:w}}d[E]=!0;for(var I=b._private.edges,D=0;D<I.length;D++){var _=I[D];if(this.hasElementWithId(_.id())&&!(o&&_.data("source")!==E)){var M=_.source(),k=_.target(),O=M.id()!==E?M:k,P=O.id();if(this.hasElementWithId(P)&&!d[P]){var q=c[E]+u(_);if(!S(P)){c[P]=q,h[P]=q+s(O),m(O,P),g[P]=b,y[P]=_;continue}q<c[P]&&(c[P]=q,h[P]=q+s(O),g[P]=b,y[P]=_)}}}}return{found:!1,distance:void 0,path:void 0,steps:w}}},MD=pt({weight:function(e){return 1},directed:!1}),OD={floydWarshall:function(e){for(var r=this.cy(),n=MD(e),a=n.weight,i=n.directed,s=a,o=this.byGroup(),u=o.nodes,l=o.edges,f=u.length,c=f*f,h=function(W){return u.indexOf(W)},d=function(W){return u[W]},v=new Array(c),p=0;p<c;p++){var g=p%f,y=(p-g)/f;y===g?v[p]=0:v[p]=1/0}for(var m=new Array(c),b=new Array(c),E=0;E<l.length;E++){var x=l[E],S=x.source()[0],w=x.target()[0];if(S!==w){var T=h(S),C=h(w),A=T*f+C,R=s(x);if(v[A]>R&&(v[A]=R,m[A]=C,b[A]=x),!i){var I=C*f+T;!i&&v[I]>R&&(v[I]=R,m[I]=T,b[I]=x)}}}for(var D=0;D<f;D++)for(var _=0;_<f;_++)for(var M=_*f+D,k=0;k<f;k++){var O=_*f+k,P=D*f+k;v[M]+v[P]<v[O]&&(v[O]=v[M]+v[P],m[O]=m[M])}var q=function(W){return(we(W)?r.filter(W):W)[0]},G=function(W){return h(q(W))},F={distance:function(W,N){var B=G(W),$=G(N);return v[B*f+$]},path:function(W,N){var B=G(W),$=G(N),H=d(B);if(B===$)return H.collection();if(m[B*f+$]==null)return r.collection();var te=r.collection(),K=B,V;for(te.merge(H);B!==$;)K=B,B=m[B*f+$],V=b[K*f+B],te.merge(V),te.merge(d(B));return te}};return F}},PD=pt({weight:function(e){return 1},directed:!1,root:null}),kD={bellmanFord:function(e){var r=this,n=PD(e),a=n.weight,i=n.directed,s=n.root,o=a,u=this,l=this.cy(),f=this.byGroup(),c=f.edges,h=f.nodes,d=h.length,v=new ur,p=!1,g=[];s=l.collection(s)[0],c.unmergeBy(function(se){return se.isLoop()});for(var y=c.length,m=function(be){var ge=v.get(be.id());return ge||(ge={},v.set(be.id(),ge)),ge},b=function(be){return(we(be)?l.$(be):be)[0]},E=function(be){return m(b(be)).dist},x=function(be){for(var ge=arguments.length>1&&arguments[1]!==void 0?arguments[1]:s,oe=b(be),de=[],fe=oe;;){if(fe==null)return r.spawn();var ve=m(fe),pe=ve.edge,Ce=ve.pred;if(de.unshift(fe[0]),fe.same(ge)&&de.length>0)break;pe!=null&&de.unshift(pe),fe=Ce}return u.spawn(de)},S=0;S<d;S++){var w=h[S],T=m(w);w.same(s)?T.dist=0:T.dist=1/0,T.pred=null,T.edge=null}for(var C=!1,A=function(be,ge,oe,de,fe,ve){var pe=de.dist+ve;pe<fe.dist&&!oe.same(de.edge)&&(fe.dist=pe,fe.pred=be,fe.edge=oe,C=!0)},R=1;R<d;R++){C=!1;for(var I=0;I<y;I++){var D=c[I],_=D.source(),M=D.target(),k=o(D),O=m(_),P=m(M);A(_,M,D,O,P,k),i||A(M,_,D,P,O,k)}if(!C)break}if(C)for(var q=[],G=0;G<y;G++){var F=c[G],z=F.source(),W=F.target(),N=o(F),B=m(z).dist,$=m(W).dist;if(B+N<$||!i&&$+N<B)if(p||(Ge("Graph contains a negative weight cycle for Bellman-Ford"),p=!0),e.findNegativeWeightCycles!==!1){var H=[];B+N<$&&H.push(z),!i&&$+N<B&&H.push(W);for(var te=H.length,K=0;K<te;K++){var V=H[K],U=[V];U.push(m(V).edge);for(var X=m(V).pred;U.indexOf(X)===-1;)U.push(X),U.push(m(X).edge),X=m(X).pred;U=U.slice(U.indexOf(X));for(var j=U[0].id(),ne=0,ae=2;ae<U.length;ae+=2)U[ae].id()<j&&(j=U[ae].id(),ne=ae);U=U.slice(ne).concat(U.slice(0,ne)),U.push(U[0]);var Se=U.map(function(se){return se.id()}).join(",");q.indexOf(Se)===-1&&(g.push(u.spawn(U)),q.push(Se))}}else break}return{distanceTo:E,pathTo:x,hasNegativeWeightCycle:p,negativeWeightCycles:g}}},ND=Math.sqrt(2),BD=function(e,r,n){n.length===0&&We("Karger-Stein must be run on a connected (sub)graph");for(var a=n[e],i=a[1],s=a[2],o=r[i],u=r[s],l=n,f=l.length-1;f>=0;f--){var c=l[f],h=c[1],d=c[2];(r[h]===o&&r[d]===u||r[h]===u&&r[d]===o)&&l.splice(f,1)}for(var v=0;v<l.length;v++){var p=l[v];p[1]===u?(l[v]=p.slice(),l[v][1]=o):p[2]===u&&(l[v]=p.slice(),l[v][2]=o)}for(var g=0;g<r.length;g++)r[g]===u&&(r[g]=o);return l},Js=function(e,r,n,a){for(;n>a;){var i=Math.floor(Math.random()*r.length);r=BD(i,e,r),n--}return r},FD={kargerStein:function(){var e=this,r=this.byGroup(),n=r.nodes,a=r.edges;a.unmergeBy(function(P){return P.isLoop()});var i=n.length,s=a.length,o=Math.ceil(Math.pow(Math.log(i)/Math.LN2,2)),u=Math.floor(i/ND);if(i<2){We("At least 2 nodes are required for Karger-Stein algorithm");return}for(var l=[],f=0;f<s;f++){var c=a[f];l.push([f,n.indexOf(c.source()),n.indexOf(c.target())])}for(var h=1/0,d=[],v=new Array(i),p=new Array(i),g=new Array(i),y=function(q,G){for(var F=0;F<i;F++)G[F]=q[F]},m=0;m<=o;m++){for(var b=0;b<i;b++)p[b]=b;var E=Js(p,l.slice(),i,u),x=E.slice();y(p,g);var S=Js(p,E,u,2),w=Js(g,x,u,2);S.length<=w.length&&S.length<h?(h=S.length,d=S,y(p,v)):w.length<=S.length&&w.length<h&&(h=w.length,d=w,y(g,v))}for(var T=this.spawn(d.map(function(P){return a[P[0]]})),C=this.spawn(),A=this.spawn(),R=v[0],I=0;I<v.length;I++){var D=v[I],_=n[I];D===R?C.merge(_):A.merge(_)}var M=function(q){var G=e.spawn();return q.forEach(function(F){G.merge(F),F.connectedEdges().forEach(function(z){e.contains(z)&&!T.contains(z)&&G.merge(z)})}),G},k=[M(C),M(A)],O={cut:T,components:k,partition1:C,partition2:A};return O}},eo,qD=function(e){return{x:e.x,y:e.y}},ji=function(e,r,n){return{x:e.x*r+n.x,y:e.y*r+n.y}},Mx=function(e,r,n){return{x:(e.x-n.x)/r,y:(e.y-n.y)/r}},Dn=function(e){return{x:e[0],y:e[1]}},GD=function(e){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,a=1/0,i=r;i<n;i++){var s=e[i];isFinite(s)&&(a=Math.min(s,a))}return a},zD=function(e){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,a=-1/0,i=r;i<n;i++){var s=e[i];isFinite(s)&&(a=Math.max(s,a))}return a},$D=function(e){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,a=0,i=0,s=r;s<n;s++){var o=e[s];isFinite(o)&&(a+=o,i++)}return a/i},VD=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,s=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0;a?e=e.slice(r,n):(n<e.length&&e.splice(n,e.length-n),r>0&&e.splice(0,r));for(var o=0,u=e.length-1;u>=0;u--){var l=e[u];s?isFinite(l)||(e[u]=-1/0,o++):e.splice(u,1)}i&&e.sort(function(h,d){return h-d});var f=e.length,c=Math.floor(f/2);return f%2!==0?e[c+1+o]:(e[c-1+o]+e[c+o])/2},UD=function(e){return Math.PI*e/180},Qa=function(e,r){return Math.atan2(r,e)-Math.PI/2},Sv=Math.log2||function(t){return Math.log(t)/Math.log(2)},Av=function(e){return e>0?1:e<0?-1:0},un=function(e,r){return Math.sqrt(Kr(e,r))},Kr=function(e,r){var n=r.x-e.x,a=r.y-e.y;return n*n+a*a},HD=function(e){for(var r=e.length,n=0,a=0;a<r;a++)n+=e[a];for(var i=0;i<r;i++)e[i]=e[i]/n;return e},ft=function(e,r,n,a){return(1-a)*(1-a)*e+2*(1-a)*a*r+a*a*n},On=function(e,r,n,a){return{x:ft(e.x,r.x,n.x,a),y:ft(e.y,r.y,n.y,a)}},YD=function(e,r,n,a){var i={x:r.x-e.x,y:r.y-e.y},s=un(e,r),o={x:i.x/s,y:i.y/s};return n=n??0,a=a??n*s,{x:e.x+o.x*a,y:e.y+o.y*a}},Ta=function(e,r,n){return Math.max(e,Math.min(n,r))},St=function(e){if(e==null)return{x1:1/0,y1:1/0,x2:-1/0,y2:-1/0,w:0,h:0};if(e.x1!=null&&e.y1!=null){if(e.x2!=null&&e.y2!=null&&e.x2>=e.x1&&e.y2>=e.y1)return{x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,w:e.x2-e.x1,h:e.y2-e.y1};if(e.w!=null&&e.h!=null&&e.w>=0&&e.h>=0)return{x1:e.x1,y1:e.y1,x2:e.x1+e.w,y2:e.y1+e.h,w:e.w,h:e.h}}},WD=function(e){return{x1:e.x1,x2:e.x2,w:e.w,y1:e.y1,y2:e.y2,h:e.h}},XD=function(e){e.x1=1/0,e.y1=1/0,e.x2=-1/0,e.y2=-1/0,e.w=0,e.h=0},KD=function(e,r){e.x1=Math.min(e.x1,r.x1),e.x2=Math.max(e.x2,r.x2),e.w=e.x2-e.x1,e.y1=Math.min(e.y1,r.y1),e.y2=Math.max(e.y2,r.y2),e.h=e.y2-e.y1},Ox=function(e,r,n){e.x1=Math.min(e.x1,r),e.x2=Math.max(e.x2,r),e.w=e.x2-e.x1,e.y1=Math.min(e.y1,n),e.y2=Math.max(e.y2,n),e.h=e.y2-e.y1},fi=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return e.x1-=r,e.x2+=r,e.y1-=r,e.y2+=r,e.w=e.x2-e.x1,e.h=e.y2-e.y1,e},ci=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0],n,a,i,s;if(r.length===1)n=a=i=s=r[0];else if(r.length===2)n=i=r[0],s=a=r[1];else if(r.length===4){var o=tt(r,4);n=o[0],a=o[1],i=o[2],s=o[3]}return e.x1-=s,e.x2+=a,e.y1-=n,e.y2+=i,e.w=e.x2-e.x1,e.h=e.y2-e.y1,e},tp=function(e,r){e.x1=r.x1,e.y1=r.y1,e.x2=r.x2,e.y2=r.y2,e.w=e.x2-e.x1,e.h=e.y2-e.y1},Rv=function(e,r){return!(e.x1>r.x2||r.x1>e.x2||e.x2<r.x1||r.x2<e.x1||e.y2<r.y1||r.y2<e.y1||e.y1>r.y2||r.y1>e.y2)},Tr=function(e,r,n){return e.x1<=r&&r<=e.x2&&e.y1<=n&&n<=e.y2},rp=function(e,r){return Tr(e,r.x,r.y)},Px=function(e,r){return Tr(e,r.x1,r.y1)&&Tr(e,r.x2,r.y2)},jD=(eo=Math.hypot)!==null&&eo!==void 0?eo:function(t,e){return Math.sqrt(t*t+e*e)};function ZD(t,e){if(t.length<3)throw new Error("Need at least 3 vertices");var r=function(T,C){return{x:T.x+C.x,y:T.y+C.y}},n=function(T,C){return{x:T.x-C.x,y:T.y-C.y}},a=function(T,C){return{x:T.x*C,y:T.y*C}},i=function(T,C){return T.x*C.y-T.y*C.x},s=function(T){var C=jD(T.x,T.y);return C===0?{x:0,y:0}:{x:T.x/C,y:T.y/C}},o=function(T){for(var C=0,A=0;A<T.length;A++){var R=T[A],I=T[(A+1)%T.length];C+=R.x*I.y-I.x*R.y}return C/2},u=function(T,C,A,R){var I=n(C,T),D=n(R,A),_=i(I,D);if(Math.abs(_)<1e-9)return r(T,a(I,.5));var M=i(n(A,T),D)/_;return r(T,a(I,M))},l=t.map(function(w){return{x:w.x,y:w.y}});o(l)<0&&l.reverse();for(var f=l.length,c=[],h=0;h<f;h++){var d=l[h],v=l[(h+1)%f],p=n(v,d),g=s({x:p.y,y:-p.x});c.push(g)}for(var y=c.map(function(w,T){var C=r(l[T],a(w,e)),A=r(l[(T+1)%f],a(w,e));return{p1:C,p2:A}}),m=[],b=0;b<f;b++){var E=y[(b-1+f)%f],x=y[b],S=u(E.p1,E.p2,x.p1,x.p2);m.push(S)}return m}function QD(t,e,r,n,a,i){var s=o_(t,e,r,n,a),o=ZD(s,i),u=St();return o.forEach(function(l){return Ox(u,l.x,l.y)}),u}var kx=function(e,r,n,a,i,s,o){var u=arguments.length>7&&arguments[7]!==void 0?arguments[7]:"auto",l=u==="auto"?kr(i,s):u,f=i/2,c=s/2;l=Math.min(l,f,c);var h=l!==f,d=l!==c,v;if(h){var p=n-f+l-o,g=a-c-o,y=n+f-l+o,m=g;if(v=Cr(e,r,n,a,p,g,y,m,!1),v.length>0)return v}if(d){var b=n+f+o,E=a-c+l-o,x=b,S=a+c-l+o;if(v=Cr(e,r,n,a,b,E,x,S,!1),v.length>0)return v}if(h){var w=n-f+l-o,T=a+c+o,C=n+f-l+o,A=T;if(v=Cr(e,r,n,a,w,T,C,A,!1),v.length>0)return v}if(d){var R=n-f-o,I=a-c+l-o,D=R,_=a+c-l+o;if(v=Cr(e,r,n,a,R,I,D,_,!1),v.length>0)return v}var M;{var k=n-f+l,O=a-c+l;if(M=ua(e,r,n,a,k,O,l+o),M.length>0&&M[0]<=k&&M[1]<=O)return[M[0],M[1]]}{var P=n+f-l,q=a-c+l;if(M=ua(e,r,n,a,P,q,l+o),M.length>0&&M[0]>=P&&M[1]<=q)return[M[0],M[1]]}{var G=n+f-l,F=a+c-l;if(M=ua(e,r,n,a,G,F,l+o),M.length>0&&M[0]>=G&&M[1]>=F)return[M[0],M[1]]}{var z=n-f+l,W=a+c-l;if(M=ua(e,r,n,a,z,W,l+o),M.length>0&&M[0]<=z&&M[1]>=W)return[M[0],M[1]]}return[]},JD=function(e,r,n,a,i,s,o){var u=o,l=Math.min(n,i),f=Math.max(n,i),c=Math.min(a,s),h=Math.max(a,s);return l-u<=e&&e<=f+u&&c-u<=r&&r<=h+u},e_=function(e,r,n,a,i,s,o,u,l){var f={x1:Math.min(n,o,i)-l,x2:Math.max(n,o,i)+l,y1:Math.min(a,u,s)-l,y2:Math.max(a,u,s)+l};return!(e<f.x1||e>f.x2||r<f.y1||r>f.y2)},t_=function(e,r,n,a){n-=a;var i=r*r-4*e*n;if(i<0)return[];var s=Math.sqrt(i),o=2*e,u=(-r+s)/o,l=(-r-s)/o;return[u,l]},r_=function(e,r,n,a,i){var s=1e-5;e===0&&(e=s),r/=e,n/=e,a/=e;var o,u,l,f,c,h,d,v;if(u=(3*n-r*r)/9,l=-(27*a)+r*(9*n-2*(r*r)),l/=54,o=u*u*u+l*l,i[1]=0,d=r/3,o>0){c=l+Math.sqrt(o),c=c<0?-Math.pow(-c,1/3):Math.pow(c,1/3),h=l-Math.sqrt(o),h=h<0?-Math.pow(-h,1/3):Math.pow(h,1/3),i[0]=-d+c+h,d+=(c+h)/2,i[4]=i[2]=-d,d=Math.sqrt(3)*(-h+c)/2,i[3]=d,i[5]=-d;return}if(i[5]=i[3]=0,o===0){v=l<0?-Math.pow(-l,1/3):Math.pow(l,1/3),i[0]=-d+2*v,i[4]=i[2]=-(v+d);return}u=-u,f=u*u*u,f=Math.acos(l/Math.sqrt(f)),v=2*Math.sqrt(u),i[0]=-d+v*Math.cos(f/3),i[2]=-d+v*Math.cos((f+2*Math.PI)/3),i[4]=-d+v*Math.cos((f+4*Math.PI)/3)},n_=function(e,r,n,a,i,s,o,u){var l=1*n*n-4*n*i+2*n*o+4*i*i-4*i*o+o*o+a*a-4*a*s+2*a*u+4*s*s-4*s*u+u*u,f=1*9*n*i-3*n*n-3*n*o-6*i*i+3*i*o+9*a*s-3*a*a-3*a*u-6*s*s+3*s*u,c=1*3*n*n-6*n*i+n*o-n*e+2*i*i+2*i*e-o*e+3*a*a-6*a*s+a*u-a*r+2*s*s+2*s*r-u*r,h=1*n*i-n*n+n*e-i*e+a*s-a*a+a*r-s*r,d=[];r_(l,f,c,h,d);for(var v=1e-7,p=[],g=0;g<6;g+=2)Math.abs(d[g+1])<v&&d[g]>=0&&d[g]<=1&&p.push(d[g]);p.push(1),p.push(0);for(var y=-1,m,b,E,x=0;x<p.length;x++)m=Math.pow(1-p[x],2)*n+2*(1-p[x])*p[x]*i+p[x]*p[x]*o,b=Math.pow(1-p[x],2)*a+2*(1-p[x])*p[x]*s+p[x]*p[x]*u,E=Math.pow(m-e,2)+Math.pow(b-r,2),y>=0?E<y&&(y=E):y=E;return y},a_=function(e,r,n,a,i,s){var o=[e-n,r-a],u=[i-n,s-a],l=u[0]*u[0]+u[1]*u[1],f=o[0]*o[0]+o[1]*o[1],c=o[0]*u[0]+o[1]*u[1],h=c*c/l;return c<0?f:h>l?(e-i)*(e-i)+(r-s)*(r-s):f-h},_t=function(e,r,n){for(var a,i,s,o,u,l=0,f=0;f<n.length/2;f++)if(a=n[f*2],i=n[f*2+1],f+1<n.length/2?(s=n[(f+1)*2],o=n[(f+1)*2+1]):(s=n[(f+1-n.length/2)*2],o=n[(f+1-n.length/2)*2+1]),!(a==e&&s==e))if(a>=e&&e>=s||a<=e&&e<=s)u=(e-a)/(s-a)*(o-i)+i,u>r&&l++;else continue;return l%2!==0},cr=function(e,r,n,a,i,s,o,u,l){var f=new Array(n.length),c;u[0]!=null?(c=Math.atan(u[1]/u[0]),u[0]<0?c=c+Math.PI/2:c=-c-Math.PI/2):c=u;for(var h=Math.cos(-c),d=Math.sin(-c),v=0;v<f.length/2;v++)f[v*2]=s/2*(n[v*2]*h-n[v*2+1]*d),f[v*2+1]=o/2*(n[v*2+1]*h+n[v*2]*d),f[v*2]+=a,f[v*2+1]+=i;var p;if(l>0){var g=Di(f,-l);p=Ii(g)}else p=f;return _t(e,r,p)},i_=function(e,r,n,a,i,s,o,u){for(var l=new Array(n.length*2),f=0;f<u.length;f++){var c=u[f];l[f*4+0]=c.startX,l[f*4+1]=c.startY,l[f*4+2]=c.stopX,l[f*4+3]=c.stopY;var h=Math.pow(c.cx-e,2)+Math.pow(c.cy-r,2);if(h<=Math.pow(c.radius,2))return!0}return _t(e,r,l)},Ii=function(e){for(var r=new Array(e.length/2),n,a,i,s,o,u,l,f,c=0;c<e.length/4;c++){n=e[c*4],a=e[c*4+1],i=e[c*4+2],s=e[c*4+3],c<e.length/4-1?(o=e[(c+1)*4],u=e[(c+1)*4+1],l=e[(c+1)*4+2],f=e[(c+1)*4+3]):(o=e[0],u=e[1],l=e[2],f=e[3]);var h=Cr(n,a,i,s,o,u,l,f,!0);r[c*2]=h[0],r[c*2+1]=h[1]}return r},Di=function(e,r){for(var n=new Array(e.length*2),a,i,s,o,u=0;u<e.length/2;u++){a=e[u*2],i=e[u*2+1],u<e.length/2-1?(s=e[(u+1)*2],o=e[(u+1)*2+1]):(s=e[0],o=e[1]);var l=o-i,f=-(s-a),c=Math.sqrt(l*l+f*f),h=l/c,d=f/c;n[u*4]=a+h*r,n[u*4+1]=i+d*r,n[u*4+2]=s+h*r,n[u*4+3]=o+d*r}return n},s_=function(e,r,n,a,i,s){var o=n-e,u=a-r;o/=i,u/=s;var l=Math.sqrt(o*o+u*u),f=l-1;if(f<0)return[];var c=f/l;return[(n-e)*c+e,(a-r)*c+r]},tn=function(e,r,n,a,i,s,o){return e-=i,r-=s,e/=n/2+o,r/=a/2+o,e*e+r*r<=1},ua=function(e,r,n,a,i,s,o){var u=[n-e,a-r],l=[e-i,r-s],f=u[0]*u[0]+u[1]*u[1],c=2*(l[0]*u[0]+l[1]*u[1]),h=l[0]*l[0]+l[1]*l[1]-o*o,d=c*c-4*f*h;if(d<0)return[];var v=(-c+Math.sqrt(d))/(2*f),p=(-c-Math.sqrt(d))/(2*f),g=Math.min(v,p),y=Math.max(v,p),m=[];if(g>=0&&g<=1&&m.push(g),y>=0&&y<=1&&m.push(y),m.length===0)return[];var b=m[0]*u[0]+e,E=m[0]*u[1]+r;if(m.length>1){if(m[0]==m[1])return[b,E];var x=m[1]*u[0]+e,S=m[1]*u[1]+r;return[b,E,x,S]}else return[b,E]},to=function(e,r,n){return r<=e&&e<=n||n<=e&&e<=r?e:e<=r&&r<=n||n<=r&&r<=e?r:n},Cr=function(e,r,n,a,i,s,o,u,l){var f=e-i,c=n-e,h=o-i,d=r-s,v=a-r,p=u-s,g=h*d-p*f,y=c*d-v*f,m=p*c-h*v;if(m!==0){var b=g/m,E=y/m,x=.001,S=0-x,w=1+x;return S<=b&&b<=w&&S<=E&&E<=w?[e+b*c,r+b*v]:l?[e+b*c,r+b*v]:[]}else return g===0||y===0?to(e,n,o)===o?[o,u]:to(e,n,i)===i?[i,s]:to(i,o,n)===n?[n,a]:[]:[]},o_=function(e,r,n,a,i){var s=[],o=a/2,u=i/2,l=r,f=n;s.push({x:l+o*e[0],y:f+u*e[1]});for(var c=1;c<e.length/2;c++)s.push({x:l+o*e[c*2],y:f+u*e[c*2+1]});return s},Ca=function(e,r,n,a,i,s,o,u){var l=[],f,c=new Array(n.length),h=!0;s==null&&(h=!1);var d;if(h){for(var v=0;v<c.length/2;v++)c[v*2]=n[v*2]*s+a,c[v*2+1]=n[v*2+1]*o+i;if(u>0){var p=Di(c,-u);d=Ii(p)}else d=c}else d=n;for(var g,y,m,b,E=0;E<d.length/2;E++)g=d[E*2],y=d[E*2+1],E<d.length/2-1?(m=d[(E+1)*2],b=d[(E+1)*2+1]):(m=d[0],b=d[1]),f=Cr(e,r,a,i,g,y,m,b),f.length!==0&&l.push(f[0],f[1]);return l},u_=function(e,r,n,a,i,s,o,u,l){var f=[],c,h=new Array(n.length*2);l.forEach(function(m,b){b===0?(h[h.length-2]=m.startX,h[h.length-1]=m.startY):(h[b*4-2]=m.startX,h[b*4-1]=m.startY),h[b*4]=m.stopX,h[b*4+1]=m.stopY,c=ua(e,r,a,i,m.cx,m.cy,m.radius),c.length!==0&&f.push(c[0],c[1])});for(var d=0;d<h.length/4;d++)c=Cr(e,r,a,i,h[d*4],h[d*4+1],h[d*4+2],h[d*4+3],!1),c.length!==0&&f.push(c[0],c[1]);if(f.length>2){for(var v=[f[0],f[1]],p=Math.pow(v[0]-e,2)+Math.pow(v[1]-r,2),g=1;g<f.length/2;g++){var y=Math.pow(f[g*2]-e,2)+Math.pow(f[g*2+1]-r,2);y<=p&&(v[0]=f[g*2],v[1]=f[g*2+1],p=y)}return v}return f},Ja=function(e,r,n){var a=[e[0]-r[0],e[1]-r[1]],i=Math.sqrt(a[0]*a[0]+a[1]*a[1]),s=(i-n)/i;return s<0&&(s=1e-5),[r[0]+s*a[0],r[1]+s*a[1]]},Tt=function(e,r){var n=$d(e,r);return n=Nx(n),n},Nx=function(e){for(var r,n,a=e.length/2,i=1/0,s=1/0,o=-1/0,u=-1/0,l=0;l<a;l++)r=e[2*l],n=e[2*l+1],i=Math.min(i,r),o=Math.max(o,r),s=Math.min(s,n),u=Math.max(u,n);for(var f=2/(o-i),c=2/(u-s),h=0;h<a;h++)r=e[2*h]=e[2*h]*f,n=e[2*h+1]=e[2*h+1]*c,i=Math.min(i,r),o=Math.max(o,r),s=Math.min(s,n),u=Math.max(u,n);if(s<-1)for(var d=0;d<a;d++)n=e[2*d+1]=e[2*d+1]+(-1-s);return e},$d=function(e,r){var n=1/e*2*Math.PI,a=e%2===0?Math.PI/2+n/2:Math.PI/2;a+=r;for(var i=new Array(e*2),s,o=0;o<e;o++)s=o*n+a,i[2*o]=Math.cos(s),i[2*o+1]=Math.sin(-s);return i},kr=function(e,r){return Math.min(e/4,r/4,8)},Bx=function(e,r){return Math.min(e/10,r/10,8)},Iv=function(){return 8},l_=function(e,r,n){return[e-2*r+n,2*(r-e),e]},Vd=function(e,r){return{heightOffset:Math.min(15,.05*r),widthOffset:Math.min(100,.25*e),ctrlPtOffsetPct:.05}};function ro(t,e){function r(c){for(var h=[],d=0;d<c.length;d++){var v=c[d],p=c[(d+1)%c.length],g={x:p.x-v.x,y:p.y-v.y},y={x:-g.y,y:g.x},m=Math.sqrt(y.x*y.x+y.y*y.y);h.push({x:y.x/m,y:y.y/m})}return h}function n(c,h){var d=1/0,v=-1/0,p=Lt(c),g;try{for(p.s();!(g=p.n()).done;){var y=g.value,m=y.x*h.x+y.y*h.y;d=Math.min(d,m),v=Math.max(v,m)}}catch(b){p.e(b)}finally{p.f()}return{min:d,max:v}}function a(c,h){return!(c.max<h.min||h.max<c.min)}var i=[].concat(Ci(r(t)),Ci(r(e))),s=Lt(i),o;try{for(s.s();!(o=s.n()).done;){var u=o.value,l=n(t,u),f=n(e,u);if(!a(l,f))return!1}}catch(c){s.e(c)}finally{s.f()}return!0}var f_=pt({dampingFactor:.8,precision:1e-6,iterations:200,weight:function(e){return 1}}),c_={pageRank:function(e){for(var r=f_(e),n=r.dampingFactor,a=r.precision,i=r.iterations,s=r.weight,o=this._private.cy,u=this.byGroup(),l=u.nodes,f=u.edges,c=l.length,h=c*c,d=f.length,v=new Array(h),p=new Array(c),g=(1-n)/c,y=0;y<c;y++){for(var m=0;m<c;m++){var b=y*c+m;v[b]=0}p[y]=0}for(var E=0;E<d;E++){var x=f[E],S=x.data("source"),w=x.data("target");if(S!==w){var T=l.indexOfId(S),C=l.indexOfId(w),A=s(x),R=C*c+T;v[R]+=A,p[T]+=A}}for(var I=1/c+g,D=0;D<c;D++)if(p[D]===0)for(var _=0;_<c;_++){var M=_*c+D;v[M]=I}else for(var k=0;k<c;k++){var O=k*c+D;v[O]=v[O]/p[D]+g}for(var P=new Array(c),q=new Array(c),G,F=0;F<c;F++)P[F]=1;for(var z=0;z<i;z++){for(var W=0;W<c;W++)q[W]=0;for(var N=0;N<c;N++)for(var B=0;B<c;B++){var $=N*c+B;q[N]+=v[$]*P[B]}HD(q),G=P,P=q,q=G;for(var H=0,te=0;te<c;te++){var K=G[te]-P[te];H+=K*K}if(H<a)break}var V={rank:function(X){return X=o.collection(X)[0],P[l.indexOf(X)]}};return V}},np=pt({root:null,weight:function(e){return 1},directed:!1,alpha:0}),Pn={degreeCentralityNormalized:function(e){e=np(e);var r=this.cy(),n=this.nodes(),a=n.length;if(e.directed){for(var f={},c={},h=0,d=0,v=0;v<a;v++){var p=n[v],g=p.id();e.root=p;var y=this.degreeCentrality(e);h<y.indegree&&(h=y.indegree),d<y.outdegree&&(d=y.outdegree),f[g]=y.indegree,c[g]=y.outdegree}return{indegree:function(b){return h==0?0:(we(b)&&(b=r.filter(b)),f[b.id()]/h)},outdegree:function(b){return d===0?0:(we(b)&&(b=r.filter(b)),c[b.id()]/d)}}}else{for(var i={},s=0,o=0;o<a;o++){var u=n[o];e.root=u;var l=this.degreeCentrality(e);s<l.degree&&(s=l.degree),i[u.id()]=l.degree}return{degree:function(b){return s===0?0:(we(b)&&(b=r.filter(b)),i[b.id()]/s)}}}},degreeCentrality:function(e){e=np(e);var r=this.cy(),n=this,a=e,i=a.root,s=a.weight,o=a.directed,u=a.alpha;if(i=r.collection(i)[0],o){for(var d=i.connectedEdges(),v=d.filter(function(S){return S.target().same(i)&&n.has(S)}),p=d.filter(function(S){return S.source().same(i)&&n.has(S)}),g=v.length,y=p.length,m=0,b=0,E=0;E<v.length;E++)m+=s(v[E]);for(var x=0;x<p.length;x++)b+=s(p[x]);return{indegree:Math.pow(g,1-u)*Math.pow(m,u),outdegree:Math.pow(y,1-u)*Math.pow(b,u)}}else{for(var l=i.connectedEdges().intersection(n),f=l.length,c=0,h=0;h<l.length;h++)c+=s(l[h]);return{degree:Math.pow(f,1-u)*Math.pow(c,u)}}}};Pn.dc=Pn.degreeCentrality;Pn.dcn=Pn.degreeCentralityNormalised=Pn.degreeCentralityNormalized;var ap=pt({harmonic:!0,weight:function(){return 1},directed:!1,root:null}),kn={closenessCentralityNormalized:function(e){for(var r=ap(e),n=r.harmonic,a=r.weight,i=r.directed,s=this.cy(),o={},u=0,l=this.nodes(),f=this.floydWarshall({weight:a,directed:i}),c=0;c<l.length;c++){for(var h=0,d=l[c],v=0;v<l.length;v++)if(c!==v){var p=f.distance(d,l[v]);n?h+=1/p:h+=p}n||(h=1/h),u<h&&(u=h),o[d.id()]=h}return{closeness:function(y){return u==0?0:(we(y)?y=s.filter(y)[0].id():y=y.id(),o[y]/u)}}},closenessCentrality:function(e){var r=ap(e),n=r.root,a=r.weight,i=r.directed,s=r.harmonic;n=this.filter(n)[0];for(var o=this.dijkstra({root:n,weight:a,directed:i}),u=0,l=this.nodes(),f=0;f<l.length;f++){var c=l[f];if(!c.same(n)){var h=o.distanceTo(c);s?u+=1/h:u+=h}}return s?u:1/u}};kn.cc=kn.closenessCentrality;kn.ccn=kn.closenessCentralityNormalised=kn.closenessCentralityNormalized;var h_=pt({weight:null,directed:!1}),Ud={betweennessCentrality:function(e){for(var r=h_(e),n=r.directed,a=r.weight,i=a!=null,s=this.cy(),o=this.nodes(),u={},l={},f=0,c={set:function(b,E){l[b]=E,E>f&&(f=E)},get:function(b){return l[b]}},h=0;h<o.length;h++){var d=o[h],v=d.id();n?u[v]=d.outgoers().nodes():u[v]=d.openNeighborhood().nodes(),c.set(v,0)}for(var p=function(){for(var b=o[g].id(),E=[],x={},S={},w={},T=new Ba(function(N,B){return w[N]-w[B]}),C=0;C<o.length;C++){var A=o[C].id();x[A]=[],S[A]=0,w[A]=1/0}for(S[b]=1,w[b]=0,T.push(b);!T.empty();){var R=T.pop();if(E.push(R),i)for(var I=0;I<u[R].length;I++){var D=u[R][I],_=s.getElementById(R),M=void 0;_.edgesTo(D).length>0?M=_.edgesTo(D)[0]:M=D.edgesTo(_)[0];var k=a(M);D=D.id(),w[D]>w[R]+k&&(w[D]=w[R]+k,T.nodes.indexOf(D)<0?T.push(D):T.updateItem(D),S[D]=0,x[D]=[]),w[D]==w[R]+k&&(S[D]=S[D]+S[R],x[D].push(R))}else for(var O=0;O<u[R].length;O++){var P=u[R][O].id();w[P]==1/0&&(T.push(P),w[P]=w[R]+1),w[P]==w[R]+1&&(S[P]=S[P]+S[R],x[P].push(R))}}for(var q={},G=0;G<o.length;G++)q[o[G].id()]=0;for(;E.length>0;){for(var F=E.pop(),z=0;z<x[F].length;z++){var W=x[F][z];q[W]=q[W]+S[W]/S[F]*(1+q[F])}F!=o[g].id()&&c.set(F,c.get(F)+q[F])}},g=0;g<o.length;g++)p();var y={betweenness:function(b){var E=s.collection(b).id();return c.get(E)},betweennessNormalized:function(b){if(f==0)return 0;var E=s.collection(b).id();return c.get(E)/f}};return y.betweennessNormalised=y.betweennessNormalized,y}};Ud.bc=Ud.betweennessCentrality;var d_=pt({expandFactor:2,inflateFactor:2,multFactor:1,maxIterations:20,attributes:[function(t){return 1}]}),v_=function(e){return d_(e)},g_=function(e,r){for(var n=0,a=0;a<r.length;a++)n+=r[a](e);return n},p_=function(e,r,n){for(var a=0;a<r;a++)e[a*r+a]=n},Fx=function(e,r){for(var n,a=0;a<r;a++){n=0;for(var i=0;i<r;i++)n+=e[i*r+a];for(var s=0;s<r;s++)e[s*r+a]=e[s*r+a]/n}},y_=function(e,r,n){for(var a=new Array(n*n),i=0;i<n;i++){for(var s=0;s<n;s++)a[i*n+s]=0;for(var o=0;o<n;o++)for(var u=0;u<n;u++)a[i*n+u]+=e[i*n+o]*r[o*n+u]}return a},m_=function(e,r,n){for(var a=e.slice(0),i=1;i<n;i++)e=y_(e,a,r);return e},b_=function(e,r,n){for(var a=new Array(r*r),i=0;i<r*r;i++)a[i]=Math.pow(e[i],n);return Fx(a,r),a},w_=function(e,r,n,a){for(var i=0;i<n;i++){var s=Math.round(e[i]*Math.pow(10,a))/Math.pow(10,a),o=Math.round(r[i]*Math.pow(10,a))/Math.pow(10,a);if(s!==o)return!1}return!0},E_=function(e,r,n,a){for(var i=[],s=0;s<r;s++){for(var o=[],u=0;u<r;u++)Math.round(e[s*r+u]*1e3)/1e3>0&&o.push(n[u]);o.length!==0&&i.push(a.collection(o))}return i},x_=function(e,r){for(var n=0;n<e.length;n++)if(!r[n]||e[n].id()!==r[n].id())return!1;return!0},T_=function(e){for(var r=0;r<e.length;r++)for(var n=0;n<e.length;n++)r!=n&&x_(e[r],e[n])&&e.splice(n,1);return e},ip=function(e){for(var r=this.nodes(),n=this.edges(),a=this.cy(),i=v_(e),s={},o=0;o<r.length;o++)s[r[o].id()]=o;for(var u=r.length,l=u*u,f=new Array(l),c,h=0;h<l;h++)f[h]=0;for(var d=0;d<n.length;d++){var v=n[d],p=s[v.source().id()],g=s[v.target().id()],y=g_(v,i.attributes);f[p*u+g]+=y,f[g*u+p]+=y}p_(f,u,i.multFactor),Fx(f,u);for(var m=!0,b=0;m&&b<i.maxIterations;)m=!1,c=m_(f,u,i.expandFactor),f=b_(c,u,i.inflateFactor),w_(f,c,l,4)||(m=!0),b++;var E=E_(f,u,r,a);return E=T_(E),E},C_={markovClustering:ip,mcl:ip},S_=function(e){return e},qx=function(e,r){return Math.abs(r-e)},sp=function(e,r,n){return e+qx(r,n)},op=function(e,r,n){return e+Math.pow(n-r,2)},A_=function(e){return Math.sqrt(e)},R_=function(e,r,n){return Math.max(e,qx(r,n))},ta=function(e,r,n,a,i){for(var s=arguments.length>5&&arguments[5]!==void 0?arguments[5]:S_,o=a,u,l,f=0;f<e;f++)u=r(f),l=n(f),o=i(o,u,l);return s(o)},qn={euclidean:function(e,r,n){return e>=2?ta(e,r,n,0,op,A_):ta(e,r,n,0,sp)},squaredEuclidean:function(e,r,n){return ta(e,r,n,0,op)},manhattan:function(e,r,n){return ta(e,r,n,0,sp)},max:function(e,r,n){return ta(e,r,n,-1/0,R_)}};qn["squared-euclidean"]=qn.squaredEuclidean;qn.squaredeuclidean=qn.squaredEuclidean;function Zi(t,e,r,n,a,i){var s;return Ke(t)?s=t:s=qn[t]||qn.euclidean,e===0&&Ke(t)?s(a,i):s(e,r,n,a,i)}var I_=pt({k:2,m:2,sensitivityThreshold:1e-4,distance:"euclidean",maxIterations:10,attributes:[],testMode:!1,testCentroids:null}),Dv=function(e){return I_(e)},_i=function(e,r,n,a,i){var s=i!=="kMedoids",o=s?function(c){return n[c]}:function(c){return a[c](n)},u=function(h){return a[h](r)},l=n,f=r;return Zi(e,a.length,o,u,l,f)},no=function(e,r,n){for(var a=n.length,i=new Array(a),s=new Array(a),o=new Array(r),u=null,l=0;l<a;l++)i[l]=e.min(n[l]).value,s[l]=e.max(n[l]).value;for(var f=0;f<r;f++){u=[];for(var c=0;c<a;c++)u[c]=Math.random()*(s[c]-i[c])+i[c];o[f]=u}return o},Gx=function(e,r,n,a,i){for(var s=1/0,o=0,u=0;u<r.length;u++){var l=_i(n,e,r[u],a,i);l<s&&(s=l,o=u)}return o},zx=function(e,r,n){for(var a=[],i=null,s=0;s<r.length;s++)i=r[s],n[i.id()]===e&&a.push(i);return a},D_=function(e,r,n){return Math.abs(r-e)<=n},__=function(e,r,n){for(var a=0;a<e.length;a++)for(var i=0;i<e[a].length;i++){var s=Math.abs(e[a][i]-r[a][i]);if(s>n)return!1}return!0},L_=function(e,r,n){for(var a=0;a<n;a++)if(e===r[a])return!0;return!1},up=function(e,r){var n=new Array(r);if(e.length<50)for(var a=0;a<r;a++){for(var i=e[Math.floor(Math.random()*e.length)];L_(i,n,a);)i=e[Math.floor(Math.random()*e.length)];n[a]=i}else for(var s=0;s<r;s++)n[s]=e[Math.floor(Math.random()*e.length)];return n},lp=function(e,r,n){for(var a=0,i=0;i<r.length;i++)a+=_i("manhattan",r[i],e,n,"kMedoids");return a},M_=function(e){var r=this.cy(),n=this.nodes(),a=null,i=Dv(e),s=new Array(i.k),o={},u;i.testMode?typeof i.testCentroids=="number"?(i.testCentroids,u=no(n,i.k,i.attributes)):ot(i.testCentroids)==="object"?u=i.testCentroids:u=no(n,i.k,i.attributes):u=no(n,i.k,i.attributes);for(var l=!0,f=0;l&&f<i.maxIterations;){for(var c=0;c<n.length;c++)a=n[c],o[a.id()]=Gx(a,u,i.distance,i.attributes,"kMeans");l=!1;for(var h=0;h<i.k;h++){var d=zx(h,n,o);if(d.length!==0){for(var v=i.attributes.length,p=u[h],g=new Array(v),y=new Array(v),m=0;m<v;m++){y[m]=0;for(var b=0;b<d.length;b++)a=d[b],y[m]+=i.attributes[m](a);g[m]=y[m]/d.length,D_(g[m],p[m],i.sensitivityThreshold)||(l=!0)}u[h]=g,s[h]=r.collection(d)}}f++}return s},O_=function(e){var r=this.cy(),n=this.nodes(),a=null,i=Dv(e),s=new Array(i.k),o,u={},l,f=new Array(i.k);i.testMode?typeof i.testCentroids=="number"||(ot(i.testCentroids)==="object"?o=i.testCentroids:o=up(n,i.k)):o=up(n,i.k);for(var c=!0,h=0;c&&h<i.maxIterations;){for(var d=0;d<n.length;d++)a=n[d],u[a.id()]=Gx(a,o,i.distance,i.attributes,"kMedoids");c=!1;for(var v=0;v<o.length;v++){var p=zx(v,n,u);if(p.length!==0){f[v]=lp(o[v],p,i.attributes);for(var g=0;g<p.length;g++)l=lp(p[g],p,i.attributes),l<f[v]&&(f[v]=l,o[v]=p[g],c=!0);s[v]=r.collection(p)}}h++}return s},P_=function(e,r,n,a,i){for(var s,o,u=0;u<r.length;u++)for(var l=0;l<e.length;l++)a[u][l]=Math.pow(n[u][l],i.m);for(var f=0;f<e.length;f++)for(var c=0;c<i.attributes.length;c++){s=0,o=0;for(var h=0;h<r.length;h++)s+=a[h][f]*i.attributes[c](r[h]),o+=a[h][f];e[f][c]=s/o}},k_=function(e,r,n,a,i){for(var s=0;s<e.length;s++)r[s]=e[s].slice();for(var o,u,l,f=2/(i.m-1),c=0;c<n.length;c++)for(var h=0;h<a.length;h++){o=0;for(var d=0;d<n.length;d++)u=_i(i.distance,a[h],n[c],i.attributes,"cmeans"),l=_i(i.distance,a[h],n[d],i.attributes,"cmeans"),o+=Math.pow(u/l,f);e[h][c]=1/o}},N_=function(e,r,n,a){for(var i=new Array(n.k),s=0;s<i.length;s++)i[s]=[];for(var o,u,l=0;l<r.length;l++){o=-1/0,u=-1;for(var f=0;f<r[0].length;f++)r[l][f]>o&&(o=r[l][f],u=f);i[u].push(e[l])}for(var c=0;c<i.length;c++)i[c]=a.collection(i[c]);return i},fp=function(e){var r=this.cy(),n=this.nodes(),a=Dv(e),i,s,o,u,l;u=new Array(n.length);for(var f=0;f<n.length;f++)u[f]=new Array(a.k);o=new Array(n.length);for(var c=0;c<n.length;c++)o[c]=new Array(a.k);for(var h=0;h<n.length;h++){for(var d=0,v=0;v<a.k;v++)o[h][v]=Math.random(),d+=o[h][v];for(var p=0;p<a.k;p++)o[h][p]=o[h][p]/d}s=new Array(a.k);for(var g=0;g<a.k;g++)s[g]=new Array(a.attributes.length);l=new Array(n.length);for(var y=0;y<n.length;y++)l[y]=new Array(a.k);for(var m=!0,b=0;m&&b<a.maxIterations;)m=!1,P_(s,n,o,l,a),k_(o,u,s,n,a),__(o,u,a.sensitivityThreshold)||(m=!0),b++;return i=N_(n,o,a,r),{clusters:i,degreeOfMembership:o}},B_={kMeans:M_,kMedoids:O_,fuzzyCMeans:fp,fcm:fp},F_=pt({distance:"euclidean",linkage:"min",mode:"threshold",threshold:1/0,addDendrogram:!1,dendrogramDepth:0,attributes:[]}),q_={single:"min",complete:"max"},G_=function(e){var r=F_(e),n=q_[r.linkage];return n!=null&&(r.linkage=n),r},cp=function(e,r,n,a,i){for(var s=0,o=1/0,u,l=i.attributes,f=function(C,A){return Zi(i.distance,l.length,function(R){return l[R](C)},function(R){return l[R](A)},C,A)},c=0;c<e.length;c++){var h=e[c].key,d=n[h][a[h]];d<o&&(s=h,o=d)}if(i.mode==="threshold"&&o>=i.threshold||i.mode==="dendrogram"&&e.length===1)return!1;var v=r[s],p=r[a[s]],g;i.mode==="dendrogram"?g={left:v,right:p,key:v.key}:g={value:v.value.concat(p.value),key:v.key},e[v.index]=g,e.splice(p.index,1),r[v.key]=g;for(var y=0;y<e.length;y++){var m=e[y];v.key===m.key?u=1/0:i.linkage==="min"?(u=n[v.key][m.key],n[v.key][m.key]>n[p.key][m.key]&&(u=n[p.key][m.key])):i.linkage==="max"?(u=n[v.key][m.key],n[v.key][m.key]<n[p.key][m.key]&&(u=n[p.key][m.key])):i.linkage==="mean"?u=(n[v.key][m.key]*v.size+n[p.key][m.key]*p.size)/(v.size+p.size):i.mode==="dendrogram"?u=f(m.value,v.value):u=f(m.value[0],v.value[0]),n[v.key][m.key]=n[m.key][v.key]=u}for(var b=0;b<e.length;b++){var E=e[b].key;if(a[E]===v.key||a[E]===p.key){for(var x=E,S=0;S<e.length;S++){var w=e[S].key;n[E][w]<n[E][x]&&(x=w)}a[E]=x}e[b].index=b}return v.key=p.key=v.index=p.index=null,!0},_n=function(e,r,n){e&&(e.value?r.push(e.value):(e.left&&_n(e.left,r),e.right&&_n(e.right,r)))},Hd=function(e,r){if(!e)return"";if(e.left&&e.right){var n=Hd(e.left,r),a=Hd(e.right,r),i=r.add({group:"nodes",data:{id:n+","+a}});return r.add({group:"edges",data:{source:n,target:i.id()}}),r.add({group:"edges",data:{source:a,target:i.id()}}),i.id()}else if(e.value)return e.value.id()},Yd=function(e,r,n){if(!e)return[];var a=[],i=[],s=[];return r===0?(e.left&&_n(e.left,a),e.right&&_n(e.right,i),s=a.concat(i),[n.collection(s)]):r===1?e.value?[n.collection(e.value)]:(e.left&&_n(e.left,a),e.right&&_n(e.right,i),[n.collection(a),n.collection(i)]):e.value?[n.collection(e.value)]:(e.left&&(a=Yd(e.left,r-1,n)),e.right&&(i=Yd(e.right,r-1,n)),a.concat(i))},hp=function(e){for(var r=this.cy(),n=this.nodes(),a=G_(e),i=a.attributes,s=function(b,E){return Zi(a.distance,i.length,function(x){return i[x](b)},function(x){return i[x](E)},b,E)},o=[],u=[],l=[],f=[],c=0;c<n.length;c++){var h={value:a.mode==="dendrogram"?n[c]:[n[c]],key:c,index:c};o[c]=h,f[c]=h,u[c]=[],l[c]=0}for(var d=0;d<o.length;d++)for(var v=0;v<=d;v++){var p=void 0;a.mode==="dendrogram"?p=d===v?1/0:s(o[d].value,o[v].value):p=d===v?1/0:s(o[d].value[0],o[v].value[0]),u[d][v]=p,u[v][d]=p,p<u[d][l[d]]&&(l[d]=v)}for(var g=cp(o,f,u,l,a);g;)g=cp(o,f,u,l,a);var y;return a.mode==="dendrogram"?(y=Yd(o[0],a.dendrogramDepth,r),a.addDendrogram&&Hd(o[0],r)):(y=new Array(o.length),o.forEach(function(m,b){m.key=m.index=null,y[b]=r.collection(m.value)})),y},z_={hierarchicalClustering:hp,hca:hp},$_=pt({distance:"euclidean",preference:"median",damping:.8,maxIterations:1e3,minIterations:100,attributes:[]}),V_=function(e){var r=e.damping,n=e.preference;.5<=r&&r<1||We("Damping must range on [0.5, 1).  Got: ".concat(r));var a=["median","mean","min","max"];return a.some(function(i){return i===n})||ie(n)||We("Preference must be one of [".concat(a.map(function(i){return"'".concat(i,"'")}).join(", "),"] or a number.  Got: ").concat(n)),$_(e)},U_=function(e,r,n,a){var i=function(o,u){return a[u](o)};return-Zi(e,a.length,function(s){return i(r,s)},function(s){return i(n,s)},r,n)},H_=function(e,r){var n=null;return r==="median"?n=VD(e):r==="mean"?n=$D(e):r==="min"?n=GD(e):r==="max"?n=zD(e):n=r,n},Y_=function(e,r,n){for(var a=[],i=0;i<e;i++)r[i*e+i]+n[i*e+i]>0&&a.push(i);return a},dp=function(e,r,n){for(var a=[],i=0;i<e;i++){for(var s=-1,o=-1/0,u=0;u<n.length;u++){var l=n[u];r[i*e+l]>o&&(s=l,o=r[i*e+l])}s>0&&a.push(s)}for(var f=0;f<n.length;f++)a[n[f]]=n[f];return a},W_=function(e,r,n){for(var a=dp(e,r,n),i=0;i<n.length;i++){for(var s=[],o=0;o<a.length;o++)a[o]===n[i]&&s.push(o);for(var u=-1,l=-1/0,f=0;f<s.length;f++){for(var c=0,h=0;h<s.length;h++)c+=r[s[h]*e+s[f]];c>l&&(u=f,l=c)}n[i]=s[u]}return a=dp(e,r,n),a},vp=function(e){for(var r=this.cy(),n=this.nodes(),a=V_(e),i={},s=0;s<n.length;s++)i[n[s].id()]=s;var o,u,l,f,c,h;o=n.length,u=o*o,l=new Array(u);for(var d=0;d<u;d++)l[d]=-1/0;for(var v=0;v<o;v++)for(var p=0;p<o;p++)v!==p&&(l[v*o+p]=U_(a.distance,n[v],n[p],a.attributes));f=H_(l,a.preference);for(var g=0;g<o;g++)l[g*o+g]=f;c=new Array(u);for(var y=0;y<u;y++)c[y]=0;h=new Array(u);for(var m=0;m<u;m++)h[m]=0;for(var b=new Array(o),E=new Array(o),x=new Array(o),S=0;S<o;S++)b[S]=0,E[S]=0,x[S]=0;for(var w=new Array(o*a.minIterations),T=0;T<w.length;T++)w[T]=0;var C;for(C=0;C<a.maxIterations;C++){for(var A=0;A<o;A++){for(var R=-1/0,I=-1/0,D=-1,_=0,M=0;M<o;M++)b[M]=c[A*o+M],_=h[A*o+M]+l[A*o+M],_>=R?(I=R,R=_,D=M):_>I&&(I=_);for(var k=0;k<o;k++)c[A*o+k]=(1-a.damping)*(l[A*o+k]-R)+a.damping*b[k];c[A*o+D]=(1-a.damping)*(l[A*o+D]-I)+a.damping*b[D]}for(var O=0;O<o;O++){for(var P=0,q=0;q<o;q++)b[q]=h[q*o+O],E[q]=Math.max(0,c[q*o+O]),P+=E[q];P-=E[O],E[O]=c[O*o+O],P+=E[O];for(var G=0;G<o;G++)h[G*o+O]=(1-a.damping)*Math.min(0,P-E[G])+a.damping*b[G];h[O*o+O]=(1-a.damping)*(P-E[O])+a.damping*b[O]}for(var F=0,z=0;z<o;z++){var W=h[z*o+z]+c[z*o+z]>0?1:0;w[C%a.minIterations*o+z]=W,F+=W}if(F>0&&(C>=a.minIterations-1||C==a.maxIterations-1)){for(var N=0,B=0;B<o;B++){x[B]=0;for(var $=0;$<a.minIterations;$++)x[B]+=w[$*o+B];(x[B]===0||x[B]===a.minIterations)&&N++}if(N===o)break}}for(var H=Y_(o,c,h),te=W_(o,l,H),K={},V=0;V<H.length;V++)K[H[V]]=[];for(var U=0;U<n.length;U++){var X=i[n[U].id()],j=te[X];j!=null&&K[j].push(n[U])}for(var ne=new Array(H.length),ae=0;ae<H.length;ae++)ne[ae]=r.collection(K[H[ae]]);return ne},X_={affinityPropagation:vp,ap:vp},K_=pt({root:void 0,directed:!1}),j_={hierholzer:function(e){if(!Be(e)){var r=arguments;e={root:r[0],directed:r[1]}}var n=K_(e),a=n.root,i=n.directed,s=this,o=!1,u,l,f;a&&(f=we(a)?this.filter(a)[0].id():a[0].id());var c={},h={};i?s.forEach(function(m){var b=m.id();if(m.isNode()){var E=m.indegree(!0),x=m.outdegree(!0),S=E-x,w=x-E;S==1?u?o=!0:u=b:w==1?l?o=!0:l=b:(w>1||S>1)&&(o=!0),c[b]=[],m.outgoers().forEach(function(T){T.isEdge()&&c[b].push(T.id())})}else h[b]=[void 0,m.target().id()]}):s.forEach(function(m){var b=m.id();if(m.isNode()){var E=m.degree(!0);E%2&&(u?l?o=!0:l=b:u=b),c[b]=[],m.connectedEdges().forEach(function(x){return c[b].push(x.id())})}else h[b]=[m.source().id(),m.target().id()]});var d={found:!1,trail:void 0};if(o)return d;if(l&&u)if(i){if(f&&l!=f)return d;f=l}else{if(f&&l!=f&&u!=f)return d;f||(f=l)}else f||(f=s[0].id());var v=function(b){for(var E=b,x=[b],S,w,T;c[E].length;)S=c[E].shift(),w=h[S][0],T=h[S][1],E!=T?(c[T]=c[T].filter(function(C){return C!=S}),E=T):!i&&E!=w&&(c[w]=c[w].filter(function(C){return C!=S}),E=w),x.unshift(S),x.unshift(E);return x},p=[],g=[];for(g=v(f);g.length!=1;)c[g[0]].length==0?(p.unshift(s.getElementById(g.shift())),p.unshift(s.getElementById(g.shift()))):g=v(g.shift()).concat(g);p.unshift(s.getElementById(g.shift()));for(var y in c)if(c[y].length)return d;return d.found=!0,d.trail=this.spawn(p,!0),d}},ei=function(){var e=this,r={},n=0,a=0,i=[],s=[],o={},u=function(h,d){for(var v=s.length-1,p=[],g=e.spawn();s[v].x!=h||s[v].y!=d;)p.push(s.pop().edge),v--;p.push(s.pop().edge),p.forEach(function(y){var m=y.connectedNodes().intersection(e);g.merge(y),m.forEach(function(b){var E=b.id(),x=b.connectedEdges().intersection(e);g.merge(b),r[E].cutVertex?g.merge(x.filter(function(S){return S.isLoop()})):g.merge(x)})}),i.push(g)},l=function(h,d,v){h===v&&(a+=1),r[d]={id:n,low:n++,cutVertex:!1};var p=e.getElementById(d).connectedEdges().intersection(e);if(p.size()===0)i.push(e.spawn(e.getElementById(d)));else{var g,y,m,b;p.forEach(function(E){g=E.source().id(),y=E.target().id(),m=g===d?y:g,m!==v&&(b=E.id(),o[b]||(o[b]=!0,s.push({x:d,y:m,edge:E})),m in r?r[d].low=Math.min(r[d].low,r[m].id):(l(h,m,d),r[d].low=Math.min(r[d].low,r[m].low),r[d].id<=r[m].low&&(r[d].cutVertex=!0,u(d,m))))})}};e.forEach(function(c){if(c.isNode()){var h=c.id();h in r||(a=0,l(h,h),r[h].cutVertex=a>1)}});var f=Object.keys(r).filter(function(c){return r[c].cutVertex}).map(function(c){return e.getElementById(c)});return{cut:e.spawn(f),components:i}},Z_={hopcroftTarjanBiconnected:ei,htbc:ei,htb:ei,hopcroftTarjanBiconnectedComponents:ei},ti=function(){var e=this,r={},n=0,a=[],i=[],s=e.spawn(e),o=function(l){i.push(l),r[l]={index:n,low:n++,explored:!1};var f=e.getElementById(l).connectedEdges().intersection(e);if(f.forEach(function(p){var g=p.target().id();g!==l&&(g in r||o(g),r[g].explored||(r[l].low=Math.min(r[l].low,r[g].low)))}),r[l].index===r[l].low){for(var c=e.spawn();;){var h=i.pop();if(c.merge(e.getElementById(h)),r[h].low=r[l].index,r[h].explored=!0,h===l)break}var d=c.edgesWith(c),v=c.merge(d);a.push(v),s=s.difference(v)}};return e.forEach(function(u){if(u.isNode()){var l=u.id();l in r||o(l)}}),{cut:s,components:a}},Q_={tarjanStronglyConnected:ti,tsc:ti,tscc:ti,tarjanStronglyConnectedComponents:ti},$x={};[xa,ID,DD,LD,OD,kD,FD,c_,Pn,kn,Ud,C_,B_,z_,X_,j_,Z_,Q_].forEach(function(t){xe($x,t)});/*!
Embeddable Minimum Strictly-Compliant Promises/A+ 1.1.1 Thenable
Copyright (c) 2013-2014 Ralf S. Engelschall (http://engelschall.com)
Licensed under The MIT License (http://opensource.org/licenses/MIT)
*/var Vx=0,Ux=1,Hx=2,Wt=function(e){if(!(this instanceof Wt))return new Wt(e);this.id="Thenable/1.0.7",this.state=Vx,this.fulfillValue=void 0,this.rejectReason=void 0,this.onFulfilled=[],this.onRejected=[],this.proxy={then:this.then.bind(this)},typeof e=="function"&&e.call(this,this.fulfill.bind(this),this.reject.bind(this))};Wt.prototype={fulfill:function(e){return gp(this,Ux,"fulfillValue",e)},reject:function(e){return gp(this,Hx,"rejectReason",e)},then:function(e,r){var n=this,a=new Wt;return n.onFulfilled.push(yp(e,a,"fulfill")),n.onRejected.push(yp(r,a,"reject")),Yx(n),a.proxy}};var gp=function(e,r,n,a){return e.state===Vx&&(e.state=r,e[n]=a,Yx(e)),e},Yx=function(e){e.state===Ux?pp(e,"onFulfilled",e.fulfillValue):e.state===Hx&&pp(e,"onRejected",e.rejectReason)},pp=function(e,r,n){if(e[r].length!==0){var a=e[r];e[r]=[];var i=function(){for(var o=0;o<a.length;o++)a[o](n)};typeof setImmediate=="function"?setImmediate(i):setTimeout(i,0)}},yp=function(e,r,n){return function(a){if(typeof e!="function")r[n].call(r,a);else{var i;try{i=e(a)}catch(s){r.reject(s);return}Wx(r,i)}}},Wx=function(e,r){if(e===r||e.proxy===r){e.reject(new TypeError("cannot resolve promise with itself"));return}var n;if(ot(r)==="object"&&r!==null||typeof r=="function")try{n=r.then}catch(i){e.reject(i);return}if(typeof n=="function"){var a=!1;try{n.call(r,function(i){a||(a=!0,i===r?e.reject(new TypeError("circular thenable chain")):Wx(e,i))},function(i){a||(a=!0,e.reject(i))})}catch(i){a||e.reject(i)}return}e.fulfill(r)};Wt.all=function(t){return new Wt(function(e,r){for(var n=new Array(t.length),a=0,i=function(u,l){n[u]=l,a++,a===t.length&&e(n)},s=0;s<t.length;s++)(function(o){var u=t[o],l=u!=null&&u.then!=null;if(l)u.then(function(c){i(o,c)},function(c){r(c)});else{var f=u;i(o,f)}})(s)})};Wt.resolve=function(t){return new Wt(function(e,r){e(t)})};Wt.reject=function(t){return new Wt(function(e,r){r(t)})};var $n=typeof Promise<"u"?Promise:Wt,Wd=function(e,r,n){var a=bv(e),i=!a,s=this._private=xe({duration:1e3},r,n);if(s.target=e,s.style=s.style||s.css,s.started=!1,s.playing=!1,s.hooked=!1,s.applying=!1,s.progress=0,s.completes=[],s.frames=[],s.complete&&Ke(s.complete)&&s.completes.push(s.complete),i){var o=e.position();s.startPosition=s.startPosition||{x:o.x,y:o.y},s.startStyle=s.startStyle||e.cy().style().getAnimationStartStyle(e,s.style)}if(a){var u=e.pan();s.startPan={x:u.x,y:u.y},s.startZoom=e.zoom()}this.length=1,this[0]=this},ln=Wd.prototype;xe(ln,{instanceString:function(){return"animation"},hook:function(){var e=this._private;if(!e.hooked){var r,n=e.target._private.animation;e.queue?r=n.queue:r=n.current,r.push(this),Pt(e.target)&&e.target.cy().addToAnimationPool(e.target),e.hooked=!0}return this},play:function(){var e=this._private;return e.progress===1&&(e.progress=0),e.playing=!0,e.started=!1,e.stopped=!1,this.hook(),this},playing:function(){return this._private.playing},apply:function(){var e=this._private;return e.applying=!0,e.started=!1,e.stopped=!1,this.hook(),this},applying:function(){return this._private.applying},pause:function(){var e=this._private;return e.playing=!1,e.started=!1,this},stop:function(){var e=this._private;return e.playing=!1,e.started=!1,e.stopped=!0,this},rewind:function(){return this.progress(0)},fastforward:function(){return this.progress(1)},time:function(e){var r=this._private;return e===void 0?r.progress*r.duration:this.progress(e/r.duration)},progress:function(e){var r=this._private,n=r.playing;return e===void 0?r.progress:(n&&this.pause(),r.progress=e,r.started=!1,n&&this.play(),this)},completed:function(){return this._private.progress===1},reverse:function(){var e=this._private,r=e.playing;r&&this.pause(),e.progress=1-e.progress,e.started=!1;var n=function(l,f){var c=e[l];c!=null&&(e[l]=e[f],e[f]=c)};if(n("zoom","startZoom"),n("pan","startPan"),n("position","startPosition"),e.style)for(var a=0;a<e.style.length;a++){var i=e.style[a],s=i.name,o=e.startStyle[s];e.startStyle[s]=i,e.style[a]=o}return r&&this.play(),this},promise:function(e){var r=this._private,n;switch(e){case"frame":n=r.frames;break;default:case"complete":case"completed":n=r.completes}return new $n(function(a,i){n.push(function(){a()})})}});ln.complete=ln.completed;ln.run=ln.play;ln.running=ln.playing;var J_={animated:function(){return function(){var r=this,n=r.length!==void 0,a=n?r:[r],i=this._private.cy||this;if(!i.styleEnabled())return!1;var s=a[0];if(s)return s._private.animation.current.length>0}},clearQueue:function(){return function(){var r=this,n=r.length!==void 0,a=n?r:[r],i=this._private.cy||this;if(!i.styleEnabled())return this;for(var s=0;s<a.length;s++){var o=a[s];o._private.animation.queue=[]}return this}},delay:function(){return function(r,n){var a=this._private.cy||this;return a.styleEnabled()?this.animate({delay:r,duration:r,complete:n}):this}},delayAnimation:function(){return function(r,n){var a=this._private.cy||this;return a.styleEnabled()?this.animation({delay:r,duration:r,complete:n}):this}},animation:function(){return function(r,n){var a=this,i=a.length!==void 0,s=i?a:[a],o=this._private.cy||this,u=!i,l=!u;if(!o.styleEnabled())return this;var f=o.style();r=xe({},r,n);var c=Object.keys(r).length===0;if(c)return new Wd(s[0],r);switch(r.duration===void 0&&(r.duration=400),r.duration){case"slow":r.duration=600;break;case"fast":r.duration=200;break}if(l&&(r.style=f.getPropsList(r.style||r.css),r.css=void 0),l&&r.renderedPosition!=null){var h=r.renderedPosition,d=o.pan(),v=o.zoom();r.position=Mx(h,v,d)}if(u&&r.panBy!=null){var p=r.panBy,g=o.pan();r.pan={x:g.x+p.x,y:g.y+p.y}}var y=r.center||r.centre;if(u&&y!=null){var m=o.getCenterPan(y.eles,r.zoom);m!=null&&(r.pan=m)}if(u&&r.fit!=null){var b=r.fit,E=o.getFitViewport(b.eles||b.boundingBox,b.padding);E!=null&&(r.pan=E.pan,r.zoom=E.zoom)}if(u&&Be(r.zoom)){var x=o.getZoomedViewport(r.zoom);x!=null?(x.zoomed&&(r.zoom=x.zoom),x.panned&&(r.pan=x.pan)):r.zoom=null}return new Wd(s[0],r)}},animate:function(){return function(r,n){var a=this,i=a.length!==void 0,s=i?a:[a],o=this._private.cy||this;if(!o.styleEnabled())return this;n&&(r=xe({},r,n));for(var u=0;u<s.length;u++){var l=s[u],f=l.animated()&&(r.queue===void 0||r.queue),c=l.animation(r,f?{queue:!0}:void 0);c.play()}return this}},stop:function(){return function(r,n){var a=this,i=a.length!==void 0,s=i?a:[a],o=this._private.cy||this;if(!o.styleEnabled())return this;for(var u=0;u<s.length;u++){for(var l=s[u],f=l._private,c=f.animation.current,h=0;h<c.length;h++){var d=c[h],v=d._private;n&&(v.duration=0)}r&&(f.animation.queue=[]),n||(f.animation.current=[])}return o.notify("draw"),this}}},ao,mp;function Qi(){if(mp)return ao;mp=1;var t=Array.isArray;return ao=t,ao}var io,bp;function eL(){if(bp)return io;bp=1;var t=Qi(),e=ka(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function a(i,s){if(t(i))return!1;var o=typeof i;return o=="number"||o=="symbol"||o=="boolean"||i==null||e(i)?!0:n.test(i)||!r.test(i)||s!=null&&i in Object(s)}return io=a,io}var so,wp;function tL(){if(wp)return so;wp=1;var t=Tx(),e=Pa(),r="[object AsyncFunction]",n="[object Function]",a="[object GeneratorFunction]",i="[object Proxy]";function s(o){if(!e(o))return!1;var u=t(o);return u==n||u==a||u==r||u==i}return so=s,so}var oo,Ep;function rL(){if(Ep)return oo;Ep=1;var t=Xi(),e=t["__core-js_shared__"];return oo=e,oo}var uo,xp;function nL(){if(xp)return uo;xp=1;var t=rL(),e=function(){var n=/[^.]+$/.exec(t&&t.keys&&t.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function r(n){return!!e&&e in n}return uo=r,uo}var lo,Tp;function aL(){if(Tp)return lo;Tp=1;var t=Function.prototype,e=t.toString;function r(n){if(n!=null){try{return e.call(n)}catch{}try{return n+""}catch{}}return""}return lo=r,lo}var fo,Cp;function iL(){if(Cp)return fo;Cp=1;var t=tL(),e=nL(),r=Pa(),n=aL(),a=/[\\^$.*+?()[\]{}|]/g,i=/^\[object .+?Constructor\]$/,s=Function.prototype,o=Object.prototype,u=s.toString,l=o.hasOwnProperty,f=RegExp("^"+u.call(l).replace(a,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function c(h){if(!r(h)||e(h))return!1;var d=t(h)?f:i;return d.test(n(h))}return fo=c,fo}var co,Sp;function sL(){if(Sp)return co;Sp=1;function t(e,r){return e==null?void 0:e[r]}return co=t,co}var ho,Ap;function _v(){if(Ap)return ho;Ap=1;var t=iL(),e=sL();function r(n,a){var i=e(n,a);return t(i)?i:void 0}return ho=r,ho}var vo,Rp;function Ji(){if(Rp)return vo;Rp=1;var t=_v(),e=t(Object,"create");return vo=e,vo}var go,Ip;function oL(){if(Ip)return go;Ip=1;var t=Ji();function e(){this.__data__=t?t(null):{},this.size=0}return go=e,go}var po,Dp;function uL(){if(Dp)return po;Dp=1;function t(e){var r=this.has(e)&&delete this.__data__[e];return this.size-=r?1:0,r}return po=t,po}var yo,_p;function lL(){if(_p)return yo;_p=1;var t=Ji(),e="__lodash_hash_undefined__",r=Object.prototype,n=r.hasOwnProperty;function a(i){var s=this.__data__;if(t){var o=s[i];return o===e?void 0:o}return n.call(s,i)?s[i]:void 0}return yo=a,yo}var mo,Lp;function fL(){if(Lp)return mo;Lp=1;var t=Ji(),e=Object.prototype,r=e.hasOwnProperty;function n(a){var i=this.__data__;return t?i[a]!==void 0:r.call(i,a)}return mo=n,mo}var bo,Mp;function cL(){if(Mp)return bo;Mp=1;var t=Ji(),e="__lodash_hash_undefined__";function r(n,a){var i=this.__data__;return this.size+=this.has(n)?0:1,i[n]=t&&a===void 0?e:a,this}return bo=r,bo}var wo,Op;function hL(){if(Op)return wo;Op=1;var t=oL(),e=uL(),r=lL(),n=fL(),a=cL();function i(s){var o=-1,u=s==null?0:s.length;for(this.clear();++o<u;){var l=s[o];this.set(l[0],l[1])}}return i.prototype.clear=t,i.prototype.delete=e,i.prototype.get=r,i.prototype.has=n,i.prototype.set=a,wo=i,wo}var Eo,Pp;function dL(){if(Pp)return Eo;Pp=1;function t(){this.__data__=[],this.size=0}return Eo=t,Eo}var xo,kp;function Xx(){if(kp)return xo;kp=1;function t(e,r){return e===r||e!==e&&r!==r}return xo=t,xo}var To,Np;function es(){if(Np)return To;Np=1;var t=Xx();function e(r,n){for(var a=r.length;a--;)if(t(r[a][0],n))return a;return-1}return To=e,To}var Co,Bp;function vL(){if(Bp)return Co;Bp=1;var t=es(),e=Array.prototype,r=e.splice;function n(a){var i=this.__data__,s=t(i,a);if(s<0)return!1;var o=i.length-1;return s==o?i.pop():r.call(i,s,1),--this.size,!0}return Co=n,Co}var So,Fp;function gL(){if(Fp)return So;Fp=1;var t=es();function e(r){var n=this.__data__,a=t(n,r);return a<0?void 0:n[a][1]}return So=e,So}var Ao,qp;function pL(){if(qp)return Ao;qp=1;var t=es();function e(r){return t(this.__data__,r)>-1}return Ao=e,Ao}var Ro,Gp;function yL(){if(Gp)return Ro;Gp=1;var t=es();function e(r,n){var a=this.__data__,i=t(a,r);return i<0?(++this.size,a.push([r,n])):a[i][1]=n,this}return Ro=e,Ro}var Io,zp;function mL(){if(zp)return Io;zp=1;var t=dL(),e=vL(),r=gL(),n=pL(),a=yL();function i(s){var o=-1,u=s==null?0:s.length;for(this.clear();++o<u;){var l=s[o];this.set(l[0],l[1])}}return i.prototype.clear=t,i.prototype.delete=e,i.prototype.get=r,i.prototype.has=n,i.prototype.set=a,Io=i,Io}var Do,$p;function bL(){if($p)return Do;$p=1;var t=_v(),e=Xi(),r=t(e,"Map");return Do=r,Do}var _o,Vp;function wL(){if(Vp)return _o;Vp=1;var t=hL(),e=mL(),r=bL();function n(){this.size=0,this.__data__={hash:new t,map:new(r||e),string:new t}}return _o=n,_o}var Lo,Up;function EL(){if(Up)return Lo;Up=1;function t(e){var r=typeof e;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?e!=="__proto__":e===null}return Lo=t,Lo}var Mo,Hp;function ts(){if(Hp)return Mo;Hp=1;var t=EL();function e(r,n){var a=r.__data__;return t(n)?a[typeof n=="string"?"string":"hash"]:a.map}return Mo=e,Mo}var Oo,Yp;function xL(){if(Yp)return Oo;Yp=1;var t=ts();function e(r){var n=t(this,r).delete(r);return this.size-=n?1:0,n}return Oo=e,Oo}var Po,Wp;function TL(){if(Wp)return Po;Wp=1;var t=ts();function e(r){return t(this,r).get(r)}return Po=e,Po}var ko,Xp;function CL(){if(Xp)return ko;Xp=1;var t=ts();function e(r){return t(this,r).has(r)}return ko=e,ko}var No,Kp;function SL(){if(Kp)return No;Kp=1;var t=ts();function e(r,n){var a=t(this,r),i=a.size;return a.set(r,n),this.size+=a.size==i?0:1,this}return No=e,No}var Bo,jp;function AL(){if(jp)return Bo;jp=1;var t=wL(),e=xL(),r=TL(),n=CL(),a=SL();function i(s){var o=-1,u=s==null?0:s.length;for(this.clear();++o<u;){var l=s[o];this.set(l[0],l[1])}}return i.prototype.clear=t,i.prototype.delete=e,i.prototype.get=r,i.prototype.has=n,i.prototype.set=a,Bo=i,Bo}var Fo,Zp;function RL(){if(Zp)return Fo;Zp=1;var t=AL(),e="Expected a function";function r(n,a){if(typeof n!="function"||a!=null&&typeof a!="function")throw new TypeError(e);var i=function(){var s=arguments,o=a?a.apply(this,s):s[0],u=i.cache;if(u.has(o))return u.get(o);var l=n.apply(this,s);return i.cache=u.set(o,l)||u,l};return i.cache=new(r.Cache||t),i}return r.Cache=t,Fo=r,Fo}var qo,Qp;function IL(){if(Qp)return qo;Qp=1;var t=RL(),e=500;function r(n){var a=t(n,function(s){return i.size===e&&i.clear(),s}),i=a.cache;return a}return qo=r,qo}var Go,Jp;function Kx(){if(Jp)return Go;Jp=1;var t=IL(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,r=/\\(\\)?/g,n=t(function(a){var i=[];return a.charCodeAt(0)===46&&i.push(""),a.replace(e,function(s,o,u,l){i.push(u?l.replace(r,"$1"):o||s)}),i});return Go=n,Go}var zo,ey;function jx(){if(ey)return zo;ey=1;function t(e,r){for(var n=-1,a=e==null?0:e.length,i=Array(a);++n<a;)i[n]=r(e[n],n,e);return i}return zo=t,zo}var $o,ty;function DL(){if(ty)return $o;ty=1;var t=Ev(),e=jx(),r=Qi(),n=ka(),a=t?t.prototype:void 0,i=a?a.toString:void 0;function s(o){if(typeof o=="string")return o;if(r(o))return e(o,s)+"";if(n(o))return i?i.call(o):"";var u=o+"";return u=="0"&&1/o==-1/0?"-0":u}return $o=s,$o}var Vo,ry;function Zx(){if(ry)return Vo;ry=1;var t=DL();function e(r){return r==null?"":t(r)}return Vo=e,Vo}var Uo,ny;function Qx(){if(ny)return Uo;ny=1;var t=Qi(),e=eL(),r=Kx(),n=Zx();function a(i,s){return t(i)?i:e(i,s)?[i]:r(n(i))}return Uo=a,Uo}var Ho,ay;function Lv(){if(ay)return Ho;ay=1;var t=ka();function e(r){if(typeof r=="string"||t(r))return r;var n=r+"";return n=="0"&&1/r==-1/0?"-0":n}return Ho=e,Ho}var Yo,iy;function _L(){if(iy)return Yo;iy=1;var t=Qx(),e=Lv();function r(n,a){a=t(a,n);for(var i=0,s=a.length;n!=null&&i<s;)n=n[e(a[i++])];return i&&i==s?n:void 0}return Yo=r,Yo}var Wo,sy;function LL(){if(sy)return Wo;sy=1;var t=_L();function e(r,n,a){var i=r==null?void 0:t(r,n);return i===void 0?a:i}return Wo=e,Wo}var ML=LL(),OL=Oa(ML),Xo,oy;function PL(){if(oy)return Xo;oy=1;var t=_v(),e=function(){try{var r=t(Object,"defineProperty");return r({},"",{}),r}catch{}}();return Xo=e,Xo}var Ko,uy;function kL(){if(uy)return Ko;uy=1;var t=PL();function e(r,n,a){n=="__proto__"&&t?t(r,n,{configurable:!0,enumerable:!0,value:a,writable:!0}):r[n]=a}return Ko=e,Ko}var jo,ly;function NL(){if(ly)return jo;ly=1;var t=kL(),e=Xx(),r=Object.prototype,n=r.hasOwnProperty;function a(i,s,o){var u=i[s];(!(n.call(i,s)&&e(u,o))||o===void 0&&!(s in i))&&t(i,s,o)}return jo=a,jo}var Zo,fy;function BL(){if(fy)return Zo;fy=1;var t=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function r(n,a){var i=typeof n;return a=a??t,!!a&&(i=="number"||i!="symbol"&&e.test(n))&&n>-1&&n%1==0&&n<a}return Zo=r,Zo}var Qo,cy;function FL(){if(cy)return Qo;cy=1;var t=NL(),e=Qx(),r=BL(),n=Pa(),a=Lv();function i(s,o,u,l){if(!n(s))return s;o=e(o,s);for(var f=-1,c=o.length,h=c-1,d=s;d!=null&&++f<c;){var v=a(o[f]),p=u;if(v==="__proto__"||v==="constructor"||v==="prototype")return s;if(f!=h){var g=d[v];p=l?l(g,v,d):void 0,p===void 0&&(p=n(g)?g:r(o[f+1])?[]:{})}t(d,v,p),d=d[v]}return s}return Qo=i,Qo}var Jo,hy;function qL(){if(hy)return Jo;hy=1;var t=FL();function e(r,n,a){return r==null?r:t(r,n,a)}return Jo=e,Jo}var GL=qL(),zL=Oa(GL),eu,dy;function $L(){if(dy)return eu;dy=1;function t(e,r){var n=-1,a=e.length;for(r||(r=Array(a));++n<a;)r[n]=e[n];return r}return eu=t,eu}var tu,vy;function VL(){if(vy)return tu;vy=1;var t=jx(),e=$L(),r=Qi(),n=ka(),a=Kx(),i=Lv(),s=Zx();function o(u){return r(u)?t(u,i):n(u)?[u]:e(a(s(u)))}return tu=o,tu}var UL=VL(),HL=Oa(UL),YL={data:function(e){var r={field:"data",bindingEvent:"data",allowBinding:!1,allowSetting:!1,allowGetting:!1,settingEvent:"data",settingTriggersEvent:!1,triggerFnName:"trigger",immutableKeys:{},updateStyle:!1,beforeGet:function(a){},beforeSet:function(a,i){},onSet:function(a){},canSet:function(a){return!0}};return e=xe({},r,e),function(a,i){var s=e,o=this,u=o.length!==void 0,l=u?o:[o],f=u?o[0]:o;if(we(a)){var c=a.indexOf(".")!==-1,h=c&&HL(a);if(s.allowGetting&&i===void 0){var d;return f&&(s.beforeGet(f),h&&f._private[s.field][a]===void 0?d=OL(f._private[s.field],h):d=f._private[s.field][a]),d}else if(s.allowSetting&&i!==void 0){var v=!s.immutableKeys[a];if(v){var p=dx({},a,i);s.beforeSet(o,p);for(var g=0,y=l.length;g<y;g++){var m=l[g];s.canSet(m)&&(h&&f._private[s.field][a]===void 0?zL(m._private[s.field],h,i):m._private[s.field][a]=i)}s.updateStyle&&o.updateStyle(),s.onSet(o),s.settingTriggersEvent&&o[s.triggerFnName](s.settingEvent)}}}else if(s.allowSetting&&Be(a)){var b=a,E,x,S=Object.keys(b);s.beforeSet(o,b);for(var w=0;w<S.length;w++){E=S[w],x=b[E];var T=!s.immutableKeys[E];if(T)for(var C=0;C<l.length;C++){var A=l[C];s.canSet(A)&&(A._private[s.field][E]=x)}}s.updateStyle&&o.updateStyle(),s.onSet(o),s.settingTriggersEvent&&o[s.triggerFnName](s.settingEvent)}else if(s.allowBinding&&Ke(a)){var R=a;o.on(s.bindingEvent,R)}else if(s.allowGetting&&a===void 0){var I;return f&&(s.beforeGet(f),I=f._private[s.field]),I}return o}},removeData:function(e){var r={field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!1,immutableKeys:{}};return e=xe({},r,e),function(a){var i=e,s=this,o=s.length!==void 0,u=o?s:[s];if(we(a)){for(var l=a.split(/\s+/),f=l.length,c=0;c<f;c++){var h=l[c];if(!Or(h)){var d=!i.immutableKeys[h];if(d)for(var v=0,p=u.length;v<p;v++)u[v]._private[i.field][h]=void 0}}i.triggerEvent&&s[i.triggerFnName](i.event)}else if(a===void 0){for(var g=0,y=u.length;g<y;g++)for(var m=u[g]._private[i.field],b=Object.keys(m),E=0;E<b.length;E++){var x=b[E],S=!i.immutableKeys[x];S&&(m[x]=void 0)}i.triggerEvent&&s[i.triggerFnName](i.event)}return s}}},WL={eventAliasesOn:function(e){var r=e;r.addListener=r.listen=r.bind=r.on,r.unlisten=r.unbind=r.off=r.removeListener,r.trigger=r.emit,r.pon=r.promiseOn=function(n,a){var i=this,s=Array.prototype.slice.call(arguments,0);return new $n(function(o,u){var l=function(d){i.off.apply(i,c),o(d)},f=s.concat([l]),c=f.concat([]);i.on.apply(i,f)})}}},qe={};[J_,YL,WL].forEach(function(t){xe(qe,t)});var XL={animate:qe.animate(),animation:qe.animation(),animated:qe.animated(),clearQueue:qe.clearQueue(),delay:qe.delay(),delayAnimation:qe.delayAnimation(),stop:qe.stop()},hi={classes:function(e){var r=this;if(e===void 0){var n=[];return r[0]._private.classes.forEach(function(v){return n.push(v)}),n}else $e(e)||(e=(e||"").match(/\S+/g)||[]);for(var a=[],i=new zn(e),s=0;s<r.length;s++){for(var o=r[s],u=o._private,l=u.classes,f=!1,c=0;c<e.length;c++){var h=e[c],d=l.has(h);if(!d){f=!0;break}}f||(f=l.size!==e.length),f&&(u.classes=i,a.push(o))}return a.length>0&&this.spawn(a).updateStyle().emit("class"),r},addClass:function(e){return this.toggleClass(e,!0)},hasClass:function(e){var r=this[0];return r!=null&&r._private.classes.has(e)},toggleClass:function(e,r){$e(e)||(e=e.match(/\S+/g)||[]);for(var n=this,a=r===void 0,i=[],s=0,o=n.length;s<o;s++)for(var u=n[s],l=u._private.classes,f=!1,c=0;c<e.length;c++){var h=e[c],d=l.has(h),v=!1;r||a&&!d?(l.add(h),v=!0):(!r||a&&d)&&(l.delete(h),v=!0),!f&&v&&(i.push(u),f=!0)}return i.length>0&&this.spawn(i).updateStyle().emit("class"),n},removeClass:function(e){return this.toggleClass(e,!1)},flashClass:function(e,r){var n=this;if(r==null)r=250;else if(r===0)return n;return n.addClass(e),setTimeout(function(){n.removeClass(e)},r),n}};hi.className=hi.classNames=hi.classes;var Ne={metaChar:"[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]",comparatorOp:"=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=",boolOp:"\\?|\\!|\\^",string:`"(?:\\\\"|[^"])*"|'(?:\\\\'|[^'])*'`,number:st,meta:"degree|indegree|outdegree",separator:"\\s*,\\s*",descendant:"\\s+",child:"\\s+>\\s+",subject:"\\$",group:"node|edge|\\*",directedEdge:"\\s+->\\s+",undirectedEdge:"\\s+<->\\s+"};Ne.variable="(?:[\\w-.]|(?:\\\\"+Ne.metaChar+"))+";Ne.className="(?:[\\w-]|(?:\\\\"+Ne.metaChar+"))+";Ne.value=Ne.string+"|"+Ne.number;Ne.id=Ne.variable;(function(){var t,e,r;for(t=Ne.comparatorOp.split("|"),r=0;r<t.length;r++)e=t[r],Ne.comparatorOp+="|@"+e;for(t=Ne.comparatorOp.split("|"),r=0;r<t.length;r++)e=t[r],!(e.indexOf("!")>=0)&&e!=="="&&(Ne.comparatorOp+="|\\!"+e)})();var ze=function(){return{checks:[]}},le={GROUP:0,COLLECTION:1,FILTER:2,DATA_COMPARE:3,DATA_EXIST:4,DATA_BOOL:5,META_COMPARE:6,STATE:7,ID:8,CLASS:9,UNDIRECTED_EDGE:10,DIRECTED_EDGE:11,NODE_SOURCE:12,NODE_TARGET:13,NODE_NEIGHBOR:14,CHILD:15,DESCENDANT:16,PARENT:17,ANCESTOR:18,COMPOUND_SPLIT:19,TRUE:20},Xd=[{selector:":selected",matches:function(e){return e.selected()}},{selector:":unselected",matches:function(e){return!e.selected()}},{selector:":selectable",matches:function(e){return e.selectable()}},{selector:":unselectable",matches:function(e){return!e.selectable()}},{selector:":locked",matches:function(e){return e.locked()}},{selector:":unlocked",matches:function(e){return!e.locked()}},{selector:":visible",matches:function(e){return e.visible()}},{selector:":hidden",matches:function(e){return!e.visible()}},{selector:":transparent",matches:function(e){return e.transparent()}},{selector:":grabbed",matches:function(e){return e.grabbed()}},{selector:":free",matches:function(e){return!e.grabbed()}},{selector:":removed",matches:function(e){return e.removed()}},{selector:":inside",matches:function(e){return!e.removed()}},{selector:":grabbable",matches:function(e){return e.grabbable()}},{selector:":ungrabbable",matches:function(e){return!e.grabbable()}},{selector:":animated",matches:function(e){return e.animated()}},{selector:":unanimated",matches:function(e){return!e.animated()}},{selector:":parent",matches:function(e){return e.isParent()}},{selector:":childless",matches:function(e){return e.isChildless()}},{selector:":child",matches:function(e){return e.isChild()}},{selector:":orphan",matches:function(e){return e.isOrphan()}},{selector:":nonorphan",matches:function(e){return e.isChild()}},{selector:":compound",matches:function(e){return e.isNode()?e.isParent():e.source().isParent()||e.target().isParent()}},{selector:":loop",matches:function(e){return e.isLoop()}},{selector:":simple",matches:function(e){return e.isSimple()}},{selector:":active",matches:function(e){return e.active()}},{selector:":inactive",matches:function(e){return!e.active()}},{selector:":backgrounding",matches:function(e){return e.backgrounding()}},{selector:":nonbackgrounding",matches:function(e){return!e.backgrounding()}}].sort(function(t,e){return YI(t.selector,e.selector)}),KL=function(){for(var t={},e,r=0;r<Xd.length;r++)e=Xd[r],t[e.selector]=e.matches;return t}(),jL=function(e,r){return KL[e](r)},ZL="("+Xd.map(function(t){return t.selector}).join("|")+")",wn=function(e){return e.replace(new RegExp("\\\\("+Ne.metaChar+")","g"),function(r,n){return n})},br=function(e,r,n){e[e.length-1]=n},Kd=[{name:"group",query:!0,regex:"("+Ne.group+")",populate:function(e,r,n){var a=tt(n,1),i=a[0];r.checks.push({type:le.GROUP,value:i==="*"?i:i+"s"})}},{name:"state",query:!0,regex:ZL,populate:function(e,r,n){var a=tt(n,1),i=a[0];r.checks.push({type:le.STATE,value:i})}},{name:"id",query:!0,regex:"\\#("+Ne.id+")",populate:function(e,r,n){var a=tt(n,1),i=a[0];r.checks.push({type:le.ID,value:wn(i)})}},{name:"className",query:!0,regex:"\\.("+Ne.className+")",populate:function(e,r,n){var a=tt(n,1),i=a[0];r.checks.push({type:le.CLASS,value:wn(i)})}},{name:"dataExists",query:!0,regex:"\\[\\s*("+Ne.variable+")\\s*\\]",populate:function(e,r,n){var a=tt(n,1),i=a[0];r.checks.push({type:le.DATA_EXIST,field:wn(i)})}},{name:"dataCompare",query:!0,regex:"\\[\\s*("+Ne.variable+")\\s*("+Ne.comparatorOp+")\\s*("+Ne.value+")\\s*\\]",populate:function(e,r,n){var a=tt(n,3),i=a[0],s=a[1],o=a[2],u=new RegExp("^"+Ne.string+"$").exec(o)!=null;u?o=o.substring(1,o.length-1):o=parseFloat(o),r.checks.push({type:le.DATA_COMPARE,field:wn(i),operator:s,value:o})}},{name:"dataBool",query:!0,regex:"\\[\\s*("+Ne.boolOp+")\\s*("+Ne.variable+")\\s*\\]",populate:function(e,r,n){var a=tt(n,2),i=a[0],s=a[1];r.checks.push({type:le.DATA_BOOL,field:wn(s),operator:i})}},{name:"metaCompare",query:!0,regex:"\\[\\[\\s*("+Ne.meta+")\\s*("+Ne.comparatorOp+")\\s*("+Ne.number+")\\s*\\]\\]",populate:function(e,r,n){var a=tt(n,3),i=a[0],s=a[1],o=a[2];r.checks.push({type:le.META_COMPARE,field:wn(i),operator:s,value:parseFloat(o)})}},{name:"nextQuery",separator:!0,regex:Ne.separator,populate:function(e,r){var n=e.currentSubject,a=e.edgeCount,i=e.compoundCount,s=e[e.length-1];n!=null&&(s.subject=n,e.currentSubject=null),s.edgeCount=a,s.compoundCount=i,e.edgeCount=0,e.compoundCount=0;var o=e[e.length++]=ze();return o}},{name:"directedEdge",separator:!0,regex:Ne.directedEdge,populate:function(e,r){if(e.currentSubject==null){var n=ze(),a=r,i=ze();return n.checks.push({type:le.DIRECTED_EDGE,source:a,target:i}),br(e,r,n),e.edgeCount++,i}else{var s=ze(),o=r,u=ze();return s.checks.push({type:le.NODE_SOURCE,source:o,target:u}),br(e,r,s),e.edgeCount++,u}}},{name:"undirectedEdge",separator:!0,regex:Ne.undirectedEdge,populate:function(e,r){if(e.currentSubject==null){var n=ze(),a=r,i=ze();return n.checks.push({type:le.UNDIRECTED_EDGE,nodes:[a,i]}),br(e,r,n),e.edgeCount++,i}else{var s=ze(),o=r,u=ze();return s.checks.push({type:le.NODE_NEIGHBOR,node:o,neighbor:u}),br(e,r,s),u}}},{name:"child",separator:!0,regex:Ne.child,populate:function(e,r){if(e.currentSubject==null){var n=ze(),a=ze(),i=e[e.length-1];return n.checks.push({type:le.CHILD,parent:i,child:a}),br(e,r,n),e.compoundCount++,a}else if(e.currentSubject===r){var s=ze(),o=e[e.length-1],u=ze(),l=ze(),f=ze(),c=ze();return s.checks.push({type:le.COMPOUND_SPLIT,left:o,right:u,subject:l}),l.checks=r.checks,r.checks=[{type:le.TRUE}],c.checks.push({type:le.TRUE}),u.checks.push({type:le.PARENT,parent:c,child:f}),br(e,o,s),e.currentSubject=l,e.compoundCount++,f}else{var h=ze(),d=ze(),v=[{type:le.PARENT,parent:h,child:d}];return h.checks=r.checks,r.checks=v,e.compoundCount++,d}}},{name:"descendant",separator:!0,regex:Ne.descendant,populate:function(e,r){if(e.currentSubject==null){var n=ze(),a=ze(),i=e[e.length-1];return n.checks.push({type:le.DESCENDANT,ancestor:i,descendant:a}),br(e,r,n),e.compoundCount++,a}else if(e.currentSubject===r){var s=ze(),o=e[e.length-1],u=ze(),l=ze(),f=ze(),c=ze();return s.checks.push({type:le.COMPOUND_SPLIT,left:o,right:u,subject:l}),l.checks=r.checks,r.checks=[{type:le.TRUE}],c.checks.push({type:le.TRUE}),u.checks.push({type:le.ANCESTOR,ancestor:c,descendant:f}),br(e,o,s),e.currentSubject=l,e.compoundCount++,f}else{var h=ze(),d=ze(),v=[{type:le.ANCESTOR,ancestor:h,descendant:d}];return h.checks=r.checks,r.checks=v,e.compoundCount++,d}}},{name:"subject",modifier:!0,regex:Ne.subject,populate:function(e,r){if(e.currentSubject!=null&&e.currentSubject!==r)return Ge("Redefinition of subject in selector `"+e.toString()+"`"),!1;e.currentSubject=r;var n=e[e.length-1],a=n.checks[0],i=a==null?null:a.type;i===le.DIRECTED_EDGE?a.type=le.NODE_TARGET:i===le.UNDIRECTED_EDGE&&(a.type=le.NODE_NEIGHBOR,a.node=a.nodes[1],a.neighbor=a.nodes[0],a.nodes=null)}}];Kd.forEach(function(t){return t.regexObj=new RegExp("^"+t.regex)});var QL=function(e){for(var r,n,a,i=0;i<Kd.length;i++){var s=Kd[i],o=s.name,u=e.match(s.regexObj);if(u!=null){n=u,r=s,a=o;var l=u[0];e=e.substring(l.length);break}}return{expr:r,match:n,name:a,remaining:e}},JL=function(e){var r=e.match(/^\s+/);if(r){var n=r[0];e=e.substring(n.length)}return e},eM=function(e){var r=this,n=r.inputText=e,a=r[0]=ze();for(r.length=1,n=JL(n);;){var i=QL(n);if(i.expr==null)return Ge("The selector `"+e+"`is invalid"),!1;var s=i.match.slice(1),o=i.expr.populate(r,a,s);if(o===!1)return!1;if(o!=null&&(a=o),n=i.remaining,n.match(/^\s*$/))break}var u=r[r.length-1];r.currentSubject!=null&&(u.subject=r.currentSubject),u.edgeCount=r.edgeCount,u.compoundCount=r.compoundCount;for(var l=0;l<r.length;l++){var f=r[l];if(f.compoundCount>0&&f.edgeCount>0)return Ge("The selector `"+e+"` is invalid because it uses both a compound selector and an edge selector"),!1;if(f.edgeCount>1)return Ge("The selector `"+e+"` is invalid because it uses multiple edge selectors"),!1;f.edgeCount===1&&Ge("The selector `"+e+"` is deprecated.  Edge selectors do not take effect on changes to source and target nodes after an edge is added, for performance reasons.  Use a class or data selector on edges instead, updating the class or data of an edge when your app detects a change in source or target nodes.")}return!0},tM=function(){if(this.toStringCache!=null)return this.toStringCache;for(var e=function(f){return f??""},r=function(f){return we(f)?'"'+f+'"':e(f)},n=function(f){return" "+f+" "},a=function(f,c){var h=f.type,d=f.value;switch(h){case le.GROUP:{var v=e(d);return v.substring(0,v.length-1)}case le.DATA_COMPARE:{var p=f.field,g=f.operator;return"["+p+n(e(g))+r(d)+"]"}case le.DATA_BOOL:{var y=f.operator,m=f.field;return"["+e(y)+m+"]"}case le.DATA_EXIST:{var b=f.field;return"["+b+"]"}case le.META_COMPARE:{var E=f.operator,x=f.field;return"[["+x+n(e(E))+r(d)+"]]"}case le.STATE:return d;case le.ID:return"#"+d;case le.CLASS:return"."+d;case le.PARENT:case le.CHILD:return i(f.parent,c)+n(">")+i(f.child,c);case le.ANCESTOR:case le.DESCENDANT:return i(f.ancestor,c)+" "+i(f.descendant,c);case le.COMPOUND_SPLIT:{var S=i(f.left,c),w=i(f.subject,c),T=i(f.right,c);return S+(S.length>0?" ":"")+w+T}case le.TRUE:return""}},i=function(f,c){return f.checks.reduce(function(h,d,v){return h+(c===f&&v===0?"$":"")+a(d,c)},"")},s="",o=0;o<this.length;o++){var u=this[o];s+=i(u,u.subject),this.length>1&&o<this.length-1&&(s+=", ")}return this.toStringCache=s,s},rM={parse:eM,toString:tM},Jx=function(e,r,n){var a,i=we(e),s=ie(e),o=we(n),u,l,f=!1,c=!1,h=!1;switch(r.indexOf("!")>=0&&(r=r.replace("!",""),c=!0),r.indexOf("@")>=0&&(r=r.replace("@",""),f=!0),(i||o||f)&&(u=!i&&!s?"":""+e,l=""+n),f&&(e=u=u.toLowerCase(),n=l=l.toLowerCase()),r){case"*=":a=u.indexOf(l)>=0;break;case"$=":a=u.indexOf(l,u.length-l.length)>=0;break;case"^=":a=u.indexOf(l)===0;break;case"=":a=e===n;break;case">":h=!0,a=e>n;break;case">=":h=!0,a=e>=n;break;case"<":h=!0,a=e<n;break;case"<=":h=!0,a=e<=n;break;default:a=!1;break}return c&&(e!=null||!h)&&(a=!a),a},nM=function(e,r){switch(r){case"?":return!!e;case"!":return!e;case"^":return e===void 0}},aM=function(e){return e!==void 0},Mv=function(e,r){return e.data(r)},iM=function(e,r){return e[r]()},Ze=[],Ye=function(e,r){return e.checks.every(function(n){return Ze[n.type](n,r)})};Ze[le.GROUP]=function(t,e){var r=t.value;return r==="*"||r===e.group()};Ze[le.STATE]=function(t,e){var r=t.value;return jL(r,e)};Ze[le.ID]=function(t,e){var r=t.value;return e.id()===r};Ze[le.CLASS]=function(t,e){var r=t.value;return e.hasClass(r)};Ze[le.META_COMPARE]=function(t,e){var r=t.field,n=t.operator,a=t.value;return Jx(iM(e,r),n,a)};Ze[le.DATA_COMPARE]=function(t,e){var r=t.field,n=t.operator,a=t.value;return Jx(Mv(e,r),n,a)};Ze[le.DATA_BOOL]=function(t,e){var r=t.field,n=t.operator;return nM(Mv(e,r),n)};Ze[le.DATA_EXIST]=function(t,e){var r=t.field;return t.operator,aM(Mv(e,r))};Ze[le.UNDIRECTED_EDGE]=function(t,e){var r=t.nodes[0],n=t.nodes[1],a=e.source(),i=e.target();return Ye(r,a)&&Ye(n,i)||Ye(n,a)&&Ye(r,i)};Ze[le.NODE_NEIGHBOR]=function(t,e){return Ye(t.node,e)&&e.neighborhood().some(function(r){return r.isNode()&&Ye(t.neighbor,r)})};Ze[le.DIRECTED_EDGE]=function(t,e){return Ye(t.source,e.source())&&Ye(t.target,e.target())};Ze[le.NODE_SOURCE]=function(t,e){return Ye(t.source,e)&&e.outgoers().some(function(r){return r.isNode()&&Ye(t.target,r)})};Ze[le.NODE_TARGET]=function(t,e){return Ye(t.target,e)&&e.incomers().some(function(r){return r.isNode()&&Ye(t.source,r)})};Ze[le.CHILD]=function(t,e){return Ye(t.child,e)&&Ye(t.parent,e.parent())};Ze[le.PARENT]=function(t,e){return Ye(t.parent,e)&&e.children().some(function(r){return Ye(t.child,r)})};Ze[le.DESCENDANT]=function(t,e){return Ye(t.descendant,e)&&e.ancestors().some(function(r){return Ye(t.ancestor,r)})};Ze[le.ANCESTOR]=function(t,e){return Ye(t.ancestor,e)&&e.descendants().some(function(r){return Ye(t.descendant,r)})};Ze[le.COMPOUND_SPLIT]=function(t,e){return Ye(t.subject,e)&&Ye(t.left,e)&&Ye(t.right,e)};Ze[le.TRUE]=function(){return!0};Ze[le.COLLECTION]=function(t,e){var r=t.value;return r.has(e)};Ze[le.FILTER]=function(t,e){var r=t.value;return r(e)};var sM=function(e){var r=this;if(r.length===1&&r[0].checks.length===1&&r[0].checks[0].type===le.ID)return e.getElementById(r[0].checks[0].value).collection();var n=function(i){for(var s=0;s<r.length;s++){var o=r[s];if(Ye(o,i))return!0}return!1};return r.text()==null&&(n=function(){return!0}),e.filter(n)},oM=function(e){for(var r=this,n=0;n<r.length;n++){var a=r[n];if(Ye(a,e))return!0}return!1},uM={matches:oM,filter:sM},Nr=function(e){this.inputText=e,this.currentSubject=null,this.compoundCount=0,this.edgeCount=0,this.length=0,e==null||we(e)&&e.match(/^\s*$/)||(Pt(e)?this.addQuery({checks:[{type:le.COLLECTION,value:e.collection()}]}):Ke(e)?this.addQuery({checks:[{type:le.FILTER,value:e}]}):we(e)?this.parse(e)||(this.invalid=!0):We("A selector must be created from a string; found "))},Br=Nr.prototype;[rM,uM].forEach(function(t){return xe(Br,t)});Br.text=function(){return this.inputText};Br.size=function(){return this.length};Br.eq=function(t){return this[t]};Br.sameText=function(t){return!this.invalid&&!t.invalid&&this.text()===t.text()};Br.addQuery=function(t){this[this.length++]=t};Br.selector=Br.toString;var Dr={allAre:function(e){var r=new Nr(e);return this.every(function(n){return r.matches(n)})},is:function(e){var r=new Nr(e);return this.some(function(n){return r.matches(n)})},some:function(e,r){for(var n=0;n<this.length;n++){var a=r?e.apply(r,[this[n],n,this]):e(this[n],n,this);if(a)return!0}return!1},every:function(e,r){for(var n=0;n<this.length;n++){var a=r?e.apply(r,[this[n],n,this]):e(this[n],n,this);if(!a)return!1}return!0},same:function(e){if(this===e)return!0;e=this.cy().collection(e);var r=this.length,n=e.length;return r!==n?!1:r===1?this[0]===e[0]:this.every(function(a){return e.hasElementWithId(a.id())})},anySame:function(e){return e=this.cy().collection(e),this.some(function(r){return e.hasElementWithId(r.id())})},allAreNeighbors:function(e){e=this.cy().collection(e);var r=this.neighborhood();return e.every(function(n){return r.hasElementWithId(n.id())})},contains:function(e){e=this.cy().collection(e);var r=this;return e.every(function(n){return r.hasElementWithId(n.id())})}};Dr.allAreNeighbours=Dr.allAreNeighbors;Dr.has=Dr.contains;Dr.equal=Dr.equals=Dr.same;var Ft=function(e,r){return function(a,i,s,o){var u=a,l=this,f;if(u==null?f="":Pt(u)&&u.length===1&&(f=u.id()),l.length===1&&f){var c=l[0]._private,h=c.traversalCache=c.traversalCache||{},d=h[r]=h[r]||[],v=on(f),p=d[v];return p||(d[v]=e.call(l,a,i,s,o))}else return e.call(l,a,i,s,o)}},Gn={parent:function(e){var r=[];if(this.length===1){var n=this[0]._private.parent;if(n)return n}for(var a=0;a<this.length;a++){var i=this[a],s=i._private.parent;s&&r.push(s)}return this.spawn(r,!0).filter(e)},parents:function(e){for(var r=[],n=this.parent();n.nonempty();){for(var a=0;a<n.length;a++){var i=n[a];r.push(i)}n=n.parent()}return this.spawn(r,!0).filter(e)},commonAncestors:function(e){for(var r,n=0;n<this.length;n++){var a=this[n],i=a.parents();r=r||i,r=r.intersect(i)}return r.filter(e)},orphans:function(e){return this.stdFilter(function(r){return r.isOrphan()}).filter(e)},nonorphans:function(e){return this.stdFilter(function(r){return r.isChild()}).filter(e)},children:Ft(function(t){for(var e=[],r=0;r<this.length;r++)for(var n=this[r],a=n._private.children,i=0;i<a.length;i++)e.push(a[i]);return this.spawn(e,!0).filter(t)},"children"),siblings:function(e){return this.parent().children().not(this).filter(e)},isParent:function(){var e=this[0];if(e)return e.isNode()&&e._private.children.length!==0},isChildless:function(){var e=this[0];if(e)return e.isNode()&&e._private.children.length===0},isChild:function(){var e=this[0];if(e)return e.isNode()&&e._private.parent!=null},isOrphan:function(){var e=this[0];if(e)return e.isNode()&&e._private.parent==null},descendants:function(e){var r=[];function n(a){for(var i=0;i<a.length;i++){var s=a[i];r.push(s),s.children().nonempty()&&n(s.children())}}return n(this.children()),this.spawn(r,!0).filter(e)}};function Ov(t,e,r,n){for(var a=[],i=new zn,s=t.cy(),o=s.hasCompoundNodes(),u=0;u<t.length;u++){var l=t[u];r?a.push(l):o&&n(a,i,l)}for(;a.length>0;){var f=a.shift();e(f),i.add(f.id()),o&&n(a,i,f)}return t}function eT(t,e,r){if(r.isParent())for(var n=r._private.children,a=0;a<n.length;a++){var i=n[a];e.has(i.id())||t.push(i)}}Gn.forEachDown=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return Ov(this,t,e,eT)};function tT(t,e,r){if(r.isChild()){var n=r._private.parent;e.has(n.id())||t.push(n)}}Gn.forEachUp=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return Ov(this,t,e,tT)};function lM(t,e,r){tT(t,e,r),eT(t,e,r)}Gn.forEachUpAndDown=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return Ov(this,t,e,lM)};Gn.ancestors=Gn.parents;var Sa,rT;Sa=rT={data:qe.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),removeData:qe.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),scratch:qe.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:qe.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),rscratch:qe.data({field:"rscratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeRscratch:qe.removeData({field:"rscratch",triggerEvent:!1}),id:function(){var e=this[0];if(e)return e._private.data.id}};Sa.attr=Sa.data;Sa.removeAttr=Sa.removeData;var fM=rT,rs={};function ru(t){return function(e){var r=this;if(e===void 0&&(e=!0),r.length!==0)if(r.isNode()&&!r.removed()){for(var n=0,a=r[0],i=a._private.edges,s=0;s<i.length;s++){var o=i[s];!e&&o.isLoop()||(n+=t(a,o))}return n}else return}}xe(rs,{degree:ru(function(t,e){return e.source().same(e.target())?2:1}),indegree:ru(function(t,e){return e.target().same(t)?1:0}),outdegree:ru(function(t,e){return e.source().same(t)?1:0})});function En(t,e){return function(r){for(var n,a=this.nodes(),i=0;i<a.length;i++){var s=a[i],o=s[t](r);o!==void 0&&(n===void 0||e(o,n))&&(n=o)}return n}}xe(rs,{minDegree:En("degree",function(t,e){return t<e}),maxDegree:En("degree",function(t,e){return t>e}),minIndegree:En("indegree",function(t,e){return t<e}),maxIndegree:En("indegree",function(t,e){return t>e}),minOutdegree:En("outdegree",function(t,e){return t<e}),maxOutdegree:En("outdegree",function(t,e){return t>e})});xe(rs,{totalDegree:function(e){for(var r=0,n=this.nodes(),a=0;a<n.length;a++)r+=n[a].degree(e);return r}});var Ht,nT,aT=function(e,r,n){for(var a=0;a<e.length;a++){var i=e[a];if(!i.locked()){var s=i._private.position,o={x:r.x!=null?r.x-s.x:0,y:r.y!=null?r.y-s.y:0};i.isParent()&&!(o.x===0&&o.y===0)&&i.children().shift(o,n),i.dirtyBoundingBoxCache()}}},gy={field:"position",bindingEvent:"position",allowBinding:!0,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!0,triggerFnName:"emitAndNotify",allowGetting:!0,validKeys:["x","y"],beforeGet:function(e){e.updateCompoundBounds()},beforeSet:function(e,r){aT(e,r,!1)},onSet:function(e){e.dirtyCompoundBoundsCache()},canSet:function(e){return!e.locked()}};Ht=nT={position:qe.data(gy),silentPosition:qe.data(xe({},gy,{allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!1,beforeSet:function(e,r){aT(e,r,!0)},onSet:function(e){e.dirtyCompoundBoundsCache()}})),positions:function(e,r){if(Be(e))r?this.silentPosition(e):this.position(e);else if(Ke(e)){var n=e,a=this.cy();a.startBatch();for(var i=0;i<this.length;i++){var s=this[i],o=void 0;(o=n(s,i))&&(r?s.silentPosition(o):s.position(o))}a.endBatch()}return this},silentPositions:function(e){return this.positions(e,!0)},shift:function(e,r,n){var a;if(Be(e)?(a={x:ie(e.x)?e.x:0,y:ie(e.y)?e.y:0},n=r):we(e)&&ie(r)&&(a={x:0,y:0},a[e]=r),a!=null){var i=this.cy();i.startBatch();for(var s=0;s<this.length;s++){var o=this[s];if(!(i.hasCompoundNodes()&&o.isChild()&&o.ancestors().anySame(this))){var u=o.position(),l={x:u.x+a.x,y:u.y+a.y};n?o.silentPosition(l):o.position(l)}}i.endBatch()}return this},silentShift:function(e,r){return Be(e)?this.shift(e,!0):we(e)&&ie(r)&&this.shift(e,r,!0),this},renderedPosition:function(e,r){var n=this[0],a=this.cy(),i=a.zoom(),s=a.pan(),o=Be(e)?e:void 0,u=o!==void 0||r!==void 0&&we(e);if(n&&n.isNode())if(u)for(var l=0;l<this.length;l++){var f=this[l];r!==void 0?f.position(e,(r-s[e])/i):o!==void 0&&f.position(Mx(o,i,s))}else{var c=n.position();return o=ji(c,i,s),e===void 0?o:o[e]}else if(!u)return;return this},relativePosition:function(e,r){var n=this[0],a=this.cy(),i=Be(e)?e:void 0,s=i!==void 0||r!==void 0&&we(e),o=a.hasCompoundNodes();if(n&&n.isNode())if(s)for(var u=0;u<this.length;u++){var l=this[u],f=o?l.parent():null,c=f&&f.length>0,h=c;c&&(f=f[0]);var d=h?f.position():{x:0,y:0};r!==void 0?l.position(e,r+d[e]):i!==void 0&&l.position({x:i.x+d.x,y:i.y+d.y})}else{var v=n.position(),p=o?n.parent():null,g=p&&p.length>0,y=g;g&&(p=p[0]);var m=y?p.position():{x:0,y:0};return i={x:v.x-m.x,y:v.y-m.y},e===void 0?i:i[e]}else if(!s)return;return this}};Ht.modelPosition=Ht.point=Ht.position;Ht.modelPositions=Ht.points=Ht.positions;Ht.renderedPoint=Ht.renderedPosition;Ht.relativePoint=Ht.relativePosition;var cM=nT,Nn,zr;Nn=zr={};zr.renderedBoundingBox=function(t){var e=this.boundingBox(t),r=this.cy(),n=r.zoom(),a=r.pan(),i=e.x1*n+a.x,s=e.x2*n+a.x,o=e.y1*n+a.y,u=e.y2*n+a.y;return{x1:i,x2:s,y1:o,y2:u,w:s-i,h:u-o}};zr.dirtyCompoundBoundsCache=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,e=this.cy();return!e.styleEnabled()||!e.hasCompoundNodes()?this:(this.forEachUp(function(r){if(r.isParent()){var n=r._private;n.compoundBoundsClean=!1,n.bbCache=null,t||r.emitAndNotify("bounds")}}),this)};zr.updateCompoundBounds=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,e=this.cy();if(!e.styleEnabled()||!e.hasCompoundNodes())return this;if(!t&&e.batching())return this;function r(s){if(!s.isParent())return;var o=s._private,u=s.children(),l=s.pstyle("compound-sizing-wrt-labels").value==="include",f={width:{val:s.pstyle("min-width").pfValue,left:s.pstyle("min-width-bias-left"),right:s.pstyle("min-width-bias-right")},height:{val:s.pstyle("min-height").pfValue,top:s.pstyle("min-height-bias-top"),bottom:s.pstyle("min-height-bias-bottom")}},c=u.boundingBox({includeLabels:l,includeOverlays:!1,useCache:!1}),h=o.position;(c.w===0||c.h===0)&&(c={w:s.pstyle("width").pfValue,h:s.pstyle("height").pfValue},c.x1=h.x-c.w/2,c.x2=h.x+c.w/2,c.y1=h.y-c.h/2,c.y2=h.y+c.h/2);function d(C,A,R){var I=0,D=0,_=A+R;return C>0&&_>0&&(I=A/_*C,D=R/_*C),{biasDiff:I,biasComplementDiff:D}}function v(C,A,R,I){if(R.units==="%")switch(I){case"width":return C>0?R.pfValue*C:0;case"height":return A>0?R.pfValue*A:0;case"average":return C>0&&A>0?R.pfValue*(C+A)/2:0;case"min":return C>0&&A>0?C>A?R.pfValue*A:R.pfValue*C:0;case"max":return C>0&&A>0?C>A?R.pfValue*C:R.pfValue*A:0;default:return 0}else return R.units==="px"?R.pfValue:0}var p=f.width.left.value;f.width.left.units==="px"&&f.width.val>0&&(p=p*100/f.width.val);var g=f.width.right.value;f.width.right.units==="px"&&f.width.val>0&&(g=g*100/f.width.val);var y=f.height.top.value;f.height.top.units==="px"&&f.height.val>0&&(y=y*100/f.height.val);var m=f.height.bottom.value;f.height.bottom.units==="px"&&f.height.val>0&&(m=m*100/f.height.val);var b=d(f.width.val-c.w,p,g),E=b.biasDiff,x=b.biasComplementDiff,S=d(f.height.val-c.h,y,m),w=S.biasDiff,T=S.biasComplementDiff;o.autoPadding=v(c.w,c.h,s.pstyle("padding"),s.pstyle("padding-relative-to").value),o.autoWidth=Math.max(c.w,f.width.val),h.x=(-E+c.x1+c.x2+x)/2,o.autoHeight=Math.max(c.h,f.height.val),h.y=(-w+c.y1+c.y2+T)/2}for(var n=0;n<this.length;n++){var a=this[n],i=a._private;(!i.compoundBoundsClean||t)&&(r(a),e.batching()||(i.compoundBoundsClean=!0))}return this};var Bt=function(e){return e===1/0||e===-1/0?0:e},Ut=function(e,r,n,a,i){a-r===0||i-n===0||r==null||n==null||a==null||i==null||(e.x1=r<e.x1?r:e.x1,e.x2=a>e.x2?a:e.x2,e.y1=n<e.y1?n:e.y1,e.y2=i>e.y2?i:e.y2,e.w=e.x2-e.x1,e.h=e.y2-e.y1)},wr=function(e,r){return r==null?e:Ut(e,r.x1,r.y1,r.x2,r.y2)},ra=function(e,r,n){return Dt(e,r,n)},ri=function(e,r,n){if(!r.cy().headless()){var a=r._private,i=a.rstyle,s=i.arrowWidth/2,o=r.pstyle(n+"-arrow-shape").value,u,l;if(o!=="none"){n==="source"?(u=i.srcX,l=i.srcY):n==="target"?(u=i.tgtX,l=i.tgtY):(u=i.midX,l=i.midY);var f=a.arrowBounds=a.arrowBounds||{},c=f[n]=f[n]||{};c.x1=u-s,c.y1=l-s,c.x2=u+s,c.y2=l+s,c.w=c.x2-c.x1,c.h=c.y2-c.y1,fi(c,1),Ut(e,c.x1,c.y1,c.x2,c.y2)}}},nu=function(e,r,n){if(!r.cy().headless()){var a;n?a=n+"-":a="";var i=r._private,s=i.rstyle,o=r.pstyle(a+"label").strValue;if(o){var u=r.pstyle("text-halign"),l=r.pstyle("text-valign"),f=ra(s,"labelWidth",n),c=ra(s,"labelHeight",n),h=ra(s,"labelX",n),d=ra(s,"labelY",n),v=r.pstyle(a+"text-margin-x").pfValue,p=r.pstyle(a+"text-margin-y").pfValue,g=r.isEdge(),y=r.pstyle(a+"text-rotation"),m=r.pstyle("text-outline-width").pfValue,b=r.pstyle("text-border-width").pfValue,E=b/2,x=r.pstyle("text-background-padding").pfValue,S=2,w=c,T=f,C=T/2,A=w/2,R,I,D,_;if(g)R=h-C,I=h+C,D=d-A,_=d+A;else{switch(u.value){case"left":R=h-T,I=h;break;case"center":R=h-C,I=h+C;break;case"right":R=h,I=h+T;break}switch(l.value){case"top":D=d-w,_=d;break;case"center":D=d-A,_=d+A;break;case"bottom":D=d,_=d+w;break}}var M=v-Math.max(m,E)-x-S,k=v+Math.max(m,E)+x+S,O=p-Math.max(m,E)-x-S,P=p+Math.max(m,E)+x+S;R+=M,I+=k,D+=O,_+=P;var q=n||"main",G=i.labelBounds,F=G[q]=G[q]||{};F.x1=R,F.y1=D,F.x2=I,F.y2=_,F.w=I-R,F.h=_-D,F.leftPad=M,F.rightPad=k,F.topPad=O,F.botPad=P;var z=g&&y.strValue==="autorotate",W=y.pfValue!=null&&y.pfValue!==0;if(z||W){var N=z?ra(i.rstyle,"labelAngle",n):y.pfValue,B=Math.cos(N),$=Math.sin(N),H=(R+I)/2,te=(D+_)/2;if(!g){switch(u.value){case"left":H=I;break;case"right":H=R;break}switch(l.value){case"top":te=_;break;case"bottom":te=D;break}}var K=function(se,be){return se=se-H,be=be-te,{x:se*B-be*$+H,y:se*$+be*B+te}},V=K(R,D),U=K(R,_),X=K(I,D),j=K(I,_);R=Math.min(V.x,U.x,X.x,j.x),I=Math.max(V.x,U.x,X.x,j.x),D=Math.min(V.y,U.y,X.y,j.y),_=Math.max(V.y,U.y,X.y,j.y)}var ne=q+"Rot",ae=G[ne]=G[ne]||{};ae.x1=R,ae.y1=D,ae.x2=I,ae.y2=_,ae.w=I-R,ae.h=_-D,Ut(e,R,D,I,_),Ut(i.labelBounds.all,R,D,I,_)}return e}},py=function(e,r){if(!r.cy().headless()){var n=r.pstyle("outline-opacity").value,a=r.pstyle("outline-width").value,i=r.pstyle("outline-offset").value,s=a+i;iT(e,r,n,s,"outside",s/2)}},iT=function(e,r,n,a,i,s){if(!(n===0||a<=0||i==="inside")){var o=r.cy(),u=r.pstyle("shape").value,l=o.renderer().nodeShapes[u],f=r.position(),c=f.x,h=f.y,d=r.width(),v=r.height();if(l.hasMiterBounds){i==="center"&&(a/=2);var p=l.miterBounds(c,h,d,v,a);wr(e,p)}else s!=null&&s>0&&ci(e,[s,s,s,s])}},hM=function(e,r){if(!r.cy().headless()){var n=r.pstyle("border-opacity").value,a=r.pstyle("border-width").pfValue,i=r.pstyle("border-position").value;iT(e,r,n,a,i)}},dM=function(e,r){var n=e._private.cy,a=n.styleEnabled(),i=n.headless(),s=St(),o=e._private,u=e.isNode(),l=e.isEdge(),f,c,h,d,v,p,g=o.rstyle,y=u&&a?e.pstyle("bounds-expansion").pfValue:[0],m=function(Se){return Se.pstyle("display").value!=="none"},b=!a||m(e)&&(!l||m(e.source())&&m(e.target()));if(b){var E=0,x=0;a&&r.includeOverlays&&(E=e.pstyle("overlay-opacity").value,E!==0&&(x=e.pstyle("overlay-padding").value));var S=0,w=0;a&&r.includeUnderlays&&(S=e.pstyle("underlay-opacity").value,S!==0&&(w=e.pstyle("underlay-padding").value));var T=Math.max(x,w),C=0,A=0;if(a&&(C=e.pstyle("width").pfValue,A=C/2),u&&r.includeNodes){var R=e.position();v=R.x,p=R.y;var I=e.outerWidth(),D=I/2,_=e.outerHeight(),M=_/2;f=v-D,c=v+D,h=p-M,d=p+M,Ut(s,f,h,c,d),a&&py(s,e),a&&r.includeOutlines&&!i&&py(s,e),a&&hM(s,e)}else if(l&&r.includeEdges)if(a&&!i){var k=e.pstyle("curve-style").strValue;if(f=Math.min(g.srcX,g.midX,g.tgtX),c=Math.max(g.srcX,g.midX,g.tgtX),h=Math.min(g.srcY,g.midY,g.tgtY),d=Math.max(g.srcY,g.midY,g.tgtY),f-=A,c+=A,h-=A,d+=A,Ut(s,f,h,c,d),k==="haystack"){var O=g.haystackPts;if(O&&O.length===2){if(f=O[0].x,h=O[0].y,c=O[1].x,d=O[1].y,f>c){var P=f;f=c,c=P}if(h>d){var q=h;h=d,d=q}Ut(s,f-A,h-A,c+A,d+A)}}else if(k==="bezier"||k==="unbundled-bezier"||xr(k,"segments")||xr(k,"taxi")){var G;switch(k){case"bezier":case"unbundled-bezier":G=g.bezierPts;break;case"segments":case"taxi":case"round-segments":case"round-taxi":G=g.linePts;break}if(G!=null)for(var F=0;F<G.length;F++){var z=G[F];f=z.x-A,c=z.x+A,h=z.y-A,d=z.y+A,Ut(s,f,h,c,d)}}}else{var W=e.source(),N=W.position(),B=e.target(),$=B.position();if(f=N.x,c=$.x,h=N.y,d=$.y,f>c){var H=f;f=c,c=H}if(h>d){var te=h;h=d,d=te}f-=A,c+=A,h-=A,d+=A,Ut(s,f,h,c,d)}if(a&&r.includeEdges&&l&&(ri(s,e,"mid-source"),ri(s,e,"mid-target"),ri(s,e,"source"),ri(s,e,"target")),a){var K=e.pstyle("ghost").value==="yes";if(K){var V=e.pstyle("ghost-offset-x").pfValue,U=e.pstyle("ghost-offset-y").pfValue;Ut(s,s.x1+V,s.y1+U,s.x2+V,s.y2+U)}}var X=o.bodyBounds=o.bodyBounds||{};tp(X,s),ci(X,y),fi(X,1),a&&(f=s.x1,c=s.x2,h=s.y1,d=s.y2,Ut(s,f-T,h-T,c+T,d+T));var j=o.overlayBounds=o.overlayBounds||{};tp(j,s),ci(j,y),fi(j,1);var ne=o.labelBounds=o.labelBounds||{};ne.all!=null?XD(ne.all):ne.all=St(),a&&r.includeLabels&&(r.includeMainLabels&&nu(s,e,null),l&&(r.includeSourceLabels&&nu(s,e,"source"),r.includeTargetLabels&&nu(s,e,"target")))}return s.x1=Bt(s.x1),s.y1=Bt(s.y1),s.x2=Bt(s.x2),s.y2=Bt(s.y2),s.w=Bt(s.x2-s.x1),s.h=Bt(s.y2-s.y1),s.w>0&&s.h>0&&b&&(ci(s,y),fi(s,1)),s},sT=function(e){var r=0,n=function(s){return(s?1:0)<<r++},a=0;return a+=n(e.incudeNodes),a+=n(e.includeEdges),a+=n(e.includeLabels),a+=n(e.includeMainLabels),a+=n(e.includeSourceLabels),a+=n(e.includeTargetLabels),a+=n(e.includeOverlays),a+=n(e.includeOutlines),a},oT=function(e){var r=function(o){return Math.round(o)};if(e.isEdge()){var n=e.source().position(),a=e.target().position();return Kg([r(n.x),r(n.y),r(a.x),r(a.y)])}else{var i=e.position();return Kg([r(i.x),r(i.y)])}},yy=function(e,r){var n=e._private,a,i=e.isEdge(),s=r==null?my:sT(r),o=s===my;if(n.bbCache==null?(a=dM(e,Aa),n.bbCache=a,n.bbCachePosKey=oT(e)):a=n.bbCache,!o){var u=e.isNode();a=St(),(r.includeNodes&&u||r.includeEdges&&!u)&&(r.includeOverlays?wr(a,n.overlayBounds):wr(a,n.bodyBounds)),r.includeLabels&&(r.includeMainLabels&&(!i||r.includeSourceLabels&&r.includeTargetLabels)?wr(a,n.labelBounds.all):(r.includeMainLabels&&wr(a,n.labelBounds.mainRot),r.includeSourceLabels&&wr(a,n.labelBounds.sourceRot),r.includeTargetLabels&&wr(a,n.labelBounds.targetRot))),a.w=a.x2-a.x1,a.h=a.y2-a.y1}return a},Aa={includeNodes:!0,includeEdges:!0,includeLabels:!0,includeMainLabels:!0,includeSourceLabels:!0,includeTargetLabels:!0,includeOverlays:!0,includeUnderlays:!0,includeOutlines:!0,useCache:!0},my=sT(Aa),by=pt(Aa);zr.boundingBox=function(t){var e,r=t===void 0||t.useCache===void 0||t.useCache===!0,n=Fn(function(f){var c=f._private;return c.bbCache==null||c.styleDirty||c.bbCachePosKey!==oT(f)},function(f){return f.id()});if(r&&this.length===1&&!n(this[0]))t===void 0?t=Aa:t=by(t),e=yy(this[0],t);else{e=St(),t=t||Aa;var a=by(t),i=this,s=i.cy(),o=s.styleEnabled();this.edges().forEach(n),this.nodes().forEach(n),o&&this.recalculateRenderedStyle(r),this.updateCompoundBounds(!r);for(var u=0;u<i.length;u++){var l=i[u];n(l)&&l.dirtyBoundingBoxCache(),wr(e,yy(l,a))}}return e.x1=Bt(e.x1),e.y1=Bt(e.y1),e.x2=Bt(e.x2),e.y2=Bt(e.y2),e.w=Bt(e.x2-e.x1),e.h=Bt(e.y2-e.y1),e};zr.dirtyBoundingBoxCache=function(){for(var t=0;t<this.length;t++){var e=this[t]._private;e.bbCache=null,e.bbCachePosKey=null,e.bodyBounds=null,e.overlayBounds=null,e.labelBounds.all=null,e.labelBounds.source=null,e.labelBounds.target=null,e.labelBounds.main=null,e.labelBounds.sourceRot=null,e.labelBounds.targetRot=null,e.labelBounds.mainRot=null,e.arrowBounds.source=null,e.arrowBounds.target=null,e.arrowBounds["mid-source"]=null,e.arrowBounds["mid-target"]=null}return this.emitAndNotify("bounds"),this};zr.boundingBoxAt=function(t){var e=this.nodes(),r=this.cy(),n=r.hasCompoundNodes(),a=r.collection();if(n&&(a=e.filter(function(l){return l.isParent()}),e=e.not(a)),Be(t)){var i=t;t=function(){return i}}var s=function(f,c){return f._private.bbAtOldPos=t(f,c)},o=function(f){return f._private.bbAtOldPos};r.startBatch(),e.forEach(s).silentPositions(t),n&&(a.dirtyCompoundBoundsCache(),a.dirtyBoundingBoxCache(),a.updateCompoundBounds(!0));var u=WD(this.boundingBox({useCache:!1}));return e.silentPositions(o),n&&(a.dirtyCompoundBoundsCache(),a.dirtyBoundingBoxCache(),a.updateCompoundBounds(!0)),r.endBatch(),u};Nn.boundingbox=Nn.bb=Nn.boundingBox;Nn.renderedBoundingbox=Nn.renderedBoundingBox;var vM=zr,la,Fa;la=Fa={};var uT=function(e){e.uppercaseName=Pg(e.name),e.autoName="auto"+e.uppercaseName,e.labelName="label"+e.uppercaseName,e.outerName="outer"+e.uppercaseName,e.uppercaseOuterName=Pg(e.outerName),la[e.name]=function(){var n=this[0],a=n._private,i=a.cy,s=i._private.styleEnabled;if(n)if(s){if(n.isParent())return n.updateCompoundBounds(),a[e.autoName]||0;var o=n.pstyle(e.name);switch(o.strValue){case"label":return n.recalculateRenderedStyle(),a.rstyle[e.labelName]||0;default:return o.pfValue}}else return 1},la["outer"+e.uppercaseName]=function(){var n=this[0],a=n._private,i=a.cy,s=i._private.styleEnabled;if(n)if(s){var o=n[e.name](),u=n.pstyle("border-position").value,l;u==="center"?l=n.pstyle("border-width").pfValue:u==="outside"?l=2*n.pstyle("border-width").pfValue:l=0;var f=2*n.padding();return o+l+f}else return 1},la["rendered"+e.uppercaseName]=function(){var n=this[0];if(n){var a=n[e.name]();return a*this.cy().zoom()}},la["rendered"+e.uppercaseOuterName]=function(){var n=this[0];if(n){var a=n[e.outerName]();return a*this.cy().zoom()}}};uT({name:"width"});uT({name:"height"});Fa.padding=function(){var t=this[0],e=t._private;return t.isParent()?(t.updateCompoundBounds(),e.autoPadding!==void 0?e.autoPadding:t.pstyle("padding").pfValue):t.pstyle("padding").pfValue};Fa.paddedHeight=function(){var t=this[0];return t.height()+2*t.padding()};Fa.paddedWidth=function(){var t=this[0];return t.width()+2*t.padding()};var gM=Fa,pM=function(e,r){if(e.isEdge()&&e.takesUpSpace())return r(e)},yM=function(e,r){if(e.isEdge()&&e.takesUpSpace()){var n=e.cy();return ji(r(e),n.zoom(),n.pan())}},mM=function(e,r){if(e.isEdge()&&e.takesUpSpace()){var n=e.cy(),a=n.pan(),i=n.zoom();return r(e).map(function(s){return ji(s,i,a)})}},bM=function(e){return e.renderer().getControlPoints(e)},wM=function(e){return e.renderer().getSegmentPoints(e)},EM=function(e){return e.renderer().getSourceEndpoint(e)},xM=function(e){return e.renderer().getTargetEndpoint(e)},TM=function(e){return e.renderer().getEdgeMidpoint(e)},wy={controlPoints:{get:bM,mult:!0},segmentPoints:{get:wM,mult:!0},sourceEndpoint:{get:EM},targetEndpoint:{get:xM},midpoint:{get:TM}},CM=function(e){return"rendered"+e[0].toUpperCase()+e.substr(1)},SM=Object.keys(wy).reduce(function(t,e){var r=wy[e],n=CM(e);return t[e]=function(){return pM(this,r.get)},r.mult?t[n]=function(){return mM(this,r.get)}:t[n]=function(){return yM(this,r.get)},t},{}),AM=xe({},cM,vM,gM,SM);/*!
Event object based on jQuery events, MIT license

https://jquery.org/license/
https://tldrlegal.com/license/mit-license
https://github.com/jquery/jquery/blob/master/src/event.js
*/var lT=function(e,r){this.recycle(e,r)};function na(){return!1}function ni(){return!0}lT.prototype={instanceString:function(){return"event"},recycle:function(e,r){if(this.isImmediatePropagationStopped=this.isPropagationStopped=this.isDefaultPrevented=na,e!=null&&e.preventDefault?(this.type=e.type,this.isDefaultPrevented=e.defaultPrevented?ni:na):e!=null&&e.type?r=e:this.type=e,r!=null&&(this.originalEvent=r.originalEvent,this.type=r.type!=null?r.type:this.type,this.cy=r.cy,this.target=r.target,this.position=r.position,this.renderedPosition=r.renderedPosition,this.namespace=r.namespace,this.layout=r.layout),this.cy!=null&&this.position!=null&&this.renderedPosition==null){var n=this.position,a=this.cy.zoom(),i=this.cy.pan();this.renderedPosition={x:n.x*a+i.x,y:n.y*a+i.y}}this.timeStamp=e&&e.timeStamp||Date.now()},preventDefault:function(){this.isDefaultPrevented=ni;var e=this.originalEvent;e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){this.isPropagationStopped=ni;var e=this.originalEvent;e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=ni,this.stopPropagation()},isDefaultPrevented:na,isPropagationStopped:na,isImmediatePropagationStopped:na};var fT=/^([^.]+)(\.(?:[^.]+))?$/,RM=".*",cT={qualifierCompare:function(e,r){return e===r},eventMatches:function(){return!0},addEventFields:function(){},callbackContext:function(e){return e},beforeEmit:function(){},afterEmit:function(){},bubble:function(){return!1},parent:function(){return null},context:null},Ey=Object.keys(cT),IM={};function ns(){for(var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:IM,e=arguments.length>1?arguments[1]:void 0,r=0;r<Ey.length;r++){var n=Ey[r];this[n]=t[n]||cT[n]}this.context=e||this.context,this.listeners=[],this.emitting=0}var Fr=ns.prototype,hT=function(e,r,n,a,i,s,o){Ke(a)&&(i=a,a=null),o&&(s==null?s=o:s=xe({},s,o));for(var u=$e(n)?n:n.split(/\s+/),l=0;l<u.length;l++){var f=u[l];if(!Or(f)){var c=f.match(fT);if(c){var h=c[1],d=c[2]?c[2]:null,v=r(e,f,h,d,a,i,s);if(v===!1)break}}}},xy=function(e,r){return e.addEventFields(e.context,r),new lT(r.type,r)},DM=function(e,r,n){if(kI(n)){r(e,n);return}else if(Be(n)){r(e,xy(e,n));return}for(var a=$e(n)?n:n.split(/\s+/),i=0;i<a.length;i++){var s=a[i];if(!Or(s)){var o=s.match(fT);if(o){var u=o[1],l=o[2]?o[2]:null,f=xy(e,{type:u,namespace:l,target:e.context});r(e,f)}}}};Fr.on=Fr.addListener=function(t,e,r,n,a){return hT(this,function(i,s,o,u,l,f,c){Ke(f)&&i.listeners.push({event:s,callback:f,type:o,namespace:u,qualifier:l,conf:c})},t,e,r,n,a),this};Fr.one=function(t,e,r,n){return this.on(t,e,r,n,{one:!0})};Fr.removeListener=Fr.off=function(t,e,r,n){var a=this;this.emitting!==0&&(this.listeners=yD(this.listeners));for(var i=this.listeners,s=function(l){var f=i[l];hT(a,function(c,h,d,v,p,g){if((f.type===d||t==="*")&&(!v&&f.namespace!==".*"||f.namespace===v)&&(!p||c.qualifierCompare(f.qualifier,p))&&(!g||f.callback===g))return i.splice(l,1),!1},t,e,r,n)},o=i.length-1;o>=0;o--)s(o);return this};Fr.removeAllListeners=function(){return this.removeListener("*")};Fr.emit=Fr.trigger=function(t,e,r){var n=this.listeners,a=n.length;return this.emitting++,$e(e)||(e=[e]),DM(this,function(i,s){r!=null&&(n=[{event:s.event,type:s.type,namespace:s.namespace,callback:r}],a=n.length);for(var o=function(){var f=n[u];if(f.type===s.type&&(!f.namespace||f.namespace===s.namespace||f.namespace===RM)&&i.eventMatches(i.context,f,s)){var c=[s];e!=null&&bD(c,e),i.beforeEmit(i.context,f,s),f.conf&&f.conf.one&&(i.listeners=i.listeners.filter(function(v){return v!==f}));var h=i.callbackContext(i.context,f,s),d=f.callback.apply(h,c);i.afterEmit(i.context,f,s),d===!1&&(s.stopPropagation(),s.preventDefault())}},u=0;u<a;u++)o();i.bubble(i.context)&&!s.isPropagationStopped()&&i.parent(i.context).emit(s,e)},t),this.emitting--,this};var _M={qualifierCompare:function(e,r){return e==null||r==null?e==null&&r==null:e.sameText(r)},eventMatches:function(e,r,n){var a=r.qualifier;return a!=null?e!==n.target&&Ma(n.target)&&a.matches(n.target):!0},addEventFields:function(e,r){r.cy=e.cy(),r.target=e},callbackContext:function(e,r,n){return r.qualifier!=null?n.target:e},beforeEmit:function(e,r){r.conf&&r.conf.once&&r.conf.onceCollection.removeListener(r.event,r.qualifier,r.callback)},bubble:function(){return!0},parent:function(e){return e.isChild()?e.parent():e.cy()}},ai=function(e){return we(e)?new Nr(e):e},dT={createEmitter:function(){for(var e=0;e<this.length;e++){var r=this[e],n=r._private;n.emitter||(n.emitter=new ns(_M,r))}return this},emitter:function(){return this._private.emitter},on:function(e,r,n){for(var a=ai(r),i=0;i<this.length;i++){var s=this[i];s.emitter().on(e,a,n)}return this},removeListener:function(e,r,n){for(var a=ai(r),i=0;i<this.length;i++){var s=this[i];s.emitter().removeListener(e,a,n)}return this},removeAllListeners:function(){for(var e=0;e<this.length;e++){var r=this[e];r.emitter().removeAllListeners()}return this},one:function(e,r,n){for(var a=ai(r),i=0;i<this.length;i++){var s=this[i];s.emitter().one(e,a,n)}return this},once:function(e,r,n){for(var a=ai(r),i=0;i<this.length;i++){var s=this[i];s.emitter().on(e,a,n,{once:!0,onceCollection:this})}},emit:function(e,r){for(var n=0;n<this.length;n++){var a=this[n];a.emitter().emit(e,r)}return this},emitAndNotify:function(e,r){if(this.length!==0)return this.cy().notify(e,this),this.emit(e,r),this}};qe.eventAliasesOn(dT);var vT={nodes:function(e){return this.filter(function(r){return r.isNode()}).filter(e)},edges:function(e){return this.filter(function(r){return r.isEdge()}).filter(e)},byGroup:function(){for(var e=this.spawn(),r=this.spawn(),n=0;n<this.length;n++){var a=this[n];a.isNode()?e.push(a):r.push(a)}return{nodes:e,edges:r}},filter:function(e,r){if(e===void 0)return this;if(we(e)||Pt(e))return new Nr(e).filter(this);if(Ke(e)){for(var n=this.spawn(),a=this,i=0;i<a.length;i++){var s=a[i],o=r?e.apply(r,[s,i,a]):e(s,i,a);o&&n.push(s)}return n}return this.spawn()},not:function(e){if(e){we(e)&&(e=this.filter(e));for(var r=this.spawn(),n=0;n<this.length;n++){var a=this[n],i=e.has(a);i||r.push(a)}return r}else return this},absoluteComplement:function(){var e=this.cy();return e.mutableElements().not(this)},intersect:function(e){if(we(e)){var r=e;return this.filter(r)}for(var n=this.spawn(),a=this,i=e,s=this.length<e.length,o=s?a:i,u=s?i:a,l=0;l<o.length;l++){var f=o[l];u.has(f)&&n.push(f)}return n},xor:function(e){var r=this._private.cy;we(e)&&(e=r.$(e));var n=this.spawn(),a=this,i=e,s=function(u,l){for(var f=0;f<u.length;f++){var c=u[f],h=c._private.data.id,d=l.hasElementWithId(h);d||n.push(c)}};return s(a,i),s(i,a),n},diff:function(e){var r=this._private.cy;we(e)&&(e=r.$(e));var n=this.spawn(),a=this.spawn(),i=this.spawn(),s=this,o=e,u=function(f,c,h){for(var d=0;d<f.length;d++){var v=f[d],p=v._private.data.id,g=c.hasElementWithId(p);g?i.merge(v):h.push(v)}};return u(s,o,n),u(o,s,a),{left:n,right:a,both:i}},add:function(e){var r=this._private.cy;if(!e)return this;if(we(e)){var n=e;e=r.mutableElements().filter(n)}for(var a=this.spawnSelf(),i=0;i<e.length;i++){var s=e[i],o=!this.has(s);o&&a.push(s)}return a},merge:function(e){var r=this._private,n=r.cy;if(!e)return this;if(e&&we(e)){var a=e;e=n.mutableElements().filter(a)}for(var i=r.map,s=0;s<e.length;s++){var o=e[s],u=o._private.data.id,l=!i.has(u);if(l){var f=this.length++;this[f]=o,i.set(u,{ele:o,index:f})}}return this},unmergeAt:function(e){var r=this[e],n=r.id(),a=this._private,i=a.map;this[e]=void 0,i.delete(n);var s=e===this.length-1;if(this.length>1&&!s){var o=this.length-1,u=this[o],l=u._private.data.id;this[o]=void 0,this[e]=u,i.set(l,{ele:u,index:e})}return this.length--,this},unmergeOne:function(e){e=e[0];var r=this._private,n=e._private.data.id,a=r.map,i=a.get(n);if(!i)return this;var s=i.index;return this.unmergeAt(s),this},unmerge:function(e){var r=this._private.cy;if(!e)return this;if(e&&we(e)){var n=e;e=r.mutableElements().filter(n)}for(var a=0;a<e.length;a++)this.unmergeOne(e[a]);return this},unmergeBy:function(e){for(var r=this.length-1;r>=0;r--){var n=this[r];e(n)&&this.unmergeAt(r)}return this},map:function(e,r){for(var n=[],a=this,i=0;i<a.length;i++){var s=a[i],o=r?e.apply(r,[s,i,a]):e(s,i,a);n.push(o)}return n},reduce:function(e,r){for(var n=r,a=this,i=0;i<a.length;i++)n=e(n,a[i],i,a);return n},max:function(e,r){for(var n=-1/0,a,i=this,s=0;s<i.length;s++){var o=i[s],u=r?e.apply(r,[o,s,i]):e(o,s,i);u>n&&(n=u,a=o)}return{value:n,ele:a}},min:function(e,r){for(var n=1/0,a,i=this,s=0;s<i.length;s++){var o=i[s],u=r?e.apply(r,[o,s,i]):e(o,s,i);u<n&&(n=u,a=o)}return{value:n,ele:a}}},Fe=vT;Fe.u=Fe["|"]=Fe["+"]=Fe.union=Fe.or=Fe.add;Fe["\\"]=Fe["!"]=Fe["-"]=Fe.difference=Fe.relativeComplement=Fe.subtract=Fe.not;Fe.n=Fe["&"]=Fe["."]=Fe.and=Fe.intersection=Fe.intersect;Fe["^"]=Fe["(+)"]=Fe["(-)"]=Fe.symmetricDifference=Fe.symdiff=Fe.xor;Fe.fnFilter=Fe.filterFn=Fe.stdFilter=Fe.filter;Fe.complement=Fe.abscomp=Fe.absoluteComplement;var LM={isNode:function(){return this.group()==="nodes"},isEdge:function(){return this.group()==="edges"},isLoop:function(){return this.isEdge()&&this.source()[0]===this.target()[0]},isSimple:function(){return this.isEdge()&&this.source()[0]!==this.target()[0]},group:function(){var e=this[0];if(e)return e._private.group}},gT=function(e,r){var n=e.cy(),a=n.hasCompoundNodes();function i(f){var c=f.pstyle("z-compound-depth");return c.value==="auto"?a?f.zDepth():0:c.value==="bottom"?-1:c.value==="top"?xv:0}var s=i(e)-i(r);if(s!==0)return s;function o(f){var c=f.pstyle("z-index-compare");return c.value==="auto"&&f.isNode()?1:0}var u=o(e)-o(r);if(u!==0)return u;var l=e.pstyle("z-index").value-r.pstyle("z-index").value;return l!==0?l:e.poolIndex()-r.poolIndex()},Li={forEach:function(e,r){if(Ke(e))for(var n=this.length,a=0;a<n;a++){var i=this[a],s=r?e.apply(r,[i,a,this]):e(i,a,this);if(s===!1)break}return this},toArray:function(){for(var e=[],r=0;r<this.length;r++)e.push(this[r]);return e},slice:function(e,r){var n=[],a=this.length;r==null&&(r=a),e==null&&(e=0),e<0&&(e=a+e),r<0&&(r=a+r);for(var i=e;i>=0&&i<r&&i<a;i++)n.push(this[i]);return this.spawn(n)},size:function(){return this.length},eq:function(e){return this[e]||this.spawn()},first:function(){return this[0]||this.spawn()},last:function(){return this[this.length-1]||this.spawn()},empty:function(){return this.length===0},nonempty:function(){return!this.empty()},sort:function(e){if(!Ke(e))return this;var r=this.toArray().sort(e);return this.spawn(r)},sortByZIndex:function(){return this.sort(gT)},zDepth:function(){var e=this[0];if(e){var r=e._private,n=r.group;if(n==="nodes"){var a=r.data.parent?e.parents().size():0;return e.isParent()?a:xv-1}else{var i=r.source,s=r.target,o=i.zDepth(),u=s.zDepth();return Math.max(o,u,0)}}}};Li.each=Li.forEach;var MM=function(){var e="undefined",r=(typeof Symbol>"u"?"undefined":ot(Symbol))!=e&&ot(Symbol.iterator)!=e;r&&(Li[Symbol.iterator]=function(){var n=this,a={value:void 0,done:!1},i=0,s=this.length;return dx({next:function(){return i<s?a.value=n[i++]:(a.value=void 0,a.done=!0),a}},Symbol.iterator,function(){return this})})};MM();var OM=pt({nodeDimensionsIncludeLabels:!1}),di={layoutDimensions:function(e){e=OM(e);var r;if(!this.takesUpSpace())r={w:0,h:0};else if(e.nodeDimensionsIncludeLabels){var n=this.boundingBox();r={w:n.w,h:n.h}}else r={w:this.outerWidth(),h:this.outerHeight()};return(r.w===0||r.h===0)&&(r.w=r.h=1),r},layoutPositions:function(e,r,n){var a=this.nodes().filter(function(x){return!x.isParent()}),i=this.cy(),s=r.eles,o=function(S){return S.id()},u=Fn(n,o);e.emit({type:"layoutstart",layout:e}),e.animations=[];var l=function(S,w,T){var C={x:w.x1+w.w/2,y:w.y1+w.h/2},A={x:(T.x-C.x)*S,y:(T.y-C.y)*S};return{x:C.x+A.x,y:C.y+A.y}},f=r.spacingFactor&&r.spacingFactor!==1,c=function(){if(!f)return null;for(var S=St(),w=0;w<a.length;w++){var T=a[w],C=u(T,w);Ox(S,C.x,C.y)}return S},h=c(),d=Fn(function(x,S){var w=u(x,S);if(f){var T=Math.abs(r.spacingFactor);w=l(T,h,w)}return r.transform!=null&&(w=r.transform(x,w)),w},o);if(r.animate){for(var v=0;v<a.length;v++){var p=a[v],g=d(p,v),y=r.animateFilter==null||r.animateFilter(p,v);if(y){var m=p.animation({position:g,duration:r.animationDuration,easing:r.animationEasing});e.animations.push(m)}else p.position(g)}if(r.fit){var b=i.animation({fit:{boundingBox:s.boundingBoxAt(d),padding:r.padding},duration:r.animationDuration,easing:r.animationEasing});e.animations.push(b)}else if(r.zoom!==void 0&&r.pan!==void 0){var E=i.animation({zoom:r.zoom,pan:r.pan,duration:r.animationDuration,easing:r.animationEasing});e.animations.push(E)}e.animations.forEach(function(x){return x.play()}),e.one("layoutready",r.ready),e.emit({type:"layoutready",layout:e}),$n.all(e.animations.map(function(x){return x.promise()})).then(function(){e.one("layoutstop",r.stop),e.emit({type:"layoutstop",layout:e})})}else a.positions(d),r.fit&&i.fit(r.eles,r.padding),r.zoom!=null&&i.zoom(r.zoom),r.pan&&i.pan(r.pan),e.one("layoutready",r.ready),e.emit({type:"layoutready",layout:e}),e.one("layoutstop",r.stop),e.emit({type:"layoutstop",layout:e});return this},layout:function(e){var r=this.cy();return r.makeLayout(xe({},e,{eles:this}))}};di.createLayout=di.makeLayout=di.layout;function pT(t,e,r){var n=r._private,a=n.styleCache=n.styleCache||[],i;return(i=a[t])!=null||(i=a[t]=e(r)),i}function as(t,e){return t=on(t),function(n){return pT(t,e,n)}}function is(t,e){t=on(t);var r=function(a){return e.call(a)};return function(){var a=this[0];if(a)return pT(t,r,a)}}var vt={recalculateRenderedStyle:function(e){var r=this.cy(),n=r.renderer(),a=r.styleEnabled();return n&&a&&n.recalculateRenderedStyle(this,e),this},dirtyStyleCache:function(){var e=this.cy(),r=function(i){return i._private.styleCache=null};if(e.hasCompoundNodes()){var n;n=this.spawnSelf().merge(this.descendants()).merge(this.parents()),n.merge(n.connectedEdges()),n.forEach(r)}else this.forEach(function(a){r(a),a.connectedEdges().forEach(r)});return this},updateStyle:function(e){var r=this._private.cy;if(!r.styleEnabled())return this;if(r.batching()){var n=r._private.batchStyleEles;return n.merge(this),this}var a=r.hasCompoundNodes(),i=this;e=!!(e||e===void 0),a&&(i=this.spawnSelf().merge(this.descendants()).merge(this.parents()));var s=i;return e?s.emitAndNotify("style"):s.emit("style"),i.forEach(function(o){return o._private.styleDirty=!0}),this},cleanStyle:function(){var e=this.cy();if(e.styleEnabled())for(var r=0;r<this.length;r++){var n=this[r];n._private.styleDirty&&(n._private.styleDirty=!1,e.style().apply(n))}},parsedStyle:function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,n=this[0],a=n.cy();if(a.styleEnabled()&&n){n._private.styleDirty&&(n._private.styleDirty=!1,a.style().apply(n));var i=n._private.style[e];return i??(r?a.style().getDefaultProperty(e):null)}},numericStyle:function(e){var r=this[0];if(r.cy().styleEnabled()&&r){var n=r.pstyle(e);return n.pfValue!==void 0?n.pfValue:n.value}},numericStyleUnits:function(e){var r=this[0];if(r.cy().styleEnabled()&&r)return r.pstyle(e).units},renderedStyle:function(e){var r=this.cy();if(!r.styleEnabled())return this;var n=this[0];if(n)return r.style().getRenderedStyle(n,e)},style:function(e,r){var n=this.cy();if(!n.styleEnabled())return this;var a=!1,i=n.style();if(Be(e)){var s=e;i.applyBypass(this,s,a),this.emitAndNotify("style")}else if(we(e))if(r===void 0){var o=this[0];return o?i.getStylePropertyValue(o,e):void 0}else i.applyBypass(this,e,r,a),this.emitAndNotify("style");else if(e===void 0){var u=this[0];return u?i.getRawStyle(u):void 0}return this},removeStyle:function(e){var r=this.cy();if(!r.styleEnabled())return this;var n=!1,a=r.style(),i=this;if(e===void 0)for(var s=0;s<i.length;s++){var o=i[s];a.removeAllBypasses(o,n)}else{e=e.split(/\s+/);for(var u=0;u<i.length;u++){var l=i[u];a.removeBypasses(l,e,n)}}return this.emitAndNotify("style"),this},show:function(){return this.css("display","element"),this},hide:function(){return this.css("display","none"),this},effectiveOpacity:function(){var e=this.cy();if(!e.styleEnabled())return 1;var r=e.hasCompoundNodes(),n=this[0];if(n){var a=n._private,i=n.pstyle("opacity").value;if(!r)return i;var s=a.data.parent?n.parents():null;if(s)for(var o=0;o<s.length;o++){var u=s[o],l=u.pstyle("opacity").value;i=l*i}return i}},transparent:function(){var e=this.cy();if(!e.styleEnabled())return!1;var r=this[0],n=r.cy().hasCompoundNodes();if(r)return n?r.effectiveOpacity()===0:r.pstyle("opacity").value===0},backgrounding:function(){var e=this.cy();if(!e.styleEnabled())return!1;var r=this[0];return!!r._private.backgrounding}};function au(t,e){var r=t._private,n=r.data.parent?t.parents():null;if(n)for(var a=0;a<n.length;a++){var i=n[a];if(!e(i))return!1}return!0}function Pv(t){var e=t.ok,r=t.edgeOkViaNode||t.ok,n=t.parentOk||t.ok;return function(){var a=this.cy();if(!a.styleEnabled())return!0;var i=this[0],s=a.hasCompoundNodes();if(i){var o=i._private;if(!e(i))return!1;if(i.isNode())return!s||au(i,n);var u=o.source,l=o.target;return r(u)&&(!s||au(u,r))&&(u===l||r(l)&&(!s||au(l,r)))}}}var Vn=as("eleTakesUpSpace",function(t){return t.pstyle("display").value==="element"&&t.width()!==0&&(t.isNode()?t.height()!==0:!0)});vt.takesUpSpace=is("takesUpSpace",Pv({ok:Vn}));var PM=as("eleInteractive",function(t){return t.pstyle("events").value==="yes"&&t.pstyle("visibility").value==="visible"&&Vn(t)}),kM=as("parentInteractive",function(t){return t.pstyle("visibility").value==="visible"&&Vn(t)});vt.interactive=is("interactive",Pv({ok:PM,parentOk:kM,edgeOkViaNode:Vn}));vt.noninteractive=function(){var t=this[0];if(t)return!t.interactive()};var NM=as("eleVisible",function(t){return t.pstyle("visibility").value==="visible"&&t.pstyle("opacity").pfValue!==0&&Vn(t)}),BM=Vn;vt.visible=is("visible",Pv({ok:NM,edgeOkViaNode:BM}));vt.hidden=function(){var t=this[0];if(t)return!t.visible()};vt.isBundledBezier=is("isBundledBezier",function(){return this.cy().styleEnabled()?!this.removed()&&this.pstyle("curve-style").value==="bezier"&&this.takesUpSpace():!1});vt.bypass=vt.css=vt.style;vt.renderedCss=vt.renderedStyle;vt.removeBypass=vt.removeCss=vt.removeStyle;vt.pstyle=vt.parsedStyle;var _r={};function Ty(t){return function(){var e=arguments,r=[];if(e.length===2){var n=e[0],a=e[1];this.on(t.event,n,a)}else if(e.length===1&&Ke(e[0])){var i=e[0];this.on(t.event,i)}else if(e.length===0||e.length===1&&$e(e[0])){for(var s=e.length===1?e[0]:null,o=0;o<this.length;o++){var u=this[o],l=!t.ableField||u._private[t.ableField],f=u._private[t.field]!=t.value;if(t.overrideAble){var c=t.overrideAble(u);if(c!==void 0&&(l=c,!c))return this}l&&(u._private[t.field]=t.value,f&&r.push(u))}var h=this.spawn(r);h.updateStyle(),h.emit(t.event),s&&h.emit(s)}return this}}function Un(t){_r[t.field]=function(){var e=this[0];if(e){if(t.overrideField){var r=t.overrideField(e);if(r!==void 0)return r}return e._private[t.field]}},_r[t.on]=Ty({event:t.on,field:t.field,ableField:t.ableField,overrideAble:t.overrideAble,value:!0}),_r[t.off]=Ty({event:t.off,field:t.field,ableField:t.ableField,overrideAble:t.overrideAble,value:!1})}Un({field:"locked",overrideField:function(e){return e.cy().autolock()?!0:void 0},on:"lock",off:"unlock"});Un({field:"grabbable",overrideField:function(e){return e.cy().autoungrabify()||e.pannable()?!1:void 0},on:"grabify",off:"ungrabify"});Un({field:"selected",ableField:"selectable",overrideAble:function(e){return e.cy().autounselectify()?!1:void 0},on:"select",off:"unselect"});Un({field:"selectable",overrideField:function(e){return e.cy().autounselectify()?!1:void 0},on:"selectify",off:"unselectify"});_r.deselect=_r.unselect;_r.grabbed=function(){var t=this[0];if(t)return t._private.grabbed};Un({field:"active",on:"activate",off:"unactivate"});Un({field:"pannable",on:"panify",off:"unpanify"});_r.inactive=function(){var t=this[0];if(t)return!t._private.active};var bt={},Cy=function(e){return function(n){for(var a=this,i=[],s=0;s<a.length;s++){var o=a[s];if(o.isNode()){for(var u=!1,l=o.connectedEdges(),f=0;f<l.length;f++){var c=l[f],h=c.source(),d=c.target();if(e.noIncomingEdges&&d===o&&h!==o||e.noOutgoingEdges&&h===o&&d!==o){u=!0;break}}u||i.push(o)}}return this.spawn(i,!0).filter(n)}},Sy=function(e){return function(r){for(var n=this,a=[],i=0;i<n.length;i++){var s=n[i];if(s.isNode())for(var o=s.connectedEdges(),u=0;u<o.length;u++){var l=o[u],f=l.source(),c=l.target();e.outgoing&&f===s?(a.push(l),a.push(c)):e.incoming&&c===s&&(a.push(l),a.push(f))}}return this.spawn(a,!0).filter(r)}},Ay=function(e){return function(r){for(var n=this,a=[],i={};;){var s=e.outgoing?n.outgoers():n.incomers();if(s.length===0)break;for(var o=!1,u=0;u<s.length;u++){var l=s[u],f=l.id();i[f]||(i[f]=!0,a.push(l),o=!0)}if(!o)break;n=s}return this.spawn(a,!0).filter(r)}};bt.clearTraversalCache=function(){for(var t=0;t<this.length;t++)this[t]._private.traversalCache=null};xe(bt,{roots:Cy({noIncomingEdges:!0}),leaves:Cy({noOutgoingEdges:!0}),outgoers:Ft(Sy({outgoing:!0}),"outgoers"),successors:Ay({outgoing:!0}),incomers:Ft(Sy({incoming:!0}),"incomers"),predecessors:Ay({})});xe(bt,{neighborhood:Ft(function(t){for(var e=[],r=this.nodes(),n=0;n<r.length;n++)for(var a=r[n],i=a.connectedEdges(),s=0;s<i.length;s++){var o=i[s],u=o.source(),l=o.target(),f=a===u?l:u;f.length>0&&e.push(f[0]),e.push(o[0])}return this.spawn(e,!0).filter(t)},"neighborhood"),closedNeighborhood:function(e){return this.neighborhood().add(this).filter(e)},openNeighborhood:function(e){return this.neighborhood(e)}});bt.neighbourhood=bt.neighborhood;bt.closedNeighbourhood=bt.closedNeighborhood;bt.openNeighbourhood=bt.openNeighborhood;xe(bt,{source:Ft(function(e){var r=this[0],n;return r&&(n=r._private.source||r.cy().collection()),n&&e?n.filter(e):n},"source"),target:Ft(function(e){var r=this[0],n;return r&&(n=r._private.target||r.cy().collection()),n&&e?n.filter(e):n},"target"),sources:Ry({attr:"source"}),targets:Ry({attr:"target"})});function Ry(t){return function(r){for(var n=[],a=0;a<this.length;a++){var i=this[a],s=i._private[t.attr];s&&n.push(s)}return this.spawn(n,!0).filter(r)}}xe(bt,{edgesWith:Ft(Iy(),"edgesWith"),edgesTo:Ft(Iy({thisIsSrc:!0}),"edgesTo")});function Iy(t){return function(r){var n=[],a=this._private.cy,i=t||{};we(r)&&(r=a.$(r));for(var s=0;s<r.length;s++)for(var o=r[s]._private.edges,u=0;u<o.length;u++){var l=o[u],f=l._private.data,c=this.hasElementWithId(f.source)&&r.hasElementWithId(f.target),h=r.hasElementWithId(f.source)&&this.hasElementWithId(f.target),d=c||h;d&&((i.thisIsSrc||i.thisIsTgt)&&(i.thisIsSrc&&!c||i.thisIsTgt&&!h)||n.push(l))}return this.spawn(n,!0)}}xe(bt,{connectedEdges:Ft(function(t){for(var e=[],r=this,n=0;n<r.length;n++){var a=r[n];if(a.isNode())for(var i=a._private.edges,s=0;s<i.length;s++){var o=i[s];e.push(o)}}return this.spawn(e,!0).filter(t)},"connectedEdges"),connectedNodes:Ft(function(t){for(var e=[],r=this,n=0;n<r.length;n++){var a=r[n];a.isEdge()&&(e.push(a.source()[0]),e.push(a.target()[0]))}return this.spawn(e,!0).filter(t)},"connectedNodes"),parallelEdges:Ft(Dy(),"parallelEdges"),codirectedEdges:Ft(Dy({codirected:!0}),"codirectedEdges")});function Dy(t){var e={codirected:!1};return t=xe({},e,t),function(n){for(var a=[],i=this.edges(),s=t,o=0;o<i.length;o++)for(var u=i[o],l=u._private,f=l.source,c=f._private.data.id,h=l.data.target,d=f._private.edges,v=0;v<d.length;v++){var p=d[v],g=p._private.data,y=g.target,m=g.source,b=y===h&&m===c,E=c===y&&h===m;(s.codirected&&b||!s.codirected&&(b||E))&&a.push(p)}return this.spawn(a,!0).filter(n)}}xe(bt,{components:function(e){var r=this,n=r.cy(),a=n.collection(),i=e==null?r.nodes():e.nodes(),s=[];e!=null&&i.empty()&&(i=e.sources());var o=function(f,c){a.merge(f),i.unmerge(f),c.merge(f)};if(i.empty())return r.spawn();var u=function(){var f=n.collection();s.push(f);var c=i[0];o(c,f),r.bfs({directed:!1,roots:c,visit:function(d){return o(d,f)}}),f.forEach(function(h){h.connectedEdges().forEach(function(d){r.has(d)&&f.has(d.source())&&f.has(d.target())&&f.merge(d)})})};do u();while(i.length>0);return s},component:function(){var e=this[0];return e.cy().mutableElements().components(e)[0]}});bt.componentsOf=bt.components;var gt=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(e===void 0){We("A collection must have a reference to the core");return}var i=new ur,s=!1;if(!r)r=[];else if(r.length>0&&Be(r[0])&&!Ma(r[0])){s=!0;for(var o=[],u=new zn,l=0,f=r.length;l<f;l++){var c=r[l];c.data==null&&(c.data={});var h=c.data;if(h.id==null)h.id=_x();else if(e.hasElementWithId(h.id)||u.has(h.id))continue;var d=new Ki(e,c,!1);o.push(d),u.add(h.id)}r=o}this.length=0;for(var v=0,p=r.length;v<p;v++){var g=r[v][0];if(g!=null){var y=g._private.data.id;(!n||!i.has(y))&&(n&&i.set(y,{index:this.length,ele:g}),this[this.length]=g,this.length++)}}this._private={eles:this,cy:e,get map(){return this.lazyMap==null&&this.rebuildMap(),this.lazyMap},set map(m){this.lazyMap=m},rebuildMap:function(){for(var b=this.lazyMap=new ur,E=this.eles,x=0;x<E.length;x++){var S=E[x];b.set(S.id(),{index:x,ele:S})}}},n&&(this._private.map=i),s&&!a&&this.restore()},Ue=Ki.prototype=gt.prototype=Object.create(Array.prototype);Ue.instanceString=function(){return"collection"};Ue.spawn=function(t,e){return new gt(this.cy(),t,e)};Ue.spawnSelf=function(){return this.spawn(this)};Ue.cy=function(){return this._private.cy};Ue.renderer=function(){return this._private.cy.renderer()};Ue.element=function(){return this[0]};Ue.collection=function(){return px(this)?this:new gt(this._private.cy,[this])};Ue.unique=function(){return new gt(this._private.cy,this,!0)};Ue.hasElementWithId=function(t){return t=""+t,this._private.map.has(t)};Ue.getElementById=function(t){t=""+t;var e=this._private.cy,r=this._private.map.get(t);return r?r.ele:new gt(e)};Ue.$id=Ue.getElementById;Ue.poolIndex=function(){var t=this._private.cy,e=t._private.elements,r=this[0]._private.data.id;return e._private.map.get(r).index};Ue.indexOf=function(t){var e=t[0]._private.data.id;return this._private.map.get(e).index};Ue.indexOfId=function(t){return t=""+t,this._private.map.get(t).index};Ue.json=function(t){var e=this.element(),r=this.cy();if(e==null&&t)return this;if(e!=null){var n=e._private;if(Be(t)){if(r.startBatch(),t.data){e.data(t.data);var a=n.data;if(e.isEdge()){var i=!1,s={},o=t.data.source,u=t.data.target;o!=null&&o!=a.source&&(s.source=""+o,i=!0),u!=null&&u!=a.target&&(s.target=""+u,i=!0),i&&(e=e.move(s))}else{var l="parent"in t.data,f=t.data.parent;l&&(f!=null||a.parent!=null)&&f!=a.parent&&(f===void 0&&(f=null),f!=null&&(f=""+f),e=e.move({parent:f}))}}t.position&&e.position(t.position);var c=function(p,g,y){var m=t[p];m!=null&&m!==n[p]&&(m?e[g]():e[y]())};return c("removed","remove","restore"),c("selected","select","unselect"),c("selectable","selectify","unselectify"),c("locked","lock","unlock"),c("grabbable","grabify","ungrabify"),c("pannable","panify","unpanify"),t.classes!=null&&e.classes(t.classes),r.endBatch(),this}else if(t===void 0){var h={data:Jt(n.data),position:Jt(n.position),group:n.group,removed:n.removed,selected:n.selected,selectable:n.selectable,locked:n.locked,grabbable:n.grabbable,pannable:n.pannable,classes:null};h.classes="";var d=0;return n.classes.forEach(function(v){return h.classes+=d++===0?v:" "+v}),h}}};Ue.jsons=function(){for(var t=[],e=0;e<this.length;e++){var r=this[e],n=r.json();t.push(n)}return t};Ue.clone=function(){for(var t=this.cy(),e=[],r=0;r<this.length;r++){var n=this[r],a=n.json(),i=new Ki(t,a,!1);e.push(i)}return new gt(t,e)};Ue.copy=Ue.clone;Ue.restore=function(){for(var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,r=this,n=r.cy(),a=n._private,i=[],s=[],o,u=0,l=r.length;u<l;u++){var f=r[u];e&&!f.removed()||(f.isNode()?i.push(f):s.push(f))}o=i.concat(s);var c,h=function(){o.splice(c,1),c--};for(c=0;c<o.length;c++){var d=o[c],v=d._private,p=v.data;if(d.clearTraversalCache(),!(!e&&!v.removed)){if(p.id===void 0)p.id=_x();else if(ie(p.id))p.id=""+p.id;else if(Or(p.id)||!we(p.id)){We("Can not create element with invalid string ID `"+p.id+"`"),h();continue}else if(n.hasElementWithId(p.id)){We("Can not create second element with ID `"+p.id+"`"),h();continue}}var g=p.id;if(d.isNode()){var y=v.position;y.x==null&&(y.x=0),y.y==null&&(y.y=0)}if(d.isEdge()){for(var m=d,b=["source","target"],E=b.length,x=!1,S=0;S<E;S++){var w=b[S],T=p[w];ie(T)&&(T=p[w]=""+p[w]),T==null||T===""?(We("Can not create edge `"+g+"` with unspecified "+w),x=!0):n.hasElementWithId(T)||(We("Can not create edge `"+g+"` with nonexistant "+w+" `"+T+"`"),x=!0)}if(x){h();continue}var C=n.getElementById(p.source),A=n.getElementById(p.target);C.same(A)?C._private.edges.push(m):(C._private.edges.push(m),A._private.edges.push(m)),m._private.source=C,m._private.target=A}v.map=new ur,v.map.set(g,{ele:d,index:0}),v.removed=!1,e&&n.addToPool(d)}for(var R=0;R<i.length;R++){var I=i[R],D=I._private.data;ie(D.parent)&&(D.parent=""+D.parent);var _=D.parent,M=_!=null;if(M||I._private.parent){var k=I._private.parent?n.collection().merge(I._private.parent):n.getElementById(_);if(k.empty())D.parent=void 0;else if(k[0].removed())Ge("Node added with missing parent, reference to parent removed"),D.parent=void 0,I._private.parent=null;else{for(var O=!1,P=k;!P.empty();){if(I.same(P)){O=!0,D.parent=void 0;break}P=P.parent()}O||(k[0]._private.children.push(I),I._private.parent=k[0],a.hasCompoundNodes=!0)}}}if(o.length>0){for(var q=o.length===r.length?r:new gt(n,o),G=0;G<q.length;G++){var F=q[G];F.isNode()||(F.parallelEdges().clearTraversalCache(),F.source().clearTraversalCache(),F.target().clearTraversalCache())}var z;a.hasCompoundNodes?z=n.collection().merge(q).merge(q.connectedNodes()).merge(q.parent()):z=q,z.dirtyCompoundBoundsCache().dirtyBoundingBoxCache().updateStyle(t),t?q.emitAndNotify("add"):e&&q.emit("add")}return r};Ue.removed=function(){var t=this[0];return t&&t._private.removed};Ue.inside=function(){var t=this[0];return t&&!t._private.removed};Ue.remove=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,r=this,n=[],a={},i=r._private.cy;function s(_){for(var M=_._private.edges,k=0;k<M.length;k++)u(M[k])}function o(_){for(var M=_._private.children,k=0;k<M.length;k++)u(M[k])}function u(_){var M=a[_.id()];e&&_.removed()||M||(a[_.id()]=!0,_.isNode()?(n.push(_),s(_),o(_)):n.unshift(_))}for(var l=0,f=r.length;l<f;l++){var c=r[l];u(c)}function h(_,M){var k=_._private.edges;Pr(k,M),_.clearTraversalCache()}function d(_){_.clearTraversalCache()}var v=[];v.ids={};function p(_,M){M=M[0],_=_[0];var k=_._private.children,O=_.id();Pr(k,M),M._private.parent=null,v.ids[O]||(v.ids[O]=!0,v.push(_))}r.dirtyCompoundBoundsCache(),e&&i.removeFromPool(n);for(var g=0;g<n.length;g++){var y=n[g];if(y.isEdge()){var m=y.source()[0],b=y.target()[0];h(m,y),h(b,y);for(var E=y.parallelEdges(),x=0;x<E.length;x++){var S=E[x];d(S),S.isBundledBezier()&&S.dirtyBoundingBoxCache()}}else{var w=y.parent();w.length!==0&&p(w,y)}e&&(y._private.removed=!0)}var T=i._private.elements;i._private.hasCompoundNodes=!1;for(var C=0;C<T.length;C++){var A=T[C];if(A.isParent()){i._private.hasCompoundNodes=!0;break}}var R=new gt(this.cy(),n);R.size()>0&&(t?R.emitAndNotify("remove"):e&&R.emit("remove"));for(var I=0;I<v.length;I++){var D=v[I];(!e||!D.removed())&&D.updateStyle()}return R};Ue.move=function(t){var e=this._private.cy,r=this,n=!1,a=!1,i=function(v){return v==null?v:""+v};if(t.source!==void 0||t.target!==void 0){var s=i(t.source),o=i(t.target),u=s!=null&&e.hasElementWithId(s),l=o!=null&&e.hasElementWithId(o);(u||l)&&(e.batch(function(){r.remove(n,a),r.emitAndNotify("moveout");for(var d=0;d<r.length;d++){var v=r[d],p=v._private.data;v.isEdge()&&(u&&(p.source=s),l&&(p.target=o))}r.restore(n,a)}),r.emitAndNotify("move"))}else if(t.parent!==void 0){var f=i(t.parent),c=f===null||e.hasElementWithId(f);if(c){var h=f===null?void 0:f;e.batch(function(){var d=r.remove(n,a);d.emitAndNotify("moveout");for(var v=0;v<r.length;v++){var p=r[v],g=p._private.data;p.isNode()&&(g.parent=h)}d.restore(n,a)}),r.emitAndNotify("move")}}return this};[$x,XL,hi,Dr,Gn,fM,rs,AM,dT,vT,LM,Li,di,vt,_r,bt].forEach(function(t){xe(Ue,t)});var FM={add:function(e){var r,n=this;if(Pt(e)){var a=e;if(a._private.cy===n)r=a.restore();else{for(var i=[],s=0;s<a.length;s++){var o=a[s];i.push(o.json())}r=new gt(n,i)}}else if($e(e)){var u=e;r=new gt(n,u)}else if(Be(e)&&($e(e.nodes)||$e(e.edges))){for(var l=e,f=[],c=["nodes","edges"],h=0,d=c.length;h<d;h++){var v=c[h],p=l[v];if($e(p))for(var g=0,y=p.length;g<y;g++){var m=xe({group:v},p[g]);f.push(m)}}r=new gt(n,f)}else{var b=e;r=new Ki(n,b).collection()}return r},remove:function(e){if(!Pt(e)){if(we(e)){var r=e;e=this.$(r)}}return e.remove()}};/*! Bezier curve function generator. Copyright Gaetan Renaudeau. MIT License: http://en.wikipedia.org/wiki/MIT_License */function qM(t,e,r,n){var a=4,i=.001,s=1e-7,o=10,u=11,l=1/(u-1),f=typeof Float32Array<"u";if(arguments.length!==4)return!1;for(var c=0;c<4;++c)if(typeof arguments[c]!="number"||isNaN(arguments[c])||!isFinite(arguments[c]))return!1;t=Math.min(t,1),r=Math.min(r,1),t=Math.max(t,0),r=Math.max(r,0);var h=f?new Float32Array(u):new Array(u);function d(A,R){return 1-3*R+3*A}function v(A,R){return 3*R-6*A}function p(A){return 3*A}function g(A,R,I){return((d(R,I)*A+v(R,I))*A+p(R))*A}function y(A,R,I){return 3*d(R,I)*A*A+2*v(R,I)*A+p(R)}function m(A,R){for(var I=0;I<a;++I){var D=y(R,t,r);if(D===0)return R;var _=g(R,t,r)-A;R-=_/D}return R}function b(){for(var A=0;A<u;++A)h[A]=g(A*l,t,r)}function E(A,R,I){var D,_,M=0;do _=R+(I-R)/2,D=g(_,t,r)-A,D>0?I=_:R=_;while(Math.abs(D)>s&&++M<o);return _}function x(A){for(var R=0,I=1,D=u-1;I!==D&&h[I]<=A;++I)R+=l;--I;var _=(A-h[I])/(h[I+1]-h[I]),M=R+_*l,k=y(M,t,r);return k>=i?m(A,M):k===0?M:E(A,R,R+l)}var S=!1;function w(){S=!0,(t!==e||r!==n)&&b()}var T=function(R){return S||w(),t===e&&r===n?R:R===0?0:R===1?1:g(x(R),e,n)};T.getControlPoints=function(){return[{x:t,y:e},{x:r,y:n}]};var C="generateBezier("+[t,e,r,n]+")";return T.toString=function(){return C},T}/*! Runge-Kutta spring physics function generator. Adapted from Framer.js, copyright Koen Bok. MIT License: http://en.wikipedia.org/wiki/MIT_License */var GM=function(){function t(n){return-n.tension*n.x-n.friction*n.v}function e(n,a,i){var s={x:n.x+i.dx*a,v:n.v+i.dv*a,tension:n.tension,friction:n.friction};return{dx:s.v,dv:t(s)}}function r(n,a){var i={dx:n.v,dv:t(n)},s=e(n,a*.5,i),o=e(n,a*.5,s),u=e(n,a,o),l=1/6*(i.dx+2*(s.dx+o.dx)+u.dx),f=1/6*(i.dv+2*(s.dv+o.dv)+u.dv);return n.x=n.x+l*a,n.v=n.v+f*a,n}return function n(a,i,s){var o={x:-1,v:0,tension:null,friction:null},u=[0],l=0,f=1/1e4,c=16/1e3,h,d,v;for(a=parseFloat(a)||500,i=parseFloat(i)||20,s=s||null,o.tension=a,o.friction=i,h=s!==null,h?(l=n(a,i),d=l/s*c):d=c;v=r(v||o,d),u.push(1+v.x),l+=16,Math.abs(v.x)>f&&Math.abs(v.v)>f;);return h?function(p){return u[p*(u.length-1)|0]}:l}}(),Ve=function(e,r,n,a){var i=qM(e,r,n,a);return function(s,o,u){return s+(o-s)*i(u)}},vi={linear:function(e,r,n){return e+(r-e)*n},ease:Ve(.25,.1,.25,1),"ease-in":Ve(.42,0,1,1),"ease-out":Ve(0,0,.58,1),"ease-in-out":Ve(.42,0,.58,1),"ease-in-sine":Ve(.47,0,.745,.715),"ease-out-sine":Ve(.39,.575,.565,1),"ease-in-out-sine":Ve(.445,.05,.55,.95),"ease-in-quad":Ve(.55,.085,.68,.53),"ease-out-quad":Ve(.25,.46,.45,.94),"ease-in-out-quad":Ve(.455,.03,.515,.955),"ease-in-cubic":Ve(.55,.055,.675,.19),"ease-out-cubic":Ve(.215,.61,.355,1),"ease-in-out-cubic":Ve(.645,.045,.355,1),"ease-in-quart":Ve(.895,.03,.685,.22),"ease-out-quart":Ve(.165,.84,.44,1),"ease-in-out-quart":Ve(.77,0,.175,1),"ease-in-quint":Ve(.755,.05,.855,.06),"ease-out-quint":Ve(.23,1,.32,1),"ease-in-out-quint":Ve(.86,0,.07,1),"ease-in-expo":Ve(.95,.05,.795,.035),"ease-out-expo":Ve(.19,1,.22,1),"ease-in-out-expo":Ve(1,0,0,1),"ease-in-circ":Ve(.6,.04,.98,.335),"ease-out-circ":Ve(.075,.82,.165,1),"ease-in-out-circ":Ve(.785,.135,.15,.86),spring:function(e,r,n){if(n===0)return vi.linear;var a=GM(e,r,n);return function(i,s,o){return i+(s-i)*a(o)}},"cubic-bezier":Ve};function _y(t,e,r,n,a){if(n===1||e===r)return r;var i=a(e,r,n);return t==null||((t.roundValue||t.color)&&(i=Math.round(i)),t.min!==void 0&&(i=Math.max(i,t.min)),t.max!==void 0&&(i=Math.min(i,t.max))),i}function Ly(t,e){return t.pfValue!=null||t.value!=null?t.pfValue!=null&&(e==null||e.type.units!=="%")?t.pfValue:t.value:t}function xn(t,e,r,n,a){var i=a!=null?a.type:null;r<0?r=0:r>1&&(r=1);var s=Ly(t,a),o=Ly(e,a);if(ie(s)&&ie(o))return _y(i,s,o,r,n);if($e(s)&&$e(o)){for(var u=[],l=0;l<o.length;l++){var f=s[l],c=o[l];if(f!=null&&c!=null){var h=_y(i,f,c,r,n);u.push(h)}else u.push(c)}return u}}function zM(t,e,r,n){var a=!n,i=t._private,s=e._private,o=s.easing,u=s.startTime,l=n?t:t.cy(),f=l.style();if(!s.easingImpl)if(o==null)s.easingImpl=vi.linear;else{var c;if(we(o)){var h=f.parse("transition-timing-function",o);c=h.value}else c=o;var d,v;we(c)?(d=c,v=[]):(d=c[1],v=c.slice(2).map(function(q){return+q})),v.length>0?(d==="spring"&&v.push(s.duration),s.easingImpl=vi[d].apply(null,v)):s.easingImpl=vi[d]}var p=s.easingImpl,g;if(s.duration===0?g=1:g=(r-u)/s.duration,s.applying&&(g=s.progress),g<0?g=0:g>1&&(g=1),s.delay==null){var y=s.startPosition,m=s.position;if(m&&a&&!t.locked()){var b={};aa(y.x,m.x)&&(b.x=xn(y.x,m.x,g,p)),aa(y.y,m.y)&&(b.y=xn(y.y,m.y,g,p)),t.position(b)}var E=s.startPan,x=s.pan,S=i.pan,w=x!=null&&n;w&&(aa(E.x,x.x)&&(S.x=xn(E.x,x.x,g,p)),aa(E.y,x.y)&&(S.y=xn(E.y,x.y,g,p)),t.emit("pan"));var T=s.startZoom,C=s.zoom,A=C!=null&&n;A&&(aa(T,C)&&(i.zoom=Ta(i.minZoom,xn(T,C,g,p),i.maxZoom)),t.emit("zoom")),(w||A)&&t.emit("viewport");var R=s.style;if(R&&R.length>0&&a){for(var I=0;I<R.length;I++){var D=R[I],_=D.name,M=D,k=s.startStyle[_],O=f.properties[k.name],P=xn(k,M,g,p,O);f.overrideBypass(t,_,P)}t.emit("style")}}return s.progress=g,g}function aa(t,e){return t==null||e==null?!1:ie(t)&&ie(e)?!0:!!(t&&e)}function $M(t,e,r,n){var a=e._private;a.started=!0,a.startTime=r-a.progress*a.duration}function My(t,e){var r=e._private.aniEles,n=[];function a(f,c){var h=f._private,d=h.animation.current,v=h.animation.queue,p=!1;if(d.length===0){var g=v.shift();g&&d.push(g)}for(var y=function(S){for(var w=S.length-1;w>=0;w--){var T=S[w];T()}S.splice(0,S.length)},m=d.length-1;m>=0;m--){var b=d[m],E=b._private;if(E.stopped){d.splice(m,1),E.hooked=!1,E.playing=!1,E.started=!1,y(E.frames);continue}!E.playing&&!E.applying||(E.playing&&E.applying&&(E.applying=!1),E.started||$M(f,b,t),zM(f,b,t,c),E.applying&&(E.applying=!1),y(E.frames),E.step!=null&&E.step(t),b.completed()&&(d.splice(m,1),E.hooked=!1,E.playing=!1,E.started=!1,y(E.completes)),p=!0)}return!c&&d.length===0&&v.length===0&&n.push(f),p}for(var i=!1,s=0;s<r.length;s++){var o=r[s],u=a(o);i=i||u}var l=a(e,!0);(i||l)&&(r.length>0?e.notify("draw",r):e.notify("draw")),r.unmerge(n),e.emit("step")}var VM={animate:qe.animate(),animation:qe.animation(),animated:qe.animated(),clearQueue:qe.clearQueue(),delay:qe.delay(),delayAnimation:qe.delayAnimation(),stop:qe.stop(),addToAnimationPool:function(e){var r=this;r.styleEnabled()&&r._private.aniEles.merge(e)},stopAnimationLoop:function(){this._private.animationsRunning=!1},startAnimationLoop:function(){var e=this;if(e._private.animationsRunning=!0,!e.styleEnabled())return;function r(){e._private.animationsRunning&&Ai(function(i){My(i,e),r()})}var n=e.renderer();n&&n.beforeRender?n.beforeRender(function(i,s){My(s,e)},n.beforeRenderPriorities.animations):r()}},UM={qualifierCompare:function(e,r){return e==null||r==null?e==null&&r==null:e.sameText(r)},eventMatches:function(e,r,n){var a=r.qualifier;return a!=null?e!==n.target&&Ma(n.target)&&a.matches(n.target):!0},addEventFields:function(e,r){r.cy=e,r.target=e},callbackContext:function(e,r,n){return r.qualifier!=null?n.target:e}},ii=function(e){return we(e)?new Nr(e):e},yT={createEmitter:function(){var e=this._private;return e.emitter||(e.emitter=new ns(UM,this)),this},emitter:function(){return this._private.emitter},on:function(e,r,n){return this.emitter().on(e,ii(r),n),this},removeListener:function(e,r,n){return this.emitter().removeListener(e,ii(r),n),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},one:function(e,r,n){return this.emitter().one(e,ii(r),n),this},once:function(e,r,n){return this.emitter().one(e,ii(r),n),this},emit:function(e,r){return this.emitter().emit(e,r),this},emitAndNotify:function(e,r){return this.emit(e),this.notify(e,r),this}};qe.eventAliasesOn(yT);var jd={png:function(e){var r=this._private.renderer;return e=e||{},r.png(e)},jpg:function(e){var r=this._private.renderer;return e=e||{},e.bg=e.bg||"#fff",r.jpg(e)}};jd.jpeg=jd.jpg;var gi={layout:function(e){var r=this;if(e==null){We("Layout options must be specified to make a layout");return}if(e.name==null){We("A `name` must be specified to make a layout");return}var n=e.name,a=r.extension("layout",n);if(a==null){We("No such layout `"+n+"` found.  Did you forget to import it and `cytoscape.use()` it?");return}var i;we(e.eles)?i=r.$(e.eles):i=e.eles!=null?e.eles:r.$();var s=new a(xe({},e,{cy:r,eles:i}));return s}};gi.createLayout=gi.makeLayout=gi.layout;var HM={notify:function(e,r){var n=this._private;if(this.batching()){n.batchNotifications=n.batchNotifications||{};var a=n.batchNotifications[e]=n.batchNotifications[e]||this.collection();r!=null&&a.merge(r);return}if(n.notificationsEnabled){var i=this.renderer();this.destroyed()||!i||i.notify(e,r)}},notifications:function(e){var r=this._private;return e===void 0?r.notificationsEnabled:(r.notificationsEnabled=!!e,this)},noNotifications:function(e){this.notifications(!1),e(),this.notifications(!0)},batching:function(){return this._private.batchCount>0},startBatch:function(){var e=this._private;return e.batchCount==null&&(e.batchCount=0),e.batchCount===0&&(e.batchStyleEles=this.collection(),e.batchNotifications={}),e.batchCount++,this},endBatch:function(){var e=this._private;if(e.batchCount===0)return this;if(e.batchCount--,e.batchCount===0){e.batchStyleEles.updateStyle();var r=this.renderer();Object.keys(e.batchNotifications).forEach(function(n){var a=e.batchNotifications[n];a.empty()?r.notify(n):r.notify(n,a)})}return this},batch:function(e){return this.startBatch(),e(),this.endBatch(),this},batchData:function(e){var r=this;return this.batch(function(){for(var n=Object.keys(e),a=0;a<n.length;a++){var i=n[a],s=e[i],o=r.getElementById(i);o.data(s)}})}},YM=pt({hideEdgesOnViewport:!1,textureOnViewport:!1,motionBlur:!1,motionBlurOpacity:.05,pixelRatio:void 0,desktopTapThreshold:4,touchTapThreshold:8,wheelSensitivity:1,debug:!1,showFps:!1,webgl:!1,webglDebug:!1,webglDebugShowAtlases:!1,webglTexSize:2048,webglTexRows:36,webglTexRowsNodes:18,webglBatchSize:2048,webglTexPerBatch:14,webglBgColor:[255,255,255]}),Zd={renderTo:function(e,r,n,a){var i=this._private.renderer;return i.renderTo(e,r,n,a),this},renderer:function(){return this._private.renderer},forceRender:function(){return this.notify("draw"),this},resize:function(){return this.invalidateSize(),this.emitAndNotify("resize"),this},initRenderer:function(e){var r=this,n=r.extension("renderer",e.name);if(n==null){We("Can not initialise: No such renderer `".concat(e.name,"` found. Did you forget to import it and `cytoscape.use()` it?"));return}e.wheelSensitivity!==void 0&&Ge("You have set a custom wheel sensitivity.  This will make your app zoom unnaturally when using mainstream mice.  You should change this value from the default only if you can guarantee that all your users will use the same hardware and OS configuration as your current machine.");var a=YM(e);a.cy=r,r._private.renderer=new n(a),this.notify("init")},destroyRenderer:function(){var e=this;e.notify("destroy");var r=e.container();if(r)for(r._cyreg=null;r.childNodes.length>0;)r.removeChild(r.childNodes[0]);e._private.renderer=null,e.mutableElements().forEach(function(n){var a=n._private;a.rscratch={},a.rstyle={},a.animation.current=[],a.animation.queue=[]})},onRender:function(e){return this.on("render",e)},offRender:function(e){return this.off("render",e)}};Zd.invalidateDimensions=Zd.resize;var pi={collection:function(e,r){return we(e)?this.$(e):Pt(e)?e.collection():$e(e)?(r||(r={}),new gt(this,e,r.unique,r.removed)):new gt(this)},nodes:function(e){var r=this.$(function(n){return n.isNode()});return e?r.filter(e):r},edges:function(e){var r=this.$(function(n){return n.isEdge()});return e?r.filter(e):r},$:function(e){var r=this._private.elements;return e?r.filter(e):r.spawnSelf()},mutableElements:function(){return this._private.elements}};pi.elements=pi.filter=pi.$;var ht={},ga="t",WM="f";ht.apply=function(t){for(var e=this,r=e._private,n=r.cy,a=n.collection(),i=0;i<t.length;i++){var s=t[i],o=e.getContextMeta(s);if(!o.empty){var u=e.getContextStyle(o),l=e.applyContextStyle(o,u,s);s._private.appliedInitStyle?e.updateTransitions(s,l.diffProps):s._private.appliedInitStyle=!0;var f=e.updateStyleHints(s);f&&a.push(s)}}return a};ht.getPropertiesDiff=function(t,e){var r=this,n=r._private.propDiffs=r._private.propDiffs||{},a=t+"-"+e,i=n[a];if(i)return i;for(var s=[],o={},u=0;u<r.length;u++){var l=r[u],f=t[u]===ga,c=e[u]===ga,h=f!==c,d=l.mappedProperties.length>0;if(h||c&&d){var v=void 0;h&&d||h?v=l.properties:d&&(v=l.mappedProperties);for(var p=0;p<v.length;p++){for(var g=v[p],y=g.name,m=!1,b=u+1;b<r.length;b++){var E=r[b],x=e[b]===ga;if(x&&(m=E.properties[g.name]!=null,m))break}!o[y]&&!m&&(o[y]=!0,s.push(y))}}}return n[a]=s,s};ht.getContextMeta=function(t){for(var e=this,r="",n,a=t._private.styleCxtKey||"",i=0;i<e.length;i++){var s=e[i],o=s.selector&&s.selector.matches(t);o?r+=ga:r+=WM}return n=e.getPropertiesDiff(a,r),t._private.styleCxtKey=r,{key:r,diffPropNames:n,empty:n.length===0}};ht.getContextStyle=function(t){var e=t.key,r=this,n=this._private.contextStyles=this._private.contextStyles||{};if(n[e])return n[e];for(var a={_private:{key:e}},i=0;i<r.length;i++){var s=r[i],o=e[i]===ga;if(o)for(var u=0;u<s.properties.length;u++){var l=s.properties[u];a[l.name]=l}}return n[e]=a,a};ht.applyContextStyle=function(t,e,r){for(var n=this,a=t.diffPropNames,i={},s=n.types,o=0;o<a.length;o++){var u=a[o],l=e[u],f=r.pstyle(u);if(!l)if(f)f.bypass?l={name:u,deleteBypassed:!0}:l={name:u,delete:!0};else continue;if(f!==l){if(l.mapped===s.fn&&f!=null&&f.mapping!=null&&f.mapping.value===l.value){var c=f.mapping,h=c.fnValue=l.value(r);if(h===c.prevFnValue)continue}var d=i[u]={prev:f};n.applyParsedProperty(r,l),d.next=r.pstyle(u),d.next&&d.next.bypass&&(d.next=d.next.bypassed)}}return{diffProps:i}};ht.updateStyleHints=function(t){var e=t._private,r=this,n=r.propertyGroupNames,a=r.propertyGroupKeys,i=function(X,j,ne){return r.getPropertiesHash(X,j,ne)},s=e.styleKey;if(t.removed())return!1;var o=e.group==="nodes",u=t._private.style;n=Object.keys(u);for(var l=0;l<a.length;l++){var f=a[l];e.styleKeys[f]=[Qr,In]}for(var c=function(X,j){return e.styleKeys[j][0]=wa(X,e.styleKeys[j][0])},h=function(X,j){return e.styleKeys[j][1]=Ea(X,e.styleKeys[j][1])},d=function(X,j){c(X,j),h(X,j)},v=function(X,j){for(var ne=0;ne<X.length;ne++){var ae=X.charCodeAt(ne);c(ae,j),h(ae,j)}},p=2e9,g=function(X){return-128<X&&X<128&&Math.floor(X)!==X?p-(X*1024|0):X},y=0;y<n.length;y++){var m=n[y],b=u[m];if(b!=null){var E=this.properties[m],x=E.type,S=E.groupKey,w=void 0;E.hashOverride!=null?w=E.hashOverride(t,b):b.pfValue!=null&&(w=b.pfValue);var T=E.enums==null?b.value:null,C=w!=null,A=T!=null,R=C||A,I=b.units;if(x.number&&R&&!x.multiple){var D=C?w:T;d(g(D),S),!C&&I!=null&&v(I,S)}else v(b.strValue,S)}}for(var _=[Qr,In],M=0;M<a.length;M++){var k=a[M],O=e.styleKeys[k];_[0]=wa(O[0],_[0]),_[1]=Ea(O[1],_[1])}e.styleKey=lD(_[0],_[1]);var P=e.styleKeys;e.labelDimsKey=mr(P.labelDimensions);var q=i(t,["label"],P.labelDimensions);if(e.labelKey=mr(q),e.labelStyleKey=mr(Za(P.commonLabel,q)),!o){var G=i(t,["source-label"],P.labelDimensions);e.sourceLabelKey=mr(G),e.sourceLabelStyleKey=mr(Za(P.commonLabel,G));var F=i(t,["target-label"],P.labelDimensions);e.targetLabelKey=mr(F),e.targetLabelStyleKey=mr(Za(P.commonLabel,F))}if(o){var z=e.styleKeys,W=z.nodeBody,N=z.nodeBorder,B=z.nodeOutline,$=z.backgroundImage,H=z.compound,te=z.pie,K=z.stripe,V=[W,N,B,$,H,te,K].filter(function(U){return U!=null}).reduce(Za,[Qr,In]);e.nodeKey=mr(V),e.hasPie=te!=null&&te[0]!==Qr&&te[1]!==In,e.hasStripe=K!=null&&K[0]!==Qr&&K[1]!==In}return s!==e.styleKey};ht.clearStyleHints=function(t){var e=t._private;e.styleCxtKey="",e.styleKeys={},e.styleKey=null,e.labelKey=null,e.labelStyleKey=null,e.sourceLabelKey=null,e.sourceLabelStyleKey=null,e.targetLabelKey=null,e.targetLabelStyleKey=null,e.nodeKey=null,e.hasPie=null,e.hasStripe=null};ht.applyParsedProperty=function(t,e){var r=this,n=e,a=t._private.style,i,s=r.types,o=r.properties[n.name].type,u=n.bypass,l=a[n.name],f=l&&l.bypass,c=t._private,h="mapping",d=function(W){return W==null?null:W.pfValue!=null?W.pfValue:W.value},v=function(){var W=d(l),N=d(n);r.checkTriggers(t,n.name,W,N)};if(e.name==="curve-style"&&t.isEdge()&&(e.value!=="bezier"&&t.isLoop()||e.value==="haystack"&&(t.source().isParent()||t.target().isParent()))&&(n=e=this.parse(e.name,"bezier",u)),n.delete)return a[n.name]=void 0,v(),!0;if(n.deleteBypassed)return l?l.bypass?(l.bypassed=void 0,v(),!0):!1:(v(),!0);if(n.deleteBypass)return l?l.bypass?(a[n.name]=l.bypassed,v(),!0):!1:(v(),!0);var p=function(){Ge("Do not assign mappings to elements without corresponding data (i.e. ele `"+t.id()+"` has no mapping for property `"+n.name+"` with data field `"+n.field+"`); try a `["+n.field+"]` selector to limit scope to elements with `"+n.field+"` defined")};switch(n.mapped){case s.mapData:{for(var g=n.field.split("."),y=c.data,m=0;m<g.length&&y;m++){var b=g[m];y=y[b]}if(y==null)return p(),!1;var E;if(ie(y)){var x=n.fieldMax-n.fieldMin;x===0?E=0:E=(y-n.fieldMin)/x}else return Ge("Do not use continuous mappers without specifying numeric data (i.e. `"+n.field+": "+y+"` for `"+t.id()+"` is non-numeric)"),!1;if(E<0?E=0:E>1&&(E=1),o.color){var S=n.valueMin[0],w=n.valueMax[0],T=n.valueMin[1],C=n.valueMax[1],A=n.valueMin[2],R=n.valueMax[2],I=n.valueMin[3]==null?1:n.valueMin[3],D=n.valueMax[3]==null?1:n.valueMax[3],_=[Math.round(S+(w-S)*E),Math.round(T+(C-T)*E),Math.round(A+(R-A)*E),Math.round(I+(D-I)*E)];i={bypass:n.bypass,name:n.name,value:_,strValue:"rgb("+_[0]+", "+_[1]+", "+_[2]+")"}}else if(o.number){var M=n.valueMin+(n.valueMax-n.valueMin)*E;i=this.parse(n.name,M,n.bypass,h)}else return!1;if(!i)return p(),!1;i.mapping=n,n=i;break}case s.data:{for(var k=n.field.split("."),O=c.data,P=0;P<k.length&&O;P++){var q=k[P];O=O[q]}if(O!=null&&(i=this.parse(n.name,O,n.bypass,h)),!i)return p(),!1;i.mapping=n,n=i;break}case s.fn:{var G=n.value,F=n.fnValue!=null?n.fnValue:G(t);if(n.prevFnValue=F,F==null)return Ge("Custom function mappers may not return null (i.e. `"+n.name+"` for ele `"+t.id()+"` is null)"),!1;if(i=this.parse(n.name,F,n.bypass,h),!i)return Ge("Custom function mappers may not return invalid values for the property type (i.e. `"+n.name+"` for ele `"+t.id()+"` is invalid)"),!1;i.mapping=Jt(n),n=i;break}case void 0:break;default:return!1}return u?(f?n.bypassed=l.bypassed:n.bypassed=l,a[n.name]=n):f?l.bypassed=n:a[n.name]=n,v(),!0};ht.cleanElements=function(t,e){for(var r=0;r<t.length;r++){var n=t[r];if(this.clearStyleHints(n),n.dirtyCompoundBoundsCache(),n.dirtyBoundingBoxCache(),!e)n._private.style={};else for(var a=n._private.style,i=Object.keys(a),s=0;s<i.length;s++){var o=i[s],u=a[o];u!=null&&(u.bypass?u.bypassed=null:a[o]=null)}}};ht.update=function(){var t=this._private.cy,e=t.mutableElements();e.updateStyle()};ht.updateTransitions=function(t,e){var r=this,n=t._private,a=t.pstyle("transition-property").value,i=t.pstyle("transition-duration").pfValue,s=t.pstyle("transition-delay").pfValue;if(a.length>0&&i>0){for(var o={},u=!1,l=0;l<a.length;l++){var f=a[l],c=t.pstyle(f),h=e[f];if(h){var d=h.prev,v=d,p=h.next!=null?h.next:c,g=!1,y=void 0,m=1e-6;v&&(ie(v.pfValue)&&ie(p.pfValue)?(g=p.pfValue-v.pfValue,y=v.pfValue+m*g):ie(v.value)&&ie(p.value)?(g=p.value-v.value,y=v.value+m*g):$e(v.value)&&$e(p.value)&&(g=v.value[0]!==p.value[0]||v.value[1]!==p.value[1]||v.value[2]!==p.value[2],y=v.strValue),g&&(o[f]=p.strValue,this.applyBypass(t,f,y),u=!0))}}if(!u)return;n.transitioning=!0,new $n(function(b){s>0?t.delayAnimation(s).play().promise().then(b):b()}).then(function(){return t.animation({style:o,duration:i,easing:t.pstyle("transition-timing-function").value,queue:!1}).play().promise()}).then(function(){r.removeBypasses(t,a),t.emitAndNotify("style"),n.transitioning=!1})}else n.transitioning&&(this.removeBypasses(t,a),t.emitAndNotify("style"),n.transitioning=!1)};ht.checkTrigger=function(t,e,r,n,a,i){var s=this.properties[e],o=a(s);t.removed()||o!=null&&o(r,n,t)&&i(s)};ht.checkZOrderTrigger=function(t,e,r,n){var a=this;this.checkTrigger(t,e,r,n,function(i){return i.triggersZOrder},function(){a._private.cy.notify("zorder",t)})};ht.checkBoundsTrigger=function(t,e,r,n){this.checkTrigger(t,e,r,n,function(a){return a.triggersBounds},function(a){t.dirtyCompoundBoundsCache(),t.dirtyBoundingBoxCache()})};ht.checkConnectedEdgesBoundsTrigger=function(t,e,r,n){this.checkTrigger(t,e,r,n,function(a){return a.triggersBoundsOfConnectedEdges},function(a){t.connectedEdges().forEach(function(i){i.dirtyBoundingBoxCache()})})};ht.checkParallelEdgesBoundsTrigger=function(t,e,r,n){this.checkTrigger(t,e,r,n,function(a){return a.triggersBoundsOfParallelEdges},function(a){t.parallelEdges().forEach(function(i){i.dirtyBoundingBoxCache()})})};ht.checkTriggers=function(t,e,r,n){t.dirtyStyleCache(),this.checkZOrderTrigger(t,e,r,n),this.checkBoundsTrigger(t,e,r,n),this.checkConnectedEdgesBoundsTrigger(t,e,r,n),this.checkParallelEdgesBoundsTrigger(t,e,r,n)};var qa={};qa.applyBypass=function(t,e,r,n){var a=this,i=[],s=!0;if(e==="*"||e==="**"){if(r!==void 0)for(var o=0;o<a.properties.length;o++){var u=a.properties[o],l=u.name,f=this.parse(l,r,!0);f&&i.push(f)}}else if(we(e)){var c=this.parse(e,r,!0);c&&i.push(c)}else if(Be(e)){var h=e;n=r;for(var d=Object.keys(h),v=0;v<d.length;v++){var p=d[v],g=h[p];if(g===void 0&&(g=h[Wi(p)]),g!==void 0){var y=this.parse(p,g,!0);y&&i.push(y)}}}else return!1;if(i.length===0)return!1;for(var m=!1,b=0;b<t.length;b++){for(var E=t[b],x={},S=void 0,w=0;w<i.length;w++){var T=i[w];if(n){var C=E.pstyle(T.name);S=x[T.name]={prev:C}}m=this.applyParsedProperty(E,Jt(T))||m,n&&(S.next=E.pstyle(T.name))}m&&this.updateStyleHints(E),n&&this.updateTransitions(E,x,s)}return m};qa.overrideBypass=function(t,e,r){e=wv(e);for(var n=0;n<t.length;n++){var a=t[n],i=a._private.style[e],s=this.properties[e].type,o=s.color,u=s.mutiple,l=i?i.pfValue!=null?i.pfValue:i.value:null;!i||!i.bypass?this.applyBypass(a,e,r):(i.value=r,i.pfValue!=null&&(i.pfValue=r),o?i.strValue="rgb("+r.join(",")+")":u?i.strValue=r.join(" "):i.strValue=""+r,this.updateStyleHints(a)),this.checkTriggers(a,e,l,r)}};qa.removeAllBypasses=function(t,e){return this.removeBypasses(t,this.propertyNames,e)};qa.removeBypasses=function(t,e,r){for(var n=!0,a=0;a<t.length;a++){for(var i=t[a],s={},o=0;o<e.length;o++){var u=e[o],l=this.properties[u],f=i.pstyle(l.name);if(!(!f||!f.bypass)){var c="",h=this.parse(u,c,!0),d=s[l.name]={prev:f};this.applyParsedProperty(i,h),d.next=i.pstyle(l.name)}}this.updateStyleHints(i),r&&this.updateTransitions(i,s,n)}};var kv={};kv.getEmSizeInPixels=function(){var t=this.containerCss("font-size");return t!=null?parseFloat(t):1};kv.containerCss=function(t){var e=this._private.cy,r=e.container(),n=e.window();if(n&&r&&n.getComputedStyle)return n.getComputedStyle(r).getPropertyValue(t)};var er={};er.getRenderedStyle=function(t,e){return e?this.getStylePropertyValue(t,e,!0):this.getRawStyle(t,!0)};er.getRawStyle=function(t,e){var r=this;if(t=t[0],t){for(var n={},a=0;a<r.properties.length;a++){var i=r.properties[a],s=r.getStylePropertyValue(t,i.name,e);s!=null&&(n[i.name]=s,n[Wi(i.name)]=s)}return n}};er.getIndexedStyle=function(t,e,r,n){var a=t.pstyle(e)[r][n];return a??t.cy().style().getDefaultProperty(e)[r][0]};er.getStylePropertyValue=function(t,e,r){var n=this;if(t=t[0],t){var a=n.properties[e];a.alias&&(a=a.pointsTo);var i=a.type,s=t.pstyle(a.name);if(s){var o=s.value,u=s.units,l=s.strValue;if(r&&i.number&&o!=null&&ie(o)){var f=t.cy().zoom(),c=function(g){return g*f},h=function(g,y){return c(g)+y},d=$e(o),v=d?u.every(function(p){return p!=null}):u!=null;return v?d?o.map(function(p,g){return h(p,u[g])}).join(" "):h(o,u):d?o.map(function(p){return we(p)?p:""+c(p)}).join(" "):""+c(o)}else if(l!=null)return l}return null}};er.getAnimationStartStyle=function(t,e){for(var r={},n=0;n<e.length;n++){var a=e[n],i=a.name,s=t.pstyle(i);s!==void 0&&(Be(s)?s=this.parse(i,s.strValue):s=this.parse(i,s)),s&&(r[i]=s)}return r};er.getPropsList=function(t){var e=this,r=[],n=t,a=e.properties;if(n)for(var i=Object.keys(n),s=0;s<i.length;s++){var o=i[s],u=n[o],l=a[o]||a[wv(o)],f=this.parse(l.name,u);f&&r.push(f)}return r};er.getNonDefaultPropertiesHash=function(t,e,r){var n=r.slice(),a,i,s,o,u,l;for(u=0;u<e.length;u++)if(a=e[u],i=t.pstyle(a,!1),i!=null)if(i.pfValue!=null)n[0]=wa(o,n[0]),n[1]=Ea(o,n[1]);else for(s=i.strValue,l=0;l<s.length;l++)o=s.charCodeAt(l),n[0]=wa(o,n[0]),n[1]=Ea(o,n[1]);return n};er.getPropertiesHash=er.getNonDefaultPropertiesHash;var ss={};ss.appendFromJson=function(t){for(var e=this,r=0;r<t.length;r++){var n=t[r],a=n.selector,i=n.style||n.css,s=Object.keys(i);e.selector(a);for(var o=0;o<s.length;o++){var u=s[o],l=i[u];e.css(u,l)}}return e};ss.fromJson=function(t){var e=this;return e.resetToDefault(),e.appendFromJson(t),e};ss.json=function(){for(var t=[],e=this.defaultLength;e<this.length;e++){for(var r=this[e],n=r.selector,a=r.properties,i={},s=0;s<a.length;s++){var o=a[s];i[o.name]=o.strValue}t.push({selector:n?n.toString():"core",style:i})}return t};var Nv={};Nv.appendFromString=function(t){var e=this,r=this,n=""+t,a,i,s;n=n.replace(/[/][*](\s|.)+?[*][/]/g,"");function o(){n.length>a.length?n=n.substr(a.length):n=""}function u(){i.length>s.length?i=i.substr(s.length):i=""}for(;;){var l=n.match(/^\s*$/);if(l)break;var f=n.match(/^\s*((?:.|\s)+?)\s*\{((?:.|\s)+?)\}/);if(!f){Ge("Halting stylesheet parsing: String stylesheet contains more to parse but no selector and block found in: "+n);break}a=f[0];var c=f[1];if(c!=="core"){var h=new Nr(c);if(h.invalid){Ge("Skipping parsing of block: Invalid selector found in string stylesheet: "+c),o();continue}}var d=f[2],v=!1;i=d;for(var p=[];;){var g=i.match(/^\s*$/);if(g)break;var y=i.match(/^\s*(.+?)\s*:\s*(.+?)(?:\s*;|\s*$)/);if(!y){Ge("Skipping parsing of block: Invalid formatting of style property and value definitions found in:"+d),v=!0;break}s=y[0];var m=y[1],b=y[2],E=e.properties[m];if(!E){Ge("Skipping property: Invalid property name in: "+s),u();continue}var x=r.parse(m,b);if(!x){Ge("Skipping property: Invalid property definition in: "+s),u();continue}p.push({name:m,val:b}),u()}if(v){o();break}r.selector(c);for(var S=0;S<p.length;S++){var w=p[S];r.css(w.name,w.val)}o()}return r};Nv.fromString=function(t){var e=this;return e.resetToDefault(),e.appendFromString(t),e};var et={};(function(){var t=st,e=zI,r=VI,n=UI,a=HI,i=function(U){return"^"+U+"\\s*\\(\\s*([\\w\\.]+)\\s*\\)$"},s=function(U){var X=t+"|\\w+|"+e+"|"+r+"|"+n+"|"+a;return"^"+U+"\\s*\\(([\\w\\.]+)\\s*\\,\\s*("+t+")\\s*\\,\\s*("+t+")\\s*,\\s*("+X+")\\s*\\,\\s*("+X+")\\)$"},o=[`^url\\s*\\(\\s*['"]?(.+?)['"]?\\s*\\)$`,"^(none)$","^(.+)$"];et.types={time:{number:!0,min:0,units:"s|ms",implicitUnits:"ms"},percent:{number:!0,min:0,max:100,units:"%",implicitUnits:"%"},percentages:{number:!0,min:0,max:100,units:"%",implicitUnits:"%",multiple:!0},zeroOneNumber:{number:!0,min:0,max:1,unitless:!0},zeroOneNumbers:{number:!0,min:0,max:1,unitless:!0,multiple:!0},nOneOneNumber:{number:!0,min:-1,max:1,unitless:!0},nonNegativeInt:{number:!0,min:0,integer:!0,unitless:!0},nonNegativeNumber:{number:!0,min:0,unitless:!0},position:{enums:["parent","origin"]},nodeSize:{number:!0,min:0,enums:["label"]},number:{number:!0,unitless:!0},numbers:{number:!0,unitless:!0,multiple:!0},positiveNumber:{number:!0,unitless:!0,min:0,strictMin:!0},size:{number:!0,min:0},bidirectionalSize:{number:!0},bidirectionalSizeMaybePercent:{number:!0,allowPercent:!0},bidirectionalSizes:{number:!0,multiple:!0},sizeMaybePercent:{number:!0,min:0,allowPercent:!0},axisDirection:{enums:["horizontal","leftward","rightward","vertical","upward","downward","auto"]},axisDirectionExplicit:{enums:["leftward","rightward","upward","downward"]},axisDirectionPrimary:{enums:["horizontal","vertical"]},paddingRelativeTo:{enums:["width","height","average","min","max"]},bgWH:{number:!0,min:0,allowPercent:!0,enums:["auto"],multiple:!0},bgPos:{number:!0,allowPercent:!0,multiple:!0},bgRelativeTo:{enums:["inner","include-padding"],multiple:!0},bgRepeat:{enums:["repeat","repeat-x","repeat-y","no-repeat"],multiple:!0},bgFit:{enums:["none","contain","cover"],multiple:!0},bgCrossOrigin:{enums:["anonymous","use-credentials","null"],multiple:!0},bgClip:{enums:["none","node"],multiple:!0},bgContainment:{enums:["inside","over"],multiple:!0},boxSelection:{enums:["contain","overlap","none"]},color:{color:!0},colors:{color:!0,multiple:!0},fill:{enums:["solid","linear-gradient","radial-gradient"]},bool:{enums:["yes","no"]},bools:{enums:["yes","no"],multiple:!0},lineStyle:{enums:["solid","dotted","dashed"]},lineCap:{enums:["butt","round","square"]},linePosition:{enums:["center","inside","outside"]},lineJoin:{enums:["round","bevel","miter"]},borderStyle:{enums:["solid","dotted","dashed","double"]},curveStyle:{enums:["bezier","unbundled-bezier","haystack","segments","straight","straight-triangle","taxi","round-segments","round-taxi"]},radiusType:{enums:["arc-radius","influence-radius"],multiple:!0},fontFamily:{regex:'^([\\w- \\"]+(?:\\s*,\\s*[\\w- \\"]+)*)$'},fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none","underline","overline","line-through"]},textTransform:{enums:["none","uppercase","lowercase"]},textWrap:{enums:["none","wrap","ellipsis"]},textOverflowWrap:{enums:["whitespace","anywhere"]},textBackgroundShape:{enums:["rectangle","roundrectangle","round-rectangle","circle"]},nodeShape:{enums:["rectangle","roundrectangle","round-rectangle","cutrectangle","cut-rectangle","bottomroundrectangle","bottom-round-rectangle","barrel","ellipse","triangle","round-triangle","square","pentagon","round-pentagon","hexagon","round-hexagon","concavehexagon","concave-hexagon","heptagon","round-heptagon","octagon","round-octagon","tag","round-tag","star","diamond","round-diamond","vee","rhomboid","right-rhomboid","polygon"]},overlayShape:{enums:["roundrectangle","round-rectangle","ellipse"]},cornerRadius:{number:!0,min:0,units:"px|em",implicitUnits:"px",enums:["auto"]},compoundIncludeLabels:{enums:["include","exclude"]},arrowShape:{enums:["tee","triangle","triangle-tee","circle-triangle","triangle-cross","triangle-backcurve","vee","square","circle","diamond","chevron","none"]},arrowFill:{enums:["filled","hollow"]},arrowWidth:{number:!0,units:"%|px|em",implicitUnits:"px",enums:["match-line"]},display:{enums:["element","none"]},visibility:{enums:["hidden","visible"]},zCompoundDepth:{enums:["bottom","orphan","auto","top"]},zIndexCompare:{enums:["auto","manual"]},valign:{enums:["top","center","bottom"]},halign:{enums:["left","center","right"]},justification:{enums:["left","center","right","auto"]},text:{string:!0},data:{mapping:!0,regex:i("data")},layoutData:{mapping:!0,regex:i("layoutData")},scratch:{mapping:!0,regex:i("scratch")},mapData:{mapping:!0,regex:s("mapData")},mapLayoutData:{mapping:!0,regex:s("mapLayoutData")},mapScratch:{mapping:!0,regex:s("mapScratch")},fn:{mapping:!0,fn:!0},url:{regexes:o,singleRegexMatchValue:!0},urls:{regexes:o,singleRegexMatchValue:!0,multiple:!0},propList:{propList:!0},angle:{number:!0,units:"deg|rad",implicitUnits:"rad"},textRotation:{number:!0,units:"deg|rad",implicitUnits:"rad",enums:["none","autorotate"]},polygonPointList:{number:!0,multiple:!0,evenMultiple:!0,min:-1,max:1,unitless:!0},edgeDistances:{enums:["intersection","node-position","endpoints"]},edgeEndpoint:{number:!0,multiple:!0,units:"%|px|em|deg|rad",implicitUnits:"px",enums:["inside-to-node","outside-to-node","outside-to-node-or-label","outside-to-line","outside-to-line-or-label"],singleEnum:!0,validate:function(U,X){switch(U.length){case 2:return X[0]!=="deg"&&X[0]!=="rad"&&X[1]!=="deg"&&X[1]!=="rad";case 1:return we(U[0])||X[0]==="deg"||X[0]==="rad";default:return!1}}},easing:{regexes:["^(spring)\\s*\\(\\s*("+t+")\\s*,\\s*("+t+")\\s*\\)$","^(cubic-bezier)\\s*\\(\\s*("+t+")\\s*,\\s*("+t+")\\s*,\\s*("+t+")\\s*,\\s*("+t+")\\s*\\)$"],enums:["linear","ease","ease-in","ease-out","ease-in-out","ease-in-sine","ease-out-sine","ease-in-out-sine","ease-in-quad","ease-out-quad","ease-in-out-quad","ease-in-cubic","ease-out-cubic","ease-in-out-cubic","ease-in-quart","ease-out-quart","ease-in-out-quart","ease-in-quint","ease-out-quint","ease-in-out-quint","ease-in-expo","ease-out-expo","ease-in-out-expo","ease-in-circ","ease-out-circ","ease-in-out-circ"]},gradientDirection:{enums:["to-bottom","to-top","to-left","to-right","to-bottom-right","to-bottom-left","to-top-right","to-top-left","to-right-bottom","to-left-bottom","to-right-top","to-left-top"]},boundsExpansion:{number:!0,multiple:!0,min:0,validate:function(U){var X=U.length;return X===1||X===2||X===4}}};var u={zeroNonZero:function(U,X){return(U==null||X==null)&&U!==X||U==0&&X!=0?!0:U!=0&&X==0},any:function(U,X){return U!=X},emptyNonEmpty:function(U,X){var j=Or(U),ne=Or(X);return j&&!ne||!j&&ne}},l=et.types,f=[{name:"label",type:l.text,triggersBounds:u.any,triggersZOrder:u.emptyNonEmpty},{name:"text-rotation",type:l.textRotation,triggersBounds:u.any},{name:"text-margin-x",type:l.bidirectionalSize,triggersBounds:u.any},{name:"text-margin-y",type:l.bidirectionalSize,triggersBounds:u.any}],c=[{name:"source-label",type:l.text,triggersBounds:u.any},{name:"source-text-rotation",type:l.textRotation,triggersBounds:u.any},{name:"source-text-margin-x",type:l.bidirectionalSize,triggersBounds:u.any},{name:"source-text-margin-y",type:l.bidirectionalSize,triggersBounds:u.any},{name:"source-text-offset",type:l.size,triggersBounds:u.any}],h=[{name:"target-label",type:l.text,triggersBounds:u.any},{name:"target-text-rotation",type:l.textRotation,triggersBounds:u.any},{name:"target-text-margin-x",type:l.bidirectionalSize,triggersBounds:u.any},{name:"target-text-margin-y",type:l.bidirectionalSize,triggersBounds:u.any},{name:"target-text-offset",type:l.size,triggersBounds:u.any}],d=[{name:"font-family",type:l.fontFamily,triggersBounds:u.any},{name:"font-style",type:l.fontStyle,triggersBounds:u.any},{name:"font-weight",type:l.fontWeight,triggersBounds:u.any},{name:"font-size",type:l.size,triggersBounds:u.any},{name:"text-transform",type:l.textTransform,triggersBounds:u.any},{name:"text-wrap",type:l.textWrap,triggersBounds:u.any},{name:"text-overflow-wrap",type:l.textOverflowWrap,triggersBounds:u.any},{name:"text-max-width",type:l.size,triggersBounds:u.any},{name:"text-outline-width",type:l.size,triggersBounds:u.any},{name:"line-height",type:l.positiveNumber,triggersBounds:u.any}],v=[{name:"text-valign",type:l.valign,triggersBounds:u.any},{name:"text-halign",type:l.halign,triggersBounds:u.any},{name:"color",type:l.color},{name:"text-outline-color",type:l.color},{name:"text-outline-opacity",type:l.zeroOneNumber},{name:"text-background-color",type:l.color},{name:"text-background-opacity",type:l.zeroOneNumber},{name:"text-background-padding",type:l.size,triggersBounds:u.any},{name:"text-border-opacity",type:l.zeroOneNumber},{name:"text-border-color",type:l.color},{name:"text-border-width",type:l.size,triggersBounds:u.any},{name:"text-border-style",type:l.borderStyle,triggersBounds:u.any},{name:"text-background-shape",type:l.textBackgroundShape,triggersBounds:u.any},{name:"text-justification",type:l.justification},{name:"box-select-labels",type:l.bool,triggersBounds:u.any}],p=[{name:"events",type:l.bool,triggersZOrder:u.any},{name:"text-events",type:l.bool,triggersZOrder:u.any},{name:"box-selection",type:l.boxSelection,triggersZOrder:u.any}],g=[{name:"display",type:l.display,triggersZOrder:u.any,triggersBounds:u.any,triggersBoundsOfConnectedEdges:u.any,triggersBoundsOfParallelEdges:function(U,X,j){return U===X?!1:j.pstyle("curve-style").value==="bezier"}},{name:"visibility",type:l.visibility,triggersZOrder:u.any},{name:"opacity",type:l.zeroOneNumber,triggersZOrder:u.zeroNonZero},{name:"text-opacity",type:l.zeroOneNumber},{name:"min-zoomed-font-size",type:l.size},{name:"z-compound-depth",type:l.zCompoundDepth,triggersZOrder:u.any},{name:"z-index-compare",type:l.zIndexCompare,triggersZOrder:u.any},{name:"z-index",type:l.number,triggersZOrder:u.any}],y=[{name:"overlay-padding",type:l.size,triggersBounds:u.any},{name:"overlay-color",type:l.color},{name:"overlay-opacity",type:l.zeroOneNumber,triggersBounds:u.zeroNonZero},{name:"overlay-shape",type:l.overlayShape,triggersBounds:u.any},{name:"overlay-corner-radius",type:l.cornerRadius}],m=[{name:"underlay-padding",type:l.size,triggersBounds:u.any},{name:"underlay-color",type:l.color},{name:"underlay-opacity",type:l.zeroOneNumber,triggersBounds:u.zeroNonZero},{name:"underlay-shape",type:l.overlayShape,triggersBounds:u.any},{name:"underlay-corner-radius",type:l.cornerRadius}],b=[{name:"transition-property",type:l.propList},{name:"transition-duration",type:l.time},{name:"transition-delay",type:l.time},{name:"transition-timing-function",type:l.easing}],E=function(U,X){return X.value==="label"?-U.poolIndex():X.pfValue},x=[{name:"height",type:l.nodeSize,triggersBounds:u.any,hashOverride:E},{name:"width",type:l.nodeSize,triggersBounds:u.any,hashOverride:E},{name:"shape",type:l.nodeShape,triggersBounds:u.any},{name:"shape-polygon-points",type:l.polygonPointList,triggersBounds:u.any},{name:"corner-radius",type:l.cornerRadius},{name:"background-color",type:l.color},{name:"background-fill",type:l.fill},{name:"background-opacity",type:l.zeroOneNumber},{name:"background-blacken",type:l.nOneOneNumber},{name:"background-gradient-stop-colors",type:l.colors},{name:"background-gradient-stop-positions",type:l.percentages},{name:"background-gradient-direction",type:l.gradientDirection},{name:"padding",type:l.sizeMaybePercent,triggersBounds:u.any},{name:"padding-relative-to",type:l.paddingRelativeTo,triggersBounds:u.any},{name:"bounds-expansion",type:l.boundsExpansion,triggersBounds:u.any}],S=[{name:"border-color",type:l.color},{name:"border-opacity",type:l.zeroOneNumber},{name:"border-width",type:l.size,triggersBounds:u.any},{name:"border-style",type:l.borderStyle},{name:"border-cap",type:l.lineCap},{name:"border-join",type:l.lineJoin},{name:"border-dash-pattern",type:l.numbers},{name:"border-dash-offset",type:l.number},{name:"border-position",type:l.linePosition}],w=[{name:"outline-color",type:l.color},{name:"outline-opacity",type:l.zeroOneNumber},{name:"outline-width",type:l.size,triggersBounds:u.any},{name:"outline-style",type:l.borderStyle},{name:"outline-offset",type:l.size,triggersBounds:u.any}],T=[{name:"background-image",type:l.urls},{name:"background-image-crossorigin",type:l.bgCrossOrigin},{name:"background-image-opacity",type:l.zeroOneNumbers},{name:"background-image-containment",type:l.bgContainment},{name:"background-image-smoothing",type:l.bools},{name:"background-position-x",type:l.bgPos},{name:"background-position-y",type:l.bgPos},{name:"background-width-relative-to",type:l.bgRelativeTo},{name:"background-height-relative-to",type:l.bgRelativeTo},{name:"background-repeat",type:l.bgRepeat},{name:"background-fit",type:l.bgFit},{name:"background-clip",type:l.bgClip},{name:"background-width",type:l.bgWH},{name:"background-height",type:l.bgWH},{name:"background-offset-x",type:l.bgPos},{name:"background-offset-y",type:l.bgPos}],C=[{name:"position",type:l.position,triggersBounds:u.any},{name:"compound-sizing-wrt-labels",type:l.compoundIncludeLabels,triggersBounds:u.any},{name:"min-width",type:l.size,triggersBounds:u.any},{name:"min-width-bias-left",type:l.sizeMaybePercent,triggersBounds:u.any},{name:"min-width-bias-right",type:l.sizeMaybePercent,triggersBounds:u.any},{name:"min-height",type:l.size,triggersBounds:u.any},{name:"min-height-bias-top",type:l.sizeMaybePercent,triggersBounds:u.any},{name:"min-height-bias-bottom",type:l.sizeMaybePercent,triggersBounds:u.any}],A=[{name:"line-style",type:l.lineStyle},{name:"line-color",type:l.color},{name:"line-fill",type:l.fill},{name:"line-cap",type:l.lineCap},{name:"line-opacity",type:l.zeroOneNumber},{name:"line-dash-pattern",type:l.numbers},{name:"line-dash-offset",type:l.number},{name:"line-outline-width",type:l.size},{name:"line-outline-color",type:l.color},{name:"line-gradient-stop-colors",type:l.colors},{name:"line-gradient-stop-positions",type:l.percentages},{name:"curve-style",type:l.curveStyle,triggersBounds:u.any,triggersBoundsOfParallelEdges:function(U,X){return U===X?!1:U==="bezier"||X==="bezier"}},{name:"haystack-radius",type:l.zeroOneNumber,triggersBounds:u.any},{name:"source-endpoint",type:l.edgeEndpoint,triggersBounds:u.any},{name:"target-endpoint",type:l.edgeEndpoint,triggersBounds:u.any},{name:"control-point-step-size",type:l.size,triggersBounds:u.any},{name:"control-point-distances",type:l.bidirectionalSizes,triggersBounds:u.any},{name:"control-point-weights",type:l.numbers,triggersBounds:u.any},{name:"segment-distances",type:l.bidirectionalSizes,triggersBounds:u.any},{name:"segment-weights",type:l.numbers,triggersBounds:u.any},{name:"segment-radii",type:l.numbers,triggersBounds:u.any},{name:"radius-type",type:l.radiusType,triggersBounds:u.any},{name:"taxi-turn",type:l.bidirectionalSizeMaybePercent,triggersBounds:u.any},{name:"taxi-turn-min-distance",type:l.size,triggersBounds:u.any},{name:"taxi-direction",type:l.axisDirection,triggersBounds:u.any},{name:"taxi-radius",type:l.number,triggersBounds:u.any},{name:"edge-distances",type:l.edgeDistances,triggersBounds:u.any},{name:"arrow-scale",type:l.positiveNumber,triggersBounds:u.any},{name:"loop-direction",type:l.angle,triggersBounds:u.any},{name:"loop-sweep",type:l.angle,triggersBounds:u.any},{name:"source-distance-from-node",type:l.size,triggersBounds:u.any},{name:"target-distance-from-node",type:l.size,triggersBounds:u.any}],R=[{name:"ghost",type:l.bool,triggersBounds:u.any},{name:"ghost-offset-x",type:l.bidirectionalSize,triggersBounds:u.any},{name:"ghost-offset-y",type:l.bidirectionalSize,triggersBounds:u.any},{name:"ghost-opacity",type:l.zeroOneNumber}],I=[{name:"selection-box-color",type:l.color},{name:"selection-box-opacity",type:l.zeroOneNumber},{name:"selection-box-border-color",type:l.color},{name:"selection-box-border-width",type:l.size},{name:"active-bg-color",type:l.color},{name:"active-bg-opacity",type:l.zeroOneNumber},{name:"active-bg-size",type:l.size},{name:"outside-texture-bg-color",type:l.color},{name:"outside-texture-bg-opacity",type:l.zeroOneNumber}],D=[];et.pieBackgroundN=16,D.push({name:"pie-size",type:l.sizeMaybePercent}),D.push({name:"pie-hole",type:l.sizeMaybePercent}),D.push({name:"pie-start-angle",type:l.angle});for(var _=1;_<=et.pieBackgroundN;_++)D.push({name:"pie-"+_+"-background-color",type:l.color}),D.push({name:"pie-"+_+"-background-size",type:l.percent}),D.push({name:"pie-"+_+"-background-opacity",type:l.zeroOneNumber});var M=[];et.stripeBackgroundN=16,M.push({name:"stripe-size",type:l.sizeMaybePercent}),M.push({name:"stripe-direction",type:l.axisDirectionPrimary});for(var k=1;k<=et.stripeBackgroundN;k++)M.push({name:"stripe-"+k+"-background-color",type:l.color}),M.push({name:"stripe-"+k+"-background-size",type:l.percent}),M.push({name:"stripe-"+k+"-background-opacity",type:l.zeroOneNumber});var O=[],P=et.arrowPrefixes=["source","mid-source","target","mid-target"];[{name:"arrow-shape",type:l.arrowShape,triggersBounds:u.any},{name:"arrow-color",type:l.color},{name:"arrow-fill",type:l.arrowFill},{name:"arrow-width",type:l.arrowWidth}].forEach(function(V){P.forEach(function(U){var X=U+"-"+V.name,j=V.type,ne=V.triggersBounds;O.push({name:X,type:j,triggersBounds:ne})})},{});var q=et.properties=[].concat(p,b,g,y,m,R,v,d,f,c,h,x,S,w,T,D,M,C,A,O,I),G=et.propertyGroups={behavior:p,transition:b,visibility:g,overlay:y,underlay:m,ghost:R,commonLabel:v,labelDimensions:d,mainLabel:f,sourceLabel:c,targetLabel:h,nodeBody:x,nodeBorder:S,nodeOutline:w,backgroundImage:T,pie:D,stripe:M,compound:C,edgeLine:A,edgeArrow:O,core:I},F=et.propertyGroupNames={},z=et.propertyGroupKeys=Object.keys(G);z.forEach(function(V){F[V]=G[V].map(function(U){return U.name}),G[V].forEach(function(U){return U.groupKey=V})});var W=et.aliases=[{name:"content",pointsTo:"label"},{name:"control-point-distance",pointsTo:"control-point-distances"},{name:"control-point-weight",pointsTo:"control-point-weights"},{name:"segment-distance",pointsTo:"segment-distances"},{name:"segment-weight",pointsTo:"segment-weights"},{name:"segment-radius",pointsTo:"segment-radii"},{name:"edge-text-rotation",pointsTo:"text-rotation"},{name:"padding-left",pointsTo:"padding"},{name:"padding-right",pointsTo:"padding"},{name:"padding-top",pointsTo:"padding"},{name:"padding-bottom",pointsTo:"padding"}];et.propertyNames=q.map(function(V){return V.name});for(var N=0;N<q.length;N++){var B=q[N];q[B.name]=B}for(var $=0;$<W.length;$++){var H=W[$],te=q[H.pointsTo],K={name:H.name,alias:!0,pointsTo:te};q.push(K),q[H.name]=K}})();et.getDefaultProperty=function(t){return this.getDefaultProperties()[t]};et.getDefaultProperties=function(){var t=this._private;if(t.defaultProperties!=null)return t.defaultProperties;for(var e=xe({"selection-box-color":"#ddd","selection-box-opacity":.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"active-bg-color":"black","active-bg-opacity":.15,"active-bg-size":30,"outside-texture-bg-color":"#000","outside-texture-bg-opacity":.125,events:"yes","text-events":"no","text-valign":"top","text-halign":"center","text-justification":"auto","line-height":1,color:"#000","box-selection":"contain","text-outline-color":"#000","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,"text-decoration":"none","text-transform":"none","text-wrap":"none","text-overflow-wrap":"whitespace","text-max-width":9999,"text-background-color":"#000","text-background-opacity":0,"text-background-shape":"rectangle","text-background-padding":0,"text-border-opacity":0,"text-border-width":0,"text-border-style":"solid","text-border-color":"#000","font-family":"Helvetica Neue, Helvetica, sans-serif","font-style":"normal","font-weight":"normal","font-size":16,"min-zoomed-font-size":0,"text-rotation":"none","source-text-rotation":"none","target-text-rotation":"none",visibility:"visible",display:"element",opacity:1,"z-compound-depth":"auto","z-index-compare":"auto","z-index":0,label:"","text-margin-x":0,"text-margin-y":0,"source-label":"","source-text-offset":0,"source-text-margin-x":0,"source-text-margin-y":0,"target-label":"","target-text-offset":0,"target-text-margin-x":0,"target-text-margin-y":0,"overlay-opacity":0,"overlay-color":"#000","overlay-padding":10,"overlay-shape":"round-rectangle","overlay-corner-radius":"auto","underlay-opacity":0,"underlay-color":"#000","underlay-padding":10,"underlay-shape":"round-rectangle","underlay-corner-radius":"auto","transition-property":"none","transition-duration":0,"transition-delay":0,"transition-timing-function":"linear","box-select-labels":"no","background-blacken":0,"background-color":"#999","background-fill":"solid","background-opacity":1,"background-image":"none","background-image-crossorigin":"anonymous","background-image-opacity":1,"background-image-containment":"inside","background-image-smoothing":"yes","background-position-x":"50%","background-position-y":"50%","background-offset-x":0,"background-offset-y":0,"background-width-relative-to":"include-padding","background-height-relative-to":"include-padding","background-repeat":"no-repeat","background-fit":"none","background-clip":"node","background-width":"auto","background-height":"auto","border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid","border-dash-pattern":[4,2],"border-dash-offset":0,"border-cap":"butt","border-join":"miter","border-position":"center","outline-color":"#999","outline-opacity":1,"outline-width":0,"outline-offset":0,"outline-style":"solid",height:30,width:30,shape:"ellipse","shape-polygon-points":"-1, -1,   1, -1,   1, 1,   -1, 1","corner-radius":"auto","bounds-expansion":0,"background-gradient-direction":"to-bottom","background-gradient-stop-colors":"#999","background-gradient-stop-positions":"0%",ghost:"no","ghost-offset-y":0,"ghost-offset-x":0,"ghost-opacity":0,padding:0,"padding-relative-to":"width",position:"origin","compound-sizing-wrt-labels":"include","min-width":0,"min-width-bias-left":0,"min-width-bias-right":0,"min-height":0,"min-height-bias-top":0,"min-height-bias-bottom":0},{"pie-size":"100%","pie-hole":0,"pie-start-angle":"0deg"},[{name:"pie-{{i}}-background-color",value:"black"},{name:"pie-{{i}}-background-size",value:"0%"},{name:"pie-{{i}}-background-opacity",value:1}].reduce(function(u,l){for(var f=1;f<=et.pieBackgroundN;f++){var c=l.name.replace("{{i}}",f),h=l.value;u[c]=h}return u},{}),{"stripe-size":"100%","stripe-direction":"horizontal"},[{name:"stripe-{{i}}-background-color",value:"black"},{name:"stripe-{{i}}-background-size",value:"0%"},{name:"stripe-{{i}}-background-opacity",value:1}].reduce(function(u,l){for(var f=1;f<=et.stripeBackgroundN;f++){var c=l.name.replace("{{i}}",f),h=l.value;u[c]=h}return u},{}),{"line-style":"solid","line-color":"#999","line-fill":"solid","line-cap":"butt","line-opacity":1,"line-outline-width":0,"line-outline-color":"#000","line-gradient-stop-colors":"#999","line-gradient-stop-positions":"0%","control-point-step-size":40,"control-point-weights":.5,"segment-weights":.5,"segment-distances":20,"segment-radii":15,"radius-type":"arc-radius","taxi-turn":"50%","taxi-radius":15,"taxi-turn-min-distance":10,"taxi-direction":"auto","edge-distances":"intersection","curve-style":"haystack","haystack-radius":0,"arrow-scale":1,"loop-direction":"-45deg","loop-sweep":"-90deg","source-distance-from-node":0,"target-distance-from-node":0,"source-endpoint":"outside-to-node","target-endpoint":"outside-to-node","line-dash-pattern":[6,3],"line-dash-offset":0},[{name:"arrow-shape",value:"none"},{name:"arrow-color",value:"#999"},{name:"arrow-fill",value:"filled"},{name:"arrow-width",value:1}].reduce(function(u,l){return et.arrowPrefixes.forEach(function(f){var c=f+"-"+l.name,h=l.value;u[c]=h}),u},{})),r={},n=0;n<this.properties.length;n++){var a=this.properties[n];if(!a.pointsTo){var i=a.name,s=e[i],o=this.parse(i,s);r[i]=o}}return t.defaultProperties=r,t.defaultProperties};et.addDefaultStylesheet=function(){this.selector(":parent").css({shape:"rectangle",padding:10,"background-color":"#eee","border-color":"#ccc","border-width":1}).selector("edge").css({width:3}).selector(":loop").css({"curve-style":"bezier"}).selector("edge:compound").css({"curve-style":"bezier","source-endpoint":"outside-to-line","target-endpoint":"outside-to-line"}).selector(":selected").css({"background-color":"#0169D9","line-color":"#0169D9","source-arrow-color":"#0169D9","target-arrow-color":"#0169D9","mid-source-arrow-color":"#0169D9","mid-target-arrow-color":"#0169D9"}).selector(":parent:selected").css({"background-color":"#CCE1F9","border-color":"#aec8e5"}).selector(":active").css({"overlay-color":"black","overlay-padding":10,"overlay-opacity":.25}),this.defaultLength=this.length};var os={};os.parse=function(t,e,r,n){var a=this;if(Ke(e))return a.parseImplWarn(t,e,r,n);var i=n==="mapping"||n===!0||n===!1||n==null?"dontcare":n,s=r?"t":"f",o=""+e,u=Rx(t,o,s,i),l=a.propCache=a.propCache||[],f;return(f=l[u])||(f=l[u]=a.parseImplWarn(t,e,r,n)),(r||n==="mapping")&&(f=Jt(f),f&&(f.value=Jt(f.value))),f};os.parseImplWarn=function(t,e,r,n){var a=this.parseImpl(t,e,r,n);return!a&&e!=null&&Ge("The style property `".concat(t,": ").concat(e,"` is invalid")),a&&(a.name==="width"||a.name==="height")&&e==="label"&&Ge("The style value of `label` is deprecated for `"+a.name+"`"),a};os.parseImpl=function(t,e,r,n){var a=this;t=wv(t);var i=a.properties[t],s=e,o=a.types;if(!i||e===void 0)return null;i.alias&&(i=i.pointsTo,t=i.name);var u=we(e);u&&(e=e.trim());var l=i.type;if(!l)return null;if(r&&(e===""||e===null))return{name:t,value:e,bypass:!0,deleteBypass:!0};if(Ke(e))return{name:t,value:e,strValue:"fn",mapped:o.fn,bypass:r};var f,c;if(!(!u||n||e.length<7||e[1]!=="a")){if(e.length>=7&&e[0]==="d"&&(f=new RegExp(o.data.regex).exec(e))){if(r)return!1;var h=o.data;return{name:t,value:f,strValue:""+e,mapped:h,field:f[1],bypass:r}}else if(e.length>=10&&e[0]==="m"&&(c=new RegExp(o.mapData.regex).exec(e))){if(r||l.multiple)return!1;var d=o.mapData;if(!(l.color||l.number))return!1;var v=this.parse(t,c[4]);if(!v||v.mapped)return!1;var p=this.parse(t,c[5]);if(!p||p.mapped)return!1;if(v.pfValue===p.pfValue||v.strValue===p.strValue)return Ge("`"+t+": "+e+"` is not a valid mapper because the output range is zero; converting to `"+t+": "+v.strValue+"`"),this.parse(t,v.strValue);if(l.color){var g=v.value,y=p.value,m=g[0]===y[0]&&g[1]===y[1]&&g[2]===y[2]&&(g[3]===y[3]||(g[3]==null||g[3]===1)&&(y[3]==null||y[3]===1));if(m)return!1}return{name:t,value:c,strValue:""+e,mapped:d,field:c[1],fieldMin:parseFloat(c[2]),fieldMax:parseFloat(c[3]),valueMin:v.value,valueMax:p.value,bypass:r}}}if(l.multiple&&n!=="multiple"){var b;if(u?b=e.split(/\s+/):$e(e)?b=e:b=[e],l.evenMultiple&&b.length%2!==0)return null;for(var E=[],x=[],S=[],w="",T=!1,C=0;C<b.length;C++){var A=a.parse(t,b[C],r,"multiple");T=T||we(A.value),E.push(A.value),S.push(A.pfValue!=null?A.pfValue:A.value),x.push(A.units),w+=(C>0?" ":"")+A.strValue}return l.validate&&!l.validate(E,x)?null:l.singleEnum&&T?E.length===1&&we(E[0])?{name:t,value:E[0],strValue:E[0],bypass:r}:null:{name:t,value:E,pfValue:S,strValue:w,bypass:r,units:x}}var R=function(){for(var K=0;K<l.enums.length;K++){var V=l.enums[K];if(V===e)return{name:t,value:e,strValue:""+e,bypass:r}}return null};if(l.number){var I,D="px";if(l.units&&(I=l.units),l.implicitUnits&&(D=l.implicitUnits),!l.unitless)if(u){var _="px|em"+(l.allowPercent?"|\\%":"");I&&(_=I);var M=e.match("^("+st+")("+_+")?$");M&&(e=M[1],I=M[2]||D)}else(!I||l.implicitUnits)&&(I=D);if(e=parseFloat(e),isNaN(e)&&l.enums===void 0)return null;if(isNaN(e)&&l.enums!==void 0)return e=s,R();if(l.integer&&!PI(e)||l.min!==void 0&&(e<l.min||l.strictMin&&e===l.min)||l.max!==void 0&&(e>l.max||l.strictMax&&e===l.max))return null;var k={name:t,value:e,strValue:""+e+(I||""),units:I,bypass:r};return l.unitless||I!=="px"&&I!=="em"?k.pfValue=e:k.pfValue=I==="px"||!I?e:this.getEmSizeInPixels()*e,(I==="ms"||I==="s")&&(k.pfValue=I==="ms"?e:1e3*e),(I==="deg"||I==="rad")&&(k.pfValue=I==="rad"?e:UD(e)),I==="%"&&(k.pfValue=e/100),k}else if(l.propList){var O=[],P=""+e;if(P!=="none"){for(var q=P.split(/\s*,\s*|\s+/),G=0;G<q.length;G++){var F=q[G].trim();a.properties[F]?O.push(F):Ge("`"+F+"` is not a valid property name")}if(O.length===0)return null}return{name:t,value:O,strValue:O.length===0?"none":O.join(" "),bypass:r}}else if(l.color){var z=wx(e);return z?{name:t,value:z,pfValue:z,strValue:"rgb("+z[0]+","+z[1]+","+z[2]+")",bypass:r}:null}else if(l.regex||l.regexes){if(l.enums){var W=R();if(W)return W}for(var N=l.regexes?l.regexes:[l.regex],B=0;B<N.length;B++){var $=new RegExp(N[B]),H=$.exec(e);if(H)return{name:t,value:l.singleRegexMatchValue?H[1]:H,strValue:""+e,bypass:r}}return null}else return l.string?{name:t,value:""+e,strValue:""+e,bypass:r}:l.enums?R():null};var ct=function(e){if(!(this instanceof ct))return new ct(e);if(!bv(e)){We("A style must have a core reference");return}this._private={cy:e,coreStyle:{}},this.length=0,this.resetToDefault()},wt=ct.prototype;wt.instanceString=function(){return"style"};wt.clear=function(){for(var t=this._private,e=t.cy,r=e.elements(),n=0;n<this.length;n++)this[n]=void 0;return this.length=0,t.contextStyles={},t.propDiffs={},this.cleanElements(r,!0),r.forEach(function(a){var i=a[0]._private;i.styleDirty=!0,i.appliedInitStyle=!1}),this};wt.resetToDefault=function(){return this.clear(),this.addDefaultStylesheet(),this};wt.core=function(t){return this._private.coreStyle[t]||this.getDefaultProperty(t)};wt.selector=function(t){var e=t==="core"?null:new Nr(t),r=this.length++;return this[r]={selector:e,properties:[],mappedProperties:[],index:r},this};wt.css=function(){var t=this,e=arguments;if(e.length===1)for(var r=e[0],n=0;n<t.properties.length;n++){var a=t.properties[n],i=r[a.name];i===void 0&&(i=r[Wi(a.name)]),i!==void 0&&this.cssRule(a.name,i)}else e.length===2&&this.cssRule(e[0],e[1]);return this};wt.style=wt.css;wt.cssRule=function(t,e){var r=this.parse(t,e);if(r){var n=this.length-1;this[n].properties.push(r),this[n].properties[r.name]=r,r.name.match(/pie-(\d+)-background-size/)&&r.value&&(this._private.hasPie=!0),r.name.match(/stripe-(\d+)-background-size/)&&r.value&&(this._private.hasStripe=!0),r.mapped&&this[n].mappedProperties.push(r);var a=!this[n].selector;a&&(this._private.coreStyle[r.name]=r)}return this};wt.append=function(t){return yx(t)?t.appendToStyle(this):$e(t)?this.appendFromJson(t):we(t)&&this.appendFromString(t),this};ct.fromJson=function(t,e){var r=new ct(t);return r.fromJson(e),r};ct.fromString=function(t,e){return new ct(t).fromString(e)};[ht,qa,kv,er,ss,Nv,et,os].forEach(function(t){xe(wt,t)});ct.types=wt.types;ct.properties=wt.properties;ct.propertyGroups=wt.propertyGroups;ct.propertyGroupNames=wt.propertyGroupNames;ct.propertyGroupKeys=wt.propertyGroupKeys;var XM={style:function(e){if(e){var r=this.setStyle(e);r.update()}return this._private.style},setStyle:function(e){var r=this._private;return yx(e)?r.style=e.generateStyle(this):$e(e)?r.style=ct.fromJson(this,e):we(e)?r.style=ct.fromString(this,e):r.style=ct(this),r.style},updateStyle:function(){this.mutableElements().updateStyle()}},KM="single",fn={autolock:function(e){if(e!==void 0)this._private.autolock=!!e;else return this._private.autolock;return this},autoungrabify:function(e){if(e!==void 0)this._private.autoungrabify=!!e;else return this._private.autoungrabify;return this},autounselectify:function(e){if(e!==void 0)this._private.autounselectify=!!e;else return this._private.autounselectify;return this},selectionType:function(e){var r=this._private;if(r.selectionType==null&&(r.selectionType=KM),e!==void 0)(e==="additive"||e==="single")&&(r.selectionType=e);else return r.selectionType;return this},panningEnabled:function(e){if(e!==void 0)this._private.panningEnabled=!!e;else return this._private.panningEnabled;return this},userPanningEnabled:function(e){if(e!==void 0)this._private.userPanningEnabled=!!e;else return this._private.userPanningEnabled;return this},zoomingEnabled:function(e){if(e!==void 0)this._private.zoomingEnabled=!!e;else return this._private.zoomingEnabled;return this},userZoomingEnabled:function(e){if(e!==void 0)this._private.userZoomingEnabled=!!e;else return this._private.userZoomingEnabled;return this},boxSelectionEnabled:function(e){if(e!==void 0)this._private.boxSelectionEnabled=!!e;else return this._private.boxSelectionEnabled;return this},pan:function(){var e=arguments,r=this._private.pan,n,a,i,s,o;switch(e.length){case 0:return r;case 1:if(we(e[0]))return n=e[0],r[n];if(Be(e[0])){if(!this._private.panningEnabled)return this;i=e[0],s=i.x,o=i.y,ie(s)&&(r.x=s),ie(o)&&(r.y=o),this.emit("pan viewport")}break;case 2:if(!this._private.panningEnabled)return this;n=e[0],a=e[1],(n==="x"||n==="y")&&ie(a)&&(r[n]=a),this.emit("pan viewport");break}return this.notify("viewport"),this},panBy:function(e,r){var n=arguments,a=this._private.pan,i,s,o,u,l;if(!this._private.panningEnabled)return this;switch(n.length){case 1:Be(e)&&(o=n[0],u=o.x,l=o.y,ie(u)&&(a.x+=u),ie(l)&&(a.y+=l),this.emit("pan viewport"));break;case 2:i=e,s=r,(i==="x"||i==="y")&&ie(s)&&(a[i]+=s),this.emit("pan viewport");break}return this.notify("viewport"),this},gc:function(){this.notify("gc")},fit:function(e,r){var n=this.getFitViewport(e,r);if(n){var a=this._private;a.zoom=n.zoom,a.pan=n.pan,this.emit("pan zoom viewport"),this.notify("viewport")}return this},getFitViewport:function(e,r){if(ie(e)&&r===void 0&&(r=e,e=void 0),!(!this._private.panningEnabled||!this._private.zoomingEnabled)){var n;if(we(e)){var a=e;e=this.$(a)}else if(BI(e)){var i=e;n={x1:i.x1,y1:i.y1,x2:i.x2,y2:i.y2},n.w=n.x2-n.x1,n.h=n.y2-n.y1}else Pt(e)||(e=this.mutableElements());if(!(Pt(e)&&e.empty())){n=n||e.boundingBox();var s=this.width(),o=this.height(),u;if(r=ie(r)?r:0,!isNaN(s)&&!isNaN(o)&&s>0&&o>0&&!isNaN(n.w)&&!isNaN(n.h)&&n.w>0&&n.h>0){u=Math.min((s-2*r)/n.w,(o-2*r)/n.h),u=u>this._private.maxZoom?this._private.maxZoom:u,u=u<this._private.minZoom?this._private.minZoom:u;var l={x:(s-u*(n.x1+n.x2))/2,y:(o-u*(n.y1+n.y2))/2};return{zoom:u,pan:l}}}}},zoomRange:function(e,r){var n=this._private;if(r==null){var a=e;e=a.min,r=a.max}return ie(e)&&ie(r)&&e<=r?(n.minZoom=e,n.maxZoom=r):ie(e)&&r===void 0&&e<=n.maxZoom?n.minZoom=e:ie(r)&&e===void 0&&r>=n.minZoom&&(n.maxZoom=r),this},minZoom:function(e){return e===void 0?this._private.minZoom:this.zoomRange({min:e})},maxZoom:function(e){return e===void 0?this._private.maxZoom:this.zoomRange({max:e})},getZoomedViewport:function(e){var r=this._private,n=r.pan,a=r.zoom,i,s,o=!1;if(r.zoomingEnabled||(o=!0),ie(e)?s=e:Be(e)&&(s=e.level,e.position!=null?i=ji(e.position,a,n):e.renderedPosition!=null&&(i=e.renderedPosition),i!=null&&!r.panningEnabled&&(o=!0)),s=s>r.maxZoom?r.maxZoom:s,s=s<r.minZoom?r.minZoom:s,o||!ie(s)||s===a||i!=null&&(!ie(i.x)||!ie(i.y)))return null;if(i!=null){var u=n,l=a,f=s,c={x:-f/l*(i.x-u.x)+i.x,y:-f/l*(i.y-u.y)+i.y};return{zoomed:!0,panned:!0,zoom:f,pan:c}}else return{zoomed:!0,panned:!1,zoom:s,pan:n}},zoom:function(e){if(e===void 0)return this._private.zoom;var r=this.getZoomedViewport(e),n=this._private;return r==null||!r.zoomed?this:(n.zoom=r.zoom,r.panned&&(n.pan.x=r.pan.x,n.pan.y=r.pan.y),this.emit("zoom"+(r.panned?" pan":"")+" viewport"),this.notify("viewport"),this)},viewport:function(e){var r=this._private,n=!0,a=!0,i=[],s=!1,o=!1;if(!e)return this;if(ie(e.zoom)||(n=!1),Be(e.pan)||(a=!1),!n&&!a)return this;if(n){var u=e.zoom;u<r.minZoom||u>r.maxZoom||!r.zoomingEnabled?s=!0:(r.zoom=u,i.push("zoom"))}if(a&&(!s||!e.cancelOnFailedZoom)&&r.panningEnabled){var l=e.pan;ie(l.x)&&(r.pan.x=l.x,o=!1),ie(l.y)&&(r.pan.y=l.y,o=!1),o||i.push("pan")}return i.length>0&&(i.push("viewport"),this.emit(i.join(" ")),this.notify("viewport")),this},center:function(e){var r=this.getCenterPan(e);return r&&(this._private.pan=r,this.emit("pan viewport"),this.notify("viewport")),this},getCenterPan:function(e,r){if(this._private.panningEnabled){if(we(e)){var n=e;e=this.mutableElements().filter(n)}else Pt(e)||(e=this.mutableElements());if(e.length!==0){var a=e.boundingBox(),i=this.width(),s=this.height();r=r===void 0?this._private.zoom:r;var o={x:(i-r*(a.x1+a.x2))/2,y:(s-r*(a.y1+a.y2))/2};return o}}},reset:function(){return!this._private.panningEnabled||!this._private.zoomingEnabled?this:(this.viewport({pan:{x:0,y:0},zoom:1}),this)},invalidateSize:function(){this._private.sizeCache=null},size:function(){var e=this._private,r=e.container,n=this;return e.sizeCache=e.sizeCache||(r?function(){var a=n.window().getComputedStyle(r),i=function(o){return parseFloat(a.getPropertyValue(o))};return{width:r.clientWidth-i("padding-left")-i("padding-right"),height:r.clientHeight-i("padding-top")-i("padding-bottom")}}():{width:1,height:1})},width:function(){return this.size().width},height:function(){return this.size().height},extent:function(){var e=this._private.pan,r=this._private.zoom,n=this.renderedExtent(),a={x1:(n.x1-e.x)/r,x2:(n.x2-e.x)/r,y1:(n.y1-e.y)/r,y2:(n.y2-e.y)/r};return a.w=a.x2-a.x1,a.h=a.y2-a.y1,a},renderedExtent:function(){var e=this.width(),r=this.height();return{x1:0,y1:0,x2:e,y2:r,w:e,h:r}},multiClickDebounceTime:function(e){if(e)this._private.multiClickDebounceTime=e;else return this._private.multiClickDebounceTime;return this}};fn.centre=fn.center;fn.autolockNodes=fn.autolock;fn.autoungrabifyNodes=fn.autoungrabify;var Ra={data:qe.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeData:qe.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),scratch:qe.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:qe.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0})};Ra.attr=Ra.data;Ra.removeAttr=Ra.removeData;var Ia=function(e){var r=this;e=xe({},e);var n=e.container;n&&!Si(n)&&Si(n[0])&&(n=n[0]);var a=n?n._cyreg:null;a=a||{},a&&a.cy&&(a.cy.destroy(),a={});var i=a.readies=a.readies||[];n&&(n._cyreg=a),a.cy=r;var s=it!==void 0&&n!==void 0&&!e.headless,o=e;o.layout=xe({name:s?"grid":"null"},o.layout),o.renderer=xe({name:s?"canvas":"null"},o.renderer);var u=function(v,p,g){return p!==void 0?p:g!==void 0?g:v},l=this._private={container:n,ready:!1,options:o,elements:new gt(this),listeners:[],aniEles:new gt(this),data:o.data||{},scratch:{},layout:null,renderer:null,destroyed:!1,notificationsEnabled:!0,minZoom:1e-50,maxZoom:1e50,zoomingEnabled:u(!0,o.zoomingEnabled),userZoomingEnabled:u(!0,o.userZoomingEnabled),panningEnabled:u(!0,o.panningEnabled),userPanningEnabled:u(!0,o.userPanningEnabled),boxSelectionEnabled:u(!0,o.boxSelectionEnabled),autolock:u(!1,o.autolock,o.autolockNodes),autoungrabify:u(!1,o.autoungrabify,o.autoungrabifyNodes),autounselectify:u(!1,o.autounselectify),styleEnabled:o.styleEnabled===void 0?s:o.styleEnabled,zoom:ie(o.zoom)?o.zoom:1,pan:{x:Be(o.pan)&&ie(o.pan.x)?o.pan.x:0,y:Be(o.pan)&&ie(o.pan.y)?o.pan.y:0},animation:{current:[],queue:[]},hasCompoundNodes:!1,multiClickDebounceTime:u(250,o.multiClickDebounceTime)};this.createEmitter(),this.selectionType(o.selectionType),this.zoomRange({min:o.minZoom,max:o.maxZoom});var f=function(v,p){var g=v.some(FI);if(g)return $n.all(v).then(p);p(v)};l.styleEnabled&&r.setStyle([]);var c=xe({},o,o.renderer);r.initRenderer(c);var h=function(v,p,g){r.notifications(!1);var y=r.mutableElements();y.length>0&&y.remove(),v!=null&&(Be(v)||$e(v))&&r.add(v),r.one("layoutready",function(b){r.notifications(!0),r.emit(b),r.one("load",p),r.emitAndNotify("load")}).one("layoutstop",function(){r.one("done",g),r.emit("done")});var m=xe({},r._private.options.layout);m.eles=r.elements(),r.layout(m).run()};f([o.style,o.elements],function(d){var v=d[0],p=d[1];l.styleEnabled&&r.style().append(v),h(p,function(){r.startAnimationLoop(),l.ready=!0,Ke(o.ready)&&r.on("ready",o.ready);for(var g=0;g<i.length;g++){var y=i[g];r.on("ready",y)}a&&(a.readies=[]),r.emit("ready")},o.done)})},Mi=Ia.prototype;xe(Mi,{instanceString:function(){return"core"},isReady:function(){return this._private.ready},destroyed:function(){return this._private.destroyed},ready:function(e){return this.isReady()?this.emitter().emit("ready",[],e):this.on("ready",e),this},destroy:function(){var e=this;if(!e.destroyed())return e.stopAnimationLoop(),e.destroyRenderer(),this.emit("destroy"),e._private.destroyed=!0,e},hasElementWithId:function(e){return this._private.elements.hasElementWithId(e)},getElementById:function(e){return this._private.elements.getElementById(e)},hasCompoundNodes:function(){return this._private.hasCompoundNodes},headless:function(){return this._private.renderer.isHeadless()},styleEnabled:function(){return this._private.styleEnabled},addToPool:function(e){return this._private.elements.merge(e),this},removeFromPool:function(e){return this._private.elements.unmerge(e),this},container:function(){return this._private.container||null},window:function(){var e=this._private.container;if(e==null)return it;var r=this._private.container.ownerDocument;return r===void 0||r==null?it:r.defaultView||it},mount:function(e){if(e!=null){var r=this,n=r._private,a=n.options;return!Si(e)&&Si(e[0])&&(e=e[0]),r.stopAnimationLoop(),r.destroyRenderer(),n.container=e,n.styleEnabled=!0,r.invalidateSize(),r.initRenderer(xe({},a,a.renderer,{name:a.renderer.name==="null"?"canvas":a.renderer.name})),r.startAnimationLoop(),r.style(a.style),r.emit("mount"),r}},unmount:function(){var e=this;return e.stopAnimationLoop(),e.destroyRenderer(),e.initRenderer({name:"null"}),e.emit("unmount"),e},options:function(){return Jt(this._private.options)},json:function(e){var r=this,n=r._private,a=r.mutableElements(),i=function(E){return r.getElementById(E.id())};if(Be(e)){if(r.startBatch(),e.elements){var s={},o=function(E,x){for(var S=[],w=[],T=0;T<E.length;T++){var C=E[T];if(!C.data.id){Ge("cy.json() cannot handle elements without an ID attribute");continue}var A=""+C.data.id,R=r.getElementById(A);s[A]=!0,R.length!==0?w.push({ele:R,json:C}):(x&&(C.group=x),S.push(C))}r.add(S);for(var I=0;I<w.length;I++){var D=w[I],_=D.ele,M=D.json;_.json(M)}};if($e(e.elements))o(e.elements);else for(var u=["nodes","edges"],l=0;l<u.length;l++){var f=u[l],c=e.elements[f];$e(c)&&o(c,f)}var h=r.collection();a.filter(function(b){return!s[b.id()]}).forEach(function(b){b.isParent()?h.merge(b):b.remove()}),h.forEach(function(b){return b.children().move({parent:null})}),h.forEach(function(b){return i(b).remove()})}e.style&&r.style(e.style),e.zoom!=null&&e.zoom!==n.zoom&&r.zoom(e.zoom),e.pan&&(e.pan.x!==n.pan.x||e.pan.y!==n.pan.y)&&r.pan(e.pan),e.data&&r.data(e.data);for(var d=["minZoom","maxZoom","zoomingEnabled","userZoomingEnabled","panningEnabled","userPanningEnabled","boxSelectionEnabled","autolock","autoungrabify","autounselectify","multiClickDebounceTime"],v=0;v<d.length;v++){var p=d[v];e[p]!=null&&r[p](e[p])}return r.endBatch(),this}else{var g=!!e,y={};g?y.elements=this.elements().map(function(b){return b.json()}):(y.elements={},a.forEach(function(b){var E=b.group();y.elements[E]||(y.elements[E]=[]),y.elements[E].push(b.json())})),this._private.styleEnabled&&(y.style=r.style().json()),y.data=Jt(r.data());var m=n.options;return y.zoomingEnabled=n.zoomingEnabled,y.userZoomingEnabled=n.userZoomingEnabled,y.zoom=n.zoom,y.minZoom=n.minZoom,y.maxZoom=n.maxZoom,y.panningEnabled=n.panningEnabled,y.userPanningEnabled=n.userPanningEnabled,y.pan=Jt(n.pan),y.boxSelectionEnabled=n.boxSelectionEnabled,y.renderer=Jt(m.renderer),y.hideEdgesOnViewport=m.hideEdgesOnViewport,y.textureOnViewport=m.textureOnViewport,y.wheelSensitivity=m.wheelSensitivity,y.motionBlur=m.motionBlur,y.multiClickDebounceTime=m.multiClickDebounceTime,y}}});Mi.$id=Mi.getElementById;[FM,VM,yT,jd,gi,HM,Zd,pi,XM,fn,Ra].forEach(function(t){xe(Mi,t)});var jM={fit:!0,directed:!1,direction:"downward",padding:30,circle:!1,grid:!1,spacingFactor:1.75,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,roots:void 0,depthSort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,r){return!0},ready:void 0,stop:void 0,transform:function(e,r){return r}},ZM={maximal:!1,acyclic:!1},Tn=function(e){return e.scratch("breadthfirst")},Oy=function(e,r){return e.scratch("breadthfirst",r)};function mT(t){this.options=xe({},jM,ZM,t)}mT.prototype.run=function(){var t=this.options,e=t.cy,r=t.eles,n=r.nodes().filter(function(ge){return ge.isChildless()}),a=r,i=t.directed,s=t.acyclic||t.maximal||t.maximalAdjustments>0,o=!!t.boundingBox,u=St(o?t.boundingBox:structuredClone(e.extent())),l;if(Pt(t.roots))l=t.roots;else if($e(t.roots)){for(var f=[],c=0;c<t.roots.length;c++){var h=t.roots[c],d=e.getElementById(h);f.push(d)}l=e.collection(f)}else if(we(t.roots))l=e.$(t.roots);else if(i)l=n.roots();else{var v=r.components();l=e.collection();for(var p=function(){var oe=v[g],de=oe.maxDegree(!1),fe=oe.filter(function(ve){return ve.degree(!1)===de});l=l.add(fe)},g=0;g<v.length;g++)p()}var y=[],m={},b=function(oe,de){y[de]==null&&(y[de]=[]);var fe=y[de].length;y[de].push(oe),Oy(oe,{index:fe,depth:de})},E=function(oe,de){var fe=Tn(oe),ve=fe.depth,pe=fe.index;y[ve][pe]=null,oe.isChildless()&&b(oe,de)};a.bfs({roots:l,directed:t.directed,visit:function(oe,de,fe,ve,pe){var Ce=oe[0],Me=Ce.id();Ce.isChildless()&&b(Ce,pe),m[Me]=!0}});for(var x=[],S=0;S<n.length;S++){var w=n[S];m[w.id()]||x.push(w)}var T=function(oe){for(var de=y[oe],fe=0;fe<de.length;fe++){var ve=de[fe];if(ve==null){de.splice(fe,1),fe--;continue}Oy(ve,{depth:oe,index:fe})}},C=function(oe,de){for(var fe=Tn(oe),ve=oe.incomers().filter(function(Te){return Te.isNode()&&r.has(Te)}),pe=-1,Ce=oe.id(),Me=0;Me<ve.length;Me++){var Pe=ve[Me],_e=Tn(Pe);pe=Math.max(pe,_e.depth)}if(fe.depth<=pe){if(!t.acyclic&&de[Ce])return null;var ke=pe+1;return E(oe,ke),de[Ce]=ke,!0}return!1};if(i&&s){var A=[],R={},I=function(oe){return A.push(oe)},D=function(){return A.shift()};for(n.forEach(function(ge){return A.push(ge)});A.length>0;){var _=D(),M=C(_,R);if(M)_.outgoers().filter(function(ge){return ge.isNode()&&r.has(ge)}).forEach(I);else if(M===null){Ge("Detected double maximal shift for node `"+_.id()+"`.  Bailing maximal adjustment due to cycle.  Use `options.maximal: true` only on DAGs.");break}}}var k=0;if(t.avoidOverlap)for(var O=0;O<n.length;O++){var P=n[O],q=P.layoutDimensions(t),G=q.w,F=q.h;k=Math.max(k,G,F)}var z={},W=function(oe){if(z[oe.id()])return z[oe.id()];for(var de=Tn(oe).depth,fe=oe.neighborhood(),ve=0,pe=0,Ce=0;Ce<fe.length;Ce++){var Me=fe[Ce];if(!(Me.isEdge()||Me.isParent()||!n.has(Me))){var Pe=Tn(Me);if(Pe!=null){var _e=Pe.index,ke=Pe.depth;if(!(_e==null||ke==null)){var Te=y[ke].length;ke<de&&(ve+=_e/Te,pe++)}}}}return pe=Math.max(1,pe),ve=ve/pe,pe===0&&(ve=0),z[oe.id()]=ve,ve},N=function(oe,de){var fe=W(oe),ve=W(de),pe=fe-ve;return pe===0?bx(oe.id(),de.id()):pe};t.depthSort!==void 0&&(N=t.depthSort);for(var B=y.length,$=0;$<B;$++)y[$].sort(N),T($);for(var H=[],te=0;te<x.length;te++)H.push(x[te]);var K=function(){for(var oe=0;oe<B;oe++)T(oe)};H.length&&(y.unshift(H),B=y.length,K());for(var V=0,U=0;U<B;U++)V=Math.max(y[U].length,V);var X={x:u.x1+u.w/2,y:u.y1+u.h/2},j=n.reduce(function(ge,oe){return function(de){return{w:ge.w===-1?de.w:(ge.w+de.w)/2,h:ge.h===-1?de.h:(ge.h+de.h)/2}}(oe.boundingBox({includeLabels:t.nodeDimensionsIncludeLabels}))},{w:-1,h:-1}),ne=Math.max(B===1?0:o?(u.h-t.padding*2-j.h)/(B-1):(u.h-t.padding*2-j.h)/(B+1),k),ae=y.reduce(function(ge,oe){return Math.max(ge,oe.length)},0),Se=function(oe){var de=Tn(oe),fe=de.depth,ve=de.index;if(t.circle){var pe=Math.min(u.w/2/B,u.h/2/B);pe=Math.max(pe,k);var Ce=pe*fe+pe-(B>0&&y[0].length<=3?pe/2:0),Me=2*Math.PI/y[fe].length*ve;return fe===0&&y[0].length===1&&(Ce=1),{x:X.x+Ce*Math.cos(Me),y:X.y+Ce*Math.sin(Me)}}else{var Pe=y[fe].length,_e=Math.max(Pe===1?0:o?(u.w-t.padding*2-j.w)/((t.grid?ae:Pe)-1):(u.w-t.padding*2-j.w)/((t.grid?ae:Pe)+1),k),ke={x:X.x+(ve+1-(Pe+1)/2)*_e,y:X.y+(fe+1-(B+1)/2)*ne};return ke}},se={downward:0,leftward:90,upward:180,rightward:-90};Object.keys(se).indexOf(t.direction)===-1&&We("Invalid direction '".concat(t.direction,"' specified for breadthfirst layout. Valid values are: ").concat(Object.keys(se).join(", ")));var be=function(oe){return dD(Se(oe),u,se[t.direction])};return r.nodes().layoutPositions(this,t,be),this};var QM={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,radius:void 0,startAngle:3/2*Math.PI,sweep:void 0,clockwise:!0,sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,r){return!0},ready:void 0,stop:void 0,transform:function(e,r){return r}};function bT(t){this.options=xe({},QM,t)}bT.prototype.run=function(){var t=this.options,e=t,r=t.cy,n=e.eles,a=e.counterclockwise!==void 0?!e.counterclockwise:e.clockwise,i=n.nodes().not(":parent");e.sort&&(i=i.sort(e.sort));for(var s=St(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()}),o={x:s.x1+s.w/2,y:s.y1+s.h/2},u=e.sweep===void 0?2*Math.PI-2*Math.PI/i.length:e.sweep,l=u/Math.max(1,i.length-1),f,c=0,h=0;h<i.length;h++){var d=i[h],v=d.layoutDimensions(e),p=v.w,g=v.h;c=Math.max(c,p,g)}if(ie(e.radius)?f=e.radius:i.length<=1?f=0:f=Math.min(s.h,s.w)/2-c,i.length>1&&e.avoidOverlap){c*=1.75;var y=Math.cos(l)-Math.cos(0),m=Math.sin(l)-Math.sin(0),b=Math.sqrt(c*c/(y*y+m*m));f=Math.max(b,f)}var E=function(S,w){var T=e.startAngle+w*l*(a?1:-1),C=f*Math.cos(T),A=f*Math.sin(T),R={x:o.x+C,y:o.y+A};return R};return n.nodes().layoutPositions(this,e,E),this};var JM={fit:!0,padding:30,startAngle:3/2*Math.PI,sweep:void 0,clockwise:!0,equidistant:!1,minNodeSpacing:10,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,height:void 0,width:void 0,spacingFactor:void 0,concentric:function(e){return e.degree()},levelWidth:function(e){return e.maxDegree()/4},animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,r){return!0},ready:void 0,stop:void 0,transform:function(e,r){return r}};function wT(t){this.options=xe({},JM,t)}wT.prototype.run=function(){for(var t=this.options,e=t,r=e.counterclockwise!==void 0?!e.counterclockwise:e.clockwise,n=t.cy,a=e.eles,i=a.nodes().not(":parent"),s=St(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()}),o={x:s.x1+s.w/2,y:s.y1+s.h/2},u=[],l=0,f=0;f<i.length;f++){var c=i[f],h=void 0;h=e.concentric(c),u.push({value:h,node:c}),c._private.scratch.concentric=h}i.updateStyle();for(var d=0;d<i.length;d++){var v=i[d],p=v.layoutDimensions(e);l=Math.max(l,p.w,p.h)}u.sort(function(ne,ae){return ae.value-ne.value});for(var g=e.levelWidth(i),y=[[]],m=y[0],b=0;b<u.length;b++){var E=u[b];if(m.length>0){var x=Math.abs(m[0].value-E.value);x>=g&&(m=[],y.push(m))}m.push(E)}var S=l+e.minNodeSpacing;if(!e.avoidOverlap){var w=y.length>0&&y[0].length>1,T=Math.min(s.w,s.h)/2-S,C=T/(y.length+w?1:0);S=Math.min(S,C)}for(var A=0,R=0;R<y.length;R++){var I=y[R],D=e.sweep===void 0?2*Math.PI-2*Math.PI/I.length:e.sweep,_=I.dTheta=D/Math.max(1,I.length-1);if(I.length>1&&e.avoidOverlap){var M=Math.cos(_)-Math.cos(0),k=Math.sin(_)-Math.sin(0),O=Math.sqrt(S*S/(M*M+k*k));A=Math.max(O,A)}I.r=A,A+=S}if(e.equidistant){for(var P=0,q=0,G=0;G<y.length;G++){var F=y[G],z=F.r-q;P=Math.max(P,z)}q=0;for(var W=0;W<y.length;W++){var N=y[W];W===0&&(q=N.r),N.r=q,q+=P}}for(var B={},$=0;$<y.length;$++)for(var H=y[$],te=H.dTheta,K=H.r,V=0;V<H.length;V++){var U=H[V],X=e.startAngle+(r?1:-1)*te*V,j={x:o.x+K*Math.cos(X),y:o.y+K*Math.sin(X)};B[U.node.id()]=j}return a.nodes().layoutPositions(this,e,function(ne){var ae=ne.id();return B[ae]}),this};var iu,eO={ready:function(){},stop:function(){},animate:!0,animationEasing:void 0,animationDuration:void 0,animateFilter:function(e,r){return!0},animationThreshold:250,refresh:20,fit:!0,padding:30,boundingBox:void 0,nodeDimensionsIncludeLabels:!1,randomize:!1,componentSpacing:40,nodeRepulsion:function(e){return 2048},nodeOverlap:4,idealEdgeLength:function(e){return 32},edgeElasticity:function(e){return 32},nestingFactor:1.2,gravity:1,numIter:1e3,initialTemp:1e3,coolingFactor:.99,minTemp:1};function us(t){this.options=xe({},eO,t),this.options.layout=this;var e=this.options.eles.nodes(),r=this.options.eles.edges(),n=r.filter(function(a){var i=a.source().data("id"),s=a.target().data("id"),o=e.some(function(l){return l.data("id")===i}),u=e.some(function(l){return l.data("id")===s});return!o||!u});this.options.eles=this.options.eles.not(n)}us.prototype.run=function(){var t=this.options,e=t.cy,r=this;r.stopped=!1,(t.animate===!0||t.animate===!1)&&r.emit({type:"layoutstart",layout:r}),t.debug===!0?iu=!0:iu=!1;var n=tO(e,r,t);iu&&nO(n),t.randomize&&aO(n);var a=fr(),i=function(){iO(n,e,t),t.fit===!0&&e.fit(t.padding)},s=function(h){return!(r.stopped||h>=t.numIter||(sO(n,t),n.temperature=n.temperature*t.coolingFactor,n.temperature<t.minTemp))},o=function(){if(t.animate===!0||t.animate===!1)i(),r.one("layoutstop",t.stop),r.emit({type:"layoutstop",layout:r});else{var h=t.eles.nodes(),d=xT(n,t,h);h.layoutPositions(r,t,d)}},u=0,l=!0;if(t.animate===!0){var f=function(){for(var h=0;l&&h<t.refresh;)l=s(u),u++,h++;if(!l)ky(n,t),o();else{var d=fr();d-a>=t.animationThreshold&&i(),Ai(f)}};f()}else{for(;l;)l=s(u),u++;ky(n,t),o()}return this};us.prototype.stop=function(){return this.stopped=!0,this.thread&&this.thread.stop(),this.emit("layoutstop"),this};us.prototype.destroy=function(){return this.thread&&this.thread.stop(),this};var tO=function(e,r,n){for(var a=n.eles.edges(),i=n.eles.nodes(),s=St(n.boundingBox?n.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()}),o={isCompound:e.hasCompoundNodes(),layoutNodes:[],idToIndex:{},nodeSize:i.size(),graphSet:[],indexToGraph:[],layoutEdges:[],edgeSize:a.size(),temperature:n.initialTemp,clientWidth:s.w,clientHeight:s.h,boundingBox:s},u=n.eles.components(),l={},f=0;f<u.length;f++)for(var c=u[f],h=0;h<c.length;h++){var d=c[h];l[d.id()]=f}for(var f=0;f<o.nodeSize;f++){var v=i[f],p=v.layoutDimensions(n),g={};g.isLocked=v.locked(),g.id=v.data("id"),g.parentId=v.data("parent"),g.cmptId=l[v.id()],g.children=[],g.positionX=v.position("x"),g.positionY=v.position("y"),g.offsetX=0,g.offsetY=0,g.height=p.w,g.width=p.h,g.maxX=g.positionX+g.width/2,g.minX=g.positionX-g.width/2,g.maxY=g.positionY+g.height/2,g.minY=g.positionY-g.height/2,g.padLeft=parseFloat(v.style("padding")),g.padRight=parseFloat(v.style("padding")),g.padTop=parseFloat(v.style("padding")),g.padBottom=parseFloat(v.style("padding")),g.nodeRepulsion=Ke(n.nodeRepulsion)?n.nodeRepulsion(v):n.nodeRepulsion,o.layoutNodes.push(g),o.idToIndex[g.id]=f}for(var y=[],m=0,b=-1,E=[],f=0;f<o.nodeSize;f++){var v=o.layoutNodes[f],x=v.parentId;x!=null?o.layoutNodes[o.idToIndex[x]].children.push(v.id):(y[++b]=v.id,E.push(v.id))}for(o.graphSet.push(E);m<=b;){var S=y[m++],w=o.idToIndex[S],d=o.layoutNodes[w],T=d.children;if(T.length>0){o.graphSet.push(T);for(var f=0;f<T.length;f++)y[++b]=T[f]}}for(var f=0;f<o.graphSet.length;f++)for(var C=o.graphSet[f],h=0;h<C.length;h++){var A=o.idToIndex[C[h]];o.indexToGraph[A]=f}for(var f=0;f<o.edgeSize;f++){var R=a[f],I={};I.id=R.data("id"),I.sourceId=R.data("source"),I.targetId=R.data("target");var D=Ke(n.idealEdgeLength)?n.idealEdgeLength(R):n.idealEdgeLength,_=Ke(n.edgeElasticity)?n.edgeElasticity(R):n.edgeElasticity,M=o.idToIndex[I.sourceId],k=o.idToIndex[I.targetId],O=o.indexToGraph[M],P=o.indexToGraph[k];if(O!=P){for(var q=rO(I.sourceId,I.targetId,o),G=o.graphSet[q],F=0,g=o.layoutNodes[M];G.indexOf(g.id)===-1;)g=o.layoutNodes[o.idToIndex[g.parentId]],F++;for(g=o.layoutNodes[k];G.indexOf(g.id)===-1;)g=o.layoutNodes[o.idToIndex[g.parentId]],F++;D*=F*n.nestingFactor}I.idealLength=D,I.elasticity=_,o.layoutEdges.push(I)}return o},rO=function(e,r,n){var a=ET(e,r,0,n);return 2>a.count?0:a.graph},ET=function(e,r,n,a){var i=a.graphSet[n];if(-1<i.indexOf(e)&&-1<i.indexOf(r))return{count:2,graph:n};for(var s=0,o=0;o<i.length;o++){var u=i[o],l=a.idToIndex[u],f=a.layoutNodes[l].children;if(f.length!==0){var c=a.indexToGraph[a.idToIndex[f[0]]],h=ET(e,r,c,a);if(h.count!==0)if(h.count===1){if(s++,s===2)break}else return h}}return{count:s,graph:n}},nO,aO=function(e,r){for(var n=e.clientWidth,a=e.clientHeight,i=0;i<e.nodeSize;i++){var s=e.layoutNodes[i];s.children.length===0&&!s.isLocked&&(s.positionX=Math.random()*n,s.positionY=Math.random()*a)}},xT=function(e,r,n){var a=e.boundingBox,i={x1:1/0,x2:-1/0,y1:1/0,y2:-1/0};return r.boundingBox&&(n.forEach(function(s){var o=e.layoutNodes[e.idToIndex[s.data("id")]];i.x1=Math.min(i.x1,o.positionX),i.x2=Math.max(i.x2,o.positionX),i.y1=Math.min(i.y1,o.positionY),i.y2=Math.max(i.y2,o.positionY)}),i.w=i.x2-i.x1,i.h=i.y2-i.y1),function(s,o){var u=e.layoutNodes[e.idToIndex[s.data("id")]];if(r.boundingBox){var l=i.w===0?.5:(u.positionX-i.x1)/i.w,f=i.h===0?.5:(u.positionY-i.y1)/i.h;return{x:a.x1+l*a.w,y:a.y1+f*a.h}}else return{x:u.positionX,y:u.positionY}}},iO=function(e,r,n){var a=n.layout,i=n.eles.nodes(),s=xT(e,n,i);i.positions(s),e.ready!==!0&&(e.ready=!0,a.one("layoutready",n.ready),a.emit({type:"layoutready",layout:this}))},sO=function(e,r,n){oO(e,r),fO(e),cO(e,r),hO(e),dO(e)},oO=function(e,r){for(var n=0;n<e.graphSet.length;n++)for(var a=e.graphSet[n],i=a.length,s=0;s<i;s++)for(var o=e.layoutNodes[e.idToIndex[a[s]]],u=s+1;u<i;u++){var l=e.layoutNodes[e.idToIndex[a[u]]];uO(o,l,e,r)}},Py=function(e){return-1+2*e*Math.random()},uO=function(e,r,n,a){var i=e.cmptId,s=r.cmptId;if(!(i!==s&&!n.isCompound)){var o=r.positionX-e.positionX,u=r.positionY-e.positionY,l=1;o===0&&u===0&&(o=Py(l),u=Py(l));var f=lO(e,r,o,u);if(f>0)var c=a.nodeOverlap*f,h=Math.sqrt(o*o+u*u),d=c*o/h,v=c*u/h;else var p=Oi(e,o,u),g=Oi(r,-1*o,-1*u),y=g.x-p.x,m=g.y-p.y,b=y*y+m*m,h=Math.sqrt(b),c=(e.nodeRepulsion+r.nodeRepulsion)/b,d=c*y/h,v=c*m/h;e.isLocked||(e.offsetX-=d,e.offsetY-=v),r.isLocked||(r.offsetX+=d,r.offsetY+=v)}},lO=function(e,r,n,a){if(n>0)var i=e.maxX-r.minX;else var i=r.maxX-e.minX;if(a>0)var s=e.maxY-r.minY;else var s=r.maxY-e.minY;return i>=0&&s>=0?Math.sqrt(i*i+s*s):0},Oi=function(e,r,n){var a=e.positionX,i=e.positionY,s=e.height||1,o=e.width||1,u=n/r,l=s/o,f={};return r===0&&0<n||r===0&&0>n?(f.x=a,f.y=i+s/2,f):0<r&&-1*l<=u&&u<=l?(f.x=a+o/2,f.y=i+o*n/2/r,f):0>r&&-1*l<=u&&u<=l?(f.x=a-o/2,f.y=i-o*n/2/r,f):0<n&&(u<=-1*l||u>=l)?(f.x=a+s*r/2/n,f.y=i+s/2,f):(0>n&&(u<=-1*l||u>=l)&&(f.x=a-s*r/2/n,f.y=i-s/2),f)},fO=function(e,r){for(var n=0;n<e.edgeSize;n++){var a=e.layoutEdges[n],i=e.idToIndex[a.sourceId],s=e.layoutNodes[i],o=e.idToIndex[a.targetId],u=e.layoutNodes[o],l=u.positionX-s.positionX,f=u.positionY-s.positionY;if(!(l===0&&f===0)){var c=Oi(s,l,f),h=Oi(u,-1*l,-1*f),d=h.x-c.x,v=h.y-c.y,p=Math.sqrt(d*d+v*v),g=Math.pow(a.idealLength-p,2)/a.elasticity;if(p!==0)var y=g*d/p,m=g*v/p;else var y=0,m=0;s.isLocked||(s.offsetX+=y,s.offsetY+=m),u.isLocked||(u.offsetX-=y,u.offsetY-=m)}}},cO=function(e,r){if(r.gravity!==0)for(var n=1,a=0;a<e.graphSet.length;a++){var i=e.graphSet[a],s=i.length;if(a===0)var o=e.clientHeight/2,u=e.clientWidth/2;else var l=e.layoutNodes[e.idToIndex[i[0]]],f=e.layoutNodes[e.idToIndex[l.parentId]],o=f.positionX,u=f.positionY;for(var c=0;c<s;c++){var h=e.layoutNodes[e.idToIndex[i[c]]];if(!h.isLocked){var d=o-h.positionX,v=u-h.positionY,p=Math.sqrt(d*d+v*v);if(p>n){var g=r.gravity*d/p,y=r.gravity*v/p;h.offsetX+=g,h.offsetY+=y}}}}},hO=function(e,r){var n=[],a=0,i=-1;for(n.push.apply(n,e.graphSet[0]),i+=e.graphSet[0].length;a<=i;){var s=n[a++],o=e.idToIndex[s],u=e.layoutNodes[o],l=u.children;if(0<l.length&&!u.isLocked){for(var f=u.offsetX,c=u.offsetY,h=0;h<l.length;h++){var d=e.layoutNodes[e.idToIndex[l[h]]];d.offsetX+=f,d.offsetY+=c,n[++i]=l[h]}u.offsetX=0,u.offsetY=0}}},dO=function(e,r){for(var n=0;n<e.nodeSize;n++){var a=e.layoutNodes[n];0<a.children.length&&(a.maxX=void 0,a.minX=void 0,a.maxY=void 0,a.minY=void 0)}for(var n=0;n<e.nodeSize;n++){var a=e.layoutNodes[n];if(!(0<a.children.length||a.isLocked)){var i=vO(a.offsetX,a.offsetY,e.temperature);a.positionX+=i.x,a.positionY+=i.y,a.offsetX=0,a.offsetY=0,a.minX=a.positionX-a.width,a.maxX=a.positionX+a.width,a.minY=a.positionY-a.height,a.maxY=a.positionY+a.height,TT(a,e)}}for(var n=0;n<e.nodeSize;n++){var a=e.layoutNodes[n];0<a.children.length&&!a.isLocked&&(a.positionX=(a.maxX+a.minX)/2,a.positionY=(a.maxY+a.minY)/2,a.width=a.maxX-a.minX,a.height=a.maxY-a.minY)}},vO=function(e,r,n){var a=Math.sqrt(e*e+r*r);if(a>n)var i={x:n*e/a,y:n*r/a};else var i={x:e,y:r};return i},TT=function(e,r){var n=e.parentId;if(n!=null){var a=r.layoutNodes[r.idToIndex[n]],i=!1;if((a.maxX==null||e.maxX+a.padRight>a.maxX)&&(a.maxX=e.maxX+a.padRight,i=!0),(a.minX==null||e.minX-a.padLeft<a.minX)&&(a.minX=e.minX-a.padLeft,i=!0),(a.maxY==null||e.maxY+a.padBottom>a.maxY)&&(a.maxY=e.maxY+a.padBottom,i=!0),(a.minY==null||e.minY-a.padTop<a.minY)&&(a.minY=e.minY-a.padTop,i=!0),i)return TT(a,r)}},ky=function(e,r){for(var n=e.layoutNodes,a=[],i=0;i<n.length;i++){var s=n[i],o=s.cmptId,u=a[o]=a[o]||[];u.push(s)}for(var l=0,i=0;i<a.length;i++){var f=a[i];if(f){f.x1=1/0,f.x2=-1/0,f.y1=1/0,f.y2=-1/0;for(var c=0;c<f.length;c++){var h=f[c];f.x1=Math.min(f.x1,h.positionX-h.width/2),f.x2=Math.max(f.x2,h.positionX+h.width/2),f.y1=Math.min(f.y1,h.positionY-h.height/2),f.y2=Math.max(f.y2,h.positionY+h.height/2)}f.w=f.x2-f.x1,f.h=f.y2-f.y1,l+=f.w*f.h}}a.sort(function(m,b){return b.w*b.h-m.w*m.h});for(var d=0,v=0,p=0,g=0,y=Math.sqrt(l)*e.clientWidth/e.clientHeight,i=0;i<a.length;i++){var f=a[i];if(f){for(var c=0;c<f.length;c++){var h=f[c];h.isLocked||(h.positionX+=d-f.x1,h.positionY+=v-f.y1)}d+=f.w+r.componentSpacing,p+=f.w+r.componentSpacing,g=Math.max(g,f.h),p>y&&(v+=g+r.componentSpacing,d=0,p=0,g=0)}}},gO={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,avoidOverlapPadding:10,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,condense:!1,rows:void 0,cols:void 0,position:function(e){},sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,r){return!0},ready:void 0,stop:void 0,transform:function(e,r){return r}};function CT(t){this.options=xe({},gO,t)}CT.prototype.run=function(){var t=this.options,e=t,r=t.cy,n=e.eles,a=n.nodes().not(":parent");e.sort&&(a=a.sort(e.sort));var i=St(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()});if(i.h===0||i.w===0)n.nodes().layoutPositions(this,e,function(W){return{x:i.x1,y:i.y1}});else{var s=a.size(),o=Math.sqrt(s*i.h/i.w),u=Math.round(o),l=Math.round(i.w/i.h*o),f=function(N){if(N==null)return Math.min(u,l);var B=Math.min(u,l);B==u?u=N:l=N},c=function(N){if(N==null)return Math.max(u,l);var B=Math.max(u,l);B==u?u=N:l=N},h=e.rows,d=e.cols!=null?e.cols:e.columns;if(h!=null&&d!=null)u=h,l=d;else if(h!=null&&d==null)u=h,l=Math.ceil(s/u);else if(h==null&&d!=null)l=d,u=Math.ceil(s/l);else if(l*u>s){var v=f(),p=c();(v-1)*p>=s?f(v-1):(p-1)*v>=s&&c(p-1)}else for(;l*u<s;){var g=f(),y=c();(y+1)*g>=s?c(y+1):f(g+1)}var m=i.w/l,b=i.h/u;if(e.condense&&(m=0,b=0),e.avoidOverlap)for(var E=0;E<a.length;E++){var x=a[E],S=x._private.position;(S.x==null||S.y==null)&&(S.x=0,S.y=0);var w=x.layoutDimensions(e),T=e.avoidOverlapPadding,C=w.w+T,A=w.h+T;m=Math.max(m,C),b=Math.max(b,A)}for(var R={},I=function(N,B){return!!R["c-"+N+"-"+B]},D=function(N,B){R["c-"+N+"-"+B]=!0},_=0,M=0,k=function(){M++,M>=l&&(M=0,_++)},O={},P=0;P<a.length;P++){var q=a[P],G=e.position(q);if(G&&(G.row!==void 0||G.col!==void 0)){var F={row:G.row,col:G.col};if(F.col===void 0)for(F.col=0;I(F.row,F.col);)F.col++;else if(F.row===void 0)for(F.row=0;I(F.row,F.col);)F.row++;O[q.id()]=F,D(F.row,F.col)}}var z=function(N,B){var $,H;if(N.locked()||N.isParent())return!1;var te=O[N.id()];if(te)$=te.col*m+m/2+i.x1,H=te.row*b+b/2+i.y1;else{for(;I(_,M);)k();$=M*m+m/2+i.x1,H=_*b+b/2+i.y1,D(_,M),k()}return{x:$,y:H}};a.layoutPositions(this,e,z)}return this};var pO={ready:function(){},stop:function(){}};function Bv(t){this.options=xe({},pO,t)}Bv.prototype.run=function(){var t=this.options,e=t.eles,r=this;return t.cy,r.emit("layoutstart"),e.nodes().positions(function(){return{x:0,y:0}}),r.one("layoutready",t.ready),r.emit("layoutready"),r.one("layoutstop",t.stop),r.emit("layoutstop"),this};Bv.prototype.stop=function(){return this};var yO={positions:void 0,zoom:void 0,pan:void 0,fit:!0,padding:30,spacingFactor:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,r){return!0},ready:void 0,stop:void 0,transform:function(e,r){return r}};function ST(t){this.options=xe({},yO,t)}ST.prototype.run=function(){var t=this.options,e=t.eles,r=e.nodes(),n=Ke(t.positions);function a(i){if(t.positions==null)return qD(i.position());if(n)return t.positions(i);var s=t.positions[i._private.data.id];return s??null}return r.layoutPositions(this,t,function(i,s){var o=a(i);return i.locked()||o==null?!1:o}),this};var mO={fit:!0,padding:30,boundingBox:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,r){return!0},ready:void 0,stop:void 0,transform:function(e,r){return r}};function AT(t){this.options=xe({},mO,t)}AT.prototype.run=function(){var t=this.options,e=t.cy,r=t.eles,n=St(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()}),a=function(s,o){return{x:n.x1+Math.round(Math.random()*n.w),y:n.y1+Math.round(Math.random()*n.h)}};return r.nodes().layoutPositions(this,t,a),this};var bO=[{name:"breadthfirst",impl:mT},{name:"circle",impl:bT},{name:"concentric",impl:wT},{name:"cose",impl:us},{name:"grid",impl:CT},{name:"null",impl:Bv},{name:"preset",impl:ST},{name:"random",impl:AT}];function RT(t){this.options=t,this.notifications=0}var Ny=function(){},By=function(){throw new Error("A headless instance can not render images")};RT.prototype={recalculateRenderedStyle:Ny,notify:function(){this.notifications++},init:Ny,isHeadless:function(){return!0},png:By,jpg:By};var Fv={};Fv.arrowShapeWidth=.3;Fv.registerArrowShapes=function(){var t=this.arrowShapes={},e=this,r=function(l,f,c,h,d,v,p){var g=d.x-c/2-p,y=d.x+c/2+p,m=d.y-c/2-p,b=d.y+c/2+p,E=g<=l&&l<=y&&m<=f&&f<=b;return E},n=function(l,f,c,h,d){var v=l*Math.cos(h)-f*Math.sin(h),p=l*Math.sin(h)+f*Math.cos(h),g=v*c,y=p*c,m=g+d.x,b=y+d.y;return{x:m,y:b}},a=function(l,f,c,h){for(var d=[],v=0;v<l.length;v+=2){var p=l[v],g=l[v+1];d.push(n(p,g,f,c,h))}return d},i=function(l){for(var f=[],c=0;c<l.length;c++){var h=l[c];f.push(h.x,h.y)}return f},s=function(l){return l.pstyle("width").pfValue*l.pstyle("arrow-scale").pfValue*2},o=function(l,f){we(f)&&(f=t[f]),t[l]=xe({name:l,points:[-.15,-.3,.15,-.3,.15,.3,-.15,.3],collide:function(h,d,v,p,g,y){var m=i(a(this.points,v+2*y,p,g)),b=_t(h,d,m);return b},roughCollide:r,draw:function(h,d,v,p){var g=a(this.points,d,v,p);e.arrowShapeImpl("polygon")(h,g)},spacing:function(h){return 0},gap:s},f)};o("none",{collide:Ri,roughCollide:Ri,draw:Tv,spacing:Zg,gap:Zg}),o("triangle",{points:[-.15,-.3,0,0,.15,-.3]}),o("arrow","triangle"),o("triangle-backcurve",{points:t.triangle.points,controlPoint:[0,-.15],roughCollide:r,draw:function(l,f,c,h,d){var v=a(this.points,f,c,h),p=this.controlPoint,g=n(p[0],p[1],f,c,h);e.arrowShapeImpl(this.name)(l,v,g)},gap:function(l){return s(l)*.8}}),o("triangle-tee",{points:[0,0,.15,-.3,-.15,-.3,0,0],pointsTee:[-.15,-.4,-.15,-.5,.15,-.5,.15,-.4],collide:function(l,f,c,h,d,v,p){var g=i(a(this.points,c+2*p,h,d)),y=i(a(this.pointsTee,c+2*p,h,d)),m=_t(l,f,g)||_t(l,f,y);return m},draw:function(l,f,c,h,d){var v=a(this.points,f,c,h),p=a(this.pointsTee,f,c,h);e.arrowShapeImpl(this.name)(l,v,p)}}),o("circle-triangle",{radius:.15,pointsTr:[0,-.15,.15,-.45,-.15,-.45,0,-.15],collide:function(l,f,c,h,d,v,p){var g=d,y=Math.pow(g.x-l,2)+Math.pow(g.y-f,2)<=Math.pow((c+2*p)*this.radius,2),m=i(a(this.points,c+2*p,h,d));return _t(l,f,m)||y},draw:function(l,f,c,h,d){var v=a(this.pointsTr,f,c,h);e.arrowShapeImpl(this.name)(l,v,h.x,h.y,this.radius*f)},spacing:function(l){return e.getArrowWidth(l.pstyle("width").pfValue,l.pstyle("arrow-scale").value)*this.radius}}),o("triangle-cross",{points:[0,0,.15,-.3,-.15,-.3,0,0],baseCrossLinePts:[-.15,-.4,-.15,-.4,.15,-.4,.15,-.4],crossLinePts:function(l,f){var c=this.baseCrossLinePts.slice(),h=f/l,d=3,v=5;return c[d]=c[d]-h,c[v]=c[v]-h,c},collide:function(l,f,c,h,d,v,p){var g=i(a(this.points,c+2*p,h,d)),y=i(a(this.crossLinePts(c,v),c+2*p,h,d)),m=_t(l,f,g)||_t(l,f,y);return m},draw:function(l,f,c,h,d){var v=a(this.points,f,c,h),p=a(this.crossLinePts(f,d),f,c,h);e.arrowShapeImpl(this.name)(l,v,p)}}),o("vee",{points:[-.15,-.3,0,0,.15,-.3,0,-.15],gap:function(l){return s(l)*.525}}),o("circle",{radius:.15,collide:function(l,f,c,h,d,v,p){var g=d,y=Math.pow(g.x-l,2)+Math.pow(g.y-f,2)<=Math.pow((c+2*p)*this.radius,2);return y},draw:function(l,f,c,h,d){e.arrowShapeImpl(this.name)(l,h.x,h.y,this.radius*f)},spacing:function(l){return e.getArrowWidth(l.pstyle("width").pfValue,l.pstyle("arrow-scale").value)*this.radius}}),o("tee",{points:[-.15,0,-.15,-.1,.15,-.1,.15,0],spacing:function(l){return 1},gap:function(l){return 1}}),o("square",{points:[-.15,0,.15,0,.15,-.3,-.15,-.3]}),o("diamond",{points:[-.15,-.15,0,-.3,.15,-.15,0,0],gap:function(l){return l.pstyle("width").pfValue*l.pstyle("arrow-scale").value}}),o("chevron",{points:[0,0,-.15,-.15,-.1,-.2,0,-.1,.1,-.2,.15,-.15],gap:function(l){return .95*l.pstyle("width").pfValue*l.pstyle("arrow-scale").value}})};var dn={};dn.projectIntoViewport=function(t,e){var r=this.cy,n=this.findContainerClientCoords(),a=n[0],i=n[1],s=n[4],o=r.pan(),u=r.zoom(),l=((t-a)/s-o.x)/u,f=((e-i)/s-o.y)/u;return[l,f]};dn.findContainerClientCoords=function(){if(this.containerBB)return this.containerBB;var t=this.container,e=t.getBoundingClientRect(),r=this.cy.window().getComputedStyle(t),n=function(y){return parseFloat(r.getPropertyValue(y))},a={left:n("padding-left"),right:n("padding-right"),top:n("padding-top"),bottom:n("padding-bottom")},i={left:n("border-left-width"),right:n("border-right-width"),top:n("border-top-width"),bottom:n("border-bottom-width")},s=t.clientWidth,o=t.clientHeight,u=a.left+a.right,l=a.top+a.bottom,f=i.left+i.right,c=e.width/(s+f),h=s-u,d=o-l,v=e.left+a.left+i.left,p=e.top+a.top+i.top;return this.containerBB=[v,p,h,d,c]};dn.invalidateContainerClientCoordsCache=function(){this.containerBB=null};dn.findNearestElement=function(t,e,r,n){return this.findNearestElements(t,e,r,n)[0]};dn.findNearestElements=function(t,e,r,n){var a=this,i=this,s=i.getCachedZSortedEles(),o=[],u=i.cy.zoom(),l=i.cy.hasCompoundNodes(),f=(n?24:8)/u,c=(n?8:2)/u,h=(n?8:2)/u,d=1/0,v,p;r&&(s=s.interactive);function g(w,T){if(w.isNode()){if(p)return;p=w,o.push(w)}if(w.isEdge()&&(T==null||T<d))if(v){if(v.pstyle("z-compound-depth").value===w.pstyle("z-compound-depth").value&&v.pstyle("z-compound-depth").value===w.pstyle("z-compound-depth").value){for(var C=0;C<o.length;C++)if(o[C].isEdge()){o[C]=w,v=w,d=T??d;break}}}else o.push(w),v=w,d=T??d}function y(w){var T=w.outerWidth()+2*c,C=w.outerHeight()+2*c,A=T/2,R=C/2,I=w.position(),D=w.pstyle("corner-radius").value==="auto"?"auto":w.pstyle("corner-radius").pfValue,_=w._private.rscratch;if(I.x-A<=t&&t<=I.x+A&&I.y-R<=e&&e<=I.y+R){var M=i.nodeShapes[a.getNodeShape(w)];if(M.checkPoint(t,e,0,T,C,I.x,I.y,D,_))return g(w,0),!0}}function m(w){var T=w._private,C=T.rscratch,A=w.pstyle("width").pfValue,R=w.pstyle("arrow-scale").value,I=A/2+f,D=I*I,_=I*2,P=T.source,q=T.target,M;if(C.edgeType==="segments"||C.edgeType==="straight"||C.edgeType==="haystack"){for(var k=C.allpts,O=0;O+3<k.length;O+=2)if(JD(t,e,k[O],k[O+1],k[O+2],k[O+3],_)&&D>(M=a_(t,e,k[O],k[O+1],k[O+2],k[O+3])))return g(w,M),!0}else if(C.edgeType==="bezier"||C.edgeType==="multibezier"||C.edgeType==="self"||C.edgeType==="compound"){for(var k=C.allpts,O=0;O+5<C.allpts.length;O+=4)if(e_(t,e,k[O],k[O+1],k[O+2],k[O+3],k[O+4],k[O+5],_)&&D>(M=n_(t,e,k[O],k[O+1],k[O+2],k[O+3],k[O+4],k[O+5])))return g(w,M),!0}for(var P=P||T.source,q=q||T.target,G=a.getArrowWidth(A,R),F=[{name:"source",x:C.arrowStartX,y:C.arrowStartY,angle:C.srcArrowAngle},{name:"target",x:C.arrowEndX,y:C.arrowEndY,angle:C.tgtArrowAngle},{name:"mid-source",x:C.midX,y:C.midY,angle:C.midsrcArrowAngle},{name:"mid-target",x:C.midX,y:C.midY,angle:C.midtgtArrowAngle}],O=0;O<F.length;O++){var z=F[O],W=i.arrowShapes[w.pstyle(z.name+"-arrow-shape").value],N=w.pstyle("width").pfValue;if(W.roughCollide(t,e,G,z.angle,{x:z.x,y:z.y},N,f)&&W.collide(t,e,G,z.angle,{x:z.x,y:z.y},N,f))return g(w),!0}l&&o.length>0&&(y(P),y(q))}function b(w,T,C){return Dt(w,T,C)}function E(w,T){var C=w._private,A=h,R;T?R=T+"-":R="",w.boundingBox();var I=C.labelBounds[T||"main"],D=w.pstyle(R+"label").value,_=w.pstyle("text-events").strValue==="yes";if(!(!_||!D)){var M=b(C.rscratch,"labelX",T),k=b(C.rscratch,"labelY",T),O=b(C.rscratch,"labelAngle",T),P=w.pstyle(R+"text-margin-x").pfValue,q=w.pstyle(R+"text-margin-y").pfValue,G=I.x1-A-P,F=I.x2+A-P,z=I.y1-A-q,W=I.y2+A-q;if(O){var N=Math.cos(O),B=Math.sin(O),$=function(j,ne){return j=j-M,ne=ne-k,{x:j*N-ne*B+M,y:j*B+ne*N+k}},H=$(G,z),te=$(G,W),K=$(F,z),V=$(F,W),U=[H.x+P,H.y+q,K.x+P,K.y+q,V.x+P,V.y+q,te.x+P,te.y+q];if(_t(t,e,U))return g(w),!0}else if(Tr(I,t,e))return g(w),!0}}for(var x=s.length-1;x>=0;x--){var S=s[x];S.isNode()?y(S)||E(S):m(S)||E(S)||E(S,"source")||E(S,"target")}return o};dn.getAllInBox=function(t,e,r,n){var a=this.getCachedZSortedEles().interactive,i=this.cy.zoom(),s=2/i,o=[],u=Math.min(t,r),l=Math.max(t,r),f=Math.min(e,n),c=Math.max(e,n);t=u,r=l,e=f,n=c;var h=St({x1:t,y1:e,x2:r,y2:n}),d=[{x:h.x1,y:h.y1},{x:h.x2,y:h.y1},{x:h.x2,y:h.y2},{x:h.x1,y:h.y2}],v=[[d[0],d[1]],[d[1],d[2]],[d[2],d[3]],[d[3],d[0]]];function p(j,ne,ae){return Dt(j,ne,ae)}function g(j,ne){var ae=j._private,Se=s,se="";j.boundingBox();var be=ae.labelBounds.main;if(!be)return null;var ge=p(ae.rscratch,"labelX",ne),oe=p(ae.rscratch,"labelY",ne),de=p(ae.rscratch,"labelAngle",ne),fe=j.pstyle(se+"text-margin-x").pfValue,ve=j.pstyle(se+"text-margin-y").pfValue,pe=be.x1-Se-fe,Ce=be.x2+Se-fe,Me=be.y1-Se-ve,Pe=be.y2+Se-ve;if(de){var _e=Math.cos(de),ke=Math.sin(de),Te=function(J,L){return J=J-ge,L=L-oe,{x:J*_e-L*ke+ge,y:J*ke+L*_e+oe}};return[Te(pe,Me),Te(Ce,Me),Te(Ce,Pe),Te(pe,Pe)]}else return[{x:pe,y:Me},{x:Ce,y:Me},{x:Ce,y:Pe},{x:pe,y:Pe}]}function y(j,ne,ae,Se){function se(be,ge,oe){return(oe.y-be.y)*(ge.x-be.x)>(ge.y-be.y)*(oe.x-be.x)}return se(j,ae,Se)!==se(ne,ae,Se)&&se(j,ne,ae)!==se(j,ne,Se)}for(var m=0;m<a.length;m++){var b=a[m];if(b.isNode()){var E=b,x=E.pstyle("text-events").strValue==="yes",S=E.pstyle("box-selection").strValue,w=E.pstyle("box-select-labels").strValue==="yes";if(S==="none")continue;var T=(S==="overlap"||w)&&x,C=E.boundingBox({includeNodes:!0,includeEdges:!1,includeLabels:T});if(S==="contain"){var A=!1;if(w&&x){var R=g(E);R&&ro(R,d)&&(o.push(E),A=!0)}!A&&Px(h,C)&&o.push(E)}else if(S==="overlap"&&Rv(h,C)){var I=E.boundingBox({includeNodes:!0,includeEdges:!0,includeLabels:!1,includeMainLabels:!1,includeSourceLabels:!1,includeTargetLabels:!1}),D=[{x:I.x1,y:I.y1},{x:I.x2,y:I.y1},{x:I.x2,y:I.y2},{x:I.x1,y:I.y2}];if(ro(D,d))o.push(E);else{var _=g(E);_&&ro(_,d)&&o.push(E)}}}else{var M=b,k=M._private,O=k.rscratch,P=M.pstyle("box-selection").strValue;if(P==="none")continue;if(P==="contain"){if(O.startX!=null&&O.startY!=null&&!Tr(h,O.startX,O.startY)||O.endX!=null&&O.endY!=null&&!Tr(h,O.endX,O.endY))continue;if(O.edgeType==="bezier"||O.edgeType==="multibezier"||O.edgeType==="self"||O.edgeType==="compound"||O.edgeType==="segments"||O.edgeType==="haystack"){for(var q=k.rstyle.bezierPts||k.rstyle.linePts||k.rstyle.haystackPts,G=!0,F=0;F<q.length;F++)if(!rp(h,q[F])){G=!1;break}G&&o.push(M)}else O.edgeType==="straight"&&o.push(M)}else if(P==="overlap"){var z=!1;if(O.startX!=null&&O.startY!=null&&O.endX!=null&&O.endY!=null&&(Tr(h,O.startX,O.startY)||Tr(h,O.endX,O.endY)))o.push(M),z=!0;else if(!z&&O.edgeType==="haystack"){for(var W=k.rstyle.haystackPts,N=0;N<W.length;N++)if(rp(h,W[N])){o.push(M),z=!0;break}}if(!z){var B=k.rstyle.bezierPts||k.rstyle.linePts||k.rstyle.haystackPts;if((!B||B.length<2)&&O.edgeType==="straight"&&O.startX!=null&&O.startY!=null&&O.endX!=null&&O.endY!=null&&(B=[{x:O.startX,y:O.startY},{x:O.endX,y:O.endY}]),!B||B.length<2)continue;for(var $=0;$<B.length-1;$++){for(var H=B[$],te=B[$+1],K=0;K<v.length;K++){var V=tt(v[K],2),U=V[0],X=V[1];if(y(H,te,U,X)){o.push(M),z=!0;break}}if(z)break}}}}}return o};var Pi={};Pi.calculateArrowAngles=function(t){var e=t._private.rscratch,r=e.edgeType==="haystack",n=e.edgeType==="bezier",a=e.edgeType==="multibezier",i=e.edgeType==="segments",s=e.edgeType==="compound",o=e.edgeType==="self",u,l,f,c,h,d,y,m;if(r?(f=e.haystackPts[0],c=e.haystackPts[1],h=e.haystackPts[2],d=e.haystackPts[3]):(f=e.arrowStartX,c=e.arrowStartY,h=e.arrowEndX,d=e.arrowEndY),y=e.midX,m=e.midY,i)u=f-e.segpts[0],l=c-e.segpts[1];else if(a||s||o||n){var v=e.allpts,p=ft(v[0],v[2],v[4],.1),g=ft(v[1],v[3],v[5],.1);u=f-p,l=c-g}else u=f-y,l=c-m;e.srcArrowAngle=Qa(u,l);var y=e.midX,m=e.midY;if(r&&(y=(f+h)/2,m=(c+d)/2),u=h-f,l=d-c,i){var v=e.allpts;if(v.length/2%2===0){var b=v.length/2,E=b-2;u=v[b]-v[E],l=v[b+1]-v[E+1]}else if(e.isRound)u=e.midVector[1],l=-e.midVector[0];else{var b=v.length/2-1,E=b-2;u=v[b]-v[E],l=v[b+1]-v[E+1]}}else if(a||s||o){var v=e.allpts,x=e.ctrlpts,S,w,T,C;if(x.length/2%2===0){var A=v.length/2-1,R=A+2,I=R+2;S=ft(v[A],v[R],v[I],0),w=ft(v[A+1],v[R+1],v[I+1],0),T=ft(v[A],v[R],v[I],1e-4),C=ft(v[A+1],v[R+1],v[I+1],1e-4)}else{var R=v.length/2-1,A=R-2,I=R+2;S=ft(v[A],v[R],v[I],.4999),w=ft(v[A+1],v[R+1],v[I+1],.4999),T=ft(v[A],v[R],v[I],.5),C=ft(v[A+1],v[R+1],v[I+1],.5)}u=T-S,l=C-w}if(e.midtgtArrowAngle=Qa(u,l),e.midDispX=u,e.midDispY=l,u*=-1,l*=-1,i){var v=e.allpts;if(v.length/2%2!==0){if(!e.isRound){var b=v.length/2-1,D=b+2;u=-(v[D]-v[b]),l=-(v[D+1]-v[b+1])}}}if(e.midsrcArrowAngle=Qa(u,l),i)u=h-e.segpts[e.segpts.length-2],l=d-e.segpts[e.segpts.length-1];else if(a||s||o||n){var v=e.allpts,_=v.length,p=ft(v[_-6],v[_-4],v[_-2],.9),g=ft(v[_-5],v[_-3],v[_-1],.9);u=h-p,l=d-g}else u=h-y,l=d-m;e.tgtArrowAngle=Qa(u,l)};Pi.getArrowWidth=Pi.getArrowHeight=function(t,e){var r=this.arrowWidthCache=this.arrowWidthCache||{},n=r[t+", "+e];return n||(n=Math.max(Math.pow(t*13.37,.9),29)*e,r[t+", "+e]=n,n)};var Qd,Jd,Qt={},Nt={},Fy,qy,Jr,yi,sr,Yr,jr,jt,Cn,si,IT,DT,ev,tv,Gy,zy=function(e,r,n){n.x=r.x-e.x,n.y=r.y-e.y,n.len=Math.sqrt(n.x*n.x+n.y*n.y),n.nx=n.x/n.len,n.ny=n.y/n.len,n.ang=Math.atan2(n.ny,n.nx)},wO=function(e,r){r.x=e.x*-1,r.y=e.y*-1,r.nx=e.nx*-1,r.ny=e.ny*-1,r.ang=e.ang>0?-(Math.PI-e.ang):Math.PI+e.ang},EO=function(e,r,n,a,i){if(e!==Gy?zy(r,e,Qt):wO(Nt,Qt),zy(r,n,Nt),Fy=Qt.nx*Nt.ny-Qt.ny*Nt.nx,qy=Qt.nx*Nt.nx-Qt.ny*-Nt.ny,sr=Math.asin(Math.max(-1,Math.min(1,Fy))),Math.abs(sr)<1e-6){Qd=r.x,Jd=r.y,jr=Cn=0;return}Jr=1,yi=!1,qy<0?sr<0?sr=Math.PI+sr:(sr=Math.PI-sr,Jr=-1,yi=!0):sr>0&&(Jr=-1,yi=!0),r.radius!==void 0?Cn=r.radius:Cn=a,Yr=sr/2,si=Math.min(Qt.len/2,Nt.len/2),i?(jt=Math.abs(Math.cos(Yr)*Cn/Math.sin(Yr)),jt>si?(jt=si,jr=Math.abs(jt*Math.sin(Yr)/Math.cos(Yr))):jr=Cn):(jt=Math.min(si,Cn),jr=Math.abs(jt*Math.sin(Yr)/Math.cos(Yr))),ev=r.x+Nt.nx*jt,tv=r.y+Nt.ny*jt,Qd=ev-Nt.ny*jr*Jr,Jd=tv+Nt.nx*jr*Jr,IT=r.x+Qt.nx*jt,DT=r.y+Qt.ny*jt,Gy=r};function _T(t,e){e.radius===0?t.lineTo(e.cx,e.cy):t.arc(e.cx,e.cy,e.radius,e.startAngle,e.endAngle,e.counterClockwise)}function qv(t,e,r,n){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0;return n===0||e.radius===0?{cx:e.x,cy:e.y,radius:0,startX:e.x,startY:e.y,stopX:e.x,stopY:e.y,startAngle:void 0,endAngle:void 0,counterClockwise:void 0}:(EO(t,e,r,n,a),{cx:Qd,cy:Jd,radius:jr,startX:IT,startY:DT,stopX:ev,stopY:tv,startAngle:Qt.ang+Math.PI/2*Jr,endAngle:Nt.ang-Math.PI/2*Jr,counterClockwise:yi})}var Da=.01,xO=Math.sqrt(2*Da),Et={};Et.findMidptPtsEtc=function(t,e){var r=e.posPts,n=e.intersectionPts,a=e.vectorNormInverse,i,s=t.pstyle("source-endpoint"),o=t.pstyle("target-endpoint"),u=s.units!=null&&o.units!=null,l=function(x,S,w,T){var C=T-S,A=w-x,R=Math.sqrt(A*A+C*C);return{x:-C/R,y:A/R}},f=t.pstyle("edge-distances").value;switch(f){case"node-position":i=r;break;case"intersection":i=n;break;case"endpoints":{if(u){var c=this.manualEndptToPx(t.source()[0],s),h=tt(c,2),d=h[0],v=h[1],p=this.manualEndptToPx(t.target()[0],o),g=tt(p,2),y=g[0],m=g[1],b={x1:d,y1:v,x2:y,y2:m};a=l(d,v,y,m),i=b}else Ge("Edge ".concat(t.id()," has edge-distances:endpoints specified without manual endpoints specified via source-endpoint and target-endpoint.  Falling back on edge-distances:intersection (default).")),i=n;break}}return{midptPts:i,vectorNormInverse:a}};Et.findHaystackPoints=function(t){for(var e=0;e<t.length;e++){var r=t[e],n=r._private,a=n.rscratch;if(!a.haystack){var i=Math.random()*2*Math.PI;a.source={x:Math.cos(i),y:Math.sin(i)},i=Math.random()*2*Math.PI,a.target={x:Math.cos(i),y:Math.sin(i)}}var s=n.source,o=n.target,u=s.position(),l=o.position(),f=s.width(),c=o.width(),h=s.height(),d=o.height(),v=r.pstyle("haystack-radius").value,p=v/2;a.haystackPts=a.allpts=[a.source.x*f*p+u.x,a.source.y*h*p+u.y,a.target.x*c*p+l.x,a.target.y*d*p+l.y],a.midX=(a.allpts[0]+a.allpts[2])/2,a.midY=(a.allpts[1]+a.allpts[3])/2,a.edgeType="haystack",a.haystack=!0,this.storeEdgeProjections(r),this.calculateArrowAngles(r),this.recalculateEdgeLabelProjections(r),this.calculateLabelAngles(r)}};Et.findSegmentsPoints=function(t,e){var r=t._private.rscratch,n=t.pstyle("segment-weights"),a=t.pstyle("segment-distances"),i=t.pstyle("segment-radii"),s=t.pstyle("radius-type"),o=Math.min(n.pfValue.length,a.pfValue.length),u=i.pfValue[i.pfValue.length-1],l=s.pfValue[s.pfValue.length-1];r.edgeType="segments",r.segpts=[],r.radii=[],r.isArcRadius=[];for(var f=0;f<o;f++){var c=n.pfValue[f],h=a.pfValue[f],d=1-c,v=c,p=this.findMidptPtsEtc(t,e),g=p.midptPts,y=p.vectorNormInverse,m={x:g.x1*d+g.x2*v,y:g.y1*d+g.y2*v};r.segpts.push(m.x+y.x*h,m.y+y.y*h),r.radii.push(i.pfValue[f]!==void 0?i.pfValue[f]:u),r.isArcRadius.push((s.pfValue[f]!==void 0?s.pfValue[f]:l)==="arc-radius")}};Et.findLoopPoints=function(t,e,r,n){var a=t._private.rscratch,i=e.dirCounts,s=e.srcPos,o=t.pstyle("control-point-distances"),u=o?o.pfValue[0]:void 0,l=t.pstyle("loop-direction").pfValue,f=t.pstyle("loop-sweep").pfValue,c=t.pstyle("control-point-step-size").pfValue;a.edgeType="self";var h=r,d=c;n&&(h=0,d=u);var v=l-Math.PI/2,p=v-f/2,g=v+f/2,y=l+"_"+f;h=i[y]===void 0?i[y]=0:++i[y],a.ctrlpts=[s.x+Math.cos(p)*1.4*d*(h/3+1),s.y+Math.sin(p)*1.4*d*(h/3+1),s.x+Math.cos(g)*1.4*d*(h/3+1),s.y+Math.sin(g)*1.4*d*(h/3+1)]};Et.findCompoundLoopPoints=function(t,e,r,n){var a=t._private.rscratch;a.edgeType="compound";var i=e.srcPos,s=e.tgtPos,o=e.srcW,u=e.srcH,l=e.tgtW,f=e.tgtH,c=t.pstyle("control-point-step-size").pfValue,h=t.pstyle("control-point-distances"),d=h?h.pfValue[0]:void 0,v=r,p=c;n&&(v=0,p=d);var g=50,y={x:i.x-o/2,y:i.y-u/2},m={x:s.x-l/2,y:s.y-f/2},b={x:Math.min(y.x,m.x),y:Math.min(y.y,m.y)},E=.5,x=Math.max(E,Math.log(o*Da)),S=Math.max(E,Math.log(l*Da));a.ctrlpts=[b.x,b.y-(1+Math.pow(g,1.12)/100)*p*(v/3+1)*x,b.x-(1+Math.pow(g,1.12)/100)*p*(v/3+1)*S,b.y]};Et.findStraightEdgePoints=function(t){t._private.rscratch.edgeType="straight"};Et.findBezierPoints=function(t,e,r,n,a){var i=t._private.rscratch,s=t.pstyle("control-point-step-size").pfValue,o=t.pstyle("control-point-distances"),u=t.pstyle("control-point-weights"),l=o&&u?Math.min(o.value.length,u.value.length):1,f=o?o.pfValue[0]:void 0,c=u.value[0],h=n;i.edgeType=h?"multibezier":"bezier",i.ctrlpts=[];for(var d=0;d<l;d++){var v=(.5-e.eles.length/2+r)*s*(a?-1:1),p=void 0,g=Av(v);h&&(f=o?o.pfValue[d]:s,c=u.value[d]),n?p=f:p=f!==void 0?g*f:void 0;var y=p!==void 0?p:v,m=1-c,b=c,E=this.findMidptPtsEtc(t,e),x=E.midptPts,S=E.vectorNormInverse,w={x:x.x1*m+x.x2*b,y:x.y1*m+x.y2*b};i.ctrlpts.push(w.x+S.x*y,w.y+S.y*y)}};Et.findTaxiPoints=function(t,e){var r=t._private.rscratch;r.edgeType="segments";var n="vertical",a="horizontal",i="leftward",s="rightward",o="downward",u="upward",l="auto",f=e.posPts,c=e.srcW,h=e.srcH,d=e.tgtW,v=e.tgtH,p=t.pstyle("edge-distances").value,g=p!=="node-position",y=t.pstyle("taxi-direction").value,m=y,b=t.pstyle("taxi-turn"),E=b.units==="%",x=b.pfValue,S=x<0,w=t.pstyle("taxi-turn-min-distance").pfValue,T=g?(c+d)/2:0,C=g?(h+v)/2:0,A=f.x2-f.x1,R=f.y2-f.y1,I=function(L,Y){return L>0?Math.max(L-Y,0):Math.min(L+Y,0)},D=I(A,T),_=I(R,C),M=!1;m===l?y=Math.abs(D)>Math.abs(_)?a:n:m===u||m===o?(y=n,M=!0):(m===i||m===s)&&(y=a,M=!0);var k=y===n,O=k?_:D,P=k?R:A,q=Av(P),G=!1;!(M&&(E||S))&&(m===o&&P<0||m===u&&P>0||m===i&&P>0||m===s&&P<0)&&(q*=-1,O=q*Math.abs(O),G=!0);var F;if(E){var z=x<0?1+x:x;F=z*O}else{var W=x<0?O:0;F=W+x*q}var N=function(L){return Math.abs(L)<w||Math.abs(L)>=Math.abs(O)},B=N(F),$=N(Math.abs(O)-Math.abs(F)),H=B||$;if(H&&!G)if(k){var te=Math.abs(P)<=h/2,K=Math.abs(A)<=d/2;if(te){var V=(f.x1+f.x2)/2,U=f.y1,X=f.y2;r.segpts=[V,U,V,X]}else if(K){var j=(f.y1+f.y2)/2,ne=f.x1,ae=f.x2;r.segpts=[ne,j,ae,j]}else r.segpts=[f.x1,f.y2]}else{var Se=Math.abs(P)<=c/2,se=Math.abs(R)<=v/2;if(Se){var be=(f.y1+f.y2)/2,ge=f.x1,oe=f.x2;r.segpts=[ge,be,oe,be]}else if(se){var de=(f.x1+f.x2)/2,fe=f.y1,ve=f.y2;r.segpts=[de,fe,de,ve]}else r.segpts=[f.x2,f.y1]}else if(k){var pe=f.y1+F+(g?h/2*q:0),Ce=f.x1,Me=f.x2;r.segpts=[Ce,pe,Me,pe]}else{var Pe=f.x1+F+(g?c/2*q:0),_e=f.y1,ke=f.y2;r.segpts=[Pe,_e,Pe,ke]}if(r.isRound){var Te=t.pstyle("taxi-radius").value,ue=t.pstyle("radius-type").value[0]==="arc-radius";r.radii=new Array(r.segpts.length/2).fill(Te),r.isArcRadius=new Array(r.segpts.length/2).fill(ue)}};Et.tryToCorrectInvalidPoints=function(t,e){var r=t._private.rscratch;if(r.edgeType==="bezier"){var n=e.srcPos,a=e.tgtPos,i=e.srcW,s=e.srcH,o=e.tgtW,u=e.tgtH,l=e.srcShape,f=e.tgtShape,c=e.srcCornerRadius,h=e.tgtCornerRadius,d=e.srcRs,v=e.tgtRs,p=!ie(r.startX)||!ie(r.startY),g=!ie(r.arrowStartX)||!ie(r.arrowStartY),y=!ie(r.endX)||!ie(r.endY),m=!ie(r.arrowEndX)||!ie(r.arrowEndY),b=3,E=this.getArrowWidth(t.pstyle("width").pfValue,t.pstyle("arrow-scale").value)*this.arrowShapeWidth,x=b*E,S=un({x:r.ctrlpts[0],y:r.ctrlpts[1]},{x:r.startX,y:r.startY}),w=S<x,T=un({x:r.ctrlpts[0],y:r.ctrlpts[1]},{x:r.endX,y:r.endY}),C=T<x,A=!1;if(p||g||w){A=!0;var R={x:r.ctrlpts[0]-n.x,y:r.ctrlpts[1]-n.y},I=Math.sqrt(R.x*R.x+R.y*R.y),D={x:R.x/I,y:R.y/I},_=Math.max(i,s),M={x:r.ctrlpts[0]+D.x*2*_,y:r.ctrlpts[1]+D.y*2*_},k=l.intersectLine(n.x,n.y,i,s,M.x,M.y,0,c,d);w?(r.ctrlpts[0]=r.ctrlpts[0]+D.x*(x-S),r.ctrlpts[1]=r.ctrlpts[1]+D.y*(x-S)):(r.ctrlpts[0]=k[0]+D.x*x,r.ctrlpts[1]=k[1]+D.y*x)}if(y||m||C){A=!0;var O={x:r.ctrlpts[0]-a.x,y:r.ctrlpts[1]-a.y},P=Math.sqrt(O.x*O.x+O.y*O.y),q={x:O.x/P,y:O.y/P},G=Math.max(i,s),F={x:r.ctrlpts[0]+q.x*2*G,y:r.ctrlpts[1]+q.y*2*G},z=f.intersectLine(a.x,a.y,o,u,F.x,F.y,0,h,v);C?(r.ctrlpts[0]=r.ctrlpts[0]+q.x*(x-T),r.ctrlpts[1]=r.ctrlpts[1]+q.y*(x-T)):(r.ctrlpts[0]=z[0]+q.x*x,r.ctrlpts[1]=z[1]+q.y*x)}A&&this.findEndpoints(t)}};Et.storeAllpts=function(t){var e=t._private.rscratch;if(e.edgeType==="multibezier"||e.edgeType==="bezier"||e.edgeType==="self"||e.edgeType==="compound"){e.allpts=[],e.allpts.push(e.startX,e.startY);for(var r=0;r+1<e.ctrlpts.length;r+=2)e.allpts.push(e.ctrlpts[r],e.ctrlpts[r+1]),r+3<e.ctrlpts.length&&e.allpts.push((e.ctrlpts[r]+e.ctrlpts[r+2])/2,(e.ctrlpts[r+1]+e.ctrlpts[r+3])/2);e.allpts.push(e.endX,e.endY);var n,a;e.ctrlpts.length/2%2===0?(n=e.allpts.length/2-1,e.midX=e.allpts[n],e.midY=e.allpts[n+1]):(n=e.allpts.length/2-3,a=.5,e.midX=ft(e.allpts[n],e.allpts[n+2],e.allpts[n+4],a),e.midY=ft(e.allpts[n+1],e.allpts[n+3],e.allpts[n+5],a))}else if(e.edgeType==="straight")e.allpts=[e.startX,e.startY,e.endX,e.endY],e.midX=(e.startX+e.endX+e.arrowStartX+e.arrowEndX)/4,e.midY=(e.startY+e.endY+e.arrowStartY+e.arrowEndY)/4;else if(e.edgeType==="segments"){if(e.allpts=[],e.allpts.push(e.startX,e.startY),e.allpts.push.apply(e.allpts,e.segpts),e.allpts.push(e.endX,e.endY),e.isRound){e.roundCorners=[];for(var i=2;i+3<e.allpts.length;i+=2){var s=e.radii[i/2-1],o=e.isArcRadius[i/2-1];e.roundCorners.push(qv({x:e.allpts[i-2],y:e.allpts[i-1]},{x:e.allpts[i],y:e.allpts[i+1],radius:s},{x:e.allpts[i+2],y:e.allpts[i+3]},s,o))}}if(e.segpts.length%4===0){var u=e.segpts.length/2,l=u-2;e.midX=(e.segpts[l]+e.segpts[u])/2,e.midY=(e.segpts[l+1]+e.segpts[u+1])/2}else{var f=e.segpts.length/2-1;if(!e.isRound)e.midX=e.segpts[f],e.midY=e.segpts[f+1];else{var c={x:e.segpts[f],y:e.segpts[f+1]},h=e.roundCorners[f/2];if(h.radius===0){var d={x:e.segpts[f+2],y:e.segpts[f+3]};e.midX=c.x,e.midY=c.y,e.midVector=[c.y-d.y,d.x-c.x]}else{var v=[c.x-h.cx,c.y-h.cy],p=h.radius/Math.sqrt(Math.pow(v[0],2)+Math.pow(v[1],2));v=v.map(function(g){return g*p}),e.midX=h.cx+v[0],e.midY=h.cy+v[1],e.midVector=v}}}}};Et.checkForInvalidEdgeWarning=function(t){var e=t[0]._private.rscratch;e.nodesOverlap||ie(e.startX)&&ie(e.startY)&&ie(e.endX)&&ie(e.endY)?e.loggedErr=!1:e.loggedErr||(e.loggedErr=!0,Ge("Edge `"+t.id()+"` has invalid endpoints and so it is impossible to draw.  Adjust your edge style (e.g. control points) accordingly or use an alternative edge type.  This is expected behaviour when the source node and the target node overlap."))};Et.findEdgeControlPoints=function(t){var e=this;if(!(!t||t.length===0)){for(var r=this,n=r.cy,a=n.hasCompoundNodes(),i=new ur,s=function(C,A){return[].concat(Ci(C),[A?1:0]).join("-")},o=[],u=[],l=0;l<t.length;l++){var f=t[l],c=f._private,h=f.pstyle("curve-style").value;if(!(f.removed()||!f.takesUpSpace())){if(h==="haystack"){u.push(f);continue}var d=h==="unbundled-bezier"||xr(h,"segments")||h==="straight"||h==="straight-triangle"||xr(h,"taxi"),v=h==="unbundled-bezier"||h==="bezier",p=c.source,g=c.target,y=p.poolIndex(),m=g.poolIndex(),b=[y,m].sort(),E=s(b,d),x=i.get(E);x==null&&(x={eles:[]},o.push({pairId:b,edgeIsUnbundled:d}),i.set(E,x)),x.eles.push(f),d&&(x.hasUnbundled=!0),v&&(x.hasBezier=!0)}}for(var S=function(){var C=o[w],A=C.pairId,R=C.edgeIsUnbundled,I=s(A,R),D=i.get(I),_;if(!D.hasUnbundled){var M=D.eles[0].parallelEdges().filter(function(ue){return ue.isBundledBezier()});Cv(D.eles),M.forEach(function(ue){return D.eles.push(ue)}),D.eles.sort(function(ue,J){return ue.poolIndex()-J.poolIndex()})}var k=D.eles[0],O=k.source(),P=k.target();if(O.poolIndex()>P.poolIndex()){var q=O;O=P,P=q}var G=D.srcPos=O.position(),F=D.tgtPos=P.position(),z=D.srcW=O.outerWidth(),W=D.srcH=O.outerHeight(),N=D.tgtW=P.outerWidth(),B=D.tgtH=P.outerHeight(),$=D.srcShape=r.nodeShapes[e.getNodeShape(O)],H=D.tgtShape=r.nodeShapes[e.getNodeShape(P)],te=D.srcCornerRadius=O.pstyle("corner-radius").value==="auto"?"auto":O.pstyle("corner-radius").pfValue,K=D.tgtCornerRadius=P.pstyle("corner-radius").value==="auto"?"auto":P.pstyle("corner-radius").pfValue,V=D.tgtRs=P._private.rscratch,U=D.srcRs=O._private.rscratch;D.dirCounts={north:0,west:0,south:0,east:0,northwest:0,southwest:0,northeast:0,southeast:0};for(var X=0;X<D.eles.length;X++){var j=D.eles[X],ne=j[0]._private.rscratch,ae=j.pstyle("curve-style").value,Se=ae==="unbundled-bezier"||xr(ae,"segments")||xr(ae,"taxi"),se=!O.same(j.source());if(!D.calculatedIntersection&&O!==P&&(D.hasBezier||D.hasUnbundled)){D.calculatedIntersection=!0;var be=$.intersectLine(G.x,G.y,z,W,F.x,F.y,0,te,U),ge=D.srcIntn=be,oe=H.intersectLine(F.x,F.y,N,B,G.x,G.y,0,K,V),de=D.tgtIntn=oe,fe=D.intersectionPts={x1:be[0],x2:oe[0],y1:be[1],y2:oe[1]},ve=D.posPts={x1:G.x,x2:F.x,y1:G.y,y2:F.y},pe=oe[1]-be[1],Ce=oe[0]-be[0],Me=Math.sqrt(Ce*Ce+pe*pe);ie(Me)&&Me>=xO||(Me=Math.sqrt(Math.max(Ce*Ce,Da)+Math.max(pe*pe,Da)));var Pe=D.vector={x:Ce,y:pe},_e=D.vectorNorm={x:Pe.x/Me,y:Pe.y/Me},ke={x:-_e.y,y:_e.x};D.nodesOverlap=!ie(Me)||H.checkPoint(be[0],be[1],0,N,B,F.x,F.y,K,V)||$.checkPoint(oe[0],oe[1],0,z,W,G.x,G.y,te,U),D.vectorNormInverse=ke,_={nodesOverlap:D.nodesOverlap,dirCounts:D.dirCounts,calculatedIntersection:!0,hasBezier:D.hasBezier,hasUnbundled:D.hasUnbundled,eles:D.eles,srcPos:F,srcRs:V,tgtPos:G,tgtRs:U,srcW:N,srcH:B,tgtW:z,tgtH:W,srcIntn:de,tgtIntn:ge,srcShape:H,tgtShape:$,posPts:{x1:ve.x2,y1:ve.y2,x2:ve.x1,y2:ve.y1},intersectionPts:{x1:fe.x2,y1:fe.y2,x2:fe.x1,y2:fe.y1},vector:{x:-Pe.x,y:-Pe.y},vectorNorm:{x:-_e.x,y:-_e.y},vectorNormInverse:{x:-ke.x,y:-ke.y}}}var Te=se?_:D;ne.nodesOverlap=Te.nodesOverlap,ne.srcIntn=Te.srcIntn,ne.tgtIntn=Te.tgtIntn,ne.isRound=ae.startsWith("round"),a&&(O.isParent()||O.isChild()||P.isParent()||P.isChild())&&(O.parents().anySame(P)||P.parents().anySame(O)||O.same(P)&&O.isParent())?e.findCompoundLoopPoints(j,Te,X,Se):O===P?e.findLoopPoints(j,Te,X,Se):ae.endsWith("segments")?e.findSegmentsPoints(j,Te):ae.endsWith("taxi")?e.findTaxiPoints(j,Te):ae==="straight"||!Se&&D.eles.length%2===1&&X===Math.floor(D.eles.length/2)?e.findStraightEdgePoints(j):e.findBezierPoints(j,Te,X,Se,se),e.findEndpoints(j),e.tryToCorrectInvalidPoints(j,Te),e.checkForInvalidEdgeWarning(j),e.storeAllpts(j),e.storeEdgeProjections(j),e.calculateArrowAngles(j),e.recalculateEdgeLabelProjections(j),e.calculateLabelAngles(j)}},w=0;w<o.length;w++)S();this.findHaystackPoints(u)}};function LT(t){var e=[];if(t!=null){for(var r=0;r<t.length;r+=2){var n=t[r],a=t[r+1];e.push({x:n,y:a})}return e}}Et.getSegmentPoints=function(t){var e=t[0]._private.rscratch;this.recalculateRenderedStyle(t);var r=e.edgeType;if(r==="segments")return LT(e.segpts)};Et.getControlPoints=function(t){var e=t[0]._private.rscratch;this.recalculateRenderedStyle(t);var r=e.edgeType;if(r==="bezier"||r==="multibezier"||r==="self"||r==="compound")return LT(e.ctrlpts)};Et.getEdgeMidpoint=function(t){var e=t[0]._private.rscratch;return this.recalculateRenderedStyle(t),{x:e.midX,y:e.midY}};var Ga={};Ga.manualEndptToPx=function(t,e){var r=this,n=t.position(),a=t.outerWidth(),i=t.outerHeight(),s=t._private.rscratch;if(e.value.length===2){var o=[e.pfValue[0],e.pfValue[1]];return e.units[0]==="%"&&(o[0]=o[0]*a),e.units[1]==="%"&&(o[1]=o[1]*i),o[0]+=n.x,o[1]+=n.y,o}else{var u=e.pfValue[0];u=-Math.PI/2+u;var l=2*Math.max(a,i),f=[n.x+Math.cos(u)*l,n.y+Math.sin(u)*l];return r.nodeShapes[this.getNodeShape(t)].intersectLine(n.x,n.y,a,i,f[0],f[1],0,t.pstyle("corner-radius").value==="auto"?"auto":t.pstyle("corner-radius").pfValue,s)}};Ga.findEndpoints=function(t){var e,r,n,a,i=this,s,o=t.source()[0],u=t.target()[0],l=o.position(),f=u.position(),c=t.pstyle("target-arrow-shape").value,h=t.pstyle("source-arrow-shape").value,d=t.pstyle("target-distance-from-node").pfValue,v=t.pstyle("source-distance-from-node").pfValue,p=o._private.rscratch,g=u._private.rscratch,y=t.pstyle("curve-style").value,m=t._private.rscratch,b=m.edgeType,E=xr(y,"taxi"),x=b==="self"||b==="compound",S=b==="bezier"||b==="multibezier"||x,w=b!=="bezier",T=b==="straight"||b==="segments",C=b==="segments",A=S||w||T,R=x||E,I=t.pstyle("source-endpoint"),D=R?"outside-to-node":I.value,_=o.pstyle("corner-radius").value==="auto"?"auto":o.pstyle("corner-radius").pfValue,M=t.pstyle("target-endpoint"),k=R?"outside-to-node":M.value,O=u.pstyle("corner-radius").value==="auto"?"auto":u.pstyle("corner-radius").pfValue;m.srcManEndpt=I,m.tgtManEndpt=M;var P,q,G,F,z=(e=(M==null||(r=M.pfValue)===null||r===void 0?void 0:r.length)===2?M.pfValue:null)!==null&&e!==void 0?e:[0,0],W=(n=(I==null||(a=I.pfValue)===null||a===void 0?void 0:a.length)===2?I.pfValue:null)!==null&&n!==void 0?n:[0,0];if(S){var N=[m.ctrlpts[0],m.ctrlpts[1]],B=w?[m.ctrlpts[m.ctrlpts.length-2],m.ctrlpts[m.ctrlpts.length-1]]:N;P=B,q=N}else if(T){var $=C?m.segpts.slice(0,2):[f.x+z[0],f.y+z[1]],H=C?m.segpts.slice(m.segpts.length-2):[l.x+W[0],l.y+W[1]];P=H,q=$}if(k==="inside-to-node")s=[f.x,f.y];else if(M.units)s=this.manualEndptToPx(u,M);else if(k==="outside-to-line")s=m.tgtIntn;else if(k==="outside-to-node"||k==="outside-to-node-or-label"?G=P:(k==="outside-to-line"||k==="outside-to-line-or-label")&&(G=[l.x,l.y]),s=i.nodeShapes[this.getNodeShape(u)].intersectLine(f.x,f.y,u.outerWidth(),u.outerHeight(),G[0],G[1],0,O,g),k==="outside-to-node-or-label"||k==="outside-to-line-or-label"){var te=u._private.rscratch,K=te.labelWidth,V=te.labelHeight,U=te.labelX,X=te.labelY,j=K/2,ne=V/2,ae=u.pstyle("text-valign").value;ae==="top"?X-=ne:ae==="bottom"&&(X+=ne);var Se=u.pstyle("text-halign").value;Se==="left"?U-=j:Se==="right"&&(U+=j);var se=Ca(G[0],G[1],[U-j,X-ne,U+j,X-ne,U+j,X+ne,U-j,X+ne],f.x,f.y);if(se.length>0){var be=l,ge=Kr(be,Dn(s)),oe=Kr(be,Dn(se)),de=ge;if(oe<ge&&(s=se,de=oe),se.length>2){var fe=Kr(be,{x:se[2],y:se[3]});fe<de&&(s=[se[2],se[3]])}}}var ve=Ja(s,P,i.arrowShapes[c].spacing(t)+d),pe=Ja(s,P,i.arrowShapes[c].gap(t)+d);if(m.endX=pe[0],m.endY=pe[1],m.arrowEndX=ve[0],m.arrowEndY=ve[1],D==="inside-to-node")s=[l.x,l.y];else if(I.units)s=this.manualEndptToPx(o,I);else if(D==="outside-to-line")s=m.srcIntn;else if(D==="outside-to-node"||D==="outside-to-node-or-label"?F=q:(D==="outside-to-line"||D==="outside-to-line-or-label")&&(F=[f.x,f.y]),s=i.nodeShapes[this.getNodeShape(o)].intersectLine(l.x,l.y,o.outerWidth(),o.outerHeight(),F[0],F[1],0,_,p),D==="outside-to-node-or-label"||D==="outside-to-line-or-label"){var Ce=o._private.rscratch,Me=Ce.labelWidth,Pe=Ce.labelHeight,_e=Ce.labelX,ke=Ce.labelY,Te=Me/2,ue=Pe/2,J=o.pstyle("text-valign").value;J==="top"?ke-=ue:J==="bottom"&&(ke+=ue);var L=o.pstyle("text-halign").value;L==="left"?_e-=Te:L==="right"&&(_e+=Te);var Y=Ca(F[0],F[1],[_e-Te,ke-ue,_e+Te,ke-ue,_e+Te,ke+ue,_e-Te,ke+ue],l.x,l.y);if(Y.length>0){var Z=f,Q=Kr(Z,Dn(s)),ee=Kr(Z,Dn(Y)),ce=Q;if(ee<Q&&(s=[Y[0],Y[1]],ce=ee),Y.length>2){var re=Kr(Z,{x:Y[2],y:Y[3]});re<ce&&(s=[Y[2],Y[3]])}}}var ye=Ja(s,q,i.arrowShapes[h].spacing(t)+v),he=Ja(s,q,i.arrowShapes[h].gap(t)+v);m.startX=he[0],m.startY=he[1],m.arrowStartX=ye[0],m.arrowStartY=ye[1],A&&(!ie(m.startX)||!ie(m.startY)||!ie(m.endX)||!ie(m.endY)?m.badLine=!0:m.badLine=!1)};Ga.getSourceEndpoint=function(t){var e=t[0]._private.rscratch;switch(this.recalculateRenderedStyle(t),e.edgeType){case"haystack":return{x:e.haystackPts[0],y:e.haystackPts[1]};default:return{x:e.arrowStartX,y:e.arrowStartY}}};Ga.getTargetEndpoint=function(t){var e=t[0]._private.rscratch;switch(this.recalculateRenderedStyle(t),e.edgeType){case"haystack":return{x:e.haystackPts[2],y:e.haystackPts[3]};default:return{x:e.arrowEndX,y:e.arrowEndY}}};var Gv={};function TO(t,e,r){for(var n=function(l,f,c,h){return ft(l,f,c,h)},a=e._private,i=a.rstyle.bezierPts,s=0;s<t.bezierProjPcts.length;s++){var o=t.bezierProjPcts[s];i.push({x:n(r[0],r[2],r[4],o),y:n(r[1],r[3],r[5],o)})}}Gv.storeEdgeProjections=function(t){var e=t._private,r=e.rscratch,n=r.edgeType;if(e.rstyle.bezierPts=null,e.rstyle.linePts=null,e.rstyle.haystackPts=null,n==="multibezier"||n==="bezier"||n==="self"||n==="compound"){e.rstyle.bezierPts=[];for(var a=0;a+5<r.allpts.length;a+=4)TO(this,t,r.allpts.slice(a,a+6))}else if(n==="segments")for(var i=e.rstyle.linePts=[],a=0;a+1<r.allpts.length;a+=2)i.push({x:r.allpts[a],y:r.allpts[a+1]});else if(n==="haystack"){var s=r.haystackPts;e.rstyle.haystackPts=[{x:s[0],y:s[1]},{x:s[2],y:s[3]}]}e.rstyle.arrowWidth=this.getArrowWidth(t.pstyle("width").pfValue,t.pstyle("arrow-scale").value)*this.arrowShapeWidth};Gv.recalculateEdgeProjections=function(t){this.findEdgeControlPoints(t)};var tr={};tr.recalculateNodeLabelProjection=function(t){var e=t.pstyle("label").strValue;if(!Or(e)){var r,n,a=t._private,i=t.width(),s=t.height(),o=t.padding(),u=t.position(),l=t.pstyle("text-halign").strValue,f=t.pstyle("text-valign").strValue,c=a.rscratch,h=a.rstyle;switch(l){case"left":r=u.x-i/2-o;break;case"right":r=u.x+i/2+o;break;default:r=u.x}switch(f){case"top":n=u.y-s/2-o;break;case"bottom":n=u.y+s/2+o;break;default:n=u.y}c.labelX=r,c.labelY=n,h.labelX=r,h.labelY=n,this.calculateLabelAngles(t),this.applyLabelDimensions(t)}};var MT=function(e,r){var n=Math.atan(r/e);return e===0&&n<0&&(n=n*-1),n},OT=function(e,r){var n=r.x-e.x,a=r.y-e.y;return MT(n,a)},CO=function(e,r,n,a){var i=Ta(0,a-.001,1),s=Ta(0,a+.001,1),o=On(e,r,n,i),u=On(e,r,n,s);return OT(o,u)};tr.recalculateEdgeLabelProjections=function(t){var e,r=t._private,n=r.rscratch,a=this,i={mid:t.pstyle("label").strValue,source:t.pstyle("source-label").strValue,target:t.pstyle("target-label").strValue};if(i.mid||i.source||i.target){e={x:n.midX,y:n.midY};var s=function(c,h,d){or(r.rscratch,c,h,d),or(r.rstyle,c,h,d)};s("labelX",null,e.x),s("labelY",null,e.y);var o=MT(n.midDispX,n.midDispY);s("labelAutoAngle",null,o);var u=function(){if(u.cache)return u.cache;for(var c=[],h=0;h+5<n.allpts.length;h+=4){var d={x:n.allpts[h],y:n.allpts[h+1]},v={x:n.allpts[h+2],y:n.allpts[h+3]},p={x:n.allpts[h+4],y:n.allpts[h+5]};c.push({p0:d,p1:v,p2:p,startDist:0,length:0,segments:[]})}var g=r.rstyle.bezierPts,y=a.bezierProjPcts.length;function m(w,T,C,A,R){var I=un(T,C),D=w.segments[w.segments.length-1],_={p0:T,p1:C,t0:A,t1:R,startDist:D?D.startDist+D.length:0,length:I};w.segments.push(_),w.length+=I}for(var b=0;b<c.length;b++){var E=c[b],x=c[b-1];x&&(E.startDist=x.startDist+x.length),m(E,E.p0,g[b*y],0,a.bezierProjPcts[0]);for(var S=0;S<y-1;S++)m(E,g[b*y+S],g[b*y+S+1],a.bezierProjPcts[S],a.bezierProjPcts[S+1]);m(E,g[b*y+y-1],E.p2,a.bezierProjPcts[y-1],1)}return u.cache=c},l=function(c){var h,d=c==="source";if(i[c]){var v=t.pstyle(c+"-text-offset").pfValue;switch(n.edgeType){case"self":case"compound":case"bezier":case"multibezier":{for(var p=u(),g,y=0,m=0,b=0;b<p.length;b++){for(var E=p[d?b:p.length-1-b],x=0;x<E.segments.length;x++){var S=E.segments[d?x:E.segments.length-1-x],w=b===p.length-1&&x===E.segments.length-1;if(y=m,m+=S.length,m>=v||w){g={cp:E,segment:S};break}}if(g)break}var T=g.cp,C=g.segment,A=(v-y)/C.length,R=C.t1-C.t0,I=d?C.t0+R*A:C.t1-R*A;I=Ta(0,I,1),e=On(T.p0,T.p1,T.p2,I),h=CO(T.p0,T.p1,T.p2,I);break}case"straight":case"segments":case"haystack":{for(var D=0,_,M,k,O,P=n.allpts.length,q=0;q+3<P&&(d?(k={x:n.allpts[q],y:n.allpts[q+1]},O={x:n.allpts[q+2],y:n.allpts[q+3]}):(k={x:n.allpts[P-2-q],y:n.allpts[P-1-q]},O={x:n.allpts[P-4-q],y:n.allpts[P-3-q]}),_=un(k,O),M=D,D+=_,!(D>=v));q+=2);var G=v-M,F=G/_;F=Ta(0,F,1),e=YD(k,O,F),h=OT(k,O);break}}s("labelX",c,e.x),s("labelY",c,e.y),s("labelAutoAngle",c,h)}};l("source"),l("target"),this.applyLabelDimensions(t)}};tr.applyLabelDimensions=function(t){this.applyPrefixedLabelDimensions(t),t.isEdge()&&(this.applyPrefixedLabelDimensions(t,"source"),this.applyPrefixedLabelDimensions(t,"target"))};tr.applyPrefixedLabelDimensions=function(t,e){var r=t._private,n=this.getLabelText(t,e),a=on(n,t._private.labelDimsKey);if(Dt(r.rscratch,"prefixedLabelDimsKey",e)!==a){or(r.rscratch,"prefixedLabelDimsKey",e,a);var i=this.calculateLabelDimensions(t,n),s=t.pstyle("line-height").pfValue,o=t.pstyle("text-wrap").strValue,u=Dt(r.rscratch,"labelWrapCachedLines",e)||[],l=o!=="wrap"?1:Math.max(u.length,1),f=i.height/l,c=f*s,h=i.width,d=i.height+(l-1)*(s-1)*f;or(r.rstyle,"labelWidth",e,h),or(r.rscratch,"labelWidth",e,h),or(r.rstyle,"labelHeight",e,d),or(r.rscratch,"labelHeight",e,d),or(r.rscratch,"labelLineHeight",e,c)}};tr.getLabelText=function(t,e){var r=t._private,n=e?e+"-":"",a=t.pstyle(n+"label").strValue,i=t.pstyle("text-transform").value,s=function(W,N){return N?(or(r.rscratch,W,e,N),N):Dt(r.rscratch,W,e)};if(!a)return"";i=="none"||(i=="uppercase"?a=a.toUpperCase():i=="lowercase"&&(a=a.toLowerCase()));var o=t.pstyle("text-wrap").value;if(o==="wrap"){var u=s("labelKey");if(u!=null&&s("labelWrapKey")===u)return s("labelWrapCachedText");for(var l="",f=a.split(`
`),c=t.pstyle("text-max-width").pfValue,h=t.pstyle("text-overflow-wrap").value,d=h==="anywhere",v=[],p=/[\s\u200b]+|$/g,g=0;g<f.length;g++){var y=f[g],m=this.calculateLabelDimensions(t,y),b=m.width;if(d){var E=y.split("").join(l);y=E}if(b>c){var x=y.matchAll(p),S="",w=0,T=Lt(x),C;try{for(T.s();!(C=T.n()).done;){var A=C.value,R=A[0],I=y.substring(w,A.index);w=A.index+R.length;var D=S.length===0?I:S+I+R,_=this.calculateLabelDimensions(t,D),M=_.width;M<=c?S+=I+R:(S&&v.push(S),S=I+R)}}catch(z){T.e(z)}finally{T.f()}S.match(/^[\s\u200b]+$/)||v.push(S)}else v.push(y)}s("labelWrapCachedLines",v),a=s("labelWrapCachedText",v.join(`
`)),s("labelWrapKey",u)}else if(o==="ellipsis"){var k=t.pstyle("text-max-width").pfValue,O="",P="",q=!1;if(this.calculateLabelDimensions(t,a).width<k)return a;for(var G=0;G<a.length;G++){var F=this.calculateLabelDimensions(t,O+a[G]+P).width;if(F>k)break;O+=a[G],G===a.length-1&&(q=!0)}return q||(O+=P),O}return a};tr.getLabelJustification=function(t){var e=t.pstyle("text-justification").strValue,r=t.pstyle("text-halign").strValue;if(e==="auto")if(t.isNode())switch(r){case"left":return"right";case"right":return"left";default:return"center"}else return"center";else return e};tr.calculateLabelDimensions=function(t,e){var r=this,n=r.cy.window(),a=n.document,i=0,s=t.pstyle("font-style").strValue,o=t.pstyle("font-size").pfValue,u=t.pstyle("font-family").strValue,l=t.pstyle("font-weight").strValue,f=this.labelCalcCanvas,c=this.labelCalcCanvasContext;if(!f){f=this.labelCalcCanvas=a.createElement("canvas"),c=this.labelCalcCanvasContext=f.getContext("2d");var h=f.style;h.position="absolute",h.left="-9999px",h.top="-9999px",h.zIndex="-1",h.visibility="hidden",h.pointerEvents="none"}c.font="".concat(s," ").concat(l," ").concat(o,"px ").concat(u);for(var d=0,v=0,p=e.split(`
`),g=0;g<p.length;g++){var y=p[g],m=c.measureText(y),b=Math.ceil(m.width),E=o;d=Math.max(b,d),v+=E}return d+=i,v+=i,{width:d,height:v}};tr.calculateLabelAngle=function(t,e){var r=t._private,n=r.rscratch,a=t.isEdge(),i=e?e+"-":"",s=t.pstyle(i+"text-rotation"),o=s.strValue;return o==="none"?0:a&&o==="autorotate"?n.labelAutoAngle:o==="autorotate"?0:s.pfValue};tr.calculateLabelAngles=function(t){var e=this,r=t.isEdge(),n=t._private,a=n.rscratch;a.labelAngle=e.calculateLabelAngle(t),r&&(a.sourceLabelAngle=e.calculateLabelAngle(t,"source"),a.targetLabelAngle=e.calculateLabelAngle(t,"target"))};var PT={},$y=28,Vy=!1;PT.getNodeShape=function(t){var e=this,r=t.pstyle("shape").value;if(r==="cutrectangle"&&(t.width()<$y||t.height()<$y))return Vy||(Ge("The `cutrectangle` node shape can not be used at small sizes so `rectangle` is used instead"),Vy=!0),"rectangle";if(t.isParent())return r==="rectangle"||r==="roundrectangle"||r==="round-rectangle"||r==="cutrectangle"||r==="cut-rectangle"||r==="barrel"?r:"rectangle";if(r==="polygon"){var n=t.pstyle("shape-polygon-points").value;return e.nodeShapes.makePolygon(n).name}return r};var ls={};ls.registerCalculationListeners=function(){var t=this.cy,e=t.collection(),r=this,n=function(s){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(e.merge(s),o)for(var u=0;u<s.length;u++){var l=s[u],f=l._private,c=f.rstyle;c.clean=!1,c.cleanConnected=!1}};r.binder(t).on("bounds.* dirty.*",function(s){var o=s.target;n(o)}).on("style.* background.*",function(s){var o=s.target;n(o,!1)});var a=function(s){if(s){var o=r.onUpdateEleCalcsFns;e.cleanStyle();for(var u=0;u<e.length;u++){var l=e[u],f=l._private.rstyle;l.isNode()&&!f.cleanConnected&&(n(l.connectedEdges()),f.cleanConnected=!0)}if(o)for(var c=0;c<o.length;c++){var h=o[c];h(s,e)}r.recalculateRenderedStyle(e),e=t.collection()}};r.flushRenderedStyleQueue=function(){a(!0)},r.beforeRender(a,r.beforeRenderPriorities.eleCalcs)};ls.onUpdateEleCalcs=function(t){var e=this.onUpdateEleCalcsFns=this.onUpdateEleCalcsFns||[];e.push(t)};ls.recalculateRenderedStyle=function(t,e){var r=function(E){return E._private.rstyle.cleanConnected};if(t.length!==0){var n=[],a=[];if(!this.destroyed){e===void 0&&(e=!0);for(var i=0;i<t.length;i++){var s=t[i],o=s._private,u=o.rstyle;s.isEdge()&&(!r(s.source())||!r(s.target()))&&(u.clean=!1),s.isEdge()&&s.isBundledBezier()&&s.parallelEdges().some(function(b){return!b._private.rstyle.clean&&b.isBundledBezier()})&&(u.clean=!1),!(e&&u.clean||s.removed())&&s.pstyle("display").value!=="none"&&(o.group==="nodes"?a.push(s):n.push(s),u.clean=!0)}for(var l=0;l<a.length;l++){var f=a[l],c=f._private,h=c.rstyle,d=f.position();this.recalculateNodeLabelProjection(f),h.nodeX=d.x,h.nodeY=d.y,h.nodeW=f.pstyle("width").pfValue,h.nodeH=f.pstyle("height").pfValue}this.recalculateEdgeProjections(n);for(var v=0;v<n.length;v++){var p=n[v],g=p._private,y=g.rstyle,m=g.rscratch;y.srcX=m.arrowStartX,y.srcY=m.arrowStartY,y.tgtX=m.arrowEndX,y.tgtY=m.arrowEndY,y.midX=m.midX,y.midY=m.midY,y.labelAngle=m.labelAngle,y.sourceLabelAngle=m.sourceLabelAngle,y.targetLabelAngle=m.targetLabelAngle}}}};var fs={};fs.updateCachedGrabbedEles=function(){var t=this.cachedZSortedEles;if(t){t.drag=[],t.nondrag=[];for(var e=[],r=0;r<t.length;r++){var n=t[r],a=n._private.rscratch;n.grabbed()&&!n.isParent()?e.push(n):a.inDragLayer?t.drag.push(n):t.nondrag.push(n)}for(var r=0;r<e.length;r++){var n=e[r];t.drag.push(n)}}};fs.invalidateCachedZSortedEles=function(){this.cachedZSortedEles=null};fs.getCachedZSortedEles=function(t){if(t||!this.cachedZSortedEles){var e=this.cy.mutableElements().toArray();e.sort(gT),e.interactive=e.filter(function(r){return r.interactive()}),this.cachedZSortedEles=e,this.updateCachedGrabbedEles()}else e=this.cachedZSortedEles;return e};var kT={};[dn,Pi,Et,Ga,Gv,tr,PT,ls,fs].forEach(function(t){xe(kT,t)});var NT={};NT.getCachedImage=function(t,e,r){var n=this,a=n.imageCache=n.imageCache||{},i=a[t];if(i)return i.image.complete||i.image.addEventListener("load",r),i.image;i=a[t]=a[t]||{};var s=i.image=new Image;s.addEventListener("load",r),s.addEventListener("error",function(){s.error=!0});var o="data:",u=t.substring(0,o.length).toLowerCase()===o;return u||(e=e==="null"?null:e,s.crossOrigin=e),s.src=t,s};var Hn={};Hn.registerBinding=function(t,e,r,n){var a=Array.prototype.slice.apply(arguments,[1]);if(Array.isArray(t)){for(var i=[],s=0;s<t.length;s++){var o=t[s];if(o!==void 0){var u=this.binder(o);i.push(u.on.apply(u,a))}}return i}var u=this.binder(t);return u.on.apply(u,a)};Hn.binder=function(t){var e=this,r=e.cy.window(),n=t===r||t===r.document||t===r.document.body||NI(t);if(e.supportsPassiveEvents==null){var a=!1;try{var i=Object.defineProperty({},"passive",{get:function(){return a=!0,!0}});r.addEventListener("test",null,i)}catch{}e.supportsPassiveEvents=a}var s=function(u,l,f){var c=Array.prototype.slice.call(arguments);return n&&e.supportsPassiveEvents&&(c[2]={capture:f??!1,passive:!1,once:!1}),e.bindings.push({target:t,args:c}),(t.addEventListener||t.on).apply(t,c),this};return{on:s,addEventListener:s,addListener:s,bind:s}};Hn.nodeIsDraggable=function(t){return t&&t.isNode()&&!t.locked()&&t.grabbable()};Hn.nodeIsGrabbable=function(t){return this.nodeIsDraggable(t)&&t.interactive()};Hn.load=function(){var t=this,e=t.cy.window(),r=function(L){return L.selected()},n=function(L){var Y=L.getRootNode();if(Y&&Y.nodeType===11&&Y.host!==void 0)return Y},a=function(L,Y,Z,Q){L==null&&(L=t.cy);for(var ee=0;ee<Y.length;ee++){var ce=Y[ee];L.emit({originalEvent:Z,type:ce,position:Q})}},i=function(L){return L.shiftKey||L.metaKey||L.ctrlKey},s=function(L,Y){var Z=!0;if(t.cy.hasCompoundNodes()&&L&&L.pannable())for(var Q=0;Y&&Q<Y.length;Q++){var L=Y[Q];if(L.isNode()&&L.isParent()&&!L.pannable()){Z=!1;break}}else Z=!0;return Z},o=function(L){L[0]._private.grabbed=!0},u=function(L){L[0]._private.grabbed=!1},l=function(L){L[0]._private.rscratch.inDragLayer=!0},f=function(L){L[0]._private.rscratch.inDragLayer=!1},c=function(L){L[0]._private.rscratch.isGrabTarget=!0},h=function(L){L[0]._private.rscratch.isGrabTarget=!1},d=function(L,Y){var Z=Y.addToList,Q=Z.has(L);!Q&&L.grabbable()&&!L.locked()&&(Z.merge(L),o(L))},v=function(L,Y){if(L.cy().hasCompoundNodes()&&!(Y.inDragLayer==null&&Y.addToList==null)){var Z=L.descendants();Y.inDragLayer&&(Z.forEach(l),Z.connectedEdges().forEach(l)),Y.addToList&&d(Z,Y)}},p=function(L,Y){Y=Y||{};var Z=L.cy().hasCompoundNodes();Y.inDragLayer&&(L.forEach(l),L.neighborhood().stdFilter(function(Q){return!Z||Q.isEdge()}).forEach(l)),Y.addToList&&L.forEach(function(Q){d(Q,Y)}),v(L,Y),m(L,{inDragLayer:Y.inDragLayer}),t.updateCachedGrabbedEles()},g=p,y=function(L){L&&(t.getCachedZSortedEles().forEach(function(Y){u(Y),f(Y),h(Y)}),t.updateCachedGrabbedEles())},m=function(L,Y){if(!(Y.inDragLayer==null&&Y.addToList==null)&&L.cy().hasCompoundNodes()){var Z=L.ancestors().orphans();if(!Z.same(L)){var Q=Z.descendants().spawnSelf().merge(Z).unmerge(L).unmerge(L.descendants()),ee=Q.connectedEdges();Y.inDragLayer&&(ee.forEach(l),Q.forEach(l)),Y.addToList&&Q.forEach(function(ce){d(ce,Y)})}}},b=function(){document.activeElement!=null&&document.activeElement.blur!=null&&document.activeElement.blur()},E=typeof MutationObserver<"u",x=typeof ResizeObserver<"u";E?(t.removeObserver=new MutationObserver(function(J){for(var L=0;L<J.length;L++){var Y=J[L],Z=Y.removedNodes;if(Z)for(var Q=0;Q<Z.length;Q++){var ee=Z[Q];if(ee===t.container){t.destroy();break}}}}),t.container.parentNode&&t.removeObserver.observe(t.container.parentNode,{childList:!0})):t.registerBinding(t.container,"DOMNodeRemoved",function(J){t.destroy()});var S=Na(function(){t.cy.resize()},100);E&&(t.styleObserver=new MutationObserver(S),t.styleObserver.observe(t.container,{attributes:!0})),t.registerBinding(e,"resize",S),x&&(t.resizeObserver=new ResizeObserver(S),t.resizeObserver.observe(t.container));var w=function(L,Y){for(;L!=null;)Y(L),L=L.parentNode},T=function(){t.invalidateContainerClientCoordsCache()};w(t.container,function(J){t.registerBinding(J,"transitionend",T),t.registerBinding(J,"animationend",T),t.registerBinding(J,"scroll",T)}),t.registerBinding(t.container,"contextmenu",function(J){J.preventDefault()});var C=function(){return t.selection[4]!==0},A=function(L){for(var Y=t.findContainerClientCoords(),Z=Y[0],Q=Y[1],ee=Y[2],ce=Y[3],re=L.touches?L.touches:[L],ye=!1,he=0;he<re.length;he++){var Ee=re[he];if(Z<=Ee.clientX&&Ee.clientX<=Z+ee&&Q<=Ee.clientY&&Ee.clientY<=Q+ce){ye=!0;break}}if(!ye)return!1;for(var Ie=t.container,Ae=L.target,me=Ae.parentNode,Le=!1;me;){if(me===Ie){Le=!0;break}me=me.parentNode}return!!Le};t.registerBinding(t.container,"mousedown",function(L){if(A(L)&&!(t.hoverData.which===1&&L.which!==1)){L.preventDefault(),b(),t.hoverData.capture=!0,t.hoverData.which=L.which;var Y=t.cy,Z=[L.clientX,L.clientY],Q=t.projectIntoViewport(Z[0],Z[1]),ee=t.selection,ce=t.findNearestElements(Q[0],Q[1],!0,!1),re=ce[0],ye=t.dragData.possibleDragElements;t.hoverData.mdownPos=Q,t.hoverData.mdownGPos=Z;var he=function(De){return{originalEvent:L,type:De,position:{x:Q[0],y:Q[1]}}},Ee=function(){t.hoverData.tapholdCancelled=!1,clearTimeout(t.hoverData.tapholdTimeout),t.hoverData.tapholdTimeout=setTimeout(function(){if(!t.hoverData.tapholdCancelled){var De=t.hoverData.down;De?De.emit(he("taphold")):Y.emit(he("taphold"))}},t.tapholdDuration)};if(L.which==3){t.hoverData.cxtStarted=!0;var Ie={originalEvent:L,type:"cxttapstart",position:{x:Q[0],y:Q[1]}};re?(re.activate(),re.emit(Ie),t.hoverData.down=re):Y.emit(Ie),t.hoverData.downTime=new Date().getTime(),t.hoverData.cxtDragged=!1}else if(L.which==1){re&&re.activate();{if(re!=null&&t.nodeIsGrabbable(re)){var Ae=function(De){De.emit(he("grab"))};if(c(re),!re.selected())ye=t.dragData.possibleDragElements=Y.collection(),g(re,{addToList:ye}),re.emit(he("grabon")).emit(he("grab"));else{ye=t.dragData.possibleDragElements=Y.collection();var me=Y.$(function(Le){return Le.isNode()&&Le.selected()&&t.nodeIsGrabbable(Le)});p(me,{addToList:ye}),re.emit(he("grabon")),me.forEach(Ae)}t.redrawHint("eles",!0),t.redrawHint("drag",!0)}t.hoverData.down=re,t.hoverData.downs=ce,t.hoverData.downTime=new Date().getTime()}a(re,["mousedown","tapstart","vmousedown"],L,{x:Q[0],y:Q[1]}),re==null?(ee[4]=1,t.data.bgActivePosistion={x:Q[0],y:Q[1]},t.redrawHint("select",!0),t.redraw()):re.pannable()&&(ee[4]=1),Ee()}ee[0]=ee[2]=Q[0],ee[1]=ee[3]=Q[1]}},!1);var R=n(t.container);t.registerBinding([e,R],"mousemove",function(L){var Y=t.hoverData.capture;if(!(!Y&&!A(L))){var Z=!1,Q=t.cy,ee=Q.zoom(),ce=[L.clientX,L.clientY],re=t.projectIntoViewport(ce[0],ce[1]),ye=t.hoverData.mdownPos,he=t.hoverData.mdownGPos,Ee=t.selection,Ie=null;!t.hoverData.draggingEles&&!t.hoverData.dragging&&!t.hoverData.selecting&&(Ie=t.findNearestElement(re[0],re[1],!0,!1));var Ae=t.hoverData.last,me=t.hoverData.down,Le=[re[0]-Ee[2],re[1]-Ee[3]],De=t.dragData.possibleDragElements,nt;if(he){var je=ce[0]-he[0],xt=je*je,Qe=ce[1]-he[1],lt=Qe*Qe,at=xt+lt;t.hoverData.isOverThresholdDrag=nt=at>=t.desktopTapThreshold2}var dt=i(L);nt&&(t.hoverData.tapholdCancelled=!0);var yr=function(){var kt=t.hoverData.dragDelta=t.hoverData.dragDelta||[];kt.length===0?(kt.push(Le[0]),kt.push(Le[1])):(kt[0]+=Le[0],kt[1]+=Le[1])};Z=!0,a(Ie,["mousemove","vmousemove","tapdrag"],L,{x:re[0],y:re[1]});var Je=function(kt){return{originalEvent:L,type:kt,position:{x:re[0],y:re[1]}}},ar=function(){t.data.bgActivePosistion=void 0,t.hoverData.selecting||Q.emit(Je("boxstart")),Ee[4]=1,t.hoverData.selecting=!0,t.redrawHint("select",!0),t.redraw()};if(t.hoverData.which===3){if(nt){var ir=Je("cxtdrag");me?me.emit(ir):Q.emit(ir),t.hoverData.cxtDragged=!0,(!t.hoverData.cxtOver||Ie!==t.hoverData.cxtOver)&&(t.hoverData.cxtOver&&t.hoverData.cxtOver.emit(Je("cxtdragout")),t.hoverData.cxtOver=Ie,Ie&&Ie.emit(Je("cxtdragover")))}}else if(t.hoverData.dragging){if(Z=!0,Q.panningEnabled()&&Q.userPanningEnabled()){var bn;if(t.hoverData.justStartedPan){var Xa=t.hoverData.mdownPos;bn={x:(re[0]-Xa[0])*ee,y:(re[1]-Xa[1])*ee},t.hoverData.justStartedPan=!1}else bn={x:Le[0]*ee,y:Le[1]*ee};Q.panBy(bn),Q.emit(Je("dragpan")),t.hoverData.dragged=!0}re=t.projectIntoViewport(L.clientX,L.clientY)}else if(Ee[4]==1&&(me==null||me.pannable())){if(nt){if(!t.hoverData.dragging&&Q.boxSelectionEnabled()&&(dt||!Q.panningEnabled()||!Q.userPanningEnabled()))ar();else if(!t.hoverData.selecting&&Q.panningEnabled()&&Q.userPanningEnabled()){var Hr=s(me,t.hoverData.downs);Hr&&(t.hoverData.dragging=!0,t.hoverData.justStartedPan=!0,Ee[4]=0,t.data.bgActivePosistion=Dn(ye),t.redrawHint("select",!0),t.redraw())}me&&me.pannable()&&me.active()&&me.unactivate()}}else{if(me&&me.pannable()&&me.active()&&me.unactivate(),(!me||!me.grabbed())&&Ie!=Ae&&(Ae&&a(Ae,["mouseout","tapdragout"],L,{x:re[0],y:re[1]}),Ie&&a(Ie,["mouseover","tapdragover"],L,{x:re[0],y:re[1]}),t.hoverData.last=Ie),me)if(nt){if(Q.boxSelectionEnabled()&&dt)me&&me.grabbed()&&(y(De),me.emit(Je("freeon")),De.emit(Je("free")),t.dragData.didDrag&&(me.emit(Je("dragfreeon")),De.emit(Je("dragfree")))),ar();else if(me&&me.grabbed()&&t.nodeIsDraggable(me)){var Rt=!t.dragData.didDrag;Rt&&t.redrawHint("eles",!0),t.dragData.didDrag=!0,t.hoverData.draggingEles||p(De,{inDragLayer:!0});var mt={x:0,y:0};if(ie(Le[0])&&ie(Le[1])&&(mt.x+=Le[0],mt.y+=Le[1],Rt)){var It=t.hoverData.dragDelta;It&&ie(It[0])&&ie(It[1])&&(mt.x+=It[0],mt.y+=It[1])}t.hoverData.draggingEles=!0,De.silentShift(mt).emit(Je("position")).emit(Je("drag")),t.redrawHint("drag",!0),t.redraw()}}else yr();Z=!0}if(Ee[2]=re[0],Ee[3]=re[1],Z)return L.stopPropagation&&L.stopPropagation(),L.preventDefault&&L.preventDefault(),!1}},!1);var I,D,_;t.registerBinding(e,"mouseup",function(L){if(!(t.hoverData.which===1&&L.which!==1&&t.hoverData.capture)){var Y=t.hoverData.capture;if(Y){t.hoverData.capture=!1;var Z=t.cy,Q=t.projectIntoViewport(L.clientX,L.clientY),ee=t.selection,ce=t.findNearestElement(Q[0],Q[1],!0,!1),re=t.dragData.possibleDragElements,ye=t.hoverData.down,he=i(L);t.data.bgActivePosistion&&(t.redrawHint("select",!0),t.redraw()),t.hoverData.tapholdCancelled=!0,t.data.bgActivePosistion=void 0,ye&&ye.unactivate();var Ee=function(je){return{originalEvent:L,type:je,position:{x:Q[0],y:Q[1]}}};if(t.hoverData.which===3){var Ie=Ee("cxttapend");if(ye?ye.emit(Ie):Z.emit(Ie),!t.hoverData.cxtDragged){var Ae=Ee("cxttap");ye?ye.emit(Ae):Z.emit(Ae)}t.hoverData.cxtDragged=!1,t.hoverData.which=null}else if(t.hoverData.which===1){if(a(ce,["mouseup","tapend","vmouseup"],L,{x:Q[0],y:Q[1]}),!t.dragData.didDrag&&!t.hoverData.dragged&&!t.hoverData.selecting&&!t.hoverData.isOverThresholdDrag&&(a(ye,["click","tap","vclick"],L,{x:Q[0],y:Q[1]}),D=!1,L.timeStamp-_<=Z.multiClickDebounceTime()?(I&&clearTimeout(I),D=!0,_=null,a(ye,["dblclick","dbltap","vdblclick"],L,{x:Q[0],y:Q[1]})):(I=setTimeout(function(){D||a(ye,["oneclick","onetap","voneclick"],L,{x:Q[0],y:Q[1]})},Z.multiClickDebounceTime()),_=L.timeStamp)),ye==null&&!t.dragData.didDrag&&!t.hoverData.selecting&&!t.hoverData.dragged&&!i(L)&&(Z.$(r).unselect(["tapunselect"]),re.length>0&&t.redrawHint("eles",!0),t.dragData.possibleDragElements=re=Z.collection()),ce==ye&&!t.dragData.didDrag&&!t.hoverData.selecting&&ce!=null&&ce._private.selectable&&(t.hoverData.dragging||(Z.selectionType()==="additive"||he?ce.selected()?ce.unselect(["tapunselect"]):ce.select(["tapselect"]):he||(Z.$(r).unmerge(ce).unselect(["tapunselect"]),ce.select(["tapselect"]))),t.redrawHint("eles",!0)),t.hoverData.selecting){var me=Z.collection(t.getAllInBox(ee[0],ee[1],ee[2],ee[3]));t.redrawHint("select",!0),me.length>0&&t.redrawHint("eles",!0),Z.emit(Ee("boxend"));var Le=function(je){return je.selectable()&&!je.selected()};Z.selectionType()==="additive"||he||Z.$(r).unmerge(me).unselect(),me.emit(Ee("box")).stdFilter(Le).select().emit(Ee("boxselect")),t.redraw()}if(t.hoverData.dragging&&(t.hoverData.dragging=!1,t.redrawHint("select",!0),t.redrawHint("eles",!0),t.redraw()),!ee[4]){t.redrawHint("drag",!0),t.redrawHint("eles",!0);var De=ye&&ye.grabbed();y(re),De&&(ye.emit(Ee("freeon")),re.emit(Ee("free")),t.dragData.didDrag&&(ye.emit(Ee("dragfreeon")),re.emit(Ee("dragfree"))))}}ee[4]=0,t.hoverData.down=null,t.hoverData.cxtStarted=!1,t.hoverData.draggingEles=!1,t.hoverData.selecting=!1,t.hoverData.isOverThresholdDrag=!1,t.dragData.didDrag=!1,t.hoverData.dragged=!1,t.hoverData.dragDelta=[],t.hoverData.mdownPos=null,t.hoverData.mdownGPos=null,t.hoverData.which=null}}},!1);var M=[],k=4,O,P=1e5,q=function(L,Y){for(var Z=0;Z<L.length;Z++)if(L[Z]%Y!==0)return!1;return!0},G=function(L){for(var Y=Math.abs(L[0]),Z=1;Z<L.length;Z++)if(Math.abs(L[Z])!==Y)return!1;return!0},F=function(L){var Y=!1,Z=L.deltaY;if(Z==null&&(L.wheelDeltaY!=null?Z=L.wheelDeltaY/4:L.wheelDelta!=null&&(Z=L.wheelDelta/4)),Z!==0){if(O==null)if(M.length>=k){var Q=M;if(O=q(Q,5),!O){var ee=Math.abs(Q[0]);O=G(Q)&&ee>5}if(O)for(var ce=0;ce<Q.length;ce++)P=Math.min(Math.abs(Q[ce]),P)}else M.push(Z),Y=!0;else O&&(P=Math.min(Math.abs(Z),P));if(!t.scrollingPage){var re=t.cy,ye=re.zoom(),he=re.pan(),Ee=t.projectIntoViewport(L.clientX,L.clientY),Ie=[Ee[0]*ye+he.x,Ee[1]*ye+he.y];if(t.hoverData.draggingEles||t.hoverData.dragging||t.hoverData.cxtStarted||C()){L.preventDefault();return}if(re.panningEnabled()&&re.userPanningEnabled()&&re.zoomingEnabled()&&re.userZoomingEnabled()){L.preventDefault(),t.data.wheelZooming=!0,clearTimeout(t.data.wheelTimeout),t.data.wheelTimeout=setTimeout(function(){t.data.wheelZooming=!1,t.redrawHint("eles",!0),t.redraw()},150);var Ae;Y&&Math.abs(Z)>5&&(Z=Av(Z)*5),Ae=Z/-250,O&&(Ae/=P,Ae*=3),Ae=Ae*t.wheelSensitivity;var me=L.deltaMode===1;me&&(Ae*=33);var Le=re.zoom()*Math.pow(10,Ae);L.type==="gesturechange"&&(Le=t.gestureStartZoom*L.scale),re.zoom({level:Le,renderedPosition:{x:Ie[0],y:Ie[1]}}),re.emit({type:L.type==="gesturechange"?"pinchzoom":"scrollzoom",originalEvent:L,position:{x:Ee[0],y:Ee[1]}})}}}};t.registerBinding(t.container,"wheel",F,!0),t.registerBinding(e,"scroll",function(L){t.scrollingPage=!0,clearTimeout(t.scrollingPageTimeout),t.scrollingPageTimeout=setTimeout(function(){t.scrollingPage=!1},250)},!0),t.registerBinding(t.container,"gesturestart",function(L){t.gestureStartZoom=t.cy.zoom(),t.hasTouchStarted||L.preventDefault()},!0),t.registerBinding(t.container,"gesturechange",function(J){t.hasTouchStarted||F(J)},!0),t.registerBinding(t.container,"mouseout",function(L){var Y=t.projectIntoViewport(L.clientX,L.clientY);t.cy.emit({originalEvent:L,type:"mouseout",position:{x:Y[0],y:Y[1]}})},!1),t.registerBinding(t.container,"mouseover",function(L){var Y=t.projectIntoViewport(L.clientX,L.clientY);t.cy.emit({originalEvent:L,type:"mouseover",position:{x:Y[0],y:Y[1]}})},!1);var z,W,N,B,$,H,te,K,V,U,X,j,ne,ae=function(L,Y,Z,Q){return Math.sqrt((Z-L)*(Z-L)+(Q-Y)*(Q-Y))},Se=function(L,Y,Z,Q){return(Z-L)*(Z-L)+(Q-Y)*(Q-Y)},se;t.registerBinding(t.container,"touchstart",se=function(L){if(t.hasTouchStarted=!0,!!A(L)){b(),t.touchData.capture=!0,t.data.bgActivePosistion=void 0;var Y=t.cy,Z=t.touchData.now,Q=t.touchData.earlier;if(L.touches[0]){var ee=t.projectIntoViewport(L.touches[0].clientX,L.touches[0].clientY);Z[0]=ee[0],Z[1]=ee[1]}if(L.touches[1]){var ee=t.projectIntoViewport(L.touches[1].clientX,L.touches[1].clientY);Z[2]=ee[0],Z[3]=ee[1]}if(L.touches[2]){var ee=t.projectIntoViewport(L.touches[2].clientX,L.touches[2].clientY);Z[4]=ee[0],Z[5]=ee[1]}var ce=function(dt){return{originalEvent:L,type:dt,position:{x:Z[0],y:Z[1]}}};if(L.touches[1]){t.touchData.singleTouchMoved=!0,y(t.dragData.touchDragEles);var re=t.findContainerClientCoords();V=re[0],U=re[1],X=re[2],j=re[3],z=L.touches[0].clientX-V,W=L.touches[0].clientY-U,N=L.touches[1].clientX-V,B=L.touches[1].clientY-U,ne=0<=z&&z<=X&&0<=N&&N<=X&&0<=W&&W<=j&&0<=B&&B<=j;var ye=Y.pan(),he=Y.zoom();$=ae(z,W,N,B),H=Se(z,W,N,B),te=[(z+N)/2,(W+B)/2],K=[(te[0]-ye.x)/he,(te[1]-ye.y)/he];var Ee=200,Ie=Ee*Ee;if(H<Ie&&!L.touches[2]){var Ae=t.findNearestElement(Z[0],Z[1],!0,!0),me=t.findNearestElement(Z[2],Z[3],!0,!0);Ae&&Ae.isNode()?(Ae.activate().emit(ce("cxttapstart")),t.touchData.start=Ae):me&&me.isNode()?(me.activate().emit(ce("cxttapstart")),t.touchData.start=me):Y.emit(ce("cxttapstart")),t.touchData.start&&(t.touchData.start._private.grabbed=!1),t.touchData.cxt=!0,t.touchData.cxtDragged=!1,t.data.bgActivePosistion=void 0,t.redraw();return}}if(L.touches[2])Y.boxSelectionEnabled()&&L.preventDefault();else if(!L.touches[1]){if(L.touches[0]){var Le=t.findNearestElements(Z[0],Z[1],!0,!0),De=Le[0];if(De!=null&&(De.activate(),t.touchData.start=De,t.touchData.starts=Le,t.nodeIsGrabbable(De))){var nt=t.dragData.touchDragEles=Y.collection(),je=null;t.redrawHint("eles",!0),t.redrawHint("drag",!0),De.selected()?(je=Y.$(function(at){return at.selected()&&t.nodeIsGrabbable(at)}),p(je,{addToList:nt})):g(De,{addToList:nt}),c(De),De.emit(ce("grabon")),je?je.forEach(function(at){at.emit(ce("grab"))}):De.emit(ce("grab"))}a(De,["touchstart","tapstart","vmousedown"],L,{x:Z[0],y:Z[1]}),De==null&&(t.data.bgActivePosistion={x:ee[0],y:ee[1]},t.redrawHint("select",!0),t.redraw()),t.touchData.singleTouchMoved=!1,t.touchData.singleTouchStartTime=+new Date,clearTimeout(t.touchData.tapholdTimeout),t.touchData.tapholdTimeout=setTimeout(function(){t.touchData.singleTouchMoved===!1&&!t.pinching&&!t.touchData.selecting&&a(t.touchData.start,["taphold"],L,{x:Z[0],y:Z[1]})},t.tapholdDuration)}}if(L.touches.length>=1){for(var xt=t.touchData.startPosition=[null,null,null,null,null,null],Qe=0;Qe<Z.length;Qe++)xt[Qe]=Q[Qe]=Z[Qe];var lt=L.touches[0];t.touchData.startGPosition=[lt.clientX,lt.clientY]}}},!1);var be;t.registerBinding(e,"touchmove",be=function(L){var Y=t.touchData.capture;if(!(!Y&&!A(L))){var Z=t.selection,Q=t.cy,ee=t.touchData.now,ce=t.touchData.earlier,re=Q.zoom();if(L.touches[0]){var ye=t.projectIntoViewport(L.touches[0].clientX,L.touches[0].clientY);ee[0]=ye[0],ee[1]=ye[1]}if(L.touches[1]){var ye=t.projectIntoViewport(L.touches[1].clientX,L.touches[1].clientY);ee[2]=ye[0],ee[3]=ye[1]}if(L.touches[2]){var ye=t.projectIntoViewport(L.touches[2].clientX,L.touches[2].clientY);ee[4]=ye[0],ee[5]=ye[1]}var he=function(ES){return{originalEvent:L,type:ES,position:{x:ee[0],y:ee[1]}}},Ee=t.touchData.startGPosition,Ie;if(Y&&L.touches[0]&&Ee){for(var Ae=[],me=0;me<ee.length;me++)Ae[me]=ee[me]-ce[me];var Le=L.touches[0].clientX-Ee[0],De=Le*Le,nt=L.touches[0].clientY-Ee[1],je=nt*nt,xt=De+je;Ie=xt>=t.touchTapThreshold2}if(Y&&t.touchData.cxt){L.preventDefault();var Qe=L.touches[0].clientX-V,lt=L.touches[0].clientY-U,at=L.touches[1].clientX-V,dt=L.touches[1].clientY-U,yr=Se(Qe,lt,at,dt),Je=yr/H,ar=150,ir=ar*ar,bn=1.5,Xa=bn*bn;if(Je>=Xa||yr>=ir){t.touchData.cxt=!1,t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);var Hr=he("cxttapend");t.touchData.start?(t.touchData.start.unactivate().emit(Hr),t.touchData.start=null):Q.emit(Hr)}}if(Y&&t.touchData.cxt){var Hr=he("cxtdrag");t.data.bgActivePosistion=void 0,t.redrawHint("select",!0),t.touchData.start?t.touchData.start.emit(Hr):Q.emit(Hr),t.touchData.start&&(t.touchData.start._private.grabbed=!1),t.touchData.cxtDragged=!0;var Rt=t.findNearestElement(ee[0],ee[1],!0,!0);(!t.touchData.cxtOver||Rt!==t.touchData.cxtOver)&&(t.touchData.cxtOver&&t.touchData.cxtOver.emit(he("cxtdragout")),t.touchData.cxtOver=Rt,Rt&&Rt.emit(he("cxtdragover")))}else if(Y&&L.touches[2]&&Q.boxSelectionEnabled())L.preventDefault(),t.data.bgActivePosistion=void 0,this.lastThreeTouch=+new Date,t.touchData.selecting||Q.emit(he("boxstart")),t.touchData.selecting=!0,t.touchData.didSelect=!0,Z[4]=1,!Z||Z.length===0||Z[0]===void 0?(Z[0]=(ee[0]+ee[2]+ee[4])/3,Z[1]=(ee[1]+ee[3]+ee[5])/3,Z[2]=(ee[0]+ee[2]+ee[4])/3+1,Z[3]=(ee[1]+ee[3]+ee[5])/3+1):(Z[2]=(ee[0]+ee[2]+ee[4])/3,Z[3]=(ee[1]+ee[3]+ee[5])/3),t.redrawHint("select",!0),t.redraw();else if(Y&&L.touches[1]&&!t.touchData.didSelect&&Q.zoomingEnabled()&&Q.panningEnabled()&&Q.userZoomingEnabled()&&Q.userPanningEnabled()){L.preventDefault(),t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);var mt=t.dragData.touchDragEles;if(mt){t.redrawHint("drag",!0);for(var It=0;It<mt.length;It++){var Qn=mt[It]._private;Qn.grabbed=!1,Qn.rscratch.inDragLayer=!1}}var kt=t.touchData.start,Qe=L.touches[0].clientX-V,lt=L.touches[0].clientY-U,at=L.touches[1].clientX-V,dt=L.touches[1].clientY-U,fg=ae(Qe,lt,at,dt),hS=fg/$;if(ne){var dS=Qe-z,vS=lt-W,gS=at-N,pS=dt-B,yS=(dS+gS)/2,mS=(vS+pS)/2,Jn=Q.zoom(),Is=Jn*hS,Ka=Q.pan(),cg=K[0]*Jn+Ka.x,hg=K[1]*Jn+Ka.y,bS={x:-Is/Jn*(cg-Ka.x-yS)+cg,y:-Is/Jn*(hg-Ka.y-mS)+hg};if(kt&&kt.active()){var mt=t.dragData.touchDragEles;y(mt),t.redrawHint("drag",!0),t.redrawHint("eles",!0),kt.unactivate().emit(he("freeon")),mt.emit(he("free")),t.dragData.didDrag&&(kt.emit(he("dragfreeon")),mt.emit(he("dragfree")))}Q.viewport({zoom:Is,pan:bS,cancelOnFailedZoom:!0}),Q.emit(he("pinchzoom")),$=fg,z=Qe,W=lt,N=at,B=dt,t.pinching=!0}if(L.touches[0]){var ye=t.projectIntoViewport(L.touches[0].clientX,L.touches[0].clientY);ee[0]=ye[0],ee[1]=ye[1]}if(L.touches[1]){var ye=t.projectIntoViewport(L.touches[1].clientX,L.touches[1].clientY);ee[2]=ye[0],ee[3]=ye[1]}if(L.touches[2]){var ye=t.projectIntoViewport(L.touches[2].clientX,L.touches[2].clientY);ee[4]=ye[0],ee[5]=ye[1]}}else if(L.touches[0]&&!t.touchData.didSelect){var $t=t.touchData.start,Ds=t.touchData.last,Rt;if(!t.hoverData.draggingEles&&!t.swipePanning&&(Rt=t.findNearestElement(ee[0],ee[1],!0,!0)),Y&&$t!=null&&L.preventDefault(),Y&&$t!=null&&t.nodeIsDraggable($t))if(Ie){var mt=t.dragData.touchDragEles,dg=!t.dragData.didDrag;dg&&p(mt,{inDragLayer:!0}),t.dragData.didDrag=!0;var ea={x:0,y:0};if(ie(Ae[0])&&ie(Ae[1])&&(ea.x+=Ae[0],ea.y+=Ae[1],dg)){t.redrawHint("eles",!0);var Vt=t.touchData.dragDelta;Vt&&ie(Vt[0])&&ie(Vt[1])&&(ea.x+=Vt[0],ea.y+=Vt[1])}t.hoverData.draggingEles=!0,mt.silentShift(ea).emit(he("position")).emit(he("drag")),t.redrawHint("drag",!0),t.touchData.startPosition[0]==ce[0]&&t.touchData.startPosition[1]==ce[1]&&t.redrawHint("eles",!0),t.redraw()}else{var Vt=t.touchData.dragDelta=t.touchData.dragDelta||[];Vt.length===0?(Vt.push(Ae[0]),Vt.push(Ae[1])):(Vt[0]+=Ae[0],Vt[1]+=Ae[1])}if(a($t||Rt,["touchmove","tapdrag","vmousemove"],L,{x:ee[0],y:ee[1]}),(!$t||!$t.grabbed())&&Rt!=Ds&&(Ds&&Ds.emit(he("tapdragout")),Rt&&Rt.emit(he("tapdragover"))),t.touchData.last=Rt,Y)for(var It=0;It<ee.length;It++)ee[It]&&t.touchData.startPosition[It]&&Ie&&(t.touchData.singleTouchMoved=!0);if(Y&&($t==null||$t.pannable())&&Q.panningEnabled()&&Q.userPanningEnabled()){var wS=s($t,t.touchData.starts);wS&&(L.preventDefault(),t.data.bgActivePosistion||(t.data.bgActivePosistion=Dn(t.touchData.startPosition)),t.swipePanning?(Q.panBy({x:Ae[0]*re,y:Ae[1]*re}),Q.emit(he("dragpan"))):Ie&&(t.swipePanning=!0,Q.panBy({x:Le*re,y:nt*re}),Q.emit(he("dragpan")),$t&&($t.unactivate(),t.redrawHint("select",!0),t.touchData.start=null)));var ye=t.projectIntoViewport(L.touches[0].clientX,L.touches[0].clientY);ee[0]=ye[0],ee[1]=ye[1]}}for(var me=0;me<ee.length;me++)ce[me]=ee[me];Y&&L.touches.length>0&&!t.hoverData.draggingEles&&!t.swipePanning&&t.data.bgActivePosistion!=null&&(t.data.bgActivePosistion=void 0,t.redrawHint("select",!0),t.redraw())}},!1);var ge;t.registerBinding(e,"touchcancel",ge=function(L){var Y=t.touchData.start;t.touchData.capture=!1,Y&&Y.unactivate()});var oe,de,fe,ve;if(t.registerBinding(e,"touchend",oe=function(L){var Y=t.touchData.start,Z=t.touchData.capture;if(Z)L.touches.length===0&&(t.touchData.capture=!1),L.preventDefault();else return;var Q=t.selection;t.swipePanning=!1,t.hoverData.draggingEles=!1;var ee=t.cy,ce=ee.zoom(),re=t.touchData.now,ye=t.touchData.earlier;if(L.touches[0]){var he=t.projectIntoViewport(L.touches[0].clientX,L.touches[0].clientY);re[0]=he[0],re[1]=he[1]}if(L.touches[1]){var he=t.projectIntoViewport(L.touches[1].clientX,L.touches[1].clientY);re[2]=he[0],re[3]=he[1]}if(L.touches[2]){var he=t.projectIntoViewport(L.touches[2].clientX,L.touches[2].clientY);re[4]=he[0],re[5]=he[1]}var Ee=function(ir){return{originalEvent:L,type:ir,position:{x:re[0],y:re[1]}}};Y&&Y.unactivate();var Ie;if(t.touchData.cxt){if(Ie=Ee("cxttapend"),Y?Y.emit(Ie):ee.emit(Ie),!t.touchData.cxtDragged){var Ae=Ee("cxttap");Y?Y.emit(Ae):ee.emit(Ae)}t.touchData.start&&(t.touchData.start._private.grabbed=!1),t.touchData.cxt=!1,t.touchData.start=null,t.redraw();return}if(!L.touches[2]&&ee.boxSelectionEnabled()&&t.touchData.selecting){t.touchData.selecting=!1;var me=ee.collection(t.getAllInBox(Q[0],Q[1],Q[2],Q[3]));Q[0]=void 0,Q[1]=void 0,Q[2]=void 0,Q[3]=void 0,Q[4]=0,t.redrawHint("select",!0),ee.emit(Ee("boxend"));var Le=function(ir){return ir.selectable()&&!ir.selected()};me.emit(Ee("box")).stdFilter(Le).select().emit(Ee("boxselect")),me.nonempty()&&t.redrawHint("eles",!0),t.redraw()}if(Y!=null&&Y.unactivate(),L.touches[2])t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);else if(!L.touches[1]){if(!L.touches[0]){if(!L.touches[0]){t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);var De=t.dragData.touchDragEles;if(Y!=null){var nt=Y._private.grabbed;y(De),t.redrawHint("drag",!0),t.redrawHint("eles",!0),nt&&(Y.emit(Ee("freeon")),De.emit(Ee("free")),t.dragData.didDrag&&(Y.emit(Ee("dragfreeon")),De.emit(Ee("dragfree")))),a(Y,["touchend","tapend","vmouseup","tapdragout"],L,{x:re[0],y:re[1]}),Y.unactivate(),t.touchData.start=null}else{var je=t.findNearestElement(re[0],re[1],!0,!0);a(je,["touchend","tapend","vmouseup","tapdragout"],L,{x:re[0],y:re[1]})}var xt=t.touchData.startPosition[0]-re[0],Qe=xt*xt,lt=t.touchData.startPosition[1]-re[1],at=lt*lt,dt=Qe+at,yr=dt*ce*ce;t.touchData.singleTouchMoved||(Y||ee.$(":selected").unselect(["tapunselect"]),a(Y,["tap","vclick"],L,{x:re[0],y:re[1]}),de=!1,L.timeStamp-ve<=ee.multiClickDebounceTime()?(fe&&clearTimeout(fe),de=!0,ve=null,a(Y,["dbltap","vdblclick"],L,{x:re[0],y:re[1]})):(fe=setTimeout(function(){de||a(Y,["onetap","voneclick"],L,{x:re[0],y:re[1]})},ee.multiClickDebounceTime()),ve=L.timeStamp)),Y!=null&&!t.dragData.didDrag&&Y._private.selectable&&yr<t.touchTapThreshold2&&!t.pinching&&(ee.selectionType()==="single"?(ee.$(r).unmerge(Y).unselect(["tapunselect"]),Y.select(["tapselect"])):Y.selected()?Y.unselect(["tapunselect"]):Y.select(["tapselect"]),t.redrawHint("eles",!0)),t.touchData.singleTouchMoved=!0}}}for(var Je=0;Je<re.length;Je++)ye[Je]=re[Je];t.dragData.didDrag=!1,L.touches.length===0&&(t.touchData.dragDelta=[],t.touchData.startPosition=[null,null,null,null,null,null],t.touchData.startGPosition=null,t.touchData.didSelect=!1),L.touches.length<2&&(L.touches.length===1&&(t.touchData.startGPosition=[L.touches[0].clientX,L.touches[0].clientY]),t.pinching=!1,t.redrawHint("eles",!0),t.redraw())},!1),typeof TouchEvent>"u"){var pe=[],Ce=function(L){return{clientX:L.clientX,clientY:L.clientY,force:1,identifier:L.pointerId,pageX:L.pageX,pageY:L.pageY,radiusX:L.width/2,radiusY:L.height/2,screenX:L.screenX,screenY:L.screenY,target:L.target}},Me=function(L){return{event:L,touch:Ce(L)}},Pe=function(L){pe.push(Me(L))},_e=function(L){for(var Y=0;Y<pe.length;Y++){var Z=pe[Y];if(Z.event.pointerId===L.pointerId){pe.splice(Y,1);return}}},ke=function(L){var Y=pe.filter(function(Z){return Z.event.pointerId===L.pointerId})[0];Y.event=L,Y.touch=Ce(L)},Te=function(L){L.touches=pe.map(function(Y){return Y.touch})},ue=function(L){return L.pointerType==="mouse"||L.pointerType===4};t.registerBinding(t.container,"pointerdown",function(J){ue(J)||(J.preventDefault(),Pe(J),Te(J),se(J))}),t.registerBinding(t.container,"pointerup",function(J){ue(J)||(_e(J),Te(J),oe(J))}),t.registerBinding(t.container,"pointercancel",function(J){ue(J)||(_e(J),Te(J),ge(J))}),t.registerBinding(t.container,"pointermove",function(J){ue(J)||(J.preventDefault(),ke(J),Te(J),be(J))})}};var dr={};dr.generatePolygon=function(t,e){return this.nodeShapes[t]={renderer:this,name:t,points:e,draw:function(n,a,i,s,o,u){this.renderer.nodeShapeImpl("polygon",n,a,i,s,o,this.points)},intersectLine:function(n,a,i,s,o,u,l,f){return Ca(o,u,this.points,n,a,i/2,s/2,l)},checkPoint:function(n,a,i,s,o,u,l,f){return cr(n,a,this.points,u,l,s,o,[0,-1],i)},hasMiterBounds:t!=="rectangle",miterBounds:function(n,a,i,s,o,u){return QD(this.points,n,a,i,s,o)}}};dr.generateEllipse=function(){return this.nodeShapes.ellipse={renderer:this,name:"ellipse",draw:function(e,r,n,a,i,s){this.renderer.nodeShapeImpl(this.name,e,r,n,a,i)},intersectLine:function(e,r,n,a,i,s,o,u){return s_(i,s,e,r,n/2+o,a/2+o)},checkPoint:function(e,r,n,a,i,s,o,u){return tn(e,r,a,i,s,o,n)}}};dr.generateRoundPolygon=function(t,e){return this.nodeShapes[t]={renderer:this,name:t,points:e,getOrCreateCorners:function(n,a,i,s,o,u,l){if(u[l]!==void 0&&u[l+"-cx"]===n&&u[l+"-cy"]===a)return u[l];u[l]=new Array(e.length/2),u[l+"-cx"]=n,u[l+"-cy"]=a;var f=i/2,c=s/2;o=o==="auto"?Bx(i,s):o;for(var h=new Array(e.length/2),d=0;d<e.length/2;d++)h[d]={x:n+f*e[d*2],y:a+c*e[d*2+1]};var v,p,g,y,m=h.length;for(p=h[m-1],v=0;v<m;v++)g=h[v%m],y=h[(v+1)%m],u[l][v]=qv(p,g,y,o),p=g,g=y;return u[l]},draw:function(n,a,i,s,o,u,l){this.renderer.nodeShapeImpl("round-polygon",n,a,i,s,o,this.points,this.getOrCreateCorners(a,i,s,o,u,l,"drawCorners"))},intersectLine:function(n,a,i,s,o,u,l,f,c){return u_(o,u,this.points,n,a,i,s,l,this.getOrCreateCorners(n,a,i,s,f,c,"corners"))},checkPoint:function(n,a,i,s,o,u,l,f,c){return i_(n,a,this.points,u,l,s,o,this.getOrCreateCorners(u,l,s,o,f,c,"corners"))}}};dr.generateRoundRectangle=function(){return this.nodeShapes["round-rectangle"]=this.nodeShapes.roundrectangle={renderer:this,name:"round-rectangle",points:Tt(4,0),draw:function(e,r,n,a,i,s){this.renderer.nodeShapeImpl(this.name,e,r,n,a,i,this.points,s)},intersectLine:function(e,r,n,a,i,s,o,u){return kx(i,s,e,r,n,a,o,u)},checkPoint:function(e,r,n,a,i,s,o,u){var l=a/2,f=i/2;u=u==="auto"?kr(a,i):u,u=Math.min(l,f,u);var c=u*2;return!!(cr(e,r,this.points,s,o,a,i-c,[0,-1],n)||cr(e,r,this.points,s,o,a-c,i,[0,-1],n)||tn(e,r,c,c,s-l+u,o-f+u,n)||tn(e,r,c,c,s+l-u,o-f+u,n)||tn(e,r,c,c,s+l-u,o+f-u,n)||tn(e,r,c,c,s-l+u,o+f-u,n))}}};dr.generateCutRectangle=function(){return this.nodeShapes["cut-rectangle"]=this.nodeShapes.cutrectangle={renderer:this,name:"cut-rectangle",cornerLength:Iv(),points:Tt(4,0),draw:function(e,r,n,a,i,s){this.renderer.nodeShapeImpl(this.name,e,r,n,a,i,null,s)},generateCutTrianglePts:function(e,r,n,a,i){var s=i==="auto"?this.cornerLength:i,o=r/2,u=e/2,l=n-u,f=n+u,c=a-o,h=a+o;return{topLeft:[l,c+s,l+s,c,l+s,c+s],topRight:[f-s,c,f,c+s,f-s,c+s],bottomRight:[f,h-s,f-s,h,f-s,h-s],bottomLeft:[l+s,h,l,h-s,l+s,h-s]}},intersectLine:function(e,r,n,a,i,s,o,u){var l=this.generateCutTrianglePts(n+2*o,a+2*o,e,r,u),f=[].concat.apply([],[l.topLeft.splice(0,4),l.topRight.splice(0,4),l.bottomRight.splice(0,4),l.bottomLeft.splice(0,4)]);return Ca(i,s,f,e,r)},checkPoint:function(e,r,n,a,i,s,o,u){var l=u==="auto"?this.cornerLength:u;if(cr(e,r,this.points,s,o,a,i-2*l,[0,-1],n)||cr(e,r,this.points,s,o,a-2*l,i,[0,-1],n))return!0;var f=this.generateCutTrianglePts(a,i,s,o);return _t(e,r,f.topLeft)||_t(e,r,f.topRight)||_t(e,r,f.bottomRight)||_t(e,r,f.bottomLeft)}}};dr.generateBarrel=function(){return this.nodeShapes.barrel={renderer:this,name:"barrel",points:Tt(4,0),draw:function(e,r,n,a,i,s){this.renderer.nodeShapeImpl(this.name,e,r,n,a,i)},intersectLine:function(e,r,n,a,i,s,o,u){var l=.15,f=.5,c=.85,h=this.generateBarrelBezierPts(n+2*o,a+2*o,e,r),d=function(g){var y=On({x:g[0],y:g[1]},{x:g[2],y:g[3]},{x:g[4],y:g[5]},l),m=On({x:g[0],y:g[1]},{x:g[2],y:g[3]},{x:g[4],y:g[5]},f),b=On({x:g[0],y:g[1]},{x:g[2],y:g[3]},{x:g[4],y:g[5]},c);return[g[0],g[1],y.x,y.y,m.x,m.y,b.x,b.y,g[4],g[5]]},v=[].concat(d(h.topLeft),d(h.topRight),d(h.bottomRight),d(h.bottomLeft));return Ca(i,s,v,e,r)},generateBarrelBezierPts:function(e,r,n,a){var i=r/2,s=e/2,o=n-s,u=n+s,l=a-i,f=a+i,c=Vd(e,r),h=c.heightOffset,d=c.widthOffset,v=c.ctrlPtOffsetPct*e,p={topLeft:[o,l+h,o+v,l,o+d,l],topRight:[u-d,l,u-v,l,u,l+h],bottomRight:[u,f-h,u-v,f,u-d,f],bottomLeft:[o+d,f,o+v,f,o,f-h]};return p.topLeft.isTop=!0,p.topRight.isTop=!0,p.bottomLeft.isBottom=!0,p.bottomRight.isBottom=!0,p},checkPoint:function(e,r,n,a,i,s,o,u){var l=Vd(a,i),f=l.heightOffset,c=l.widthOffset;if(cr(e,r,this.points,s,o,a,i-2*f,[0,-1],n)||cr(e,r,this.points,s,o,a-2*c,i,[0,-1],n))return!0;for(var h=this.generateBarrelBezierPts(a,i,s,o),d=function(T,C,A){var R=A[4],I=A[2],D=A[0],_=A[5],M=A[1],k=Math.min(R,D),O=Math.max(R,D),P=Math.min(_,M),q=Math.max(_,M);if(k<=T&&T<=O&&P<=C&&C<=q){var G=l_(R,I,D),F=t_(G[0],G[1],G[2],T),z=F.filter(function(W){return 0<=W&&W<=1});if(z.length>0)return z[0]}return null},v=Object.keys(h),p=0;p<v.length;p++){var g=v[p],y=h[g],m=d(e,r,y);if(m!=null){var b=y[5],E=y[3],x=y[1],S=ft(b,E,x,m);if(y.isTop&&S<=r||y.isBottom&&r<=S)return!0}}return!1}}};dr.generateBottomRoundrectangle=function(){return this.nodeShapes["bottom-round-rectangle"]=this.nodeShapes.bottomroundrectangle={renderer:this,name:"bottom-round-rectangle",points:Tt(4,0),draw:function(e,r,n,a,i,s){this.renderer.nodeShapeImpl(this.name,e,r,n,a,i,this.points,s)},intersectLine:function(e,r,n,a,i,s,o,u){var l=e-(n/2+o),f=r-(a/2+o),c=f,h=e+(n/2+o),d=Cr(i,s,e,r,l,f,h,c,!1);return d.length>0?d:kx(i,s,e,r,n,a,o,u)},checkPoint:function(e,r,n,a,i,s,o,u){u=u==="auto"?kr(a,i):u;var l=2*u;if(cr(e,r,this.points,s,o,a,i-l,[0,-1],n)||cr(e,r,this.points,s,o,a-l,i,[0,-1],n))return!0;var f=a/2+2*n,c=i/2+2*n,h=[s-f,o-c,s-f,o,s+f,o,s+f,o-c];return!!(_t(e,r,h)||tn(e,r,l,l,s+a/2-u,o+i/2-u,n)||tn(e,r,l,l,s-a/2+u,o+i/2-u,n))}}};dr.registerNodeShapes=function(){var t=this.nodeShapes={},e=this;this.generateEllipse(),this.generatePolygon("triangle",Tt(3,0)),this.generateRoundPolygon("round-triangle",Tt(3,0)),this.generatePolygon("rectangle",Tt(4,0)),t.square=t.rectangle,this.generateRoundRectangle(),this.generateCutRectangle(),this.generateBarrel(),this.generateBottomRoundrectangle();{var r=[0,1,1,0,0,-1,-1,0];this.generatePolygon("diamond",r),this.generateRoundPolygon("round-diamond",r)}this.generatePolygon("pentagon",Tt(5,0)),this.generateRoundPolygon("round-pentagon",Tt(5,0)),this.generatePolygon("hexagon",Tt(6,0)),this.generateRoundPolygon("round-hexagon",Tt(6,0)),this.generatePolygon("heptagon",Tt(7,0)),this.generateRoundPolygon("round-heptagon",Tt(7,0)),this.generatePolygon("octagon",Tt(8,0)),this.generateRoundPolygon("round-octagon",Tt(8,0));var n=new Array(20);{var a=$d(5,0),i=$d(5,Math.PI/5),s=.5*(3-Math.sqrt(5));s*=1.57;for(var o=0;o<i.length/2;o++)i[o*2]*=s,i[o*2+1]*=s;for(var o=0;o<20/4;o++)n[o*4]=a[o*2],n[o*4+1]=a[o*2+1],n[o*4+2]=i[o*2],n[o*4+3]=i[o*2+1]}n=Nx(n),this.generatePolygon("star",n),this.generatePolygon("vee",[-1,-1,0,-.333,1,-1,0,1]),this.generatePolygon("rhomboid",[-1,-1,.333,-1,1,1,-.333,1]),this.generatePolygon("right-rhomboid",[-.333,-1,1,-1,.333,1,-1,1]),this.nodeShapes.concavehexagon=this.generatePolygon("concave-hexagon",[-1,-.95,-.75,0,-1,.95,1,.95,.75,0,1,-.95]);{var u=[-1,-1,.25,-1,1,0,.25,1,-1,1];this.generatePolygon("tag",u),this.generateRoundPolygon("round-tag",u)}t.makePolygon=function(l){var f=l.join("$"),c="polygon-"+f,h;return(h=this[c])?h:e.generatePolygon(c,l)}};var za={};za.timeToRender=function(){return this.redrawTotalTime/this.redrawCount};za.redraw=function(t){t=t||Lx();var e=this;e.averageRedrawTime===void 0&&(e.averageRedrawTime=0),e.lastRedrawTime===void 0&&(e.lastRedrawTime=0),e.lastDrawTime===void 0&&(e.lastDrawTime=0),e.requestedFrame=!0,e.renderOptions=t};za.beforeRender=function(t,e){if(!this.destroyed){e==null&&We("Priority is not optional for beforeRender");var r=this.beforeRenderCallbacks;r.push({fn:t,priority:e}),r.sort(function(n,a){return a.priority-n.priority})}};var Uy=function(e,r,n){for(var a=e.beforeRenderCallbacks,i=0;i<a.length;i++)a[i].fn(r,n)};za.startRenderLoop=function(){var t=this,e=t.cy;if(!t.renderLoopStarted){t.renderLoopStarted=!0;var r=function(a){if(!t.destroyed){if(!e.batching())if(t.requestedFrame&&!t.skipFrame){Uy(t,!0,a);var i=fr();t.render(t.renderOptions);var s=t.lastDrawTime=fr();t.averageRedrawTime===void 0&&(t.averageRedrawTime=s-i),t.redrawCount===void 0&&(t.redrawCount=0),t.redrawCount++,t.redrawTotalTime===void 0&&(t.redrawTotalTime=0);var o=s-i;t.redrawTotalTime+=o,t.lastRedrawTime=o,t.averageRedrawTime=t.averageRedrawTime/2+o/2,t.requestedFrame=!1}else Uy(t,!1,a);t.skipFrame=!1,Ai(r)}};Ai(r)}};var SO=function(e){this.init(e)},BT=SO,Yn=BT.prototype;Yn.clientFunctions=["redrawHint","render","renderTo","matchCanvasSize","nodeShapeImpl","arrowShapeImpl"];Yn.init=function(t){var e=this;e.options=t,e.cy=t.cy;var r=e.container=t.cy.container(),n=e.cy.window();if(n){var a=n.document,i=a.head,s="__________cytoscape_stylesheet",o="__________cytoscape_container",u=a.getElementById(s)!=null;if(r.className.indexOf(o)<0&&(r.className=(r.className||"")+" "+o),!u){var l=a.createElement("style");l.id=s,l.textContent="."+o+" { position: relative; }",i.insertBefore(l,i.children[0])}var f=n.getComputedStyle(r),c=f.getPropertyValue("position");c==="static"&&Ge("A Cytoscape container has style position:static and so can not use UI extensions properly")}e.selection=[void 0,void 0,void 0,void 0,0],e.bezierProjPcts=[.05,.225,.4,.5,.6,.775,.95],e.hoverData={down:null,last:null,downTime:null,triggerMode:null,dragging:!1,initialPan:[null,null],capture:!1},e.dragData={possibleDragElements:[]},e.touchData={start:null,capture:!1,startPosition:[null,null,null,null,null,null],singleTouchStartTime:null,singleTouchMoved:!0,now:[null,null,null,null,null,null],earlier:[null,null,null,null,null,null]},e.redraws=0,e.showFps=t.showFps,e.debug=t.debug,e.webgl=t.webgl,e.hideEdgesOnViewport=t.hideEdgesOnViewport,e.textureOnViewport=t.textureOnViewport,e.wheelSensitivity=t.wheelSensitivity,e.motionBlurEnabled=t.motionBlur,e.forcedPixelRatio=ie(t.pixelRatio)?t.pixelRatio:null,e.motionBlur=t.motionBlur,e.motionBlurOpacity=t.motionBlurOpacity,e.motionBlurTransparency=1-e.motionBlurOpacity,e.motionBlurPxRatio=1,e.mbPxRBlurry=1,e.minMbLowQualFrames=4,e.fullQualityMb=!1,e.clearedForMotionBlur=[],e.desktopTapThreshold=t.desktopTapThreshold,e.desktopTapThreshold2=t.desktopTapThreshold*t.desktopTapThreshold,e.touchTapThreshold=t.touchTapThreshold,e.touchTapThreshold2=t.touchTapThreshold*t.touchTapThreshold,e.tapholdDuration=500,e.bindings=[],e.beforeRenderCallbacks=[],e.beforeRenderPriorities={animations:400,eleCalcs:300,eleTxrDeq:200,lyrTxrDeq:150,lyrTxrSkip:100},e.registerNodeShapes(),e.registerArrowShapes(),e.registerCalculationListeners()};Yn.notify=function(t,e){var r=this,n=r.cy;if(!this.destroyed){if(t==="init"){r.load();return}if(t==="destroy"){r.destroy();return}(t==="add"||t==="remove"||t==="move"&&n.hasCompoundNodes()||t==="load"||t==="zorder"||t==="mount")&&r.invalidateCachedZSortedEles(),t==="viewport"&&r.redrawHint("select",!0),t==="gc"&&r.redrawHint("gc",!0),(t==="load"||t==="resize"||t==="mount")&&(r.invalidateContainerClientCoordsCache(),r.matchCanvasSize(r.container)),r.redrawHint("eles",!0),r.redrawHint("drag",!0),this.startRenderLoop(),this.redraw()}};Yn.destroy=function(){var t=this;t.destroyed=!0,t.cy.stopAnimationLoop();for(var e=0;e<t.bindings.length;e++){var r=t.bindings[e],n=r,a=n.target;(a.off||a.removeEventListener).apply(a,n.args)}if(t.bindings=[],t.beforeRenderCallbacks=[],t.onUpdateEleCalcsFns=[],t.removeObserver&&t.removeObserver.disconnect(),t.styleObserver&&t.styleObserver.disconnect(),t.resizeObserver&&t.resizeObserver.disconnect(),t.labelCalcDiv)try{document.body.removeChild(t.labelCalcDiv)}catch{}};Yn.isHeadless=function(){return!1};[Fv,kT,NT,Hn,dr,za].forEach(function(t){xe(Yn,t)});var su=1e3/60,FT={setupDequeueing:function(e){return function(){var n=this,a=this.renderer;if(!n.dequeueingSetup){n.dequeueingSetup=!0;var i=Na(function(){a.redrawHint("eles",!0),a.redrawHint("drag",!0),a.redraw()},e.deqRedrawThreshold),s=function(l,f){var c=fr(),h=a.averageRedrawTime,d=a.lastRedrawTime,v=[],p=a.cy.extent(),g=a.getPixelRatio();for(l||a.flushRenderedStyleQueue();;){var y=fr(),m=y-c,b=y-f;if(d<su){var E=su-(l?h:0);if(b>=e.deqFastCost*E)break}else if(l){if(m>=e.deqCost*d||m>=e.deqAvgCost*h)break}else if(b>=e.deqNoDrawCost*su)break;var x=e.deq(n,g,p);if(x.length>0)for(var S=0;S<x.length;S++)v.push(x[S]);else break}v.length>0&&(e.onDeqd(n,v),!l&&e.shouldRedraw(n,v,g,p)&&i())},o=e.priority||Tv;a.beforeRender(s,o(n))}}}},AO=function(){function t(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ri;qr(this,t),this.idsByKey=new ur,this.keyForId=new ur,this.cachesByLvl=new ur,this.lvls=[],this.getKey=e,this.doesEleInvalidateKey=r}return Gr(t,[{key:"getIdsFor",value:function(r){r==null&&We("Can not get id list for null key");var n=this.idsByKey,a=this.idsByKey.get(r);return a||(a=new zn,n.set(r,a)),a}},{key:"addIdForKey",value:function(r,n){r!=null&&this.getIdsFor(r).add(n)}},{key:"deleteIdForKey",value:function(r,n){r!=null&&this.getIdsFor(r).delete(n)}},{key:"getNumberOfIdsForKey",value:function(r){return r==null?0:this.getIdsFor(r).size}},{key:"updateKeyMappingFor",value:function(r){var n=r.id(),a=this.keyForId.get(n),i=this.getKey(r);this.deleteIdForKey(a,n),this.addIdForKey(i,n),this.keyForId.set(n,i)}},{key:"deleteKeyMappingFor",value:function(r){var n=r.id(),a=this.keyForId.get(n);this.deleteIdForKey(a,n),this.keyForId.delete(n)}},{key:"keyHasChangedFor",value:function(r){var n=r.id(),a=this.keyForId.get(n),i=this.getKey(r);return a!==i}},{key:"isInvalid",value:function(r){return this.keyHasChangedFor(r)||this.doesEleInvalidateKey(r)}},{key:"getCachesAt",value:function(r){var n=this.cachesByLvl,a=this.lvls,i=n.get(r);return i||(i=new ur,n.set(r,i),a.push(r)),i}},{key:"getCache",value:function(r,n){return this.getCachesAt(n).get(r)}},{key:"get",value:function(r,n){var a=this.getKey(r),i=this.getCache(a,n);return i!=null&&this.updateKeyMappingFor(r),i}},{key:"getForCachedKey",value:function(r,n){var a=this.keyForId.get(r.id()),i=this.getCache(a,n);return i}},{key:"hasCache",value:function(r,n){return this.getCachesAt(n).has(r)}},{key:"has",value:function(r,n){var a=this.getKey(r);return this.hasCache(a,n)}},{key:"setCache",value:function(r,n,a){a.key=r,this.getCachesAt(n).set(r,a)}},{key:"set",value:function(r,n,a){var i=this.getKey(r);this.setCache(i,n,a),this.updateKeyMappingFor(r)}},{key:"deleteCache",value:function(r,n){this.getCachesAt(n).delete(r)}},{key:"delete",value:function(r,n){var a=this.getKey(r);this.deleteCache(a,n)}},{key:"invalidateKey",value:function(r){var n=this;this.lvls.forEach(function(a){return n.deleteCache(r,a)})}},{key:"invalidate",value:function(r){var n=r.id(),a=this.keyForId.get(n);this.deleteKeyMappingFor(r);var i=this.doesEleInvalidateKey(r);return i&&this.invalidateKey(a),i||this.getNumberOfIdsForKey(a)===0}}])}(),Hy=25,oi=50,mi=-4,rv=3,qT=7.99,RO=8,IO=1024,DO=1024,_O=1024,LO=.2,MO=.8,OO=10,PO=.15,kO=.1,NO=.9,BO=.9,FO=100,qO=1,Ln={dequeue:"dequeue",downscale:"downscale",highQuality:"highQuality"},GO=pt({getKey:null,doesEleInvalidateKey:Ri,drawElement:null,getBoundingBox:null,getRotationPoint:null,getRotationOffset:null,isVisible:Ix,allowEdgeTxrCaching:!0,allowParentTxrCaching:!0}),fa=function(e,r){var n=this;n.renderer=e,n.onDequeues=[];var a=GO(r);xe(n,a),n.lookup=new AO(a.getKey,a.doesEleInvalidateKey),n.setupDequeueing()},ut=fa.prototype;ut.reasons=Ln;ut.getTextureQueue=function(t){var e=this;return e.eleImgCaches=e.eleImgCaches||{},e.eleImgCaches[t]=e.eleImgCaches[t]||[]};ut.getRetiredTextureQueue=function(t){var e=this,r=e.eleImgCaches.retired=e.eleImgCaches.retired||{},n=r[t]=r[t]||[];return n};ut.getElementQueue=function(){var t=this,e=t.eleCacheQueue=t.eleCacheQueue||new Ba(function(r,n){return n.reqs-r.reqs});return e};ut.getElementKeyToQueue=function(){var t=this,e=t.eleKeyToCacheQueue=t.eleKeyToCacheQueue||{};return e};ut.getElement=function(t,e,r,n,a){var i=this,s=this.renderer,o=s.cy.zoom(),u=this.lookup;if(!e||e.w===0||e.h===0||isNaN(e.w)||isNaN(e.h)||!t.visible()||t.removed()||!i.allowEdgeTxrCaching&&t.isEdge()||!i.allowParentTxrCaching&&t.isParent())return null;if(n==null&&(n=Math.ceil(Sv(o*r))),n<mi)n=mi;else if(o>=qT||n>rv)return null;var l=Math.pow(2,n),f=e.h*l,c=e.w*l,h=s.eleTextBiggerThanMin(t,l);if(!this.isVisible(t,h))return null;var d=u.get(t,n);if(d&&d.invalidated&&(d.invalidated=!1,d.texture.invalidatedWidth-=d.width),d)return d;var v;if(f<=Hy?v=Hy:f<=oi?v=oi:v=Math.ceil(f/oi)*oi,f>_O||c>DO)return null;var p=i.getTextureQueue(v),g=p[p.length-2],y=function(){return i.recycleTexture(v,c)||i.addTexture(v,c)};g||(g=p[p.length-1]),g||(g=y()),g.width-g.usedWidth<c&&(g=y());for(var m=function(k){return k&&k.scaledLabelShown===h},b=a&&a===Ln.dequeue,E=a&&a===Ln.highQuality,x=a&&a===Ln.downscale,S,w=n+1;w<=rv;w++){var T=u.get(t,w);if(T){S=T;break}}var C=S&&S.level===n+1?S:null,A=function(){g.context.drawImage(C.texture.canvas,C.x,0,C.width,C.height,g.usedWidth,0,c,f)};if(g.context.setTransform(1,0,0,1,0,0),g.context.clearRect(g.usedWidth,0,c,v),m(C))A();else if(m(S))if(E){for(var R=S.level;R>n;R--)C=i.getElement(t,e,r,R,Ln.downscale);A()}else return i.queueElement(t,S.level-1),S;else{var I;if(!b&&!E&&!x)for(var D=n-1;D>=mi;D--){var _=u.get(t,D);if(_){I=_;break}}if(m(I))return i.queueElement(t,n),I;g.context.translate(g.usedWidth,0),g.context.scale(l,l),this.drawElement(g.context,t,e,h,!1),g.context.scale(1/l,1/l),g.context.translate(-g.usedWidth,0)}return d={x:g.usedWidth,texture:g,level:n,scale:l,width:c,height:f,scaledLabelShown:h},g.usedWidth+=Math.ceil(c+RO),g.eleCaches.push(d),u.set(t,n,d),i.checkTextureFullness(g),d};ut.invalidateElements=function(t){for(var e=0;e<t.length;e++)this.invalidateElement(t[e])};ut.invalidateElement=function(t){var e=this,r=e.lookup,n=[],a=r.isInvalid(t);if(a){for(var i=mi;i<=rv;i++){var s=r.getForCachedKey(t,i);s&&n.push(s)}var o=r.invalidate(t);if(o)for(var u=0;u<n.length;u++){var l=n[u],f=l.texture;f.invalidatedWidth+=l.width,l.invalidated=!0,e.checkTextureUtility(f)}e.removeFromQueue(t)}};ut.checkTextureUtility=function(t){t.invalidatedWidth>=LO*t.width&&this.retireTexture(t)};ut.checkTextureFullness=function(t){var e=this,r=e.getTextureQueue(t.height);t.usedWidth/t.width>MO&&t.fullnessChecks>=OO?Pr(r,t):t.fullnessChecks++};ut.retireTexture=function(t){var e=this,r=t.height,n=e.getTextureQueue(r),a=this.lookup;Pr(n,t),t.retired=!0;for(var i=t.eleCaches,s=0;s<i.length;s++){var o=i[s];a.deleteCache(o.key,o.level)}Cv(i);var u=e.getRetiredTextureQueue(r);u.push(t)};ut.addTexture=function(t,e){var r=this,n=r.getTextureQueue(t),a={};return n.push(a),a.eleCaches=[],a.height=t,a.width=Math.max(IO,e),a.usedWidth=0,a.invalidatedWidth=0,a.fullnessChecks=0,a.canvas=r.renderer.makeOffscreenCanvas(a.width,a.height),a.context=a.canvas.getContext("2d"),a};ut.recycleTexture=function(t,e){for(var r=this,n=r.getTextureQueue(t),a=r.getRetiredTextureQueue(t),i=0;i<a.length;i++){var s=a[i];if(s.width>=e)return s.retired=!1,s.usedWidth=0,s.invalidatedWidth=0,s.fullnessChecks=0,Cv(s.eleCaches),s.context.setTransform(1,0,0,1,0,0),s.context.clearRect(0,0,s.width,s.height),Pr(a,s),n.push(s),s}};ut.queueElement=function(t,e){var r=this,n=r.getElementQueue(),a=r.getElementKeyToQueue(),i=this.getKey(t),s=a[i];if(s)s.level=Math.max(s.level,e),s.eles.merge(t),s.reqs++,n.updateItem(s);else{var o={eles:t.spawn().merge(t),level:e,reqs:1,key:i};n.push(o),a[i]=o}};ut.dequeue=function(t){for(var e=this,r=e.getElementQueue(),n=e.getElementKeyToQueue(),a=[],i=e.lookup,s=0;s<qO&&r.size()>0;s++){var o=r.pop(),u=o.key,l=o.eles[0],f=i.hasCache(l,o.level);if(n[u]=null,f)continue;a.push(o);var c=e.getBoundingBox(l);e.getElement(l,c,t,o.level,Ln.dequeue)}return a};ut.removeFromQueue=function(t){var e=this,r=e.getElementQueue(),n=e.getElementKeyToQueue(),a=this.getKey(t),i=n[a];i!=null&&(i.eles.length===1?(i.reqs=xv,r.updateItem(i),r.pop(),n[a]=null):i.eles.unmerge(t))};ut.onDequeue=function(t){this.onDequeues.push(t)};ut.offDequeue=function(t){Pr(this.onDequeues,t)};ut.setupDequeueing=FT.setupDequeueing({deqRedrawThreshold:FO,deqCost:PO,deqAvgCost:kO,deqNoDrawCost:NO,deqFastCost:BO,deq:function(e,r,n){return e.dequeue(r,n)},onDeqd:function(e,r){for(var n=0;n<e.onDequeues.length;n++){var a=e.onDequeues[n];a(r)}},shouldRedraw:function(e,r,n,a){for(var i=0;i<r.length;i++)for(var s=r[i].eles,o=0;o<s.length;o++){var u=s[o].boundingBox();if(Rv(u,a))return!0}return!1},priority:function(e){return e.renderer.beforeRenderPriorities.eleTxrDeq}});var zO=1,pa=-4,ki=2,$O=3.99,VO=50,UO=50,HO=.15,YO=.1,WO=.9,XO=.9,KO=1,Yy=250,jO=4e3*4e3,Wy=32767,ZO=!0,GT=function(e){var r=this,n=r.renderer=e,a=n.cy;r.layersByLevel={},r.firstGet=!0,r.lastInvalidationTime=fr()-2*Yy,r.skipping=!1,r.eleTxrDeqs=a.collection(),r.scheduleElementRefinement=Na(function(){r.refineElementTextures(r.eleTxrDeqs),r.eleTxrDeqs.unmerge(r.eleTxrDeqs)},UO),n.beforeRender(function(s,o){o-r.lastInvalidationTime<=Yy?r.skipping=!0:r.skipping=!1},n.beforeRenderPriorities.lyrTxrSkip);var i=function(o,u){return u.reqs-o.reqs};r.layersQueue=new Ba(i),r.setupDequeueing()},yt=GT.prototype,Xy=0,QO=Math.pow(2,53)-1;yt.makeLayer=function(t,e){var r=Math.pow(2,e),n=Math.ceil(t.w*r),a=Math.ceil(t.h*r),i=this.renderer.makeOffscreenCanvas(n,a),s={id:Xy=++Xy%QO,bb:t,level:e,width:n,height:a,canvas:i,context:i.getContext("2d"),eles:[],elesQueue:[],reqs:0},o=s.context,u=-s.bb.x1,l=-s.bb.y1;return o.scale(r,r),o.translate(u,l),s};yt.getLayers=function(t,e,r){var n=this,a=n.renderer,i=a.cy,s=i.zoom(),o=n.firstGet;if(n.firstGet=!1,r==null){if(r=Math.ceil(Sv(s*e)),r<pa)r=pa;else if(s>=$O||r>ki)return null}n.validateLayersElesOrdering(r,t);var u=n.layersByLevel,l=Math.pow(2,r),f=u[r]=u[r]||[],c,h=n.levelIsComplete(r,t),d,v=function(){var A=function(M){if(n.validateLayersElesOrdering(M,t),n.levelIsComplete(M,t))return d=u[M],!0},R=function(M){if(!d)for(var k=r+M;pa<=k&&k<=ki&&!A(k);k+=M);};R(1),R(-1);for(var I=f.length-1;I>=0;I--){var D=f[I];D.invalid&&Pr(f,D)}};if(!h)v();else return f;var p=function(){if(!c){c=St();for(var A=0;A<t.length;A++)KD(c,t[A].boundingBox())}return c},g=function(A){A=A||{};var R=A.after;p();var I=Math.ceil(c.w*l),D=Math.ceil(c.h*l);if(I>Wy||D>Wy)return null;var _=I*D;if(_>jO)return null;var M=n.makeLayer(c,r);if(R!=null){var k=f.indexOf(R)+1;f.splice(k,0,M)}else(A.insert===void 0||A.insert)&&f.unshift(M);return M};if(n.skipping&&!o)return null;for(var y=null,m=t.length/zO,b=!o,E=0;E<t.length;E++){var x=t[E],S=x._private.rscratch,w=S.imgLayerCaches=S.imgLayerCaches||{},T=w[r];if(T){y=T;continue}if((!y||y.eles.length>=m||!Px(y.bb,x.boundingBox()))&&(y=g({insert:!0,after:y}),!y))return null;d||b?n.queueLayer(y,x):n.drawEleInLayer(y,x,r,e),y.eles.push(x),w[r]=y}return d||(b?null:f)};yt.getEleLevelForLayerLevel=function(t,e){return t};yt.drawEleInLayer=function(t,e,r,n){var a=this,i=this.renderer,s=t.context,o=e.boundingBox();o.w===0||o.h===0||!e.visible()||(r=a.getEleLevelForLayerLevel(r,n),i.setImgSmoothing(s,!1),i.drawCachedElement(s,e,null,null,r,ZO),i.setImgSmoothing(s,!0))};yt.levelIsComplete=function(t,e){var r=this,n=r.layersByLevel[t];if(!n||n.length===0)return!1;for(var a=0,i=0;i<n.length;i++){var s=n[i];if(s.reqs>0||s.invalid)return!1;a+=s.eles.length}return a===e.length};yt.validateLayersElesOrdering=function(t,e){var r=this.layersByLevel[t];if(r)for(var n=0;n<r.length;n++){for(var a=r[n],i=-1,s=0;s<e.length;s++)if(a.eles[0]===e[s]){i=s;break}if(i<0){this.invalidateLayer(a);continue}for(var o=i,s=0;s<a.eles.length;s++)if(a.eles[s]!==e[o+s]){this.invalidateLayer(a);break}}};yt.updateElementsInLayers=function(t,e){for(var r=this,n=Ma(t[0]),a=0;a<t.length;a++)for(var i=n?null:t[a],s=n?t[a]:t[a].ele,o=s._private.rscratch,u=o.imgLayerCaches=o.imgLayerCaches||{},l=pa;l<=ki;l++){var f=u[l];f&&(i&&r.getEleLevelForLayerLevel(f.level)!==i.level||e(f,s,i))}};yt.haveLayers=function(){for(var t=this,e=!1,r=pa;r<=ki;r++){var n=t.layersByLevel[r];if(n&&n.length>0){e=!0;break}}return e};yt.invalidateElements=function(t){var e=this;t.length!==0&&(e.lastInvalidationTime=fr(),!(t.length===0||!e.haveLayers())&&e.updateElementsInLayers(t,function(n,a,i){e.invalidateLayer(n)}))};yt.invalidateLayer=function(t){if(this.lastInvalidationTime=fr(),!t.invalid){var e=t.level,r=t.eles,n=this.layersByLevel[e];Pr(n,t),t.elesQueue=[],t.invalid=!0,t.replacement&&(t.replacement.invalid=!0);for(var a=0;a<r.length;a++){var i=r[a]._private.rscratch.imgLayerCaches;i&&(i[e]=null)}}};yt.refineElementTextures=function(t){var e=this;e.updateElementsInLayers(t,function(n,a,i){var s=n.replacement;if(s||(s=n.replacement=e.makeLayer(n.bb,n.level),s.replaces=n,s.eles=n.eles),!s.reqs)for(var o=0;o<s.eles.length;o++)e.queueLayer(s,s.eles[o])})};yt.enqueueElementRefinement=function(t){this.eleTxrDeqs.merge(t),this.scheduleElementRefinement()};yt.queueLayer=function(t,e){var r=this,n=r.layersQueue,a=t.elesQueue,i=a.hasId=a.hasId||{};if(!t.replacement){if(e){if(i[e.id()])return;a.push(e),i[e.id()]=!0}t.reqs?(t.reqs++,n.updateItem(t)):(t.reqs=1,n.push(t))}};yt.dequeue=function(t){for(var e=this,r=e.layersQueue,n=[],a=0;a<KO&&r.size()!==0;){var i=r.peek();if(i.replacement){r.pop();continue}if(i.replaces&&i!==i.replaces.replacement){r.pop();continue}if(i.invalid){r.pop();continue}var s=i.elesQueue.shift();s&&(e.drawEleInLayer(i,s,i.level,t),a++),n.length===0&&n.push(!0),i.elesQueue.length===0&&(r.pop(),i.reqs=0,i.replaces&&e.applyLayerReplacement(i),e.requestRedraw())}return n};yt.applyLayerReplacement=function(t){var e=this,r=e.layersByLevel[t.level],n=t.replaces,a=r.indexOf(n);if(!(a<0||n.invalid)){r[a]=t;for(var i=0;i<t.eles.length;i++){var s=t.eles[i]._private,o=s.imgLayerCaches=s.imgLayerCaches||{};o&&(o[t.level]=t)}e.requestRedraw()}};yt.requestRedraw=Na(function(){var t=this.renderer;t.redrawHint("eles",!0),t.redrawHint("drag",!0),t.redraw()},100);yt.setupDequeueing=FT.setupDequeueing({deqRedrawThreshold:VO,deqCost:HO,deqAvgCost:YO,deqNoDrawCost:WO,deqFastCost:XO,deq:function(e,r){return e.dequeue(r)},onDeqd:Tv,shouldRedraw:Ix,priority:function(e){return e.renderer.beforeRenderPriorities.lyrTxrDeq}});var zT={},Ky;function JO(t,e){for(var r=0;r<e.length;r++){var n=e[r];t.lineTo(n.x,n.y)}}function e2(t,e,r){for(var n,a=0;a<e.length;a++){var i=e[a];a===0&&(n=i),t.lineTo(i.x,i.y)}t.quadraticCurveTo(r.x,r.y,n.x,n.y)}function jy(t,e,r){t.beginPath&&t.beginPath();for(var n=e,a=0;a<n.length;a++){var i=n[a];t.lineTo(i.x,i.y)}var s=r,o=r[0];t.moveTo(o.x,o.y);for(var a=1;a<s.length;a++){var i=s[a];t.lineTo(i.x,i.y)}t.closePath&&t.closePath()}function t2(t,e,r,n,a){t.beginPath&&t.beginPath(),t.arc(r,n,a,0,Math.PI*2,!1);var i=e,s=i[0];t.moveTo(s.x,s.y);for(var o=0;o<i.length;o++){var u=i[o];t.lineTo(u.x,u.y)}t.closePath&&t.closePath()}function r2(t,e,r,n){t.arc(e,r,n,0,Math.PI*2,!1)}zT.arrowShapeImpl=function(t){return(Ky||(Ky={polygon:JO,"triangle-backcurve":e2,"triangle-tee":jy,"circle-triangle":t2,"triangle-cross":jy,circle:r2}))[t]};var rr={};rr.drawElement=function(t,e,r,n,a,i){var s=this;e.isNode()?s.drawNode(t,e,r,n,a,i):s.drawEdge(t,e,r,n,a,i)};rr.drawElementOverlay=function(t,e){var r=this;e.isNode()?r.drawNodeOverlay(t,e):r.drawEdgeOverlay(t,e)};rr.drawElementUnderlay=function(t,e){var r=this;e.isNode()?r.drawNodeUnderlay(t,e):r.drawEdgeUnderlay(t,e)};rr.drawCachedElementPortion=function(t,e,r,n,a,i,s,o){var u=this,l=r.getBoundingBox(e);if(!(l.w===0||l.h===0)){var f=r.getElement(e,l,n,a,i);if(f!=null){var c=o(u,e);if(c===0)return;var h=s(u,e),d=l.x1,v=l.y1,p=l.w,g=l.h,y,m,b,E,x;if(h!==0){var S=r.getRotationPoint(e);b=S.x,E=S.y,t.translate(b,E),t.rotate(h),x=u.getImgSmoothing(t),x||u.setImgSmoothing(t,!0);var w=r.getRotationOffset(e);y=w.x,m=w.y}else y=d,m=v;var T;c!==1&&(T=t.globalAlpha,t.globalAlpha=T*c),t.drawImage(f.texture.canvas,f.x,0,f.width,f.height,y,m,p,g),c!==1&&(t.globalAlpha=T),h!==0&&(t.rotate(-h),t.translate(-b,-E),x||u.setImgSmoothing(t,!1))}else r.drawElement(t,e)}};var n2=function(){return 0},a2=function(e,r){return e.getTextAngle(r,null)},i2=function(e,r){return e.getTextAngle(r,"source")},s2=function(e,r){return e.getTextAngle(r,"target")},o2=function(e,r){return r.effectiveOpacity()},ou=function(e,r){return r.pstyle("text-opacity").pfValue*r.effectiveOpacity()};rr.drawCachedElement=function(t,e,r,n,a,i){var s=this,o=s.data,u=o.eleTxrCache,l=o.lblTxrCache,f=o.slbTxrCache,c=o.tlbTxrCache,h=e.boundingBox(),d=i===!0?u.reasons.highQuality:null;if(!(h.w===0||h.h===0||!e.visible())&&(!n||Rv(h,n))){var v=e.isEdge(),p=e.element()._private.rscratch.badLine;s.drawElementUnderlay(t,e),s.drawCachedElementPortion(t,e,u,r,a,d,n2,o2),(!v||!p)&&s.drawCachedElementPortion(t,e,l,r,a,d,a2,ou),v&&!p&&(s.drawCachedElementPortion(t,e,f,r,a,d,i2,ou),s.drawCachedElementPortion(t,e,c,r,a,d,s2,ou)),s.drawElementOverlay(t,e)}};rr.drawElements=function(t,e){for(var r=this,n=0;n<e.length;n++){var a=e[n];r.drawElement(t,a)}};rr.drawCachedElements=function(t,e,r,n){for(var a=this,i=0;i<e.length;i++){var s=e[i];a.drawCachedElement(t,s,r,n)}};rr.drawCachedNodes=function(t,e,r,n){for(var a=this,i=0;i<e.length;i++){var s=e[i];s.isNode()&&a.drawCachedElement(t,s,r,n)}};rr.drawLayeredElements=function(t,e,r,n){var a=this,i=a.data.lyrTxrCache.getLayers(e,r);if(i)for(var s=0;s<i.length;s++){var o=i[s],u=o.bb;u.w===0||u.h===0||t.drawImage(o.canvas,u.x1,u.y1,u.w,u.h)}else a.drawCachedElements(t,e,r,n)};var vr={};vr.drawEdge=function(t,e,r){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,s=this,o=e._private.rscratch;if(!(i&&!e.visible())&&!(o.badLine||o.allpts==null||isNaN(o.allpts[0]))){var u;r&&(u=r,t.translate(-u.x1,-u.y1));var l=i?e.pstyle("opacity").value:1,f=i?e.pstyle("line-opacity").value:1,c=e.pstyle("curve-style").value,h=e.pstyle("line-style").value,d=e.pstyle("width").pfValue,v=e.pstyle("line-cap").value,p=e.pstyle("line-outline-width").value,g=e.pstyle("line-outline-color").value,y=l*f,m=l*f,b=function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:y;c==="straight-triangle"?(s.eleStrokeStyle(t,e,M),s.drawEdgeTrianglePath(e,t,o.allpts)):(t.lineWidth=d,t.lineCap=v,s.eleStrokeStyle(t,e,M),s.drawEdgePath(e,t,o.allpts,h),t.lineCap="butt")},E=function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:y;if(t.lineWidth=d+p,t.lineCap=v,p>0)s.colorStrokeStyle(t,g[0],g[1],g[2],M);else{t.lineCap="butt";return}c==="straight-triangle"?s.drawEdgeTrianglePath(e,t,o.allpts):(s.drawEdgePath(e,t,o.allpts,h),t.lineCap="butt")},x=function(){a&&s.drawEdgeOverlay(t,e)},S=function(){a&&s.drawEdgeUnderlay(t,e)},w=function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:m;s.drawArrowheads(t,e,M)},T=function(){s.drawElementText(t,e,null,n)};t.lineJoin="round";var C=e.pstyle("ghost").value==="yes";if(C){var A=e.pstyle("ghost-offset-x").pfValue,R=e.pstyle("ghost-offset-y").pfValue,I=e.pstyle("ghost-opacity").value,D=y*I;t.translate(A,R),b(D),w(D),t.translate(-A,-R)}else E();S(),b(),w(),x(),T(),r&&t.translate(u.x1,u.y1)}};var $T=function(e){if(!["overlay","underlay"].includes(e))throw new Error("Invalid state");return function(r,n){if(n.visible()){var a=n.pstyle("".concat(e,"-opacity")).value;if(a!==0){var i=this,s=i.usePaths(),o=n._private.rscratch,u=n.pstyle("".concat(e,"-padding")).pfValue,l=2*u,f=n.pstyle("".concat(e,"-color")).value;r.lineWidth=l,o.edgeType==="self"&&!s?r.lineCap="butt":r.lineCap="round",i.colorStrokeStyle(r,f[0],f[1],f[2],a),i.drawEdgePath(n,r,o.allpts,"solid")}}}};vr.drawEdgeOverlay=$T("overlay");vr.drawEdgeUnderlay=$T("underlay");vr.drawEdgePath=function(t,e,r,n){var a=t._private.rscratch,i=e,s,o=!1,u=this.usePaths(),l=t.pstyle("line-dash-pattern").pfValue,f=t.pstyle("line-dash-offset").pfValue;if(u){var c=r.join("$"),h=a.pathCacheKey&&a.pathCacheKey===c;h?(s=e=a.pathCache,o=!0):(s=e=new Path2D,a.pathCacheKey=c,a.pathCache=s)}if(i.setLineDash)switch(n){case"dotted":i.setLineDash([1,1]);break;case"dashed":i.setLineDash(l),i.lineDashOffset=f;break;case"solid":i.setLineDash([]);break}if(!o&&!a.badLine)switch(e.beginPath&&e.beginPath(),e.moveTo(r[0],r[1]),a.edgeType){case"bezier":case"self":case"compound":case"multibezier":for(var d=2;d+3<r.length;d+=4)e.quadraticCurveTo(r[d],r[d+1],r[d+2],r[d+3]);break;case"straight":case"haystack":for(var v=2;v+1<r.length;v+=2)e.lineTo(r[v],r[v+1]);break;case"segments":if(a.isRound){var p=Lt(a.roundCorners),g;try{for(p.s();!(g=p.n()).done;){var y=g.value;_T(e,y)}}catch(b){p.e(b)}finally{p.f()}e.lineTo(r[r.length-2],r[r.length-1])}else for(var m=2;m+1<r.length;m+=2)e.lineTo(r[m],r[m+1]);break}e=i,u?e.stroke(s):e.stroke(),e.setLineDash&&e.setLineDash([])};vr.drawEdgeTrianglePath=function(t,e,r){e.fillStyle=e.strokeStyle;for(var n=t.pstyle("width").pfValue,a=0;a+1<r.length;a+=2){var i=[r[a+2]-r[a],r[a+3]-r[a+1]],s=Math.sqrt(i[0]*i[0]+i[1]*i[1]),o=[i[1]/s,-i[0]/s],u=[o[0]*n/2,o[1]*n/2];e.beginPath(),e.moveTo(r[a]-u[0],r[a+1]-u[1]),e.lineTo(r[a]+u[0],r[a+1]+u[1]),e.lineTo(r[a+2],r[a+3]),e.closePath(),e.fill()}};vr.drawArrowheads=function(t,e,r){var n=e._private.rscratch,a=n.edgeType==="haystack";a||this.drawArrowhead(t,e,"source",n.arrowStartX,n.arrowStartY,n.srcArrowAngle,r),this.drawArrowhead(t,e,"mid-target",n.midX,n.midY,n.midtgtArrowAngle,r),this.drawArrowhead(t,e,"mid-source",n.midX,n.midY,n.midsrcArrowAngle,r),a||this.drawArrowhead(t,e,"target",n.arrowEndX,n.arrowEndY,n.tgtArrowAngle,r)};vr.drawArrowhead=function(t,e,r,n,a,i,s){if(!(isNaN(n)||n==null||isNaN(a)||a==null||isNaN(i)||i==null)){var o=this,u=e.pstyle(r+"-arrow-shape").value;if(u!=="none"){var l=e.pstyle(r+"-arrow-fill").value==="hollow"?"both":"filled",f=e.pstyle(r+"-arrow-fill").value,c=e.pstyle("width").pfValue,h=e.pstyle(r+"-arrow-width"),d=h.value==="match-line"?c:h.pfValue;h.units==="%"&&(d*=c);var v=e.pstyle("opacity").value;s===void 0&&(s=v);var p=t.globalCompositeOperation;(s!==1||f==="hollow")&&(t.globalCompositeOperation="destination-out",o.colorFillStyle(t,255,255,255,1),o.colorStrokeStyle(t,255,255,255,1),o.drawArrowShape(e,t,l,c,u,d,n,a,i),t.globalCompositeOperation=p);var g=e.pstyle(r+"-arrow-color").value;o.colorFillStyle(t,g[0],g[1],g[2],s),o.colorStrokeStyle(t,g[0],g[1],g[2],s),o.drawArrowShape(e,t,f,c,u,d,n,a,i)}}};vr.drawArrowShape=function(t,e,r,n,a,i,s,o,u){var l=this,f=this.usePaths()&&a!=="triangle-cross",c=!1,h,d=e,v={x:s,y:o},p=t.pstyle("arrow-scale").value,g=this.getArrowWidth(n,p),y=l.arrowShapes[a];if(f){var m=l.arrowPathCache=l.arrowPathCache||[],b=on(a),E=m[b];E!=null?(h=e=E,c=!0):(h=e=new Path2D,m[b]=h)}c||(e.beginPath&&e.beginPath(),f?y.draw(e,1,0,{x:0,y:0},1):y.draw(e,g,u,v,n),e.closePath&&e.closePath()),e=d,f&&(e.translate(s,o),e.rotate(u),e.scale(g,g)),(r==="filled"||r==="both")&&(f?e.fill(h):e.fill()),(r==="hollow"||r==="both")&&(e.lineWidth=i/(f?g:1),e.lineJoin="miter",f?e.stroke(h):e.stroke()),f&&(e.scale(1/g,1/g),e.rotate(-u),e.translate(-s,-o))};var zv={};zv.safeDrawImage=function(t,e,r,n,a,i,s,o,u,l){if(!(a<=0||i<=0||u<=0||l<=0))try{t.drawImage(e,r,n,a,i,s,o,u,l)}catch(f){Ge(f)}};zv.drawInscribedImage=function(t,e,r,n,a){var i=this,s=r.position(),o=s.x,u=s.y,l=r.cy().style(),f=l.getIndexedStyle.bind(l),c=f(r,"background-fit","value",n),h=f(r,"background-repeat","value",n),d=r.width(),v=r.height(),p=r.padding()*2,g=d+(f(r,"background-width-relative-to","value",n)==="inner"?0:p),y=v+(f(r,"background-height-relative-to","value",n)==="inner"?0:p),m=r._private.rscratch,b=f(r,"background-clip","value",n),E=b==="node",x=f(r,"background-image-opacity","value",n)*a,S=f(r,"background-image-smoothing","value",n),w=r.pstyle("corner-radius").value;w!=="auto"&&(w=r.pstyle("corner-radius").pfValue);var T=e.width||e.cachedW,C=e.height||e.cachedH;(T==null||C==null)&&(document.body.appendChild(e),T=e.cachedW=e.width||e.offsetWidth,C=e.cachedH=e.height||e.offsetHeight,document.body.removeChild(e));var A=T,R=C;if(f(r,"background-width","value",n)!=="auto"&&(f(r,"background-width","units",n)==="%"?A=f(r,"background-width","pfValue",n)*g:A=f(r,"background-width","pfValue",n)),f(r,"background-height","value",n)!=="auto"&&(f(r,"background-height","units",n)==="%"?R=f(r,"background-height","pfValue",n)*y:R=f(r,"background-height","pfValue",n)),!(A===0||R===0)){if(c==="contain"){var I=Math.min(g/A,y/R);A*=I,R*=I}else if(c==="cover"){var I=Math.max(g/A,y/R);A*=I,R*=I}var D=o-g/2,_=f(r,"background-position-x","units",n),M=f(r,"background-position-x","pfValue",n);_==="%"?D+=(g-A)*M:D+=M;var k=f(r,"background-offset-x","units",n),O=f(r,"background-offset-x","pfValue",n);k==="%"?D+=(g-A)*O:D+=O;var P=u-y/2,q=f(r,"background-position-y","units",n),G=f(r,"background-position-y","pfValue",n);q==="%"?P+=(y-R)*G:P+=G;var F=f(r,"background-offset-y","units",n),z=f(r,"background-offset-y","pfValue",n);F==="%"?P+=(y-R)*z:P+=z,m.pathCache&&(D-=o,P-=u,o=0,u=0);var W=t.globalAlpha;t.globalAlpha=x;var N=i.getImgSmoothing(t),B=!1;if(S==="no"&&N?(i.setImgSmoothing(t,!1),B=!0):S==="yes"&&!N&&(i.setImgSmoothing(t,!0),B=!0),h==="no-repeat")E&&(t.save(),m.pathCache?t.clip(m.pathCache):(i.nodeShapes[i.getNodeShape(r)].draw(t,o,u,g,y,w,m),t.clip())),i.safeDrawImage(t,e,0,0,T,C,D,P,A,R),E&&t.restore();else{var $=t.createPattern(e,h);t.fillStyle=$,i.nodeShapes[i.getNodeShape(r)].draw(t,o,u,g,y,w,m),t.translate(D,P),t.fill(),t.translate(-D,-P)}t.globalAlpha=W,B&&i.setImgSmoothing(t,N)}};var vn={};vn.eleTextBiggerThanMin=function(t,e){if(!e){var r=t.cy().zoom(),n=this.getPixelRatio(),a=Math.ceil(Sv(r*n));e=Math.pow(2,a)}var i=t.pstyle("font-size").pfValue*e,s=t.pstyle("min-zoomed-font-size").pfValue;return!(i<s)};vn.drawElementText=function(t,e,r,n,a){var i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,s=this;if(n==null){if(i&&!s.eleTextBiggerThanMin(e))return}else if(n===!1)return;if(e.isNode()){var o=e.pstyle("label");if(!o||!o.value)return;var u=s.getLabelJustification(e);t.textAlign=u,t.textBaseline="bottom"}else{var l=e.element()._private.rscratch.badLine,f=e.pstyle("label"),c=e.pstyle("source-label"),h=e.pstyle("target-label");if(l||(!f||!f.value)&&(!c||!c.value)&&(!h||!h.value))return;t.textAlign="center",t.textBaseline="bottom"}var d=!r,v;r&&(v=r,t.translate(-v.x1,-v.y1)),a==null?(s.drawText(t,e,null,d,i),e.isEdge()&&(s.drawText(t,e,"source",d,i),s.drawText(t,e,"target",d,i))):s.drawText(t,e,a,d,i),r&&t.translate(v.x1,v.y1)};vn.getFontCache=function(t){var e;this.fontCaches=this.fontCaches||[];for(var r=0;r<this.fontCaches.length;r++)if(e=this.fontCaches[r],e.context===t)return e;return e={context:t},this.fontCaches.push(e),e};vn.setupTextStyle=function(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,n=e.pstyle("font-style").strValue,a=e.pstyle("font-size").pfValue+"px",i=e.pstyle("font-family").strValue,s=e.pstyle("font-weight").strValue,o=r?e.effectiveOpacity()*e.pstyle("text-opacity").value:1,u=e.pstyle("text-outline-opacity").value*o,l=e.pstyle("color").value,f=e.pstyle("text-outline-color").value;t.font=n+" "+s+" "+a+" "+i,t.lineJoin="round",this.colorFillStyle(t,l[0],l[1],l[2],o),this.colorStrokeStyle(t,f[0],f[1],f[2],u)};function u2(t,e,r,n,a){var i=Math.min(n,a),s=i/2,o=e+n/2,u=r+a/2;t.beginPath(),t.arc(o,u,s,0,Math.PI*2),t.closePath()}function Zy(t,e,r,n,a){var i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:5,s=Math.min(i,n/2,a/2);t.beginPath(),t.moveTo(e+s,r),t.lineTo(e+n-s,r),t.quadraticCurveTo(e+n,r,e+n,r+s),t.lineTo(e+n,r+a-s),t.quadraticCurveTo(e+n,r+a,e+n-s,r+a),t.lineTo(e+s,r+a),t.quadraticCurveTo(e,r+a,e,r+a-s),t.lineTo(e,r+s),t.quadraticCurveTo(e,r,e+s,r),t.closePath()}vn.getTextAngle=function(t,e){var r,n=t._private,a=n.rscratch,i=e?e+"-":"",s=t.pstyle(i+"text-rotation");if(s.strValue==="autorotate"){var o=Dt(a,"labelAngle",e);r=t.isEdge()?o:0}else s.strValue==="none"?r=0:r=s.pfValue;return r};vn.drawText=function(t,e,r){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,i=e._private,s=i.rscratch,o=a?e.effectiveOpacity():1;if(!(a&&(o===0||e.pstyle("text-opacity").value===0))){r==="main"&&(r=null);var u=Dt(s,"labelX",r),l=Dt(s,"labelY",r),f,c,h=this.getLabelText(e,r);if(h!=null&&h!==""&&!isNaN(u)&&!isNaN(l)){this.setupTextStyle(t,e,a);var d=r?r+"-":"",v=Dt(s,"labelWidth",r),p=Dt(s,"labelHeight",r),g=e.pstyle(d+"text-margin-x").pfValue,y=e.pstyle(d+"text-margin-y").pfValue,m=e.isEdge(),b=e.pstyle("text-halign").value,E=e.pstyle("text-valign").value;m&&(b="center",E="center"),u+=g,l+=y;var x;switch(n?x=this.getTextAngle(e,r):x=0,x!==0&&(f=u,c=l,t.translate(f,c),t.rotate(x),u=0,l=0),E){case"top":break;case"center":l+=p/2;break;case"bottom":l+=p;break}var S=e.pstyle("text-background-opacity").value,w=e.pstyle("text-border-opacity").value,T=e.pstyle("text-border-width").pfValue,C=e.pstyle("text-background-padding").pfValue,A=e.pstyle("text-background-shape").strValue,R=A==="round-rectangle"||A==="roundrectangle",I=A==="circle",D=2;if(S>0||T>0&&w>0){var _=t.fillStyle,M=t.strokeStyle,k=t.lineWidth,O=e.pstyle("text-background-color").value,P=e.pstyle("text-border-color").value,q=e.pstyle("text-border-style").value,G=S>0,F=T>0&&w>0,z=u-C;switch(b){case"left":z-=v;break;case"center":z-=v/2;break}var W=l-p-C,N=v+2*C,B=p+2*C;if(G&&(t.fillStyle="rgba(".concat(O[0],",").concat(O[1],",").concat(O[2],",").concat(S*o,")")),F&&(t.strokeStyle="rgba(".concat(P[0],",").concat(P[1],",").concat(P[2],",").concat(w*o,")"),t.lineWidth=T,t.setLineDash))switch(q){case"dotted":t.setLineDash([1,1]);break;case"dashed":t.setLineDash([4,2]);break;case"double":t.lineWidth=T/4,t.setLineDash([]);break;case"solid":default:t.setLineDash([]);break}if(R?(t.beginPath(),Zy(t,z,W,N,B,D)):I?(t.beginPath(),u2(t,z,W,N,B)):(t.beginPath(),t.rect(z,W,N,B)),G&&t.fill(),F&&t.stroke(),F&&q==="double"){var $=T/2;t.beginPath(),R?Zy(t,z+$,W+$,N-2*$,B-2*$,D):t.rect(z+$,W+$,N-2*$,B-2*$),t.stroke()}t.fillStyle=_,t.strokeStyle=M,t.lineWidth=k,t.setLineDash&&t.setLineDash([])}var H=2*e.pstyle("text-outline-width").pfValue;if(H>0&&(t.lineWidth=H),e.pstyle("text-wrap").value==="wrap"){var te=Dt(s,"labelWrapCachedLines",r),K=Dt(s,"labelLineHeight",r),V=v/2,U=this.getLabelJustification(e);switch(U==="auto"||(b==="left"?U==="left"?u+=-v:U==="center"&&(u+=-V):b==="center"?U==="left"?u+=-V:U==="right"&&(u+=V):b==="right"&&(U==="center"?u+=V:U==="right"&&(u+=v))),E){case"top":l-=(te.length-1)*K;break;case"center":case"bottom":l-=(te.length-1)*K;break}for(var X=0;X<te.length;X++)H>0&&t.strokeText(te[X],u,l),t.fillText(te[X],u,l),l+=K}else H>0&&t.strokeText(h,u,l),t.fillText(h,u,l);x!==0&&(t.rotate(-x),t.translate(-f,-c))}}};var $r={};$r.drawNode=function(t,e,r){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,s=this,o,u,l=e._private,f=l.rscratch,c=e.position();if(!(!ie(c.x)||!ie(c.y))&&!(i&&!e.visible())){var h=i?e.effectiveOpacity():1,d=s.usePaths(),v,p=!1,g=e.padding();o=e.width()+2*g,u=e.height()+2*g;var y;r&&(y=r,t.translate(-y.x1,-y.y1));for(var m=e.pstyle("background-image"),b=m.value,E=new Array(b.length),x=new Array(b.length),S=0,w=0;w<b.length;w++){var T=b[w],C=E[w]=T!=null&&T!=="none";if(C){var A=e.cy().style().getIndexedStyle(e,"background-image-crossorigin","value",w);S++,x[w]=s.getCachedImage(T,A,function(){l.backgroundTimestamp=Date.now(),e.emitAndNotify("background")})}}var R=e.pstyle("background-blacken").value,I=e.pstyle("border-width").pfValue,D=e.pstyle("background-opacity").value*h,_=e.pstyle("border-color").value,M=e.pstyle("border-style").value,k=e.pstyle("border-join").value,O=e.pstyle("border-cap").value,P=e.pstyle("border-position").value,q=e.pstyle("border-dash-pattern").pfValue,G=e.pstyle("border-dash-offset").pfValue,F=e.pstyle("border-opacity").value*h,z=e.pstyle("outline-width").pfValue,W=e.pstyle("outline-color").value,N=e.pstyle("outline-style").value,B=e.pstyle("outline-opacity").value*h,$=e.pstyle("outline-offset").value,H=e.pstyle("corner-radius").value;H!=="auto"&&(H=e.pstyle("corner-radius").pfValue);var te=function(){var ue=arguments.length>0&&arguments[0]!==void 0?arguments[0]:D;s.eleFillStyle(t,e,ue)},K=function(){var ue=arguments.length>0&&arguments[0]!==void 0?arguments[0]:F;s.colorStrokeStyle(t,_[0],_[1],_[2],ue)},V=function(){var ue=arguments.length>0&&arguments[0]!==void 0?arguments[0]:B;s.colorStrokeStyle(t,W[0],W[1],W[2],ue)},U=function(ue,J,L,Y){var Z=s.nodePathCache=s.nodePathCache||[],Q=Rx(L==="polygon"?L+","+Y.join(","):L,""+J,""+ue,""+H),ee=Z[Q],ce,re=!1;return ee!=null?(ce=ee,re=!0,f.pathCache=ce):(ce=new Path2D,Z[Q]=f.pathCache=ce),{path:ce,cacheHit:re}},X=e.pstyle("shape").strValue,j=e.pstyle("shape-polygon-points").pfValue;if(d){t.translate(c.x,c.y);var ne=U(o,u,X,j);v=ne.path,p=ne.cacheHit}var ae=function(){if(!p){var ue=c;d&&(ue={x:0,y:0}),s.nodeShapes[s.getNodeShape(e)].draw(v||t,ue.x,ue.y,o,u,H,f)}d?t.fill(v):t.fill()},Se=function(){for(var ue=arguments.length>0&&arguments[0]!==void 0?arguments[0]:h,J=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,L=l.backgrounding,Y=0,Z=0;Z<x.length;Z++){var Q=e.cy().style().getIndexedStyle(e,"background-image-containment","value",Z);if(J&&Q==="over"||!J&&Q==="inside"){Y++;continue}E[Z]&&x[Z].complete&&!x[Z].error&&(Y++,s.drawInscribedImage(t,x[Z],e,Z,ue))}l.backgrounding=Y!==S,L!==l.backgrounding&&e.updateStyle(!1)},se=function(){var ue=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,J=arguments.length>1&&arguments[1]!==void 0?arguments[1]:h;s.hasPie(e)&&(s.drawPie(t,e,J),ue&&(d||s.nodeShapes[s.getNodeShape(e)].draw(t,c.x,c.y,o,u,H,f)))},be=function(){var ue=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,J=arguments.length>1&&arguments[1]!==void 0?arguments[1]:h;s.hasStripe(e)&&(t.save(),d?t.clip(f.pathCache):(s.nodeShapes[s.getNodeShape(e)].draw(t,c.x,c.y,o,u,H,f),t.clip()),s.drawStripe(t,e,J),t.restore(),ue&&(d||s.nodeShapes[s.getNodeShape(e)].draw(t,c.x,c.y,o,u,H,f)))},ge=function(){var ue=arguments.length>0&&arguments[0]!==void 0?arguments[0]:h,J=(R>0?R:-R)*ue,L=R>0?0:255;R!==0&&(s.colorFillStyle(t,L,L,L,J),d?t.fill(v):t.fill())},oe=function(){if(I>0){if(t.lineWidth=I,t.lineCap=O,t.lineJoin=k,t.setLineDash)switch(M){case"dotted":t.setLineDash([1,1]);break;case"dashed":t.setLineDash(q),t.lineDashOffset=G;break;case"solid":case"double":t.setLineDash([]);break}if(P!=="center"){if(t.save(),t.lineWidth*=2,P==="inside")d?t.clip(v):t.clip();else{var ue=new Path2D;ue.rect(-o/2-I,-u/2-I,o+2*I,u+2*I),ue.addPath(v),t.clip(ue,"evenodd")}d?t.stroke(v):t.stroke(),t.restore()}else d?t.stroke(v):t.stroke();if(M==="double"){t.lineWidth=I/3;var J=t.globalCompositeOperation;t.globalCompositeOperation="destination-out",d?t.stroke(v):t.stroke(),t.globalCompositeOperation=J}t.setLineDash&&t.setLineDash([])}},de=function(){if(z>0){if(t.lineWidth=z,t.lineCap="butt",t.setLineDash)switch(N){case"dotted":t.setLineDash([1,1]);break;case"dashed":t.setLineDash([4,2]);break;case"solid":case"double":t.setLineDash([]);break}var ue=c;d&&(ue={x:0,y:0});var J=s.getNodeShape(e),L=I;P==="inside"&&(L=0),P==="outside"&&(L*=2);var Y=(o+L+(z+$))/o,Z=(u+L+(z+$))/u,Q=o*Y,ee=u*Z,ce=s.nodeShapes[J].points,re;if(d){var ye=U(Q,ee,J,ce);re=ye.path}if(J==="ellipse")s.drawEllipsePath(re||t,ue.x,ue.y,Q,ee);else if(["round-diamond","round-heptagon","round-hexagon","round-octagon","round-pentagon","round-polygon","round-triangle","round-tag"].includes(J)){var he=0,Ee=0,Ie=0;J==="round-diamond"?he=(L+$+z)*1.4:J==="round-heptagon"?(he=(L+$+z)*1.075,Ie=-(L/2+$+z)/35):J==="round-hexagon"?he=(L+$+z)*1.12:J==="round-pentagon"?(he=(L+$+z)*1.13,Ie=-(L/2+$+z)/15):J==="round-tag"?(he=(L+$+z)*1.12,Ee=(L/2+z+$)*.07):J==="round-triangle"&&(he=(L+$+z)*(Math.PI/2),Ie=-(L+$/2+z)/Math.PI),he!==0&&(Y=(o+he)/o,Q=o*Y,["round-hexagon","round-tag"].includes(J)||(Z=(u+he)/u,ee=u*Z)),H=H==="auto"?Bx(Q,ee):H;for(var Ae=Q/2,me=ee/2,Le=H+(L+z+$)/2,De=new Array(ce.length/2),nt=new Array(ce.length/2),je=0;je<ce.length/2;je++)De[je]={x:ue.x+Ee+Ae*ce[je*2],y:ue.y+Ie+me*ce[je*2+1]};var xt,Qe,lt,at,dt=De.length;for(Qe=De[dt-1],xt=0;xt<dt;xt++)lt=De[xt%dt],at=De[(xt+1)%dt],nt[xt]=qv(Qe,lt,at,Le),Qe=lt,lt=at;s.drawRoundPolygonPath(re||t,ue.x+Ee,ue.y+Ie,o*Y,u*Z,ce,nt)}else if(["roundrectangle","round-rectangle"].includes(J))H=H==="auto"?kr(Q,ee):H,s.drawRoundRectanglePath(re||t,ue.x,ue.y,Q,ee,H+(L+z+$)/2);else if(["cutrectangle","cut-rectangle"].includes(J))H=H==="auto"?Iv():H,s.drawCutRectanglePath(re||t,ue.x,ue.y,Q,ee,null,H+(L+z+$)/4);else if(["bottomroundrectangle","bottom-round-rectangle"].includes(J))H=H==="auto"?kr(Q,ee):H,s.drawBottomRoundRectanglePath(re||t,ue.x,ue.y,Q,ee,H+(L+z+$)/2);else if(J==="barrel")s.drawBarrelPath(re||t,ue.x,ue.y,Q,ee);else if(J.startsWith("polygon")||["rhomboid","right-rhomboid","round-tag","tag","vee"].includes(J)){var yr=(L+z+$)/o;ce=Ii(Di(ce,yr)),s.drawPolygonPath(re||t,ue.x,ue.y,o,u,ce)}else{var Je=(L+z+$)/o;ce=Ii(Di(ce,-Je)),s.drawPolygonPath(re||t,ue.x,ue.y,o,u,ce)}if(d?t.stroke(re):t.stroke(),N==="double"){t.lineWidth=L/3;var ar=t.globalCompositeOperation;t.globalCompositeOperation="destination-out",d?t.stroke(re):t.stroke(),t.globalCompositeOperation=ar}t.setLineDash&&t.setLineDash([])}},fe=function(){a&&s.drawNodeOverlay(t,e,c,o,u)},ve=function(){a&&s.drawNodeUnderlay(t,e,c,o,u)},pe=function(){s.drawElementText(t,e,null,n)},Ce=e.pstyle("ghost").value==="yes";if(Ce){var Me=e.pstyle("ghost-offset-x").pfValue,Pe=e.pstyle("ghost-offset-y").pfValue,_e=e.pstyle("ghost-opacity").value,ke=_e*h;t.translate(Me,Pe),V(),de(),te(_e*D),ae(),Se(ke,!0),K(_e*F),oe(),se(R!==0||I!==0),be(R!==0||I!==0),Se(ke,!1),ge(ke),t.translate(-Me,-Pe)}d&&t.translate(-c.x,-c.y),ve(),d&&t.translate(c.x,c.y),V(),de(),te(),ae(),Se(h,!0),K(),oe(),se(R!==0||I!==0),be(R!==0||I!==0),Se(h,!1),ge(),d&&t.translate(-c.x,-c.y),pe(),fe(),r&&t.translate(y.x1,y.y1)}};var VT=function(e){if(!["overlay","underlay"].includes(e))throw new Error("Invalid state");return function(r,n,a,i,s){var o=this;if(n.visible()){var u=n.pstyle("".concat(e,"-padding")).pfValue,l=n.pstyle("".concat(e,"-opacity")).value,f=n.pstyle("".concat(e,"-color")).value,c=n.pstyle("".concat(e,"-shape")).value,h=n.pstyle("".concat(e,"-corner-radius")).value;if(l>0){if(a=a||n.position(),i==null||s==null){var d=n.padding();i=n.width()+2*d,s=n.height()+2*d}o.colorFillStyle(r,f[0],f[1],f[2],l),o.nodeShapes[c].draw(r,a.x,a.y,i+u*2,s+u*2,h),r.fill()}}}};$r.drawNodeOverlay=VT("overlay");$r.drawNodeUnderlay=VT("underlay");$r.hasPie=function(t){return t=t[0],t._private.hasPie};$r.hasStripe=function(t){return t=t[0],t._private.hasStripe};$r.drawPie=function(t,e,r,n){e=e[0],n=n||e.position();var a=e.cy().style(),i=e.pstyle("pie-size"),s=e.pstyle("pie-hole"),o=e.pstyle("pie-start-angle").pfValue,u=n.x,l=n.y,f=e.width(),c=e.height(),h=Math.min(f,c)/2,d,v=0,p=this.usePaths();if(p&&(u=0,l=0),i.units==="%"?h=h*i.pfValue:i.pfValue!==void 0&&(h=i.pfValue/2),s.units==="%"?d=h*s.pfValue:s.pfValue!==void 0&&(d=s.pfValue/2),!(d>=h))for(var g=1;g<=a.pieBackgroundN;g++){var y=e.pstyle("pie-"+g+"-background-size").value,m=e.pstyle("pie-"+g+"-background-color").value,b=e.pstyle("pie-"+g+"-background-opacity").value*r,E=y/100;E+v>1&&(E=1-v);var x=1.5*Math.PI+2*Math.PI*v;x+=o;var S=2*Math.PI*E,w=x+S;y===0||v>=1||v+E>1||(d===0?(t.beginPath(),t.moveTo(u,l),t.arc(u,l,h,x,w),t.closePath()):(t.beginPath(),t.arc(u,l,h,x,w),t.arc(u,l,d,w,x,!0),t.closePath()),this.colorFillStyle(t,m[0],m[1],m[2],b),t.fill(),v+=E)}};$r.drawStripe=function(t,e,r,n){e=e[0],n=n||e.position();var a=e.cy().style(),i=n.x,s=n.y,o=e.width(),u=e.height(),l=0,f=this.usePaths();t.save();var c=e.pstyle("stripe-direction").value,h=e.pstyle("stripe-size");switch(c){case"vertical":break;case"righward":t.rotate(-Math.PI/2);break}var d=o,v=u;h.units==="%"?(d=d*h.pfValue,v=v*h.pfValue):h.pfValue!==void 0&&(d=h.pfValue,v=h.pfValue),f&&(i=0,s=0),s-=d/2,i-=v/2;for(var p=1;p<=a.stripeBackgroundN;p++){var g=e.pstyle("stripe-"+p+"-background-size").value,y=e.pstyle("stripe-"+p+"-background-color").value,m=e.pstyle("stripe-"+p+"-background-opacity").value*r,b=g/100;b+l>1&&(b=1-l),!(g===0||l>=1||l+b>1)&&(t.beginPath(),t.rect(i,s+v*l,d,v*b),t.closePath(),this.colorFillStyle(t,y[0],y[1],y[2],m),t.fill(),l+=b)}t.restore()};var At={},l2=100;At.getPixelRatio=function(){var t=this.data.contexts[0];if(this.forcedPixelRatio!=null)return this.forcedPixelRatio;var e=this.cy.window(),r=t.backingStorePixelRatio||t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;return(e.devicePixelRatio||1)/r};At.paintCache=function(t){for(var e=this.paintCaches=this.paintCaches||[],r=!0,n,a=0;a<e.length;a++)if(n=e[a],n.context===t){r=!1;break}return r&&(n={context:t},e.push(n)),n};At.createGradientStyleFor=function(t,e,r,n,a){var i,s=this.usePaths(),o=r.pstyle(e+"-gradient-stop-colors").value,u=r.pstyle(e+"-gradient-stop-positions").pfValue;if(n==="radial-gradient")if(r.isEdge()){var l=r.sourceEndpoint(),f=r.targetEndpoint(),c=r.midpoint(),h=un(l,c),d=un(f,c);i=t.createRadialGradient(c.x,c.y,0,c.x,c.y,Math.max(h,d))}else{var v=s?{x:0,y:0}:r.position(),p=r.paddedWidth(),g=r.paddedHeight();i=t.createRadialGradient(v.x,v.y,0,v.x,v.y,Math.max(p,g))}else if(r.isEdge()){var y=r.sourceEndpoint(),m=r.targetEndpoint();i=t.createLinearGradient(y.x,y.y,m.x,m.y)}else{var b=s?{x:0,y:0}:r.position(),E=r.paddedWidth(),x=r.paddedHeight(),S=E/2,w=x/2,T=r.pstyle("background-gradient-direction").value;switch(T){case"to-bottom":i=t.createLinearGradient(b.x,b.y-w,b.x,b.y+w);break;case"to-top":i=t.createLinearGradient(b.x,b.y+w,b.x,b.y-w);break;case"to-left":i=t.createLinearGradient(b.x+S,b.y,b.x-S,b.y);break;case"to-right":i=t.createLinearGradient(b.x-S,b.y,b.x+S,b.y);break;case"to-bottom-right":case"to-right-bottom":i=t.createLinearGradient(b.x-S,b.y-w,b.x+S,b.y+w);break;case"to-top-right":case"to-right-top":i=t.createLinearGradient(b.x-S,b.y+w,b.x+S,b.y-w);break;case"to-bottom-left":case"to-left-bottom":i=t.createLinearGradient(b.x+S,b.y-w,b.x-S,b.y+w);break;case"to-top-left":case"to-left-top":i=t.createLinearGradient(b.x+S,b.y+w,b.x-S,b.y-w);break}}if(!i)return null;for(var C=u.length===o.length,A=o.length,R=0;R<A;R++)i.addColorStop(C?u[R]:R/(A-1),"rgba("+o[R][0]+","+o[R][1]+","+o[R][2]+","+a+")");return i};At.gradientFillStyle=function(t,e,r,n){var a=this.createGradientStyleFor(t,"background",e,r,n);if(!a)return null;t.fillStyle=a};At.colorFillStyle=function(t,e,r,n,a){t.fillStyle="rgba("+e+","+r+","+n+","+a+")"};At.eleFillStyle=function(t,e,r){var n=e.pstyle("background-fill").value;if(n==="linear-gradient"||n==="radial-gradient")this.gradientFillStyle(t,e,n,r);else{var a=e.pstyle("background-color").value;this.colorFillStyle(t,a[0],a[1],a[2],r)}};At.gradientStrokeStyle=function(t,e,r,n){var a=this.createGradientStyleFor(t,"line",e,r,n);if(!a)return null;t.strokeStyle=a};At.colorStrokeStyle=function(t,e,r,n,a){t.strokeStyle="rgba("+e+","+r+","+n+","+a+")"};At.eleStrokeStyle=function(t,e,r){var n=e.pstyle("line-fill").value;if(n==="linear-gradient"||n==="radial-gradient")this.gradientStrokeStyle(t,e,n,r);else{var a=e.pstyle("line-color").value;this.colorStrokeStyle(t,a[0],a[1],a[2],r)}};At.matchCanvasSize=function(t){var e=this,r=e.data,n=e.findContainerClientCoords(),a=n[2],i=n[3],s=e.getPixelRatio(),o=e.motionBlurPxRatio;(t===e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_NODE]||t===e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_DRAG])&&(s=o);var u=a*s,l=i*s,f;if(!(u===e.canvasWidth&&l===e.canvasHeight)){e.fontCaches=null;var c=r.canvasContainer;c.style.width=a+"px",c.style.height=i+"px";for(var h=0;h<e.CANVAS_LAYERS;h++)f=r.canvases[h],f.width=u,f.height=l,f.style.width=a+"px",f.style.height=i+"px";for(var h=0;h<e.BUFFER_COUNT;h++)f=r.bufferCanvases[h],f.width=u,f.height=l,f.style.width=a+"px",f.style.height=i+"px";e.textureMult=1,s<=1&&(f=r.bufferCanvases[e.TEXTURE_BUFFER],e.textureMult=2,f.width=u*e.textureMult,f.height=l*e.textureMult),e.canvasWidth=u,e.canvasHeight=l,e.pixelRatio=s}};At.renderTo=function(t,e,r,n){this.render({forcedContext:t,forcedZoom:e,forcedPan:r,drawAllLayers:!0,forcedPxRatio:n})};At.clearCanvas=function(){var t=this,e=t.data;function r(n){n.clearRect(0,0,t.canvasWidth,t.canvasHeight)}r(e.contexts[t.NODE]),r(e.contexts[t.DRAG])};At.render=function(t){var e=this;t=t||Lx();var r=e.cy,n=t.forcedContext,a=t.drawAllLayers,i=t.drawOnlyNodeLayer,s=t.forcedZoom,o=t.forcedPan,u=t.forcedPxRatio===void 0?this.getPixelRatio():t.forcedPxRatio,l=e.data,f=l.canvasNeedsRedraw,c=e.textureOnViewport&&!n&&(e.pinching||e.hoverData.dragging||e.swipePanning||e.data.wheelZooming),h=t.motionBlur!==void 0?t.motionBlur:e.motionBlur,d=e.motionBlurPxRatio,v=r.hasCompoundNodes(),p=e.hoverData.draggingEles,g=!!(e.hoverData.selecting||e.touchData.selecting);h=h&&!n&&e.motionBlurEnabled&&!g;var y=h;n||(e.prevPxRatio!==u&&(e.invalidateContainerClientCoordsCache(),e.matchCanvasSize(e.container),e.redrawHint("eles",!0),e.redrawHint("drag",!0)),e.prevPxRatio=u),!n&&e.motionBlurTimeout&&clearTimeout(e.motionBlurTimeout),h&&(e.mbFrames==null&&(e.mbFrames=0),e.mbFrames++,e.mbFrames<3&&(y=!1),e.mbFrames>e.minMbLowQualFrames&&(e.motionBlurPxRatio=e.mbPxRBlurry)),e.clearingMotionBlur&&(e.motionBlurPxRatio=1),e.textureDrawLastFrame&&!c&&(f[e.NODE]=!0,f[e.SELECT_BOX]=!0);var m=r.style(),b=r.zoom(),E=s!==void 0?s:b,x=r.pan(),S={x:x.x,y:x.y},w={zoom:b,pan:{x:x.x,y:x.y}},T=e.prevViewport,C=T===void 0||w.zoom!==T.zoom||w.pan.x!==T.pan.x||w.pan.y!==T.pan.y;!C&&!(p&&!v)&&(e.motionBlurPxRatio=1),o&&(S=o),E*=u,S.x*=u,S.y*=u;var A=e.getCachedZSortedEles();function R(K,V,U,X,j){var ne=K.globalCompositeOperation;K.globalCompositeOperation="destination-out",e.colorFillStyle(K,255,255,255,e.motionBlurTransparency),K.fillRect(V,U,X,j),K.globalCompositeOperation=ne}function I(K,V){var U,X,j,ne;!e.clearingMotionBlur&&(K===l.bufferContexts[e.MOTIONBLUR_BUFFER_NODE]||K===l.bufferContexts[e.MOTIONBLUR_BUFFER_DRAG])?(U={x:x.x*d,y:x.y*d},X=b*d,j=e.canvasWidth*d,ne=e.canvasHeight*d):(U=S,X=E,j=e.canvasWidth,ne=e.canvasHeight),K.setTransform(1,0,0,1,0,0),V==="motionBlur"?R(K,0,0,j,ne):!n&&(V===void 0||V)&&K.clearRect(0,0,j,ne),a||(K.translate(U.x,U.y),K.scale(X,X)),o&&K.translate(o.x,o.y),s&&K.scale(s,s)}if(c||(e.textureDrawLastFrame=!1),c){if(e.textureDrawLastFrame=!0,!e.textureCache){e.textureCache={},e.textureCache.bb=r.mutableElements().boundingBox(),e.textureCache.texture=e.data.bufferCanvases[e.TEXTURE_BUFFER];var D=e.data.bufferContexts[e.TEXTURE_BUFFER];D.setTransform(1,0,0,1,0,0),D.clearRect(0,0,e.canvasWidth*e.textureMult,e.canvasHeight*e.textureMult),e.render({forcedContext:D,drawOnlyNodeLayer:!0,forcedPxRatio:u*e.textureMult});var w=e.textureCache.viewport={zoom:r.zoom(),pan:r.pan(),width:e.canvasWidth,height:e.canvasHeight};w.mpan={x:(0-w.pan.x)/w.zoom,y:(0-w.pan.y)/w.zoom}}f[e.DRAG]=!1,f[e.NODE]=!1;var _=l.contexts[e.NODE],M=e.textureCache.texture,w=e.textureCache.viewport;_.setTransform(1,0,0,1,0,0),h?R(_,0,0,w.width,w.height):_.clearRect(0,0,w.width,w.height);var k=m.core("outside-texture-bg-color").value,O=m.core("outside-texture-bg-opacity").value;e.colorFillStyle(_,k[0],k[1],k[2],O),_.fillRect(0,0,w.width,w.height);var b=r.zoom();I(_,!1),_.clearRect(w.mpan.x,w.mpan.y,w.width/w.zoom/u,w.height/w.zoom/u),_.drawImage(M,w.mpan.x,w.mpan.y,w.width/w.zoom/u,w.height/w.zoom/u)}else e.textureOnViewport&&!n&&(e.textureCache=null);var P=r.extent(),q=e.pinching||e.hoverData.dragging||e.swipePanning||e.data.wheelZooming||e.hoverData.draggingEles||e.cy.animated(),G=e.hideEdgesOnViewport&&q,F=[];if(F[e.NODE]=!f[e.NODE]&&h&&!e.clearedForMotionBlur[e.NODE]||e.clearingMotionBlur,F[e.NODE]&&(e.clearedForMotionBlur[e.NODE]=!0),F[e.DRAG]=!f[e.DRAG]&&h&&!e.clearedForMotionBlur[e.DRAG]||e.clearingMotionBlur,F[e.DRAG]&&(e.clearedForMotionBlur[e.DRAG]=!0),f[e.NODE]||a||i||F[e.NODE]){var z=h&&!F[e.NODE]&&d!==1,_=n||(z?e.data.bufferContexts[e.MOTIONBLUR_BUFFER_NODE]:l.contexts[e.NODE]),W=h&&!z?"motionBlur":void 0;I(_,W),G?e.drawCachedNodes(_,A.nondrag,u,P):e.drawLayeredElements(_,A.nondrag,u,P),e.debug&&e.drawDebugPoints(_,A.nondrag),!a&&!h&&(f[e.NODE]=!1)}if(!i&&(f[e.DRAG]||a||F[e.DRAG])){var z=h&&!F[e.DRAG]&&d!==1,_=n||(z?e.data.bufferContexts[e.MOTIONBLUR_BUFFER_DRAG]:l.contexts[e.DRAG]);I(_,h&&!z?"motionBlur":void 0),G?e.drawCachedNodes(_,A.drag,u,P):e.drawCachedElements(_,A.drag,u,P),e.debug&&e.drawDebugPoints(_,A.drag),!a&&!h&&(f[e.DRAG]=!1)}if(this.drawSelectionRectangle(t,I),h&&d!==1){var N=l.contexts[e.NODE],B=e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_NODE],$=l.contexts[e.DRAG],H=e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_DRAG],te=function(V,U,X){V.setTransform(1,0,0,1,0,0),X||!y?V.clearRect(0,0,e.canvasWidth,e.canvasHeight):R(V,0,0,e.canvasWidth,e.canvasHeight);var j=d;V.drawImage(U,0,0,e.canvasWidth*j,e.canvasHeight*j,0,0,e.canvasWidth,e.canvasHeight)};(f[e.NODE]||F[e.NODE])&&(te(N,B,F[e.NODE]),f[e.NODE]=!1),(f[e.DRAG]||F[e.DRAG])&&(te($,H,F[e.DRAG]),f[e.DRAG]=!1)}e.prevViewport=w,e.clearingMotionBlur&&(e.clearingMotionBlur=!1,e.motionBlurCleared=!0,e.motionBlur=!0),h&&(e.motionBlurTimeout=setTimeout(function(){e.motionBlurTimeout=null,e.clearedForMotionBlur[e.NODE]=!1,e.clearedForMotionBlur[e.DRAG]=!1,e.motionBlur=!1,e.clearingMotionBlur=!c,e.mbFrames=0,f[e.NODE]=!0,f[e.DRAG]=!0,e.redraw()},l2)),n||r.emit("render")};var ia;At.drawSelectionRectangle=function(t,e){var r=this,n=r.cy,a=r.data,i=n.style(),s=t.drawOnlyNodeLayer,o=t.drawAllLayers,u=a.canvasNeedsRedraw,l=t.forcedContext;if(r.showFps||!s&&u[r.SELECT_BOX]&&!o){var f=l||a.contexts[r.SELECT_BOX];if(e(f),r.selection[4]==1&&(r.hoverData.selecting||r.touchData.selecting)){var c=r.cy.zoom(),h=i.core("selection-box-border-width").value/c;f.lineWidth=h,f.fillStyle="rgba("+i.core("selection-box-color").value[0]+","+i.core("selection-box-color").value[1]+","+i.core("selection-box-color").value[2]+","+i.core("selection-box-opacity").value+")",f.fillRect(r.selection[0],r.selection[1],r.selection[2]-r.selection[0],r.selection[3]-r.selection[1]),h>0&&(f.strokeStyle="rgba("+i.core("selection-box-border-color").value[0]+","+i.core("selection-box-border-color").value[1]+","+i.core("selection-box-border-color").value[2]+","+i.core("selection-box-opacity").value+")",f.strokeRect(r.selection[0],r.selection[1],r.selection[2]-r.selection[0],r.selection[3]-r.selection[1]))}if(a.bgActivePosistion&&!r.hoverData.selecting){var c=r.cy.zoom(),d=a.bgActivePosistion;f.fillStyle="rgba("+i.core("active-bg-color").value[0]+","+i.core("active-bg-color").value[1]+","+i.core("active-bg-color").value[2]+","+i.core("active-bg-opacity").value+")",f.beginPath(),f.arc(d.x,d.y,i.core("active-bg-size").pfValue/c,0,2*Math.PI),f.fill()}var v=r.lastRedrawTime;if(r.showFps&&v){v=Math.round(v);var p=Math.round(1e3/v),g="1 frame = "+v+" ms = "+p+" fps";if(f.setTransform(1,0,0,1,0,0),f.fillStyle="rgba(255, 0, 0, 0.75)",f.strokeStyle="rgba(255, 0, 0, 0.75)",f.font="30px Arial",!ia){var y=f.measureText(g);ia=y.actualBoundingBoxAscent}f.fillText(g,0,ia);var m=60;f.strokeRect(0,ia+10,250,20),f.fillRect(0,ia+10,250*Math.min(p/m,1),20)}o||(u[r.SELECT_BOX]=!1)}};function Qy(t,e,r){var n=t.createShader(e);if(t.shaderSource(n,r),t.compileShader(n),!t.getShaderParameter(n,t.COMPILE_STATUS))throw new Error(t.getShaderInfoLog(n));return n}function f2(t,e,r){var n=Qy(t,t.VERTEX_SHADER,e),a=Qy(t,t.FRAGMENT_SHADER,r),i=t.createProgram();if(t.attachShader(i,n),t.attachShader(i,a),t.linkProgram(i),!t.getProgramParameter(i,t.LINK_STATUS))throw new Error("Could not initialize shaders");return i}function c2(t,e,r){r===void 0&&(r=e);var n=t.makeOffscreenCanvas(e,r),a=n.context=n.getContext("2d");return n.clear=function(){return a.clearRect(0,0,n.width,n.height)},n.clear(),n}function $v(t){var e=t.pixelRatio,r=t.cy.zoom(),n=t.cy.pan();return{zoom:r*e,pan:{x:n.x*e,y:n.y*e}}}function h2(t){var e=t.pixelRatio,r=t.cy.zoom();return r*e}function d2(t,e,r,n,a){var i=n*r+e.x,s=a*r+e.y;return s=Math.round(t.canvasHeight-s),[i,s]}function v2(t){return t.pstyle("background-fill").value!=="solid"||t.pstyle("background-image").strValue!=="none"?!1:t.pstyle("border-width").value===0||t.pstyle("border-opacity").value===0?!0:t.pstyle("border-style").value==="solid"}function g2(t,e){if(t.length!==e.length)return!1;for(var r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}function Wr(t,e,r){var n=t[0]/255,a=t[1]/255,i=t[2]/255,s=e,o=r||new Array(4);return o[0]=n*s,o[1]=a*s,o[2]=i*s,o[3]=s,o}function Sn(t,e){var r=e||new Array(4);return r[0]=(t>>0&255)/255,r[1]=(t>>8&255)/255,r[2]=(t>>16&255)/255,r[3]=(t>>24&255)/255,r}function p2(t){return t[0]+(t[1]<<8)+(t[2]<<16)+(t[3]<<24)}function y2(t,e){var r=t.createTexture();return r.buffer=function(n){t.bindTexture(t.TEXTURE_2D,r),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR_MIPMAP_NEAREST),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n),t.generateMipmap(t.TEXTURE_2D),t.bindTexture(t.TEXTURE_2D,null)},r.deleteTexture=function(){t.deleteTexture(r)},r}function UT(t,e){switch(e){case"float":return[1,t.FLOAT,4];case"vec2":return[2,t.FLOAT,4];case"vec3":return[3,t.FLOAT,4];case"vec4":return[4,t.FLOAT,4];case"int":return[1,t.INT,4];case"ivec2":return[2,t.INT,4]}}function HT(t,e,r){switch(e){case t.FLOAT:return new Float32Array(r);case t.INT:return new Int32Array(r)}}function m2(t,e,r,n,a,i){switch(e){case t.FLOAT:return new Float32Array(r.buffer,i*n,a);case t.INT:return new Int32Array(r.buffer,i*n,a)}}function b2(t,e,r,n){var a=UT(t,e),i=tt(a,2),s=i[0],o=i[1],u=HT(t,o,n),l=t.createBuffer();return t.bindBuffer(t.ARRAY_BUFFER,l),t.bufferData(t.ARRAY_BUFFER,u,t.STATIC_DRAW),o===t.FLOAT?t.vertexAttribPointer(r,s,o,!1,0,0):o===t.INT&&t.vertexAttribIPointer(r,s,o,0,0),t.enableVertexAttribArray(r),t.bindBuffer(t.ARRAY_BUFFER,null),l}function Zt(t,e,r,n){var a=UT(t,r),i=tt(a,3),s=i[0],o=i[1],u=i[2],l=HT(t,o,e*s),f=s*u,c=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,c),t.bufferData(t.ARRAY_BUFFER,e*f,t.DYNAMIC_DRAW),t.enableVertexAttribArray(n),o===t.FLOAT?t.vertexAttribPointer(n,s,o,!1,f,0):o===t.INT&&t.vertexAttribIPointer(n,s,o,f,0),t.vertexAttribDivisor(n,1),t.bindBuffer(t.ARRAY_BUFFER,null);for(var h=new Array(e),d=0;d<e;d++)h[d]=m2(t,o,l,f,s,d);return c.dataArray=l,c.stride=f,c.size=s,c.getView=function(v){return h[v]},c.setPoint=function(v,p,g){var y=h[v];y[0]=p,y[1]=g},c.bufferSubData=function(v){t.bindBuffer(t.ARRAY_BUFFER,c),v?t.bufferSubData(t.ARRAY_BUFFER,0,l,0,v*s):t.bufferSubData(t.ARRAY_BUFFER,0,l)},c}function w2(t,e,r){for(var n=9,a=new Float32Array(e*n),i=new Array(e),s=0;s<e;s++){var o=s*n*4;i[s]=new Float32Array(a.buffer,o,n)}var u=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,u),t.bufferData(t.ARRAY_BUFFER,a.byteLength,t.DYNAMIC_DRAW);for(var l=0;l<3;l++){var f=r+l;t.enableVertexAttribArray(f),t.vertexAttribPointer(f,3,t.FLOAT,!1,3*12,l*12),t.vertexAttribDivisor(f,1)}return t.bindBuffer(t.ARRAY_BUFFER,null),u.getMatrixView=function(c){return i[c]},u.setData=function(c,h){i[h].set(c,0)},u.bufferSubData=function(){t.bindBuffer(t.ARRAY_BUFFER,u),t.bufferSubData(t.ARRAY_BUFFER,0,a)},u}function E2(t){var e=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,e);var r=t.createTexture();return t.bindTexture(t.TEXTURE_2D,r),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,r,0),t.bindFramebuffer(t.FRAMEBUFFER,null),e.setFramebufferAttachmentSizes=function(n,a){t.bindTexture(t.TEXTURE_2D,r),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,n,a,0,t.RGBA,t.UNSIGNED_BYTE,null)},e}var Jy=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});function uu(){var t=new Jy(9);return Jy!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function em(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function x2(t,e,r){var n=e[0],a=e[1],i=e[2],s=e[3],o=e[4],u=e[5],l=e[6],f=e[7],c=e[8],h=r[0],d=r[1],v=r[2],p=r[3],g=r[4],y=r[5],m=r[6],b=r[7],E=r[8];return t[0]=h*n+d*s+v*l,t[1]=h*a+d*o+v*f,t[2]=h*i+d*u+v*c,t[3]=p*n+g*s+y*l,t[4]=p*a+g*o+y*f,t[5]=p*i+g*u+y*c,t[6]=m*n+b*s+E*l,t[7]=m*a+b*o+E*f,t[8]=m*i+b*u+E*c,t}function bi(t,e,r){var n=e[0],a=e[1],i=e[2],s=e[3],o=e[4],u=e[5],l=e[6],f=e[7],c=e[8],h=r[0],d=r[1];return t[0]=n,t[1]=a,t[2]=i,t[3]=s,t[4]=o,t[5]=u,t[6]=h*n+d*s+l,t[7]=h*a+d*o+f,t[8]=h*i+d*u+c,t}function tm(t,e,r){var n=e[0],a=e[1],i=e[2],s=e[3],o=e[4],u=e[5],l=e[6],f=e[7],c=e[8],h=Math.sin(r),d=Math.cos(r);return t[0]=d*n+h*s,t[1]=d*a+h*o,t[2]=d*i+h*u,t[3]=d*s-h*n,t[4]=d*o-h*a,t[5]=d*u-h*i,t[6]=l,t[7]=f,t[8]=c,t}function nv(t,e,r){var n=r[0],a=r[1];return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=a*e[3],t[4]=a*e[4],t[5]=a*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function T2(t,e,r){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/r,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}var C2=function(){function t(e,r,n,a){qr(this,t),this.debugID=Math.floor(Math.random()*1e4),this.r=e,this.texSize=r,this.texRows=n,this.texHeight=Math.floor(r/n),this.enableWrapping=!0,this.locked=!1,this.texture=null,this.needsBuffer=!0,this.freePointer={x:0,row:0},this.keyToLocation=new Map,this.canvas=a(e,r,r),this.scratch=a(e,r,this.texHeight,"scratch")}return Gr(t,[{key:"lock",value:function(){this.locked=!0}},{key:"getKeys",value:function(){return new Set(this.keyToLocation.keys())}},{key:"getScale",value:function(r){var n=r.w,a=r.h,i=this.texHeight,s=this.texSize,o=i/a,u=n*o,l=a*o;return u>s&&(o=s/n,u=n*o,l=a*o),{scale:o,texW:u,texH:l}}},{key:"draw",value:function(r,n,a){var i=this;if(this.locked)throw new Error("can't draw, atlas is locked");var s=this.texSize,o=this.texRows,u=this.texHeight,l=this.getScale(n),f=l.scale,c=l.texW,h=l.texH,d=function(b,E){if(a&&E){var x=E.context,S=b.x,w=b.row,T=S,C=u*w;x.save(),x.translate(T,C),x.scale(f,f),a(x,n),x.restore()}},v=[null,null],p=function(){d(i.freePointer,i.canvas),v[0]={x:i.freePointer.x,y:i.freePointer.row*u,w:c,h},v[1]={x:i.freePointer.x+c,y:i.freePointer.row*u,w:0,h},i.freePointer.x+=c,i.freePointer.x==s&&(i.freePointer.x=0,i.freePointer.row++)},g=function(){var b=i.scratch,E=i.canvas;b.clear(),d({x:0,row:0},b);var x=s-i.freePointer.x,S=c-x,w=u;{var T=i.freePointer.x,C=i.freePointer.row*u,A=x;E.context.drawImage(b,0,0,A,w,T,C,A,w),v[0]={x:T,y:C,w:A,h}}{var R=x,I=(i.freePointer.row+1)*u,D=S;E&&E.context.drawImage(b,R,0,D,w,0,I,D,w),v[1]={x:0,y:I,w:D,h}}i.freePointer.x=S,i.freePointer.row++},y=function(){i.freePointer.x=0,i.freePointer.row++};if(this.freePointer.x+c<=s)p();else{if(this.freePointer.row>=o-1)return!1;this.freePointer.x===s?(y(),p()):this.enableWrapping?g():(y(),p())}return this.keyToLocation.set(r,v),this.needsBuffer=!0,v}},{key:"getOffsets",value:function(r){return this.keyToLocation.get(r)}},{key:"isEmpty",value:function(){return this.freePointer.x===0&&this.freePointer.row===0}},{key:"canFit",value:function(r){if(this.locked)return!1;var n=this.texSize,a=this.texRows,i=this.getScale(r),s=i.texW;return this.freePointer.x+s>n?this.freePointer.row<a-1:!0}},{key:"bufferIfNeeded",value:function(r){this.texture||(this.texture=y2(r,this.debugID)),this.needsBuffer&&(this.texture.buffer(this.canvas),this.needsBuffer=!1,this.locked&&(this.canvas=null,this.scratch=null))}},{key:"dispose",value:function(){this.texture&&(this.texture.deleteTexture(),this.texture=null),this.canvas=null,this.scratch=null,this.locked=!0}}])}(),S2=function(){function t(e,r,n,a){qr(this,t),this.r=e,this.texSize=r,this.texRows=n,this.createTextureCanvas=a,this.atlases=[],this.styleKeyToAtlas=new Map,this.markedKeys=new Set}return Gr(t,[{key:"getKeys",value:function(){return new Set(this.styleKeyToAtlas.keys())}},{key:"_createAtlas",value:function(){var r=this.r,n=this.texSize,a=this.texRows,i=this.createTextureCanvas;return new C2(r,n,a,i)}},{key:"_getScratchCanvas",value:function(){if(!this.scratch){var r=this.r,n=this.texSize,a=this.texRows,i=this.createTextureCanvas,s=Math.floor(n/a);this.scratch=i(r,n,s,"scratch")}return this.scratch}},{key:"draw",value:function(r,n,a){var i=this.styleKeyToAtlas.get(r);return i||(i=this.atlases[this.atlases.length-1],(!i||!i.canFit(n))&&(i&&i.lock(),i=this._createAtlas(),this.atlases.push(i)),i.draw(r,n,a),this.styleKeyToAtlas.set(r,i)),i}},{key:"getAtlas",value:function(r){return this.styleKeyToAtlas.get(r)}},{key:"hasAtlas",value:function(r){return this.styleKeyToAtlas.has(r)}},{key:"markKeyForGC",value:function(r){this.markedKeys.add(r)}},{key:"gc",value:function(){var r=this,n=this.markedKeys;if(n.size===0){console.log("nothing to garbage collect");return}var a=[],i=new Map,s=null,o=Lt(this.atlases),u;try{var l=function(){var c=u.value,h=c.getKeys(),d=A2(n,h);if(d.size===0)return a.push(c),h.forEach(function(x){return i.set(x,c)}),1;s||(s=r._createAtlas(),a.push(s));var v=Lt(h),p;try{for(v.s();!(p=v.n()).done;){var g=p.value;if(!d.has(g)){var y=c.getOffsets(g),m=tt(y,2),b=m[0],E=m[1];s.canFit({w:b.w+E.w,h:b.h})||(s.lock(),s=r._createAtlas(),a.push(s)),c.canvas&&(r._copyTextureToNewAtlas(g,c,s),i.set(g,s))}}}catch(x){v.e(x)}finally{v.f()}c.dispose()};for(o.s();!(u=o.n()).done;)l()}catch(f){o.e(f)}finally{o.f()}this.atlases=a,this.styleKeyToAtlas=i,this.markedKeys=new Set}},{key:"_copyTextureToNewAtlas",value:function(r,n,a){var i=n.getOffsets(r),s=tt(i,2),o=s[0],u=s[1];if(u.w===0)a.draw(r,o,function(h){h.drawImage(n.canvas,o.x,o.y,o.w,o.h,0,0,o.w,o.h)});else{var l=this._getScratchCanvas();l.clear(),l.context.drawImage(n.canvas,o.x,o.y,o.w,o.h,0,0,o.w,o.h),l.context.drawImage(n.canvas,u.x,u.y,u.w,u.h,o.w,0,u.w,u.h);var f=o.w+u.w,c=o.h;a.draw(r,{w:f,h:c},function(h){h.drawImage(l,0,0,f,c,0,0,f,c)})}}},{key:"getCounts",value:function(){return{keyCount:this.styleKeyToAtlas.size,atlasCount:new Set(this.styleKeyToAtlas.values()).size}}}])}();function A2(t,e){return t.intersection?t.intersection(e):new Set(Ci(t).filter(function(r){return e.has(r)}))}var R2=function(){function t(e,r){qr(this,t),this.r=e,this.globalOptions=r,this.atlasSize=r.webglTexSize,this.maxAtlasesPerBatch=r.webglTexPerBatch,this.renderTypes=new Map,this.collections=new Map,this.typeAndIdToKey=new Map}return Gr(t,[{key:"getAtlasSize",value:function(){return this.atlasSize}},{key:"addAtlasCollection",value:function(r,n){var a=this.globalOptions,i=a.webglTexSize,s=a.createTextureCanvas,o=n.texRows,u=this._cacheScratchCanvas(s),l=new S2(this.r,i,o,u);this.collections.set(r,l)}},{key:"addRenderType",value:function(r,n){var a=n.collection;if(!this.collections.has(a))throw new Error("invalid atlas collection name '".concat(a,"'"));var i=this.collections.get(a),s=xe({type:r,atlasCollection:i},n);this.renderTypes.set(r,s)}},{key:"getRenderTypeOpts",value:function(r){return this.renderTypes.get(r)}},{key:"getAtlasCollection",value:function(r){return this.collections.get(r)}},{key:"_cacheScratchCanvas",value:function(r){var n=-1,a=-1,i=null;return function(s,o,u,l){return l?((!i||o!=n||u!=a)&&(n=o,a=u,i=r(s,o,u)),i):r(s,o,u)}}},{key:"_key",value:function(r,n){return"".concat(r,"-").concat(n)}},{key:"invalidate",value:function(r){var n=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=a.forceRedraw,s=i===void 0?!1:i,o=a.filterEle,u=o===void 0?function(){return!0}:o,l=a.filterType,f=l===void 0?function(){return!0}:l,c=!1,h=!1,d=Lt(r),v;try{for(d.s();!(v=d.n()).done;){var p=v.value;if(u(p)){var g=Lt(this.renderTypes.values()),y;try{var m=function(){var E=y.value,x=E.type;if(f(x)){var S=n.collections.get(E.collection),w=E.getKey(p),T=Array.isArray(w)?w:[w];if(s)T.forEach(function(I){return S.markKeyForGC(I)}),h=!0;else{var C=E.getID?E.getID(p):p.id(),A=n._key(x,C),R=n.typeAndIdToKey.get(A);R!==void 0&&!g2(T,R)&&(c=!0,n.typeAndIdToKey.delete(A),R.forEach(function(I){return S.markKeyForGC(I)}))}}};for(g.s();!(y=g.n()).done;)m()}catch(b){g.e(b)}finally{g.f()}}}}catch(b){d.e(b)}finally{d.f()}return h&&(this.gc(),c=!1),c}},{key:"gc",value:function(){var r=Lt(this.collections.values()),n;try{for(r.s();!(n=r.n()).done;){var a=n.value;a.gc()}}catch(i){r.e(i)}finally{r.f()}}},{key:"getOrCreateAtlas",value:function(r,n,a,i){var s=this.renderTypes.get(n),o=this.collections.get(s.collection),u=!1,l=o.draw(i,a,function(h){s.drawClipped?(h.save(),h.beginPath(),h.rect(0,0,a.w,a.h),h.clip(),s.drawElement(h,r,a,!0,!0),h.restore()):s.drawElement(h,r,a,!0,!0),u=!0});if(u){var f=s.getID?s.getID(r):r.id(),c=this._key(n,f);this.typeAndIdToKey.has(c)?this.typeAndIdToKey.get(c).push(i):this.typeAndIdToKey.set(c,[i])}return l}},{key:"getAtlasInfo",value:function(r,n){var a=this,i=this.renderTypes.get(n),s=i.getKey(r),o=Array.isArray(s)?s:[s];return o.map(function(u){var l=i.getBoundingBox(r,u),f=a.getOrCreateAtlas(r,n,l,u),c=f.getOffsets(u),h=tt(c,2),d=h[0],v=h[1];return{atlas:f,tex:d,tex1:d,tex2:v,bb:l}})}},{key:"getDebugInfo",value:function(){var r=[],n=Lt(this.collections),a;try{for(n.s();!(a=n.n()).done;){var i=tt(a.value,2),s=i[0],o=i[1],u=o.getCounts(),l=u.keyCount,f=u.atlasCount;r.push({type:s,keyCount:l,atlasCount:f})}}catch(c){n.e(c)}finally{n.f()}return r}}])}(),I2=function(){function t(e){qr(this,t),this.globalOptions=e,this.atlasSize=e.webglTexSize,this.maxAtlasesPerBatch=e.webglTexPerBatch,this.batchAtlases=[]}return Gr(t,[{key:"getMaxAtlasesPerBatch",value:function(){return this.maxAtlasesPerBatch}},{key:"getAtlasSize",value:function(){return this.atlasSize}},{key:"getIndexArray",value:function(){return Array.from({length:this.maxAtlasesPerBatch},function(r,n){return n})}},{key:"startBatch",value:function(){this.batchAtlases=[]}},{key:"getAtlasCount",value:function(){return this.batchAtlases.length}},{key:"getAtlases",value:function(){return this.batchAtlases}},{key:"canAddToCurrentBatch",value:function(r){return this.batchAtlases.length===this.maxAtlasesPerBatch?this.batchAtlases.includes(r):!0}},{key:"getAtlasIndexForBatch",value:function(r){var n=this.batchAtlases.indexOf(r);if(n<0){if(this.batchAtlases.length===this.maxAtlasesPerBatch)throw new Error("cannot add more atlases to batch");this.batchAtlases.push(r),n=this.batchAtlases.length-1}return n}}])}(),D2=`
  float circleSD(vec2 p, float r) {
    return distance(vec2(0), p) - r; // signed distance
  }
`,_2=`
  float rectangleSD(vec2 p, vec2 b) {
    vec2 d = abs(p)-b;
    return distance(vec2(0),max(d,0.0)) + min(max(d.x,d.y),0.0);
  }
`,L2=`
  float roundRectangleSD(vec2 p, vec2 b, vec4 cr) {
    cr.xy = (p.x > 0.0) ? cr.xy : cr.zw;
    cr.x  = (p.y > 0.0) ? cr.x  : cr.y;
    vec2 q = abs(p) - b + cr.x;
    return min(max(q.x, q.y), 0.0) + distance(vec2(0), max(q, 0.0)) - cr.x;
  }
`,M2=`
  float ellipseSD(vec2 p, vec2 ab) {
    p = abs( p ); // symmetry

    // find root with Newton solver
    vec2 q = ab*(p-ab);
    float w = (q.x<q.y)? 1.570796327 : 0.0;
    for( int i=0; i<5; i++ ) {
      vec2 cs = vec2(cos(w),sin(w));
      vec2 u = ab*vec2( cs.x,cs.y);
      vec2 v = ab*vec2(-cs.y,cs.x);
      w = w + dot(p-u,v)/(dot(p-u,u)+dot(v,v));
    }
    
    // compute final point and distance
    float d = length(p-ab*vec2(cos(w),sin(w)));
    
    // return signed distance
    return (dot(p/ab,p/ab)>1.0) ? d : -d;
  }
`,ya={SCREEN:{name:"screen",screen:!0},PICKING:{name:"picking",picking:!0}},Ni={IGNORE:1,USE_BB:2},lu=0,rm=1,nm=2,fu=3,An=4,ui=5,sa=6,oa=7,O2=function(){function t(e,r,n){qr(this,t),this.r=e,this.gl=r,this.maxInstances=n.webglBatchSize,this.atlasSize=n.webglTexSize,this.bgColor=n.bgColor,this.debug=n.webglDebug,this.batchDebugInfo=[],n.enableWrapping=!0,n.createTextureCanvas=c2,this.atlasManager=new R2(e,n),this.batchManager=new I2(n),this.simpleShapeOptions=new Map,this.program=this._createShaderProgram(ya.SCREEN),this.pickingProgram=this._createShaderProgram(ya.PICKING),this.vao=this._createVAO()}return Gr(t,[{key:"addAtlasCollection",value:function(r,n){this.atlasManager.addAtlasCollection(r,n)}},{key:"addTextureAtlasRenderType",value:function(r,n){this.atlasManager.addRenderType(r,n)}},{key:"addSimpleShapeRenderType",value:function(r,n){this.simpleShapeOptions.set(r,n)}},{key:"invalidate",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=n.type,i=this.atlasManager;return a?i.invalidate(r,{filterType:function(o){return o===a},forceRedraw:!0}):i.invalidate(r)}},{key:"gc",value:function(){this.atlasManager.gc()}},{key:"_createShaderProgram",value:function(r){var n=this.gl,a=`#version 300 es
      precision highp float;

      uniform mat3 uPanZoomMatrix;
      uniform int  uAtlasSize;
      
      // instanced
      in vec2 aPosition; // a vertex from the unit square
      
      in mat3 aTransform; // used to transform verticies, eg into a bounding box
      in int aVertType; // the type of thing we are rendering

      // the z-index that is output when using picking mode
      in vec4 aIndex;
      
      // For textures
      in int aAtlasId; // which shader unit/atlas to use
      in vec4 aTex; // x/y/w/h of texture in atlas

      // for edges
      in vec4 aPointAPointB;
      in vec4 aPointCPointD;
      in vec2 aLineWidth; // also used for node border width

      // simple shapes
      in vec4 aCornerRadius; // for round-rectangle [top-right, bottom-right, top-left, bottom-left]
      in vec4 aColor; // also used for edges
      in vec4 aBorderColor; // aLineWidth is used for border width

      // output values passed to the fragment shader
      out vec2 vTexCoord;
      out vec4 vColor;
      out vec2 vPosition;
      // flat values are not interpolated
      flat out int vAtlasId; 
      flat out int vVertType;
      flat out vec2 vTopRight;
      flat out vec2 vBotLeft;
      flat out vec4 vCornerRadius;
      flat out vec4 vBorderColor;
      flat out vec2 vBorderWidth;
      flat out vec4 vIndex;
      
      void main(void) {
        int vid = gl_VertexID;
        vec2 position = aPosition; // TODO make this a vec3, simplifies some code below

        if(aVertType == `.concat(lu,`) {
          float texX = aTex.x; // texture coordinates
          float texY = aTex.y;
          float texW = aTex.z;
          float texH = aTex.w;

          if(vid == 1 || vid == 2 || vid == 4) {
            texX += texW;
          }
          if(vid == 2 || vid == 4 || vid == 5) {
            texY += texH;
          }

          float d = float(uAtlasSize);
          vTexCoord = vec2(texX / d, texY / d); // tex coords must be between 0 and 1

          gl_Position = vec4(uPanZoomMatrix * aTransform * vec3(position, 1.0), 1.0);
        }
        else if(aVertType == `).concat(An," || aVertType == ").concat(oa,` 
             || aVertType == `).concat(ui," || aVertType == ").concat(sa,`) { // simple shapes

          // the bounding box is needed by the fragment shader
          vBotLeft  = (aTransform * vec3(0, 0, 1)).xy; // flat
          vTopRight = (aTransform * vec3(1, 1, 1)).xy; // flat
          vPosition = (aTransform * vec3(position, 1)).xy; // will be interpolated

          // calculations are done in the fragment shader, just pass these along
          vColor = aColor;
          vCornerRadius = aCornerRadius;
          vBorderColor = aBorderColor;
          vBorderWidth = aLineWidth;

          gl_Position = vec4(uPanZoomMatrix * aTransform * vec3(position, 1.0), 1.0);
        }
        else if(aVertType == `).concat(rm,`) {
          vec2 source = aPointAPointB.xy;
          vec2 target = aPointAPointB.zw;

          // adjust the geometry so that the line is centered on the edge
          position.y = position.y - 0.5;

          // stretch the unit square into a long skinny rectangle
          vec2 xBasis = target - source;
          vec2 yBasis = normalize(vec2(-xBasis.y, xBasis.x));
          vec2 point = source + xBasis * position.x + yBasis * aLineWidth[0] * position.y;

          gl_Position = vec4(uPanZoomMatrix * vec3(point, 1.0), 1.0);
          vColor = aColor;
        } 
        else if(aVertType == `).concat(nm,`) {
          vec2 pointA = aPointAPointB.xy;
          vec2 pointB = aPointAPointB.zw;
          vec2 pointC = aPointCPointD.xy;
          vec2 pointD = aPointCPointD.zw;

          // adjust the geometry so that the line is centered on the edge
          position.y = position.y - 0.5;

          vec2 p0, p1, p2, pos;
          if(position.x == 0.0) { // The left side of the unit square
            p0 = pointA;
            p1 = pointB;
            p2 = pointC;
            pos = position;
          } else { // The right side of the unit square, use same approach but flip the geometry upside down
            p0 = pointD;
            p1 = pointC;
            p2 = pointB;
            pos = vec2(0.0, -position.y);
          }

          vec2 p01 = p1 - p0;
          vec2 p12 = p2 - p1;
          vec2 p21 = p1 - p2;

          // Find the normal vector.
          vec2 tangent = normalize(normalize(p12) + normalize(p01));
          vec2 normal = vec2(-tangent.y, tangent.x);

          // Find the vector perpendicular to p0 -> p1.
          vec2 p01Norm = normalize(vec2(-p01.y, p01.x));

          // Determine the bend direction.
          float sigma = sign(dot(p01 + p21, normal));
          float width = aLineWidth[0];

          if(sign(pos.y) == -sigma) {
            // This is an intersecting vertex. Adjust the position so that there's no overlap.
            vec2 point = 0.5 * width * normal * -sigma / dot(normal, p01Norm);
            gl_Position = vec4(uPanZoomMatrix * vec3(p1 + point, 1.0), 1.0);
          } else {
            // This is a non-intersecting vertex. Treat it like a mitre join.
            vec2 point = 0.5 * width * normal * sigma * dot(normal, p01Norm);
            gl_Position = vec4(uPanZoomMatrix * vec3(p1 + point, 1.0), 1.0);
          }

          vColor = aColor;
        } 
        else if(aVertType == `).concat(fu,` && vid < 3) {
          // massage the first triangle into an edge arrow
          if(vid == 0)
            position = vec2(-0.15, -0.3);
          if(vid == 1)
            position = vec2(  0.0,  0.0);
          if(vid == 2)
            position = vec2( 0.15, -0.3);

          gl_Position = vec4(uPanZoomMatrix * aTransform * vec3(position, 1.0), 1.0);
          vColor = aColor;
        }
        else {
          gl_Position = vec4(2.0, 0.0, 0.0, 1.0); // discard vertex by putting it outside webgl clip space
        }

        vAtlasId = aAtlasId;
        vVertType = aVertType;
        vIndex = aIndex;
      }
    `),i=this.batchManager.getIndexArray(),s=`#version 300 es
      precision highp float;

      // declare texture unit for each texture atlas in the batch
      `.concat(i.map(function(l){return"uniform sampler2D uTexture".concat(l,";")}).join(`
	`),`

      uniform vec4 uBGColor;
      uniform float uZoom;

      in vec2 vTexCoord;
      in vec4 vColor;
      in vec2 vPosition; // model coordinates

      flat in int vAtlasId;
      flat in vec4 vIndex;
      flat in int vVertType;
      flat in vec2 vTopRight;
      flat in vec2 vBotLeft;
      flat in vec4 vCornerRadius;
      flat in vec4 vBorderColor;
      flat in vec2 vBorderWidth;

      out vec4 outColor;

      `).concat(D2,`
      `).concat(_2,`
      `).concat(L2,`
      `).concat(M2,`

      vec4 blend(vec4 top, vec4 bot) { // blend colors with premultiplied alpha
        return vec4( 
          top.rgb + (bot.rgb * (1.0 - top.a)),
          top.a   + (bot.a   * (1.0 - top.a)) 
        );
      }

      vec4 distInterp(vec4 cA, vec4 cB, float d) { // interpolate color using Signed Distance
        // scale to the zoom level so that borders don't look blurry when zoomed in
        // note 1.5 is an aribitrary value chosen because it looks good
        return mix(cA, cB, 1.0 - smoothstep(0.0, 1.5 / uZoom, abs(d))); 
      }

      void main(void) {
        if(vVertType == `).concat(lu,`) {
          // look up the texel from the texture unit
          `).concat(i.map(function(l){return"if(vAtlasId == ".concat(l,") outColor = texture(uTexture").concat(l,", vTexCoord);")}).join(`
	else `),`
        } 
        else if(vVertType == `).concat(fu,`) {
          // mimics how canvas renderer uses context.globalCompositeOperation = 'destination-out';
          outColor = blend(vColor, uBGColor);
          outColor.a = 1.0; // make opaque, masks out line under arrow
        }
        else if(vVertType == `).concat(An,` && vBorderWidth == vec2(0.0)) { // simple rectangle with no border
          outColor = vColor; // unit square is already transformed to the rectangle, nothing else needs to be done
        }
        else if(vVertType == `).concat(An," || vVertType == ").concat(oa,` 
          || vVertType == `).concat(ui," || vVertType == ").concat(sa,`) { // use SDF

          float outerBorder = vBorderWidth[0];
          float innerBorder = vBorderWidth[1];
          float borderPadding = outerBorder * 2.0;
          float w = vTopRight.x - vBotLeft.x - borderPadding;
          float h = vTopRight.y - vBotLeft.y - borderPadding;
          vec2 b = vec2(w/2.0, h/2.0); // half width, half height
          vec2 p = vPosition - vec2(vTopRight.x - b[0] - outerBorder, vTopRight.y - b[1] - outerBorder); // translate to center

          float d; // signed distance
          if(vVertType == `).concat(An,`) {
            d = rectangleSD(p, b);
          } else if(vVertType == `).concat(oa,` && w == h) {
            d = circleSD(p, b.x); // faster than ellipse
          } else if(vVertType == `).concat(oa,`) {
            d = ellipseSD(p, b);
          } else {
            d = roundRectangleSD(p, b, vCornerRadius.wzyx);
          }

          // use the distance to interpolate a color to smooth the edges of the shape, doesn't need multisampling
          // we must smooth colors inwards, because we can't change pixels outside the shape's bounding box
          if(d > 0.0) {
            if(d > outerBorder) {
              discard;
            } else {
              outColor = distInterp(vBorderColor, vec4(0), d - outerBorder);
            }
          } else {
            if(d > innerBorder) {
              vec4 outerColor = outerBorder == 0.0 ? vec4(0) : vBorderColor;
              vec4 innerBorderColor = blend(vBorderColor, vColor);
              outColor = distInterp(innerBorderColor, outerColor, d);
            } 
            else {
              vec4 outerColor;
              if(innerBorder == 0.0 && outerBorder == 0.0) {
                outerColor = vec4(0);
              } else if(innerBorder == 0.0) {
                outerColor = vBorderColor;
              } else {
                outerColor = blend(vBorderColor, vColor);
              }
              outColor = distInterp(vColor, outerColor, d - innerBorder);
            }
          }
        }
        else {
          outColor = vColor;
        }

        `).concat(r.picking?`if(outColor.a == 0.0) discard;
             else outColor = vIndex;`:"",`
      }
    `),o=f2(n,a,s);o.aPosition=n.getAttribLocation(o,"aPosition"),o.aIndex=n.getAttribLocation(o,"aIndex"),o.aVertType=n.getAttribLocation(o,"aVertType"),o.aTransform=n.getAttribLocation(o,"aTransform"),o.aAtlasId=n.getAttribLocation(o,"aAtlasId"),o.aTex=n.getAttribLocation(o,"aTex"),o.aPointAPointB=n.getAttribLocation(o,"aPointAPointB"),o.aPointCPointD=n.getAttribLocation(o,"aPointCPointD"),o.aLineWidth=n.getAttribLocation(o,"aLineWidth"),o.aColor=n.getAttribLocation(o,"aColor"),o.aCornerRadius=n.getAttribLocation(o,"aCornerRadius"),o.aBorderColor=n.getAttribLocation(o,"aBorderColor"),o.uPanZoomMatrix=n.getUniformLocation(o,"uPanZoomMatrix"),o.uAtlasSize=n.getUniformLocation(o,"uAtlasSize"),o.uBGColor=n.getUniformLocation(o,"uBGColor"),o.uZoom=n.getUniformLocation(o,"uZoom"),o.uTextures=[];for(var u=0;u<this.batchManager.getMaxAtlasesPerBatch();u++)o.uTextures.push(n.getUniformLocation(o,"uTexture".concat(u)));return o}},{key:"_createVAO",value:function(){var r=[0,0,1,0,1,1,0,0,1,1,0,1];this.vertexCount=r.length/2;var n=this.maxInstances,a=this.gl,i=this.program,s=a.createVertexArray();return a.bindVertexArray(s),b2(a,"vec2",i.aPosition,r),this.transformBuffer=w2(a,n,i.aTransform),this.indexBuffer=Zt(a,n,"vec4",i.aIndex),this.vertTypeBuffer=Zt(a,n,"int",i.aVertType),this.atlasIdBuffer=Zt(a,n,"int",i.aAtlasId),this.texBuffer=Zt(a,n,"vec4",i.aTex),this.pointAPointBBuffer=Zt(a,n,"vec4",i.aPointAPointB),this.pointCPointDBuffer=Zt(a,n,"vec4",i.aPointCPointD),this.lineWidthBuffer=Zt(a,n,"vec2",i.aLineWidth),this.colorBuffer=Zt(a,n,"vec4",i.aColor),this.cornerRadiusBuffer=Zt(a,n,"vec4",i.aCornerRadius),this.borderColorBuffer=Zt(a,n,"vec4",i.aBorderColor),a.bindVertexArray(null),s}},{key:"buffers",get:function(){var r=this;return this._buffers||(this._buffers=Object.keys(this).filter(function(n){return xr(n,"Buffer")}).map(function(n){return r[n]})),this._buffers}},{key:"startFrame",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ya.SCREEN;this.panZoomMatrix=r,this.renderTarget=n,this.batchDebugInfo=[],this.wrappedCount=0,this.simpleCount=0,this.startBatch()}},{key:"startBatch",value:function(){this.instanceCount=0,this.batchManager.startBatch()}},{key:"endFrame",value:function(){this.endBatch()}},{key:"_isVisible",value:function(r,n){return r.visible()?n&&n.isVisible?n.isVisible(r):!0:!1}},{key:"drawTexture",value:function(r,n,a){var i=this.atlasManager,s=this.batchManager,o=i.getRenderTypeOpts(a);if(this._isVisible(r,o)&&!(r.isEdge()&&!this._isValidEdge(r))){if(this.renderTarget.picking&&o.getTexPickingMode){var u=o.getTexPickingMode(r);if(u===Ni.IGNORE)return;if(u==Ni.USE_BB){this.drawPickingRectangle(r,n,a);return}}var l=i.getAtlasInfo(r,a),f=Lt(l),c;try{for(f.s();!(c=f.n()).done;){var h=c.value,d=h.atlas,v=h.tex1,p=h.tex2;s.canAddToCurrentBatch(d)||this.endBatch();for(var g=s.getAtlasIndexForBatch(d),y=0,m=[[v,!0],[p,!1]];y<m.length;y++){var b=tt(m[y],2),E=b[0],x=b[1];if(E.w!=0){var S=this.instanceCount;this.vertTypeBuffer.getView(S)[0]=lu;var w=this.indexBuffer.getView(S);Sn(n,w);var T=this.atlasIdBuffer.getView(S);T[0]=g;var C=this.texBuffer.getView(S);C[0]=E.x,C[1]=E.y,C[2]=E.w,C[3]=E.h;var A=this.transformBuffer.getMatrixView(S);this.setTransformMatrix(r,A,o,h,x),this.instanceCount++,x||this.wrappedCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}}}catch(R){f.e(R)}finally{f.f()}}}},{key:"setTransformMatrix",value:function(r,n,a,i){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,o=0;if(a.shapeProps&&a.shapeProps.padding&&(o=r.pstyle(a.shapeProps.padding).pfValue),i){var u=i.bb,l=i.tex1,f=i.tex2,c=l.w/(l.w+f.w);s||(c=1-c);var h=this._getAdjustedBB(u,o,s,c);this._applyTransformMatrix(n,h,a,r)}else{var d=a.getBoundingBox(r),v=this._getAdjustedBB(d,o,!0,1);this._applyTransformMatrix(n,v,a,r)}}},{key:"_applyTransformMatrix",value:function(r,n,a,i){var s,o;em(r);var u=a.getRotation?a.getRotation(i):0;if(u!==0){var l=a.getRotationPoint(i),f=l.x,c=l.y;bi(r,r,[f,c]),tm(r,r,u);var h=a.getRotationOffset(i);s=h.x+(n.xOffset||0),o=h.y+(n.yOffset||0)}else s=n.x1,o=n.y1;bi(r,r,[s,o]),nv(r,r,[n.w,n.h])}},{key:"_getAdjustedBB",value:function(r,n,a,i){var s=r.x1,o=r.y1,u=r.w,l=r.h,f=r.yOffset;n&&(s-=n,o-=n,u+=2*n,l+=2*n);var c=0,h=u*i;return a&&i<1?u=h:!a&&i<1&&(c=u-h,s+=c,u=h),{x1:s,y1:o,w:u,h:l,xOffset:c,yOffset:f}}},{key:"drawPickingRectangle",value:function(r,n,a){var i=this.atlasManager.getRenderTypeOpts(a),s=this.instanceCount;this.vertTypeBuffer.getView(s)[0]=An;var o=this.indexBuffer.getView(s);Sn(n,o);var u=this.colorBuffer.getView(s);Wr([0,0,0],1,u);var l=this.transformBuffer.getMatrixView(s);this.setTransformMatrix(r,l,i),this.simpleCount++,this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}},{key:"drawNode",value:function(r,n,a){var i=this.simpleShapeOptions.get(a);if(this._isVisible(r,i)){var s=i.shapeProps,o=this._getVertTypeForShape(r,s.shape);if(o===void 0||i.isSimple&&!i.isSimple(r)){this.drawTexture(r,n,a);return}var u=this.instanceCount;if(this.vertTypeBuffer.getView(u)[0]=o,o===ui||o===sa){var l=i.getBoundingBox(r),f=this._getCornerRadius(r,s.radius,l),c=this.cornerRadiusBuffer.getView(u);c[0]=f,c[1]=f,c[2]=f,c[3]=f,o===sa&&(c[0]=0,c[2]=0)}var h=this.indexBuffer.getView(u);Sn(n,h);var d=r.pstyle(s.color).value,v=r.pstyle(s.opacity).value,p=this.colorBuffer.getView(u);Wr(d,v,p);var g=this.lineWidthBuffer.getView(u);if(g[0]=0,g[1]=0,s.border){var y=r.pstyle("border-width").value;if(y>0){var m=r.pstyle("border-color").value,b=r.pstyle("border-opacity").value,E=this.borderColorBuffer.getView(u);Wr(m,b,E);var x=r.pstyle("border-position").value;if(x==="inside")g[0]=0,g[1]=-y;else if(x==="outside")g[0]=y,g[1]=0;else{var S=y/2;g[0]=S,g[1]=-S}}}var w=this.transformBuffer.getMatrixView(u);this.setTransformMatrix(r,w,i),this.simpleCount++,this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}},{key:"_getVertTypeForShape",value:function(r,n){var a=r.pstyle(n).value;switch(a){case"rectangle":return An;case"ellipse":return oa;case"roundrectangle":case"round-rectangle":return ui;case"bottom-round-rectangle":return sa;default:return}}},{key:"_getCornerRadius",value:function(r,n,a){var i=a.w,s=a.h;if(r.pstyle(n).value==="auto")return kr(i,s);var o=r.pstyle(n).pfValue,u=i/2,l=s/2;return Math.min(o,l,u)}},{key:"drawEdgeArrow",value:function(r,n,a){if(r.visible()){var i=r._private.rscratch,s,o,u;if(a==="source"?(s=i.arrowStartX,o=i.arrowStartY,u=i.srcArrowAngle):(s=i.arrowEndX,o=i.arrowEndY,u=i.tgtArrowAngle),!(isNaN(s)||s==null||isNaN(o)||o==null||isNaN(u)||u==null)){var l=r.pstyle(a+"-arrow-shape").value;if(l!=="none"){var f=r.pstyle(a+"-arrow-color").value,c=r.pstyle("opacity").value,h=r.pstyle("line-opacity").value,d=c*h,v=r.pstyle("width").pfValue,p=r.pstyle("arrow-scale").value,g=this.r.getArrowWidth(v,p),y=this.instanceCount,m=this.transformBuffer.getMatrixView(y);em(m),bi(m,m,[s,o]),nv(m,m,[g,g]),tm(m,m,u),this.vertTypeBuffer.getView(y)[0]=fu;var b=this.indexBuffer.getView(y);Sn(n,b);var E=this.colorBuffer.getView(y);Wr(f,d,E),this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}}}},{key:"drawEdgeLine",value:function(r,n){if(r.visible()){var a=this._getEdgePoints(r);if(a){var i=r.pstyle("opacity").value,s=r.pstyle("line-opacity").value,o=r.pstyle("width").pfValue,u=r.pstyle("line-color").value,l=i*s;if(a.length/2+this.instanceCount>this.maxInstances&&this.endBatch(),a.length==4){var f=this.instanceCount;this.vertTypeBuffer.getView(f)[0]=rm;var c=this.indexBuffer.getView(f);Sn(n,c);var h=this.colorBuffer.getView(f);Wr(u,l,h);var d=this.lineWidthBuffer.getView(f);d[0]=o;var v=this.pointAPointBBuffer.getView(f);v[0]=a[0],v[1]=a[1],v[2]=a[2],v[3]=a[3],this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}else for(var p=0;p<a.length-2;p+=2){var g=this.instanceCount;this.vertTypeBuffer.getView(g)[0]=nm;var y=this.indexBuffer.getView(g);Sn(n,y);var m=this.colorBuffer.getView(g);Wr(u,l,m);var b=this.lineWidthBuffer.getView(g);b[0]=o;var E=a[p-2],x=a[p-1],S=a[p],w=a[p+1],T=a[p+2],C=a[p+3],A=a[p+4],R=a[p+5];p==0&&(E=2*S-T+.001,x=2*w-C+.001),p==a.length-4&&(A=2*T-S+.001,R=2*C-w+.001);var I=this.pointAPointBBuffer.getView(g);I[0]=E,I[1]=x,I[2]=S,I[3]=w;var D=this.pointCPointDBuffer.getView(g);D[0]=T,D[1]=C,D[2]=A,D[3]=R,this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}}}},{key:"_isValidEdge",value:function(r){var n=r._private.rscratch;return!(n.badLine||n.allpts==null||isNaN(n.allpts[0]))}},{key:"_getEdgePoints",value:function(r){var n=r._private.rscratch;if(this._isValidEdge(r)){var a=n.allpts;if(a.length==4)return a;var i=this._getNumSegments(r);return this._getCurveSegmentPoints(a,i)}}},{key:"_getNumSegments",value:function(r){var n=15;return Math.min(Math.max(n,5),this.maxInstances)}},{key:"_getCurveSegmentPoints",value:function(r,n){if(r.length==4)return r;for(var a=Array((n+1)*2),i=0;i<=n;i++)if(i==0)a[0]=r[0],a[1]=r[1];else if(i==n)a[i*2]=r[r.length-2],a[i*2+1]=r[r.length-1];else{var s=i/n;this._setCurvePoint(r,s,a,i*2)}return a}},{key:"_setCurvePoint",value:function(r,n,a,i){if(r.length<=2)a[i]=r[0],a[i+1]=r[1];else{for(var s=Array(r.length-2),o=0;o<s.length;o+=2){var u=(1-n)*r[o]+n*r[o+2],l=(1-n)*r[o+1]+n*r[o+3];s[o]=u,s[o+1]=l}return this._setCurvePoint(s,n,a,i)}}},{key:"endBatch",value:function(){var r=this.gl,n=this.vao,a=this.vertexCount,i=this.instanceCount;if(i!==0){var s=this.renderTarget.picking?this.pickingProgram:this.program;r.useProgram(s),r.bindVertexArray(n);var o=Lt(this.buffers),u;try{for(o.s();!(u=o.n()).done;){var l=u.value;l.bufferSubData(i)}}catch(v){o.e(v)}finally{o.f()}for(var f=this.batchManager.getAtlases(),c=0;c<f.length;c++)f[c].bufferIfNeeded(r);for(var h=0;h<f.length;h++)r.activeTexture(r.TEXTURE0+h),r.bindTexture(r.TEXTURE_2D,f[h].texture),r.uniform1i(s.uTextures[h],h);r.uniform1f(s.uZoom,h2(this.r)),r.uniformMatrix3fv(s.uPanZoomMatrix,!1,this.panZoomMatrix),r.uniform1i(s.uAtlasSize,this.batchManager.getAtlasSize());var d=Wr(this.bgColor,1);r.uniform4fv(s.uBGColor,d),r.drawArraysInstanced(r.TRIANGLES,0,a,i),r.bindVertexArray(null),r.bindTexture(r.TEXTURE_2D,null),this.debug&&this.batchDebugInfo.push({count:i,atlasCount:f.length}),this.startBatch()}}},{key:"getDebugInfo",value:function(){var r=this.atlasManager.getDebugInfo(),n=r.reduce(function(s,o){return s+o.atlasCount},0),a=this.batchDebugInfo,i=a.reduce(function(s,o){return s+o.count},0);return{atlasInfo:r,totalAtlases:n,wrappedCount:this.wrappedCount,simpleCount:this.simpleCount,batchCount:a.length,batchInfo:a,totalInstances:i}}}])}(),YT={};YT.initWebgl=function(t,e){var r=this,n=r.data.contexts[r.WEBGL];t.bgColor=P2(r),t.webglTexSize=Math.min(t.webglTexSize,n.getParameter(n.MAX_TEXTURE_SIZE)),t.webglTexRows=Math.min(t.webglTexRows,54),t.webglTexRowsNodes=Math.min(t.webglTexRowsNodes,54),t.webglBatchSize=Math.min(t.webglBatchSize,16384),t.webglTexPerBatch=Math.min(t.webglTexPerBatch,n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS)),r.webglDebug=t.webglDebug,r.webglDebugShowAtlases=t.webglDebugShowAtlases,r.pickingFrameBuffer=E2(n),r.pickingFrameBuffer.needsDraw=!0,r.drawing=new O2(r,n,t);var a=function(c){return function(h){return r.getTextAngle(h,c)}},i=function(c){return function(h){var d=h.pstyle(c);return d&&d.value}},s=function(c){return function(h){return h.pstyle("".concat(c,"-opacity")).value>0}},o=function(c){var h=c.pstyle("text-events").strValue==="yes";return h?Ni.USE_BB:Ni.IGNORE},u=function(c){var h=c.position(),d=h.x,v=h.y,p=c.outerWidth(),g=c.outerHeight();return{w:p,h:g,x1:d-p/2,y1:v-g/2}};r.drawing.addAtlasCollection("node",{texRows:t.webglTexRowsNodes}),r.drawing.addAtlasCollection("label",{texRows:t.webglTexRows}),r.drawing.addTextureAtlasRenderType("node-body",{collection:"node",getKey:e.getStyleKey,getBoundingBox:e.getElementBox,drawElement:e.drawElement}),r.drawing.addSimpleShapeRenderType("node-body",{getBoundingBox:u,isSimple:v2,shapeProps:{shape:"shape",color:"background-color",opacity:"background-opacity",radius:"corner-radius",border:!0}}),r.drawing.addSimpleShapeRenderType("node-overlay",{getBoundingBox:u,isVisible:s("overlay"),shapeProps:{shape:"overlay-shape",color:"overlay-color",opacity:"overlay-opacity",padding:"overlay-padding",radius:"overlay-corner-radius"}}),r.drawing.addSimpleShapeRenderType("node-underlay",{getBoundingBox:u,isVisible:s("underlay"),shapeProps:{shape:"underlay-shape",color:"underlay-color",opacity:"underlay-opacity",padding:"underlay-padding",radius:"underlay-corner-radius"}}),r.drawing.addTextureAtlasRenderType("label",{collection:"label",getTexPickingMode:o,getKey:cu(e.getLabelKey,null),getBoundingBox:hu(e.getLabelBox,null),drawClipped:!0,drawElement:e.drawLabel,getRotation:a(null),getRotationPoint:e.getLabelRotationPoint,getRotationOffset:e.getLabelRotationOffset,isVisible:i("label")}),r.drawing.addTextureAtlasRenderType("edge-source-label",{collection:"label",getTexPickingMode:o,getKey:cu(e.getSourceLabelKey,"source"),getBoundingBox:hu(e.getSourceLabelBox,"source"),drawClipped:!0,drawElement:e.drawSourceLabel,getRotation:a("source"),getRotationPoint:e.getSourceLabelRotationPoint,getRotationOffset:e.getSourceLabelRotationOffset,isVisible:i("source-label")}),r.drawing.addTextureAtlasRenderType("edge-target-label",{collection:"label",getTexPickingMode:o,getKey:cu(e.getTargetLabelKey,"target"),getBoundingBox:hu(e.getTargetLabelBox,"target"),drawClipped:!0,drawElement:e.drawTargetLabel,getRotation:a("target"),getRotationPoint:e.getTargetLabelRotationPoint,getRotationOffset:e.getTargetLabelRotationOffset,isVisible:i("target-label")});var l=Na(function(){console.log("garbage collect flag set"),r.data.gc=!0},1e4);r.onUpdateEleCalcs(function(f,c){var h=!1;c&&c.length>0&&(h|=r.drawing.invalidate(c)),h&&l()}),k2(r)};function P2(t){var e=t.cy.container(),r=e&&e.style&&e.style.backgroundColor||"white";return wx(r)}function WT(t,e){var r=t._private.rscratch;return Dt(r,"labelWrapCachedLines",e)||[]}var cu=function(e,r){return function(n){var a=e(n),i=WT(n,r);return i.length>1?i.map(function(s,o){return"".concat(a,"_").concat(o)}):a}},hu=function(e,r){return function(n,a){var i=e(n);if(typeof a=="string"){var s=a.indexOf("_");if(s>0){var o=Number(a.substring(s+1)),u=WT(n,r),l=i.h/u.length,f=l*o,c=i.y1+f;return{x1:i.x1,w:i.w,y1:c,h:l,yOffset:f}}}return i}};function k2(t){{var e=t.render;t.render=function(i){i=i||{};var s=t.cy;t.webgl&&(s.zoom()>qT?(N2(t),e.call(t,i)):(B2(t),KT(t,i,ya.SCREEN)))}}{var r=t.matchCanvasSize;t.matchCanvasSize=function(i){r.call(t,i),t.pickingFrameBuffer.setFramebufferAttachmentSizes(t.canvasWidth,t.canvasHeight),t.pickingFrameBuffer.needsDraw=!0}}t.findNearestElements=function(i,s,o,u){return V2(t,i,s)};{var n=t.invalidateCachedZSortedEles;t.invalidateCachedZSortedEles=function(){n.call(t),t.pickingFrameBuffer.needsDraw=!0}}{var a=t.notify;t.notify=function(i,s){a.call(t,i,s),i==="viewport"||i==="bounds"?t.pickingFrameBuffer.needsDraw=!0:i==="background"&&t.drawing.invalidate(s,{type:"node-body"})}}}function N2(t){var e=t.data.contexts[t.WEBGL];e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT)}function B2(t){var e=function(n){n.save(),n.setTransform(1,0,0,1,0,0),n.clearRect(0,0,t.canvasWidth,t.canvasHeight),n.restore()};e(t.data.contexts[t.NODE]),e(t.data.contexts[t.DRAG])}function F2(t){var e=t.canvasWidth,r=t.canvasHeight,n=$v(t),a=n.pan,i=n.zoom,s=uu();bi(s,s,[a.x,a.y]),nv(s,s,[i,i]);var o=uu();T2(o,e,r);var u=uu();return x2(u,o,s),u}function XT(t,e){var r=t.canvasWidth,n=t.canvasHeight,a=$v(t),i=a.pan,s=a.zoom;e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,r,n),e.translate(i.x,i.y),e.scale(s,s)}function q2(t,e){t.drawSelectionRectangle(e,function(r){return XT(t,r)})}function G2(t){var e=t.data.contexts[t.NODE];e.save(),XT(t,e),e.strokeStyle="rgba(0, 0, 0, 0.3)",e.beginPath(),e.moveTo(-1e3,0),e.lineTo(1e3,0),e.stroke(),e.beginPath(),e.moveTo(0,-1e3),e.lineTo(0,1e3),e.stroke(),e.restore()}function z2(t){var e=function(a,i,s){for(var o=a.atlasManager.getAtlasCollection(i),u=t.data.contexts[t.NODE],l=o.atlases,f=0;f<l.length;f++){var c=l[f],h=c.canvas;if(h){var d=h.width,v=h.height,p=d*f,g=h.height*s,y=.4;u.save(),u.scale(y,y),u.drawImage(h,p,g),u.strokeStyle="black",u.rect(p,g,d,v),u.stroke(),u.restore()}}},r=0;e(t.drawing,"node",r++),e(t.drawing,"label",r++)}function $2(t,e,r,n,a){var i,s,o,u,l=$v(t),f=l.pan,c=l.zoom;{var h=d2(t,f,c,e,r),d=tt(h,2),v=d[0],p=d[1],g=6;i=v-g/2,s=p-g/2,o=g,u=g}if(o===0||u===0)return[];var y=t.data.contexts[t.WEBGL];y.bindFramebuffer(y.FRAMEBUFFER,t.pickingFrameBuffer),t.pickingFrameBuffer.needsDraw&&(y.viewport(0,0,y.canvas.width,y.canvas.height),KT(t,null,ya.PICKING),t.pickingFrameBuffer.needsDraw=!1);var m=o*u,b=new Uint8Array(m*4);y.readPixels(i,s,o,u,y.RGBA,y.UNSIGNED_BYTE,b),y.bindFramebuffer(y.FRAMEBUFFER,null);for(var E=new Set,x=0;x<m;x++){var S=b.slice(x*4,x*4+4),w=p2(S)-1;w>=0&&E.add(w)}return E}function V2(t,e,r){var n=$2(t,e,r),a=t.getCachedZSortedEles(),i,s,o=Lt(n),u;try{for(o.s();!(u=o.n()).done;){var l=u.value,f=a[l];if(!i&&f.isNode()&&(i=f),!s&&f.isEdge()&&(s=f),i&&s)break}}catch(c){o.e(c)}finally{o.f()}return[i,s].filter(Boolean)}function du(t,e,r){var n=t.drawing;e+=1,r.isNode()?(n.drawNode(r,e,"node-underlay"),n.drawNode(r,e,"node-body"),n.drawTexture(r,e,"label"),n.drawNode(r,e,"node-overlay")):(n.drawEdgeLine(r,e),n.drawEdgeArrow(r,e,"source"),n.drawEdgeArrow(r,e,"target"),n.drawTexture(r,e,"label"),n.drawTexture(r,e,"edge-source-label"),n.drawTexture(r,e,"edge-target-label"))}function KT(t,e,r){var n;t.webglDebug&&(n=performance.now());var a=t.drawing,i=0;if(r.screen&&t.data.canvasNeedsRedraw[t.SELECT_BOX]&&q2(t,e),t.data.canvasNeedsRedraw[t.NODE]||r.picking){var s=t.data.contexts[t.WEBGL];r.screen?(s.clearColor(0,0,0,0),s.enable(s.BLEND),s.blendFunc(s.ONE,s.ONE_MINUS_SRC_ALPHA)):s.disable(s.BLEND),s.clear(s.COLOR_BUFFER_BIT|s.DEPTH_BUFFER_BIT),s.viewport(0,0,s.canvas.width,s.canvas.height);var o=F2(t),u=t.getCachedZSortedEles();if(i=u.length,a.startFrame(o,r),r.screen){for(var l=0;l<u.nondrag.length;l++)du(t,l,u.nondrag[l]);for(var f=0;f<u.drag.length;f++)du(t,f,u.drag[f])}else if(r.picking)for(var c=0;c<u.length;c++)du(t,c,u[c]);a.endFrame(),r.screen&&t.webglDebugShowAtlases&&(G2(t),z2(t)),t.data.canvasNeedsRedraw[t.NODE]=!1,t.data.canvasNeedsRedraw[t.DRAG]=!1}if(t.webglDebug){var h=performance.now(),d=!1,v=Math.ceil(h-n),p=a.getDebugInfo(),g=["".concat(i," elements"),"".concat(p.totalInstances," instances"),"".concat(p.batchCount," batches"),"".concat(p.totalAtlases," atlases"),"".concat(p.wrappedCount," wrapped textures"),"".concat(p.simpleCount," simple shapes")].join(", ");if(d)console.log("WebGL (".concat(r.name,") - time ").concat(v,"ms, ").concat(g));else{console.log("WebGL (".concat(r.name,") - frame time ").concat(v,"ms")),console.log("Totals:"),console.log("  ".concat(g)),console.log("Texture Atlases Used:");var y=p.atlasInfo,m=Lt(y),b;try{for(m.s();!(b=m.n()).done;){var E=b.value;console.log("  ".concat(E.type,": ").concat(E.keyCount," keys, ").concat(E.atlasCount," atlases"))}}catch(x){m.e(x)}finally{m.f()}console.log("")}}t.data.gc&&(console.log("Garbage Collect!"),t.data.gc=!1,a.gc())}var Vr={};Vr.drawPolygonPath=function(t,e,r,n,a,i){var s=n/2,o=a/2;t.beginPath&&t.beginPath(),t.moveTo(e+s*i[0],r+o*i[1]);for(var u=1;u<i.length/2;u++)t.lineTo(e+s*i[u*2],r+o*i[u*2+1]);t.closePath()};Vr.drawRoundPolygonPath=function(t,e,r,n,a,i,s){s.forEach(function(o){return _T(t,o)}),t.closePath()};Vr.drawRoundRectanglePath=function(t,e,r,n,a,i){var s=n/2,o=a/2,u=i==="auto"?kr(n,a):Math.min(i,o,s);t.beginPath&&t.beginPath(),t.moveTo(e,r-o),t.arcTo(e+s,r-o,e+s,r,u),t.arcTo(e+s,r+o,e,r+o,u),t.arcTo(e-s,r+o,e-s,r,u),t.arcTo(e-s,r-o,e,r-o,u),t.lineTo(e,r-o),t.closePath()};Vr.drawBottomRoundRectanglePath=function(t,e,r,n,a,i){var s=n/2,o=a/2,u=i==="auto"?kr(n,a):i;t.beginPath&&t.beginPath(),t.moveTo(e,r-o),t.lineTo(e+s,r-o),t.lineTo(e+s,r),t.arcTo(e+s,r+o,e,r+o,u),t.arcTo(e-s,r+o,e-s,r,u),t.lineTo(e-s,r-o),t.lineTo(e,r-o),t.closePath()};Vr.drawCutRectanglePath=function(t,e,r,n,a,i,s){var o=n/2,u=a/2,l=s==="auto"?Iv():s;t.beginPath&&t.beginPath(),t.moveTo(e-o+l,r-u),t.lineTo(e+o-l,r-u),t.lineTo(e+o,r-u+l),t.lineTo(e+o,r+u-l),t.lineTo(e+o-l,r+u),t.lineTo(e-o+l,r+u),t.lineTo(e-o,r+u-l),t.lineTo(e-o,r-u+l),t.closePath()};Vr.drawBarrelPath=function(t,e,r,n,a){var i=n/2,s=a/2,o=e-i,u=e+i,l=r-s,f=r+s,c=Vd(n,a),h=c.widthOffset,d=c.heightOffset,v=c.ctrlPtOffsetPct*h;t.beginPath&&t.beginPath(),t.moveTo(o,l+d),t.lineTo(o,f-d),t.quadraticCurveTo(o+v,f,o+h,f),t.lineTo(u-h,f),t.quadraticCurveTo(u-v,f,u,f-d),t.lineTo(u,l+d),t.quadraticCurveTo(u-v,l,u-h,l),t.lineTo(o+h,l),t.quadraticCurveTo(o+v,l,o,l+d),t.closePath()};var am=Math.sin(0),im=Math.cos(0),av={},iv={},jT=Math.PI/40;for(var Rn=0*Math.PI;Rn<2*Math.PI;Rn+=jT)av[Rn]=Math.sin(Rn),iv[Rn]=Math.cos(Rn);Vr.drawEllipsePath=function(t,e,r,n,a){if(t.beginPath&&t.beginPath(),t.ellipse)t.ellipse(e,r,n/2,a/2,0,0,2*Math.PI);else for(var i,s,o=n/2,u=a/2,l=0*Math.PI;l<2*Math.PI;l+=jT)i=e-o*av[l]*am+o*iv[l]*im,s=r+u*iv[l]*am+u*av[l]*im,l===0?t.moveTo(i,s):t.lineTo(i,s);t.closePath()};var $a={};$a.createBuffer=function(t,e){var r=document.createElement("canvas");return r.width=t,r.height=e,[r,r.getContext("2d")]};$a.bufferCanvasImage=function(t){var e=this.cy,r=e.mutableElements(),n=r.boundingBox(),a=this.findContainerClientCoords(),i=t.full?Math.ceil(n.w):a[2],s=t.full?Math.ceil(n.h):a[3],o=ie(t.maxWidth)||ie(t.maxHeight),u=this.getPixelRatio(),l=1;if(t.scale!==void 0)i*=t.scale,s*=t.scale,l=t.scale;else if(o){var f=1/0,c=1/0;ie(t.maxWidth)&&(f=l*t.maxWidth/i),ie(t.maxHeight)&&(c=l*t.maxHeight/s),l=Math.min(f,c),i*=l,s*=l}o||(i*=u,s*=u,l*=u);var h=document.createElement("canvas");h.width=i,h.height=s,h.style.width=i+"px",h.style.height=s+"px";var d=h.getContext("2d");if(i>0&&s>0){d.clearRect(0,0,i,s),d.globalCompositeOperation="source-over";var v=this.getCachedZSortedEles();if(t.full)d.translate(-n.x1*l,-n.y1*l),d.scale(l,l),this.drawElements(d,v),d.scale(1/l,1/l),d.translate(n.x1*l,n.y1*l);else{var p=e.pan(),g={x:p.x*l,y:p.y*l};l*=e.zoom(),d.translate(g.x,g.y),d.scale(l,l),this.drawElements(d,v),d.scale(1/l,1/l),d.translate(-g.x,-g.y)}t.bg&&(d.globalCompositeOperation="destination-over",d.fillStyle=t.bg,d.rect(0,0,i,s),d.fill())}return h};function U2(t,e){for(var r=atob(t),n=new ArrayBuffer(r.length),a=new Uint8Array(n),i=0;i<r.length;i++)a[i]=r.charCodeAt(i);return new Blob([n],{type:e})}function sm(t){var e=t.indexOf(",");return t.substr(e+1)}function ZT(t,e,r){var n=function(){return e.toDataURL(r,t.quality)};switch(t.output){case"blob-promise":return new $n(function(a,i){try{e.toBlob(function(s){s!=null?a(s):i(new Error("`canvas.toBlob()` sent a null value in its callback"))},r,t.quality)}catch(s){i(s)}});case"blob":return U2(sm(n()),r);case"base64":return sm(n());case"base64uri":default:return n()}}$a.png=function(t){return ZT(t,this.bufferCanvasImage(t),"image/png")};$a.jpg=function(t){return ZT(t,this.bufferCanvasImage(t),"image/jpeg")};var QT={};QT.nodeShapeImpl=function(t,e,r,n,a,i,s,o){switch(t){case"ellipse":return this.drawEllipsePath(e,r,n,a,i);case"polygon":return this.drawPolygonPath(e,r,n,a,i,s);case"round-polygon":return this.drawRoundPolygonPath(e,r,n,a,i,s,o);case"roundrectangle":case"round-rectangle":return this.drawRoundRectanglePath(e,r,n,a,i,o);case"cutrectangle":case"cut-rectangle":return this.drawCutRectanglePath(e,r,n,a,i,s,o);case"bottomroundrectangle":case"bottom-round-rectangle":return this.drawBottomRoundRectanglePath(e,r,n,a,i,o);case"barrel":return this.drawBarrelPath(e,r,n,a,i)}};var H2=JT,Re=JT.prototype;Re.CANVAS_LAYERS=3;Re.SELECT_BOX=0;Re.DRAG=1;Re.NODE=2;Re.WEBGL=3;Re.CANVAS_TYPES=["2d","2d","2d","webgl2"];Re.BUFFER_COUNT=3;Re.TEXTURE_BUFFER=0;Re.MOTIONBLUR_BUFFER_NODE=1;Re.MOTIONBLUR_BUFFER_DRAG=2;function JT(t){var e=this,r=e.cy.window(),n=r.document;t.webgl&&(Re.CANVAS_LAYERS=e.CANVAS_LAYERS=4,console.log("webgl rendering enabled")),e.data={canvases:new Array(Re.CANVAS_LAYERS),contexts:new Array(Re.CANVAS_LAYERS),canvasNeedsRedraw:new Array(Re.CANVAS_LAYERS),bufferCanvases:new Array(Re.BUFFER_COUNT),bufferContexts:new Array(Re.CANVAS_LAYERS)};var a="-webkit-tap-highlight-color",i="rgba(0,0,0,0)";e.data.canvasContainer=n.createElement("div");var s=e.data.canvasContainer.style;e.data.canvasContainer.style[a]=i,s.position="relative",s.zIndex="0",s.overflow="hidden";var o=t.cy.container();o.appendChild(e.data.canvasContainer),o.style[a]=i;var u={"-webkit-user-select":"none","-moz-user-select":"-moz-none","user-select":"none","-webkit-tap-highlight-color":"rgba(0,0,0,0)","outline-style":"none"};qI()&&(u["-ms-touch-action"]="none",u["touch-action"]="none");for(var l=0;l<Re.CANVAS_LAYERS;l++){var f=e.data.canvases[l]=n.createElement("canvas"),c=Re.CANVAS_TYPES[l];e.data.contexts[l]=f.getContext(c),e.data.contexts[l]||We("Could not create canvas of type "+c),Object.keys(u).forEach(function(K){f.style[K]=u[K]}),f.style.position="absolute",f.setAttribute("data-id","layer"+l),f.style.zIndex=String(Re.CANVAS_LAYERS-l),e.data.canvasContainer.appendChild(f),e.data.canvasNeedsRedraw[l]=!1}e.data.topCanvas=e.data.canvases[0],e.data.canvases[Re.NODE].setAttribute("data-id","layer"+Re.NODE+"-node"),e.data.canvases[Re.SELECT_BOX].setAttribute("data-id","layer"+Re.SELECT_BOX+"-selectbox"),e.data.canvases[Re.DRAG].setAttribute("data-id","layer"+Re.DRAG+"-drag"),e.data.canvases[Re.WEBGL]&&e.data.canvases[Re.WEBGL].setAttribute("data-id","layer"+Re.WEBGL+"-webgl");for(var l=0;l<Re.BUFFER_COUNT;l++)e.data.bufferCanvases[l]=n.createElement("canvas"),e.data.bufferContexts[l]=e.data.bufferCanvases[l].getContext("2d"),e.data.bufferCanvases[l].style.position="absolute",e.data.bufferCanvases[l].setAttribute("data-id","buffer"+l),e.data.bufferCanvases[l].style.zIndex=String(-l-1),e.data.bufferCanvases[l].style.visibility="hidden";e.pathsEnabled=!0;var h=St(),d=function(V){return{x:(V.x1+V.x2)/2,y:(V.y1+V.y2)/2}},v=function(V){return{x:-V.w/2,y:-V.h/2}},p=function(V){var U=V[0]._private,X=U.oldBackgroundTimestamp===U.backgroundTimestamp;return!X},g=function(V){return V[0]._private.nodeKey},y=function(V){return V[0]._private.labelStyleKey},m=function(V){return V[0]._private.sourceLabelStyleKey},b=function(V){return V[0]._private.targetLabelStyleKey},E=function(V,U,X,j,ne){return e.drawElement(V,U,X,!1,!1,ne)},x=function(V,U,X,j,ne){return e.drawElementText(V,U,X,j,"main",ne)},S=function(V,U,X,j,ne){return e.drawElementText(V,U,X,j,"source",ne)},w=function(V,U,X,j,ne){return e.drawElementText(V,U,X,j,"target",ne)},T=function(V){return V.boundingBox(),V[0]._private.bodyBounds},C=function(V){return V.boundingBox(),V[0]._private.labelBounds.main||h},A=function(V){return V.boundingBox(),V[0]._private.labelBounds.source||h},R=function(V){return V.boundingBox(),V[0]._private.labelBounds.target||h},I=function(V,U){return U},D=function(V){return d(T(V))},_=function(V,U,X){var j=V?V+"-":"";return{x:U.x+X.pstyle(j+"text-margin-x").pfValue,y:U.y+X.pstyle(j+"text-margin-y").pfValue}},M=function(V,U,X){var j=V[0]._private.rscratch;return{x:j[U],y:j[X]}},k=function(V){return _("",M(V,"labelX","labelY"),V)},O=function(V){return _("source",M(V,"sourceLabelX","sourceLabelY"),V)},P=function(V){return _("target",M(V,"targetLabelX","targetLabelY"),V)},q=function(V){return v(T(V))},G=function(V){return v(A(V))},F=function(V){return v(R(V))},z=function(V){var U=C(V),X=v(C(V));if(V.isNode()){switch(V.pstyle("text-halign").value){case"left":X.x=-U.w-(U.leftPad||0);break;case"right":X.x=-(U.rightPad||0);break}switch(V.pstyle("text-valign").value){case"top":X.y=-U.h-(U.topPad||0);break;case"bottom":X.y=-(U.botPad||0);break}}return X},W=e.data.eleTxrCache=new fa(e,{getKey:g,doesEleInvalidateKey:p,drawElement:E,getBoundingBox:T,getRotationPoint:D,getRotationOffset:q,allowEdgeTxrCaching:!1,allowParentTxrCaching:!1}),N=e.data.lblTxrCache=new fa(e,{getKey:y,drawElement:x,getBoundingBox:C,getRotationPoint:k,getRotationOffset:z,isVisible:I}),B=e.data.slbTxrCache=new fa(e,{getKey:m,drawElement:S,getBoundingBox:A,getRotationPoint:O,getRotationOffset:G,isVisible:I}),$=e.data.tlbTxrCache=new fa(e,{getKey:b,drawElement:w,getBoundingBox:R,getRotationPoint:P,getRotationOffset:F,isVisible:I}),H=e.data.lyrTxrCache=new GT(e);e.onUpdateEleCalcs(function(V,U){W.invalidateElements(U),N.invalidateElements(U),B.invalidateElements(U),$.invalidateElements(U),H.invalidateElements(U);for(var X=0;X<U.length;X++){var j=U[X]._private;j.oldBackgroundTimestamp=j.backgroundTimestamp}});var te=function(V){for(var U=0;U<V.length;U++)H.enqueueElementRefinement(V[U].ele)};W.onDequeue(te),N.onDequeue(te),B.onDequeue(te),$.onDequeue(te),t.webgl&&e.initWebgl(t,{getStyleKey:g,getLabelKey:y,getSourceLabelKey:m,getTargetLabelKey:b,drawElement:E,drawLabel:x,drawSourceLabel:S,drawTargetLabel:w,getElementBox:T,getLabelBox:C,getSourceLabelBox:A,getTargetLabelBox:R,getElementRotationPoint:D,getElementRotationOffset:q,getLabelRotationPoint:k,getSourceLabelRotationPoint:O,getTargetLabelRotationPoint:P,getLabelRotationOffset:z,getSourceLabelRotationOffset:G,getTargetLabelRotationOffset:F})}Re.redrawHint=function(t,e){var r=this;switch(t){case"eles":r.data.canvasNeedsRedraw[Re.NODE]=e;break;case"drag":r.data.canvasNeedsRedraw[Re.DRAG]=e;break;case"select":r.data.canvasNeedsRedraw[Re.SELECT_BOX]=e;break;case"gc":r.data.gc=!0;break}};var Y2=typeof Path2D<"u";Re.path2dEnabled=function(t){if(t===void 0)return this.pathsEnabled;this.pathsEnabled=!!t};Re.usePaths=function(){return Y2&&this.pathsEnabled};Re.setImgSmoothing=function(t,e){t.imageSmoothingEnabled!=null?t.imageSmoothingEnabled=e:(t.webkitImageSmoothingEnabled=e,t.mozImageSmoothingEnabled=e,t.msImageSmoothingEnabled=e)};Re.getImgSmoothing=function(t){return t.imageSmoothingEnabled!=null?t.imageSmoothingEnabled:t.webkitImageSmoothingEnabled||t.mozImageSmoothingEnabled||t.msImageSmoothingEnabled};Re.makeOffscreenCanvas=function(t,e){var r;if((typeof OffscreenCanvas>"u"?"undefined":ot(OffscreenCanvas))!=="undefined")r=new OffscreenCanvas(t,e);else{var n=this.cy.window(),a=n.document;r=a.createElement("canvas"),r.width=t,r.height=e}return r};[zT,rr,vr,zv,vn,$r,At,YT,Vr,$a,QT].forEach(function(t){xe(Re,t)});var W2=[{name:"null",impl:RT},{name:"base",impl:BT},{name:"canvas",impl:H2}],X2=[{type:"layout",extensions:bO},{type:"renderer",extensions:W2}],eC={},tC={};function rC(t,e,r){var n=r,a=function(T){Ge("Can not register `"+e+"` for `"+t+"` since `"+T+"` already exists in the prototype and can not be overridden")};if(t==="core"){if(Ia.prototype[e])return a(e);Ia.prototype[e]=r}else if(t==="collection"){if(gt.prototype[e])return a(e);gt.prototype[e]=r}else if(t==="layout"){for(var i=function(T){this.options=T,r.call(this,T),Be(this._private)||(this._private={}),this._private.cy=T.cy,this._private.listeners=[],this.createEmitter()},s=i.prototype=Object.create(r.prototype),o=[],u=0;u<o.length;u++){var l=o[u];s[l]=s[l]||function(){return this}}s.start&&!s.run?s.run=function(){return this.start(),this}:!s.start&&s.run&&(s.start=function(){return this.run(),this});var f=r.prototype.stop;s.stop=function(){var w=this.options;if(w&&w.animate){var T=this.animations;if(T)for(var C=0;C<T.length;C++)T[C].stop()}return f?f.call(this):this.emit("layoutstop"),this},s.destroy||(s.destroy=function(){return this}),s.cy=function(){return this._private.cy};var c=function(T){return T._private.cy},h={addEventFields:function(T,C){C.layout=T,C.cy=c(T),C.target=T},bubble:function(){return!0},parent:function(T){return c(T)}};xe(s,{createEmitter:function(){return this._private.emitter=new ns(h,this),this},emitter:function(){return this._private.emitter},on:function(T,C){return this.emitter().on(T,C),this},one:function(T,C){return this.emitter().one(T,C),this},once:function(T,C){return this.emitter().one(T,C),this},removeListener:function(T,C){return this.emitter().removeListener(T,C),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},emit:function(T,C){return this.emitter().emit(T,C),this}}),qe.eventAliasesOn(s),n=i}else if(t==="renderer"&&e!=="null"&&e!=="base"){var d=nC("renderer","base"),v=d.prototype,p=r,g=r.prototype,y=function(){d.apply(this,arguments),p.apply(this,arguments)},m=y.prototype;for(var b in v){var E=v[b],x=g[b]!=null;if(x)return a(b);m[b]=E}for(var S in g)m[S]=g[S];v.clientFunctions.forEach(function(w){m[w]=m[w]||function(){We("Renderer does not implement `renderer."+w+"()` on its prototype")}}),n=y}else if(t==="__proto__"||t==="constructor"||t==="prototype")return We(t+" is an illegal type to be registered, possibly lead to prototype pollutions");return Ex({map:eC,keys:[t,e],value:n})}function nC(t,e){return xx({map:eC,keys:[t,e]})}function K2(t,e,r,n,a){return Ex({map:tC,keys:[t,e,r,n],value:a})}function j2(t,e,r,n){return xx({map:tC,keys:[t,e,r,n]})}var sv=function(){if(arguments.length===2)return nC.apply(null,arguments);if(arguments.length===3)return rC.apply(null,arguments);if(arguments.length===4)return j2.apply(null,arguments);if(arguments.length===5)return K2.apply(null,arguments);We("Invalid extension access syntax")};Ia.prototype.extension=sv;X2.forEach(function(t){t.extensions.forEach(function(e){rC(t.type,e.name,e.impl)})});var Bi=function(){if(!(this instanceof Bi))return new Bi;this.length=0},cn=Bi.prototype;cn.instanceString=function(){return"stylesheet"};cn.selector=function(t){var e=this.length++;return this[e]={selector:t,properties:[]},this};cn.css=function(t,e){var r=this.length-1;if(we(t))this[r].properties.push({name:t,value:e});else if(Be(t))for(var n=t,a=Object.keys(n),i=0;i<a.length;i++){var s=a[i],o=n[s];if(o!=null){var u=ct.properties[s]||ct.properties[Wi(s)];if(u!=null){var l=u.name,f=o;this[r].properties.push({name:l,value:f})}}}return this};cn.style=cn.css;cn.generateStyle=function(t){var e=new ct(t);return this.appendToStyle(e)};cn.appendToStyle=function(t){for(var e=0;e<this.length;e++){var r=this[e],n=r.selector,a=r.properties;t.selector(n);for(var i=0;i<a.length;i++){var s=a[i];t.css(s.name,s.value)}}return t};var Z2="3.33.1",hr=function(e){if(e===void 0&&(e={}),Be(e))return new Ia(e);if(we(e))return sv.apply(sv,arguments)};hr.use=function(t){var e=Array.prototype.slice.call(arguments,1);return e.unshift(hr),t.apply(null,e),this};hr.warnings=function(t){return Dx(t)};hr.version=Z2;hr.stylesheet=hr.Stylesheet=Bi;var Sr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Vv(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Uv(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var vu,om;function Q2(){if(om)return vu;om=1;function t(){this.__data__=[],this.size=0}return vu=t,vu}var gu,um;function Wn(){if(um)return gu;um=1;function t(e,r){return e===r||e!==e&&r!==r}return gu=t,gu}var pu,lm;function cs(){if(lm)return pu;lm=1;var t=Wn();function e(r,n){for(var a=r.length;a--;)if(t(r[a][0],n))return a;return-1}return pu=e,pu}var yu,fm;function J2(){if(fm)return yu;fm=1;var t=cs(),e=Array.prototype,r=e.splice;function n(a){var i=this.__data__,s=t(i,a);if(s<0)return!1;var o=i.length-1;return s==o?i.pop():r.call(i,s,1),--this.size,!0}return yu=n,yu}var mu,cm;function eP(){if(cm)return mu;cm=1;var t=cs();function e(r){var n=this.__data__,a=t(n,r);return a<0?void 0:n[a][1]}return mu=e,mu}var bu,hm;function tP(){if(hm)return bu;hm=1;var t=cs();function e(r){return t(this.__data__,r)>-1}return bu=e,bu}var wu,dm;function rP(){if(dm)return wu;dm=1;var t=cs();function e(r,n){var a=this.__data__,i=t(a,r);return i<0?(++this.size,a.push([r,n])):a[i][1]=n,this}return wu=e,wu}var Eu,vm;function hs(){if(vm)return Eu;vm=1;var t=Q2(),e=J2(),r=eP(),n=tP(),a=rP();function i(s){var o=-1,u=s==null?0:s.length;for(this.clear();++o<u;){var l=s[o];this.set(l[0],l[1])}}return i.prototype.clear=t,i.prototype.delete=e,i.prototype.get=r,i.prototype.has=n,i.prototype.set=a,Eu=i,Eu}var xu,gm;function nP(){if(gm)return xu;gm=1;var t=hs();function e(){this.__data__=new t,this.size=0}return xu=e,xu}var Tu,pm;function aP(){if(pm)return Tu;pm=1;function t(e){var r=this.__data__,n=r.delete(e);return this.size=r.size,n}return Tu=t,Tu}var Cu,ym;function iP(){if(ym)return Cu;ym=1;function t(e){return this.__data__.get(e)}return Cu=t,Cu}var Su,mm;function sP(){if(mm)return Su;mm=1;function t(e){return this.__data__.has(e)}return Su=t,Su}var Au,bm;function aC(){if(bm)return Au;bm=1;var t=typeof Sr=="object"&&Sr&&Sr.Object===Object&&Sr;return Au=t,Au}var Ru,wm;function Kt(){if(wm)return Ru;wm=1;var t=aC(),e=typeof self=="object"&&self&&self.Object===Object&&self,r=t||e||Function("return this")();return Ru=r,Ru}var Iu,Em;function Xn(){if(Em)return Iu;Em=1;var t=Kt(),e=t.Symbol;return Iu=e,Iu}var Du,xm;function oP(){if(xm)return Du;xm=1;var t=Xn(),e=Object.prototype,r=e.hasOwnProperty,n=e.toString,a=t?t.toStringTag:void 0;function i(s){var o=r.call(s,a),u=s[a];try{s[a]=void 0;var l=!0}catch{}var f=n.call(s);return l&&(o?s[a]=u:delete s[a]),f}return Du=i,Du}var _u,Tm;function uP(){if(Tm)return _u;Tm=1;var t=Object.prototype,e=t.toString;function r(n){return e.call(n)}return _u=r,_u}var Lu,Cm;function gn(){if(Cm)return Lu;Cm=1;var t=Xn(),e=oP(),r=uP(),n="[object Null]",a="[object Undefined]",i=t?t.toStringTag:void 0;function s(o){return o==null?o===void 0?a:n:i&&i in Object(o)?e(o):r(o)}return Lu=s,Lu}var Mu,Sm;function Gt(){if(Sm)return Mu;Sm=1;function t(e){var r=typeof e;return e!=null&&(r=="object"||r=="function")}return Mu=t,Mu}var Ou,Am;function Va(){if(Am)return Ou;Am=1;var t=gn(),e=Gt(),r="[object AsyncFunction]",n="[object Function]",a="[object GeneratorFunction]",i="[object Proxy]";function s(o){if(!e(o))return!1;var u=t(o);return u==n||u==a||u==r||u==i}return Ou=s,Ou}var Pu,Rm;function lP(){if(Rm)return Pu;Rm=1;var t=Kt(),e=t["__core-js_shared__"];return Pu=e,Pu}var ku,Im;function fP(){if(Im)return ku;Im=1;var t=lP(),e=function(){var n=/[^.]+$/.exec(t&&t.keys&&t.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function r(n){return!!e&&e in n}return ku=r,ku}var Nu,Dm;function iC(){if(Dm)return Nu;Dm=1;var t=Function.prototype,e=t.toString;function r(n){if(n!=null){try{return e.call(n)}catch{}try{return n+""}catch{}}return""}return Nu=r,Nu}var Bu,_m;function cP(){if(_m)return Bu;_m=1;var t=Va(),e=fP(),r=Gt(),n=iC(),a=/[\\^$.*+?()[\]{}|]/g,i=/^\[object .+?Constructor\]$/,s=Function.prototype,o=Object.prototype,u=s.toString,l=o.hasOwnProperty,f=RegExp("^"+u.call(l).replace(a,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function c(h){if(!r(h)||e(h))return!1;var d=t(h)?f:i;return d.test(n(h))}return Bu=c,Bu}var Fu,Lm;function hP(){if(Lm)return Fu;Lm=1;function t(e,r){return e==null?void 0:e[r]}return Fu=t,Fu}var qu,Mm;function pn(){if(Mm)return qu;Mm=1;var t=cP(),e=hP();function r(n,a){var i=e(n,a);return t(i)?i:void 0}return qu=r,qu}var Gu,Om;function Hv(){if(Om)return Gu;Om=1;var t=pn(),e=Kt(),r=t(e,"Map");return Gu=r,Gu}var zu,Pm;function ds(){if(Pm)return zu;Pm=1;var t=pn(),e=t(Object,"create");return zu=e,zu}var $u,km;function dP(){if(km)return $u;km=1;var t=ds();function e(){this.__data__=t?t(null):{},this.size=0}return $u=e,$u}var Vu,Nm;function vP(){if(Nm)return Vu;Nm=1;function t(e){var r=this.has(e)&&delete this.__data__[e];return this.size-=r?1:0,r}return Vu=t,Vu}var Uu,Bm;function gP(){if(Bm)return Uu;Bm=1;var t=ds(),e="__lodash_hash_undefined__",r=Object.prototype,n=r.hasOwnProperty;function a(i){var s=this.__data__;if(t){var o=s[i];return o===e?void 0:o}return n.call(s,i)?s[i]:void 0}return Uu=a,Uu}var Hu,Fm;function pP(){if(Fm)return Hu;Fm=1;var t=ds(),e=Object.prototype,r=e.hasOwnProperty;function n(a){var i=this.__data__;return t?i[a]!==void 0:r.call(i,a)}return Hu=n,Hu}var Yu,qm;function yP(){if(qm)return Yu;qm=1;var t=ds(),e="__lodash_hash_undefined__";function r(n,a){var i=this.__data__;return this.size+=this.has(n)?0:1,i[n]=t&&a===void 0?e:a,this}return Yu=r,Yu}var Wu,Gm;function mP(){if(Gm)return Wu;Gm=1;var t=dP(),e=vP(),r=gP(),n=pP(),a=yP();function i(s){var o=-1,u=s==null?0:s.length;for(this.clear();++o<u;){var l=s[o];this.set(l[0],l[1])}}return i.prototype.clear=t,i.prototype.delete=e,i.prototype.get=r,i.prototype.has=n,i.prototype.set=a,Wu=i,Wu}var Xu,zm;function bP(){if(zm)return Xu;zm=1;var t=mP(),e=hs(),r=Hv();function n(){this.size=0,this.__data__={hash:new t,map:new(r||e),string:new t}}return Xu=n,Xu}var Ku,$m;function wP(){if($m)return Ku;$m=1;function t(e){var r=typeof e;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?e!=="__proto__":e===null}return Ku=t,Ku}var ju,Vm;function vs(){if(Vm)return ju;Vm=1;var t=wP();function e(r,n){var a=r.__data__;return t(n)?a[typeof n=="string"?"string":"hash"]:a.map}return ju=e,ju}var Zu,Um;function EP(){if(Um)return Zu;Um=1;var t=vs();function e(r){var n=t(this,r).delete(r);return this.size-=n?1:0,n}return Zu=e,Zu}var Qu,Hm;function xP(){if(Hm)return Qu;Hm=1;var t=vs();function e(r){return t(this,r).get(r)}return Qu=e,Qu}var Ju,Ym;function TP(){if(Ym)return Ju;Ym=1;var t=vs();function e(r){return t(this,r).has(r)}return Ju=e,Ju}var el,Wm;function CP(){if(Wm)return el;Wm=1;var t=vs();function e(r,n){var a=t(this,r),i=a.size;return a.set(r,n),this.size+=a.size==i?0:1,this}return el=e,el}var tl,Xm;function Yv(){if(Xm)return tl;Xm=1;var t=bP(),e=EP(),r=xP(),n=TP(),a=CP();function i(s){var o=-1,u=s==null?0:s.length;for(this.clear();++o<u;){var l=s[o];this.set(l[0],l[1])}}return i.prototype.clear=t,i.prototype.delete=e,i.prototype.get=r,i.prototype.has=n,i.prototype.set=a,tl=i,tl}var rl,Km;function SP(){if(Km)return rl;Km=1;var t=hs(),e=Hv(),r=Yv(),n=200;function a(i,s){var o=this.__data__;if(o instanceof t){var u=o.__data__;if(!e||u.length<n-1)return u.push([i,s]),this.size=++o.size,this;o=this.__data__=new r(u)}return o.set(i,s),this.size=o.size,this}return rl=a,rl}var nl,jm;function gs(){if(jm)return nl;jm=1;var t=hs(),e=nP(),r=aP(),n=iP(),a=sP(),i=SP();function s(o){var u=this.__data__=new t(o);this.size=u.size}return s.prototype.clear=e,s.prototype.delete=r,s.prototype.get=n,s.prototype.has=a,s.prototype.set=i,nl=s,nl}var al,Zm;function Wv(){if(Zm)return al;Zm=1;function t(e,r){for(var n=-1,a=e==null?0:e.length;++n<a&&r(e[n],n,e)!==!1;);return e}return al=t,al}var il,Qm;function sC(){if(Qm)return il;Qm=1;var t=pn(),e=function(){try{var r=t(Object,"defineProperty");return r({},"",{}),r}catch{}}();return il=e,il}var sl,Jm;function ps(){if(Jm)return sl;Jm=1;var t=sC();function e(r,n,a){n=="__proto__"&&t?t(r,n,{configurable:!0,enumerable:!0,value:a,writable:!0}):r[n]=a}return sl=e,sl}var ol,e0;function ys(){if(e0)return ol;e0=1;var t=ps(),e=Wn(),r=Object.prototype,n=r.hasOwnProperty;function a(i,s,o){var u=i[s];(!(n.call(i,s)&&e(u,o))||o===void 0&&!(s in i))&&t(i,s,o)}return ol=a,ol}var ul,t0;function Ua(){if(t0)return ul;t0=1;var t=ys(),e=ps();function r(n,a,i,s){var o=!i;i||(i={});for(var u=-1,l=a.length;++u<l;){var f=a[u],c=s?s(i[f],n[f],f,i,n):void 0;c===void 0&&(c=n[f]),o?e(i,f,c):t(i,f,c)}return i}return ul=r,ul}var ll,r0;function AP(){if(r0)return ll;r0=1;function t(e,r){for(var n=-1,a=Array(e);++n<e;)a[n]=r(n);return a}return ll=t,ll}var fl,n0;function nr(){if(n0)return fl;n0=1;function t(e){return e!=null&&typeof e=="object"}return fl=t,fl}var cl,a0;function RP(){if(a0)return cl;a0=1;var t=gn(),e=nr(),r="[object Arguments]";function n(a){return e(a)&&t(a)==r}return cl=n,cl}var hl,i0;function Ha(){if(i0)return hl;i0=1;var t=RP(),e=nr(),r=Object.prototype,n=r.hasOwnProperty,a=r.propertyIsEnumerable,i=t(function(){return arguments}())?t:function(s){return e(s)&&n.call(s,"callee")&&!a.call(s,"callee")};return hl=i,hl}var dl,s0;function rt(){if(s0)return dl;s0=1;var t=Array.isArray;return dl=t,dl}var ca={exports:{}},vl,o0;function IP(){if(o0)return vl;o0=1;function t(){return!1}return vl=t,vl}ca.exports;var u0;function Kn(){return u0||(u0=1,function(t,e){var r=Kt(),n=IP(),a=e&&!e.nodeType&&e,i=a&&!0&&t&&!t.nodeType&&t,s=i&&i.exports===a,o=s?r.Buffer:void 0,u=o?o.isBuffer:void 0,l=u||n;t.exports=l}(ca,ca.exports)),ca.exports}var gl,l0;function ms(){if(l0)return gl;l0=1;var t=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function r(n,a){var i=typeof n;return a=a??t,!!a&&(i=="number"||i!="symbol"&&e.test(n))&&n>-1&&n%1==0&&n<a}return gl=r,gl}var pl,f0;function Xv(){if(f0)return pl;f0=1;var t=9007199254740991;function e(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=t}return pl=e,pl}var yl,c0;function DP(){if(c0)return yl;c0=1;var t=gn(),e=Xv(),r=nr(),n="[object Arguments]",a="[object Array]",i="[object Boolean]",s="[object Date]",o="[object Error]",u="[object Function]",l="[object Map]",f="[object Number]",c="[object Object]",h="[object RegExp]",d="[object Set]",v="[object String]",p="[object WeakMap]",g="[object ArrayBuffer]",y="[object DataView]",m="[object Float32Array]",b="[object Float64Array]",E="[object Int8Array]",x="[object Int16Array]",S="[object Int32Array]",w="[object Uint8Array]",T="[object Uint8ClampedArray]",C="[object Uint16Array]",A="[object Uint32Array]",R={};R[m]=R[b]=R[E]=R[x]=R[S]=R[w]=R[T]=R[C]=R[A]=!0,R[n]=R[a]=R[g]=R[i]=R[y]=R[s]=R[o]=R[u]=R[l]=R[f]=R[c]=R[h]=R[d]=R[v]=R[p]=!1;function I(D){return r(D)&&e(D.length)&&!!R[t(D)]}return yl=I,yl}var ml,h0;function bs(){if(h0)return ml;h0=1;function t(e){return function(r){return e(r)}}return ml=t,ml}var ha={exports:{}};ha.exports;var d0;function Kv(){return d0||(d0=1,function(t,e){var r=aC(),n=e&&!e.nodeType&&e,a=n&&!0&&t&&!t.nodeType&&t,i=a&&a.exports===n,s=i&&r.process,o=function(){try{var u=a&&a.require&&a.require("util").types;return u||s&&s.binding&&s.binding("util")}catch{}}();t.exports=o}(ha,ha.exports)),ha.exports}var bl,v0;function Ya(){if(v0)return bl;v0=1;var t=DP(),e=bs(),r=Kv(),n=r&&r.isTypedArray,a=n?e(n):t;return bl=a,bl}var wl,g0;function oC(){if(g0)return wl;g0=1;var t=AP(),e=Ha(),r=rt(),n=Kn(),a=ms(),i=Ya(),s=Object.prototype,o=s.hasOwnProperty;function u(l,f){var c=r(l),h=!c&&e(l),d=!c&&!h&&n(l),v=!c&&!h&&!d&&i(l),p=c||h||d||v,g=p?t(l.length,String):[],y=g.length;for(var m in l)(f||o.call(l,m))&&!(p&&(m=="length"||d&&(m=="offset"||m=="parent")||v&&(m=="buffer"||m=="byteLength"||m=="byteOffset")||a(m,y)))&&g.push(m);return g}return wl=u,wl}var El,p0;function ws(){if(p0)return El;p0=1;var t=Object.prototype;function e(r){var n=r&&r.constructor,a=typeof n=="function"&&n.prototype||t;return r===a}return El=e,El}var xl,y0;function uC(){if(y0)return xl;y0=1;function t(e,r){return function(n){return e(r(n))}}return xl=t,xl}var Tl,m0;function _P(){if(m0)return Tl;m0=1;var t=uC(),e=t(Object.keys,Object);return Tl=e,Tl}var Cl,b0;function jv(){if(b0)return Cl;b0=1;var t=ws(),e=_P(),r=Object.prototype,n=r.hasOwnProperty;function a(i){if(!t(i))return e(i);var s=[];for(var o in Object(i))n.call(i,o)&&o!="constructor"&&s.push(o);return s}return Cl=a,Cl}var Sl,w0;function gr(){if(w0)return Sl;w0=1;var t=Va(),e=Xv();function r(n){return n!=null&&e(n.length)&&!t(n)}return Sl=r,Sl}var Al,E0;function Ur(){if(E0)return Al;E0=1;var t=oC(),e=jv(),r=gr();function n(a){return r(a)?t(a):e(a)}return Al=n,Al}var Rl,x0;function LP(){if(x0)return Rl;x0=1;var t=Ua(),e=Ur();function r(n,a){return n&&t(a,e(a),n)}return Rl=r,Rl}var Il,T0;function MP(){if(T0)return Il;T0=1;function t(e){var r=[];if(e!=null)for(var n in Object(e))r.push(n);return r}return Il=t,Il}var Dl,C0;function OP(){if(C0)return Dl;C0=1;var t=Gt(),e=ws(),r=MP(),n=Object.prototype,a=n.hasOwnProperty;function i(s){if(!t(s))return r(s);var o=e(s),u=[];for(var l in s)l=="constructor"&&(o||!a.call(s,l))||u.push(l);return u}return Dl=i,Dl}var _l,S0;function yn(){if(S0)return _l;S0=1;var t=oC(),e=OP(),r=gr();function n(a){return r(a)?t(a,!0):e(a)}return _l=n,_l}var Ll,A0;function PP(){if(A0)return Ll;A0=1;var t=Ua(),e=yn();function r(n,a){return n&&t(a,e(a),n)}return Ll=r,Ll}var da={exports:{}};da.exports;var R0;function lC(){return R0||(R0=1,function(t,e){var r=Kt(),n=e&&!e.nodeType&&e,a=n&&!0&&t&&!t.nodeType&&t,i=a&&a.exports===n,s=i?r.Buffer:void 0,o=s?s.allocUnsafe:void 0;function u(l,f){if(f)return l.slice();var c=l.length,h=o?o(c):new l.constructor(c);return l.copy(h),h}t.exports=u}(da,da.exports)),da.exports}var Ml,I0;function fC(){if(I0)return Ml;I0=1;function t(e,r){var n=-1,a=e.length;for(r||(r=Array(a));++n<a;)r[n]=e[n];return r}return Ml=t,Ml}var Ol,D0;function cC(){if(D0)return Ol;D0=1;function t(e,r){for(var n=-1,a=e==null?0:e.length,i=0,s=[];++n<a;){var o=e[n];r(o,n,e)&&(s[i++]=o)}return s}return Ol=t,Ol}var Pl,_0;function hC(){if(_0)return Pl;_0=1;function t(){return[]}return Pl=t,Pl}var kl,L0;function Zv(){if(L0)return kl;L0=1;var t=cC(),e=hC(),r=Object.prototype,n=r.propertyIsEnumerable,a=Object.getOwnPropertySymbols,i=a?function(s){return s==null?[]:(s=Object(s),t(a(s),function(o){return n.call(s,o)}))}:e;return kl=i,kl}var Nl,M0;function kP(){if(M0)return Nl;M0=1;var t=Ua(),e=Zv();function r(n,a){return t(n,e(n),a)}return Nl=r,Nl}var Bl,O0;function Qv(){if(O0)return Bl;O0=1;function t(e,r){for(var n=-1,a=r.length,i=e.length;++n<a;)e[i+n]=r[n];return e}return Bl=t,Bl}var Fl,P0;function Es(){if(P0)return Fl;P0=1;var t=uC(),e=t(Object.getPrototypeOf,Object);return Fl=e,Fl}var ql,k0;function dC(){if(k0)return ql;k0=1;var t=Qv(),e=Es(),r=Zv(),n=hC(),a=Object.getOwnPropertySymbols,i=a?function(s){for(var o=[];s;)t(o,r(s)),s=e(s);return o}:n;return ql=i,ql}var Gl,N0;function NP(){if(N0)return Gl;N0=1;var t=Ua(),e=dC();function r(n,a){return t(n,e(n),a)}return Gl=r,Gl}var zl,B0;function vC(){if(B0)return zl;B0=1;var t=Qv(),e=rt();function r(n,a,i){var s=a(n);return e(n)?s:t(s,i(n))}return zl=r,zl}var $l,F0;function gC(){if(F0)return $l;F0=1;var t=vC(),e=Zv(),r=Ur();function n(a){return t(a,r,e)}return $l=n,$l}var Vl,q0;function BP(){if(q0)return Vl;q0=1;var t=vC(),e=dC(),r=yn();function n(a){return t(a,r,e)}return Vl=n,Vl}var Ul,G0;function FP(){if(G0)return Ul;G0=1;var t=pn(),e=Kt(),r=t(e,"DataView");return Ul=r,Ul}var Hl,z0;function qP(){if(z0)return Hl;z0=1;var t=pn(),e=Kt(),r=t(e,"Promise");return Hl=r,Hl}var Yl,$0;function pC(){if($0)return Yl;$0=1;var t=pn(),e=Kt(),r=t(e,"Set");return Yl=r,Yl}var Wl,V0;function GP(){if(V0)return Wl;V0=1;var t=pn(),e=Kt(),r=t(e,"WeakMap");return Wl=r,Wl}var Xl,U0;function jn(){if(U0)return Xl;U0=1;var t=FP(),e=Hv(),r=qP(),n=pC(),a=GP(),i=gn(),s=iC(),o="[object Map]",u="[object Object]",l="[object Promise]",f="[object Set]",c="[object WeakMap]",h="[object DataView]",d=s(t),v=s(e),p=s(r),g=s(n),y=s(a),m=i;return(t&&m(new t(new ArrayBuffer(1)))!=h||e&&m(new e)!=o||r&&m(r.resolve())!=l||n&&m(new n)!=f||a&&m(new a)!=c)&&(m=function(b){var E=i(b),x=E==u?b.constructor:void 0,S=x?s(x):"";if(S)switch(S){case d:return h;case v:return o;case p:return l;case g:return f;case y:return c}return E}),Xl=m,Xl}var Kl,H0;function zP(){if(H0)return Kl;H0=1;var t=Object.prototype,e=t.hasOwnProperty;function r(n){var a=n.length,i=new n.constructor(a);return a&&typeof n[0]=="string"&&e.call(n,"index")&&(i.index=n.index,i.input=n.input),i}return Kl=r,Kl}var jl,Y0;function yC(){if(Y0)return jl;Y0=1;var t=Kt(),e=t.Uint8Array;return jl=e,jl}var Zl,W0;function Jv(){if(W0)return Zl;W0=1;var t=yC();function e(r){var n=new r.constructor(r.byteLength);return new t(n).set(new t(r)),n}return Zl=e,Zl}var Ql,X0;function $P(){if(X0)return Ql;X0=1;var t=Jv();function e(r,n){var a=n?t(r.buffer):r.buffer;return new r.constructor(a,r.byteOffset,r.byteLength)}return Ql=e,Ql}var Jl,K0;function VP(){if(K0)return Jl;K0=1;var t=/\w*$/;function e(r){var n=new r.constructor(r.source,t.exec(r));return n.lastIndex=r.lastIndex,n}return Jl=e,Jl}var ef,j0;function UP(){if(j0)return ef;j0=1;var t=Xn(),e=t?t.prototype:void 0,r=e?e.valueOf:void 0;function n(a){return r?Object(r.call(a)):{}}return ef=n,ef}var tf,Z0;function mC(){if(Z0)return tf;Z0=1;var t=Jv();function e(r,n){var a=n?t(r.buffer):r.buffer;return new r.constructor(a,r.byteOffset,r.length)}return tf=e,tf}var rf,Q0;function HP(){if(Q0)return rf;Q0=1;var t=Jv(),e=$P(),r=VP(),n=UP(),a=mC(),i="[object Boolean]",s="[object Date]",o="[object Map]",u="[object Number]",l="[object RegExp]",f="[object Set]",c="[object String]",h="[object Symbol]",d="[object ArrayBuffer]",v="[object DataView]",p="[object Float32Array]",g="[object Float64Array]",y="[object Int8Array]",m="[object Int16Array]",b="[object Int32Array]",E="[object Uint8Array]",x="[object Uint8ClampedArray]",S="[object Uint16Array]",w="[object Uint32Array]";function T(C,A,R){var I=C.constructor;switch(A){case d:return t(C);case i:case s:return new I(+C);case v:return e(C,R);case p:case g:case y:case m:case b:case E:case x:case S:case w:return a(C,R);case o:return new I;case u:case c:return new I(C);case l:return r(C);case f:return new I;case h:return n(C)}}return rf=T,rf}var nf,J0;function bC(){if(J0)return nf;J0=1;var t=Gt(),e=Object.create,r=function(){function n(){}return function(a){if(!t(a))return{};if(e)return e(a);n.prototype=a;var i=new n;return n.prototype=void 0,i}}();return nf=r,nf}var af,eb;function wC(){if(eb)return af;eb=1;var t=bC(),e=Es(),r=ws();function n(a){return typeof a.constructor=="function"&&!r(a)?t(e(a)):{}}return af=n,af}var sf,tb;function YP(){if(tb)return sf;tb=1;var t=jn(),e=nr(),r="[object Map]";function n(a){return e(a)&&t(a)==r}return sf=n,sf}var of,rb;function WP(){if(rb)return of;rb=1;var t=YP(),e=bs(),r=Kv(),n=r&&r.isMap,a=n?e(n):t;return of=a,of}var uf,nb;function XP(){if(nb)return uf;nb=1;var t=jn(),e=nr(),r="[object Set]";function n(a){return e(a)&&t(a)==r}return uf=n,uf}var lf,ab;function KP(){if(ab)return lf;ab=1;var t=XP(),e=bs(),r=Kv(),n=r&&r.isSet,a=n?e(n):t;return lf=a,lf}var ff,ib;function EC(){if(ib)return ff;ib=1;var t=gs(),e=Wv(),r=ys(),n=LP(),a=PP(),i=lC(),s=fC(),o=kP(),u=NP(),l=gC(),f=BP(),c=jn(),h=zP(),d=HP(),v=wC(),p=rt(),g=Kn(),y=WP(),m=Gt(),b=KP(),E=Ur(),x=yn(),S=1,w=2,T=4,C="[object Arguments]",A="[object Array]",R="[object Boolean]",I="[object Date]",D="[object Error]",_="[object Function]",M="[object GeneratorFunction]",k="[object Map]",O="[object Number]",P="[object Object]",q="[object RegExp]",G="[object Set]",F="[object String]",z="[object Symbol]",W="[object WeakMap]",N="[object ArrayBuffer]",B="[object DataView]",$="[object Float32Array]",H="[object Float64Array]",te="[object Int8Array]",K="[object Int16Array]",V="[object Int32Array]",U="[object Uint8Array]",X="[object Uint8ClampedArray]",j="[object Uint16Array]",ne="[object Uint32Array]",ae={};ae[C]=ae[A]=ae[N]=ae[B]=ae[R]=ae[I]=ae[$]=ae[H]=ae[te]=ae[K]=ae[V]=ae[k]=ae[O]=ae[P]=ae[q]=ae[G]=ae[F]=ae[z]=ae[U]=ae[X]=ae[j]=ae[ne]=!0,ae[D]=ae[_]=ae[W]=!1;function Se(se,be,ge,oe,de,fe){var ve,pe=be&S,Ce=be&w,Me=be&T;if(ge&&(ve=de?ge(se,oe,de,fe):ge(se)),ve!==void 0)return ve;if(!m(se))return se;var Pe=p(se);if(Pe){if(ve=h(se),!pe)return s(se,ve)}else{var _e=c(se),ke=_e==_||_e==M;if(g(se))return i(se,pe);if(_e==P||_e==C||ke&&!de){if(ve=Ce||ke?{}:v(se),!pe)return Ce?u(se,a(ve,se)):o(se,n(ve,se))}else{if(!ae[_e])return de?se:{};ve=d(se,_e,pe)}}fe||(fe=new t);var Te=fe.get(se);if(Te)return Te;fe.set(se,ve),b(se)?se.forEach(function(L){ve.add(Se(L,be,ge,L,se,fe))}):y(se)&&se.forEach(function(L,Y){ve.set(Y,Se(L,be,ge,Y,se,fe))});var ue=Me?Ce?f:l:Ce?x:E,J=Pe?void 0:ue(se);return e(J||se,function(L,Y){J&&(Y=L,L=se[Y]),r(ve,Y,Se(L,be,ge,Y,se,fe))}),ve}return ff=Se,ff}var cf,sb;function jP(){if(sb)return cf;sb=1;var t=EC(),e=4;function r(n){return t(n,e)}return cf=r,cf}var hf,ob;function eg(){if(ob)return hf;ob=1;function t(e){return function(){return e}}return hf=t,hf}var df,ub;function ZP(){if(ub)return df;ub=1;function t(e){return function(r,n,a){for(var i=-1,s=Object(r),o=a(r),u=o.length;u--;){var l=o[e?u:++i];if(n(s[l],l,s)===!1)break}return r}}return df=t,df}var vf,lb;function tg(){if(lb)return vf;lb=1;var t=ZP(),e=t();return vf=e,vf}var gf,fb;function rg(){if(fb)return gf;fb=1;var t=tg(),e=Ur();function r(n,a){return n&&t(n,a,e)}return gf=r,gf}var pf,cb;function QP(){if(cb)return pf;cb=1;var t=gr();function e(r,n){return function(a,i){if(a==null)return a;if(!t(a))return r(a,i);for(var s=a.length,o=n?s:-1,u=Object(a);(n?o--:++o<s)&&i(u[o],o,u)!==!1;);return a}}return pf=e,pf}var yf,hb;function xs(){if(hb)return yf;hb=1;var t=rg(),e=QP(),r=e(t);return yf=r,yf}var mf,db;function mn(){if(db)return mf;db=1;function t(e){return e}return mf=t,mf}var bf,vb;function xC(){if(vb)return bf;vb=1;var t=mn();function e(r){return typeof r=="function"?r:t}return bf=e,bf}var wf,gb;function TC(){if(gb)return wf;gb=1;var t=Wv(),e=xs(),r=xC(),n=rt();function a(i,s){var o=n(i)?t:e;return o(i,r(s))}return wf=a,wf}var Ef,pb;function CC(){return pb||(pb=1,Ef=TC()),Ef}var xf,yb;function JP(){if(yb)return xf;yb=1;var t=xs();function e(r,n){var a=[];return t(r,function(i,s,o){n(i,s,o)&&a.push(i)}),a}return xf=e,xf}var Tf,mb;function ek(){if(mb)return Tf;mb=1;var t="__lodash_hash_undefined__";function e(r){return this.__data__.set(r,t),this}return Tf=e,Tf}var Cf,bb;function tk(){if(bb)return Cf;bb=1;function t(e){return this.__data__.has(e)}return Cf=t,Cf}var Sf,wb;function SC(){if(wb)return Sf;wb=1;var t=Yv(),e=ek(),r=tk();function n(a){var i=-1,s=a==null?0:a.length;for(this.__data__=new t;++i<s;)this.add(a[i])}return n.prototype.add=n.prototype.push=e,n.prototype.has=r,Sf=n,Sf}var Af,Eb;function rk(){if(Eb)return Af;Eb=1;function t(e,r){for(var n=-1,a=e==null?0:e.length;++n<a;)if(r(e[n],n,e))return!0;return!1}return Af=t,Af}var Rf,xb;function AC(){if(xb)return Rf;xb=1;function t(e,r){return e.has(r)}return Rf=t,Rf}var If,Tb;function RC(){if(Tb)return If;Tb=1;var t=SC(),e=rk(),r=AC(),n=1,a=2;function i(s,o,u,l,f,c){var h=u&n,d=s.length,v=o.length;if(d!=v&&!(h&&v>d))return!1;var p=c.get(s),g=c.get(o);if(p&&g)return p==o&&g==s;var y=-1,m=!0,b=u&a?new t:void 0;for(c.set(s,o),c.set(o,s);++y<d;){var E=s[y],x=o[y];if(l)var S=h?l(x,E,y,o,s,c):l(E,x,y,s,o,c);if(S!==void 0){if(S)continue;m=!1;break}if(b){if(!e(o,function(w,T){if(!r(b,T)&&(E===w||f(E,w,u,l,c)))return b.push(T)})){m=!1;break}}else if(!(E===x||f(E,x,u,l,c))){m=!1;break}}return c.delete(s),c.delete(o),m}return If=i,If}var Df,Cb;function nk(){if(Cb)return Df;Cb=1;function t(e){var r=-1,n=Array(e.size);return e.forEach(function(a,i){n[++r]=[i,a]}),n}return Df=t,Df}var _f,Sb;function ng(){if(Sb)return _f;Sb=1;function t(e){var r=-1,n=Array(e.size);return e.forEach(function(a){n[++r]=a}),n}return _f=t,_f}var Lf,Ab;function ak(){if(Ab)return Lf;Ab=1;var t=Xn(),e=yC(),r=Wn(),n=RC(),a=nk(),i=ng(),s=1,o=2,u="[object Boolean]",l="[object Date]",f="[object Error]",c="[object Map]",h="[object Number]",d="[object RegExp]",v="[object Set]",p="[object String]",g="[object Symbol]",y="[object ArrayBuffer]",m="[object DataView]",b=t?t.prototype:void 0,E=b?b.valueOf:void 0;function x(S,w,T,C,A,R,I){switch(T){case m:if(S.byteLength!=w.byteLength||S.byteOffset!=w.byteOffset)return!1;S=S.buffer,w=w.buffer;case y:return!(S.byteLength!=w.byteLength||!R(new e(S),new e(w)));case u:case l:case h:return r(+S,+w);case f:return S.name==w.name&&S.message==w.message;case d:case p:return S==w+"";case c:var D=a;case v:var _=C&s;if(D||(D=i),S.size!=w.size&&!_)return!1;var M=I.get(S);if(M)return M==w;C|=o,I.set(S,w);var k=n(D(S),D(w),C,A,R,I);return I.delete(S),k;case g:if(E)return E.call(S)==E.call(w)}return!1}return Lf=x,Lf}var Mf,Rb;function ik(){if(Rb)return Mf;Rb=1;var t=gC(),e=1,r=Object.prototype,n=r.hasOwnProperty;function a(i,s,o,u,l,f){var c=o&e,h=t(i),d=h.length,v=t(s),p=v.length;if(d!=p&&!c)return!1;for(var g=d;g--;){var y=h[g];if(!(c?y in s:n.call(s,y)))return!1}var m=f.get(i),b=f.get(s);if(m&&b)return m==s&&b==i;var E=!0;f.set(i,s),f.set(s,i);for(var x=c;++g<d;){y=h[g];var S=i[y],w=s[y];if(u)var T=c?u(w,S,y,s,i,f):u(S,w,y,i,s,f);if(!(T===void 0?S===w||l(S,w,o,u,f):T)){E=!1;break}x||(x=y=="constructor")}if(E&&!x){var C=i.constructor,A=s.constructor;C!=A&&"constructor"in i&&"constructor"in s&&!(typeof C=="function"&&C instanceof C&&typeof A=="function"&&A instanceof A)&&(E=!1)}return f.delete(i),f.delete(s),E}return Mf=a,Mf}var Of,Ib;function sk(){if(Ib)return Of;Ib=1;var t=gs(),e=RC(),r=ak(),n=ik(),a=jn(),i=rt(),s=Kn(),o=Ya(),u=1,l="[object Arguments]",f="[object Array]",c="[object Object]",h=Object.prototype,d=h.hasOwnProperty;function v(p,g,y,m,b,E){var x=i(p),S=i(g),w=x?f:a(p),T=S?f:a(g);w=w==l?c:w,T=T==l?c:T;var C=w==c,A=T==c,R=w==T;if(R&&s(p)){if(!s(g))return!1;x=!0,C=!1}if(R&&!C)return E||(E=new t),x||o(p)?e(p,g,y,m,b,E):r(p,g,w,y,m,b,E);if(!(y&u)){var I=C&&d.call(p,"__wrapped__"),D=A&&d.call(g,"__wrapped__");if(I||D){var _=I?p.value():p,M=D?g.value():g;return E||(E=new t),b(_,M,y,m,E)}}return R?(E||(E=new t),n(p,g,y,m,b,E)):!1}return Of=v,Of}var Pf,Db;function IC(){if(Db)return Pf;Db=1;var t=sk(),e=nr();function r(n,a,i,s,o){return n===a?!0:n==null||a==null||!e(n)&&!e(a)?n!==n&&a!==a:t(n,a,i,s,r,o)}return Pf=r,Pf}var kf,_b;function ok(){if(_b)return kf;_b=1;var t=gs(),e=IC(),r=1,n=2;function a(i,s,o,u){var l=o.length,f=l,c=!u;if(i==null)return!f;for(i=Object(i);l--;){var h=o[l];if(c&&h[2]?h[1]!==i[h[0]]:!(h[0]in i))return!1}for(;++l<f;){h=o[l];var d=h[0],v=i[d],p=h[1];if(c&&h[2]){if(v===void 0&&!(d in i))return!1}else{var g=new t;if(u)var y=u(v,p,d,i,s,g);if(!(y===void 0?e(p,v,r|n,u,g):y))return!1}}return!0}return kf=a,kf}var Nf,Lb;function DC(){if(Lb)return Nf;Lb=1;var t=Gt();function e(r){return r===r&&!t(r)}return Nf=e,Nf}var Bf,Mb;function uk(){if(Mb)return Bf;Mb=1;var t=DC(),e=Ur();function r(n){for(var a=e(n),i=a.length;i--;){var s=a[i],o=n[s];a[i]=[s,o,t(o)]}return a}return Bf=r,Bf}var Ff,Ob;function _C(){if(Ob)return Ff;Ob=1;function t(e,r){return function(n){return n==null?!1:n[e]===r&&(r!==void 0||e in Object(n))}}return Ff=t,Ff}var qf,Pb;function lk(){if(Pb)return qf;Pb=1;var t=ok(),e=uk(),r=_C();function n(a){var i=e(a);return i.length==1&&i[0][2]?r(i[0][0],i[0][1]):function(s){return s===a||t(s,a,i)}}return qf=n,qf}var Gf,kb;function Zn(){if(kb)return Gf;kb=1;var t=gn(),e=nr(),r="[object Symbol]";function n(a){return typeof a=="symbol"||e(a)&&t(a)==r}return Gf=n,Gf}var zf,Nb;function ag(){if(Nb)return zf;Nb=1;var t=rt(),e=Zn(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function a(i,s){if(t(i))return!1;var o=typeof i;return o=="number"||o=="symbol"||o=="boolean"||i==null||e(i)?!0:n.test(i)||!r.test(i)||s!=null&&i in Object(s)}return zf=a,zf}var $f,Bb;function fk(){if(Bb)return $f;Bb=1;var t=Yv(),e="Expected a function";function r(n,a){if(typeof n!="function"||a!=null&&typeof a!="function")throw new TypeError(e);var i=function(){var s=arguments,o=a?a.apply(this,s):s[0],u=i.cache;if(u.has(o))return u.get(o);var l=n.apply(this,s);return i.cache=u.set(o,l)||u,l};return i.cache=new(r.Cache||t),i}return r.Cache=t,$f=r,$f}var Vf,Fb;function ck(){if(Fb)return Vf;Fb=1;var t=fk(),e=500;function r(n){var a=t(n,function(s){return i.size===e&&i.clear(),s}),i=a.cache;return a}return Vf=r,Vf}var Uf,qb;function hk(){if(qb)return Uf;qb=1;var t=ck(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,r=/\\(\\)?/g,n=t(function(a){var i=[];return a.charCodeAt(0)===46&&i.push(""),a.replace(e,function(s,o,u,l){i.push(u?l.replace(r,"$1"):o||s)}),i});return Uf=n,Uf}var Hf,Gb;function Ts(){if(Gb)return Hf;Gb=1;function t(e,r){for(var n=-1,a=e==null?0:e.length,i=Array(a);++n<a;)i[n]=r(e[n],n,e);return i}return Hf=t,Hf}var Yf,zb;function dk(){if(zb)return Yf;zb=1;var t=Xn(),e=Ts(),r=rt(),n=Zn(),a=t?t.prototype:void 0,i=a?a.toString:void 0;function s(o){if(typeof o=="string")return o;if(r(o))return e(o,s)+"";if(n(o))return i?i.call(o):"";var u=o+"";return u=="0"&&1/o==-1/0?"-0":u}return Yf=s,Yf}var Wf,$b;function LC(){if($b)return Wf;$b=1;var t=dk();function e(r){return r==null?"":t(r)}return Wf=e,Wf}var Xf,Vb;function Cs(){if(Vb)return Xf;Vb=1;var t=rt(),e=ag(),r=hk(),n=LC();function a(i,s){return t(i)?i:e(i,s)?[i]:r(n(i))}return Xf=a,Xf}var Kf,Ub;function Wa(){if(Ub)return Kf;Ub=1;var t=Zn();function e(r){if(typeof r=="string"||t(r))return r;var n=r+"";return n=="0"&&1/r==-1/0?"-0":n}return Kf=e,Kf}var jf,Hb;function Ss(){if(Hb)return jf;Hb=1;var t=Cs(),e=Wa();function r(n,a){a=t(a,n);for(var i=0,s=a.length;n!=null&&i<s;)n=n[e(a[i++])];return i&&i==s?n:void 0}return jf=r,jf}var Zf,Yb;function vk(){if(Yb)return Zf;Yb=1;var t=Ss();function e(r,n,a){var i=r==null?void 0:t(r,n);return i===void 0?a:i}return Zf=e,Zf}var Qf,Wb;function gk(){if(Wb)return Qf;Wb=1;function t(e,r){return e!=null&&r in Object(e)}return Qf=t,Qf}var Jf,Xb;function MC(){if(Xb)return Jf;Xb=1;var t=Cs(),e=Ha(),r=rt(),n=ms(),a=Xv(),i=Wa();function s(o,u,l){u=t(u,o);for(var f=-1,c=u.length,h=!1;++f<c;){var d=i(u[f]);if(!(h=o!=null&&l(o,d)))break;o=o[d]}return h||++f!=c?h:(c=o==null?0:o.length,!!c&&a(c)&&n(d,c)&&(r(o)||e(o)))}return Jf=s,Jf}var ec,Kb;function OC(){if(Kb)return ec;Kb=1;var t=gk(),e=MC();function r(n,a){return n!=null&&e(n,a,t)}return ec=r,ec}var tc,jb;function pk(){if(jb)return tc;jb=1;var t=IC(),e=vk(),r=OC(),n=ag(),a=DC(),i=_C(),s=Wa(),o=1,u=2;function l(f,c){return n(f)&&a(c)?i(s(f),c):function(h){var d=e(h,f);return d===void 0&&d===c?r(h,f):t(c,d,o|u)}}return tc=l,tc}var rc,Zb;function PC(){if(Zb)return rc;Zb=1;function t(e){return function(r){return r==null?void 0:r[e]}}return rc=t,rc}var nc,Qb;function yk(){if(Qb)return nc;Qb=1;var t=Ss();function e(r){return function(n){return t(n,r)}}return nc=e,nc}var ac,Jb;function mk(){if(Jb)return ac;Jb=1;var t=PC(),e=yk(),r=ag(),n=Wa();function a(i){return r(i)?t(n(i)):e(i)}return ac=a,ac}var ic,e1;function pr(){if(e1)return ic;e1=1;var t=lk(),e=pk(),r=mn(),n=rt(),a=mk();function i(s){return typeof s=="function"?s:s==null?r:typeof s=="object"?n(s)?e(s[0],s[1]):t(s):a(s)}return ic=i,ic}var sc,t1;function kC(){if(t1)return sc;t1=1;var t=cC(),e=JP(),r=pr(),n=rt();function a(i,s){var o=n(i)?t:e;return o(i,r(s,3))}return sc=a,sc}var oc,r1;function bk(){if(r1)return oc;r1=1;var t=Object.prototype,e=t.hasOwnProperty;function r(n,a){return n!=null&&e.call(n,a)}return oc=r,oc}var uc,n1;function NC(){if(n1)return uc;n1=1;var t=bk(),e=MC();function r(n,a){return n!=null&&e(n,a,t)}return uc=r,uc}var lc,a1;function wk(){if(a1)return lc;a1=1;var t=jv(),e=jn(),r=Ha(),n=rt(),a=gr(),i=Kn(),s=ws(),o=Ya(),u="[object Map]",l="[object Set]",f=Object.prototype,c=f.hasOwnProperty;function h(d){if(d==null)return!0;if(a(d)&&(n(d)||typeof d=="string"||typeof d.splice=="function"||i(d)||o(d)||r(d)))return!d.length;var v=e(d);if(v==u||v==l)return!d.size;if(s(d))return!t(d).length;for(var p in d)if(c.call(d,p))return!1;return!0}return lc=h,lc}var fc,i1;function BC(){if(i1)return fc;i1=1;function t(e){return e===void 0}return fc=t,fc}var cc,s1;function FC(){if(s1)return cc;s1=1;var t=xs(),e=gr();function r(n,a){var i=-1,s=e(n)?Array(n.length):[];return t(n,function(o,u,l){s[++i]=a(o,u,l)}),s}return cc=r,cc}var hc,o1;function qC(){if(o1)return hc;o1=1;var t=Ts(),e=pr(),r=FC(),n=rt();function a(i,s){var o=n(i)?t:r;return o(i,e(s,3))}return hc=a,hc}var dc,u1;function Ek(){if(u1)return dc;u1=1;function t(e,r,n,a){var i=-1,s=e==null?0:e.length;for(a&&s&&(n=e[++i]);++i<s;)n=r(n,e[i],i,e);return n}return dc=t,dc}var vc,l1;function xk(){if(l1)return vc;l1=1;function t(e,r,n,a,i){return i(e,function(s,o,u){n=a?(a=!1,s):r(n,s,o,u)}),n}return vc=t,vc}var gc,f1;function GC(){if(f1)return gc;f1=1;var t=Ek(),e=xs(),r=pr(),n=xk(),a=rt();function i(s,o,u){var l=a(s)?t:n,f=arguments.length<3;return l(s,r(o,4),u,f,e)}return gc=i,gc}var pc,c1;function Tk(){if(c1)return pc;c1=1;var t=gn(),e=rt(),r=nr(),n="[object String]";function a(i){return typeof i=="string"||!e(i)&&r(i)&&t(i)==n}return pc=a,pc}var yc,h1;function Ck(){if(h1)return yc;h1=1;var t=PC(),e=t("length");return yc=e,yc}var mc,d1;function Sk(){if(d1)return mc;d1=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",a=e+r+n,i="\\ufe0e\\ufe0f",s="\\u200d",o=RegExp("["+s+t+a+i+"]");function u(l){return o.test(l)}return mc=u,mc}var bc,v1;function Ak(){if(v1)return bc;v1=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",a=e+r+n,i="\\ufe0e\\ufe0f",s="["+t+"]",o="["+a+"]",u="\\ud83c[\\udffb-\\udfff]",l="(?:"+o+"|"+u+")",f="[^"+t+"]",c="(?:\\ud83c[\\udde6-\\uddff]){2}",h="[\\ud800-\\udbff][\\udc00-\\udfff]",d="\\u200d",v=l+"?",p="["+i+"]?",g="(?:"+d+"(?:"+[f,c,h].join("|")+")"+p+v+")*",y=p+v+g,m="(?:"+[f+o+"?",o,c,h,s].join("|")+")",b=RegExp(u+"(?="+u+")|"+m+y,"g");function E(x){for(var S=b.lastIndex=0;b.test(x);)++S;return S}return bc=E,bc}var wc,g1;function Rk(){if(g1)return wc;g1=1;var t=Ck(),e=Sk(),r=Ak();function n(a){return e(a)?r(a):t(a)}return wc=n,wc}var Ec,p1;function Ik(){if(p1)return Ec;p1=1;var t=jv(),e=jn(),r=gr(),n=Tk(),a=Rk(),i="[object Map]",s="[object Set]";function o(u){if(u==null)return 0;if(r(u))return n(u)?a(u):u.length;var l=e(u);return l==i||l==s?u.size:t(u).length}return Ec=o,Ec}var xc,y1;function Dk(){if(y1)return xc;y1=1;var t=Wv(),e=bC(),r=rg(),n=pr(),a=Es(),i=rt(),s=Kn(),o=Va(),u=Gt(),l=Ya();function f(c,h,d){var v=i(c),p=v||s(c)||l(c);if(h=n(h,4),d==null){var g=c&&c.constructor;p?d=v?new g:[]:u(c)?d=o(g)?e(a(c)):{}:d={}}return(p?t:r)(c,function(y,m,b){return h(d,y,m,b)}),d}return xc=f,xc}var Tc,m1;function _k(){if(m1)return Tc;m1=1;var t=Xn(),e=Ha(),r=rt(),n=t?t.isConcatSpreadable:void 0;function a(i){return r(i)||e(i)||!!(n&&i&&i[n])}return Tc=a,Tc}var Cc,b1;function ig(){if(b1)return Cc;b1=1;var t=Qv(),e=_k();function r(n,a,i,s,o){var u=-1,l=n.length;for(i||(i=e),o||(o=[]);++u<l;){var f=n[u];a>0&&i(f)?a>1?r(f,a-1,i,s,o):t(o,f):s||(o[o.length]=f)}return o}return Cc=r,Cc}var Sc,w1;function Lk(){if(w1)return Sc;w1=1;function t(e,r,n){switch(n.length){case 0:return e.call(r);case 1:return e.call(r,n[0]);case 2:return e.call(r,n[0],n[1]);case 3:return e.call(r,n[0],n[1],n[2])}return e.apply(r,n)}return Sc=t,Sc}var Ac,E1;function zC(){if(E1)return Ac;E1=1;var t=Lk(),e=Math.max;function r(n,a,i){return a=e(a===void 0?n.length-1:a,0),function(){for(var s=arguments,o=-1,u=e(s.length-a,0),l=Array(u);++o<u;)l[o]=s[a+o];o=-1;for(var f=Array(a+1);++o<a;)f[o]=s[o];return f[a]=i(l),t(n,this,f)}}return Ac=r,Ac}var Rc,x1;function Mk(){if(x1)return Rc;x1=1;var t=eg(),e=sC(),r=mn(),n=e?function(a,i){return e(a,"toString",{configurable:!0,enumerable:!1,value:t(i),writable:!0})}:r;return Rc=n,Rc}var Ic,T1;function Ok(){if(T1)return Ic;T1=1;var t=800,e=16,r=Date.now;function n(a){var i=0,s=0;return function(){var o=r(),u=e-(o-s);if(s=o,u>0){if(++i>=t)return arguments[0]}else i=0;return a.apply(void 0,arguments)}}return Ic=n,Ic}var Dc,C1;function $C(){if(C1)return Dc;C1=1;var t=Mk(),e=Ok(),r=e(t);return Dc=r,Dc}var _c,S1;function As(){if(S1)return _c;S1=1;var t=mn(),e=zC(),r=$C();function n(a,i){return r(e(a,i,t),a+"")}return _c=n,_c}var Lc,A1;function VC(){if(A1)return Lc;A1=1;function t(e,r,n,a){for(var i=e.length,s=n+(a?1:-1);a?s--:++s<i;)if(r(e[s],s,e))return s;return-1}return Lc=t,Lc}var Mc,R1;function Pk(){if(R1)return Mc;R1=1;function t(e){return e!==e}return Mc=t,Mc}var Oc,I1;function kk(){if(I1)return Oc;I1=1;function t(e,r,n){for(var a=n-1,i=e.length;++a<i;)if(e[a]===r)return a;return-1}return Oc=t,Oc}var Pc,D1;function Nk(){if(D1)return Pc;D1=1;var t=VC(),e=Pk(),r=kk();function n(a,i,s){return i===i?r(a,i,s):t(a,e,s)}return Pc=n,Pc}var kc,_1;function Bk(){if(_1)return kc;_1=1;var t=Nk();function e(r,n){var a=r==null?0:r.length;return!!a&&t(r,n,0)>-1}return kc=e,kc}var Nc,L1;function Fk(){if(L1)return Nc;L1=1;function t(e,r,n){for(var a=-1,i=e==null?0:e.length;++a<i;)if(n(r,e[a]))return!0;return!1}return Nc=t,Nc}var Bc,M1;function qk(){if(M1)return Bc;M1=1;function t(){}return Bc=t,Bc}var Fc,O1;function Gk(){if(O1)return Fc;O1=1;var t=pC(),e=qk(),r=ng(),n=1/0,a=t&&1/r(new t([,-0]))[1]==n?function(i){return new t(i)}:e;return Fc=a,Fc}var qc,P1;function zk(){if(P1)return qc;P1=1;var t=SC(),e=Bk(),r=Fk(),n=AC(),a=Gk(),i=ng(),s=200;function o(u,l,f){var c=-1,h=e,d=u.length,v=!0,p=[],g=p;if(f)v=!1,h=r;else if(d>=s){var y=l?null:a(u);if(y)return i(y);v=!1,h=n,g=new t}else g=l?[]:p;e:for(;++c<d;){var m=u[c],b=l?l(m):m;if(m=f||m!==0?m:0,v&&b===b){for(var E=g.length;E--;)if(g[E]===b)continue e;l&&g.push(b),p.push(m)}else h(g,b,f)||(g!==p&&g.push(b),p.push(m))}return p}return qc=o,qc}var Gc,k1;function UC(){if(k1)return Gc;k1=1;var t=gr(),e=nr();function r(n){return e(n)&&t(n)}return Gc=r,Gc}var zc,N1;function $k(){if(N1)return zc;N1=1;var t=ig(),e=As(),r=zk(),n=UC(),a=e(function(i){return r(t(i,1,n,!0))});return zc=a,zc}var $c,B1;function Vk(){if(B1)return $c;B1=1;var t=Ts();function e(r,n){return t(n,function(a){return r[a]})}return $c=e,$c}var Vc,F1;function HC(){if(F1)return Vc;F1=1;var t=Vk(),e=Ur();function r(n){return n==null?[]:t(n,e(n))}return Vc=r,Vc}var Uc,q1;function zt(){if(q1)return Uc;q1=1;var t;if(typeof Uv=="function")try{t={clone:jP(),constant:eg(),each:CC(),filter:kC(),has:NC(),isArray:rt(),isEmpty:wk(),isFunction:Va(),isUndefined:BC(),keys:Ur(),map:qC(),reduce:GC(),size:Ik(),transform:Dk(),union:$k(),values:HC()}}catch{}return t||(t=window._),Uc=t,Uc}var Hc,G1;function sg(){if(G1)return Hc;G1=1;var t=zt();Hc=a;var e="\0",r="\0",n="";function a(f){this._isDirected=t.has(f,"directed")?f.directed:!0,this._isMultigraph=t.has(f,"multigraph")?f.multigraph:!1,this._isCompound=t.has(f,"compound")?f.compound:!1,this._label=void 0,this._defaultNodeLabelFn=t.constant(void 0),this._defaultEdgeLabelFn=t.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[r]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}a.prototype._nodeCount=0,a.prototype._edgeCount=0,a.prototype.isDirected=function(){return this._isDirected},a.prototype.isMultigraph=function(){return this._isMultigraph},a.prototype.isCompound=function(){return this._isCompound},a.prototype.setGraph=function(f){return this._label=f,this},a.prototype.graph=function(){return this._label},a.prototype.setDefaultNodeLabel=function(f){return t.isFunction(f)||(f=t.constant(f)),this._defaultNodeLabelFn=f,this},a.prototype.nodeCount=function(){return this._nodeCount},a.prototype.nodes=function(){return t.keys(this._nodes)},a.prototype.sources=function(){var f=this;return t.filter(this.nodes(),function(c){return t.isEmpty(f._in[c])})},a.prototype.sinks=function(){var f=this;return t.filter(this.nodes(),function(c){return t.isEmpty(f._out[c])})},a.prototype.setNodes=function(f,c){var h=arguments,d=this;return t.each(f,function(v){h.length>1?d.setNode(v,c):d.setNode(v)}),this},a.prototype.setNode=function(f,c){return t.has(this._nodes,f)?(arguments.length>1&&(this._nodes[f]=c),this):(this._nodes[f]=arguments.length>1?c:this._defaultNodeLabelFn(f),this._isCompound&&(this._parent[f]=r,this._children[f]={},this._children[r][f]=!0),this._in[f]={},this._preds[f]={},this._out[f]={},this._sucs[f]={},++this._nodeCount,this)},a.prototype.node=function(f){return this._nodes[f]},a.prototype.hasNode=function(f){return t.has(this._nodes,f)},a.prototype.removeNode=function(f){var c=this;if(t.has(this._nodes,f)){var h=function(d){c.removeEdge(c._edgeObjs[d])};delete this._nodes[f],this._isCompound&&(this._removeFromParentsChildList(f),delete this._parent[f],t.each(this.children(f),function(d){c.setParent(d)}),delete this._children[f]),t.each(t.keys(this._in[f]),h),delete this._in[f],delete this._preds[f],t.each(t.keys(this._out[f]),h),delete this._out[f],delete this._sucs[f],--this._nodeCount}return this},a.prototype.setParent=function(f,c){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(t.isUndefined(c))c=r;else{c+="";for(var h=c;!t.isUndefined(h);h=this.parent(h))if(h===f)throw new Error("Setting "+c+" as parent of "+f+" would create a cycle");this.setNode(c)}return this.setNode(f),this._removeFromParentsChildList(f),this._parent[f]=c,this._children[c][f]=!0,this},a.prototype._removeFromParentsChildList=function(f){delete this._children[this._parent[f]][f]},a.prototype.parent=function(f){if(this._isCompound){var c=this._parent[f];if(c!==r)return c}},a.prototype.children=function(f){if(t.isUndefined(f)&&(f=r),this._isCompound){var c=this._children[f];if(c)return t.keys(c)}else{if(f===r)return this.nodes();if(this.hasNode(f))return[]}},a.prototype.predecessors=function(f){var c=this._preds[f];if(c)return t.keys(c)},a.prototype.successors=function(f){var c=this._sucs[f];if(c)return t.keys(c)},a.prototype.neighbors=function(f){var c=this.predecessors(f);if(c)return t.union(c,this.successors(f))},a.prototype.isLeaf=function(f){var c;return this.isDirected()?c=this.successors(f):c=this.neighbors(f),c.length===0},a.prototype.filterNodes=function(f){var c=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});c.setGraph(this.graph());var h=this;t.each(this._nodes,function(p,g){f(g)&&c.setNode(g,p)}),t.each(this._edgeObjs,function(p){c.hasNode(p.v)&&c.hasNode(p.w)&&c.setEdge(p,h.edge(p))});var d={};function v(p){var g=h.parent(p);return g===void 0||c.hasNode(g)?(d[p]=g,g):g in d?d[g]:v(g)}return this._isCompound&&t.each(c.nodes(),function(p){c.setParent(p,v(p))}),c},a.prototype.setDefaultEdgeLabel=function(f){return t.isFunction(f)||(f=t.constant(f)),this._defaultEdgeLabelFn=f,this},a.prototype.edgeCount=function(){return this._edgeCount},a.prototype.edges=function(){return t.values(this._edgeObjs)},a.prototype.setPath=function(f,c){var h=this,d=arguments;return t.reduce(f,function(v,p){return d.length>1?h.setEdge(v,p,c):h.setEdge(v,p),p}),this},a.prototype.setEdge=function(){var f,c,h,d,v=!1,p=arguments[0];typeof p=="object"&&p!==null&&"v"in p?(f=p.v,c=p.w,h=p.name,arguments.length===2&&(d=arguments[1],v=!0)):(f=p,c=arguments[1],h=arguments[3],arguments.length>2&&(d=arguments[2],v=!0)),f=""+f,c=""+c,t.isUndefined(h)||(h=""+h);var g=o(this._isDirected,f,c,h);if(t.has(this._edgeLabels,g))return v&&(this._edgeLabels[g]=d),this;if(!t.isUndefined(h)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(f),this.setNode(c),this._edgeLabels[g]=v?d:this._defaultEdgeLabelFn(f,c,h);var y=u(this._isDirected,f,c,h);return f=y.v,c=y.w,Object.freeze(y),this._edgeObjs[g]=y,i(this._preds[c],f),i(this._sucs[f],c),this._in[c][g]=y,this._out[f][g]=y,this._edgeCount++,this},a.prototype.edge=function(f,c,h){var d=arguments.length===1?l(this._isDirected,arguments[0]):o(this._isDirected,f,c,h);return this._edgeLabels[d]},a.prototype.hasEdge=function(f,c,h){var d=arguments.length===1?l(this._isDirected,arguments[0]):o(this._isDirected,f,c,h);return t.has(this._edgeLabels,d)},a.prototype.removeEdge=function(f,c,h){var d=arguments.length===1?l(this._isDirected,arguments[0]):o(this._isDirected,f,c,h),v=this._edgeObjs[d];return v&&(f=v.v,c=v.w,delete this._edgeLabels[d],delete this._edgeObjs[d],s(this._preds[c],f),s(this._sucs[f],c),delete this._in[c][d],delete this._out[f][d],this._edgeCount--),this},a.prototype.inEdges=function(f,c){var h=this._in[f];if(h){var d=t.values(h);return c?t.filter(d,function(v){return v.v===c}):d}},a.prototype.outEdges=function(f,c){var h=this._out[f];if(h){var d=t.values(h);return c?t.filter(d,function(v){return v.w===c}):d}},a.prototype.nodeEdges=function(f,c){var h=this.inEdges(f,c);if(h)return h.concat(this.outEdges(f,c))};function i(f,c){f[c]?f[c]++:f[c]=1}function s(f,c){--f[c]||delete f[c]}function o(f,c,h,d){var v=""+c,p=""+h;if(!f&&v>p){var g=v;v=p,p=g}return v+n+p+n+(t.isUndefined(d)?e:d)}function u(f,c,h,d){var v=""+c,p=""+h;if(!f&&v>p){var g=v;v=p,p=g}var y={v,w:p};return d&&(y.name=d),y}function l(f,c){return o(f,c.v,c.w,c.name)}return Hc}var Yc,z1;function Uk(){return z1||(z1=1,Yc="2.1.8"),Yc}var Wc,$1;function Hk(){return $1||($1=1,Wc={Graph:sg(),version:Uk()}),Wc}var Xc,V1;function Yk(){if(V1)return Xc;V1=1;var t=zt(),e=sg();Xc={write:r,read:i};function r(s){var o={options:{directed:s.isDirected(),multigraph:s.isMultigraph(),compound:s.isCompound()},nodes:n(s),edges:a(s)};return t.isUndefined(s.graph())||(o.value=t.clone(s.graph())),o}function n(s){return t.map(s.nodes(),function(o){var u=s.node(o),l=s.parent(o),f={v:o};return t.isUndefined(u)||(f.value=u),t.isUndefined(l)||(f.parent=l),f})}function a(s){return t.map(s.edges(),function(o){var u=s.edge(o),l={v:o.v,w:o.w};return t.isUndefined(o.name)||(l.name=o.name),t.isUndefined(u)||(l.value=u),l})}function i(s){var o=new e(s.options).setGraph(s.value);return t.each(s.nodes,function(u){o.setNode(u.v,u.value),u.parent&&o.setParent(u.v,u.parent)}),t.each(s.edges,function(u){o.setEdge({v:u.v,w:u.w,name:u.name},u.value)}),o}return Xc}var Kc,U1;function Wk(){if(U1)return Kc;U1=1;var t=zt();Kc=e;function e(r){var n={},a=[],i;function s(o){t.has(n,o)||(n[o]=!0,i.push(o),t.each(r.successors(o),s),t.each(r.predecessors(o),s))}return t.each(r.nodes(),function(o){i=[],s(o),i.length&&a.push(i)}),a}return Kc}var jc,H1;function YC(){if(H1)return jc;H1=1;var t=zt();jc=e;function e(){this._arr=[],this._keyIndices={}}return e.prototype.size=function(){return this._arr.length},e.prototype.keys=function(){return this._arr.map(function(r){return r.key})},e.prototype.has=function(r){return t.has(this._keyIndices,r)},e.prototype.priority=function(r){var n=this._keyIndices[r];if(n!==void 0)return this._arr[n].priority},e.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},e.prototype.add=function(r,n){var a=this._keyIndices;if(r=String(r),!t.has(a,r)){var i=this._arr,s=i.length;return a[r]=s,i.push({key:r,priority:n}),this._decrease(s),!0}return!1},e.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var r=this._arr.pop();return delete this._keyIndices[r.key],this._heapify(0),r.key},e.prototype.decrease=function(r,n){var a=this._keyIndices[r];if(n>this._arr[a].priority)throw new Error("New priority is greater than current priority. Key: "+r+" Old: "+this._arr[a].priority+" New: "+n);this._arr[a].priority=n,this._decrease(a)},e.prototype._heapify=function(r){var n=this._arr,a=2*r,i=a+1,s=r;a<n.length&&(s=n[a].priority<n[s].priority?a:s,i<n.length&&(s=n[i].priority<n[s].priority?i:s),s!==r&&(this._swap(r,s),this._heapify(s)))},e.prototype._decrease=function(r){for(var n=this._arr,a=n[r].priority,i;r!==0&&(i=r>>1,!(n[i].priority<a));)this._swap(r,i),r=i},e.prototype._swap=function(r,n){var a=this._arr,i=this._keyIndices,s=a[r],o=a[n];a[r]=o,a[n]=s,i[o.key]=r,i[s.key]=n},jc}var Zc,Y1;function WC(){if(Y1)return Zc;Y1=1;var t=zt(),e=YC();Zc=n;var r=t.constant(1);function n(i,s,o,u){return a(i,String(s),o||r,u||function(l){return i.outEdges(l)})}function a(i,s,o,u){var l={},f=new e,c,h,d=function(v){var p=v.v!==c?v.v:v.w,g=l[p],y=o(v),m=h.distance+y;if(y<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+v+" Weight: "+y);m<g.distance&&(g.distance=m,g.predecessor=c,f.decrease(p,m))};for(i.nodes().forEach(function(v){var p=v===s?0:Number.POSITIVE_INFINITY;l[v]={distance:p},f.add(v,p)});f.size()>0&&(c=f.removeMin(),h=l[c],h.distance!==Number.POSITIVE_INFINITY);)u(c).forEach(d);return l}return Zc}var Qc,W1;function Xk(){if(W1)return Qc;W1=1;var t=WC(),e=zt();Qc=r;function r(n,a,i){return e.transform(n.nodes(),function(s,o){s[o]=t(n,o,a,i)},{})}return Qc}var Jc,X1;function XC(){if(X1)return Jc;X1=1;var t=zt();Jc=e;function e(r){var n=0,a=[],i={},s=[];function o(u){var l=i[u]={onStack:!0,lowlink:n,index:n++};if(a.push(u),r.successors(u).forEach(function(h){t.has(i,h)?i[h].onStack&&(l.lowlink=Math.min(l.lowlink,i[h].index)):(o(h),l.lowlink=Math.min(l.lowlink,i[h].lowlink))}),l.lowlink===l.index){var f=[],c;do c=a.pop(),i[c].onStack=!1,f.push(c);while(u!==c);s.push(f)}}return r.nodes().forEach(function(u){t.has(i,u)||o(u)}),s}return Jc}var eh,K1;function Kk(){if(K1)return eh;K1=1;var t=zt(),e=XC();eh=r;function r(n){return t.filter(e(n),function(a){return a.length>1||a.length===1&&n.hasEdge(a[0],a[0])})}return eh}var th,j1;function jk(){if(j1)return th;j1=1;var t=zt();th=r;var e=t.constant(1);function r(a,i,s){return n(a,i||e,s||function(o){return a.outEdges(o)})}function n(a,i,s){var o={},u=a.nodes();return u.forEach(function(l){o[l]={},o[l][l]={distance:0},u.forEach(function(f){l!==f&&(o[l][f]={distance:Number.POSITIVE_INFINITY})}),s(l).forEach(function(f){var c=f.v===l?f.w:f.v,h=i(f);o[l][c]={distance:h,predecessor:l}})}),u.forEach(function(l){var f=o[l];u.forEach(function(c){var h=o[c];u.forEach(function(d){var v=h[l],p=f[d],g=h[d],y=v.distance+p.distance;y<g.distance&&(g.distance=y,g.predecessor=p.predecessor)})})}),o}return th}var rh,Z1;function KC(){if(Z1)return rh;Z1=1;var t=zt();rh=e,e.CycleException=r;function e(n){var a={},i={},s=[];function o(u){if(t.has(i,u))throw new r;t.has(a,u)||(i[u]=!0,a[u]=!0,t.each(n.predecessors(u),o),delete i[u],s.push(u))}if(t.each(n.sinks(),o),t.size(a)!==n.nodeCount())throw new r;return s}function r(){}return r.prototype=new Error,rh}var nh,Q1;function Zk(){if(Q1)return nh;Q1=1;var t=KC();nh=e;function e(r){try{t(r)}catch(n){if(n instanceof t.CycleException)return!1;throw n}return!0}return nh}var ah,J1;function jC(){if(J1)return ah;J1=1;var t=zt();ah=e;function e(n,a,i){t.isArray(a)||(a=[a]);var s=(n.isDirected()?n.successors:n.neighbors).bind(n),o=[],u={};return t.each(a,function(l){if(!n.hasNode(l))throw new Error("Graph does not have node: "+l);r(n,l,i==="post",u,s,o)}),o}function r(n,a,i,s,o,u){t.has(s,a)||(s[a]=!0,i||u.push(a),t.each(o(a),function(l){r(n,l,i,s,o,u)}),i&&u.push(a))}return ah}var ih,ew;function Qk(){if(ew)return ih;ew=1;var t=jC();ih=e;function e(r,n){return t(r,n,"post")}return ih}var sh,tw;function Jk(){if(tw)return sh;tw=1;var t=jC();sh=e;function e(r,n){return t(r,n,"pre")}return sh}var oh,rw;function eN(){if(rw)return oh;rw=1;var t=zt(),e=sg(),r=YC();oh=n;function n(a,i){var s=new e,o={},u=new r,l;function f(h){var d=h.v===l?h.w:h.v,v=u.priority(d);if(v!==void 0){var p=i(h);p<v&&(o[d]=l,u.decrease(d,p))}}if(a.nodeCount()===0)return s;t.each(a.nodes(),function(h){u.add(h,Number.POSITIVE_INFINITY),s.setNode(h)}),u.decrease(a.nodes()[0],0);for(var c=!1;u.size()>0;){if(l=u.removeMin(),t.has(o,l))s.setEdge(l,o[l]);else{if(c)throw new Error("Input graph is not connected: "+a);c=!0}a.nodeEdges(l).forEach(f)}return s}return oh}var uh,nw;function tN(){return nw||(nw=1,uh={components:Wk(),dijkstra:WC(),dijkstraAll:Xk(),findCycles:Kk(),floydWarshall:jk(),isAcyclic:Zk(),postorder:Qk(),preorder:Jk(),prim:eN(),tarjan:XC(),topsort:KC()}),uh}var lh,aw;function rN(){if(aw)return lh;aw=1;var t=Hk();return lh={Graph:t.Graph,json:Yk(),alg:tN(),version:t.version},lh}var fh,iw;function Xt(){if(iw)return fh;iw=1;var t;if(typeof Uv=="function")try{t=rN()}catch{}return t||(t=window.graphlib),fh=t,fh}var ch,sw;function nN(){if(sw)return ch;sw=1;var t=EC(),e=1,r=4;function n(a){return t(a,e|r)}return ch=n,ch}var hh,ow;function Rs(){if(ow)return hh;ow=1;var t=Wn(),e=gr(),r=ms(),n=Gt();function a(i,s,o){if(!n(o))return!1;var u=typeof s;return(u=="number"?e(o)&&r(s,o.length):u=="string"&&s in o)?t(o[s],i):!1}return hh=a,hh}var dh,uw;function aN(){if(uw)return dh;uw=1;var t=As(),e=Wn(),r=Rs(),n=yn(),a=Object.prototype,i=a.hasOwnProperty,s=t(function(o,u){o=Object(o);var l=-1,f=u.length,c=f>2?u[2]:void 0;for(c&&r(u[0],u[1],c)&&(f=1);++l<f;)for(var h=u[l],d=n(h),v=-1,p=d.length;++v<p;){var g=d[v],y=o[g];(y===void 0||e(y,a[g])&&!i.call(o,g))&&(o[g]=h[g])}return o});return dh=s,dh}var vh,lw;function iN(){if(lw)return vh;lw=1;var t=pr(),e=gr(),r=Ur();function n(a){return function(i,s,o){var u=Object(i);if(!e(i)){var l=t(s,3);i=r(i),s=function(c){return l(u[c],c,u)}}var f=a(i,s,o);return f>-1?u[l?i[f]:f]:void 0}}return vh=n,vh}var gh,fw;function sN(){if(fw)return gh;fw=1;var t=/\s/;function e(r){for(var n=r.length;n--&&t.test(r.charAt(n)););return n}return gh=e,gh}var ph,cw;function oN(){if(cw)return ph;cw=1;var t=sN(),e=/^\s+/;function r(n){return n&&n.slice(0,t(n)+1).replace(e,"")}return ph=r,ph}var yh,hw;function uN(){if(hw)return yh;hw=1;var t=oN(),e=Gt(),r=Zn(),n=NaN,a=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,s=/^0o[0-7]+$/i,o=parseInt;function u(l){if(typeof l=="number")return l;if(r(l))return n;if(e(l)){var f=typeof l.valueOf=="function"?l.valueOf():l;l=e(f)?f+"":f}if(typeof l!="string")return l===0?l:+l;l=t(l);var c=i.test(l);return c||s.test(l)?o(l.slice(2),c?2:8):a.test(l)?n:+l}return yh=u,yh}var mh,dw;function ZC(){if(dw)return mh;dw=1;var t=uN(),e=1/0,r=17976931348623157e292;function n(a){if(!a)return a===0?a:0;if(a=t(a),a===e||a===-e){var i=a<0?-1:1;return i*r}return a===a?a:0}return mh=n,mh}var bh,vw;function lN(){if(vw)return bh;vw=1;var t=ZC();function e(r){var n=t(r),a=n%1;return n===n?a?n-a:n:0}return bh=e,bh}var wh,gw;function fN(){if(gw)return wh;gw=1;var t=VC(),e=pr(),r=lN(),n=Math.max;function a(i,s,o){var u=i==null?0:i.length;if(!u)return-1;var l=o==null?0:r(o);return l<0&&(l=n(u+l,0)),t(i,e(s,3),l)}return wh=a,wh}var Eh,pw;function cN(){if(pw)return Eh;pw=1;var t=iN(),e=fN(),r=t(e);return Eh=r,Eh}var xh,yw;function QC(){if(yw)return xh;yw=1;var t=ig();function e(r){var n=r==null?0:r.length;return n?t(r,1):[]}return xh=e,xh}var Th,mw;function hN(){if(mw)return Th;mw=1;var t=tg(),e=xC(),r=yn();function n(a,i){return a==null?a:t(a,e(i),r)}return Th=n,Th}var Ch,bw;function dN(){if(bw)return Ch;bw=1;function t(e){var r=e==null?0:e.length;return r?e[r-1]:void 0}return Ch=t,Ch}var Sh,ww;function vN(){if(ww)return Sh;ww=1;var t=ps(),e=rg(),r=pr();function n(a,i){var s={};return i=r(i,3),e(a,function(o,u,l){t(s,u,i(o,u,l))}),s}return Sh=n,Sh}var Ah,Ew;function og(){if(Ew)return Ah;Ew=1;var t=Zn();function e(r,n,a){for(var i=-1,s=r.length;++i<s;){var o=r[i],u=n(o);if(u!=null&&(l===void 0?u===u&&!t(u):a(u,l)))var l=u,f=o}return f}return Ah=e,Ah}var Rh,xw;function gN(){if(xw)return Rh;xw=1;function t(e,r){return e>r}return Rh=t,Rh}var Ih,Tw;function pN(){if(Tw)return Ih;Tw=1;var t=og(),e=gN(),r=mn();function n(a){return a&&a.length?t(a,r,e):void 0}return Ih=n,Ih}var Dh,Cw;function JC(){if(Cw)return Dh;Cw=1;var t=ps(),e=Wn();function r(n,a,i){(i!==void 0&&!e(n[a],i)||i===void 0&&!(a in n))&&t(n,a,i)}return Dh=r,Dh}var _h,Sw;function yN(){if(Sw)return _h;Sw=1;var t=gn(),e=Es(),r=nr(),n="[object Object]",a=Function.prototype,i=Object.prototype,s=a.toString,o=i.hasOwnProperty,u=s.call(Object);function l(f){if(!r(f)||t(f)!=n)return!1;var c=e(f);if(c===null)return!0;var h=o.call(c,"constructor")&&c.constructor;return typeof h=="function"&&h instanceof h&&s.call(h)==u}return _h=l,_h}var Lh,Aw;function eS(){if(Aw)return Lh;Aw=1;function t(e,r){if(!(r==="constructor"&&typeof e[r]=="function")&&r!="__proto__")return e[r]}return Lh=t,Lh}var Mh,Rw;function mN(){if(Rw)return Mh;Rw=1;var t=Ua(),e=yn();function r(n){return t(n,e(n))}return Mh=r,Mh}var Oh,Iw;function bN(){if(Iw)return Oh;Iw=1;var t=JC(),e=lC(),r=mC(),n=fC(),a=wC(),i=Ha(),s=rt(),o=UC(),u=Kn(),l=Va(),f=Gt(),c=yN(),h=Ya(),d=eS(),v=mN();function p(g,y,m,b,E,x,S){var w=d(g,m),T=d(y,m),C=S.get(T);if(C){t(g,m,C);return}var A=x?x(w,T,m+"",g,y,S):void 0,R=A===void 0;if(R){var I=s(T),D=!I&&u(T),_=!I&&!D&&h(T);A=T,I||D||_?s(w)?A=w:o(w)?A=n(w):D?(R=!1,A=e(T,!0)):_?(R=!1,A=r(T,!0)):A=[]:c(T)||i(T)?(A=w,i(w)?A=v(w):(!f(w)||l(w))&&(A=a(T))):R=!1}R&&(S.set(T,A),E(A,T,b,x,S),S.delete(T)),t(g,m,A)}return Oh=p,Oh}var Ph,Dw;function wN(){if(Dw)return Ph;Dw=1;var t=gs(),e=JC(),r=tg(),n=bN(),a=Gt(),i=yn(),s=eS();function o(u,l,f,c,h){u!==l&&r(l,function(d,v){if(h||(h=new t),a(d))n(u,l,v,f,o,c,h);else{var p=c?c(s(u,v),d,v+"",u,l,h):void 0;p===void 0&&(p=d),e(u,v,p)}},i)}return Ph=o,Ph}var kh,_w;function EN(){if(_w)return kh;_w=1;var t=As(),e=Rs();function r(n){return t(function(a,i){var s=-1,o=i.length,u=o>1?i[o-1]:void 0,l=o>2?i[2]:void 0;for(u=n.length>3&&typeof u=="function"?(o--,u):void 0,l&&e(i[0],i[1],l)&&(u=o<3?void 0:u,o=1),a=Object(a);++s<o;){var f=i[s];f&&n(a,f,s,u)}return a})}return kh=r,kh}var Nh,Lw;function xN(){if(Lw)return Nh;Lw=1;var t=wN(),e=EN(),r=e(function(n,a,i){t(n,a,i)});return Nh=r,Nh}var Bh,Mw;function tS(){if(Mw)return Bh;Mw=1;function t(e,r){return e<r}return Bh=t,Bh}var Fh,Ow;function TN(){if(Ow)return Fh;Ow=1;var t=og(),e=tS(),r=mn();function n(a){return a&&a.length?t(a,r,e):void 0}return Fh=n,Fh}var qh,Pw;function CN(){if(Pw)return qh;Pw=1;var t=og(),e=pr(),r=tS();function n(a,i){return a&&a.length?t(a,e(i,2),r):void 0}return qh=n,qh}var Gh,kw;function SN(){if(kw)return Gh;kw=1;var t=Kt(),e=function(){return t.Date.now()};return Gh=e,Gh}var zh,Nw;function AN(){if(Nw)return zh;Nw=1;var t=ys(),e=Cs(),r=ms(),n=Gt(),a=Wa();function i(s,o,u,l){if(!n(s))return s;o=e(o,s);for(var f=-1,c=o.length,h=c-1,d=s;d!=null&&++f<c;){var v=a(o[f]),p=u;if(v==="__proto__"||v==="constructor"||v==="prototype")return s;if(f!=h){var g=d[v];p=l?l(g,v,d):void 0,p===void 0&&(p=n(g)?g:r(o[f+1])?[]:{})}t(d,v,p),d=d[v]}return s}return zh=i,zh}var $h,Bw;function RN(){if(Bw)return $h;Bw=1;var t=Ss(),e=AN(),r=Cs();function n(a,i,s){for(var o=-1,u=i.length,l={};++o<u;){var f=i[o],c=t(a,f);s(c,f)&&e(l,r(f,a),c)}return l}return $h=n,$h}var Vh,Fw;function IN(){if(Fw)return Vh;Fw=1;var t=RN(),e=OC();function r(n,a){return t(n,a,function(i,s){return e(n,s)})}return Vh=r,Vh}var Uh,qw;function DN(){if(qw)return Uh;qw=1;var t=QC(),e=zC(),r=$C();function n(a){return r(e(a,void 0,t),a+"")}return Uh=n,Uh}var Hh,Gw;function _N(){if(Gw)return Hh;Gw=1;var t=IN(),e=DN(),r=e(function(n,a){return n==null?{}:t(n,a)});return Hh=r,Hh}var Yh,zw;function LN(){if(zw)return Yh;zw=1;var t=Math.ceil,e=Math.max;function r(n,a,i,s){for(var o=-1,u=e(t((a-n)/(i||1)),0),l=Array(u);u--;)l[s?u:++o]=n,n+=i;return l}return Yh=r,Yh}var Wh,$w;function MN(){if($w)return Wh;$w=1;var t=LN(),e=Rs(),r=ZC();function n(a){return function(i,s,o){return o&&typeof o!="number"&&e(i,s,o)&&(s=o=void 0),i=r(i),s===void 0?(s=i,i=0):s=r(s),o=o===void 0?i<s?1:-1:r(o),t(i,s,o,a)}}return Wh=n,Wh}var Xh,Vw;function ON(){if(Vw)return Xh;Vw=1;var t=MN(),e=t();return Xh=e,Xh}var Kh,Uw;function PN(){if(Uw)return Kh;Uw=1;function t(e,r){var n=e.length;for(e.sort(r);n--;)e[n]=e[n].value;return e}return Kh=t,Kh}var jh,Hw;function kN(){if(Hw)return jh;Hw=1;var t=Zn();function e(r,n){if(r!==n){var a=r!==void 0,i=r===null,s=r===r,o=t(r),u=n!==void 0,l=n===null,f=n===n,c=t(n);if(!l&&!c&&!o&&r>n||o&&u&&f&&!l&&!c||i&&u&&f||!a&&f||!s)return 1;if(!i&&!o&&!c&&r<n||c&&a&&s&&!i&&!o||l&&a&&s||!u&&s||!f)return-1}return 0}return jh=e,jh}var Zh,Yw;function NN(){if(Yw)return Zh;Yw=1;var t=kN();function e(r,n,a){for(var i=-1,s=r.criteria,o=n.criteria,u=s.length,l=a.length;++i<u;){var f=t(s[i],o[i]);if(f){if(i>=l)return f;var c=a[i];return f*(c=="desc"?-1:1)}}return r.index-n.index}return Zh=e,Zh}var Qh,Ww;function BN(){if(Ww)return Qh;Ww=1;var t=Ts(),e=Ss(),r=pr(),n=FC(),a=PN(),i=bs(),s=NN(),o=mn(),u=rt();function l(f,c,h){c.length?c=t(c,function(p){return u(p)?function(g){return e(g,p.length===1?p[0]:p)}:p}):c=[o];var d=-1;c=t(c,i(r));var v=n(f,function(p,g,y){var m=t(c,function(b){return b(p)});return{criteria:m,index:++d,value:p}});return a(v,function(p,g){return s(p,g,h)})}return Qh=l,Qh}var Jh,Xw;function FN(){if(Xw)return Jh;Xw=1;var t=ig(),e=BN(),r=As(),n=Rs(),a=r(function(i,s){if(i==null)return[];var o=s.length;return o>1&&n(i,s[0],s[1])?s=[]:o>2&&n(s[0],s[1],s[2])&&(s=[s[0]]),e(i,t(s,1),[])});return Jh=a,Jh}var ed,Kw;function qN(){if(Kw)return ed;Kw=1;var t=LC(),e=0;function r(n){var a=++e;return t(n)+a}return ed=r,ed}var td,jw;function GN(){if(jw)return td;jw=1;function t(e,r,n){for(var a=-1,i=e.length,s=r.length,o={};++a<i;){var u=a<s?r[a]:void 0;n(o,e[a],u)}return o}return td=t,td}var rd,Zw;function zN(){if(Zw)return rd;Zw=1;var t=ys(),e=GN();function r(n,a){return e(n||[],a||[],t)}return rd=r,rd}var nd,Qw;function Xe(){if(Qw)return nd;Qw=1;var t;if(typeof Uv=="function")try{t={cloneDeep:nN(),constant:eg(),defaults:aN(),each:CC(),filter:kC(),find:cN(),flatten:QC(),forEach:TC(),forIn:hN(),has:NC(),isUndefined:BC(),last:dN(),map:qC(),mapValues:vN(),max:pN(),merge:xN(),min:TN(),minBy:CN(),now:SN(),pick:_N(),range:ON(),reduce:GC(),sortBy:FN(),uniqueId:qN(),values:HC(),zipObject:zN()}}catch{}return t||(t=window._),nd=t,nd}var ad,Jw;function $N(){if(Jw)return ad;Jw=1,ad=t;function t(){var n={};n._next=n._prev=n,this._sentinel=n}t.prototype.dequeue=function(){var n=this._sentinel,a=n._prev;if(a!==n)return e(a),a},t.prototype.enqueue=function(n){var a=this._sentinel;n._prev&&n._next&&e(n),n._next=a._next,a._next._prev=n,a._next=n,n._prev=a},t.prototype.toString=function(){for(var n=[],a=this._sentinel,i=a._prev;i!==a;)n.push(JSON.stringify(i,r)),i=i._prev;return"["+n.join(", ")+"]"};function e(n){n._prev._next=n._next,n._next._prev=n._prev,delete n._next,delete n._prev}function r(n,a){if(n!=="_next"&&n!=="_prev")return a}return ad}var id,eE;function VN(){if(eE)return id;eE=1;var t=Xe(),e=Xt().Graph,r=$N();id=a;var n=t.constant(1);function a(l,f){if(l.nodeCount()<=1)return[];var c=o(l,f||n),h=i(c.graph,c.buckets,c.zeroIdx);return t.flatten(t.map(h,function(d){return l.outEdges(d.v,d.w)}),!0)}function i(l,f,c){for(var h=[],d=f[f.length-1],v=f[0],p;l.nodeCount();){for(;p=v.dequeue();)s(l,f,c,p);for(;p=d.dequeue();)s(l,f,c,p);if(l.nodeCount()){for(var g=f.length-2;g>0;--g)if(p=f[g].dequeue(),p){h=h.concat(s(l,f,c,p,!0));break}}}return h}function s(l,f,c,h,d){var v=d?[]:void 0;return t.forEach(l.inEdges(h.v),function(p){var g=l.edge(p),y=l.node(p.v);d&&v.push({v:p.v,w:p.w}),y.out-=g,u(f,c,y)}),t.forEach(l.outEdges(h.v),function(p){var g=l.edge(p),y=p.w,m=l.node(y);m.in-=g,u(f,c,m)}),l.removeNode(h.v),v}function o(l,f){var c=new e,h=0,d=0;t.forEach(l.nodes(),function(g){c.setNode(g,{v:g,in:0,out:0})}),t.forEach(l.edges(),function(g){var y=c.edge(g.v,g.w)||0,m=f(g),b=y+m;c.setEdge(g.v,g.w,b),d=Math.max(d,c.node(g.v).out+=m),h=Math.max(h,c.node(g.w).in+=m)});var v=t.range(d+h+3).map(function(){return new r}),p=h+1;return t.forEach(c.nodes(),function(g){u(v,p,c.node(g))}),{graph:c,buckets:v,zeroIdx:p}}function u(l,f,c){c.out?c.in?l[c.out-c.in+f].enqueue(c):l[l.length-1].enqueue(c):l[0].enqueue(c)}return id}var sd,tE;function UN(){if(tE)return sd;tE=1;var t=Xe(),e=VN();sd={run:r,undo:a};function r(i){var s=i.graph().acyclicer==="greedy"?e(i,o(i)):n(i);t.forEach(s,function(u){var l=i.edge(u);i.removeEdge(u),l.forwardName=u.name,l.reversed=!0,i.setEdge(u.w,u.v,l,t.uniqueId("rev"))});function o(u){return function(l){return u.edge(l).weight}}}function n(i){var s=[],o={},u={};function l(f){t.has(u,f)||(u[f]=!0,o[f]=!0,t.forEach(i.outEdges(f),function(c){t.has(o,c.w)?s.push(c):l(c.w)}),delete o[f])}return t.forEach(i.nodes(),l),s}function a(i){t.forEach(i.edges(),function(s){var o=i.edge(s);if(o.reversed){i.removeEdge(s);var u=o.forwardName;delete o.reversed,delete o.forwardName,i.setEdge(s.w,s.v,o,u)}})}return sd}var od,rE;function Mt(){if(rE)return od;rE=1;var t=Xe(),e=Xt().Graph;od={addDummyNode:r,simplify:n,asNonCompoundGraph:a,successorWeights:i,predecessorWeights:s,intersectRect:o,buildLayerMatrix:u,normalizeRanks:l,removeEmptyRanks:f,addBorderNode:c,maxRank:h,partition:d,time:v,notime:p};function r(g,y,m,b){var E;do E=t.uniqueId(b);while(g.hasNode(E));return m.dummy=y,g.setNode(E,m),E}function n(g){var y=new e().setGraph(g.graph());return t.forEach(g.nodes(),function(m){y.setNode(m,g.node(m))}),t.forEach(g.edges(),function(m){var b=y.edge(m.v,m.w)||{weight:0,minlen:1},E=g.edge(m);y.setEdge(m.v,m.w,{weight:b.weight+E.weight,minlen:Math.max(b.minlen,E.minlen)})}),y}function a(g){var y=new e({multigraph:g.isMultigraph()}).setGraph(g.graph());return t.forEach(g.nodes(),function(m){g.children(m).length||y.setNode(m,g.node(m))}),t.forEach(g.edges(),function(m){y.setEdge(m,g.edge(m))}),y}function i(g){var y=t.map(g.nodes(),function(m){var b={};return t.forEach(g.outEdges(m),function(E){b[E.w]=(b[E.w]||0)+g.edge(E).weight}),b});return t.zipObject(g.nodes(),y)}function s(g){var y=t.map(g.nodes(),function(m){var b={};return t.forEach(g.inEdges(m),function(E){b[E.v]=(b[E.v]||0)+g.edge(E).weight}),b});return t.zipObject(g.nodes(),y)}function o(g,y){var m=g.x,b=g.y,E=y.x-m,x=y.y-b,S=g.width/2,w=g.height/2;if(!E&&!x)throw new Error("Not possible to find intersection inside of the rectangle");var T,C;return Math.abs(x)*S>Math.abs(E)*w?(x<0&&(w=-w),T=w*E/x,C=w):(E<0&&(S=-S),T=S,C=S*x/E),{x:m+T,y:b+C}}function u(g){var y=t.map(t.range(h(g)+1),function(){return[]});return t.forEach(g.nodes(),function(m){var b=g.node(m),E=b.rank;t.isUndefined(E)||(y[E][b.order]=m)}),y}function l(g){var y=t.min(t.map(g.nodes(),function(m){return g.node(m).rank}));t.forEach(g.nodes(),function(m){var b=g.node(m);t.has(b,"rank")&&(b.rank-=y)})}function f(g){var y=t.min(t.map(g.nodes(),function(x){return g.node(x).rank})),m=[];t.forEach(g.nodes(),function(x){var S=g.node(x).rank-y;m[S]||(m[S]=[]),m[S].push(x)});var b=0,E=g.graph().nodeRankFactor;t.forEach(m,function(x,S){t.isUndefined(x)&&S%E!==0?--b:b&&t.forEach(x,function(w){g.node(w).rank+=b})})}function c(g,y,m,b){var E={width:0,height:0};return arguments.length>=4&&(E.rank=m,E.order=b),r(g,"border",E,y)}function h(g){return t.max(t.map(g.nodes(),function(y){var m=g.node(y).rank;if(!t.isUndefined(m))return m}))}function d(g,y){var m={lhs:[],rhs:[]};return t.forEach(g,function(b){y(b)?m.lhs.push(b):m.rhs.push(b)}),m}function v(g,y){var m=t.now();try{return y()}finally{console.log(g+" time: "+(t.now()-m)+"ms")}}function p(g,y){return y()}return od}var ud,nE;function HN(){if(nE)return ud;nE=1;var t=Xe(),e=Mt();ud={run:r,undo:a};function r(i){i.graph().dummyChains=[],t.forEach(i.edges(),function(s){n(i,s)})}function n(i,s){var o=s.v,u=i.node(o).rank,l=s.w,f=i.node(l).rank,c=s.name,h=i.edge(s),d=h.labelRank;if(f!==u+1){i.removeEdge(s);var v,p,g;for(g=0,++u;u<f;++g,++u)h.points=[],p={width:0,height:0,edgeLabel:h,edgeObj:s,rank:u},v=e.addDummyNode(i,"edge",p,"_d"),u===d&&(p.width=h.width,p.height=h.height,p.dummy="edge-label",p.labelpos=h.labelpos),i.setEdge(o,v,{weight:h.weight},c),g===0&&i.graph().dummyChains.push(v),o=v;i.setEdge(o,l,{weight:h.weight},c)}}function a(i){t.forEach(i.graph().dummyChains,function(s){var o=i.node(s),u=o.edgeLabel,l;for(i.setEdge(o.edgeObj,u);o.dummy;)l=i.successors(s)[0],i.removeNode(s),u.points.push({x:o.x,y:o.y}),o.dummy==="edge-label"&&(u.x=o.x,u.y=o.y,u.width=o.width,u.height=o.height),s=l,o=i.node(s)})}return ud}var ld,aE;function Fi(){if(aE)return ld;aE=1;var t=Xe();ld={longestPath:e,slack:r};function e(n){var a={};function i(s){var o=n.node(s);if(t.has(a,s))return o.rank;a[s]=!0;var u=t.min(t.map(n.outEdges(s),function(l){return i(l.w)-n.edge(l).minlen}));return(u===Number.POSITIVE_INFINITY||u===void 0||u===null)&&(u=0),o.rank=u}t.forEach(n.sources(),i)}function r(n,a){return n.node(a.w).rank-n.node(a.v).rank-n.edge(a).minlen}return ld}var fd,iE;function rS(){if(iE)return fd;iE=1;var t=Xe(),e=Xt().Graph,r=Fi().slack;fd=n;function n(o){var u=new e({directed:!1}),l=o.nodes()[0],f=o.nodeCount();u.setNode(l,{});for(var c,h;a(u,o)<f;)c=i(u,o),h=u.hasNode(c.v)?r(o,c):-r(o,c),s(u,o,h);return u}function a(o,u){function l(f){t.forEach(u.nodeEdges(f),function(c){var h=c.v,d=f===h?c.w:h;!o.hasNode(d)&&!r(u,c)&&(o.setNode(d,{}),o.setEdge(f,d,{}),l(d))})}return t.forEach(o.nodes(),l),o.nodeCount()}function i(o,u){return t.minBy(u.edges(),function(l){if(o.hasNode(l.v)!==o.hasNode(l.w))return r(u,l)})}function s(o,u,l){t.forEach(o.nodes(),function(f){u.node(f).rank+=l})}return fd}var cd,sE;function YN(){if(sE)return cd;sE=1;var t=Xe(),e=rS(),r=Fi().slack,n=Fi().longestPath,a=Xt().alg.preorder,i=Xt().alg.postorder,s=Mt().simplify;cd=o,o.initLowLimValues=c,o.initCutValues=u,o.calcCutValue=f,o.leaveEdge=d,o.enterEdge=v,o.exchangeEdges=p;function o(b){b=s(b),n(b);var E=e(b);c(E),u(E,b);for(var x,S;x=d(E);)S=v(E,b,x),p(E,b,x,S)}function u(b,E){var x=i(b,b.nodes());x=x.slice(0,x.length-1),t.forEach(x,function(S){l(b,E,S)})}function l(b,E,x){var S=b.node(x),w=S.parent;b.edge(x,w).cutvalue=f(b,E,x)}function f(b,E,x){var S=b.node(x),w=S.parent,T=!0,C=E.edge(x,w),A=0;return C||(T=!1,C=E.edge(w,x)),A=C.weight,t.forEach(E.nodeEdges(x),function(R){var I=R.v===x,D=I?R.w:R.v;if(D!==w){var _=I===T,M=E.edge(R).weight;if(A+=_?M:-M,y(b,x,D)){var k=b.edge(x,D).cutvalue;A+=_?-k:k}}}),A}function c(b,E){arguments.length<2&&(E=b.nodes()[0]),h(b,{},1,E)}function h(b,E,x,S,w){var T=x,C=b.node(S);return E[S]=!0,t.forEach(b.neighbors(S),function(A){t.has(E,A)||(x=h(b,E,x,A,S))}),C.low=T,C.lim=x++,w?C.parent=w:delete C.parent,x}function d(b){return t.find(b.edges(),function(E){return b.edge(E).cutvalue<0})}function v(b,E,x){var S=x.v,w=x.w;E.hasEdge(S,w)||(S=x.w,w=x.v);var T=b.node(S),C=b.node(w),A=T,R=!1;T.lim>C.lim&&(A=C,R=!0);var I=t.filter(E.edges(),function(D){return R===m(b,b.node(D.v),A)&&R!==m(b,b.node(D.w),A)});return t.minBy(I,function(D){return r(E,D)})}function p(b,E,x,S){var w=x.v,T=x.w;b.removeEdge(w,T),b.setEdge(S.v,S.w,{}),c(b),u(b,E),g(b,E)}function g(b,E){var x=t.find(b.nodes(),function(w){return!E.node(w).parent}),S=a(b,x);S=S.slice(1),t.forEach(S,function(w){var T=b.node(w).parent,C=E.edge(w,T),A=!1;C||(C=E.edge(T,w),A=!0),E.node(w).rank=E.node(T).rank+(A?C.minlen:-C.minlen)})}function y(b,E,x){return b.hasEdge(E,x)}function m(b,E,x){return x.low<=E.lim&&E.lim<=x.lim}return cd}var hd,oE;function WN(){if(oE)return hd;oE=1;var t=Fi(),e=t.longestPath,r=rS(),n=YN();hd=a;function a(u){switch(u.graph().ranker){case"network-simplex":o(u);break;case"tight-tree":s(u);break;case"longest-path":i(u);break;default:o(u)}}var i=e;function s(u){e(u),r(u)}function o(u){n(u)}return hd}var dd,uE;function XN(){if(uE)return dd;uE=1;var t=Xe();dd=e;function e(a){var i=n(a);t.forEach(a.graph().dummyChains,function(s){for(var o=a.node(s),u=o.edgeObj,l=r(a,i,u.v,u.w),f=l.path,c=l.lca,h=0,d=f[h],v=!0;s!==u.w;){if(o=a.node(s),v){for(;(d=f[h])!==c&&a.node(d).maxRank<o.rank;)h++;d===c&&(v=!1)}if(!v){for(;h<f.length-1&&a.node(d=f[h+1]).minRank<=o.rank;)h++;d=f[h]}a.setParent(s,d),s=a.successors(s)[0]}})}function r(a,i,s,o){var u=[],l=[],f=Math.min(i[s].low,i[o].low),c=Math.max(i[s].lim,i[o].lim),h,d;h=s;do h=a.parent(h),u.push(h);while(h&&(i[h].low>f||c>i[h].lim));for(d=h,h=o;(h=a.parent(h))!==d;)l.push(h);return{path:u.concat(l.reverse()),lca:d}}function n(a){var i={},s=0;function o(u){var l=s;t.forEach(a.children(u),o),i[u]={low:l,lim:s++}}return t.forEach(a.children(),o),i}return dd}var vd,lE;function KN(){if(lE)return vd;lE=1;var t=Xe(),e=Mt();vd={run:r,cleanup:s};function r(o){var u=e.addDummyNode(o,"root",{},"_root"),l=a(o),f=t.max(t.values(l))-1,c=2*f+1;o.graph().nestingRoot=u,t.forEach(o.edges(),function(d){o.edge(d).minlen*=c});var h=i(o)+1;t.forEach(o.children(),function(d){n(o,u,c,h,f,l,d)}),o.graph().nodeRankFactor=c}function n(o,u,l,f,c,h,d){var v=o.children(d);if(!v.length){d!==u&&o.setEdge(u,d,{weight:0,minlen:l});return}var p=e.addBorderNode(o,"_bt"),g=e.addBorderNode(o,"_bb"),y=o.node(d);o.setParent(p,d),y.borderTop=p,o.setParent(g,d),y.borderBottom=g,t.forEach(v,function(m){n(o,u,l,f,c,h,m);var b=o.node(m),E=b.borderTop?b.borderTop:m,x=b.borderBottom?b.borderBottom:m,S=b.borderTop?f:2*f,w=E!==x?1:c-h[d]+1;o.setEdge(p,E,{weight:S,minlen:w,nestingEdge:!0}),o.setEdge(x,g,{weight:S,minlen:w,nestingEdge:!0})}),o.parent(d)||o.setEdge(u,p,{weight:0,minlen:c+h[d]})}function a(o){var u={};function l(f,c){var h=o.children(f);h&&h.length&&t.forEach(h,function(d){l(d,c+1)}),u[f]=c}return t.forEach(o.children(),function(f){l(f,1)}),u}function i(o){return t.reduce(o.edges(),function(u,l){return u+o.edge(l).weight},0)}function s(o){var u=o.graph();o.removeNode(u.nestingRoot),delete u.nestingRoot,t.forEach(o.edges(),function(l){var f=o.edge(l);f.nestingEdge&&o.removeEdge(l)})}return vd}var gd,fE;function jN(){if(fE)return gd;fE=1;var t=Xe(),e=Mt();gd=r;function r(a){function i(s){var o=a.children(s),u=a.node(s);if(o.length&&t.forEach(o,i),t.has(u,"minRank")){u.borderLeft=[],u.borderRight=[];for(var l=u.minRank,f=u.maxRank+1;l<f;++l)n(a,"borderLeft","_bl",s,u,l),n(a,"borderRight","_br",s,u,l)}}t.forEach(a.children(),i)}function n(a,i,s,o,u,l){var f={width:0,height:0,rank:l,borderType:i},c=u[i][l-1],h=e.addDummyNode(a,"border",f,s);u[i][l]=h,a.setParent(h,o),c&&a.setEdge(c,h,{weight:1})}return gd}var pd,cE;function ZN(){if(cE)return pd;cE=1;var t=Xe();pd={adjust:e,undo:r};function e(l){var f=l.graph().rankdir.toLowerCase();(f==="lr"||f==="rl")&&n(l)}function r(l){var f=l.graph().rankdir.toLowerCase();(f==="bt"||f==="rl")&&i(l),(f==="lr"||f==="rl")&&(o(l),n(l))}function n(l){t.forEach(l.nodes(),function(f){a(l.node(f))}),t.forEach(l.edges(),function(f){a(l.edge(f))})}function a(l){var f=l.width;l.width=l.height,l.height=f}function i(l){t.forEach(l.nodes(),function(f){s(l.node(f))}),t.forEach(l.edges(),function(f){var c=l.edge(f);t.forEach(c.points,s),t.has(c,"y")&&s(c)})}function s(l){l.y=-l.y}function o(l){t.forEach(l.nodes(),function(f){u(l.node(f))}),t.forEach(l.edges(),function(f){var c=l.edge(f);t.forEach(c.points,u),t.has(c,"x")&&u(c)})}function u(l){var f=l.x;l.x=l.y,l.y=f}return pd}var yd,hE;function QN(){if(hE)return yd;hE=1;var t=Xe();yd=e;function e(r){var n={},a=t.filter(r.nodes(),function(l){return!r.children(l).length}),i=t.max(t.map(a,function(l){return r.node(l).rank})),s=t.map(t.range(i+1),function(){return[]});function o(l){if(!t.has(n,l)){n[l]=!0;var f=r.node(l);s[f.rank].push(l),t.forEach(r.successors(l),o)}}var u=t.sortBy(a,function(l){return r.node(l).rank});return t.forEach(u,o),s}return yd}var md,dE;function JN(){if(dE)return md;dE=1;var t=Xe();md=e;function e(n,a){for(var i=0,s=1;s<a.length;++s)i+=r(n,a[s-1],a[s]);return i}function r(n,a,i){for(var s=t.zipObject(i,t.map(i,function(h,d){return d})),o=t.flatten(t.map(a,function(h){return t.sortBy(t.map(n.outEdges(h),function(d){return{pos:s[d.w],weight:n.edge(d).weight}}),"pos")}),!0),u=1;u<i.length;)u<<=1;var l=2*u-1;u-=1;var f=t.map(new Array(l),function(){return 0}),c=0;return t.forEach(o.forEach(function(h){var d=h.pos+u;f[d]+=h.weight;for(var v=0;d>0;)d%2&&(v+=f[d+1]),d=d-1>>1,f[d]+=h.weight;c+=h.weight*v})),c}return md}var bd,vE;function eB(){if(vE)return bd;vE=1;var t=Xe();bd=e;function e(r,n){return t.map(n,function(a){var i=r.inEdges(a);if(i.length){var s=t.reduce(i,function(o,u){var l=r.edge(u),f=r.node(u.v);return{sum:o.sum+l.weight*f.order,weight:o.weight+l.weight}},{sum:0,weight:0});return{v:a,barycenter:s.sum/s.weight,weight:s.weight}}else return{v:a}})}return bd}var wd,gE;function tB(){if(gE)return wd;gE=1;var t=Xe();wd=e;function e(a,i){var s={};t.forEach(a,function(u,l){var f=s[u.v]={indegree:0,in:[],out:[],vs:[u.v],i:l};t.isUndefined(u.barycenter)||(f.barycenter=u.barycenter,f.weight=u.weight)}),t.forEach(i.edges(),function(u){var l=s[u.v],f=s[u.w];!t.isUndefined(l)&&!t.isUndefined(f)&&(f.indegree++,l.out.push(s[u.w]))});var o=t.filter(s,function(u){return!u.indegree});return r(o)}function r(a){var i=[];function s(l){return function(f){f.merged||(t.isUndefined(f.barycenter)||t.isUndefined(l.barycenter)||f.barycenter>=l.barycenter)&&n(l,f)}}function o(l){return function(f){f.in.push(l),--f.indegree===0&&a.push(f)}}for(;a.length;){var u=a.pop();i.push(u),t.forEach(u.in.reverse(),s(u)),t.forEach(u.out,o(u))}return t.map(t.filter(i,function(l){return!l.merged}),function(l){return t.pick(l,["vs","i","barycenter","weight"])})}function n(a,i){var s=0,o=0;a.weight&&(s+=a.barycenter*a.weight,o+=a.weight),i.weight&&(s+=i.barycenter*i.weight,o+=i.weight),a.vs=i.vs.concat(a.vs),a.barycenter=s/o,a.weight=o,a.i=Math.min(i.i,a.i),i.merged=!0}return wd}var Ed,pE;function rB(){if(pE)return Ed;pE=1;var t=Xe(),e=Mt();Ed=r;function r(i,s){var o=e.partition(i,function(p){return t.has(p,"barycenter")}),u=o.lhs,l=t.sortBy(o.rhs,function(p){return-p.i}),f=[],c=0,h=0,d=0;u.sort(a(!!s)),d=n(f,l,d),t.forEach(u,function(p){d+=p.vs.length,f.push(p.vs),c+=p.barycenter*p.weight,h+=p.weight,d=n(f,l,d)});var v={vs:t.flatten(f,!0)};return h&&(v.barycenter=c/h,v.weight=h),v}function n(i,s,o){for(var u;s.length&&(u=t.last(s)).i<=o;)s.pop(),i.push(u.vs),o++;return o}function a(i){return function(s,o){return s.barycenter<o.barycenter?-1:s.barycenter>o.barycenter?1:i?o.i-s.i:s.i-o.i}}return Ed}var xd,yE;function nB(){if(yE)return xd;yE=1;var t=Xe(),e=eB(),r=tB(),n=rB();xd=a;function a(o,u,l,f){var c=o.children(u),h=o.node(u),d=h?h.borderLeft:void 0,v=h?h.borderRight:void 0,p={};d&&(c=t.filter(c,function(x){return x!==d&&x!==v}));var g=e(o,c);t.forEach(g,function(x){if(o.children(x.v).length){var S=a(o,x.v,l,f);p[x.v]=S,t.has(S,"barycenter")&&s(x,S)}});var y=r(g,l);i(y,p);var m=n(y,f);if(d&&(m.vs=t.flatten([d,m.vs,v],!0),o.predecessors(d).length)){var b=o.node(o.predecessors(d)[0]),E=o.node(o.predecessors(v)[0]);t.has(m,"barycenter")||(m.barycenter=0,m.weight=0),m.barycenter=(m.barycenter*m.weight+b.order+E.order)/(m.weight+2),m.weight+=2}return m}function i(o,u){t.forEach(o,function(l){l.vs=t.flatten(l.vs.map(function(f){return u[f]?u[f].vs:f}),!0)})}function s(o,u){t.isUndefined(o.barycenter)?(o.barycenter=u.barycenter,o.weight=u.weight):(o.barycenter=(o.barycenter*o.weight+u.barycenter*u.weight)/(o.weight+u.weight),o.weight+=u.weight)}return xd}var Td,mE;function aB(){if(mE)return Td;mE=1;var t=Xe(),e=Xt().Graph;Td=r;function r(a,i,s){var o=n(a),u=new e({compound:!0}).setGraph({root:o}).setDefaultNodeLabel(function(l){return a.node(l)});return t.forEach(a.nodes(),function(l){var f=a.node(l),c=a.parent(l);(f.rank===i||f.minRank<=i&&i<=f.maxRank)&&(u.setNode(l),u.setParent(l,c||o),t.forEach(a[s](l),function(h){var d=h.v===l?h.w:h.v,v=u.edge(d,l),p=t.isUndefined(v)?0:v.weight;u.setEdge(d,l,{weight:a.edge(h).weight+p})}),t.has(f,"minRank")&&u.setNode(l,{borderLeft:f.borderLeft[i],borderRight:f.borderRight[i]}))}),u}function n(a){for(var i;a.hasNode(i=t.uniqueId("_root")););return i}return Td}var Cd,bE;function iB(){if(bE)return Cd;bE=1;var t=Xe();Cd=e;function e(r,n,a){var i={},s;t.forEach(a,function(o){for(var u=r.parent(o),l,f;u;){if(l=r.parent(u),l?(f=i[l],i[l]=u):(f=s,s=u),f&&f!==u){n.setEdge(f,u);return}u=l}})}return Cd}var Sd,wE;function sB(){if(wE)return Sd;wE=1;var t=Xe(),e=QN(),r=JN(),n=nB(),a=aB(),i=iB(),s=Xt().Graph,o=Mt();Sd=u;function u(h){var d=o.maxRank(h),v=l(h,t.range(1,d+1),"inEdges"),p=l(h,t.range(d-1,-1,-1),"outEdges"),g=e(h);c(h,g);for(var y=Number.POSITIVE_INFINITY,m,b=0,E=0;E<4;++b,++E){f(b%2?v:p,b%4>=2),g=o.buildLayerMatrix(h);var x=r(h,g);x<y&&(E=0,m=t.cloneDeep(g),y=x)}c(h,m)}function l(h,d,v){return t.map(d,function(p){return a(h,p,v)})}function f(h,d){var v=new s;t.forEach(h,function(p){var g=p.graph().root,y=n(p,g,v,d);t.forEach(y.vs,function(m,b){p.node(m).order=b}),i(p,v,y.vs)})}function c(h,d){t.forEach(d,function(v){t.forEach(v,function(p,g){h.node(p).order=g})})}return Sd}var Ad,EE;function oB(){if(EE)return Ad;EE=1;var t=Xe(),e=Xt().Graph,r=Mt();Ad={positionX:v,findType1Conflicts:n,findType2Conflicts:a,addConflict:s,hasConflict:o,verticalAlignment:u,horizontalCompaction:l,alignCoordinates:h,findSmallestWidthAlignment:c,balance:d};function n(y,m){var b={};function E(x,S){var w=0,T=0,C=x.length,A=t.last(S);return t.forEach(S,function(R,I){var D=i(y,R),_=D?y.node(D).order:C;(D||R===A)&&(t.forEach(S.slice(T,I+1),function(M){t.forEach(y.predecessors(M),function(k){var O=y.node(k),P=O.order;(P<w||_<P)&&!(O.dummy&&y.node(M).dummy)&&s(b,k,M)})}),T=I+1,w=_)}),S}return t.reduce(m,E),b}function a(y,m){var b={};function E(S,w,T,C,A){var R;t.forEach(t.range(w,T),function(I){R=S[I],y.node(R).dummy&&t.forEach(y.predecessors(R),function(D){var _=y.node(D);_.dummy&&(_.order<C||_.order>A)&&s(b,D,R)})})}function x(S,w){var T=-1,C,A=0;return t.forEach(w,function(R,I){if(y.node(R).dummy==="border"){var D=y.predecessors(R);D.length&&(C=y.node(D[0]).order,E(w,A,I,T,C),A=I,T=C)}E(w,A,w.length,C,S.length)}),w}return t.reduce(m,x),b}function i(y,m){if(y.node(m).dummy)return t.find(y.predecessors(m),function(b){return y.node(b).dummy})}function s(y,m,b){if(m>b){var E=m;m=b,b=E}var x=y[m];x||(y[m]=x={}),x[b]=!0}function o(y,m,b){if(m>b){var E=m;m=b,b=E}return t.has(y[m],b)}function u(y,m,b,E){var x={},S={},w={};return t.forEach(m,function(T){t.forEach(T,function(C,A){x[C]=C,S[C]=C,w[C]=A})}),t.forEach(m,function(T){var C=-1;t.forEach(T,function(A){var R=E(A);if(R.length){R=t.sortBy(R,function(k){return w[k]});for(var I=(R.length-1)/2,D=Math.floor(I),_=Math.ceil(I);D<=_;++D){var M=R[D];S[A]===A&&C<w[M]&&!o(b,A,M)&&(S[M]=A,S[A]=x[A]=x[M],C=w[M])}}})}),{root:x,align:S}}function l(y,m,b,E,x){var S={},w=f(y,m,b,x),T=x?"borderLeft":"borderRight";function C(I,D){for(var _=w.nodes(),M=_.pop(),k={};M;)k[M]?I(M):(k[M]=!0,_.push(M),_=_.concat(D(M))),M=_.pop()}function A(I){S[I]=w.inEdges(I).reduce(function(D,_){return Math.max(D,S[_.v]+w.edge(_))},0)}function R(I){var D=w.outEdges(I).reduce(function(M,k){return Math.min(M,S[k.w]-w.edge(k))},Number.POSITIVE_INFINITY),_=y.node(I);D!==Number.POSITIVE_INFINITY&&_.borderType!==T&&(S[I]=Math.max(S[I],D))}return C(A,w.predecessors.bind(w)),C(R,w.successors.bind(w)),t.forEach(E,function(I){S[I]=S[b[I]]}),S}function f(y,m,b,E){var x=new e,S=y.graph(),w=p(S.nodesep,S.edgesep,E);return t.forEach(m,function(T){var C;t.forEach(T,function(A){var R=b[A];if(x.setNode(R),C){var I=b[C],D=x.edge(I,R);x.setEdge(I,R,Math.max(w(y,A,C),D||0))}C=A})}),x}function c(y,m){return t.minBy(t.values(m),function(b){var E=Number.NEGATIVE_INFINITY,x=Number.POSITIVE_INFINITY;return t.forIn(b,function(S,w){var T=g(y,w)/2;E=Math.max(S+T,E),x=Math.min(S-T,x)}),E-x})}function h(y,m){var b=t.values(m),E=t.min(b),x=t.max(b);t.forEach(["u","d"],function(S){t.forEach(["l","r"],function(w){var T=S+w,C=y[T],A;if(C!==m){var R=t.values(C);A=w==="l"?E-t.min(R):x-t.max(R),A&&(y[T]=t.mapValues(C,function(I){return I+A}))}})})}function d(y,m){return t.mapValues(y.ul,function(b,E){if(m)return y[m.toLowerCase()][E];var x=t.sortBy(t.map(y,E));return(x[1]+x[2])/2})}function v(y){var m=r.buildLayerMatrix(y),b=t.merge(n(y,m),a(y,m)),E={},x;t.forEach(["u","d"],function(w){x=w==="u"?m:t.values(m).reverse(),t.forEach(["l","r"],function(T){T==="r"&&(x=t.map(x,function(I){return t.values(I).reverse()}));var C=(w==="u"?y.predecessors:y.successors).bind(y),A=u(y,x,b,C),R=l(y,x,A.root,A.align,T==="r");T==="r"&&(R=t.mapValues(R,function(I){return-I})),E[w+T]=R})});var S=c(y,E);return h(E,S),d(E,y.graph().align)}function p(y,m,b){return function(E,x,S){var w=E.node(x),T=E.node(S),C=0,A;if(C+=w.width/2,t.has(w,"labelpos"))switch(w.labelpos.toLowerCase()){case"l":A=-w.width/2;break;case"r":A=w.width/2;break}if(A&&(C+=b?A:-A),A=0,C+=(w.dummy?m:y)/2,C+=(T.dummy?m:y)/2,C+=T.width/2,t.has(T,"labelpos"))switch(T.labelpos.toLowerCase()){case"l":A=T.width/2;break;case"r":A=-T.width/2;break}return A&&(C+=b?A:-A),A=0,C}}function g(y,m){return y.node(m).width}return Ad}var Rd,xE;function uB(){if(xE)return Rd;xE=1;var t=Xe(),e=Mt(),r=oB().positionX;Rd=n;function n(i){i=e.asNonCompoundGraph(i),a(i),t.forEach(r(i),function(s,o){i.node(o).x=s})}function a(i){var s=e.buildLayerMatrix(i),o=i.graph().ranksep,u=0;t.forEach(s,function(l){var f=t.max(t.map(l,function(c){return i.node(c).height}));t.forEach(l,function(c){i.node(c).y=u+f/2}),u+=f+o})}return Rd}var Id,TE;function lB(){if(TE)return Id;TE=1;var t=Xe(),e=UN(),r=HN(),n=WN(),a=Mt().normalizeRanks,i=XN(),s=Mt().removeEmptyRanks,o=KN(),u=jN(),l=ZN(),f=sB(),c=uB(),h=Mt(),d=Xt().Graph;Id=v;function v(N,B){var $=B&&B.debugTiming?h.time:h.notime;$("layout",function(){var H=$("  buildLayoutGraph",function(){return C(N)});$("  runLayout",function(){p(H,$)}),$("  updateInputGraph",function(){g(N,H)})})}function p(N,B){B("    makeSpaceForEdgeLabels",function(){A(N)}),B("    removeSelfEdges",function(){q(N)}),B("    acyclic",function(){e.run(N)}),B("    nestingGraph.run",function(){o.run(N)}),B("    rank",function(){n(h.asNonCompoundGraph(N))}),B("    injectEdgeLabelProxies",function(){R(N)}),B("    removeEmptyRanks",function(){s(N)}),B("    nestingGraph.cleanup",function(){o.cleanup(N)}),B("    normalizeRanks",function(){a(N)}),B("    assignRankMinMax",function(){I(N)}),B("    removeEdgeLabelProxies",function(){D(N)}),B("    normalize.run",function(){r.run(N)}),B("    parentDummyChains",function(){i(N)}),B("    addBorderSegments",function(){u(N)}),B("    order",function(){f(N)}),B("    insertSelfEdges",function(){G(N)}),B("    adjustCoordinateSystem",function(){l.adjust(N)}),B("    position",function(){c(N)}),B("    positionSelfEdges",function(){F(N)}),B("    removeBorderNodes",function(){P(N)}),B("    normalize.undo",function(){r.undo(N)}),B("    fixupEdgeLabelCoords",function(){k(N)}),B("    undoCoordinateSystem",function(){l.undo(N)}),B("    translateGraph",function(){_(N)}),B("    assignNodeIntersects",function(){M(N)}),B("    reversePoints",function(){O(N)}),B("    acyclic.undo",function(){e.undo(N)})}function g(N,B){t.forEach(N.nodes(),function($){var H=N.node($),te=B.node($);H&&(H.x=te.x,H.y=te.y,B.children($).length&&(H.width=te.width,H.height=te.height))}),t.forEach(N.edges(),function($){var H=N.edge($),te=B.edge($);H.points=te.points,t.has(te,"x")&&(H.x=te.x,H.y=te.y)}),N.graph().width=B.graph().width,N.graph().height=B.graph().height}var y=["nodesep","edgesep","ranksep","marginx","marginy"],m={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},b=["acyclicer","ranker","rankdir","align"],E=["width","height"],x={width:0,height:0},S=["minlen","weight","width","height","labeloffset"],w={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},T=["labelpos"];function C(N){var B=new d({multigraph:!0,compound:!0}),$=W(N.graph());return B.setGraph(t.merge({},m,z($,y),t.pick($,b))),t.forEach(N.nodes(),function(H){var te=W(N.node(H));B.setNode(H,t.defaults(z(te,E),x)),B.setParent(H,N.parent(H))}),t.forEach(N.edges(),function(H){var te=W(N.edge(H));B.setEdge(H,t.merge({},w,z(te,S),t.pick(te,T)))}),B}function A(N){var B=N.graph();B.ranksep/=2,t.forEach(N.edges(),function($){var H=N.edge($);H.minlen*=2,H.labelpos.toLowerCase()!=="c"&&(B.rankdir==="TB"||B.rankdir==="BT"?H.width+=H.labeloffset:H.height+=H.labeloffset)})}function R(N){t.forEach(N.edges(),function(B){var $=N.edge(B);if($.width&&$.height){var H=N.node(B.v),te=N.node(B.w),K={rank:(te.rank-H.rank)/2+H.rank,e:B};h.addDummyNode(N,"edge-proxy",K,"_ep")}})}function I(N){var B=0;t.forEach(N.nodes(),function($){var H=N.node($);H.borderTop&&(H.minRank=N.node(H.borderTop).rank,H.maxRank=N.node(H.borderBottom).rank,B=t.max(B,H.maxRank))}),N.graph().maxRank=B}function D(N){t.forEach(N.nodes(),function(B){var $=N.node(B);$.dummy==="edge-proxy"&&(N.edge($.e).labelRank=$.rank,N.removeNode(B))})}function _(N){var B=Number.POSITIVE_INFINITY,$=0,H=Number.POSITIVE_INFINITY,te=0,K=N.graph(),V=K.marginx||0,U=K.marginy||0;function X(j){var ne=j.x,ae=j.y,Se=j.width,se=j.height;B=Math.min(B,ne-Se/2),$=Math.max($,ne+Se/2),H=Math.min(H,ae-se/2),te=Math.max(te,ae+se/2)}t.forEach(N.nodes(),function(j){X(N.node(j))}),t.forEach(N.edges(),function(j){var ne=N.edge(j);t.has(ne,"x")&&X(ne)}),B-=V,H-=U,t.forEach(N.nodes(),function(j){var ne=N.node(j);ne.x-=B,ne.y-=H}),t.forEach(N.edges(),function(j){var ne=N.edge(j);t.forEach(ne.points,function(ae){ae.x-=B,ae.y-=H}),t.has(ne,"x")&&(ne.x-=B),t.has(ne,"y")&&(ne.y-=H)}),K.width=$-B+V,K.height=te-H+U}function M(N){t.forEach(N.edges(),function(B){var $=N.edge(B),H=N.node(B.v),te=N.node(B.w),K,V;$.points?(K=$.points[0],V=$.points[$.points.length-1]):($.points=[],K=te,V=H),$.points.unshift(h.intersectRect(H,K)),$.points.push(h.intersectRect(te,V))})}function k(N){t.forEach(N.edges(),function(B){var $=N.edge(B);if(t.has($,"x"))switch(($.labelpos==="l"||$.labelpos==="r")&&($.width-=$.labeloffset),$.labelpos){case"l":$.x-=$.width/2+$.labeloffset;break;case"r":$.x+=$.width/2+$.labeloffset;break}})}function O(N){t.forEach(N.edges(),function(B){var $=N.edge(B);$.reversed&&$.points.reverse()})}function P(N){t.forEach(N.nodes(),function(B){if(N.children(B).length){var $=N.node(B),H=N.node($.borderTop),te=N.node($.borderBottom),K=N.node(t.last($.borderLeft)),V=N.node(t.last($.borderRight));$.width=Math.abs(V.x-K.x),$.height=Math.abs(te.y-H.y),$.x=K.x+$.width/2,$.y=H.y+$.height/2}}),t.forEach(N.nodes(),function(B){N.node(B).dummy==="border"&&N.removeNode(B)})}function q(N){t.forEach(N.edges(),function(B){if(B.v===B.w){var $=N.node(B.v);$.selfEdges||($.selfEdges=[]),$.selfEdges.push({e:B,label:N.edge(B)}),N.removeEdge(B)}})}function G(N){var B=h.buildLayerMatrix(N);t.forEach(B,function($){var H=0;t.forEach($,function(te,K){var V=N.node(te);V.order=K+H,t.forEach(V.selfEdges,function(U){h.addDummyNode(N,"selfedge",{width:U.label.width,height:U.label.height,rank:V.rank,order:K+ ++H,e:U.e,label:U.label},"_se")}),delete V.selfEdges})})}function F(N){t.forEach(N.nodes(),function(B){var $=N.node(B);if($.dummy==="selfedge"){var H=N.node($.e.v),te=H.x+H.width/2,K=H.y,V=$.x-te,U=H.height/2;N.setEdge($.e,$.label),N.removeNode(B),$.label.points=[{x:te+2*V/3,y:K-U},{x:te+5*V/6,y:K-U},{x:te+V,y:K},{x:te+5*V/6,y:K+U},{x:te+2*V/3,y:K+U}],$.label.x=$.x,$.label.y=$.y}})}function z(N,B){return t.mapValues(t.pick(N,B),Number)}function W(N){var B={};return t.forEach(N,function($,H){B[H.toLowerCase()]=$}),B}return Id}var Dd,CE;function fB(){if(CE)return Dd;CE=1;var t=Xe(),e=Mt(),r=Xt().Graph;Dd={debugOrdering:n};function n(a){var i=e.buildLayerMatrix(a),s=new r({compound:!0,multigraph:!0}).setGraph({});return t.forEach(a.nodes(),function(o){s.setNode(o,{label:o}),s.setParent(o,"layer"+a.node(o).rank)}),t.forEach(a.edges(),function(o){s.setEdge(o.v,o.w,{},o.name)}),t.forEach(i,function(o,u){var l="layer"+u;s.setNode(l,{rank:"same"}),t.reduce(o,function(f,c){return s.setEdge(f,c,{style:"invis"}),c})}),s}return Dd}var _d,SE;function cB(){return SE||(SE=1,_d="0.8.5"),_d}var Ld,AE;function nS(){return AE||(AE=1,Ld={graphlib:Xt(),layout:lB(),debug:fB(),util:{time:Mt().time,notime:Mt().notime},version:cB()}),Ld}var hB=nS();const dB=Vv(hB);var aS={exports:{}};(function(t,e){(function(n,a){t.exports=a(nS())})(Sr,function(r){return function(n){var a={};function i(s){if(a[s])return a[s].exports;var o=a[s]={i:s,l:!1,exports:{}};return n[s].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=n,i.c=a,i.d=function(s,o,u){i.o(s,o)||Object.defineProperty(s,o,{enumerable:!0,get:u})},i.r=function(s){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})},i.t=function(s,o){if(o&1&&(s=i(s)),o&8||o&4&&typeof s=="object"&&s&&s.__esModule)return s;var u=Object.create(null);if(i.r(u),Object.defineProperty(u,"default",{enumerable:!0,value:s}),o&2&&typeof s!="string")for(var l in s)i.d(u,l,(function(f){return s[f]}).bind(null,l));return u},i.n=function(s){var o=s&&s.__esModule?function(){return s.default}:function(){return s};return i.d(o,"a",o),o},i.o=function(s,o){return Object.prototype.hasOwnProperty.call(s,o)},i.p="",i(i.s=0)}([function(n,a,i){var s=i(1),o=function(l){l&&l("layout","dagre",s)};typeof cytoscape<"u"&&o(cytoscape),n.exports=o},function(n,a,i){function s(h){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?s=function(v){return typeof v}:s=function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v},s(h)}var o=function(d){return typeof d=="function"},u=i(2),l=i(3),f=i(4);function c(h){this.options=l({},u,h)}c.prototype.run=function(){var h=this.options,d=this,v=h.cy,p=h.eles,g=function(F,z){return o(z)?z.apply(F,[F]):z},y=h.boundingBox||{x1:0,y1:0,w:v.width(),h:v.height()};y.x2===void 0&&(y.x2=y.x1+y.w),y.w===void 0&&(y.w=y.x2-y.x1),y.y2===void 0&&(y.y2=y.y1+y.h),y.h===void 0&&(y.h=y.y2-y.y1);var m=new f.graphlib.Graph({multigraph:!0,compound:!0}),b={},E=function(F,z){z!=null&&(b[F]=z)};E("nodesep",h.nodeSep),E("edgesep",h.edgeSep),E("ranksep",h.rankSep),E("rankdir",h.rankDir),E("align",h.align),E("ranker",h.ranker),E("acyclicer",h.acyclicer),m.setGraph(b),m.setDefaultEdgeLabel(function(){return{}}),m.setDefaultNodeLabel(function(){return{}});var x=p.nodes();o(h.sort)&&(x=x.sort(h.sort));for(var S=0;S<x.length;S++){var w=x[S],T=w.layoutDimensions(h);m.setNode(w.id(),{width:T.w,height:T.h,name:w.id()})}for(var C=0;C<x.length;C++){var A=x[C];A.isChild()&&m.setParent(A.id(),A.parent().id())}var R=p.edges().stdFilter(function(G){return!G.source().isParent()&&!G.target().isParent()});o(h.sort)&&(R=R.sort(h.sort));for(var I=0;I<R.length;I++){var D=R[I];m.setEdge(D.source().id(),D.target().id(),{minlen:g(D,h.minLen),weight:g(D,h.edgeWeight),name:D.id()},D.id())}f.layout(m);for(var _=m.nodes(),M=0;M<_.length;M++){var k=_[M],O=m.node(k);v.getElementById(k).scratch().dagre=O}var P;h.boundingBox?(P={x1:1/0,x2:-1/0,y1:1/0,y2:-1/0},x.forEach(function(G){var F=G.scratch().dagre;P.x1=Math.min(P.x1,F.x),P.x2=Math.max(P.x2,F.x),P.y1=Math.min(P.y1,F.y),P.y2=Math.max(P.y2,F.y)}),P.w=P.x2-P.x1,P.h=P.y2-P.y1):P=y;var q=function(F){if(h.boundingBox){var z=P.w===0?0:(F.x-P.x1)/P.w,W=P.h===0?0:(F.y-P.y1)/P.h;return{x:y.x1+z*y.w,y:y.y1+W*y.h}}else return F};return x.layoutPositions(d,h,function(G){G=s(G)==="object"?G:this;var F=G.scratch().dagre;return q({x:F.x,y:F.y})}),this},n.exports=c},function(n,a){var i={nodeSep:void 0,edgeSep:void 0,rankSep:void 0,rankDir:void 0,align:void 0,acyclicer:void 0,ranker:void 0,minLen:function(o){return 1},edgeWeight:function(o){return 1},fit:!0,padding:30,spacingFactor:void 0,nodeDimensionsIncludeLabels:!1,animate:!1,animateFilter:function(o,u){return!0},animationDuration:500,animationEasing:void 0,boundingBox:void 0,transform:function(o,u){return u},ready:function(){},sort:void 0,stop:function(){}};n.exports=i},function(n,a){n.exports=Object.assign!=null?Object.assign.bind(Object):function(i){for(var s=arguments.length,o=new Array(s>1?s-1:0),u=1;u<s;u++)o[u-1]=arguments[u];return o.forEach(function(l){Object.keys(l).forEach(function(f){return i[f]=l[f]})}),i}},function(n,a){n.exports=r}])})})(aS);var vB=aS.exports;const gB=Vv(vB);var iS={exports:{}},Md={exports:{}},Od={exports:{}},RE;function pB(){return RE||(RE=1,function(t,e){(function(n,a){t.exports=a()})(Sr,function(){return function(r){var n={};function a(i){if(n[i])return n[i].exports;var s=n[i]={i,l:!1,exports:{}};return r[i].call(s.exports,s,s.exports,a),s.l=!0,s.exports}return a.m=r,a.c=n,a.i=function(i){return i},a.d=function(i,s,o){a.o(i,s)||Object.defineProperty(i,s,{configurable:!1,enumerable:!0,get:o})},a.n=function(i){var s=i&&i.__esModule?function(){return i.default}:function(){return i};return a.d(s,"a",s),s},a.o=function(i,s){return Object.prototype.hasOwnProperty.call(i,s)},a.p="",a(a.s=26)}([function(r,n,a){function i(){}i.QUALITY=1,i.DEFAULT_CREATE_BENDS_AS_NEEDED=!1,i.DEFAULT_INCREMENTAL=!1,i.DEFAULT_ANIMATION_ON_LAYOUT=!0,i.DEFAULT_ANIMATION_DURING_LAYOUT=!1,i.DEFAULT_ANIMATION_PERIOD=50,i.DEFAULT_UNIFORM_LEAF_NODE_SIZES=!1,i.DEFAULT_GRAPH_MARGIN=15,i.NODE_DIMENSIONS_INCLUDE_LABELS=!1,i.SIMPLE_NODE_SIZE=40,i.SIMPLE_NODE_HALF_SIZE=i.SIMPLE_NODE_SIZE/2,i.EMPTY_COMPOUND_NODE_SIZE=40,i.MIN_EDGE_LENGTH=1,i.WORLD_BOUNDARY=1e6,i.INITIAL_WORLD_BOUNDARY=i.WORLD_BOUNDARY/1e3,i.WORLD_CENTER_X=1200,i.WORLD_CENTER_Y=900,r.exports=i},function(r,n,a){var i=a(2),s=a(8),o=a(9);function u(f,c,h){i.call(this,h),this.isOverlapingSourceAndTarget=!1,this.vGraphObject=h,this.bendpoints=[],this.source=f,this.target=c}u.prototype=Object.create(i.prototype);for(var l in i)u[l]=i[l];u.prototype.getSource=function(){return this.source},u.prototype.getTarget=function(){return this.target},u.prototype.isInterGraph=function(){return this.isInterGraph},u.prototype.getLength=function(){return this.length},u.prototype.isOverlapingSourceAndTarget=function(){return this.isOverlapingSourceAndTarget},u.prototype.getBendpoints=function(){return this.bendpoints},u.prototype.getLca=function(){return this.lca},u.prototype.getSourceInLca=function(){return this.sourceInLca},u.prototype.getTargetInLca=function(){return this.targetInLca},u.prototype.getOtherEnd=function(f){if(this.source===f)return this.target;if(this.target===f)return this.source;throw"Node is not incident with this edge"},u.prototype.getOtherEndInGraph=function(f,c){for(var h=this.getOtherEnd(f),d=c.getGraphManager().getRoot();;){if(h.getOwner()==c)return h;if(h.getOwner()==d)break;h=h.getOwner().getParent()}return null},u.prototype.updateLength=function(){var f=new Array(4);this.isOverlapingSourceAndTarget=s.getIntersection(this.target.getRect(),this.source.getRect(),f),this.isOverlapingSourceAndTarget||(this.lengthX=f[0]-f[2],this.lengthY=f[1]-f[3],Math.abs(this.lengthX)<1&&(this.lengthX=o.sign(this.lengthX)),Math.abs(this.lengthY)<1&&(this.lengthY=o.sign(this.lengthY)),this.length=Math.sqrt(this.lengthX*this.lengthX+this.lengthY*this.lengthY))},u.prototype.updateLengthSimple=function(){this.lengthX=this.target.getCenterX()-this.source.getCenterX(),this.lengthY=this.target.getCenterY()-this.source.getCenterY(),Math.abs(this.lengthX)<1&&(this.lengthX=o.sign(this.lengthX)),Math.abs(this.lengthY)<1&&(this.lengthY=o.sign(this.lengthY)),this.length=Math.sqrt(this.lengthX*this.lengthX+this.lengthY*this.lengthY)},r.exports=u},function(r,n,a){function i(s){this.vGraphObject=s}r.exports=i},function(r,n,a){var i=a(2),s=a(10),o=a(13),u=a(0),l=a(16),f=a(4);function c(d,v,p,g){p==null&&g==null&&(g=v),i.call(this,g),d.graphManager!=null&&(d=d.graphManager),this.estimatedSize=s.MIN_VALUE,this.inclusionTreeDepth=s.MAX_VALUE,this.vGraphObject=g,this.edges=[],this.graphManager=d,p!=null&&v!=null?this.rect=new o(v.x,v.y,p.width,p.height):this.rect=new o}c.prototype=Object.create(i.prototype);for(var h in i)c[h]=i[h];c.prototype.getEdges=function(){return this.edges},c.prototype.getChild=function(){return this.child},c.prototype.getOwner=function(){return this.owner},c.prototype.getWidth=function(){return this.rect.width},c.prototype.setWidth=function(d){this.rect.width=d},c.prototype.getHeight=function(){return this.rect.height},c.prototype.setHeight=function(d){this.rect.height=d},c.prototype.getCenterX=function(){return this.rect.x+this.rect.width/2},c.prototype.getCenterY=function(){return this.rect.y+this.rect.height/2},c.prototype.getCenter=function(){return new f(this.rect.x+this.rect.width/2,this.rect.y+this.rect.height/2)},c.prototype.getLocation=function(){return new f(this.rect.x,this.rect.y)},c.prototype.getRect=function(){return this.rect},c.prototype.getDiagonal=function(){return Math.sqrt(this.rect.width*this.rect.width+this.rect.height*this.rect.height)},c.prototype.getHalfTheDiagonal=function(){return Math.sqrt(this.rect.height*this.rect.height+this.rect.width*this.rect.width)/2},c.prototype.setRect=function(d,v){this.rect.x=d.x,this.rect.y=d.y,this.rect.width=v.width,this.rect.height=v.height},c.prototype.setCenter=function(d,v){this.rect.x=d-this.rect.width/2,this.rect.y=v-this.rect.height/2},c.prototype.setLocation=function(d,v){this.rect.x=d,this.rect.y=v},c.prototype.moveBy=function(d,v){this.rect.x+=d,this.rect.y+=v},c.prototype.getEdgeListToNode=function(d){var v=[],p=this;return p.edges.forEach(function(g){if(g.target==d){if(g.source!=p)throw"Incorrect edge source!";v.push(g)}}),v},c.prototype.getEdgesBetween=function(d){var v=[],p=this;return p.edges.forEach(function(g){if(!(g.source==p||g.target==p))throw"Incorrect edge source and/or target";(g.target==d||g.source==d)&&v.push(g)}),v},c.prototype.getNeighborsList=function(){var d=new Set,v=this;return v.edges.forEach(function(p){if(p.source==v)d.add(p.target);else{if(p.target!=v)throw"Incorrect incidency!";d.add(p.source)}}),d},c.prototype.withChildren=function(){var d=new Set,v,p;if(d.add(this),this.child!=null)for(var g=this.child.getNodes(),y=0;y<g.length;y++)v=g[y],p=v.withChildren(),p.forEach(function(m){d.add(m)});return d},c.prototype.getNoOfChildren=function(){var d=0,v;if(this.child==null)d=1;else for(var p=this.child.getNodes(),g=0;g<p.length;g++)v=p[g],d+=v.getNoOfChildren();return d==0&&(d=1),d},c.prototype.getEstimatedSize=function(){if(this.estimatedSize==s.MIN_VALUE)throw"assert failed";return this.estimatedSize},c.prototype.calcEstimatedSize=function(){return this.child==null?this.estimatedSize=(this.rect.width+this.rect.height)/2:(this.estimatedSize=this.child.calcEstimatedSize(),this.rect.width=this.estimatedSize,this.rect.height=this.estimatedSize,this.estimatedSize)},c.prototype.scatter=function(){var d,v,p=-u.INITIAL_WORLD_BOUNDARY,g=u.INITIAL_WORLD_BOUNDARY;d=u.WORLD_CENTER_X+l.nextDouble()*(g-p)+p;var y=-u.INITIAL_WORLD_BOUNDARY,m=u.INITIAL_WORLD_BOUNDARY;v=u.WORLD_CENTER_Y+l.nextDouble()*(m-y)+y,this.rect.x=d,this.rect.y=v},c.prototype.updateBounds=function(){if(this.getChild()==null)throw"assert failed";if(this.getChild().getNodes().length!=0){var d=this.getChild();if(d.updateBounds(!0),this.rect.x=d.getLeft(),this.rect.y=d.getTop(),this.setWidth(d.getRight()-d.getLeft()),this.setHeight(d.getBottom()-d.getTop()),u.NODE_DIMENSIONS_INCLUDE_LABELS){var v=d.getRight()-d.getLeft(),p=d.getBottom()-d.getTop();this.labelWidth>v&&(this.rect.x-=(this.labelWidth-v)/2,this.setWidth(this.labelWidth)),this.labelHeight>p&&(this.labelPos=="center"?this.rect.y-=(this.labelHeight-p)/2:this.labelPos=="top"&&(this.rect.y-=this.labelHeight-p),this.setHeight(this.labelHeight))}}},c.prototype.getInclusionTreeDepth=function(){if(this.inclusionTreeDepth==s.MAX_VALUE)throw"assert failed";return this.inclusionTreeDepth},c.prototype.transform=function(d){var v=this.rect.x;v>u.WORLD_BOUNDARY?v=u.WORLD_BOUNDARY:v<-u.WORLD_BOUNDARY&&(v=-u.WORLD_BOUNDARY);var p=this.rect.y;p>u.WORLD_BOUNDARY?p=u.WORLD_BOUNDARY:p<-u.WORLD_BOUNDARY&&(p=-u.WORLD_BOUNDARY);var g=new f(v,p),y=d.inverseTransformPoint(g);this.setLocation(y.x,y.y)},c.prototype.getLeft=function(){return this.rect.x},c.prototype.getRight=function(){return this.rect.x+this.rect.width},c.prototype.getTop=function(){return this.rect.y},c.prototype.getBottom=function(){return this.rect.y+this.rect.height},c.prototype.getParent=function(){return this.owner==null?null:this.owner.getParent()},r.exports=c},function(r,n,a){function i(s,o){s==null&&o==null?(this.x=0,this.y=0):(this.x=s,this.y=o)}i.prototype.getX=function(){return this.x},i.prototype.getY=function(){return this.y},i.prototype.setX=function(s){this.x=s},i.prototype.setY=function(s){this.y=s},i.prototype.getDifference=function(s){return new DimensionD(this.x-s.x,this.y-s.y)},i.prototype.getCopy=function(){return new i(this.x,this.y)},i.prototype.translate=function(s){return this.x+=s.width,this.y+=s.height,this},r.exports=i},function(r,n,a){var i=a(2),s=a(10),o=a(0),u=a(6),l=a(3),f=a(1),c=a(13),h=a(12),d=a(11);function v(g,y,m){i.call(this,m),this.estimatedSize=s.MIN_VALUE,this.margin=o.DEFAULT_GRAPH_MARGIN,this.edges=[],this.nodes=[],this.isConnected=!1,this.parent=g,y!=null&&y instanceof u?this.graphManager=y:y!=null&&y instanceof Layout&&(this.graphManager=y.graphManager)}v.prototype=Object.create(i.prototype);for(var p in i)v[p]=i[p];v.prototype.getNodes=function(){return this.nodes},v.prototype.getEdges=function(){return this.edges},v.prototype.getGraphManager=function(){return this.graphManager},v.prototype.getParent=function(){return this.parent},v.prototype.getLeft=function(){return this.left},v.prototype.getRight=function(){return this.right},v.prototype.getTop=function(){return this.top},v.prototype.getBottom=function(){return this.bottom},v.prototype.isConnected=function(){return this.isConnected},v.prototype.add=function(g,y,m){if(y==null&&m==null){var b=g;if(this.graphManager==null)throw"Graph has no graph mgr!";if(this.getNodes().indexOf(b)>-1)throw"Node already in graph!";return b.owner=this,this.getNodes().push(b),b}else{var E=g;if(!(this.getNodes().indexOf(y)>-1&&this.getNodes().indexOf(m)>-1))throw"Source or target not in graph!";if(!(y.owner==m.owner&&y.owner==this))throw"Both owners must be this graph!";return y.owner!=m.owner?null:(E.source=y,E.target=m,E.isInterGraph=!1,this.getEdges().push(E),y.edges.push(E),m!=y&&m.edges.push(E),E)}},v.prototype.remove=function(g){var y=g;if(g instanceof l){if(y==null)throw"Node is null!";if(!(y.owner!=null&&y.owner==this))throw"Owner graph is invalid!";if(this.graphManager==null)throw"Owner graph manager is invalid!";for(var m=y.edges.slice(),b,E=m.length,x=0;x<E;x++)b=m[x],b.isInterGraph?this.graphManager.remove(b):b.source.owner.remove(b);var S=this.nodes.indexOf(y);if(S==-1)throw"Node not in owner node list!";this.nodes.splice(S,1)}else if(g instanceof f){var b=g;if(b==null)throw"Edge is null!";if(!(b.source!=null&&b.target!=null))throw"Source and/or target is null!";if(!(b.source.owner!=null&&b.target.owner!=null&&b.source.owner==this&&b.target.owner==this))throw"Source and/or target owner is invalid!";var w=b.source.edges.indexOf(b),T=b.target.edges.indexOf(b);if(!(w>-1&&T>-1))throw"Source and/or target doesn't know this edge!";b.source.edges.splice(w,1),b.target!=b.source&&b.target.edges.splice(T,1);var S=b.source.owner.getEdges().indexOf(b);if(S==-1)throw"Not in owner's edge list!";b.source.owner.getEdges().splice(S,1)}},v.prototype.updateLeftTop=function(){for(var g=s.MAX_VALUE,y=s.MAX_VALUE,m,b,E,x=this.getNodes(),S=x.length,w=0;w<S;w++){var T=x[w];m=T.getTop(),b=T.getLeft(),g>m&&(g=m),y>b&&(y=b)}return g==s.MAX_VALUE?null:(x[0].getParent().paddingLeft!=null?E=x[0].getParent().paddingLeft:E=this.margin,this.left=y-E,this.top=g-E,new h(this.left,this.top))},v.prototype.updateBounds=function(g){for(var y=s.MAX_VALUE,m=-s.MAX_VALUE,b=s.MAX_VALUE,E=-s.MAX_VALUE,x,S,w,T,C,A=this.nodes,R=A.length,I=0;I<R;I++){var D=A[I];g&&D.child!=null&&D.updateBounds(),x=D.getLeft(),S=D.getRight(),w=D.getTop(),T=D.getBottom(),y>x&&(y=x),m<S&&(m=S),b>w&&(b=w),E<T&&(E=T)}var _=new c(y,b,m-y,E-b);y==s.MAX_VALUE&&(this.left=this.parent.getLeft(),this.right=this.parent.getRight(),this.top=this.parent.getTop(),this.bottom=this.parent.getBottom()),A[0].getParent().paddingLeft!=null?C=A[0].getParent().paddingLeft:C=this.margin,this.left=_.x-C,this.right=_.x+_.width+C,this.top=_.y-C,this.bottom=_.y+_.height+C},v.calculateBounds=function(g){for(var y=s.MAX_VALUE,m=-s.MAX_VALUE,b=s.MAX_VALUE,E=-s.MAX_VALUE,x,S,w,T,C=g.length,A=0;A<C;A++){var R=g[A];x=R.getLeft(),S=R.getRight(),w=R.getTop(),T=R.getBottom(),y>x&&(y=x),m<S&&(m=S),b>w&&(b=w),E<T&&(E=T)}var I=new c(y,b,m-y,E-b);return I},v.prototype.getInclusionTreeDepth=function(){return this==this.graphManager.getRoot()?1:this.parent.getInclusionTreeDepth()},v.prototype.getEstimatedSize=function(){if(this.estimatedSize==s.MIN_VALUE)throw"assert failed";return this.estimatedSize},v.prototype.calcEstimatedSize=function(){for(var g=0,y=this.nodes,m=y.length,b=0;b<m;b++){var E=y[b];g+=E.calcEstimatedSize()}return g==0?this.estimatedSize=o.EMPTY_COMPOUND_NODE_SIZE:this.estimatedSize=g/Math.sqrt(this.nodes.length),this.estimatedSize},v.prototype.updateConnected=function(){var g=this;if(this.nodes.length==0){this.isConnected=!0;return}var y=new d,m=new Set,b=this.nodes[0],E,x,S=b.withChildren();for(S.forEach(function(I){y.push(I),m.add(I)});y.length!==0;){b=y.shift(),E=b.getEdges();for(var w=E.length,T=0;T<w;T++){var C=E[T];if(x=C.getOtherEndInGraph(b,this),x!=null&&!m.has(x)){var A=x.withChildren();A.forEach(function(I){y.push(I),m.add(I)})}}}if(this.isConnected=!1,m.size>=this.nodes.length){var R=0;m.forEach(function(I){I.owner==g&&R++}),R==this.nodes.length&&(this.isConnected=!0)}},r.exports=v},function(r,n,a){var i,s=a(1);function o(u){i=a(5),this.layout=u,this.graphs=[],this.edges=[]}o.prototype.addRoot=function(){var u=this.layout.newGraph(),l=this.layout.newNode(null),f=this.add(u,l);return this.setRootGraph(f),this.rootGraph},o.prototype.add=function(u,l,f,c,h){if(f==null&&c==null&&h==null){if(u==null)throw"Graph is null!";if(l==null)throw"Parent node is null!";if(this.graphs.indexOf(u)>-1)throw"Graph already in this graph mgr!";if(this.graphs.push(u),u.parent!=null)throw"Already has a parent!";if(l.child!=null)throw"Already has a child!";return u.parent=l,l.child=u,u}else{h=f,c=l,f=u;var d=c.getOwner(),v=h.getOwner();if(!(d!=null&&d.getGraphManager()==this))throw"Source not in this graph mgr!";if(!(v!=null&&v.getGraphManager()==this))throw"Target not in this graph mgr!";if(d==v)return f.isInterGraph=!1,d.add(f,c,h);if(f.isInterGraph=!0,f.source=c,f.target=h,this.edges.indexOf(f)>-1)throw"Edge already in inter-graph edge list!";if(this.edges.push(f),!(f.source!=null&&f.target!=null))throw"Edge source and/or target is null!";if(!(f.source.edges.indexOf(f)==-1&&f.target.edges.indexOf(f)==-1))throw"Edge already in source and/or target incidency list!";return f.source.edges.push(f),f.target.edges.push(f),f}},o.prototype.remove=function(u){if(u instanceof i){var l=u;if(l.getGraphManager()!=this)throw"Graph not in this graph mgr";if(!(l==this.rootGraph||l.parent!=null&&l.parent.graphManager==this))throw"Invalid parent node!";var f=[];f=f.concat(l.getEdges());for(var c,h=f.length,d=0;d<h;d++)c=f[d],l.remove(c);var v=[];v=v.concat(l.getNodes());var p;h=v.length;for(var d=0;d<h;d++)p=v[d],l.remove(p);l==this.rootGraph&&this.setRootGraph(null);var g=this.graphs.indexOf(l);this.graphs.splice(g,1),l.parent=null}else if(u instanceof s){if(c=u,c==null)throw"Edge is null!";if(!c.isInterGraph)throw"Not an inter-graph edge!";if(!(c.source!=null&&c.target!=null))throw"Source and/or target is null!";if(!(c.source.edges.indexOf(c)!=-1&&c.target.edges.indexOf(c)!=-1))throw"Source and/or target doesn't know this edge!";var g=c.source.edges.indexOf(c);if(c.source.edges.splice(g,1),g=c.target.edges.indexOf(c),c.target.edges.splice(g,1),!(c.source.owner!=null&&c.source.owner.getGraphManager()!=null))throw"Edge owner graph or owner graph manager is null!";if(c.source.owner.getGraphManager().edges.indexOf(c)==-1)throw"Not in owner graph manager's edge list!";var g=c.source.owner.getGraphManager().edges.indexOf(c);c.source.owner.getGraphManager().edges.splice(g,1)}},o.prototype.updateBounds=function(){this.rootGraph.updateBounds(!0)},o.prototype.getGraphs=function(){return this.graphs},o.prototype.getAllNodes=function(){if(this.allNodes==null){for(var u=[],l=this.getGraphs(),f=l.length,c=0;c<f;c++)u=u.concat(l[c].getNodes());this.allNodes=u}return this.allNodes},o.prototype.resetAllNodes=function(){this.allNodes=null},o.prototype.resetAllEdges=function(){this.allEdges=null},o.prototype.resetAllNodesToApplyGravitation=function(){this.allNodesToApplyGravitation=null},o.prototype.getAllEdges=function(){if(this.allEdges==null){var u=[],l=this.getGraphs();l.length;for(var f=0;f<l.length;f++)u=u.concat(l[f].getEdges());u=u.concat(this.edges),this.allEdges=u}return this.allEdges},o.prototype.getAllNodesToApplyGravitation=function(){return this.allNodesToApplyGravitation},o.prototype.setAllNodesToApplyGravitation=function(u){if(this.allNodesToApplyGravitation!=null)throw"assert failed";this.allNodesToApplyGravitation=u},o.prototype.getRoot=function(){return this.rootGraph},o.prototype.setRootGraph=function(u){if(u.getGraphManager()!=this)throw"Root not in this graph mgr!";this.rootGraph=u,u.parent==null&&(u.parent=this.layout.newNode("Root node"))},o.prototype.getLayout=function(){return this.layout},o.prototype.isOneAncestorOfOther=function(u,l){if(!(u!=null&&l!=null))throw"assert failed";if(u==l)return!0;var f=u.getOwner(),c;do{if(c=f.getParent(),c==null)break;if(c==l)return!0;if(f=c.getOwner(),f==null)break}while(!0);f=l.getOwner();do{if(c=f.getParent(),c==null)break;if(c==u)return!0;if(f=c.getOwner(),f==null)break}while(!0);return!1},o.prototype.calcLowestCommonAncestors=function(){for(var u,l,f,c,h,d=this.getAllEdges(),v=d.length,p=0;p<v;p++){if(u=d[p],l=u.source,f=u.target,u.lca=null,u.sourceInLca=l,u.targetInLca=f,l==f){u.lca=l.getOwner();continue}for(c=l.getOwner();u.lca==null;){for(u.targetInLca=f,h=f.getOwner();u.lca==null;){if(h==c){u.lca=h;break}if(h==this.rootGraph)break;if(u.lca!=null)throw"assert failed";u.targetInLca=h.getParent(),h=u.targetInLca.getOwner()}if(c==this.rootGraph)break;u.lca==null&&(u.sourceInLca=c.getParent(),c=u.sourceInLca.getOwner())}if(u.lca==null)throw"assert failed"}},o.prototype.calcLowestCommonAncestor=function(u,l){if(u==l)return u.getOwner();var f=u.getOwner();do{if(f==null)break;var c=l.getOwner();do{if(c==null)break;if(c==f)return c;c=c.getParent().getOwner()}while(!0);f=f.getParent().getOwner()}while(!0);return f},o.prototype.calcInclusionTreeDepths=function(u,l){u==null&&l==null&&(u=this.rootGraph,l=1);for(var f,c=u.getNodes(),h=c.length,d=0;d<h;d++)f=c[d],f.inclusionTreeDepth=l,f.child!=null&&this.calcInclusionTreeDepths(f.child,l+1)},o.prototype.includesInvalidEdge=function(){for(var u,l=this.edges.length,f=0;f<l;f++)if(u=this.edges[f],this.isOneAncestorOfOther(u.source,u.target))return!0;return!1},r.exports=o},function(r,n,a){var i=a(0);function s(){}for(var o in i)s[o]=i[o];s.MAX_ITERATIONS=2500,s.DEFAULT_EDGE_LENGTH=50,s.DEFAULT_SPRING_STRENGTH=.45,s.DEFAULT_REPULSION_STRENGTH=4500,s.DEFAULT_GRAVITY_STRENGTH=.4,s.DEFAULT_COMPOUND_GRAVITY_STRENGTH=1,s.DEFAULT_GRAVITY_RANGE_FACTOR=3.8,s.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=1.5,s.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION=!0,s.DEFAULT_USE_SMART_REPULSION_RANGE_CALCULATION=!0,s.DEFAULT_COOLING_FACTOR_INCREMENTAL=.3,s.COOLING_ADAPTATION_FACTOR=.33,s.ADAPTATION_LOWER_NODE_LIMIT=1e3,s.ADAPTATION_UPPER_NODE_LIMIT=5e3,s.MAX_NODE_DISPLACEMENT_INCREMENTAL=100,s.MAX_NODE_DISPLACEMENT=s.MAX_NODE_DISPLACEMENT_INCREMENTAL*3,s.MIN_REPULSION_DIST=s.DEFAULT_EDGE_LENGTH/10,s.CONVERGENCE_CHECK_PERIOD=100,s.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=.1,s.MIN_EDGE_LENGTH=1,s.GRID_CALCULATION_CHECK_PERIOD=10,r.exports=s},function(r,n,a){var i=a(12);function s(){}s.calcSeparationAmount=function(o,u,l,f){if(!o.intersects(u))throw"assert failed";var c=new Array(2);this.decideDirectionsForOverlappingNodes(o,u,c),l[0]=Math.min(o.getRight(),u.getRight())-Math.max(o.x,u.x),l[1]=Math.min(o.getBottom(),u.getBottom())-Math.max(o.y,u.y),o.getX()<=u.getX()&&o.getRight()>=u.getRight()?l[0]+=Math.min(u.getX()-o.getX(),o.getRight()-u.getRight()):u.getX()<=o.getX()&&u.getRight()>=o.getRight()&&(l[0]+=Math.min(o.getX()-u.getX(),u.getRight()-o.getRight())),o.getY()<=u.getY()&&o.getBottom()>=u.getBottom()?l[1]+=Math.min(u.getY()-o.getY(),o.getBottom()-u.getBottom()):u.getY()<=o.getY()&&u.getBottom()>=o.getBottom()&&(l[1]+=Math.min(o.getY()-u.getY(),u.getBottom()-o.getBottom()));var h=Math.abs((u.getCenterY()-o.getCenterY())/(u.getCenterX()-o.getCenterX()));u.getCenterY()===o.getCenterY()&&u.getCenterX()===o.getCenterX()&&(h=1);var d=h*l[0],v=l[1]/h;l[0]<v?v=l[0]:d=l[1],l[0]=-1*c[0]*(v/2+f),l[1]=-1*c[1]*(d/2+f)},s.decideDirectionsForOverlappingNodes=function(o,u,l){o.getCenterX()<u.getCenterX()?l[0]=-1:l[0]=1,o.getCenterY()<u.getCenterY()?l[1]=-1:l[1]=1},s.getIntersection2=function(o,u,l){var f=o.getCenterX(),c=o.getCenterY(),h=u.getCenterX(),d=u.getCenterY();if(o.intersects(u))return l[0]=f,l[1]=c,l[2]=h,l[3]=d,!0;var v=o.getX(),p=o.getY(),g=o.getRight(),y=o.getX(),m=o.getBottom(),b=o.getRight(),E=o.getWidthHalf(),x=o.getHeightHalf(),S=u.getX(),w=u.getY(),T=u.getRight(),C=u.getX(),A=u.getBottom(),R=u.getRight(),I=u.getWidthHalf(),D=u.getHeightHalf(),_=!1,M=!1;if(f===h){if(c>d)return l[0]=f,l[1]=p,l[2]=h,l[3]=A,!1;if(c<d)return l[0]=f,l[1]=m,l[2]=h,l[3]=w,!1}else if(c===d){if(f>h)return l[0]=v,l[1]=c,l[2]=T,l[3]=d,!1;if(f<h)return l[0]=g,l[1]=c,l[2]=S,l[3]=d,!1}else{var k=o.height/o.width,O=u.height/u.width,P=(d-c)/(h-f),q=void 0,G=void 0,F=void 0,z=void 0,W=void 0,N=void 0;if(-k===P?f>h?(l[0]=y,l[1]=m,_=!0):(l[0]=g,l[1]=p,_=!0):k===P&&(f>h?(l[0]=v,l[1]=p,_=!0):(l[0]=b,l[1]=m,_=!0)),-O===P?h>f?(l[2]=C,l[3]=A,M=!0):(l[2]=T,l[3]=w,M=!0):O===P&&(h>f?(l[2]=S,l[3]=w,M=!0):(l[2]=R,l[3]=A,M=!0)),_&&M)return!1;if(f>h?c>d?(q=this.getCardinalDirection(k,P,4),G=this.getCardinalDirection(O,P,2)):(q=this.getCardinalDirection(-k,P,3),G=this.getCardinalDirection(-O,P,1)):c>d?(q=this.getCardinalDirection(-k,P,1),G=this.getCardinalDirection(-O,P,3)):(q=this.getCardinalDirection(k,P,2),G=this.getCardinalDirection(O,P,4)),!_)switch(q){case 1:z=p,F=f+-x/P,l[0]=F,l[1]=z;break;case 2:F=b,z=c+E*P,l[0]=F,l[1]=z;break;case 3:z=m,F=f+x/P,l[0]=F,l[1]=z;break;case 4:F=y,z=c+-E*P,l[0]=F,l[1]=z;break}if(!M)switch(G){case 1:N=w,W=h+-D/P,l[2]=W,l[3]=N;break;case 2:W=R,N=d+I*P,l[2]=W,l[3]=N;break;case 3:N=A,W=h+D/P,l[2]=W,l[3]=N;break;case 4:W=C,N=d+-I*P,l[2]=W,l[3]=N;break}}return!1},s.getCardinalDirection=function(o,u,l){return o>u?l:1+l%4},s.getIntersection=function(o,u,l,f){if(f==null)return this.getIntersection2(o,u,l);var c=o.x,h=o.y,d=u.x,v=u.y,p=l.x,g=l.y,y=f.x,m=f.y,b=void 0,E=void 0,x=void 0,S=void 0,w=void 0,T=void 0,C=void 0,A=void 0,R=void 0;return x=v-h,w=c-d,C=d*h-c*v,S=m-g,T=p-y,A=y*g-p*m,R=x*T-S*w,R===0?null:(b=(w*A-T*C)/R,E=(S*C-x*A)/R,new i(b,E))},s.angleOfVector=function(o,u,l,f){var c=void 0;return o!==l?(c=Math.atan((f-u)/(l-o)),l<o?c+=Math.PI:f<u&&(c+=this.TWO_PI)):f<u?c=this.ONE_AND_HALF_PI:c=this.HALF_PI,c},s.doIntersect=function(o,u,l,f){var c=o.x,h=o.y,d=u.x,v=u.y,p=l.x,g=l.y,y=f.x,m=f.y,b=(d-c)*(m-g)-(y-p)*(v-h);if(b===0)return!1;var E=((m-g)*(y-c)+(p-y)*(m-h))/b,x=((h-v)*(y-c)+(d-c)*(m-h))/b;return 0<E&&E<1&&0<x&&x<1},s.HALF_PI=.5*Math.PI,s.ONE_AND_HALF_PI=1.5*Math.PI,s.TWO_PI=2*Math.PI,s.THREE_PI=3*Math.PI,r.exports=s},function(r,n,a){function i(){}i.sign=function(s){return s>0?1:s<0?-1:0},i.floor=function(s){return s<0?Math.ceil(s):Math.floor(s)},i.ceil=function(s){return s<0?Math.floor(s):Math.ceil(s)},r.exports=i},function(r,n,a){function i(){}i.MAX_VALUE=2147483647,i.MIN_VALUE=-2147483648,r.exports=i},function(r,n,a){var i=function(){function c(h,d){for(var v=0;v<d.length;v++){var p=d[v];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(h,p.key,p)}}return function(h,d,v){return d&&c(h.prototype,d),v&&c(h,v),h}}();function s(c,h){if(!(c instanceof h))throw new TypeError("Cannot call a class as a function")}var o=function(h){return{value:h,next:null,prev:null}},u=function(h,d,v,p){return h!==null?h.next=d:p.head=d,v!==null?v.prev=d:p.tail=d,d.prev=h,d.next=v,p.length++,d},l=function(h,d){var v=h.prev,p=h.next;return v!==null?v.next=p:d.head=p,p!==null?p.prev=v:d.tail=v,h.prev=h.next=null,d.length--,h},f=function(){function c(h){var d=this;s(this,c),this.length=0,this.head=null,this.tail=null,h!=null&&h.forEach(function(v){return d.push(v)})}return i(c,[{key:"size",value:function(){return this.length}},{key:"insertBefore",value:function(d,v){return u(v.prev,o(d),v,this)}},{key:"insertAfter",value:function(d,v){return u(v,o(d),v.next,this)}},{key:"insertNodeBefore",value:function(d,v){return u(v.prev,d,v,this)}},{key:"insertNodeAfter",value:function(d,v){return u(v,d,v.next,this)}},{key:"push",value:function(d){return u(this.tail,o(d),null,this)}},{key:"unshift",value:function(d){return u(null,o(d),this.head,this)}},{key:"remove",value:function(d){return l(d,this)}},{key:"pop",value:function(){return l(this.tail,this).value}},{key:"popNode",value:function(){return l(this.tail,this)}},{key:"shift",value:function(){return l(this.head,this).value}},{key:"shiftNode",value:function(){return l(this.head,this)}},{key:"get_object_at",value:function(d){if(d<=this.length()){for(var v=1,p=this.head;v<d;)p=p.next,v++;return p.value}}},{key:"set_object_at",value:function(d,v){if(d<=this.length()){for(var p=1,g=this.head;p<d;)g=g.next,p++;g.value=v}}}]),c}();r.exports=f},function(r,n,a){function i(s,o,u){this.x=null,this.y=null,s==null&&o==null&&u==null?(this.x=0,this.y=0):typeof s=="number"&&typeof o=="number"&&u==null?(this.x=s,this.y=o):s.constructor.name=="Point"&&o==null&&u==null&&(u=s,this.x=u.x,this.y=u.y)}i.prototype.getX=function(){return this.x},i.prototype.getY=function(){return this.y},i.prototype.getLocation=function(){return new i(this.x,this.y)},i.prototype.setLocation=function(s,o,u){s.constructor.name=="Point"&&o==null&&u==null?(u=s,this.setLocation(u.x,u.y)):typeof s=="number"&&typeof o=="number"&&u==null&&(parseInt(s)==s&&parseInt(o)==o?this.move(s,o):(this.x=Math.floor(s+.5),this.y=Math.floor(o+.5)))},i.prototype.move=function(s,o){this.x=s,this.y=o},i.prototype.translate=function(s,o){this.x+=s,this.y+=o},i.prototype.equals=function(s){if(s.constructor.name=="Point"){var o=s;return this.x==o.x&&this.y==o.y}return this==s},i.prototype.toString=function(){return new i().constructor.name+"[x="+this.x+",y="+this.y+"]"},r.exports=i},function(r,n,a){function i(s,o,u,l){this.x=0,this.y=0,this.width=0,this.height=0,s!=null&&o!=null&&u!=null&&l!=null&&(this.x=s,this.y=o,this.width=u,this.height=l)}i.prototype.getX=function(){return this.x},i.prototype.setX=function(s){this.x=s},i.prototype.getY=function(){return this.y},i.prototype.setY=function(s){this.y=s},i.prototype.getWidth=function(){return this.width},i.prototype.setWidth=function(s){this.width=s},i.prototype.getHeight=function(){return this.height},i.prototype.setHeight=function(s){this.height=s},i.prototype.getRight=function(){return this.x+this.width},i.prototype.getBottom=function(){return this.y+this.height},i.prototype.intersects=function(s){return!(this.getRight()<s.x||this.getBottom()<s.y||s.getRight()<this.x||s.getBottom()<this.y)},i.prototype.getCenterX=function(){return this.x+this.width/2},i.prototype.getMinX=function(){return this.getX()},i.prototype.getMaxX=function(){return this.getX()+this.width},i.prototype.getCenterY=function(){return this.y+this.height/2},i.prototype.getMinY=function(){return this.getY()},i.prototype.getMaxY=function(){return this.getY()+this.height},i.prototype.getWidthHalf=function(){return this.width/2},i.prototype.getHeightHalf=function(){return this.height/2},r.exports=i},function(r,n,a){var i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o};function s(){}s.lastID=0,s.createID=function(o){return s.isPrimitive(o)?o:(o.uniqueID!=null||(o.uniqueID=s.getString(),s.lastID++),o.uniqueID)},s.getString=function(o){return o==null&&(o=s.lastID),"Object#"+o},s.isPrimitive=function(o){var u=typeof o>"u"?"undefined":i(o);return o==null||u!="object"&&u!="function"},r.exports=s},function(r,n,a){function i(p){if(Array.isArray(p)){for(var g=0,y=Array(p.length);g<p.length;g++)y[g]=p[g];return y}else return Array.from(p)}var s=a(0),o=a(6),u=a(3),l=a(1),f=a(5),c=a(4),h=a(17),d=a(27);function v(p){d.call(this),this.layoutQuality=s.QUALITY,this.createBendsAsNeeded=s.DEFAULT_CREATE_BENDS_AS_NEEDED,this.incremental=s.DEFAULT_INCREMENTAL,this.animationOnLayout=s.DEFAULT_ANIMATION_ON_LAYOUT,this.animationDuringLayout=s.DEFAULT_ANIMATION_DURING_LAYOUT,this.animationPeriod=s.DEFAULT_ANIMATION_PERIOD,this.uniformLeafNodeSizes=s.DEFAULT_UNIFORM_LEAF_NODE_SIZES,this.edgeToDummyNodes=new Map,this.graphManager=new o(this),this.isLayoutFinished=!1,this.isSubLayout=!1,this.isRemoteUse=!1,p!=null&&(this.isRemoteUse=p)}v.RANDOM_SEED=1,v.prototype=Object.create(d.prototype),v.prototype.getGraphManager=function(){return this.graphManager},v.prototype.getAllNodes=function(){return this.graphManager.getAllNodes()},v.prototype.getAllEdges=function(){return this.graphManager.getAllEdges()},v.prototype.getAllNodesToApplyGravitation=function(){return this.graphManager.getAllNodesToApplyGravitation()},v.prototype.newGraphManager=function(){var p=new o(this);return this.graphManager=p,p},v.prototype.newGraph=function(p){return new f(null,this.graphManager,p)},v.prototype.newNode=function(p){return new u(this.graphManager,p)},v.prototype.newEdge=function(p){return new l(null,null,p)},v.prototype.checkLayoutSuccess=function(){return this.graphManager.getRoot()==null||this.graphManager.getRoot().getNodes().length==0||this.graphManager.includesInvalidEdge()},v.prototype.runLayout=function(){this.isLayoutFinished=!1,this.tilingPreLayout&&this.tilingPreLayout(),this.initParameters();var p;return this.checkLayoutSuccess()?p=!1:p=this.layout(),s.ANIMATE==="during"?!1:(p&&(this.isSubLayout||this.doPostLayout()),this.tilingPostLayout&&this.tilingPostLayout(),this.isLayoutFinished=!0,p)},v.prototype.doPostLayout=function(){this.incremental||this.transform(),this.update()},v.prototype.update2=function(){if(this.createBendsAsNeeded&&(this.createBendpointsFromDummyNodes(),this.graphManager.resetAllEdges()),!this.isRemoteUse){for(var p=this.graphManager.getAllEdges(),g=0;g<p.length;g++)p[g];for(var y=this.graphManager.getRoot().getNodes(),g=0;g<y.length;g++)y[g];this.update(this.graphManager.getRoot())}},v.prototype.update=function(p){if(p==null)this.update2();else if(p instanceof u){var g=p;if(g.getChild()!=null)for(var y=g.getChild().getNodes(),m=0;m<y.length;m++)update(y[m]);if(g.vGraphObject!=null){var b=g.vGraphObject;b.update(g)}}else if(p instanceof l){var E=p;if(E.vGraphObject!=null){var x=E.vGraphObject;x.update(E)}}else if(p instanceof f){var S=p;if(S.vGraphObject!=null){var w=S.vGraphObject;w.update(S)}}},v.prototype.initParameters=function(){this.isSubLayout||(this.layoutQuality=s.QUALITY,this.animationDuringLayout=s.DEFAULT_ANIMATION_DURING_LAYOUT,this.animationPeriod=s.DEFAULT_ANIMATION_PERIOD,this.animationOnLayout=s.DEFAULT_ANIMATION_ON_LAYOUT,this.incremental=s.DEFAULT_INCREMENTAL,this.createBendsAsNeeded=s.DEFAULT_CREATE_BENDS_AS_NEEDED,this.uniformLeafNodeSizes=s.DEFAULT_UNIFORM_LEAF_NODE_SIZES),this.animationDuringLayout&&(this.animationOnLayout=!1)},v.prototype.transform=function(p){if(p==null)this.transform(new c(0,0));else{var g=new h,y=this.graphManager.getRoot().updateLeftTop();if(y!=null){g.setWorldOrgX(p.x),g.setWorldOrgY(p.y),g.setDeviceOrgX(y.x),g.setDeviceOrgY(y.y);for(var m=this.getAllNodes(),b,E=0;E<m.length;E++)b=m[E],b.transform(g)}}},v.prototype.positionNodesRandomly=function(p){if(p==null)this.positionNodesRandomly(this.getGraphManager().getRoot()),this.getGraphManager().getRoot().updateBounds(!0);else for(var g,y,m=p.getNodes(),b=0;b<m.length;b++)g=m[b],y=g.getChild(),y==null||y.getNodes().length==0?g.scatter():(this.positionNodesRandomly(y),g.updateBounds())},v.prototype.getFlatForest=function(){for(var p=[],g=!0,y=this.graphManager.getRoot().getNodes(),m=!0,b=0;b<y.length;b++)y[b].getChild()!=null&&(m=!1);if(!m)return p;var E=new Set,x=[],S=new Map,w=[];for(w=w.concat(y);w.length>0&&g;){for(x.push(w[0]);x.length>0&&g;){var T=x[0];x.splice(0,1),E.add(T);for(var C=T.getEdges(),b=0;b<C.length;b++){var A=C[b].getOtherEnd(T);if(S.get(T)!=A)if(!E.has(A))x.push(A),S.set(A,T);else{g=!1;break}}}if(!g)p=[];else{var R=[].concat(i(E));p.push(R);for(var b=0;b<R.length;b++){var I=R[b],D=w.indexOf(I);D>-1&&w.splice(D,1)}E=new Set,S=new Map}}return p},v.prototype.createDummyNodesForBendpoints=function(p){for(var g=[],y=p.source,m=this.graphManager.calcLowestCommonAncestor(p.source,p.target),b=0;b<p.bendpoints.length;b++){var E=this.newNode(null);E.setRect(new Point(0,0),new Dimension(1,1)),m.add(E);var x=this.newEdge(null);this.graphManager.add(x,y,E),g.add(E),y=E}var x=this.newEdge(null);return this.graphManager.add(x,y,p.target),this.edgeToDummyNodes.set(p,g),p.isInterGraph()?this.graphManager.remove(p):m.remove(p),g},v.prototype.createBendpointsFromDummyNodes=function(){var p=[];p=p.concat(this.graphManager.getAllEdges()),p=[].concat(i(this.edgeToDummyNodes.keys())).concat(p);for(var g=0;g<p.length;g++){var y=p[g];if(y.bendpoints.length>0){for(var m=this.edgeToDummyNodes.get(y),b=0;b<m.length;b++){var E=m[b],x=new c(E.getCenterX(),E.getCenterY()),S=y.bendpoints.get(b);S.x=x.x,S.y=x.y,E.getOwner().remove(E)}this.graphManager.add(y,y.source,y.target)}}},v.transform=function(p,g,y,m){if(y!=null&&m!=null){var b=g;if(p<=50){var E=g/y;b-=(g-E)/50*(50-p)}else{var x=g*m;b+=(x-g)/50*(p-50)}return b}else{var S,w;return p<=50?(S=9*g/500,w=g/10):(S=9*g/50,w=-8*g),S*p+w}},v.findCenterOfTree=function(p){var g=[];g=g.concat(p);var y=[],m=new Map,b=!1,E=null;(g.length==1||g.length==2)&&(b=!0,E=g[0]);for(var x=0;x<g.length;x++){var S=g[x],w=S.getNeighborsList().size;m.set(S,S.getNeighborsList().size),w==1&&y.push(S)}var T=[];for(T=T.concat(y);!b;){var C=[];C=C.concat(T),T=[];for(var x=0;x<g.length;x++){var S=g[x],A=g.indexOf(S);A>=0&&g.splice(A,1);var R=S.getNeighborsList();R.forEach(function(_){if(y.indexOf(_)<0){var M=m.get(_),k=M-1;k==1&&T.push(_),m.set(_,k)}})}y=y.concat(T),(g.length==1||g.length==2)&&(b=!0,E=g[0])}return E},v.prototype.setGraphManager=function(p){this.graphManager=p},r.exports=v},function(r,n,a){function i(){}i.seed=1,i.x=0,i.nextDouble=function(){return i.x=Math.sin(i.seed++)*1e4,i.x-Math.floor(i.x)},r.exports=i},function(r,n,a){var i=a(4);function s(o,u){this.lworldOrgX=0,this.lworldOrgY=0,this.ldeviceOrgX=0,this.ldeviceOrgY=0,this.lworldExtX=1,this.lworldExtY=1,this.ldeviceExtX=1,this.ldeviceExtY=1}s.prototype.getWorldOrgX=function(){return this.lworldOrgX},s.prototype.setWorldOrgX=function(o){this.lworldOrgX=o},s.prototype.getWorldOrgY=function(){return this.lworldOrgY},s.prototype.setWorldOrgY=function(o){this.lworldOrgY=o},s.prototype.getWorldExtX=function(){return this.lworldExtX},s.prototype.setWorldExtX=function(o){this.lworldExtX=o},s.prototype.getWorldExtY=function(){return this.lworldExtY},s.prototype.setWorldExtY=function(o){this.lworldExtY=o},s.prototype.getDeviceOrgX=function(){return this.ldeviceOrgX},s.prototype.setDeviceOrgX=function(o){this.ldeviceOrgX=o},s.prototype.getDeviceOrgY=function(){return this.ldeviceOrgY},s.prototype.setDeviceOrgY=function(o){this.ldeviceOrgY=o},s.prototype.getDeviceExtX=function(){return this.ldeviceExtX},s.prototype.setDeviceExtX=function(o){this.ldeviceExtX=o},s.prototype.getDeviceExtY=function(){return this.ldeviceExtY},s.prototype.setDeviceExtY=function(o){this.ldeviceExtY=o},s.prototype.transformX=function(o){var u=0,l=this.lworldExtX;return l!=0&&(u=this.ldeviceOrgX+(o-this.lworldOrgX)*this.ldeviceExtX/l),u},s.prototype.transformY=function(o){var u=0,l=this.lworldExtY;return l!=0&&(u=this.ldeviceOrgY+(o-this.lworldOrgY)*this.ldeviceExtY/l),u},s.prototype.inverseTransformX=function(o){var u=0,l=this.ldeviceExtX;return l!=0&&(u=this.lworldOrgX+(o-this.ldeviceOrgX)*this.lworldExtX/l),u},s.prototype.inverseTransformY=function(o){var u=0,l=this.ldeviceExtY;return l!=0&&(u=this.lworldOrgY+(o-this.ldeviceOrgY)*this.lworldExtY/l),u},s.prototype.inverseTransformPoint=function(o){var u=new i(this.inverseTransformX(o.x),this.inverseTransformY(o.y));return u},r.exports=s},function(r,n,a){function i(d){if(Array.isArray(d)){for(var v=0,p=Array(d.length);v<d.length;v++)p[v]=d[v];return p}else return Array.from(d)}var s=a(15),o=a(7),u=a(0),l=a(8),f=a(9);function c(){s.call(this),this.useSmartIdealEdgeLengthCalculation=o.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION,this.idealEdgeLength=o.DEFAULT_EDGE_LENGTH,this.springConstant=o.DEFAULT_SPRING_STRENGTH,this.repulsionConstant=o.DEFAULT_REPULSION_STRENGTH,this.gravityConstant=o.DEFAULT_GRAVITY_STRENGTH,this.compoundGravityConstant=o.DEFAULT_COMPOUND_GRAVITY_STRENGTH,this.gravityRangeFactor=o.DEFAULT_GRAVITY_RANGE_FACTOR,this.compoundGravityRangeFactor=o.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR,this.displacementThresholdPerNode=3*o.DEFAULT_EDGE_LENGTH/100,this.coolingFactor=o.DEFAULT_COOLING_FACTOR_INCREMENTAL,this.initialCoolingFactor=o.DEFAULT_COOLING_FACTOR_INCREMENTAL,this.totalDisplacement=0,this.oldTotalDisplacement=0,this.maxIterations=o.MAX_ITERATIONS}c.prototype=Object.create(s.prototype);for(var h in s)c[h]=s[h];c.prototype.initParameters=function(){s.prototype.initParameters.call(this,arguments),this.totalIterations=0,this.notAnimatedIterations=0,this.useFRGridVariant=o.DEFAULT_USE_SMART_REPULSION_RANGE_CALCULATION,this.grid=[]},c.prototype.calcIdealEdgeLengths=function(){for(var d,v,p,g,y,m,b=this.getGraphManager().getAllEdges(),E=0;E<b.length;E++)d=b[E],d.idealLength=this.idealEdgeLength,d.isInterGraph&&(p=d.getSource(),g=d.getTarget(),y=d.getSourceInLca().getEstimatedSize(),m=d.getTargetInLca().getEstimatedSize(),this.useSmartIdealEdgeLengthCalculation&&(d.idealLength+=y+m-2*u.SIMPLE_NODE_SIZE),v=d.getLca().getInclusionTreeDepth(),d.idealLength+=o.DEFAULT_EDGE_LENGTH*o.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR*(p.getInclusionTreeDepth()+g.getInclusionTreeDepth()-2*v))},c.prototype.initSpringEmbedder=function(){var d=this.getAllNodes().length;this.incremental?(d>o.ADAPTATION_LOWER_NODE_LIMIT&&(this.coolingFactor=Math.max(this.coolingFactor*o.COOLING_ADAPTATION_FACTOR,this.coolingFactor-(d-o.ADAPTATION_LOWER_NODE_LIMIT)/(o.ADAPTATION_UPPER_NODE_LIMIT-o.ADAPTATION_LOWER_NODE_LIMIT)*this.coolingFactor*(1-o.COOLING_ADAPTATION_FACTOR))),this.maxNodeDisplacement=o.MAX_NODE_DISPLACEMENT_INCREMENTAL):(d>o.ADAPTATION_LOWER_NODE_LIMIT?this.coolingFactor=Math.max(o.COOLING_ADAPTATION_FACTOR,1-(d-o.ADAPTATION_LOWER_NODE_LIMIT)/(o.ADAPTATION_UPPER_NODE_LIMIT-o.ADAPTATION_LOWER_NODE_LIMIT)*(1-o.COOLING_ADAPTATION_FACTOR)):this.coolingFactor=1,this.initialCoolingFactor=this.coolingFactor,this.maxNodeDisplacement=o.MAX_NODE_DISPLACEMENT),this.maxIterations=Math.max(this.getAllNodes().length*5,this.maxIterations),this.totalDisplacementThreshold=this.displacementThresholdPerNode*this.getAllNodes().length,this.repulsionRange=this.calcRepulsionRange()},c.prototype.calcSpringForces=function(){for(var d=this.getAllEdges(),v,p=0;p<d.length;p++)v=d[p],this.calcSpringForce(v,v.idealLength)},c.prototype.calcRepulsionForces=function(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,p,g,y,m,b=this.getAllNodes(),E;if(this.useFRGridVariant)for(this.totalIterations%o.GRID_CALCULATION_CHECK_PERIOD==1&&d&&this.updateGrid(),E=new Set,p=0;p<b.length;p++)y=b[p],this.calculateRepulsionForceOfANode(y,E,d,v),E.add(y);else for(p=0;p<b.length;p++)for(y=b[p],g=p+1;g<b.length;g++)m=b[g],y.getOwner()==m.getOwner()&&this.calcRepulsionForce(y,m)},c.prototype.calcGravitationalForces=function(){for(var d,v=this.getAllNodesToApplyGravitation(),p=0;p<v.length;p++)d=v[p],this.calcGravitationalForce(d)},c.prototype.moveNodes=function(){for(var d=this.getAllNodes(),v,p=0;p<d.length;p++)v=d[p],v.move()},c.prototype.calcSpringForce=function(d,v){var p=d.getSource(),g=d.getTarget(),y,m,b,E;if(this.uniformLeafNodeSizes&&p.getChild()==null&&g.getChild()==null)d.updateLengthSimple();else if(d.updateLength(),d.isOverlapingSourceAndTarget)return;y=d.getLength(),y!=0&&(m=this.springConstant*(y-v),b=m*(d.lengthX/y),E=m*(d.lengthY/y),p.springForceX+=b,p.springForceY+=E,g.springForceX-=b,g.springForceY-=E)},c.prototype.calcRepulsionForce=function(d,v){var p=d.getRect(),g=v.getRect(),y=new Array(2),m=new Array(4),b,E,x,S,w,T,C;if(p.intersects(g)){l.calcSeparationAmount(p,g,y,o.DEFAULT_EDGE_LENGTH/2),T=2*y[0],C=2*y[1];var A=d.noOfChildren*v.noOfChildren/(d.noOfChildren+v.noOfChildren);d.repulsionForceX-=A*T,d.repulsionForceY-=A*C,v.repulsionForceX+=A*T,v.repulsionForceY+=A*C}else this.uniformLeafNodeSizes&&d.getChild()==null&&v.getChild()==null?(b=g.getCenterX()-p.getCenterX(),E=g.getCenterY()-p.getCenterY()):(l.getIntersection(p,g,m),b=m[2]-m[0],E=m[3]-m[1]),Math.abs(b)<o.MIN_REPULSION_DIST&&(b=f.sign(b)*o.MIN_REPULSION_DIST),Math.abs(E)<o.MIN_REPULSION_DIST&&(E=f.sign(E)*o.MIN_REPULSION_DIST),x=b*b+E*E,S=Math.sqrt(x),w=this.repulsionConstant*d.noOfChildren*v.noOfChildren/x,T=w*b/S,C=w*E/S,d.repulsionForceX-=T,d.repulsionForceY-=C,v.repulsionForceX+=T,v.repulsionForceY+=C},c.prototype.calcGravitationalForce=function(d){var v,p,g,y,m,b,E,x;v=d.getOwner(),p=(v.getRight()+v.getLeft())/2,g=(v.getTop()+v.getBottom())/2,y=d.getCenterX()-p,m=d.getCenterY()-g,b=Math.abs(y)+d.getWidth()/2,E=Math.abs(m)+d.getHeight()/2,d.getOwner()==this.graphManager.getRoot()?(x=v.getEstimatedSize()*this.gravityRangeFactor,(b>x||E>x)&&(d.gravitationForceX=-this.gravityConstant*y,d.gravitationForceY=-this.gravityConstant*m)):(x=v.getEstimatedSize()*this.compoundGravityRangeFactor,(b>x||E>x)&&(d.gravitationForceX=-this.gravityConstant*y*this.compoundGravityConstant,d.gravitationForceY=-this.gravityConstant*m*this.compoundGravityConstant))},c.prototype.isConverged=function(){var d,v=!1;return this.totalIterations>this.maxIterations/3&&(v=Math.abs(this.totalDisplacement-this.oldTotalDisplacement)<2),d=this.totalDisplacement<this.totalDisplacementThreshold,this.oldTotalDisplacement=this.totalDisplacement,d||v},c.prototype.animate=function(){this.animationDuringLayout&&!this.isSubLayout&&(this.notAnimatedIterations==this.animationPeriod?(this.update(),this.notAnimatedIterations=0):this.notAnimatedIterations++)},c.prototype.calcNoOfChildrenForAllNodes=function(){for(var d,v=this.graphManager.getAllNodes(),p=0;p<v.length;p++)d=v[p],d.noOfChildren=d.getNoOfChildren()},c.prototype.calcGrid=function(d){var v=0,p=0;v=parseInt(Math.ceil((d.getRight()-d.getLeft())/this.repulsionRange)),p=parseInt(Math.ceil((d.getBottom()-d.getTop())/this.repulsionRange));for(var g=new Array(v),y=0;y<v;y++)g[y]=new Array(p);for(var y=0;y<v;y++)for(var m=0;m<p;m++)g[y][m]=new Array;return g},c.prototype.addNodeToGrid=function(d,v,p){var g=0,y=0,m=0,b=0;g=parseInt(Math.floor((d.getRect().x-v)/this.repulsionRange)),y=parseInt(Math.floor((d.getRect().width+d.getRect().x-v)/this.repulsionRange)),m=parseInt(Math.floor((d.getRect().y-p)/this.repulsionRange)),b=parseInt(Math.floor((d.getRect().height+d.getRect().y-p)/this.repulsionRange));for(var E=g;E<=y;E++)for(var x=m;x<=b;x++)this.grid[E][x].push(d),d.setGridCoordinates(g,y,m,b)},c.prototype.updateGrid=function(){var d,v,p=this.getAllNodes();for(this.grid=this.calcGrid(this.graphManager.getRoot()),d=0;d<p.length;d++)v=p[d],this.addNodeToGrid(v,this.graphManager.getRoot().getLeft(),this.graphManager.getRoot().getTop())},c.prototype.calculateRepulsionForceOfANode=function(d,v,p,g){if(this.totalIterations%o.GRID_CALCULATION_CHECK_PERIOD==1&&p||g){var y=new Set;d.surrounding=new Array;for(var m,b=this.grid,E=d.startX-1;E<d.finishX+2;E++)for(var x=d.startY-1;x<d.finishY+2;x++)if(!(E<0||x<0||E>=b.length||x>=b[0].length)){for(var S=0;S<b[E][x].length;S++)if(m=b[E][x][S],!(d.getOwner()!=m.getOwner()||d==m)&&!v.has(m)&&!y.has(m)){var w=Math.abs(d.getCenterX()-m.getCenterX())-(d.getWidth()/2+m.getWidth()/2),T=Math.abs(d.getCenterY()-m.getCenterY())-(d.getHeight()/2+m.getHeight()/2);w<=this.repulsionRange&&T<=this.repulsionRange&&y.add(m)}}d.surrounding=[].concat(i(y))}for(E=0;E<d.surrounding.length;E++)this.calcRepulsionForce(d,d.surrounding[E])},c.prototype.calcRepulsionRange=function(){return 0},r.exports=c},function(r,n,a){var i=a(1),s=a(7);function o(l,f,c){i.call(this,l,f,c),this.idealLength=s.DEFAULT_EDGE_LENGTH}o.prototype=Object.create(i.prototype);for(var u in i)o[u]=i[u];r.exports=o},function(r,n,a){var i=a(3);function s(u,l,f,c){i.call(this,u,l,f,c),this.springForceX=0,this.springForceY=0,this.repulsionForceX=0,this.repulsionForceY=0,this.gravitationForceX=0,this.gravitationForceY=0,this.displacementX=0,this.displacementY=0,this.startX=0,this.finishX=0,this.startY=0,this.finishY=0,this.surrounding=[]}s.prototype=Object.create(i.prototype);for(var o in i)s[o]=i[o];s.prototype.setGridCoordinates=function(u,l,f,c){this.startX=u,this.finishX=l,this.startY=f,this.finishY=c},r.exports=s},function(r,n,a){function i(s,o){this.width=0,this.height=0,s!==null&&o!==null&&(this.height=o,this.width=s)}i.prototype.getWidth=function(){return this.width},i.prototype.setWidth=function(s){this.width=s},i.prototype.getHeight=function(){return this.height},i.prototype.setHeight=function(s){this.height=s},r.exports=i},function(r,n,a){var i=a(14);function s(){this.map={},this.keys=[]}s.prototype.put=function(o,u){var l=i.createID(o);this.contains(l)||(this.map[l]=u,this.keys.push(o))},s.prototype.contains=function(o){return i.createID(o),this.map[o]!=null},s.prototype.get=function(o){var u=i.createID(o);return this.map[u]},s.prototype.keySet=function(){return this.keys},r.exports=s},function(r,n,a){var i=a(14);function s(){this.set={}}s.prototype.add=function(o){var u=i.createID(o);this.contains(u)||(this.set[u]=o)},s.prototype.remove=function(o){delete this.set[i.createID(o)]},s.prototype.clear=function(){this.set={}},s.prototype.contains=function(o){return this.set[i.createID(o)]==o},s.prototype.isEmpty=function(){return this.size()===0},s.prototype.size=function(){return Object.keys(this.set).length},s.prototype.addAllTo=function(o){for(var u=Object.keys(this.set),l=u.length,f=0;f<l;f++)o.push(this.set[u[f]])},s.prototype.size=function(){return Object.keys(this.set).length},s.prototype.addAll=function(o){for(var u=o.length,l=0;l<u;l++){var f=o[l];this.add(f)}},r.exports=s},function(r,n,a){var i=function(){function l(f,c){for(var h=0;h<c.length;h++){var d=c[h];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(f,d.key,d)}}return function(f,c,h){return c&&l(f.prototype,c),h&&l(f,h),f}}();function s(l,f){if(!(l instanceof f))throw new TypeError("Cannot call a class as a function")}var o=a(11),u=function(){function l(f,c){s(this,l),(c!==null||c!==void 0)&&(this.compareFunction=this._defaultCompareFunction);var h=void 0;f instanceof o?h=f.size():h=f.length,this._quicksort(f,0,h-1)}return i(l,[{key:"_quicksort",value:function(c,h,d){if(h<d){var v=this._partition(c,h,d);this._quicksort(c,h,v),this._quicksort(c,v+1,d)}}},{key:"_partition",value:function(c,h,d){for(var v=this._get(c,h),p=h,g=d;;){for(;this.compareFunction(v,this._get(c,g));)g--;for(;this.compareFunction(this._get(c,p),v);)p++;if(p<g)this._swap(c,p,g),p++,g--;else return g}}},{key:"_get",value:function(c,h){return c instanceof o?c.get_object_at(h):c[h]}},{key:"_set",value:function(c,h,d){c instanceof o?c.set_object_at(h,d):c[h]=d}},{key:"_swap",value:function(c,h,d){var v=this._get(c,h);this._set(c,h,this._get(c,d)),this._set(c,d,v)}},{key:"_defaultCompareFunction",value:function(c,h){return h>c}}]),l}();r.exports=u},function(r,n,a){var i=function(){function u(l,f){for(var c=0;c<f.length;c++){var h=f[c];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(l,h.key,h)}}return function(l,f,c){return f&&u(l.prototype,f),c&&u(l,c),l}}();function s(u,l){if(!(u instanceof l))throw new TypeError("Cannot call a class as a function")}var o=function(){function u(l,f){var c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,h=arguments.length>3&&arguments[3]!==void 0?arguments[3]:-1,d=arguments.length>4&&arguments[4]!==void 0?arguments[4]:-1;s(this,u),this.sequence1=l,this.sequence2=f,this.match_score=c,this.mismatch_penalty=h,this.gap_penalty=d,this.iMax=l.length+1,this.jMax=f.length+1,this.grid=new Array(this.iMax);for(var v=0;v<this.iMax;v++){this.grid[v]=new Array(this.jMax);for(var p=0;p<this.jMax;p++)this.grid[v][p]=0}this.tracebackGrid=new Array(this.iMax);for(var g=0;g<this.iMax;g++){this.tracebackGrid[g]=new Array(this.jMax);for(var y=0;y<this.jMax;y++)this.tracebackGrid[g][y]=[null,null,null]}this.alignments=[],this.score=-1,this.computeGrids()}return i(u,[{key:"getScore",value:function(){return this.score}},{key:"getAlignments",value:function(){return this.alignments}},{key:"computeGrids",value:function(){for(var f=1;f<this.jMax;f++)this.grid[0][f]=this.grid[0][f-1]+this.gap_penalty,this.tracebackGrid[0][f]=[!1,!1,!0];for(var c=1;c<this.iMax;c++)this.grid[c][0]=this.grid[c-1][0]+this.gap_penalty,this.tracebackGrid[c][0]=[!1,!0,!1];for(var h=1;h<this.iMax;h++)for(var d=1;d<this.jMax;d++){var v=void 0;this.sequence1[h-1]===this.sequence2[d-1]?v=this.grid[h-1][d-1]+this.match_score:v=this.grid[h-1][d-1]+this.mismatch_penalty;var p=this.grid[h-1][d]+this.gap_penalty,g=this.grid[h][d-1]+this.gap_penalty,y=[v,p,g],m=this.arrayAllMaxIndexes(y);this.grid[h][d]=y[m[0]],this.tracebackGrid[h][d]=[m.includes(0),m.includes(1),m.includes(2)]}this.score=this.grid[this.iMax-1][this.jMax-1]}},{key:"alignmentTraceback",value:function(){var f=[];for(f.push({pos:[this.sequence1.length,this.sequence2.length],seq1:"",seq2:""});f[0];){var c=f[0],h=this.tracebackGrid[c.pos[0]][c.pos[1]];h[0]&&f.push({pos:[c.pos[0]-1,c.pos[1]-1],seq1:this.sequence1[c.pos[0]-1]+c.seq1,seq2:this.sequence2[c.pos[1]-1]+c.seq2}),h[1]&&f.push({pos:[c.pos[0]-1,c.pos[1]],seq1:this.sequence1[c.pos[0]-1]+c.seq1,seq2:"-"+c.seq2}),h[2]&&f.push({pos:[c.pos[0],c.pos[1]-1],seq1:"-"+c.seq1,seq2:this.sequence2[c.pos[1]-1]+c.seq2}),c.pos[0]===0&&c.pos[1]===0&&this.alignments.push({sequence1:c.seq1,sequence2:c.seq2}),f.shift()}return this.alignments}},{key:"getAllIndexes",value:function(f,c){for(var h=[],d=-1;(d=f.indexOf(c,d+1))!==-1;)h.push(d);return h}},{key:"arrayAllMaxIndexes",value:function(f){return this.getAllIndexes(f,Math.max.apply(null,f))}}]),u}();r.exports=o},function(r,n,a){var i=function(){};i.FDLayout=a(18),i.FDLayoutConstants=a(7),i.FDLayoutEdge=a(19),i.FDLayoutNode=a(20),i.DimensionD=a(21),i.HashMap=a(22),i.HashSet=a(23),i.IGeometry=a(8),i.IMath=a(9),i.Integer=a(10),i.Point=a(12),i.PointD=a(4),i.RandomSeed=a(16),i.RectangleD=a(13),i.Transform=a(17),i.UniqueIDGeneretor=a(14),i.Quicksort=a(24),i.LinkedList=a(11),i.LGraphObject=a(2),i.LGraph=a(5),i.LEdge=a(1),i.LGraphManager=a(6),i.LNode=a(3),i.Layout=a(15),i.LayoutConstants=a(0),i.NeedlemanWunsch=a(25),r.exports=i},function(r,n,a){function i(){this.listeners=[]}var s=i.prototype;s.addListener=function(o,u){this.listeners.push({event:o,callback:u})},s.removeListener=function(o,u){for(var l=this.listeners.length;l>=0;l--){var f=this.listeners[l];f.event===o&&f.callback===u&&this.listeners.splice(l,1)}},s.emit=function(o,u){for(var l=0;l<this.listeners.length;l++){var f=this.listeners[l];o===f.event&&f.callback(u)}},r.exports=i}])})}(Od)),Od.exports}var IE;function yB(){return IE||(IE=1,function(t,e){(function(n,a){t.exports=a(pB())})(Sr,function(r){return function(n){var a={};function i(s){if(a[s])return a[s].exports;var o=a[s]={i:s,l:!1,exports:{}};return n[s].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=n,i.c=a,i.i=function(s){return s},i.d=function(s,o,u){i.o(s,o)||Object.defineProperty(s,o,{configurable:!1,enumerable:!0,get:u})},i.n=function(s){var o=s&&s.__esModule?function(){return s.default}:function(){return s};return i.d(o,"a",o),o},i.o=function(s,o){return Object.prototype.hasOwnProperty.call(s,o)},i.p="",i(i.s=7)}([function(n,a){n.exports=r},function(n,a,i){var s=i(0).FDLayoutConstants;function o(){}for(var u in s)o[u]=s[u];o.DEFAULT_USE_MULTI_LEVEL_SCALING=!1,o.DEFAULT_RADIAL_SEPARATION=s.DEFAULT_EDGE_LENGTH,o.DEFAULT_COMPONENT_SEPERATION=60,o.TILE=!0,o.TILING_PADDING_VERTICAL=10,o.TILING_PADDING_HORIZONTAL=10,o.TREE_REDUCTION_ON_INCREMENTAL=!1,n.exports=o},function(n,a,i){var s=i(0).FDLayoutEdge;function o(l,f,c){s.call(this,l,f,c)}o.prototype=Object.create(s.prototype);for(var u in s)o[u]=s[u];n.exports=o},function(n,a,i){var s=i(0).LGraph;function o(l,f,c){s.call(this,l,f,c)}o.prototype=Object.create(s.prototype);for(var u in s)o[u]=s[u];n.exports=o},function(n,a,i){var s=i(0).LGraphManager;function o(l){s.call(this,l)}o.prototype=Object.create(s.prototype);for(var u in s)o[u]=s[u];n.exports=o},function(n,a,i){var s=i(0).FDLayoutNode,o=i(0).IMath;function u(f,c,h,d){s.call(this,f,c,h,d)}u.prototype=Object.create(s.prototype);for(var l in s)u[l]=s[l];u.prototype.move=function(){var f=this.graphManager.getLayout();this.displacementX=f.coolingFactor*(this.springForceX+this.repulsionForceX+this.gravitationForceX)/this.noOfChildren,this.displacementY=f.coolingFactor*(this.springForceY+this.repulsionForceY+this.gravitationForceY)/this.noOfChildren,Math.abs(this.displacementX)>f.coolingFactor*f.maxNodeDisplacement&&(this.displacementX=f.coolingFactor*f.maxNodeDisplacement*o.sign(this.displacementX)),Math.abs(this.displacementY)>f.coolingFactor*f.maxNodeDisplacement&&(this.displacementY=f.coolingFactor*f.maxNodeDisplacement*o.sign(this.displacementY)),this.child==null?this.moveBy(this.displacementX,this.displacementY):this.child.getNodes().length==0?this.moveBy(this.displacementX,this.displacementY):this.propogateDisplacementToChildren(this.displacementX,this.displacementY),f.totalDisplacement+=Math.abs(this.displacementX)+Math.abs(this.displacementY),this.springForceX=0,this.springForceY=0,this.repulsionForceX=0,this.repulsionForceY=0,this.gravitationForceX=0,this.gravitationForceY=0,this.displacementX=0,this.displacementY=0},u.prototype.propogateDisplacementToChildren=function(f,c){for(var h=this.getChild().getNodes(),d,v=0;v<h.length;v++)d=h[v],d.getChild()==null?(d.moveBy(f,c),d.displacementX+=f,d.displacementY+=c):d.propogateDisplacementToChildren(f,c)},u.prototype.setPred1=function(f){this.pred1=f},u.prototype.getPred1=function(){return pred1},u.prototype.getPred2=function(){return pred2},u.prototype.setNext=function(f){this.next=f},u.prototype.getNext=function(){return next},u.prototype.setProcessed=function(f){this.processed=f},u.prototype.isProcessed=function(){return processed},n.exports=u},function(n,a,i){var s=i(0).FDLayout,o=i(4),u=i(3),l=i(5),f=i(2),c=i(1),h=i(0).FDLayoutConstants,d=i(0).LayoutConstants,v=i(0).Point,p=i(0).PointD,g=i(0).Layout,y=i(0).Integer,m=i(0).IGeometry,b=i(0).LGraph,E=i(0).Transform;function x(){s.call(this),this.toBeTiled={}}x.prototype=Object.create(s.prototype);for(var S in s)x[S]=s[S];x.prototype.newGraphManager=function(){var w=new o(this);return this.graphManager=w,w},x.prototype.newGraph=function(w){return new u(null,this.graphManager,w)},x.prototype.newNode=function(w){return new l(this.graphManager,w)},x.prototype.newEdge=function(w){return new f(null,null,w)},x.prototype.initParameters=function(){s.prototype.initParameters.call(this,arguments),this.isSubLayout||(c.DEFAULT_EDGE_LENGTH<10?this.idealEdgeLength=10:this.idealEdgeLength=c.DEFAULT_EDGE_LENGTH,this.useSmartIdealEdgeLengthCalculation=c.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION,this.springConstant=h.DEFAULT_SPRING_STRENGTH,this.repulsionConstant=h.DEFAULT_REPULSION_STRENGTH,this.gravityConstant=h.DEFAULT_GRAVITY_STRENGTH,this.compoundGravityConstant=h.DEFAULT_COMPOUND_GRAVITY_STRENGTH,this.gravityRangeFactor=h.DEFAULT_GRAVITY_RANGE_FACTOR,this.compoundGravityRangeFactor=h.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR,this.prunedNodesAll=[],this.growTreeIterations=0,this.afterGrowthIterations=0,this.isTreeGrowing=!1,this.isGrowthFinished=!1,this.coolingCycle=0,this.maxCoolingCycle=this.maxIterations/h.CONVERGENCE_CHECK_PERIOD,this.finalTemperature=h.CONVERGENCE_CHECK_PERIOD/this.maxIterations,this.coolingAdjuster=1)},x.prototype.layout=function(){var w=d.DEFAULT_CREATE_BENDS_AS_NEEDED;return w&&(this.createBendpoints(),this.graphManager.resetAllEdges()),this.level=0,this.classicLayout()},x.prototype.classicLayout=function(){if(this.nodesWithGravity=this.calculateNodesToApplyGravitationTo(),this.graphManager.setAllNodesToApplyGravitation(this.nodesWithGravity),this.calcNoOfChildrenForAllNodes(),this.graphManager.calcLowestCommonAncestors(),this.graphManager.calcInclusionTreeDepths(),this.graphManager.getRoot().calcEstimatedSize(),this.calcIdealEdgeLengths(),this.incremental){if(c.TREE_REDUCTION_ON_INCREMENTAL){this.reduceTrees(),this.graphManager.resetAllNodesToApplyGravitation();var T=new Set(this.getAllNodes()),C=this.nodesWithGravity.filter(function(I){return T.has(I)});this.graphManager.setAllNodesToApplyGravitation(C)}}else{var w=this.getFlatForest();if(w.length>0)this.positionNodesRadially(w);else{this.reduceTrees(),this.graphManager.resetAllNodesToApplyGravitation();var T=new Set(this.getAllNodes()),C=this.nodesWithGravity.filter(function(A){return T.has(A)});this.graphManager.setAllNodesToApplyGravitation(C),this.positionNodesRandomly()}}return this.initSpringEmbedder(),this.runSpringEmbedder(),!0},x.prototype.tick=function(){if(this.totalIterations++,this.totalIterations===this.maxIterations&&!this.isTreeGrowing&&!this.isGrowthFinished)if(this.prunedNodesAll.length>0)this.isTreeGrowing=!0;else return!0;if(this.totalIterations%h.CONVERGENCE_CHECK_PERIOD==0&&!this.isTreeGrowing&&!this.isGrowthFinished){if(this.isConverged())if(this.prunedNodesAll.length>0)this.isTreeGrowing=!0;else return!0;this.coolingCycle++,this.layoutQuality==0?this.coolingAdjuster=this.coolingCycle:this.layoutQuality==1&&(this.coolingAdjuster=this.coolingCycle/3),this.coolingFactor=Math.max(this.initialCoolingFactor-Math.pow(this.coolingCycle,Math.log(100*(this.initialCoolingFactor-this.finalTemperature))/Math.log(this.maxCoolingCycle))/100*this.coolingAdjuster,this.finalTemperature),this.animationPeriod=Math.ceil(this.initialAnimationPeriod*Math.sqrt(this.coolingFactor))}if(this.isTreeGrowing){if(this.growTreeIterations%10==0)if(this.prunedNodesAll.length>0){this.graphManager.updateBounds(),this.updateGrid(),this.growTree(this.prunedNodesAll),this.graphManager.resetAllNodesToApplyGravitation();var w=new Set(this.getAllNodes()),T=this.nodesWithGravity.filter(function(R){return w.has(R)});this.graphManager.setAllNodesToApplyGravitation(T),this.graphManager.updateBounds(),this.updateGrid(),this.coolingFactor=h.DEFAULT_COOLING_FACTOR_INCREMENTAL}else this.isTreeGrowing=!1,this.isGrowthFinished=!0;this.growTreeIterations++}if(this.isGrowthFinished){if(this.isConverged())return!0;this.afterGrowthIterations%10==0&&(this.graphManager.updateBounds(),this.updateGrid()),this.coolingFactor=h.DEFAULT_COOLING_FACTOR_INCREMENTAL*((100-this.afterGrowthIterations)/100),this.afterGrowthIterations++}var C=!this.isTreeGrowing&&!this.isGrowthFinished,A=this.growTreeIterations%10==1&&this.isTreeGrowing||this.afterGrowthIterations%10==1&&this.isGrowthFinished;return this.totalDisplacement=0,this.graphManager.updateBounds(),this.calcSpringForces(),this.calcRepulsionForces(C,A),this.calcGravitationalForces(),this.moveNodes(),this.animate(),!1},x.prototype.getPositionsData=function(){for(var w=this.graphManager.getAllNodes(),T={},C=0;C<w.length;C++){var A=w[C].rect,R=w[C].id;T[R]={id:R,x:A.getCenterX(),y:A.getCenterY(),w:A.width,h:A.height}}return T},x.prototype.runSpringEmbedder=function(){this.initialAnimationPeriod=25,this.animationPeriod=this.initialAnimationPeriod;var w=!1;if(h.ANIMATE==="during")this.emit("layoutstarted");else{for(;!w;)w=this.tick();this.graphManager.updateBounds()}},x.prototype.calculateNodesToApplyGravitationTo=function(){var w=[],T,C=this.graphManager.getGraphs(),A=C.length,R;for(R=0;R<A;R++)T=C[R],T.updateConnected(),T.isConnected||(w=w.concat(T.getNodes()));return w},x.prototype.createBendpoints=function(){var w=[];w=w.concat(this.graphManager.getAllEdges());var T=new Set,C;for(C=0;C<w.length;C++){var A=w[C];if(!T.has(A)){var R=A.getSource(),I=A.getTarget();if(R==I)A.getBendpoints().push(new p),A.getBendpoints().push(new p),this.createDummyNodesForBendpoints(A),T.add(A);else{var D=[];if(D=D.concat(R.getEdgeListToNode(I)),D=D.concat(I.getEdgeListToNode(R)),!T.has(D[0])){if(D.length>1){var _;for(_=0;_<D.length;_++){var M=D[_];M.getBendpoints().push(new p),this.createDummyNodesForBendpoints(M)}}D.forEach(function(k){T.add(k)})}}}if(T.size==w.length)break}},x.prototype.positionNodesRadially=function(w){for(var T=new v(0,0),C=Math.ceil(Math.sqrt(w.length)),A=0,R=0,I=0,D=new p(0,0),_=0;_<w.length;_++){_%C==0&&(I=0,R=A,_!=0&&(R+=c.DEFAULT_COMPONENT_SEPERATION),A=0);var M=w[_],k=g.findCenterOfTree(M);T.x=I,T.y=R,D=x.radialLayout(M,k,T),D.y>A&&(A=Math.floor(D.y)),I=Math.floor(D.x+c.DEFAULT_COMPONENT_SEPERATION)}this.transform(new p(d.WORLD_CENTER_X-D.x/2,d.WORLD_CENTER_Y-D.y/2))},x.radialLayout=function(w,T,C){var A=Math.max(this.maxDiagonalInTree(w),c.DEFAULT_RADIAL_SEPARATION);x.branchRadialLayout(T,null,0,359,0,A);var R=b.calculateBounds(w),I=new E;I.setDeviceOrgX(R.getMinX()),I.setDeviceOrgY(R.getMinY()),I.setWorldOrgX(C.x),I.setWorldOrgY(C.y);for(var D=0;D<w.length;D++){var _=w[D];_.transform(I)}var M=new p(R.getMaxX(),R.getMaxY());return I.inverseTransformPoint(M)},x.branchRadialLayout=function(w,T,C,A,R,I){var D=(A-C+1)/2;D<0&&(D+=180);var _=(D+C)%360,M=_*m.TWO_PI/360,k=R*Math.cos(M),O=R*Math.sin(M);w.setCenter(k,O);var P=[];P=P.concat(w.getEdges());var q=P.length;T!=null&&q--;for(var G=0,F=P.length,z,W=w.getEdgesBetween(T);W.length>1;){var N=W[0];W.splice(0,1);var B=P.indexOf(N);B>=0&&P.splice(B,1),F--,q--}T!=null?z=(P.indexOf(W[0])+1)%F:z=0;for(var $=Math.abs(A-C)/q,H=z;G!=q;H=++H%F){var te=P[H].getOtherEnd(w);if(te!=T){var K=(C+G*$)%360,V=(K+$)%360;x.branchRadialLayout(te,w,K,V,R+I,I),G++}}},x.maxDiagonalInTree=function(w){for(var T=y.MIN_VALUE,C=0;C<w.length;C++){var A=w[C],R=A.getDiagonal();R>T&&(T=R)}return T},x.prototype.calcRepulsionRange=function(){return 2*(this.level+1)*this.idealEdgeLength},x.prototype.groupZeroDegreeMembers=function(){var w=this,T={};this.memberGroups={},this.idToDummyNode={};for(var C=[],A=this.graphManager.getAllNodes(),R=0;R<A.length;R++){var I=A[R],D=I.getParent();this.getNodeDegreeWithChildren(I)===0&&(D.id==null||!this.getToBeTiled(D))&&C.push(I)}for(var R=0;R<C.length;R++){var I=C[R],_=I.getParent().id;typeof T[_]>"u"&&(T[_]=[]),T[_]=T[_].concat(I)}Object.keys(T).forEach(function(M){if(T[M].length>1){var k="DummyCompound_"+M;w.memberGroups[k]=T[M];var O=T[M][0].getParent(),P=new l(w.graphManager);P.id=k,P.paddingLeft=O.paddingLeft||0,P.paddingRight=O.paddingRight||0,P.paddingBottom=O.paddingBottom||0,P.paddingTop=O.paddingTop||0,w.idToDummyNode[k]=P;var q=w.getGraphManager().add(w.newGraph(),P),G=O.getChild();G.add(P);for(var F=0;F<T[M].length;F++){var z=T[M][F];G.remove(z),q.add(z)}}})},x.prototype.clearCompounds=function(){var w={},T={};this.performDFSOnCompounds();for(var C=0;C<this.compoundOrder.length;C++)T[this.compoundOrder[C].id]=this.compoundOrder[C],w[this.compoundOrder[C].id]=[].concat(this.compoundOrder[C].getChild().getNodes()),this.graphManager.remove(this.compoundOrder[C].getChild()),this.compoundOrder[C].child=null;this.graphManager.resetAllNodes(),this.tileCompoundMembers(w,T)},x.prototype.clearZeroDegreeMembers=function(){var w=this,T=this.tiledZeroDegreePack=[];Object.keys(this.memberGroups).forEach(function(C){var A=w.idToDummyNode[C];T[C]=w.tileNodes(w.memberGroups[C],A.paddingLeft+A.paddingRight),A.rect.width=T[C].width,A.rect.height=T[C].height})},x.prototype.repopulateCompounds=function(){for(var w=this.compoundOrder.length-1;w>=0;w--){var T=this.compoundOrder[w],C=T.id,A=T.paddingLeft,R=T.paddingTop;this.adjustLocations(this.tiledMemberPack[C],T.rect.x,T.rect.y,A,R)}},x.prototype.repopulateZeroDegreeMembers=function(){var w=this,T=this.tiledZeroDegreePack;Object.keys(T).forEach(function(C){var A=w.idToDummyNode[C],R=A.paddingLeft,I=A.paddingTop;w.adjustLocations(T[C],A.rect.x,A.rect.y,R,I)})},x.prototype.getToBeTiled=function(w){var T=w.id;if(this.toBeTiled[T]!=null)return this.toBeTiled[T];var C=w.getChild();if(C==null)return this.toBeTiled[T]=!1,!1;for(var A=C.getNodes(),R=0;R<A.length;R++){var I=A[R];if(this.getNodeDegree(I)>0)return this.toBeTiled[T]=!1,!1;if(I.getChild()==null){this.toBeTiled[I.id]=!1;continue}if(!this.getToBeTiled(I))return this.toBeTiled[T]=!1,!1}return this.toBeTiled[T]=!0,!0},x.prototype.getNodeDegree=function(w){w.id;for(var T=w.getEdges(),C=0,A=0;A<T.length;A++){var R=T[A];R.getSource().id!==R.getTarget().id&&(C=C+1)}return C},x.prototype.getNodeDegreeWithChildren=function(w){var T=this.getNodeDegree(w);if(w.getChild()==null)return T;for(var C=w.getChild().getNodes(),A=0;A<C.length;A++){var R=C[A];T+=this.getNodeDegreeWithChildren(R)}return T},x.prototype.performDFSOnCompounds=function(){this.compoundOrder=[],this.fillCompexOrderByDFS(this.graphManager.getRoot().getNodes())},x.prototype.fillCompexOrderByDFS=function(w){for(var T=0;T<w.length;T++){var C=w[T];C.getChild()!=null&&this.fillCompexOrderByDFS(C.getChild().getNodes()),this.getToBeTiled(C)&&this.compoundOrder.push(C)}},x.prototype.adjustLocations=function(w,T,C,A,R){T+=A,C+=R;for(var I=T,D=0;D<w.rows.length;D++){var _=w.rows[D];T=I;for(var M=0,k=0;k<_.length;k++){var O=_[k];O.rect.x=T,O.rect.y=C,T+=O.rect.width+w.horizontalPadding,O.rect.height>M&&(M=O.rect.height)}C+=M+w.verticalPadding}},x.prototype.tileCompoundMembers=function(w,T){var C=this;this.tiledMemberPack=[],Object.keys(w).forEach(function(A){var R=T[A];C.tiledMemberPack[A]=C.tileNodes(w[A],R.paddingLeft+R.paddingRight),R.rect.width=C.tiledMemberPack[A].width,R.rect.height=C.tiledMemberPack[A].height})},x.prototype.tileNodes=function(w,T){var C=c.TILING_PADDING_VERTICAL,A=c.TILING_PADDING_HORIZONTAL,R={rows:[],rowWidth:[],rowHeight:[],width:0,height:T,verticalPadding:C,horizontalPadding:A};w.sort(function(_,M){return _.rect.width*_.rect.height>M.rect.width*M.rect.height?-1:_.rect.width*_.rect.height<M.rect.width*M.rect.height?1:0});for(var I=0;I<w.length;I++){var D=w[I];R.rows.length==0?this.insertNodeToRow(R,D,0,T):this.canAddHorizontal(R,D.rect.width,D.rect.height)?this.insertNodeToRow(R,D,this.getShortestRowIndex(R),T):this.insertNodeToRow(R,D,R.rows.length,T),this.shiftToLastRow(R)}return R},x.prototype.insertNodeToRow=function(w,T,C,A){var R=A;if(C==w.rows.length){var I=[];w.rows.push(I),w.rowWidth.push(R),w.rowHeight.push(0)}var D=w.rowWidth[C]+T.rect.width;w.rows[C].length>0&&(D+=w.horizontalPadding),w.rowWidth[C]=D,w.width<D&&(w.width=D);var _=T.rect.height;C>0&&(_+=w.verticalPadding);var M=0;_>w.rowHeight[C]&&(M=w.rowHeight[C],w.rowHeight[C]=_,M=w.rowHeight[C]-M),w.height+=M,w.rows[C].push(T)},x.prototype.getShortestRowIndex=function(w){for(var T=-1,C=Number.MAX_VALUE,A=0;A<w.rows.length;A++)w.rowWidth[A]<C&&(T=A,C=w.rowWidth[A]);return T},x.prototype.getLongestRowIndex=function(w){for(var T=-1,C=Number.MIN_VALUE,A=0;A<w.rows.length;A++)w.rowWidth[A]>C&&(T=A,C=w.rowWidth[A]);return T},x.prototype.canAddHorizontal=function(w,T,C){var A=this.getShortestRowIndex(w);if(A<0)return!0;var R=w.rowWidth[A];if(R+w.horizontalPadding+T<=w.width)return!0;var I=0;w.rowHeight[A]<C&&A>0&&(I=C+w.verticalPadding-w.rowHeight[A]);var D;w.width-R>=T+w.horizontalPadding?D=(w.height+I)/(R+T+w.horizontalPadding):D=(w.height+I)/w.width,I=C+w.verticalPadding;var _;return w.width<T?_=(w.height+I)/T:_=(w.height+I)/w.width,_<1&&(_=1/_),D<1&&(D=1/D),D<_},x.prototype.shiftToLastRow=function(w){var T=this.getLongestRowIndex(w),C=w.rowWidth.length-1,A=w.rows[T],R=A[A.length-1],I=R.width+w.horizontalPadding;if(w.width-w.rowWidth[C]>I&&T!=C){A.splice(-1,1),w.rows[C].push(R),w.rowWidth[T]=w.rowWidth[T]-I,w.rowWidth[C]=w.rowWidth[C]+I,w.width=w.rowWidth[instance.getLongestRowIndex(w)];for(var D=Number.MIN_VALUE,_=0;_<A.length;_++)A[_].height>D&&(D=A[_].height);T>0&&(D+=w.verticalPadding);var M=w.rowHeight[T]+w.rowHeight[C];w.rowHeight[T]=D,w.rowHeight[C]<R.height+w.verticalPadding&&(w.rowHeight[C]=R.height+w.verticalPadding);var k=w.rowHeight[T]+w.rowHeight[C];w.height+=k-M,this.shiftToLastRow(w)}},x.prototype.tilingPreLayout=function(){c.TILE&&(this.groupZeroDegreeMembers(),this.clearCompounds(),this.clearZeroDegreeMembers())},x.prototype.tilingPostLayout=function(){c.TILE&&(this.repopulateZeroDegreeMembers(),this.repopulateCompounds())},x.prototype.reduceTrees=function(){for(var w=[],T=!0,C;T;){var A=this.graphManager.getAllNodes(),R=[];T=!1;for(var I=0;I<A.length;I++)C=A[I],C.getEdges().length==1&&!C.getEdges()[0].isInterGraph&&C.getChild()==null&&(R.push([C,C.getEdges()[0],C.getOwner()]),T=!0);if(T==!0){for(var D=[],_=0;_<R.length;_++)R[_][0].getEdges().length==1&&(D.push(R[_]),R[_][0].getOwner().remove(R[_][0]));w.push(D),this.graphManager.resetAllNodes(),this.graphManager.resetAllEdges()}}this.prunedNodesAll=w},x.prototype.growTree=function(w){for(var T=w.length,C=w[T-1],A,R=0;R<C.length;R++)A=C[R],this.findPlaceforPrunedNode(A),A[2].add(A[0]),A[2].add(A[1],A[1].source,A[1].target);w.splice(w.length-1,1),this.graphManager.resetAllNodes(),this.graphManager.resetAllEdges()},x.prototype.findPlaceforPrunedNode=function(w){var T,C,A=w[0];A==w[1].source?C=w[1].target:C=w[1].source;var R=C.startX,I=C.finishX,D=C.startY,_=C.finishY,M=0,k=0,O=0,P=0,q=[M,O,k,P];if(D>0)for(var G=R;G<=I;G++)q[0]+=this.grid[G][D-1].length+this.grid[G][D].length-1;if(I<this.grid.length-1)for(var G=D;G<=_;G++)q[1]+=this.grid[I+1][G].length+this.grid[I][G].length-1;if(_<this.grid[0].length-1)for(var G=R;G<=I;G++)q[2]+=this.grid[G][_+1].length+this.grid[G][_].length-1;if(R>0)for(var G=D;G<=_;G++)q[3]+=this.grid[R-1][G].length+this.grid[R][G].length-1;for(var F=y.MAX_VALUE,z,W,N=0;N<q.length;N++)q[N]<F?(F=q[N],z=1,W=N):q[N]==F&&z++;if(z==3&&F==0)q[0]==0&&q[1]==0&&q[2]==0?T=1:q[0]==0&&q[1]==0&&q[3]==0?T=0:q[0]==0&&q[2]==0&&q[3]==0?T=3:q[1]==0&&q[2]==0&&q[3]==0&&(T=2);else if(z==2&&F==0){var B=Math.floor(Math.random()*2);q[0]==0&&q[1]==0?B==0?T=0:T=1:q[0]==0&&q[2]==0?B==0?T=0:T=2:q[0]==0&&q[3]==0?B==0?T=0:T=3:q[1]==0&&q[2]==0?B==0?T=1:T=2:q[1]==0&&q[3]==0?B==0?T=1:T=3:B==0?T=2:T=3}else if(z==4&&F==0){var B=Math.floor(Math.random()*4);T=B}else T=W;T==0?A.setCenter(C.getCenterX(),C.getCenterY()-C.getHeight()/2-h.DEFAULT_EDGE_LENGTH-A.getHeight()/2):T==1?A.setCenter(C.getCenterX()+C.getWidth()/2+h.DEFAULT_EDGE_LENGTH+A.getWidth()/2,C.getCenterY()):T==2?A.setCenter(C.getCenterX(),C.getCenterY()+C.getHeight()/2+h.DEFAULT_EDGE_LENGTH+A.getHeight()/2):A.setCenter(C.getCenterX()-C.getWidth()/2-h.DEFAULT_EDGE_LENGTH-A.getWidth()/2,C.getCenterY())},n.exports=x},function(n,a,i){var s={};s.layoutBase=i(0),s.CoSEConstants=i(1),s.CoSEEdge=i(2),s.CoSEGraph=i(3),s.CoSEGraphManager=i(4),s.CoSELayout=i(6),s.CoSENode=i(5),n.exports=s}])})}(Md)),Md.exports}(function(t,e){(function(n,a){t.exports=a(yB())})(Sr,function(r){return function(n){var a={};function i(s){if(a[s])return a[s].exports;var o=a[s]={i:s,l:!1,exports:{}};return n[s].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=n,i.c=a,i.i=function(s){return s},i.d=function(s,o,u){i.o(s,o)||Object.defineProperty(s,o,{configurable:!1,enumerable:!0,get:u})},i.n=function(s){var o=s&&s.__esModule?function(){return s.default}:function(){return s};return i.d(o,"a",o),o},i.o=function(s,o){return Object.prototype.hasOwnProperty.call(s,o)},i.p="",i(i.s=1)}([function(n,a){n.exports=r},function(n,a,i){var s=i(0).layoutBase.LayoutConstants,o=i(0).layoutBase.FDLayoutConstants,u=i(0).CoSEConstants,l=i(0).CoSELayout,f=i(0).CoSENode,c=i(0).layoutBase.PointD,h=i(0).layoutBase.DimensionD,d={ready:function(){},stop:function(){},quality:"default",nodeDimensionsIncludeLabels:!1,refresh:30,fit:!0,padding:10,randomize:!0,nodeRepulsion:4500,idealEdgeLength:50,edgeElasticity:.45,nestingFactor:.1,gravity:.25,numIter:2500,tile:!0,animate:"end",animationDuration:500,tilingPaddingVertical:10,tilingPaddingHorizontal:10,gravityRangeCompound:1.5,gravityCompound:1,gravityRange:3.8,initialEnergyOnIncremental:.5};function v(m,b){var E={};for(var x in m)E[x]=m[x];for(var x in b)E[x]=b[x];return E}function p(m){this.options=v(d,m),g(this.options)}var g=function(b){b.nodeRepulsion!=null&&(u.DEFAULT_REPULSION_STRENGTH=o.DEFAULT_REPULSION_STRENGTH=b.nodeRepulsion),b.idealEdgeLength!=null&&(u.DEFAULT_EDGE_LENGTH=o.DEFAULT_EDGE_LENGTH=b.idealEdgeLength),b.edgeElasticity!=null&&(u.DEFAULT_SPRING_STRENGTH=o.DEFAULT_SPRING_STRENGTH=b.edgeElasticity),b.nestingFactor!=null&&(u.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=o.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=b.nestingFactor),b.gravity!=null&&(u.DEFAULT_GRAVITY_STRENGTH=o.DEFAULT_GRAVITY_STRENGTH=b.gravity),b.numIter!=null&&(u.MAX_ITERATIONS=o.MAX_ITERATIONS=b.numIter),b.gravityRange!=null&&(u.DEFAULT_GRAVITY_RANGE_FACTOR=o.DEFAULT_GRAVITY_RANGE_FACTOR=b.gravityRange),b.gravityCompound!=null&&(u.DEFAULT_COMPOUND_GRAVITY_STRENGTH=o.DEFAULT_COMPOUND_GRAVITY_STRENGTH=b.gravityCompound),b.gravityRangeCompound!=null&&(u.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=o.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=b.gravityRangeCompound),b.initialEnergyOnIncremental!=null&&(u.DEFAULT_COOLING_FACTOR_INCREMENTAL=o.DEFAULT_COOLING_FACTOR_INCREMENTAL=b.initialEnergyOnIncremental),b.quality=="draft"?s.QUALITY=0:b.quality=="proof"?s.QUALITY=2:s.QUALITY=1,u.NODE_DIMENSIONS_INCLUDE_LABELS=o.NODE_DIMENSIONS_INCLUDE_LABELS=s.NODE_DIMENSIONS_INCLUDE_LABELS=b.nodeDimensionsIncludeLabels,u.DEFAULT_INCREMENTAL=o.DEFAULT_INCREMENTAL=s.DEFAULT_INCREMENTAL=!b.randomize,u.ANIMATE=o.ANIMATE=s.ANIMATE=b.animate,u.TILE=b.tile,u.TILING_PADDING_VERTICAL=typeof b.tilingPaddingVertical=="function"?b.tilingPaddingVertical.call():b.tilingPaddingVertical,u.TILING_PADDING_HORIZONTAL=typeof b.tilingPaddingHorizontal=="function"?b.tilingPaddingHorizontal.call():b.tilingPaddingHorizontal};p.prototype.run=function(){var m,b,E=this.options;this.idToLNode={};var x=this.layout=new l,S=this;S.stopped=!1,this.cy=this.options.cy,this.cy.trigger({type:"layoutstart",layout:this});var w=x.newGraphManager();this.gm=w;var T=this.options.eles.nodes(),C=this.options.eles.edges();this.root=w.addRoot(),this.processChildrenList(this.root,this.getTopMostNodes(T),x);for(var A=0;A<C.length;A++){var R=C[A],I=this.idToLNode[R.data("source")],D=this.idToLNode[R.data("target")];if(I!==D&&I.getEdgesBetween(D).length==0){var _=w.add(x.newEdge(),I,D);_.id=R.id()}}var M=function(P,q){typeof P=="number"&&(P=q);var G=P.data("id"),F=S.idToLNode[G];return{x:F.getRect().getCenterX(),y:F.getRect().getCenterY()}},k=function O(){for(var P=function(){E.fit&&E.cy.fit(E.eles,E.padding),m||(m=!0,S.cy.one("layoutready",E.ready),S.cy.trigger({type:"layoutready",layout:S}))},q=S.options.refresh,G,F=0;F<q&&!G;F++)G=S.stopped||S.layout.tick();if(G){x.checkLayoutSuccess()&&!x.isSubLayout&&x.doPostLayout(),x.tilingPostLayout&&x.tilingPostLayout(),x.isLayoutFinished=!0,S.options.eles.nodes().positions(M),P(),S.cy.one("layoutstop",S.options.stop),S.cy.trigger({type:"layoutstop",layout:S}),b&&cancelAnimationFrame(b),m=!1;return}var z=S.layout.getPositionsData();E.eles.nodes().positions(function(W,N){if(typeof W=="number"&&(W=N),!W.isParent()){for(var B=W.id(),$=z[B],H=W;$==null&&($=z[H.data("parent")]||z["DummyCompound_"+H.data("parent")],z[B]=$,H=H.parent()[0],H!=null););return $!=null?{x:$.x,y:$.y}:{x:W.position("x"),y:W.position("y")}}}),P(),b=requestAnimationFrame(O)};return x.addListener("layoutstarted",function(){S.options.animate==="during"&&(b=requestAnimationFrame(k))}),x.runLayout(),this.options.animate!=="during"&&(S.options.eles.nodes().not(":parent").layoutPositions(S,S.options,M),m=!1),this},p.prototype.getTopMostNodes=function(m){for(var b={},E=0;E<m.length;E++)b[m[E].id()]=!0;var x=m.filter(function(S,w){typeof S=="number"&&(S=w);for(var T=S.parent()[0];T!=null;){if(b[T.id()])return!1;T=T.parent()[0]}return!0});return x},p.prototype.processChildrenList=function(m,b,E){for(var x=b.length,S=0;S<x;S++){var w=b[S],T=w.children(),C,A=w.layoutDimensions({nodeDimensionsIncludeLabels:this.options.nodeDimensionsIncludeLabels});if(w.outerWidth()!=null&&w.outerHeight()!=null?C=m.add(new f(E.graphManager,new c(w.position("x")-A.w/2,w.position("y")-A.h/2),new h(parseFloat(A.w),parseFloat(A.h)))):C=m.add(new f(this.graphManager)),C.id=w.data("id"),C.paddingLeft=parseInt(w.css("padding")),C.paddingTop=parseInt(w.css("padding")),C.paddingRight=parseInt(w.css("padding")),C.paddingBottom=parseInt(w.css("padding")),this.options.nodeDimensionsIncludeLabels&&w.isParent()){var R=w.boundingBox({includeLabels:!0,includeNodes:!1}).w,I=w.boundingBox({includeLabels:!0,includeNodes:!1}).h,D=w.css("text-halign");C.labelWidth=R,C.labelHeight=I,C.labelPos=D}if(this.idToLNode[w.data("id")]=C,isNaN(C.rect.x)&&(C.rect.x=0),isNaN(C.rect.y)&&(C.rect.y=0),T!=null&&T.length>0){var _;_=E.getGraphManager().add(E.newGraph(),C),this.processChildrenList(_,T,E)}}},p.prototype.stop=function(){return this.stopped=!0,this};var y=function(b){b("layout","cose-bilkent",p)};typeof cytoscape<"u"&&y(cytoscape),n.exports=y}])})})(iS);var mB=iS.exports;const bB=Vv(mB);let Lr=[],sS=[],ov=new Map,qi=null,Oe=null,Er="cose",Zr="name",va="asc",rn=new Map,Bn="",Gi="characters",Yt=!1;function oS(){return Yt=window.innerWidth<=768,Yt}async function wB(){try{oS(),window.addEventListener("resize",EB);const t=await fetch("matchups.json");if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);if(Lr=await t.json(),!Array.isArray(Lr)||Lr.length===0)throw new Error("Invalid data format or empty data");xB(),ug(),AB(),RB(),_B(),IB(),uS(),await SB();try{LB()}catch(e){console.warn("Graph initialization failed:",e);const r=document.querySelector('.view-btn[data-view="graph"]');r&&(r.style.display="none")}lg("Naruto Uzumaki")}catch(t){console.error("Error loading matchups data:",t),document.body.innerHTML=`<div style="text-align: center; padding: 50px; color: white;">
            <h1>Error loading data</h1>
            <p>Please make sure matchups.json exists and contains valid JSON.</p>
            <p style="font-size: 0.8em; opacity: 0.7;">${t.message}</p>
            <p style="font-size: 0.6em; opacity: 0.5; white-space: pre-wrap; text-align: left; max-width: 800px; margin: 20px auto;">${t.stack}</p>
        </div>`}}function EB(){const t=Yt;oS(),t!==Yt&&uS()}function uS(){const t=document.getElementById("charactersPanel"),e=document.getElementById("detailsPanel");Yt?Gi==="characters"?(t==null||t.classList.add("active"),e==null||e.classList.remove("active")):(t==null||t.classList.remove("active"),e==null||e.classList.add("active")):(t==null||t.classList.remove("active"),e==null||e.classList.remove("active")),lS()}function lS(){const t=document.getElementById("charactersTab"),e=document.getElementById("detailsTab");Gi==="characters"?(t==null||t.classList.add("active"),e==null||e.classList.remove("active")):(t==null||t.classList.remove("active"),e==null||e.classList.add("active"))}function xB(){const t=new Set;Lr.forEach(e=>{!e||typeof e!="object"||Object.keys(e).forEach(r=>{t.add(r)})}),sS=Array.from(t),TB()}function TB(){ov.clear(),Lr.forEach(t=>{!t||typeof t!="object"||Object.keys(t).forEach(e=>{const r=t[e];if(!Array.isArray(r))return;let n=0,a=0,i=0;r.forEach(o=>{if(!o||typeof o!="object")return;let u;o.result?u=o.result:u=Object.values(o)[0],u==="win"?n++:u==="lose"?a++:u==="draw"&&i++});const s=n+a+i;ov.set(e,{wins:n,losses:a,draws:i,total:s})})})}function Pd(t){return ov.get(t)||{wins:0,losses:0,draws:0,total:0}}const zi={"Danz Shimura":"Danz_Shimura","Danzo Shimura":"Danz_Shimura","Yugito Nii":"Yugito_Nii","Hiruzen Sarutobi":"Hiruzen_Sarutobi","Third Hokage Hiruzen Sarutobi":"Hiruzen_Sarutobi","Gengetsu Hzuki (Second Mizukage)":"Gengetsu_Hzuki","Gengetsu Hozuki (Second Mizukage)":"Gengetsu_Hzuki","Second Mizukage":"Second_Mizukage","Rshi (Four-Tails)":"Rshi","Roshi (Four-Tails)":"Rshi",Rshi:"Rshi",Roshi:"Rshi",Nagato:"Nagato","Pain (Nagato)":"Nagato",Pain:"Nagato","Rasa (Fourth Kazekage)":"Rasa",Rasa:"Rasa","Fourth Kazekage":"Rasa",noki:"noki",Onoki:"noki","Neji Hyga":"Neji_Hyga","Neji Hyuga":"Neji_Hyga","M (Second Tsuchikage)":"M","Mu (Second Tsuchikage)":"M",M:"M",Mu:"M","Mei Terum (Fifth Mizukage)":"Mei_Terum","Mei Terumi (Fifth Mizukage)":"Mei_Terum","Fifth Mizukage":"Mei_Terum","Kurenai Yhi":"Kurenai_Yhi","Kurenai Yuhi":"Kurenai_Yhi",Kidmaru:"Kidmaru",Kidomaru:"Kidmaru",Kankur:"Kankur",Kankuro:"Kankur",Jirb:"Jirb",Jirobo:"Jirb","Hinata Hyga":"Hinata_Hyga","Hinata Hyuga":"Hinata_Hyga","F (Seven-Tails)":"F","Fu (Seven-Tails)":"F",F:"F",Fu:"F","Yagura Karatachi":"Yagura_Karatachi","Fourth Raikage A":"Fourth_Raikage_A","A (Fourth Raikage)":"Fourth_Raikage_A","A (Third Raikage)":"A","Third Raikage":"A","Kaguya tsutsuki":"Kaguya_tsutsuki","Kaguya Otsutsuki":"Kaguya_tsutsuki",Hanz:"Hanz",Hanzo:"Hanz"};function fS(t,e=!1){if(!t)return"none";const r=t.split("(")[0].trim();if(e&&rn.has(r)){const a=rn.get(r);return a||"none"}let n=zi[t]||zi[r];return n||(n=r.replace(/\s+/g,"_")),`img/${n}.png`}function CB(t){return new Promise(e=>{if(!t){e(null);return}const r=t.split("(")[0].trim();if(rn.has(r)){e(rn.get(r));return}const n=new Image,a=fS(t,!1);n.onload=()=>{rn.set(r,a),e(a)},n.onerror=()=>{rn.set(r,null),e(null)},n.src=a})}async function SB(){const t=new Set;Lr.forEach(n=>{!n||typeof n!="object"||Object.keys(n).forEach(a=>{if(a){const i=a.split("(")[0].trim();t.add(i)}})});const e=Array.from(t),r=10;for(let n=0;n<e.length;n+=r){const a=e.slice(n,n+r);await Promise.all(a.map(i=>CB(i)))}console.log(`Preloaded ${rn.size} images`)}function uv(t,e=""){const r=document.createElement("img");if(!t)return r;const n=t.split("(")[0].trim(),a=encodeURIComponent(n);let i=zi[t]||zi[n];i||(i=n.replace(/\s+/g,"_"));const s=n.toLowerCase().replace(/\s+/g,"_").replace(/[^a-z0-9_]/g,"").replace(/_+/g,"_"),o=[`img/${i}.png`,`img/${i}.jpg`,`img/${i}.jpeg`,`img/${i}.gif`,`https://vignette.wikia.nocookie.net/naruto/images/thumb/${s.charAt(0)}/${s}/revision/latest/scale-to-width-down/200`,`https://static.wikia.nocookie.net/naruto/images/thumb/${s.charAt(0)}/${s}/revision/latest/scale-to-width-down/200`,`https://ui-avatars.com/api/?name=${a}&background=ff6b35&color=fff&size=200&bold=true&font-size=0.4`];let u=0;r.className=e,r.alt=t,r.loading="lazy";function l(){u<o.length&&(r.src=o[u],u++)}return r.onerror=()=>{u<o.length-1&&setTimeout(()=>l(),100)},l(),r}function ug(){const t=document.getElementById("characterGrid");if(!t)return;t.innerHTML="";const e=[...sS].sort((n,a)=>{const i=Pd(n),s=Pd(a);let o=0;switch(Zr){case"name":o=n.localeCompare(a);break;case"wins":o=i.wins-s.wins;break;case"losses":o=i.losses-s.losses;break;case"draws":o=i.draws-s.draws;break;case"total":o=i.total-s.total;break}return va==="asc"?o:-o}),r=Bn?e.filter(n=>n.toLowerCase().includes(Bn)):e;if(r.length===0&&Bn){t.innerHTML='<div class="no-results" style="grid-column: 1/-1; text-align: center; color: var(--text-secondary); padding: 40px;">No characters found matching your search.</div>';return}r.forEach(n=>{const a=Pd(n),i=document.createElement("div");i.className="character-card",i.dataset.character=n,n===qi&&i.classList.add("active");const s=uv(n);i.innerHTML=`
            <h3>${n}</h3>
            <div class="card-stats">
                <span class="card-stat win">W: ${a.wins}</span>
                <span class="card-stat lose">L: ${a.losses}</span>
                <span class="card-stat draw">D: ${a.draws}</span>
            </div>
        `,i.insertBefore(s,i.firstChild),i.addEventListener("click",()=>{lg(n),Yt&&ma("details")}),t.appendChild(i)})}let DE=null;function AB(){const t=document.getElementById("characterSearch");t&&t.addEventListener("input",e=>{Bn=e.target.value.toLowerCase().trim(),ug(),clearTimeout(DE),Bn.length>=2&&(DE=setTimeout(()=>{EI(Bn)},1e3))})}function RB(){const t=document.getElementById("sortSelect"),e={name:"Sort by: Name",wins:"Sort by: Wins",losses:"Sort by: Losses",draws:"Sort by: Draws",total:"Sort by: Total Fights"};function r(a){if(!a)return;const i=va==="asc"?" ":" ",s=a.querySelector(`option[value="${Zr}"]`);s&&(s.textContent=e[Zr]+i),Object.keys(e).forEach(o=>{if(o!==Zr){const u=a.querySelector(`option[value="${o}"]`);u&&(u.textContent=e[o])}})}function n(a){Zr===a?va=va==="asc"?"desc":"asc":(Zr=a,va=a==="name"?"asc":"desc"),r(t),ug(),qi&&document.querySelectorAll(".character-card").forEach(i=>{i.classList.remove("active"),i.dataset.character===qi&&i.classList.add("active")})}t&&(t.value=Zr,t.addEventListener("change",a=>n(a.target.value)))}function IB(){const t=document.getElementById("charactersTab"),e=document.getElementById("detailsTab"),r=document.getElementById("backToCharacters");t&&t.addEventListener("click",()=>{Yt&&ma("characters",!0)}),e&&e.addEventListener("click",()=>{Yt&&!e.disabled&&ma("details")}),r&&r.addEventListener("click",()=>{Yt&&ma("characters",!0)})}function ma(t,e=!1){if(!Yt||Gi===t)return;const r=document.getElementById("charactersPanel"),n=document.getElementById("detailsPanel");document.startViewTransition?(e&&document.documentElement.classList.add("going-back"),document.startViewTransition(()=>{_E(t,r,n)}).finished.then(()=>{document.documentElement.classList.remove("going-back")})):_E(t,r,n),Gi=t,lS()}function _E(t,e,r){t==="characters"?(e==null||e.classList.add("active"),r==null||r.classList.remove("active")):(e==null||e.classList.remove("active"),r==null||r.classList.add("active"))}function lg(t){if(!t)return;qi=t,bI(t),document.querySelectorAll(".character-card").forEach(i=>{i.classList.remove("active"),i.dataset.character===t&&i.classList.add("active")});const e=document.getElementById("detailsTab"),r=document.getElementById("selectedTabName");if(e&&(e.disabled=!1),r){const i=t.split(" ")[0];r.textContent=i}const n=Lr.find(i=>i&&i[t]),a=n?n[t]:[];DB(t,a)}function DB(t,e){const r=document.getElementById("selectedCharacterName"),n=document.getElementById("selectedCharacterImage"),a=document.getElementById("matchupsList");if(!r||!n||!a)return;r.textContent=t;const i=uv(t,"character-profile-large");i.id="selectedCharacterImage",n.replaceWith(i);let s=0,o=0,u=0;Array.isArray(e)&&e.forEach(g=>{if(!g)return;let y;g.result?y=g.result:y=Object.values(g)[0],y==="win"?s++:y==="lose"?o++:y==="draw"&&u++});const l=s+o+u,f=l>0?(s/l*100).toFixed(1):0,c=document.getElementById("totalFights");c&&(c.textContent=l);const h=document.getElementById("winsCount");h&&(h.textContent=s);const d=document.getElementById("lossesCount");d&&(d.textContent=o);const v=document.getElementById("drawsCount");v&&(v.textContent=u);const p=document.getElementById("winPercentage");p&&(p.textContent=`${f}%`),a.innerHTML="",!e||e.length===0?a.innerHTML='<p style="text-align: center; color: var(--text-secondary); padding: 40px;">No matchups found for this character.</p>':e.forEach(g=>{if(!g)return;let y,m,b,E,x;if(g.opponent&&g.result)y=g.opponent,m=g.result,b=g.summary||"",E=g.manga||"",x=g.anime||"";else{if(y=Object.keys(g)[0],!y)return;m=g[y],b="",E="",x=""}const S=document.createElement("div");S.className=`matchup-item ${m}`;const w=y.match(/\((.+)\)/),T=w?y.replace(/\(.+\)/,"").trim():y,C=w?w[1]:null,A=uv(T,"matchup-opponent-image");let R="";(b||E||x)&&(R='<div class="matchup-details">',b&&(R+=`<div class="matchup-summary">${b}</div>`),(E||x)&&(R+='<div class="matchup-references">',E&&E!=="N/A"&&(R+=`<span class="matchup-reference"><span class="reference-label"> Manga:</span> ${E}</span>`),x&&x!=="N/A"&&(R+=`<span class="matchup-reference"><span class="reference-label"> Anime:</span> ${x}</span>`),R+="</div>"),R+="</div>"),S.innerHTML=`
                <div class="matchup-info">
                    <div class="matchup-opponent-name">${T}</div>
                    ${C?`<div class="matchup-context">${C}</div>`:""}
                    ${R}
                </div>
                <div class="matchup-result ${m}">${m}</div>
            `,S.insertBefore(A,S.firstChild),a.appendChild(S)})}function _B(){const t=document.querySelectorAll(".view-btn"),e=document.getElementById("listViewContainer"),r=document.getElementById("graphVisualization");t.forEach(n=>{n.addEventListener("click",()=>{const a=n.dataset.view;document.startViewTransition?document.startViewTransition(()=>{LE(a,t,e,r)}):LE(a,t,e,r)})})}function LE(t,e,r,n){var a;wI(t),e.forEach(i=>i.classList.remove("active")),(a=document.querySelector(`.view-btn[data-view="${t}"]`))==null||a.classList.add("active"),t==="list"?(r&&(r.style.display="flex"),n&&(n.style.display="none")):(r&&(r.style.display="none"),n&&(n.style.display="flex"),setTimeout(()=>{Oe&&(Oe.resize(),Oe.fit(),qt())},100))}function cS(){const t=new Map,e=[],r=new Map,n=new Set;let a=0;function i(s){if(!s)return-1;const o=s.split("(")[0].trim();return r.has(o)||r.set(o,a++),r.get(o)}return Lr.forEach(s=>{!s||typeof s!="object"||Object.keys(s).forEach(o=>{const u=s[o];if(!Array.isArray(u))return;const l=o.split("(")[0].trim(),f=i(o);t.has(f)||t.set(f,{id:f.toString(),label:l,name:l,wins:0,losses:0,draws:0}),u.forEach(c=>{if(!c||typeof c!="object")return;let h,d;if(c.opponent&&c.result)h=c.opponent,d=c.result;else{if(h=Object.keys(c)[0],!h)return;d=c[h]}const v=h.split("(")[0].trim(),p=i(v);t.has(p)||t.set(p,{id:p.toString(),label:v,name:v,wins:0,losses:0,draws:0});let g=null;if(d==="win")g={source:f.toString(),target:p.toString(),type:"win",label:"wins"};else if(d==="lose")g={source:p.toString(),target:f.toString(),type:"win",label:"wins"};else if(d==="draw"){const y=f<p?f:p,m=f<p?p:f;g={source:y.toString(),target:m.toString(),type:"draw",label:"draws",bidirectional:!0}}if(g){const y=`${g.source}-${g.target}-${g.type}`;if(!n.has(y)){n.add(y),e.push(g);const m=t.get(parseInt(g.source)),b=t.get(parseInt(g.target));g.type==="win"?(m&&m.wins++,b&&b.losses++):g.type==="draw"&&(m&&m.draws++,b&&b.draws++)}}})})}),{nodes:Array.from(t.values()),edges:e}}function LB(){const t=cS(),e=new Map;t.edges.forEach((s,o)=>{const u=`${s.source}-${s.target}-${s.type}`;e.has(u)||(s.id=`e${o}`,e.set(u,s))});function r(){var u,l;const s=((u=document.getElementById("showDraws"))==null?void 0:u.checked)??!0,o=((l=document.getElementById("showLosses"))==null?void 0:l.checked)??!0;return t.edges.filter(f=>f.type==="draw"?s:f.type==="win"?o:!0)}const n=document.getElementById("cy");if(!n)return;Oe=cytoscape({container:n,elements:[...t.nodes.map(s=>({data:{id:s.id,label:s.label,name:s.name,wins:s.wins,losses:s.losses,draws:s.draws,imageUrl:fS(s.name,!0)}})),...r().map((s,o)=>({data:{id:s.id||`e${o}-${s.source}-${s.target}`,source:s.source,target:s.target,type:s.type,label:s.label}}))],style:[{selector:"node",style:{"background-color":"#ff6b35",label:"data(label)",width:80,height:80,shape:"ellipse","border-width":3,"border-color":"#f7931e",color:"#ffffff","text-valign":"bottom","text-halign":"center","font-size":"11px","font-weight":"bold","text-wrap":"wrap","text-max-width":"90px","text-outline-width":2,"text-outline-color":"#000000","text-margin-y":-5}},{selector:'node[imageUrl != "none"]',style:{"background-image":"data(imageUrl)","background-fit":"cover","background-clip":"node","background-image-opacity":1}},{selector:"node[wins > 10]",style:{"border-color":"#4caf50",width:100,height:100,"font-size":"12px","border-width":4}},{selector:"node[losses > 5]",style:{"border-color":"#f44336",width:90,height:90,"border-width":4}},{selector:'edge[type = "win"]',style:{width:3,"line-color":"#4caf50","target-arrow-color":"#4caf50","target-arrow-shape":"triangle","arrow-scale":1.5,"curve-style":"bezier",opacity:.7}},{selector:'edge[type = "draw"]',style:{width:2,"line-color":"#ff9800","line-style":"dashed","target-arrow-shape":"none",opacity:.5}},{selector:"node:selected",style:{"border-width":5,"border-color":"#ffffff"}},{selector:"edge:selected",style:{width:5,opacity:1}}],layout:{name:Er,animate:!0,animationDuration:1e3,fit:!0,padding:50}}),Oe.on("tap","node",function(s){const u=s.target.data("name"),l=document.querySelector('.view-btn[data-view="list"]');l&&l.click(),setTimeout(()=>{lg(u),Yt&&ma("details")},100)});const a=document.getElementById("nodeCount");a&&(a.textContent=`Nodes: ${t.nodes.length}`);const i=document.getElementById("edgeCount");i&&(i.textContent=`Edges: ${r().length}`),MB(),OB(),qt()}function MB(){if(!Oe)return;const t=document.getElementById("zoomIn");t&&t.addEventListener("click",()=>{const n=Oe.zoom(),a=Math.min(3,n*1.2);Oe.zoom(a),qt()});const e=document.getElementById("zoomOut");e&&e.addEventListener("click",()=>{const n=Oe.zoom(),a=Math.max(.1,n*.8);Oe.zoom(a),qt()}),Oe.on("wheel",n=>{n.preventDefault();const a=n.originalEvent,i=a.deltaY,o=(a.buttons&4)===4,u=Oe.zoom(),l=o?.1:.05,f=i>0?1-l:1+l;let c=u*f;c=Math.max(.1,Math.min(3,c)),Oe.zoom(c),qt()}),Oe.on("mousedown",n=>{const a=n.originalEvent;a.button===1&&a.preventDefault()});const r=document.getElementById("cy");r&&(r.addEventListener("mousedown",n=>{n.button===1&&n.preventDefault()}),r.addEventListener("contextmenu",n=>{n.preventDefault()})),Oe.on("zoom",()=>{qt()})}function qt(){if(!Oe)return;const t=Math.round(Oe.zoom()*100),e=document.getElementById("zoomLevel");e&&(e.textContent=`Zoom: ${t}%`)}function OB(){const t=document.getElementById("resetGraph");t&&t.addEventListener("click",()=>{Oe&&(Oe.fit(),Oe.center(),qt())});const e=document.getElementById("layoutGraph");e&&e.addEventListener("click",()=>{const u=["cose","breadthfirst","grid","circle","concentric"],f=(u.indexOf(Er)+1)%u.length;Er=u[f];const c=document.getElementById("layoutSelect");c&&(c.value=Er),lv(Er)});const r=document.getElementById("layoutSelect");r&&r.addEventListener("change",u=>{Er=u.target.value,lv(Er)});const n=document.getElementById("showDraws");n&&n.addEventListener("change",()=>{ME()});const a=document.getElementById("showLosses");a&&a.addEventListener("change",()=>{ME()});const i=document.getElementById("fullscreenBtn"),s=document.querySelector(".graph-visualization");i&&s&&i.addEventListener("click",()=>{document.fullscreenElement?(document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen(),s.classList.remove("fullscreen"),i.textContent=" Fullscreen",setTimeout(()=>{Oe&&(Oe.resize(),Oe.fit(),qt())},100)):(s.requestFullscreen?s.requestFullscreen():s.webkitRequestFullscreen?s.webkitRequestFullscreen():s.msRequestFullscreen&&s.msRequestFullscreen(),s.classList.add("fullscreen"),i.textContent=" Exit Fullscreen",setTimeout(()=>{Oe&&(Oe.resize(),Oe.fit(),qt())},100))}),document.addEventListener("fullscreenchange",o),document.addEventListener("webkitfullscreenchange",o),document.addEventListener("msfullscreenchange",o);function o(){!document.fullscreenElement&&!document.webkitFullscreenElement&&!document.msFullscreenElement&&(s&&s.classList.remove("fullscreen"),i&&(i.textContent=" Fullscreen"),setTimeout(()=>{Oe&&(Oe.resize(),qt())},100))}}function lv(t){if(!Oe)return;const e={name:t,animate:!0,animationDuration:1e3,fit:!0,padding:50};t==="breadthfirst"?(e.directed=!0,e.spacingFactor=1.5):t==="cose"?(e.nodeRepulsion=4500,e.idealEdgeLength=100,e.edgeElasticity=.45):t==="grid"?e.rows=Math.ceil(Math.sqrt(Oe.nodes().length)):t==="concentric"&&(e.minNodeSpacing=50),Oe.layout(e).run(),qt()}function ME(){if(!Oe)return;const t=cS(),e=document.getElementById("showDraws"),r=document.getElementById("showLosses"),n=e?e.checked:!0,a=r?r.checked:!0;Oe.elements("edge").remove();const i=t.edges.filter(o=>o.type==="draw"?n:o.type==="win"?a:!0);i.forEach((o,u)=>{Oe.add({data:{id:`e${u}-${o.source}-${o.target}`,source:o.source,target:o.target,type:o.type,label:o.label}})});const s=document.getElementById("edgeCount");s&&(s.textContent=`Edges: ${i.length}`),lv(Er),qt()}function PB(){const t=document.getElementById("aboutBtn"),e=document.getElementById("aboutModal"),r=document.getElementById("closeAbout");t&&e&&t.addEventListener("click",()=>{e.classList.add("active"),document.body.style.overflow="hidden"}),r&&e&&r.addEventListener("click",()=>{e.classList.remove("active"),document.body.style.overflow=""}),e&&e.addEventListener("click",n=>{n.target===e&&(e.classList.remove("active"),document.body.style.overflow="")}),document.addEventListener("keydown",n=>{n.key==="Escape"&&(e!=null&&e.classList.contains("active"))&&(e.classList.remove("active"),document.body.style.overflow="")})}document.addEventListener("DOMContentLoaded",()=>{wB(),PB()});gB(hr,dB);bB(hr);window.cytoscape=hr;
