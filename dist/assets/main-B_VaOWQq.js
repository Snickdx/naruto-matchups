(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();const IS=()=>{};var wg={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xE=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let a=t.charCodeAt(n);a<128?e[r++]=a:a<2048?(e[r++]=a>>6|192,e[r++]=a&63|128):(a&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(a=65536+((a&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=a>>18|240,e[r++]=a>>12&63|128,e[r++]=a>>6&63|128,e[r++]=a&63|128):(e[r++]=a>>12|224,e[r++]=a>>6&63|128,e[r++]=a&63|128)}return e},RS=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const a=t[r++];if(a<128)e[n++]=String.fromCharCode(a);else if(a>191&&a<224){const i=t[r++];e[n++]=String.fromCharCode((a&31)<<6|i&63)}else if(a>239&&a<365){const i=t[r++],s=t[r++],o=t[r++],u=((a&7)<<18|(i&63)<<12|(s&63)<<6|o&63)-65536;e[n++]=String.fromCharCode(55296+(u>>10)),e[n++]=String.fromCharCode(56320+(u&1023))}else{const i=t[r++],s=t[r++];e[n++]=String.fromCharCode((a&15)<<12|(i&63)<<6|s&63)}}return e.join("")},TE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let a=0;a<t.length;a+=3){const i=t[a],s=a+1<t.length,o=s?t[a+1]:0,u=a+2<t.length,l=u?t[a+2]:0,f=i>>2,c=(i&3)<<4|o>>4;let h=(o&15)<<2|l>>6,d=l&63;u||(d=64,s||(h=64)),n.push(r[f],r[c],r[h],r[d])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(xE(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):RS(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let a=0;a<t.length;){const i=r[t.charAt(a++)],o=a<t.length?r[t.charAt(a)]:0;++a;const l=a<t.length?r[t.charAt(a)]:64;++a;const c=a<t.length?r[t.charAt(a)]:64;if(++a,i==null||o==null||l==null||c==null)throw new DS;const h=i<<2|o>>4;if(n.push(h),l!==64){const d=o<<4&240|l>>2;if(n.push(d),c!==64){const v=l<<6&192|c;n.push(v)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class DS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const _S=function(t){const e=xE(t);return TE.encodeByteArray(e,!0)},CE=function(t){return _S(t).replace(/\./g,"")},LS=function(t){try{return TE.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OS=()=>MS().__FIREBASE_DEFAULTS__,PS=()=>{if(typeof process>"u"||typeof wg>"u")return;const t=wg.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},kS=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&LS(t[1]);return e&&JSON.parse(e)},NS=()=>{try{return IS()||OS()||PS()||kS()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},SE=()=>{var t;return(t=NS())==null?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}}function FS(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function AE(){try{return typeof indexedDB=="object"}catch{return!1}}function IE(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(n);a.onsuccess=()=>{a.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},a.onupgradeneeded=()=>{r=!1},a.onerror=()=>{var i;e(((i=a.error)==null?void 0:i.message)||"")}}catch(r){e(r)}})}function qS(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GS="FirebaseError";class An extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=GS,Object.setPrototypeOf(this,An.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,cs.prototype.create)}}class cs{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},a=`${this.service}/${e}`,i=this.errors[e],s=i?zS(i,n):"Error",o=`${this.serviceName}: ${s} (${a}).`;return new An(a,o,n)}}function zS(t,e){return t.replace($S,(r,n)=>{const a=e[n];return a!=null?String(a):`<${n}?>`})}const $S=/\{\$([^}]+)}/g;function Gi(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const a of r){if(!n.includes(a))return!1;const i=t[a],s=e[a];if(Eg(i)&&Eg(s)){if(!Gi(i,s))return!1}else if(i!==s)return!1}for(const a of n)if(!r.includes(a))return!1;return!0}function Eg(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VS=1e3,US=2,HS=4*60*60*1e3,YS=.5;function xg(t,e=VS,r=US){const n=e*Math.pow(r,t),a=Math.round(YS*n*(Math.random()-.5)*2);return Math.min(HS,n+a)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vv(t){return t&&t._delegate?t._delegate:t}class Ur{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const un="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WS{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new BS;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:r});a&&n.resolve(a)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),n=(e==null?void 0:e.optional)??!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(n)return null;throw a}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(KS(e))try{this.getOrInitializeService({instanceIdentifier:un})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(r);try{const i=this.getOrInitializeService({instanceIdentifier:a});n.resolve(i)}catch{}}}}clearInstance(e=un){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=un){return this.instances.has(e)}getOptions(e=un){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[i,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(i);n===o&&s.resolve(a)}return a}onInit(e,r){const n=this.normalizeInstanceIdentifier(r),a=this.onInitCallbacks.get(n)??new Set;a.add(e),this.onInitCallbacks.set(n,a);const i=this.instances.get(n);return i&&e(i,n),()=>{a.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const a of n)try{a(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:XS(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=un){return this.component?this.component.multipleInstances?e:un:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function XS(t){return t===un?void 0:t}function KS(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jS{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new WS(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Xe||(Xe={}));const ZS={debug:Xe.DEBUG,verbose:Xe.VERBOSE,info:Xe.INFO,warn:Xe.WARN,error:Xe.ERROR,silent:Xe.SILENT},QS=Xe.INFO,JS={[Xe.DEBUG]:"log",[Xe.VERBOSE]:"log",[Xe.INFO]:"info",[Xe.WARN]:"warn",[Xe.ERROR]:"error"},eA=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),a=JS[e];if(a)console[a](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class RE{constructor(e){this.name=e,this._logLevel=QS,this._logHandler=eA,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Xe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?ZS[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Xe.DEBUG,...e),this._logHandler(this,Xe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Xe.VERBOSE,...e),this._logHandler(this,Xe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Xe.INFO,...e),this._logHandler(this,Xe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Xe.WARN,...e),this._logHandler(this,Xe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Xe.ERROR,...e),this._logHandler(this,Xe.ERROR,...e)}}const tA=(t,e)=>e.some(r=>t instanceof r);let Tg,Cg;function rA(){return Tg||(Tg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function nA(){return Cg||(Cg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const DE=new WeakMap,Nd=new WeakMap,_E=new WeakMap,to=new WeakMap,gv=new WeakMap;function aA(t){const e=new Promise((r,n)=>{const a=()=>{t.removeEventListener("success",i),t.removeEventListener("error",s)},i=()=>{r(Br(t.result)),a()},s=()=>{n(t.error),a()};t.addEventListener("success",i),t.addEventListener("error",s)});return e.then(r=>{r instanceof IDBCursor&&DE.set(r,t)}).catch(()=>{}),gv.set(e,t),e}function iA(t){if(Nd.has(t))return;const e=new Promise((r,n)=>{const a=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",s),t.removeEventListener("abort",s)},i=()=>{r(),a()},s=()=>{n(t.error||new DOMException("AbortError","AbortError")),a()};t.addEventListener("complete",i),t.addEventListener("error",s),t.addEventListener("abort",s)});Nd.set(t,e)}let Bd={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return Nd.get(t);if(e==="objectStoreNames")return t.objectStoreNames||_E.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return Br(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function sA(t){Bd=t(Bd)}function oA(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(ro(this),e,...r);return _E.set(n,e.sort?e.sort():[e]),Br(n)}:nA().includes(t)?function(...e){return t.apply(ro(this),e),Br(DE.get(this))}:function(...e){return Br(t.apply(ro(this),e))}}function uA(t){return typeof t=="function"?oA(t):(t instanceof IDBTransaction&&iA(t),tA(t,rA())?new Proxy(t,Bd):t)}function Br(t){if(t instanceof IDBRequest)return aA(t);if(to.has(t))return to.get(t);const e=uA(t);return e!==t&&(to.set(t,e),gv.set(e,t)),e}const ro=t=>gv.get(t);function LE(t,e,{blocked:r,upgrade:n,blocking:a,terminated:i}={}){const s=indexedDB.open(t,e),o=Br(s);return n&&s.addEventListener("upgradeneeded",u=>{n(Br(s.result),u.oldVersion,u.newVersion,Br(s.transaction),u)}),r&&s.addEventListener("blocked",u=>r(u.oldVersion,u.newVersion,u)),o.then(u=>{i&&u.addEventListener("close",()=>i()),a&&u.addEventListener("versionchange",l=>a(l.oldVersion,l.newVersion,l))}).catch(()=>{}),o}const lA=["get","getKey","getAll","getAllKeys","count"],fA=["put","add","delete","clear"],no=new Map;function Sg(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(no.get(e))return no.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,a=fA.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(a||lA.includes(r)))return;const i=async function(s,...o){const u=this.transaction(s,a?"readwrite":"readonly");let l=u.store;return n&&(l=l.index(o.shift())),(await Promise.all([l[r](...o),a&&u.done]))[0]};return no.set(e,i),i}sA(t=>({...t,get:(e,r,n)=>Sg(e,r)||t.get(e,r,n),has:(e,r)=>!!Sg(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(hA(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function hA(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Fd="@firebase/app",Ag="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yr=new RE("@firebase/app"),dA="@firebase/app-compat",vA="@firebase/analytics-compat",gA="@firebase/analytics",pA="@firebase/app-check-compat",yA="@firebase/app-check",mA="@firebase/auth",bA="@firebase/auth-compat",wA="@firebase/database",EA="@firebase/data-connect",xA="@firebase/database-compat",TA="@firebase/functions",CA="@firebase/functions-compat",SA="@firebase/installations",AA="@firebase/installations-compat",IA="@firebase/messaging",RA="@firebase/messaging-compat",DA="@firebase/performance",_A="@firebase/performance-compat",LA="@firebase/remote-config",MA="@firebase/remote-config-compat",OA="@firebase/storage",PA="@firebase/storage-compat",kA="@firebase/firestore",NA="@firebase/ai",BA="@firebase/firestore-compat",FA="firebase";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qd="[DEFAULT]",qA={[Fd]:"fire-core",[dA]:"fire-core-compat",[gA]:"fire-analytics",[vA]:"fire-analytics-compat",[yA]:"fire-app-check",[pA]:"fire-app-check-compat",[mA]:"fire-auth",[bA]:"fire-auth-compat",[wA]:"fire-rtdb",[EA]:"fire-data-connect",[xA]:"fire-rtdb-compat",[TA]:"fire-fn",[CA]:"fire-fn-compat",[SA]:"fire-iid",[AA]:"fire-iid-compat",[IA]:"fire-fcm",[RA]:"fire-fcm-compat",[DA]:"fire-perf",[_A]:"fire-perf-compat",[LA]:"fire-rc",[MA]:"fire-rc-compat",[OA]:"fire-gcs",[PA]:"fire-gcs-compat",[kA]:"fire-fst",[BA]:"fire-fst-compat",[NA]:"fire-vertex","fire-js":"fire-js",[FA]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zi=new Map,GA=new Map,Gd=new Map;function Ig(t,e){try{t.container.addComponent(e)}catch(r){yr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function mn(t){const e=t.name;if(Gd.has(e))return yr.debug(`There were multiple attempts to register component ${e}.`),!1;Gd.set(e,t);for(const r of zi.values())Ig(r,t);for(const r of GA.values())Ig(r,t);return!0}function hs(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Fr=new cs("app","Firebase",zA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $A{constructor(e,r,n){this._isDeleted=!1,this._options={...e},this._config={...r},this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Ur("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Fr.create("app-deleted",{appName:this._name})}}function ME(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n={name:qd,automaticDataCollectionEnabled:!0,...e},a=n.name;if(typeof a!="string"||!a)throw Fr.create("bad-app-name",{appName:String(a)});if(r||(r=SE()),!r)throw Fr.create("no-options");const i=zi.get(a);if(i){if(Gi(r,i.options)&&Gi(n,i.config))return i;throw Fr.create("duplicate-app",{appName:a})}const s=new jS(a);for(const u of Gd.values())s.addComponent(u);const o=new $A(r,n,s);return zi.set(a,o),o}function VA(t=qd){const e=zi.get(t);if(!e&&t===qd&&SE())return ME();if(!e)throw Fr.create("no-app",{appName:t});return e}function qr(t,e,r){let n=qA[t]??t;r&&(n+=`-${r}`);const a=n.match(/\s|\//),i=e.match(/\s|\//);if(a||i){const s=[`Unable to register library "${n}" with version "${e}":`];a&&s.push(`library name "${n}" contains illegal characters (whitespace or "/")`),a&&i&&s.push("and"),i&&s.push(`version name "${e}" contains illegal characters (whitespace or "/")`),yr.warn(s.join(" "));return}mn(new Ur(`${n}-version`,()=>({library:n,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UA="firebase-heartbeat-database",HA=1,Ba="firebase-heartbeat-store";let ao=null;function OE(){return ao||(ao=LE(UA,HA,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ba)}catch(r){console.warn(r)}}}}).catch(t=>{throw Fr.create("idb-open",{originalErrorMessage:t.message})})),ao}async function YA(t){try{const r=(await OE()).transaction(Ba),n=await r.objectStore(Ba).get(PE(t));return await r.done,n}catch(e){if(e instanceof An)yr.warn(e.message);else{const r=Fr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});yr.warn(r.message)}}}async function Rg(t,e){try{const n=(await OE()).transaction(Ba,"readwrite");await n.objectStore(Ba).put(e,PE(t)),await n.done}catch(r){if(r instanceof An)yr.warn(r.message);else{const n=Fr.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});yr.warn(n.message)}}}function PE(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WA=1024,XA=30;class KA{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new ZA(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,r;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Dg();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)==null?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(s=>s.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:a}),this._heartbeatsCache.heartbeats.length>XA){const s=QA(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){yr.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=Dg(),{heartbeatsToSend:n,unsentEntries:a}=jA(this._heartbeatsCache.heartbeats),i=CE(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(r){return yr.warn(r),""}}}function Dg(){return new Date().toISOString().substring(0,10)}function jA(t,e=WA){const r=[];let n=t.slice();for(const a of t){const i=r.find(s=>s.agent===a.agent);if(i){if(i.dates.push(a.date),_g(r)>e){i.dates.pop();break}}else if(r.push({agent:a.agent,dates:[a.date]}),_g(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class ZA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return AE()?IE().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await YA(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return Rg(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return Rg(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}else return}}function _g(t){return CE(JSON.stringify({version:2,heartbeats:t})).length}function QA(t){if(t.length===0)return-1;let e=0,r=t[0].date;for(let n=1;n<t.length;n++)t[n].date<r&&(r=t[n].date,e=n);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JA(t){mn(new Ur("platform-logger",e=>new cA(e),"PRIVATE")),mn(new Ur("heartbeat",e=>new KA(e),"PRIVATE")),qr(Fd,Ag,t),qr(Fd,Ag,"esm2020"),qr("fire-js","")}JA("");var eI="firebase",tI="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */qr(eI,tI,"app");const kE="@firebase/installations",pv="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NE=1e4,BE=`w:${pv}`,FE="FIS_v2",rI="https://firebaseinstallations.googleapis.com/v1",nI=60*60*1e3,aI="installations",iI="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sI={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},bn=new cs(aI,iI,sI);function qE(t){return t instanceof An&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GE({projectId:t}){return`${rI}/projects/${t}/installations`}function zE(t){return{token:t.token,requestStatus:2,expiresIn:uI(t.expiresIn),creationTime:Date.now()}}async function $E(t,e){const n=(await e.json()).error;return bn.create("request-failed",{requestName:t,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function VE({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function oI(t,{refreshToken:e}){const r=VE(t);return r.append("Authorization",lI(e)),r}async function UE(t){const e=await t();return e.status>=500&&e.status<600?t():e}function uI(t){return Number(t.replace("s","000"))}function lI(t){return`${FE} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fI({appConfig:t,heartbeatServiceProvider:e},{fid:r}){const n=GE(t),a=VE(t),i=e.getImmediate({optional:!0});if(i){const l=await i.getHeartbeatsHeader();l&&a.append("x-firebase-client",l)}const s={fid:r,authVersion:FE,appId:t.appId,sdkVersion:BE},o={method:"POST",headers:a,body:JSON.stringify(s)},u=await UE(()=>fetch(n,o));if(u.ok){const l=await u.json();return{fid:l.fid||r,registrationStatus:2,refreshToken:l.refreshToken,authToken:zE(l.authToken)}}else throw await $E("Create Installation",u)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HE(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cI(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hI=/^[cdef][\w-]{21}$/,zd="";function dI(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const r=vI(t);return hI.test(r)?r:zd}catch{return zd}}function vI(t){return cI(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ds(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YE=new Map;function WE(t,e){const r=ds(t);XE(r,e),gI(r,e)}function XE(t,e){const r=YE.get(t);if(r)for(const n of r)n(e)}function gI(t,e){const r=pI();r&&r.postMessage({key:t,fid:e}),yI()}let vn=null;function pI(){return!vn&&"BroadcastChannel"in self&&(vn=new BroadcastChannel("[Firebase] FID Change"),vn.onmessage=t=>{XE(t.data.key,t.data.fid)}),vn}function yI(){YE.size===0&&vn&&(vn.close(),vn=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mI="firebase-installations-database",bI=1,wn="firebase-installations-store";let io=null;function yv(){return io||(io=LE(mI,bI,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(wn)}}})),io}async function $i(t,e){const r=ds(t),a=(await yv()).transaction(wn,"readwrite"),i=a.objectStore(wn),s=await i.get(r);return await i.put(e,r),await a.done,(!s||s.fid!==e.fid)&&WE(t,e.fid),e}async function KE(t){const e=ds(t),n=(await yv()).transaction(wn,"readwrite");await n.objectStore(wn).delete(e),await n.done}async function vs(t,e){const r=ds(t),a=(await yv()).transaction(wn,"readwrite"),i=a.objectStore(wn),s=await i.get(r),o=e(s);return o===void 0?await i.delete(r):await i.put(o,r),await a.done,o&&(!s||s.fid!==o.fid)&&WE(t,o.fid),o}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mv(t){let e;const r=await vs(t.appConfig,n=>{const a=wI(n),i=EI(t,a);return e=i.registrationPromise,i.installationEntry});return r.fid===zd?{installationEntry:await e}:{installationEntry:r,registrationPromise:e}}function wI(t){const e=t||{fid:dI(),registrationStatus:0};return jE(e)}function EI(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const a=Promise.reject(bn.create("app-offline"));return{installationEntry:e,registrationPromise:a}}const r={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},n=xI(t,r);return{installationEntry:r,registrationPromise:n}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:TI(t)}:{installationEntry:e}}async function xI(t,e){try{const r=await fI(t,e);return $i(t.appConfig,r)}catch(r){throw qE(r)&&r.customData.serverCode===409?await KE(t.appConfig):await $i(t.appConfig,{fid:e.fid,registrationStatus:0}),r}}async function TI(t){let e=await Lg(t.appConfig);for(;e.registrationStatus===1;)await HE(100),e=await Lg(t.appConfig);if(e.registrationStatus===0){const{installationEntry:r,registrationPromise:n}=await mv(t);return n||r}return e}function Lg(t){return vs(t,e=>{if(!e)throw bn.create("installation-not-found");return jE(e)})}function jE(t){return CI(t)?{fid:t.fid,registrationStatus:0}:t}function CI(t){return t.registrationStatus===1&&t.registrationTime+NE<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SI({appConfig:t,heartbeatServiceProvider:e},r){const n=AI(t,r),a=oI(t,r),i=e.getImmediate({optional:!0});if(i){const l=await i.getHeartbeatsHeader();l&&a.append("x-firebase-client",l)}const s={installation:{sdkVersion:BE,appId:t.appId}},o={method:"POST",headers:a,body:JSON.stringify(s)},u=await UE(()=>fetch(n,o));if(u.ok){const l=await u.json();return zE(l)}else throw await $E("Generate Auth Token",u)}function AI(t,{fid:e}){return`${GE(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bv(t,e=!1){let r;const n=await vs(t.appConfig,i=>{if(!ZE(i))throw bn.create("not-registered");const s=i.authToken;if(!e&&DI(s))return i;if(s.requestStatus===1)return r=II(t,e),i;{if(!navigator.onLine)throw bn.create("app-offline");const o=LI(i);return r=RI(t,o),o}});return r?await r:n.authToken}async function II(t,e){let r=await Mg(t.appConfig);for(;r.authToken.requestStatus===1;)await HE(100),r=await Mg(t.appConfig);const n=r.authToken;return n.requestStatus===0?bv(t,e):n}function Mg(t){return vs(t,e=>{if(!ZE(e))throw bn.create("not-registered");const r=e.authToken;return MI(r)?{...e,authToken:{requestStatus:0}}:e})}async function RI(t,e){try{const r=await SI(t,e),n={...e,authToken:r};return await $i(t.appConfig,n),r}catch(r){if(qE(r)&&(r.customData.serverCode===401||r.customData.serverCode===404))await KE(t.appConfig);else{const n={...e,authToken:{requestStatus:0}};await $i(t.appConfig,n)}throw r}}function ZE(t){return t!==void 0&&t.registrationStatus===2}function DI(t){return t.requestStatus===2&&!_I(t)}function _I(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+nI}function LI(t){const e={requestStatus:1,requestTime:Date.now()};return{...t,authToken:e}}function MI(t){return t.requestStatus===1&&t.requestTime+NE<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OI(t){const e=t,{installationEntry:r,registrationPromise:n}=await mv(e);return n?n.catch(console.error):bv(e).catch(console.error),r.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PI(t,e=!1){const r=t;return await kI(r),(await bv(r,e)).token}async function kI(t){const{registrationPromise:e}=await mv(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NI(t){if(!t||!t.options)throw so("App Configuration");if(!t.name)throw so("App Name");const e=["projectId","apiKey","appId"];for(const r of e)if(!t.options[r])throw so(r);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function so(t){return bn.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QE="installations",BI="installations-internal",FI=t=>{const e=t.getProvider("app").getImmediate(),r=NI(e),n=hs(e,"heartbeat");return{app:e,appConfig:r,heartbeatServiceProvider:n,_delete:()=>Promise.resolve()}},qI=t=>{const e=t.getProvider("app").getImmediate(),r=hs(e,QE).getImmediate();return{getId:()=>OI(r),getToken:a=>PI(r,a)}};function GI(){mn(new Ur(QE,FI,"PUBLIC")),mn(new Ur(BI,qI,"PRIVATE"))}GI();qr(kE,pv);qr(kE,pv,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vi="analytics",zI="firebase_id",$I="origin",VI=60*1e3,UI="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",wv="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const It=new RE("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HI={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Bt=new cs("analytics","Analytics",HI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YI(t){if(!t.startsWith(wv)){const e=Bt.create("invalid-gtag-resource",{gtagURL:t});return It.warn(e.message),""}return t}function JE(t){return Promise.all(t.map(e=>e.catch(r=>r)))}function WI(t,e){let r;return window.trustedTypes&&(r=window.trustedTypes.createPolicy(t,e)),r}function XI(t,e){const r=WI("firebase-js-sdk-policy",{createScriptURL:YI}),n=document.createElement("script"),a=`${wv}?l=${t}&id=${e}`;n.src=r?r==null?void 0:r.createScriptURL(a):a,n.async=!0,document.head.appendChild(n)}function KI(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function jI(t,e,r,n,a,i){const s=n[a];try{if(s)await e[s];else{const u=(await JE(r)).find(l=>l.measurementId===a);u&&await e[u.appId]}}catch(o){It.error(o)}t("config",a,i)}async function ZI(t,e,r,n,a){try{let i=[];if(a&&a.send_to){let s=a.send_to;Array.isArray(s)||(s=[s]);const o=await JE(r);for(const u of s){const l=o.find(c=>c.measurementId===u),f=l&&e[l.appId];if(f)i.push(f);else{i=[];break}}}i.length===0&&(i=Object.values(e)),await Promise.all(i),t("event",n,a||{})}catch(i){It.error(i)}}function QI(t,e,r,n){async function a(i,...s){try{if(i==="event"){const[o,u]=s;await ZI(t,e,r,o,u)}else if(i==="config"){const[o,u]=s;await jI(t,e,r,n,o,u)}else if(i==="consent"){const[o,u]=s;t("consent",o,u)}else if(i==="get"){const[o,u,l]=s;t("get",o,u,l)}else if(i==="set"){const[o]=s;t("set",o)}else t(i,...s)}catch(o){It.error(o)}}return a}function JI(t,e,r,n,a){let i=function(...s){window[n].push(arguments)};return window[a]&&typeof window[a]=="function"&&(i=window[a]),window[a]=QI(i,t,e,r),{gtagCore:i,wrappedGtag:window[a]}}function eR(t){const e=window.document.getElementsByTagName("script");for(const r of Object.values(e))if(r.src&&r.src.includes(wv)&&r.src.includes(t))return r;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tR=30,rR=1e3;class nR{constructor(e={},r=rR){this.throttleMetadata=e,this.intervalMillis=r}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,r){this.throttleMetadata[e]=r}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const ex=new nR;function aR(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function iR(t){var s;const{appId:e,apiKey:r}=t,n={method:"GET",headers:aR(r)},a=UI.replace("{app-id}",e),i=await fetch(a,n);if(i.status!==200&&i.status!==304){let o="";try{const u=await i.json();(s=u.error)!=null&&s.message&&(o=u.error.message)}catch{}throw Bt.create("config-fetch-failed",{httpStatus:i.status,responseMessage:o})}return i.json()}async function sR(t,e=ex,r){const{appId:n,apiKey:a,measurementId:i}=t.options;if(!n)throw Bt.create("no-app-id");if(!a){if(i)return{measurementId:i,appId:n};throw Bt.create("no-api-key")}const s=e.getThrottleMetadata(n)||{backoffCount:0,throttleEndTimeMillis:Date.now()},o=new lR;return setTimeout(async()=>{o.abort()},VI),tx({appId:n,apiKey:a,measurementId:i},s,o,e)}async function tx(t,{throttleEndTimeMillis:e,backoffCount:r},n,a=ex){var o;const{appId:i,measurementId:s}=t;try{await oR(n,e)}catch(u){if(s)return It.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${s} provided in the "measurementId" field in the local Firebase config. [${u==null?void 0:u.message}]`),{appId:i,measurementId:s};throw u}try{const u=await iR(t);return a.deleteThrottleMetadata(i),u}catch(u){const l=u;if(!uR(l)){if(a.deleteThrottleMetadata(i),s)return It.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${s} provided in the "measurementId" field in the local Firebase config. [${l==null?void 0:l.message}]`),{appId:i,measurementId:s};throw u}const f=Number((o=l==null?void 0:l.customData)==null?void 0:o.httpStatus)===503?xg(r,a.intervalMillis,tR):xg(r,a.intervalMillis),c={throttleEndTimeMillis:Date.now()+f,backoffCount:r+1};return a.setThrottleMetadata(i,c),It.debug(`Calling attemptFetch again in ${f} millis`),tx(t,c,n,a)}}function oR(t,e){return new Promise((r,n)=>{const a=Math.max(e-Date.now(),0),i=setTimeout(r,a);t.addEventListener(()=>{clearTimeout(i),n(Bt.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function uR(t){if(!(t instanceof An)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class lR{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function fR(t,e,r,n,a){if(a&&a.global){t("event",r,n);return}else{const i=await e,s={...n,send_to:i};t("event",r,s)}}async function cR(t,e,r,n){if(n&&n.global){const a={};for(const i of Object.keys(r))a[`user_properties.${i}`]=r[i];return t("set",a),Promise.resolve()}else{const a=await e;t("config",a,{update:!0,user_properties:r})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hR(){if(AE())try{await IE()}catch(t){return It.warn(Bt.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return It.warn(Bt.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function dR(t,e,r,n,a,i,s){const o=sR(t);o.then(h=>{r[h.measurementId]=h.appId,t.options.measurementId&&h.measurementId!==t.options.measurementId&&It.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${h.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(h=>It.error(h)),e.push(o);const u=hR().then(h=>{if(h)return n.getId()}),[l,f]=await Promise.all([o,u]);eR(i)||XI(i,l.measurementId),a("js",new Date);const c=(s==null?void 0:s.config)??{};return c[$I]="firebase",c.update=!0,f!=null&&(c[zI]=f),a("config",l.measurementId,c),l.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vR{constructor(e){this.app=e}_delete(){return delete Wn[this.app.options.appId],Promise.resolve()}}let Wn={},Og=[];const Pg={};let oo="dataLayer",gR="gtag",kg,Ev,Ng=!1;function pR(){const t=[];if(FS()&&t.push("This is a browser extension environment."),qS()||t.push("Cookies are not available."),t.length>0){const e=t.map((n,a)=>`(${a+1}) ${n}`).join(" "),r=Bt.create("invalid-analytics-context",{errorInfo:e});It.warn(r.message)}}function yR(t,e,r){pR();const n=t.options.appId;if(!n)throw Bt.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)It.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Bt.create("no-api-key");if(Wn[n]!=null)throw Bt.create("already-exists",{id:n});if(!Ng){KI(oo);const{wrappedGtag:i,gtagCore:s}=JI(Wn,Og,Pg,oo,gR);Ev=i,kg=s,Ng=!0}return Wn[n]=dR(t,Og,Pg,e,kg,oo,r),new vR(t)}function mR(t=VA()){t=vv(t);const e=hs(t,Vi);return e.isInitialized()?e.getImmediate():bR(t)}function bR(t,e={}){const r=hs(t,Vi);if(r.isInitialized()){const a=r.getImmediate();if(Gi(e,r.getOptions()))return a;throw Bt.create("already-initialized")}return r.initialize({options:e})}function wR(t,e,r){t=vv(t),cR(Ev,Wn[t.app.options.appId],e,r).catch(n=>It.error(n))}function Xa(t,e,r,n){t=vv(t),fR(Ev,Wn[t.app.options.appId],e,r,n).catch(a=>It.error(a))}const Bg="@firebase/analytics",Fg="0.10.19";function ER(){mn(new Ur(Vi,(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),a=e.getProvider("installations-internal").getImmediate();return yR(n,a,r)},"PUBLIC")),mn(new Ur("analytics-internal",t,"PRIVATE")),qr(Bg,Fg),qr(Bg,Fg,"esm2020");function t(e){try{const r=e.getProvider(Vi).getImmediate();return{logEvent:(n,a,i)=>Xa(r,n,a,i),setUserProperties:(n,a)=>wR(r,n,a)}}catch(r){throw Bt.create("interop-component-reg-failed",{reason:r})}}}ER();const xR={apiKey:"AIzaSyAZ5sd0eEFgm6tHzxHiQY3EY0RpkU1CfOI",authDomain:"naruto-matchups.firebaseapp.com",projectId:"naruto-matchups",storageBucket:"naruto-matchups.firebasestorage.app",messagingSenderId:"364303812216",appId:"1:364303812216:web:26c71433d2d0131e5d4f8d",measurementId:"G-XMRML5QPLT"},TR=ME(xR),gs=mR(TR);Xa(gs,"app_initialized");function CR(t){Xa(gs,"select_content",{content_type:"character",item_id:t})}function SR(t){Xa(gs,"screen_view",{screen_name:t})}function AR(t){Xa(gs,"search",{search_term:t})}function $d(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function IR(t){if(Array.isArray(t))return t}function RR(t){if(Array.isArray(t))return $d(t)}function Qr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function DR(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,nx(n.key),n)}}function Jr(t,e,r){return e&&DR(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Pt(t,e){var r=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=xv(t))||e){r&&(t=r);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(u){throw u},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i,s=!0,o=!1;return{s:function(){r=r.call(t)},n:function(){var u=r.next();return s=u.done,u},e:function(u){o=!0,i=u},f:function(){try{s||r.return==null||r.return()}finally{if(o)throw i}}}}function rx(t,e,r){return(e=nx(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function _R(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function LR(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,s,o=[],u=!0,l=!1;try{if(i=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(o.push(n.value),o.length!==e);u=!0);}catch(f){l=!0,a=f}finally{try{if(!u&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(l)throw a}}return o}}function MR(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function OR(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function at(t,e){return IR(t)||LR(t,e)||xv(t,e)||MR()}function Ui(t){return RR(t)||_R(t)||xv(t)||OR()}function PR(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function nx(t){var e=PR(t,"string");return typeof e=="symbol"?e:e+""}function ft(t){"@babel/helpers - typeof";return ft=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ft(t)}function xv(t,e){if(t){if(typeof t=="string")return $d(t,e);var r={}.toString.call(t).slice(8,-1);return r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set"?Array.from(t):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?$d(t,e):void 0}}var ut=typeof window>"u"?null:window,qg=ut?ut.navigator:null;ut&&ut.document;var kR=ft(""),ax=ft({}),NR=ft(function(){}),BR=typeof HTMLElement>"u"?"undefined":ft(HTMLElement),Ka=function(e){return e&&e.instanceString&&Qe(e.instanceString)?e.instanceString():null},we=function(e){return e!=null&&ft(e)==kR},Qe=function(e){return e!=null&&ft(e)===NR},He=function(e){return!Ft(e)&&(Array.isArray?Array.isArray(e):e!=null&&e instanceof Array)},qe=function(e){return e!=null&&ft(e)===ax&&!He(e)&&e.constructor===Object},FR=function(e){return e!=null&&ft(e)===ax},ae=function(e){return e!=null&&ft(e)===ft(1)&&!isNaN(e)},qR=function(e){return ae(e)&&Math.floor(e)===e},Hi=function(e){if(BR!=="undefined")return e!=null&&e instanceof HTMLElement},Ft=function(e){return ja(e)||ix(e)},ja=function(e){return Ka(e)==="collection"&&e._private.single},ix=function(e){return Ka(e)==="collection"&&!e._private.single},Tv=function(e){return Ka(e)==="core"},sx=function(e){return Ka(e)==="stylesheet"},GR=function(e){return Ka(e)==="event"},Hr=function(e){return e==null?!0:!!(e===""||e.match(/^\s+$/))},zR=function(e){return typeof HTMLElement>"u"?!1:e instanceof HTMLElement},$R=function(e){return qe(e)&&ae(e.x1)&&ae(e.x2)&&ae(e.y1)&&ae(e.y2)},VR=function(e){return FR(e)&&Qe(e.then)},UR=function(){return qg&&qg.userAgent.match(/msie|trident|edge/i)},Jn=function(e,r){r||(r=function(){if(arguments.length===1)return arguments[0];if(arguments.length===0)return"undefined";for(var i=[],s=0;s<arguments.length;s++)i.push(arguments[s]);return i.join("$")});var n=function(){var i=this,s=arguments,o,u=r.apply(i,s),l=n.cache;return(o=l[u])||(o=l[u]=e.apply(i,s)),o};return n.cache={},n},Cv=Jn(function(t){return t.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}),ps=Jn(function(t){return t.replace(/(-\w)/g,function(e){return e[1].toUpperCase()})}),ox=Jn(function(t,e){return t+e[0].toUpperCase()+e.substring(1)},function(t,e){return t+"$"+e}),Gg=function(e){return Hr(e)?e:e.charAt(0).toUpperCase()+e.substring(1)},Or=function(e,r){return e.slice(-1*r.length)===r},lt="(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))",HR="rgb[a]?\\(("+lt+"[%]?)\\s*,\\s*("+lt+"[%]?)\\s*,\\s*("+lt+"[%]?)(?:\\s*,\\s*("+lt+"))?\\)",YR="rgb[a]?\\((?:"+lt+"[%]?)\\s*,\\s*(?:"+lt+"[%]?)\\s*,\\s*(?:"+lt+"[%]?)(?:\\s*,\\s*(?:"+lt+"))?\\)",WR="hsl[a]?\\(("+lt+")\\s*,\\s*("+lt+"[%])\\s*,\\s*("+lt+"[%])(?:\\s*,\\s*("+lt+"))?\\)",XR="hsl[a]?\\((?:"+lt+")\\s*,\\s*(?:"+lt+"[%])\\s*,\\s*(?:"+lt+"[%])(?:\\s*,\\s*(?:"+lt+"))?\\)",KR="\\#[0-9a-fA-F]{3}",jR="\\#[0-9a-fA-F]{6}",ux=function(e,r){return e<r?-1:e>r?1:0},ZR=function(e,r){return-1*ux(e,r)},xe=Object.assign!=null?Object.assign.bind(Object):function(t){for(var e=arguments,r=1;r<e.length;r++){var n=e[r];if(n!=null)for(var a=Object.keys(n),i=0;i<a.length;i++){var s=a[i];t[s]=n[s]}}return t},QR=function(e){if(!(!(e.length===4||e.length===7)||e[0]!=="#")){var r=e.length===4,n,a,i,s=16;return r?(n=parseInt(e[1]+e[1],s),a=parseInt(e[2]+e[2],s),i=parseInt(e[3]+e[3],s)):(n=parseInt(e[1]+e[2],s),a=parseInt(e[3]+e[4],s),i=parseInt(e[5]+e[6],s)),[n,a,i]}},JR=function(e){var r,n,a,i,s,o,u,l;function f(v,g,p){return p<0&&(p+=1),p>1&&(p-=1),p<1/6?v+(g-v)*6*p:p<1/2?g:p<2/3?v+(g-v)*(2/3-p)*6:v}var c=new RegExp("^"+WR+"$").exec(e);if(c){if(n=parseInt(c[1]),n<0?n=(360- -1*n%360)%360:n>360&&(n=n%360),n/=360,a=parseFloat(c[2]),a<0||a>100||(a=a/100,i=parseFloat(c[3]),i<0||i>100)||(i=i/100,s=c[4],s!==void 0&&(s=parseFloat(s),s<0||s>1)))return;if(a===0)o=u=l=Math.round(i*255);else{var h=i<.5?i*(1+a):i+a-i*a,d=2*i-h;o=Math.round(255*f(d,h,n+1/3)),u=Math.round(255*f(d,h,n)),l=Math.round(255*f(d,h,n-1/3))}r=[o,u,l,s]}return r},eD=function(e){var r,n=new RegExp("^"+HR+"$").exec(e);if(n){r=[];for(var a=[],i=1;i<=3;i++){var s=n[i];if(s[s.length-1]==="%"&&(a[i]=!0),s=parseFloat(s),a[i]&&(s=s/100*255),s<0||s>255)return;r.push(Math.floor(s))}var o=a[1]||a[2]||a[3],u=a[1]&&a[2]&&a[3];if(o&&!u)return;var l=n[4];if(l!==void 0){if(l=parseFloat(l),l<0||l>1)return;r.push(l)}}return r},tD=function(e){return rD[e.toLowerCase()]},lx=function(e){return(He(e)?e:null)||tD(e)||QR(e)||eD(e)||JR(e)},rD={transparent:[0,0,0,0],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},fx=function(e){for(var r=e.map,n=e.keys,a=n.length,i=0;i<a;i++){var s=n[i];if(qe(s))throw Error("Tried to set map with object key");i<n.length-1?(r[s]==null&&(r[s]={}),r=r[s]):r[s]=e.value}},cx=function(e){for(var r=e.map,n=e.keys,a=n.length,i=0;i<a;i++){var s=n[i];if(qe(s))throw Error("Tried to get map with object key");if(r=r[s],r==null)return r}return r},vi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Za(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var uo,zg;function Qa(){if(zg)return uo;zg=1;function t(e){var r=typeof e;return e!=null&&(r=="object"||r=="function")}return uo=t,uo}var lo,$g;function nD(){if($g)return lo;$g=1;var t=typeof vi=="object"&&vi&&vi.Object===Object&&vi;return lo=t,lo}var fo,Vg;function ys(){if(Vg)return fo;Vg=1;var t=nD(),e=typeof self=="object"&&self&&self.Object===Object&&self,r=t||e||Function("return this")();return fo=r,fo}var co,Ug;function aD(){if(Ug)return co;Ug=1;var t=ys(),e=function(){return t.Date.now()};return co=e,co}var ho,Hg;function iD(){if(Hg)return ho;Hg=1;var t=/\s/;function e(r){for(var n=r.length;n--&&t.test(r.charAt(n)););return n}return ho=e,ho}var vo,Yg;function sD(){if(Yg)return vo;Yg=1;var t=iD(),e=/^\s+/;function r(n){return n&&n.slice(0,t(n)+1).replace(e,"")}return vo=r,vo}var go,Wg;function Sv(){if(Wg)return go;Wg=1;var t=ys(),e=t.Symbol;return go=e,go}var po,Xg;function oD(){if(Xg)return po;Xg=1;var t=Sv(),e=Object.prototype,r=e.hasOwnProperty,n=e.toString,a=t?t.toStringTag:void 0;function i(s){var o=r.call(s,a),u=s[a];try{s[a]=void 0;var l=!0}catch{}var f=n.call(s);return l&&(o?s[a]=u:delete s[a]),f}return po=i,po}var yo,Kg;function uD(){if(Kg)return yo;Kg=1;var t=Object.prototype,e=t.toString;function r(n){return e.call(n)}return yo=r,yo}var mo,jg;function hx(){if(jg)return mo;jg=1;var t=Sv(),e=oD(),r=uD(),n="[object Null]",a="[object Undefined]",i=t?t.toStringTag:void 0;function s(o){return o==null?o===void 0?a:n:i&&i in Object(o)?e(o):r(o)}return mo=s,mo}var bo,Zg;function lD(){if(Zg)return bo;Zg=1;function t(e){return e!=null&&typeof e=="object"}return bo=t,bo}var wo,Qg;function Ja(){if(Qg)return wo;Qg=1;var t=hx(),e=lD(),r="[object Symbol]";function n(a){return typeof a=="symbol"||e(a)&&t(a)==r}return wo=n,wo}var Eo,Jg;function fD(){if(Jg)return Eo;Jg=1;var t=sD(),e=Qa(),r=Ja(),n=NaN,a=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,s=/^0o[0-7]+$/i,o=parseInt;function u(l){if(typeof l=="number")return l;if(r(l))return n;if(e(l)){var f=typeof l.valueOf=="function"?l.valueOf():l;l=e(f)?f+"":f}if(typeof l!="string")return l===0?l:+l;l=t(l);var c=i.test(l);return c||s.test(l)?o(l.slice(2),c?2:8):a.test(l)?n:+l}return Eo=u,Eo}var xo,ep;function cD(){if(ep)return xo;ep=1;var t=Qa(),e=aD(),r=fD(),n="Expected a function",a=Math.max,i=Math.min;function s(o,u,l){var f,c,h,d,v,g,p=0,y=!1,m=!1,b=!0;if(typeof o!="function")throw new TypeError(n);u=r(u)||0,t(l)&&(y=!!l.leading,m="maxWait"in l,h=m?a(r(l.maxWait)||0,u):h,b="trailing"in l?!!l.trailing:b);function E(D){var _=f,M=c;return f=c=void 0,p=D,d=o.apply(M,_),d}function T(D){return p=D,v=setTimeout(x,u),y?E(D):d}function I(D){var _=D-g,M=D-p,k=u-_;return m?i(k,h-M):k}function w(D){var _=D-g,M=D-p;return g===void 0||_>=u||_<0||m&&M>=h}function x(){var D=e();if(w(D))return C(D);v=setTimeout(x,I(D))}function C(D){return v=void 0,b&&f?E(D):(f=c=void 0,d)}function S(){v!==void 0&&clearTimeout(v),p=0,f=g=c=v=void 0}function A(){return v===void 0?d:C(e())}function R(){var D=e(),_=w(D);if(f=arguments,c=this,g=D,_){if(v===void 0)return T(g);if(m)return clearTimeout(v),v=setTimeout(x,u),E(g)}return v===void 0&&(v=setTimeout(x,u)),d}return R.cancel=S,R.flush=A,R}return xo=s,xo}var hD=cD(),ei=Za(hD),To=ut?ut.performance:null,dx=To&&To.now?function(){return To.now()}:function(){return Date.now()},dD=function(){if(ut){if(ut.requestAnimationFrame)return function(t){ut.requestAnimationFrame(t)};if(ut.mozRequestAnimationFrame)return function(t){ut.mozRequestAnimationFrame(t)};if(ut.webkitRequestAnimationFrame)return function(t){ut.webkitRequestAnimationFrame(t)};if(ut.msRequestAnimationFrame)return function(t){ut.msRequestAnimationFrame(t)}}return function(t){t&&setTimeout(function(){t(dx())},1e3/60)}}(),Yi=function(e){return dD(e)},mr=dx,hn=9261,vx=65599,Vn=5381,gx=function(e){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:hn,n=r,a;a=e.next(),!a.done;)n=n*vx+a.value|0;return n},Fa=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:hn;return r*vx+e|0},qa=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Vn;return(r<<5)+r+e|0},vD=function(e,r){return e*2097152+r},Ir=function(e){return e[0]*2097152+e[1]},gi=function(e,r){return[Fa(e[0],r[0]),qa(e[1],r[1])]},tp=function(e,r){var n={value:0,done:!1},a=0,i=e.length,s={next:function(){return a<i?n.value=e[a++]:n.done=!0,n}};return gx(s,r)},En=function(e,r){var n={value:0,done:!1},a=0,i=e.length,s={next:function(){return a<i?n.value=e.charCodeAt(a++):n.done=!0,n}};return gx(s,r)},px=function(){return gD(arguments)},gD=function(e){for(var r,n=0;n<e.length;n++){var a=e[n];n===0?r=En(a):r=En(a,r)}return r};function pD(t,e,r,n,a){var i=a*Math.PI/180,s=Math.cos(i)*(t-r)-Math.sin(i)*(e-n)+r,o=Math.sin(i)*(t-r)+Math.cos(i)*(e-n)+n;return{x:s,y:o}}var yD=function(e,r,n,a,i,s){return{x:(e-n)*i+n,y:(r-a)*s+a}};function mD(t,e,r){if(r===0)return t;var n=(e.x1+e.x2)/2,a=(e.y1+e.y2)/2,i=e.w/e.h,s=1/i,o=pD(t.x,t.y,n,a,r),u=yD(o.x,o.y,n,a,i,s);return{x:u.x,y:u.y}}var rp=!0,bD=console.warn!=null,wD=console.trace!=null,Av=Number.MAX_SAFE_INTEGER||9007199254740991,yx=function(){return!0},Wi=function(){return!1},np=function(){return 0},Iv=function(){},je=function(e){throw new Error(e)},mx=function(e){if(e!==void 0)rp=!!e;else return rp},Ve=function(e){mx()&&(bD?console.warn(e):(console.log(e),wD&&console.trace()))},ED=function(e){return xe({},e)},nr=function(e){return e==null?e:He(e)?e.slice():qe(e)?ED(e):e},xD=function(e){return e.slice()},bx=function(e,r){for(r=e="";e++<36;r+=e*51&52?(e^15?8^Math.random()*(e^20?16:4):4).toString(16):"-");return r},TD={},wx=function(){return TD},bt=function(e){var r=Object.keys(e);return function(n){for(var a={},i=0;i<r.length;i++){var s=r[i],o=n==null?void 0:n[s];a[s]=o===void 0?e[s]:o}return a}},Yr=function(e,r,n){for(var a=e.length-1;a>=0;a--)e[a]===r&&e.splice(a,1)},Rv=function(e){e.splice(0,e.length)},CD=function(e,r){for(var n=0;n<r.length;n++){var a=r[n];e.push(a)}},Mt=function(e,r,n){return n&&(r=ox(n,r)),e[r]},dr=function(e,r,n,a){n&&(r=ox(n,r)),e[r]=a},SD=function(){function t(){Qr(this,t),this._obj={}}return Jr(t,[{key:"set",value:function(r,n){return this._obj[r]=n,this}},{key:"delete",value:function(r){return this._obj[r]=void 0,this}},{key:"clear",value:function(){this._obj={}}},{key:"has",value:function(r){return this._obj[r]!==void 0}},{key:"get",value:function(r){return this._obj[r]}}])}(),vr=typeof Map<"u"?Map:SD,AD="undefined",ID=function(){function t(e){if(Qr(this,t),this._obj=Object.create(null),this.size=0,e!=null){var r;e.instanceString!=null&&e.instanceString()===this.instanceString()?r=e.toArray():r=e;for(var n=0;n<r.length;n++)this.add(r[n])}}return Jr(t,[{key:"instanceString",value:function(){return"set"}},{key:"add",value:function(r){var n=this._obj;n[r]!==1&&(n[r]=1,this.size++)}},{key:"delete",value:function(r){var n=this._obj;n[r]===1&&(n[r]=0,this.size--)}},{key:"clear",value:function(){this._obj=Object.create(null)}},{key:"has",value:function(r){return this._obj[r]===1}},{key:"toArray",value:function(){var r=this;return Object.keys(this._obj).filter(function(n){return r.has(n)})}},{key:"forEach",value:function(r,n){return this.toArray().forEach(r,n)}}])}(),ra=(typeof Set>"u"?"undefined":ft(Set))!==AD?Set:ID,ms=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(e===void 0||r===void 0||!Tv(e)){je("An element must have a core reference and parameters set");return}var a=r.group;if(a==null&&(r.data&&r.data.source!=null&&r.data.target!=null?a="edges":a="nodes"),a!=="nodes"&&a!=="edges"){je("An element must be of type `nodes` or `edges`; you specified `"+a+"`");return}this.length=1,this[0]=this;var i=this._private={cy:e,single:!0,data:r.data||{},position:r.position||{x:0,y:0},autoWidth:void 0,autoHeight:void 0,autoPadding:void 0,compoundBoundsClean:!1,listeners:[],group:a,style:{},rstyle:{},styleCxts:[],styleKeys:{},removed:!0,selected:!!r.selected,selectable:r.selectable===void 0?!0:!!r.selectable,locked:!!r.locked,grabbed:!1,grabbable:r.grabbable===void 0?!0:!!r.grabbable,pannable:r.pannable===void 0?a==="edges":!!r.pannable,active:!1,classes:new ra,animation:{current:[],queue:[]},rscratch:{},scratch:r.scratch||{},edges:[],children:[],parent:r.parent&&r.parent.isNode()?r.parent:null,traversalCache:{},backgrounding:!1,bbCache:null,bbCacheShift:{x:0,y:0},bodyBounds:null,overlayBounds:null,labelBounds:{all:null,source:null,target:null,main:null},arrowBounds:{source:null,target:null,"mid-source":null,"mid-target":null}};if(i.position.x==null&&(i.position.x=0),i.position.y==null&&(i.position.y=0),r.renderedPosition){var s=r.renderedPosition,o=e.pan(),u=e.zoom();i.position={x:(s.x-o.x)/u,y:(s.y-o.y)/u}}var l=[];He(r.classes)?l=r.classes:we(r.classes)&&(l=r.classes.split(/\s+/));for(var f=0,c=l.length;f<c;f++){var h=l[f];!h||h===""||i.classes.add(h)}this.createEmitter(),(n===void 0||n)&&this.restore();var d=r.style||r.css;d&&(Ve("Setting a `style` bypass at element creation should be done only when absolutely necessary.  Try to use the stylesheet instead."),this.style(d))},ap=function(e){return e={bfs:e.bfs||!e.dfs,dfs:e.dfs||!e.bfs},function(n,a,i){var s;qe(n)&&!Ft(n)&&(s=n,n=s.roots||s.root,a=s.visit,i=s.directed),i=arguments.length===2&&!Qe(a)?a:i,a=Qe(a)?a:function(){};for(var o=this._private.cy,u=n=we(n)?this.filter(n):n,l=[],f=[],c={},h={},d={},v=0,g,p=this.byGroup(),y=p.nodes,m=p.edges,b=0;b<u.length;b++){var E=u[b],T=E.id();E.isNode()&&(l.unshift(E),e.bfs&&(d[T]=!0,f.push(E)),h[T]=0)}for(var I=function(){var D=e.bfs?l.shift():l.pop(),_=D.id();if(e.dfs){if(d[_])return 0;d[_]=!0,f.push(D)}var M=h[_],k=c[_],O=k!=null?k.source():null,P=k!=null?k.target():null,B=k==null?void 0:D.same(O)?P[0]:O[0],F;if(F=a(D,k,B,v++,M),F===!0)return g=D,1;if(F===!1)return 1;for(var N=D.connectedEdges().filter(function(Z){return(!i||Z.source().same(D))&&m.has(Z)}),q=0;q<N.length;q++){var V=N[q],Y=V.connectedNodes().filter(function(Z){return!Z.same(D)&&y.has(Z)}),H=Y.id();Y.length!==0&&!d[H]&&(Y=Y[0],l.push(Y),e.bfs&&(d[H]=!0,f.push(Y)),c[H]=V,h[H]=h[_]+1)}},w;l.length!==0&&(w=I(),!(w!==0&&w===1)););for(var x=o.collection(),C=0;C<f.length;C++){var S=f[C],A=c[S.id()];A!=null&&x.push(A),x.push(S)}return{path:o.collection(x),found:o.collection(g)}}},Ga={breadthFirstSearch:ap({bfs:!0}),depthFirstSearch:ap({dfs:!0})};Ga.bfs=Ga.breadthFirstSearch;Ga.dfs=Ga.depthFirstSearch;var Di={exports:{}},RD=Di.exports,ip;function DD(){return ip||(ip=1,function(t,e){(function(){var r,n,a,i,s,o,u,l,f,c,h,d,v,g,p;a=Math.floor,c=Math.min,n=function(y,m){return y<m?-1:y>m?1:0},f=function(y,m,b,E,T){var I;if(b==null&&(b=0),T==null&&(T=n),b<0)throw new Error("lo must be non-negative");for(E==null&&(E=y.length);b<E;)I=a((b+E)/2),T(m,y[I])<0?E=I:b=I+1;return[].splice.apply(y,[b,b-b].concat(m)),m},o=function(y,m,b){return b==null&&(b=n),y.push(m),g(y,0,y.length-1,b)},s=function(y,m){var b,E;return m==null&&(m=n),b=y.pop(),y.length?(E=y[0],y[0]=b,p(y,0,m)):E=b,E},l=function(y,m,b){var E;return b==null&&(b=n),E=y[0],y[0]=m,p(y,0,b),E},u=function(y,m,b){var E;return b==null&&(b=n),y.length&&b(y[0],m)<0&&(E=[y[0],m],m=E[0],y[0]=E[1],p(y,0,b)),m},i=function(y,m){var b,E,T,I,w,x;for(m==null&&(m=n),I=(function(){x=[];for(var C=0,S=a(y.length/2);0<=S?C<S:C>S;0<=S?C++:C--)x.push(C);return x}).apply(this).reverse(),w=[],E=0,T=I.length;E<T;E++)b=I[E],w.push(p(y,b,m));return w},v=function(y,m,b){var E;if(b==null&&(b=n),E=y.indexOf(m),E!==-1)return g(y,0,E,b),p(y,E,b)},h=function(y,m,b){var E,T,I,w,x;if(b==null&&(b=n),T=y.slice(0,m),!T.length)return T;for(i(T,b),x=y.slice(m),I=0,w=x.length;I<w;I++)E=x[I],u(T,E,b);return T.sort(b).reverse()},d=function(y,m,b){var E,T,I,w,x,C,S,A,R;if(b==null&&(b=n),m*10<=y.length){if(I=y.slice(0,m).sort(b),!I.length)return I;for(T=I[I.length-1],S=y.slice(m),w=0,C=S.length;w<C;w++)E=S[w],b(E,T)<0&&(f(I,E,0,null,b),I.pop(),T=I[I.length-1]);return I}for(i(y,b),R=[],x=0,A=c(m,y.length);0<=A?x<A:x>A;0<=A?++x:--x)R.push(s(y,b));return R},g=function(y,m,b,E){var T,I,w;for(E==null&&(E=n),T=y[b];b>m;){if(w=b-1>>1,I=y[w],E(T,I)<0){y[b]=I,b=w;continue}break}return y[b]=T},p=function(y,m,b){var E,T,I,w,x;for(b==null&&(b=n),T=y.length,x=m,I=y[m],E=2*m+1;E<T;)w=E+1,w<T&&!(b(y[E],y[w])<0)&&(E=w),y[m]=y[E],m=E,E=2*m+1;return y[m]=I,g(y,x,m,b)},r=function(){y.push=o,y.pop=s,y.replace=l,y.pushpop=u,y.heapify=i,y.updateItem=v,y.nlargest=h,y.nsmallest=d;function y(m){this.cmp=m??n,this.nodes=[]}return y.prototype.push=function(m){return o(this.nodes,m,this.cmp)},y.prototype.pop=function(){return s(this.nodes,this.cmp)},y.prototype.peek=function(){return this.nodes[0]},y.prototype.contains=function(m){return this.nodes.indexOf(m)!==-1},y.prototype.replace=function(m){return l(this.nodes,m,this.cmp)},y.prototype.pushpop=function(m){return u(this.nodes,m,this.cmp)},y.prototype.heapify=function(){return i(this.nodes,this.cmp)},y.prototype.updateItem=function(m){return v(this.nodes,m,this.cmp)},y.prototype.clear=function(){return this.nodes=[]},y.prototype.empty=function(){return this.nodes.length===0},y.prototype.size=function(){return this.nodes.length},y.prototype.clone=function(){var m;return m=new y,m.nodes=this.nodes.slice(0),m},y.prototype.toArray=function(){return this.nodes.slice(0)},y.prototype.insert=y.prototype.push,y.prototype.top=y.prototype.peek,y.prototype.front=y.prototype.peek,y.prototype.has=y.prototype.contains,y.prototype.copy=y.prototype.clone,y}(),function(y,m){return t.exports=m()}(this,function(){return r})}).call(RD)}(Di)),Di.exports}var Co,sp;function _D(){return sp||(sp=1,Co=DD()),Co}var LD=_D(),ti=Za(LD),MD=bt({root:null,weight:function(e){return 1},directed:!1}),OD={dijkstra:function(e){if(!qe(e)){var r=arguments;e={root:r[0],weight:r[1],directed:r[2]}}var n=MD(e),a=n.root,i=n.weight,s=n.directed,o=this,u=i,l=we(a)?this.filter(a)[0]:a[0],f={},c={},h={},d=this.byGroup(),v=d.nodes,g=d.edges;g.unmergeBy(function(M){return M.isLoop()});for(var p=function(k){return f[k.id()]},y=function(k,O){f[k.id()]=O,m.updateItem(k)},m=new ti(function(M,k){return p(M)-p(k)}),b=0;b<v.length;b++){var E=v[b];f[E.id()]=E.same(l)?0:1/0,m.push(E)}for(var T=function(k,O){for(var P=(s?k.edgesTo(O):k.edgesWith(O)).intersect(g),B=1/0,F,N=0;N<P.length;N++){var q=P[N],V=u(q);(V<B||!F)&&(B=V,F=q)}return{edge:F,dist:B}};m.size()>0;){var I=m.pop(),w=p(I),x=I.id();if(h[x]=w,w!==1/0)for(var C=I.neighborhood().intersect(v),S=0;S<C.length;S++){var A=C[S],R=A.id(),D=T(I,A),_=w+D.dist;_<p(A)&&(y(A,_),c[R]={node:I,edge:D.edge})}}return{distanceTo:function(k){var O=we(k)?v.filter(k)[0]:k[0];return h[O.id()]},pathTo:function(k){var O=we(k)?v.filter(k)[0]:k[0],P=[],B=O,F=B.id();if(O.length>0)for(P.unshift(O);c[F];){var N=c[F];P.unshift(N.edge),P.unshift(N.node),B=N.node,F=B.id()}return o.spawn(P)}}}},PD={kruskal:function(e){e=e||function(b){return 1};for(var r=this.byGroup(),n=r.nodes,a=r.edges,i=n.length,s=new Array(i),o=n,u=function(E){for(var T=0;T<s.length;T++){var I=s[T];if(I.has(E))return T}},l=0;l<i;l++)s[l]=this.spawn(n[l]);for(var f=a.sort(function(b,E){return e(b)-e(E)}),c=0;c<f.length;c++){var h=f[c],d=h.source()[0],v=h.target()[0],g=u(d),p=u(v),y=s[g],m=s[p];g!==p&&(o.merge(h),y.merge(m),s.splice(p,1))}return o}},kD=bt({root:null,goal:null,weight:function(e){return 1},heuristic:function(e){return 0},directed:!1}),ND={aStar:function(e){var r=this.cy(),n=kD(e),a=n.root,i=n.goal,s=n.heuristic,o=n.directed,u=n.weight;a=r.collection(a)[0],i=r.collection(i)[0];var l=a.id(),f=i.id(),c={},h={},d={},v=new ti(function(F,N){return h[F.id()]-h[N.id()]}),g=new ra,p={},y={},m=function(N,q){v.push(N),g.add(q)},b,E,T=function(){b=v.pop(),E=b.id(),g.delete(E)},I=function(N){return g.has(N)};m(a,l),c[l]=0,h[l]=s(a);for(var w=0;v.size()>0;){if(T(),w++,E===f){for(var x=[],C=i,S=f,A=y[S];x.unshift(C),A!=null&&x.unshift(A),C=p[S],C!=null;)S=C.id(),A=y[S];return{found:!0,distance:c[E],path:this.spawn(x),steps:w}}d[E]=!0;for(var R=b._private.edges,D=0;D<R.length;D++){var _=R[D];if(this.hasElementWithId(_.id())&&!(o&&_.data("source")!==E)){var M=_.source(),k=_.target(),O=M.id()!==E?M:k,P=O.id();if(this.hasElementWithId(P)&&!d[P]){var B=c[E]+u(_);if(!I(P)){c[P]=B,h[P]=B+s(O),m(O,P),p[P]=b,y[P]=_;continue}B<c[P]&&(c[P]=B,h[P]=B+s(O),p[P]=b,y[P]=_)}}}}return{found:!1,distance:void 0,path:void 0,steps:w}}},BD=bt({weight:function(e){return 1},directed:!1}),FD={floydWarshall:function(e){for(var r=this.cy(),n=BD(e),a=n.weight,i=n.directed,s=a,o=this.byGroup(),u=o.nodes,l=o.edges,f=u.length,c=f*f,h=function(V){return u.indexOf(V)},d=function(V){return u[V]},v=new Array(c),g=0;g<c;g++){var p=g%f,y=(g-p)/f;y===p?v[g]=0:v[g]=1/0}for(var m=new Array(c),b=new Array(c),E=0;E<l.length;E++){var T=l[E],I=T.source()[0],w=T.target()[0];if(I!==w){var x=h(I),C=h(w),S=x*f+C,A=s(T);if(v[S]>A&&(v[S]=A,m[S]=C,b[S]=T),!i){var R=C*f+x;!i&&v[R]>A&&(v[R]=A,m[R]=x,b[R]=T)}}}for(var D=0;D<f;D++)for(var _=0;_<f;_++)for(var M=_*f+D,k=0;k<f;k++){var O=_*f+k,P=D*f+k;v[M]+v[P]<v[O]&&(v[O]=v[M]+v[P],m[O]=m[M])}var B=function(V){return(we(V)?r.filter(V):V)[0]},F=function(V){return h(B(V))},N={distance:function(V,Y){var H=F(V),Z=F(Y);return v[H*f+Z]},path:function(V,Y){var H=F(V),Z=F(Y),ee=d(H);if(H===Z)return ee.collection();if(m[H*f+Z]==null)return r.collection();var ie=r.collection(),J=H,G;for(ie.merge(ee);H!==Z;)J=H,H=m[H*f+Z],G=b[J*f+H],ie.merge(G),ie.merge(d(H));return ie}};return N}},qD=bt({weight:function(e){return 1},directed:!1,root:null}),GD={bellmanFord:function(e){var r=this,n=qD(e),a=n.weight,i=n.directed,s=n.root,o=a,u=this,l=this.cy(),f=this.byGroup(),c=f.edges,h=f.nodes,d=h.length,v=new vr,g=!1,p=[];s=l.collection(s)[0],c.unmergeBy(function(se){return se.isLoop()});for(var y=c.length,m=function(be){var ge=v.get(be.id());return ge||(ge={},v.set(be.id(),ge)),ge},b=function(be){return(we(be)?l.$(be):be)[0]},E=function(be){return m(b(be)).dist},T=function(be){for(var ge=arguments.length>1&&arguments[1]!==void 0?arguments[1]:s,oe=b(be),de=[],fe=oe;;){if(fe==null)return r.spawn();var ve=m(fe),pe=ve.edge,Ce=ve.pred;if(de.unshift(fe[0]),fe.same(ge)&&de.length>0)break;pe!=null&&de.unshift(pe),fe=Ce}return u.spawn(de)},I=0;I<d;I++){var w=h[I],x=m(w);w.same(s)?x.dist=0:x.dist=1/0,x.pred=null,x.edge=null}for(var C=!1,S=function(be,ge,oe,de,fe,ve){var pe=de.dist+ve;pe<fe.dist&&!oe.same(de.edge)&&(fe.dist=pe,fe.pred=be,fe.edge=oe,C=!0)},A=1;A<d;A++){C=!1;for(var R=0;R<y;R++){var D=c[R],_=D.source(),M=D.target(),k=o(D),O=m(_),P=m(M);S(_,M,D,O,P,k),i||S(M,_,D,P,O,k)}if(!C)break}if(C)for(var B=[],F=0;F<y;F++){var N=c[F],q=N.source(),V=N.target(),Y=o(N),H=m(q).dist,Z=m(V).dist;if(H+Y<Z||!i&&Z+Y<H)if(g||(Ve("Graph contains a negative weight cycle for Bellman-Ford"),g=!0),e.findNegativeWeightCycles!==!1){var ee=[];H+Y<Z&&ee.push(q),!i&&Z+Y<H&&ee.push(V);for(var ie=ee.length,J=0;J<ie;J++){var G=ee[J],$=[G];$.push(m(G).edge);for(var U=m(G).pred;$.indexOf(U)===-1;)$.push(U),$.push(m(U).edge),U=m(U).pred;$=$.slice($.indexOf(U));for(var j=$[0].id(),ne=0,re=2;re<$.length;re+=2)$[re].id()<j&&(j=$[re].id(),ne=re);$=$.slice(ne).concat($.slice(0,ne)),$.push($[0]);var Ie=$.map(function(se){return se.id()}).join(",");B.indexOf(Ie)===-1&&(p.push(u.spawn($)),B.push(Ie))}}else break}return{distanceTo:E,pathTo:T,hasNegativeWeightCycle:g,negativeWeightCycles:p}}},zD=Math.sqrt(2),$D=function(e,r,n){n.length===0&&je("Karger-Stein must be run on a connected (sub)graph");for(var a=n[e],i=a[1],s=a[2],o=r[i],u=r[s],l=n,f=l.length-1;f>=0;f--){var c=l[f],h=c[1],d=c[2];(r[h]===o&&r[d]===u||r[h]===u&&r[d]===o)&&l.splice(f,1)}for(var v=0;v<l.length;v++){var g=l[v];g[1]===u?(l[v]=g.slice(),l[v][1]=o):g[2]===u&&(l[v]=g.slice(),l[v][2]=o)}for(var p=0;p<r.length;p++)r[p]===u&&(r[p]=o);return l},So=function(e,r,n,a){for(;n>a;){var i=Math.floor(Math.random()*r.length);r=$D(i,e,r),n--}return r},VD={kargerStein:function(){var e=this,r=this.byGroup(),n=r.nodes,a=r.edges;a.unmergeBy(function(P){return P.isLoop()});var i=n.length,s=a.length,o=Math.ceil(Math.pow(Math.log(i)/Math.LN2,2)),u=Math.floor(i/zD);if(i<2){je("At least 2 nodes are required for Karger-Stein algorithm");return}for(var l=[],f=0;f<s;f++){var c=a[f];l.push([f,n.indexOf(c.source()),n.indexOf(c.target())])}for(var h=1/0,d=[],v=new Array(i),g=new Array(i),p=new Array(i),y=function(B,F){for(var N=0;N<i;N++)F[N]=B[N]},m=0;m<=o;m++){for(var b=0;b<i;b++)g[b]=b;var E=So(g,l.slice(),i,u),T=E.slice();y(g,p);var I=So(g,E,u,2),w=So(p,T,u,2);I.length<=w.length&&I.length<h?(h=I.length,d=I,y(g,v)):w.length<=I.length&&w.length<h&&(h=w.length,d=w,y(p,v))}for(var x=this.spawn(d.map(function(P){return a[P[0]]})),C=this.spawn(),S=this.spawn(),A=v[0],R=0;R<v.length;R++){var D=v[R],_=n[R];D===A?C.merge(_):S.merge(_)}var M=function(B){var F=e.spawn();return B.forEach(function(N){F.merge(N),N.connectedEdges().forEach(function(q){e.contains(q)&&!x.contains(q)&&F.merge(q)})}),F},k=[M(C),M(S)],O={cut:x,components:k,partition1:C,partition2:S};return O}},Ao,UD=function(e){return{x:e.x,y:e.y}},bs=function(e,r,n){return{x:e.x*r+n.x,y:e.y*r+n.y}},Ex=function(e,r,n){return{x:(e.x-n.x)/r,y:(e.y-n.y)/r}},Un=function(e){return{x:e[0],y:e[1]}},HD=function(e){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,a=1/0,i=r;i<n;i++){var s=e[i];isFinite(s)&&(a=Math.min(s,a))}return a},YD=function(e){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,a=-1/0,i=r;i<n;i++){var s=e[i];isFinite(s)&&(a=Math.max(s,a))}return a},WD=function(e){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,a=0,i=0,s=r;s<n;s++){var o=e[s];isFinite(o)&&(a+=o,i++)}return a/i},XD=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,s=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0;a?e=e.slice(r,n):(n<e.length&&e.splice(n,e.length-n),r>0&&e.splice(0,r));for(var o=0,u=e.length-1;u>=0;u--){var l=e[u];s?isFinite(l)||(e[u]=-1/0,o++):e.splice(u,1)}i&&e.sort(function(h,d){return h-d});var f=e.length,c=Math.floor(f/2);return f%2!==0?e[c+1+o]:(e[c-1+o]+e[c+o])/2},KD=function(e){return Math.PI*e/180},pi=function(e,r){return Math.atan2(r,e)-Math.PI/2},Dv=Math.log2||function(t){return Math.log(t)/Math.log(2)},_v=function(e){return e>0?1:e<0?-1:0},xn=function(e,r){return Math.sqrt(ln(e,r))},ln=function(e,r){var n=r.x-e.x,a=r.y-e.y;return n*n+a*a},jD=function(e){for(var r=e.length,n=0,a=0;a<r;a++)n+=e[a];for(var i=0;i<r;i++)e[i]=e[i]/n;return e},dt=function(e,r,n,a){return(1-a)*(1-a)*e+2*(1-a)*a*r+a*a*n},Xn=function(e,r,n,a){return{x:dt(e.x,r.x,n.x,a),y:dt(e.y,r.y,n.y,a)}},ZD=function(e,r,n,a){var i={x:r.x-e.x,y:r.y-e.y},s=xn(e,r),o={x:i.x/s,y:i.y/s};return n=n??0,a=a??n*s,{x:e.x+o.x*a,y:e.y+o.y*a}},za=function(e,r,n){return Math.max(e,Math.min(n,r))},Rt=function(e){if(e==null)return{x1:1/0,y1:1/0,x2:-1/0,y2:-1/0,w:0,h:0};if(e.x1!=null&&e.y1!=null){if(e.x2!=null&&e.y2!=null&&e.x2>=e.x1&&e.y2>=e.y1)return{x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,w:e.x2-e.x1,h:e.y2-e.y1};if(e.w!=null&&e.h!=null&&e.w>=0&&e.h>=0)return{x1:e.x1,y1:e.y1,x2:e.x1+e.w,y2:e.y1+e.h,w:e.w,h:e.h}}},QD=function(e){return{x1:e.x1,x2:e.x2,w:e.w,y1:e.y1,y2:e.y2,h:e.h}},JD=function(e){e.x1=1/0,e.y1=1/0,e.x2=-1/0,e.y2=-1/0,e.w=0,e.h=0},e_=function(e,r){e.x1=Math.min(e.x1,r.x1),e.x2=Math.max(e.x2,r.x2),e.w=e.x2-e.x1,e.y1=Math.min(e.y1,r.y1),e.y2=Math.max(e.y2,r.y2),e.h=e.y2-e.y1},xx=function(e,r,n){e.x1=Math.min(e.x1,r),e.x2=Math.max(e.x2,r),e.w=e.x2-e.x1,e.y1=Math.min(e.y1,n),e.y2=Math.max(e.y2,n),e.h=e.y2-e.y1},_i=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return e.x1-=r,e.x2+=r,e.y1-=r,e.y2+=r,e.w=e.x2-e.x1,e.h=e.y2-e.y1,e},Li=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0],n,a,i,s;if(r.length===1)n=a=i=s=r[0];else if(r.length===2)n=i=r[0],s=a=r[1];else if(r.length===4){var o=at(r,4);n=o[0],a=o[1],i=o[2],s=o[3]}return e.x1-=s,e.x2+=a,e.y1-=n,e.y2+=i,e.w=e.x2-e.x1,e.h=e.y2-e.y1,e},op=function(e,r){e.x1=r.x1,e.y1=r.y1,e.x2=r.x2,e.y2=r.y2,e.w=e.x2-e.x1,e.h=e.y2-e.y1},Lv=function(e,r){return!(e.x1>r.x2||r.x1>e.x2||e.x2<r.x1||r.x2<e.x1||e.y2<r.y1||r.y2<e.y1||e.y1>r.y2||r.y1>e.y2)},Pr=function(e,r,n){return e.x1<=r&&r<=e.x2&&e.y1<=n&&n<=e.y2},up=function(e,r){return Pr(e,r.x,r.y)},Tx=function(e,r){return Pr(e,r.x1,r.y1)&&Pr(e,r.x2,r.y2)},t_=(Ao=Math.hypot)!==null&&Ao!==void 0?Ao:function(t,e){return Math.sqrt(t*t+e*e)};function r_(t,e){if(t.length<3)throw new Error("Need at least 3 vertices");var r=function(x,C){return{x:x.x+C.x,y:x.y+C.y}},n=function(x,C){return{x:x.x-C.x,y:x.y-C.y}},a=function(x,C){return{x:x.x*C,y:x.y*C}},i=function(x,C){return x.x*C.y-x.y*C.x},s=function(x){var C=t_(x.x,x.y);return C===0?{x:0,y:0}:{x:x.x/C,y:x.y/C}},o=function(x){for(var C=0,S=0;S<x.length;S++){var A=x[S],R=x[(S+1)%x.length];C+=A.x*R.y-R.x*A.y}return C/2},u=function(x,C,S,A){var R=n(C,x),D=n(A,S),_=i(R,D);if(Math.abs(_)<1e-9)return r(x,a(R,.5));var M=i(n(S,x),D)/_;return r(x,a(R,M))},l=t.map(function(w){return{x:w.x,y:w.y}});o(l)<0&&l.reverse();for(var f=l.length,c=[],h=0;h<f;h++){var d=l[h],v=l[(h+1)%f],g=n(v,d),p=s({x:g.y,y:-g.x});c.push(p)}for(var y=c.map(function(w,x){var C=r(l[x],a(w,e)),S=r(l[(x+1)%f],a(w,e));return{p1:C,p2:S}}),m=[],b=0;b<f;b++){var E=y[(b-1+f)%f],T=y[b],I=u(E.p1,E.p2,T.p1,T.p2);m.push(I)}return m}function n_(t,e,r,n,a,i){var s=h_(t,e,r,n,a),o=r_(s,i),u=Rt();return o.forEach(function(l){return xx(u,l.x,l.y)}),u}var Cx=function(e,r,n,a,i,s,o){var u=arguments.length>7&&arguments[7]!==void 0?arguments[7]:"auto",l=u==="auto"?Wr(i,s):u,f=i/2,c=s/2;l=Math.min(l,f,c);var h=l!==f,d=l!==c,v;if(h){var g=n-f+l-o,p=a-c-o,y=n+f-l+o,m=p;if(v=kr(e,r,n,a,g,p,y,m,!1),v.length>0)return v}if(d){var b=n+f+o,E=a-c+l-o,T=b,I=a+c-l+o;if(v=kr(e,r,n,a,b,E,T,I,!1),v.length>0)return v}if(h){var w=n-f+l-o,x=a+c+o,C=n+f-l+o,S=x;if(v=kr(e,r,n,a,w,x,C,S,!1),v.length>0)return v}if(d){var A=n-f-o,R=a-c+l-o,D=A,_=a+c-l+o;if(v=kr(e,r,n,a,A,R,D,_,!1),v.length>0)return v}var M;{var k=n-f+l,O=a-c+l;if(M=Ta(e,r,n,a,k,O,l+o),M.length>0&&M[0]<=k&&M[1]<=O)return[M[0],M[1]]}{var P=n+f-l,B=a-c+l;if(M=Ta(e,r,n,a,P,B,l+o),M.length>0&&M[0]>=P&&M[1]<=B)return[M[0],M[1]]}{var F=n+f-l,N=a+c-l;if(M=Ta(e,r,n,a,F,N,l+o),M.length>0&&M[0]>=F&&M[1]>=N)return[M[0],M[1]]}{var q=n-f+l,V=a+c-l;if(M=Ta(e,r,n,a,q,V,l+o),M.length>0&&M[0]<=q&&M[1]>=V)return[M[0],M[1]]}return[]},a_=function(e,r,n,a,i,s,o){var u=o,l=Math.min(n,i),f=Math.max(n,i),c=Math.min(a,s),h=Math.max(a,s);return l-u<=e&&e<=f+u&&c-u<=r&&r<=h+u},i_=function(e,r,n,a,i,s,o,u,l){var f={x1:Math.min(n,o,i)-l,x2:Math.max(n,o,i)+l,y1:Math.min(a,u,s)-l,y2:Math.max(a,u,s)+l};return!(e<f.x1||e>f.x2||r<f.y1||r>f.y2)},s_=function(e,r,n,a){n-=a;var i=r*r-4*e*n;if(i<0)return[];var s=Math.sqrt(i),o=2*e,u=(-r+s)/o,l=(-r-s)/o;return[u,l]},o_=function(e,r,n,a,i){var s=1e-5;e===0&&(e=s),r/=e,n/=e,a/=e;var o,u,l,f,c,h,d,v;if(u=(3*n-r*r)/9,l=-(27*a)+r*(9*n-2*(r*r)),l/=54,o=u*u*u+l*l,i[1]=0,d=r/3,o>0){c=l+Math.sqrt(o),c=c<0?-Math.pow(-c,1/3):Math.pow(c,1/3),h=l-Math.sqrt(o),h=h<0?-Math.pow(-h,1/3):Math.pow(h,1/3),i[0]=-d+c+h,d+=(c+h)/2,i[4]=i[2]=-d,d=Math.sqrt(3)*(-h+c)/2,i[3]=d,i[5]=-d;return}if(i[5]=i[3]=0,o===0){v=l<0?-Math.pow(-l,1/3):Math.pow(l,1/3),i[0]=-d+2*v,i[4]=i[2]=-(v+d);return}u=-u,f=u*u*u,f=Math.acos(l/Math.sqrt(f)),v=2*Math.sqrt(u),i[0]=-d+v*Math.cos(f/3),i[2]=-d+v*Math.cos((f+2*Math.PI)/3),i[4]=-d+v*Math.cos((f+4*Math.PI)/3)},u_=function(e,r,n,a,i,s,o,u){var l=1*n*n-4*n*i+2*n*o+4*i*i-4*i*o+o*o+a*a-4*a*s+2*a*u+4*s*s-4*s*u+u*u,f=1*9*n*i-3*n*n-3*n*o-6*i*i+3*i*o+9*a*s-3*a*a-3*a*u-6*s*s+3*s*u,c=1*3*n*n-6*n*i+n*o-n*e+2*i*i+2*i*e-o*e+3*a*a-6*a*s+a*u-a*r+2*s*s+2*s*r-u*r,h=1*n*i-n*n+n*e-i*e+a*s-a*a+a*r-s*r,d=[];o_(l,f,c,h,d);for(var v=1e-7,g=[],p=0;p<6;p+=2)Math.abs(d[p+1])<v&&d[p]>=0&&d[p]<=1&&g.push(d[p]);g.push(1),g.push(0);for(var y=-1,m,b,E,T=0;T<g.length;T++)m=Math.pow(1-g[T],2)*n+2*(1-g[T])*g[T]*i+g[T]*g[T]*o,b=Math.pow(1-g[T],2)*a+2*(1-g[T])*g[T]*s+g[T]*g[T]*u,E=Math.pow(m-e,2)+Math.pow(b-r,2),y>=0?E<y&&(y=E):y=E;return y},l_=function(e,r,n,a,i,s){var o=[e-n,r-a],u=[i-n,s-a],l=u[0]*u[0]+u[1]*u[1],f=o[0]*o[0]+o[1]*o[1],c=o[0]*u[0]+o[1]*u[1],h=c*c/l;return c<0?f:h>l?(e-i)*(e-i)+(r-s)*(r-s):f-h},Ot=function(e,r,n){for(var a,i,s,o,u,l=0,f=0;f<n.length/2;f++)if(a=n[f*2],i=n[f*2+1],f+1<n.length/2?(s=n[(f+1)*2],o=n[(f+1)*2+1]):(s=n[(f+1-n.length/2)*2],o=n[(f+1-n.length/2)*2+1]),!(a==e&&s==e))if(a>=e&&e>=s||a<=e&&e<=s)u=(e-a)/(s-a)*(o-i)+i,u>r&&l++;else continue;return l%2!==0},br=function(e,r,n,a,i,s,o,u,l){var f=new Array(n.length),c;u[0]!=null?(c=Math.atan(u[1]/u[0]),u[0]<0?c=c+Math.PI/2:c=-c-Math.PI/2):c=u;for(var h=Math.cos(-c),d=Math.sin(-c),v=0;v<f.length/2;v++)f[v*2]=s/2*(n[v*2]*h-n[v*2+1]*d),f[v*2+1]=o/2*(n[v*2+1]*h+n[v*2]*d),f[v*2]+=a,f[v*2+1]+=i;var g;if(l>0){var p=Ki(f,-l);g=Xi(p)}else g=f;return Ot(e,r,g)},f_=function(e,r,n,a,i,s,o,u){for(var l=new Array(n.length*2),f=0;f<u.length;f++){var c=u[f];l[f*4+0]=c.startX,l[f*4+1]=c.startY,l[f*4+2]=c.stopX,l[f*4+3]=c.stopY;var h=Math.pow(c.cx-e,2)+Math.pow(c.cy-r,2);if(h<=Math.pow(c.radius,2))return!0}return Ot(e,r,l)},Xi=function(e){for(var r=new Array(e.length/2),n,a,i,s,o,u,l,f,c=0;c<e.length/4;c++){n=e[c*4],a=e[c*4+1],i=e[c*4+2],s=e[c*4+3],c<e.length/4-1?(o=e[(c+1)*4],u=e[(c+1)*4+1],l=e[(c+1)*4+2],f=e[(c+1)*4+3]):(o=e[0],u=e[1],l=e[2],f=e[3]);var h=kr(n,a,i,s,o,u,l,f,!0);r[c*2]=h[0],r[c*2+1]=h[1]}return r},Ki=function(e,r){for(var n=new Array(e.length*2),a,i,s,o,u=0;u<e.length/2;u++){a=e[u*2],i=e[u*2+1],u<e.length/2-1?(s=e[(u+1)*2],o=e[(u+1)*2+1]):(s=e[0],o=e[1]);var l=o-i,f=-(s-a),c=Math.sqrt(l*l+f*f),h=l/c,d=f/c;n[u*4]=a+h*r,n[u*4+1]=i+d*r,n[u*4+2]=s+h*r,n[u*4+3]=o+d*r}return n},c_=function(e,r,n,a,i,s){var o=n-e,u=a-r;o/=i,u/=s;var l=Math.sqrt(o*o+u*u),f=l-1;if(f<0)return[];var c=f/l;return[(n-e)*c+e,(a-r)*c+r]},gn=function(e,r,n,a,i,s,o){return e-=i,r-=s,e/=n/2+o,r/=a/2+o,e*e+r*r<=1},Ta=function(e,r,n,a,i,s,o){var u=[n-e,a-r],l=[e-i,r-s],f=u[0]*u[0]+u[1]*u[1],c=2*(l[0]*u[0]+l[1]*u[1]),h=l[0]*l[0]+l[1]*l[1]-o*o,d=c*c-4*f*h;if(d<0)return[];var v=(-c+Math.sqrt(d))/(2*f),g=(-c-Math.sqrt(d))/(2*f),p=Math.min(v,g),y=Math.max(v,g),m=[];if(p>=0&&p<=1&&m.push(p),y>=0&&y<=1&&m.push(y),m.length===0)return[];var b=m[0]*u[0]+e,E=m[0]*u[1]+r;if(m.length>1){if(m[0]==m[1])return[b,E];var T=m[1]*u[0]+e,I=m[1]*u[1]+r;return[b,E,T,I]}else return[b,E]},Io=function(e,r,n){return r<=e&&e<=n||n<=e&&e<=r?e:e<=r&&r<=n||n<=r&&r<=e?r:n},kr=function(e,r,n,a,i,s,o,u,l){var f=e-i,c=n-e,h=o-i,d=r-s,v=a-r,g=u-s,p=h*d-g*f,y=c*d-v*f,m=g*c-h*v;if(m!==0){var b=p/m,E=y/m,T=.001,I=0-T,w=1+T;return I<=b&&b<=w&&I<=E&&E<=w?[e+b*c,r+b*v]:l?[e+b*c,r+b*v]:[]}else return p===0||y===0?Io(e,n,o)===o?[o,u]:Io(e,n,i)===i?[i,s]:Io(i,o,n)===n?[n,a]:[]:[]},h_=function(e,r,n,a,i){var s=[],o=a/2,u=i/2,l=r,f=n;s.push({x:l+o*e[0],y:f+u*e[1]});for(var c=1;c<e.length/2;c++)s.push({x:l+o*e[c*2],y:f+u*e[c*2+1]});return s},$a=function(e,r,n,a,i,s,o,u){var l=[],f,c=new Array(n.length),h=!0;s==null&&(h=!1);var d;if(h){for(var v=0;v<c.length/2;v++)c[v*2]=n[v*2]*s+a,c[v*2+1]=n[v*2+1]*o+i;if(u>0){var g=Ki(c,-u);d=Xi(g)}else d=c}else d=n;for(var p,y,m,b,E=0;E<d.length/2;E++)p=d[E*2],y=d[E*2+1],E<d.length/2-1?(m=d[(E+1)*2],b=d[(E+1)*2+1]):(m=d[0],b=d[1]),f=kr(e,r,a,i,p,y,m,b),f.length!==0&&l.push(f[0],f[1]);return l},d_=function(e,r,n,a,i,s,o,u,l){var f=[],c,h=new Array(n.length*2);l.forEach(function(m,b){b===0?(h[h.length-2]=m.startX,h[h.length-1]=m.startY):(h[b*4-2]=m.startX,h[b*4-1]=m.startY),h[b*4]=m.stopX,h[b*4+1]=m.stopY,c=Ta(e,r,a,i,m.cx,m.cy,m.radius),c.length!==0&&f.push(c[0],c[1])});for(var d=0;d<h.length/4;d++)c=kr(e,r,a,i,h[d*4],h[d*4+1],h[d*4+2],h[d*4+3],!1),c.length!==0&&f.push(c[0],c[1]);if(f.length>2){for(var v=[f[0],f[1]],g=Math.pow(v[0]-e,2)+Math.pow(v[1]-r,2),p=1;p<f.length/2;p++){var y=Math.pow(f[p*2]-e,2)+Math.pow(f[p*2+1]-r,2);y<=g&&(v[0]=f[p*2],v[1]=f[p*2+1],g=y)}return v}return f},yi=function(e,r,n){var a=[e[0]-r[0],e[1]-r[1]],i=Math.sqrt(a[0]*a[0]+a[1]*a[1]),s=(i-n)/i;return s<0&&(s=1e-5),[r[0]+s*a[0],r[1]+s*a[1]]},At=function(e,r){var n=Vd(e,r);return n=Sx(n),n},Sx=function(e){for(var r,n,a=e.length/2,i=1/0,s=1/0,o=-1/0,u=-1/0,l=0;l<a;l++)r=e[2*l],n=e[2*l+1],i=Math.min(i,r),o=Math.max(o,r),s=Math.min(s,n),u=Math.max(u,n);for(var f=2/(o-i),c=2/(u-s),h=0;h<a;h++)r=e[2*h]=e[2*h]*f,n=e[2*h+1]=e[2*h+1]*c,i=Math.min(i,r),o=Math.max(o,r),s=Math.min(s,n),u=Math.max(u,n);if(s<-1)for(var d=0;d<a;d++)n=e[2*d+1]=e[2*d+1]+(-1-s);return e},Vd=function(e,r){var n=1/e*2*Math.PI,a=e%2===0?Math.PI/2+n/2:Math.PI/2;a+=r;for(var i=new Array(e*2),s,o=0;o<e;o++)s=o*n+a,i[2*o]=Math.cos(s),i[2*o+1]=Math.sin(-s);return i},Wr=function(e,r){return Math.min(e/4,r/4,8)},Ax=function(e,r){return Math.min(e/10,r/10,8)},Mv=function(){return 8},v_=function(e,r,n){return[e-2*r+n,2*(r-e),e]},Ud=function(e,r){return{heightOffset:Math.min(15,.05*r),widthOffset:Math.min(100,.25*e),ctrlPtOffsetPct:.05}};function Ro(t,e){function r(c){for(var h=[],d=0;d<c.length;d++){var v=c[d],g=c[(d+1)%c.length],p={x:g.x-v.x,y:g.y-v.y},y={x:-p.y,y:p.x},m=Math.sqrt(y.x*y.x+y.y*y.y);h.push({x:y.x/m,y:y.y/m})}return h}function n(c,h){var d=1/0,v=-1/0,g=Pt(c),p;try{for(g.s();!(p=g.n()).done;){var y=p.value,m=y.x*h.x+y.y*h.y;d=Math.min(d,m),v=Math.max(v,m)}}catch(b){g.e(b)}finally{g.f()}return{min:d,max:v}}function a(c,h){return!(c.max<h.min||h.max<c.min)}var i=[].concat(Ui(r(t)),Ui(r(e))),s=Pt(i),o;try{for(s.s();!(o=s.n()).done;){var u=o.value,l=n(t,u),f=n(e,u);if(!a(l,f))return!1}}catch(c){s.e(c)}finally{s.f()}return!0}var g_=bt({dampingFactor:.8,precision:1e-6,iterations:200,weight:function(e){return 1}}),p_={pageRank:function(e){for(var r=g_(e),n=r.dampingFactor,a=r.precision,i=r.iterations,s=r.weight,o=this._private.cy,u=this.byGroup(),l=u.nodes,f=u.edges,c=l.length,h=c*c,d=f.length,v=new Array(h),g=new Array(c),p=(1-n)/c,y=0;y<c;y++){for(var m=0;m<c;m++){var b=y*c+m;v[b]=0}g[y]=0}for(var E=0;E<d;E++){var T=f[E],I=T.data("source"),w=T.data("target");if(I!==w){var x=l.indexOfId(I),C=l.indexOfId(w),S=s(T),A=C*c+x;v[A]+=S,g[x]+=S}}for(var R=1/c+p,D=0;D<c;D++)if(g[D]===0)for(var _=0;_<c;_++){var M=_*c+D;v[M]=R}else for(var k=0;k<c;k++){var O=k*c+D;v[O]=v[O]/g[D]+p}for(var P=new Array(c),B=new Array(c),F,N=0;N<c;N++)P[N]=1;for(var q=0;q<i;q++){for(var V=0;V<c;V++)B[V]=0;for(var Y=0;Y<c;Y++)for(var H=0;H<c;H++){var Z=Y*c+H;B[Y]+=v[Z]*P[H]}jD(B),F=P,P=B,B=F;for(var ee=0,ie=0;ie<c;ie++){var J=F[ie]-P[ie];ee+=J*J}if(ee<a)break}var G={rank:function(U){return U=o.collection(U)[0],P[l.indexOf(U)]}};return G}},lp=bt({root:null,weight:function(e){return 1},directed:!1,alpha:0}),Kn={degreeCentralityNormalized:function(e){e=lp(e);var r=this.cy(),n=this.nodes(),a=n.length;if(e.directed){for(var f={},c={},h=0,d=0,v=0;v<a;v++){var g=n[v],p=g.id();e.root=g;var y=this.degreeCentrality(e);h<y.indegree&&(h=y.indegree),d<y.outdegree&&(d=y.outdegree),f[p]=y.indegree,c[p]=y.outdegree}return{indegree:function(b){return h==0?0:(we(b)&&(b=r.filter(b)),f[b.id()]/h)},outdegree:function(b){return d===0?0:(we(b)&&(b=r.filter(b)),c[b.id()]/d)}}}else{for(var i={},s=0,o=0;o<a;o++){var u=n[o];e.root=u;var l=this.degreeCentrality(e);s<l.degree&&(s=l.degree),i[u.id()]=l.degree}return{degree:function(b){return s===0?0:(we(b)&&(b=r.filter(b)),i[b.id()]/s)}}}},degreeCentrality:function(e){e=lp(e);var r=this.cy(),n=this,a=e,i=a.root,s=a.weight,o=a.directed,u=a.alpha;if(i=r.collection(i)[0],o){for(var d=i.connectedEdges(),v=d.filter(function(I){return I.target().same(i)&&n.has(I)}),g=d.filter(function(I){return I.source().same(i)&&n.has(I)}),p=v.length,y=g.length,m=0,b=0,E=0;E<v.length;E++)m+=s(v[E]);for(var T=0;T<g.length;T++)b+=s(g[T]);return{indegree:Math.pow(p,1-u)*Math.pow(m,u),outdegree:Math.pow(y,1-u)*Math.pow(b,u)}}else{for(var l=i.connectedEdges().intersection(n),f=l.length,c=0,h=0;h<l.length;h++)c+=s(l[h]);return{degree:Math.pow(f,1-u)*Math.pow(c,u)}}}};Kn.dc=Kn.degreeCentrality;Kn.dcn=Kn.degreeCentralityNormalised=Kn.degreeCentralityNormalized;var fp=bt({harmonic:!0,weight:function(){return 1},directed:!1,root:null}),jn={closenessCentralityNormalized:function(e){for(var r=fp(e),n=r.harmonic,a=r.weight,i=r.directed,s=this.cy(),o={},u=0,l=this.nodes(),f=this.floydWarshall({weight:a,directed:i}),c=0;c<l.length;c++){for(var h=0,d=l[c],v=0;v<l.length;v++)if(c!==v){var g=f.distance(d,l[v]);n?h+=1/g:h+=g}n||(h=1/h),u<h&&(u=h),o[d.id()]=h}return{closeness:function(y){return u==0?0:(we(y)?y=s.filter(y)[0].id():y=y.id(),o[y]/u)}}},closenessCentrality:function(e){var r=fp(e),n=r.root,a=r.weight,i=r.directed,s=r.harmonic;n=this.filter(n)[0];for(var o=this.dijkstra({root:n,weight:a,directed:i}),u=0,l=this.nodes(),f=0;f<l.length;f++){var c=l[f];if(!c.same(n)){var h=o.distanceTo(c);s?u+=1/h:u+=h}}return s?u:1/u}};jn.cc=jn.closenessCentrality;jn.ccn=jn.closenessCentralityNormalised=jn.closenessCentralityNormalized;var y_=bt({weight:null,directed:!1}),Hd={betweennessCentrality:function(e){for(var r=y_(e),n=r.directed,a=r.weight,i=a!=null,s=this.cy(),o=this.nodes(),u={},l={},f=0,c={set:function(b,E){l[b]=E,E>f&&(f=E)},get:function(b){return l[b]}},h=0;h<o.length;h++){var d=o[h],v=d.id();n?u[v]=d.outgoers().nodes():u[v]=d.openNeighborhood().nodes(),c.set(v,0)}for(var g=function(){for(var b=o[p].id(),E=[],T={},I={},w={},x=new ti(function(Y,H){return w[Y]-w[H]}),C=0;C<o.length;C++){var S=o[C].id();T[S]=[],I[S]=0,w[S]=1/0}for(I[b]=1,w[b]=0,x.push(b);!x.empty();){var A=x.pop();if(E.push(A),i)for(var R=0;R<u[A].length;R++){var D=u[A][R],_=s.getElementById(A),M=void 0;_.edgesTo(D).length>0?M=_.edgesTo(D)[0]:M=D.edgesTo(_)[0];var k=a(M);D=D.id(),w[D]>w[A]+k&&(w[D]=w[A]+k,x.nodes.indexOf(D)<0?x.push(D):x.updateItem(D),I[D]=0,T[D]=[]),w[D]==w[A]+k&&(I[D]=I[D]+I[A],T[D].push(A))}else for(var O=0;O<u[A].length;O++){var P=u[A][O].id();w[P]==1/0&&(x.push(P),w[P]=w[A]+1),w[P]==w[A]+1&&(I[P]=I[P]+I[A],T[P].push(A))}}for(var B={},F=0;F<o.length;F++)B[o[F].id()]=0;for(;E.length>0;){for(var N=E.pop(),q=0;q<T[N].length;q++){var V=T[N][q];B[V]=B[V]+I[V]/I[N]*(1+B[N])}N!=o[p].id()&&c.set(N,c.get(N)+B[N])}},p=0;p<o.length;p++)g();var y={betweenness:function(b){var E=s.collection(b).id();return c.get(E)},betweennessNormalized:function(b){if(f==0)return 0;var E=s.collection(b).id();return c.get(E)/f}};return y.betweennessNormalised=y.betweennessNormalized,y}};Hd.bc=Hd.betweennessCentrality;var m_=bt({expandFactor:2,inflateFactor:2,multFactor:1,maxIterations:20,attributes:[function(t){return 1}]}),b_=function(e){return m_(e)},w_=function(e,r){for(var n=0,a=0;a<r.length;a++)n+=r[a](e);return n},E_=function(e,r,n){for(var a=0;a<r;a++)e[a*r+a]=n},Ix=function(e,r){for(var n,a=0;a<r;a++){n=0;for(var i=0;i<r;i++)n+=e[i*r+a];for(var s=0;s<r;s++)e[s*r+a]=e[s*r+a]/n}},x_=function(e,r,n){for(var a=new Array(n*n),i=0;i<n;i++){for(var s=0;s<n;s++)a[i*n+s]=0;for(var o=0;o<n;o++)for(var u=0;u<n;u++)a[i*n+u]+=e[i*n+o]*r[o*n+u]}return a},T_=function(e,r,n){for(var a=e.slice(0),i=1;i<n;i++)e=x_(e,a,r);return e},C_=function(e,r,n){for(var a=new Array(r*r),i=0;i<r*r;i++)a[i]=Math.pow(e[i],n);return Ix(a,r),a},S_=function(e,r,n,a){for(var i=0;i<n;i++){var s=Math.round(e[i]*Math.pow(10,a))/Math.pow(10,a),o=Math.round(r[i]*Math.pow(10,a))/Math.pow(10,a);if(s!==o)return!1}return!0},A_=function(e,r,n,a){for(var i=[],s=0;s<r;s++){for(var o=[],u=0;u<r;u++)Math.round(e[s*r+u]*1e3)/1e3>0&&o.push(n[u]);o.length!==0&&i.push(a.collection(o))}return i},I_=function(e,r){for(var n=0;n<e.length;n++)if(!r[n]||e[n].id()!==r[n].id())return!1;return!0},R_=function(e){for(var r=0;r<e.length;r++)for(var n=0;n<e.length;n++)r!=n&&I_(e[r],e[n])&&e.splice(n,1);return e},cp=function(e){for(var r=this.nodes(),n=this.edges(),a=this.cy(),i=b_(e),s={},o=0;o<r.length;o++)s[r[o].id()]=o;for(var u=r.length,l=u*u,f=new Array(l),c,h=0;h<l;h++)f[h]=0;for(var d=0;d<n.length;d++){var v=n[d],g=s[v.source().id()],p=s[v.target().id()],y=w_(v,i.attributes);f[g*u+p]+=y,f[p*u+g]+=y}E_(f,u,i.multFactor),Ix(f,u);for(var m=!0,b=0;m&&b<i.maxIterations;)m=!1,c=T_(f,u,i.expandFactor),f=C_(c,u,i.inflateFactor),S_(f,c,l,4)||(m=!0),b++;var E=A_(f,u,r,a);return E=R_(E),E},D_={markovClustering:cp,mcl:cp},__=function(e){return e},Rx=function(e,r){return Math.abs(r-e)},hp=function(e,r,n){return e+Rx(r,n)},dp=function(e,r,n){return e+Math.pow(n-r,2)},L_=function(e){return Math.sqrt(e)},M_=function(e,r,n){return Math.max(e,Rx(r,n))},pa=function(e,r,n,a,i){for(var s=arguments.length>5&&arguments[5]!==void 0?arguments[5]:__,o=a,u,l,f=0;f<e;f++)u=r(f),l=n(f),o=i(o,u,l);return s(o)},ea={euclidean:function(e,r,n){return e>=2?pa(e,r,n,0,dp,L_):pa(e,r,n,0,hp)},squaredEuclidean:function(e,r,n){return pa(e,r,n,0,dp)},manhattan:function(e,r,n){return pa(e,r,n,0,hp)},max:function(e,r,n){return pa(e,r,n,-1/0,M_)}};ea["squared-euclidean"]=ea.squaredEuclidean;ea.squaredeuclidean=ea.squaredEuclidean;function ws(t,e,r,n,a,i){var s;return Qe(t)?s=t:s=ea[t]||ea.euclidean,e===0&&Qe(t)?s(a,i):s(e,r,n,a,i)}var O_=bt({k:2,m:2,sensitivityThreshold:1e-4,distance:"euclidean",maxIterations:10,attributes:[],testMode:!1,testCentroids:null}),Ov=function(e){return O_(e)},ji=function(e,r,n,a,i){var s=i!=="kMedoids",o=s?function(c){return n[c]}:function(c){return a[c](n)},u=function(h){return a[h](r)},l=n,f=r;return ws(e,a.length,o,u,l,f)},Do=function(e,r,n){for(var a=n.length,i=new Array(a),s=new Array(a),o=new Array(r),u=null,l=0;l<a;l++)i[l]=e.min(n[l]).value,s[l]=e.max(n[l]).value;for(var f=0;f<r;f++){u=[];for(var c=0;c<a;c++)u[c]=Math.random()*(s[c]-i[c])+i[c];o[f]=u}return o},Dx=function(e,r,n,a,i){for(var s=1/0,o=0,u=0;u<r.length;u++){var l=ji(n,e,r[u],a,i);l<s&&(s=l,o=u)}return o},_x=function(e,r,n){for(var a=[],i=null,s=0;s<r.length;s++)i=r[s],n[i.id()]===e&&a.push(i);return a},P_=function(e,r,n){return Math.abs(r-e)<=n},k_=function(e,r,n){for(var a=0;a<e.length;a++)for(var i=0;i<e[a].length;i++){var s=Math.abs(e[a][i]-r[a][i]);if(s>n)return!1}return!0},N_=function(e,r,n){for(var a=0;a<n;a++)if(e===r[a])return!0;return!1},vp=function(e,r){var n=new Array(r);if(e.length<50)for(var a=0;a<r;a++){for(var i=e[Math.floor(Math.random()*e.length)];N_(i,n,a);)i=e[Math.floor(Math.random()*e.length)];n[a]=i}else for(var s=0;s<r;s++)n[s]=e[Math.floor(Math.random()*e.length)];return n},gp=function(e,r,n){for(var a=0,i=0;i<r.length;i++)a+=ji("manhattan",r[i],e,n,"kMedoids");return a},B_=function(e){var r=this.cy(),n=this.nodes(),a=null,i=Ov(e),s=new Array(i.k),o={},u;i.testMode?typeof i.testCentroids=="number"?(i.testCentroids,u=Do(n,i.k,i.attributes)):ft(i.testCentroids)==="object"?u=i.testCentroids:u=Do(n,i.k,i.attributes):u=Do(n,i.k,i.attributes);for(var l=!0,f=0;l&&f<i.maxIterations;){for(var c=0;c<n.length;c++)a=n[c],o[a.id()]=Dx(a,u,i.distance,i.attributes,"kMeans");l=!1;for(var h=0;h<i.k;h++){var d=_x(h,n,o);if(d.length!==0){for(var v=i.attributes.length,g=u[h],p=new Array(v),y=new Array(v),m=0;m<v;m++){y[m]=0;for(var b=0;b<d.length;b++)a=d[b],y[m]+=i.attributes[m](a);p[m]=y[m]/d.length,P_(p[m],g[m],i.sensitivityThreshold)||(l=!0)}u[h]=p,s[h]=r.collection(d)}}f++}return s},F_=function(e){var r=this.cy(),n=this.nodes(),a=null,i=Ov(e),s=new Array(i.k),o,u={},l,f=new Array(i.k);i.testMode?typeof i.testCentroids=="number"||(ft(i.testCentroids)==="object"?o=i.testCentroids:o=vp(n,i.k)):o=vp(n,i.k);for(var c=!0,h=0;c&&h<i.maxIterations;){for(var d=0;d<n.length;d++)a=n[d],u[a.id()]=Dx(a,o,i.distance,i.attributes,"kMedoids");c=!1;for(var v=0;v<o.length;v++){var g=_x(v,n,u);if(g.length!==0){f[v]=gp(o[v],g,i.attributes);for(var p=0;p<g.length;p++)l=gp(g[p],g,i.attributes),l<f[v]&&(f[v]=l,o[v]=g[p],c=!0);s[v]=r.collection(g)}}h++}return s},q_=function(e,r,n,a,i){for(var s,o,u=0;u<r.length;u++)for(var l=0;l<e.length;l++)a[u][l]=Math.pow(n[u][l],i.m);for(var f=0;f<e.length;f++)for(var c=0;c<i.attributes.length;c++){s=0,o=0;for(var h=0;h<r.length;h++)s+=a[h][f]*i.attributes[c](r[h]),o+=a[h][f];e[f][c]=s/o}},G_=function(e,r,n,a,i){for(var s=0;s<e.length;s++)r[s]=e[s].slice();for(var o,u,l,f=2/(i.m-1),c=0;c<n.length;c++)for(var h=0;h<a.length;h++){o=0;for(var d=0;d<n.length;d++)u=ji(i.distance,a[h],n[c],i.attributes,"cmeans"),l=ji(i.distance,a[h],n[d],i.attributes,"cmeans"),o+=Math.pow(u/l,f);e[h][c]=1/o}},z_=function(e,r,n,a){for(var i=new Array(n.k),s=0;s<i.length;s++)i[s]=[];for(var o,u,l=0;l<r.length;l++){o=-1/0,u=-1;for(var f=0;f<r[0].length;f++)r[l][f]>o&&(o=r[l][f],u=f);i[u].push(e[l])}for(var c=0;c<i.length;c++)i[c]=a.collection(i[c]);return i},pp=function(e){var r=this.cy(),n=this.nodes(),a=Ov(e),i,s,o,u,l;u=new Array(n.length);for(var f=0;f<n.length;f++)u[f]=new Array(a.k);o=new Array(n.length);for(var c=0;c<n.length;c++)o[c]=new Array(a.k);for(var h=0;h<n.length;h++){for(var d=0,v=0;v<a.k;v++)o[h][v]=Math.random(),d+=o[h][v];for(var g=0;g<a.k;g++)o[h][g]=o[h][g]/d}s=new Array(a.k);for(var p=0;p<a.k;p++)s[p]=new Array(a.attributes.length);l=new Array(n.length);for(var y=0;y<n.length;y++)l[y]=new Array(a.k);for(var m=!0,b=0;m&&b<a.maxIterations;)m=!1,q_(s,n,o,l,a),G_(o,u,s,n,a),k_(o,u,a.sensitivityThreshold)||(m=!0),b++;return i=z_(n,o,a,r),{clusters:i,degreeOfMembership:o}},$_={kMeans:B_,kMedoids:F_,fuzzyCMeans:pp,fcm:pp},V_=bt({distance:"euclidean",linkage:"min",mode:"threshold",threshold:1/0,addDendrogram:!1,dendrogramDepth:0,attributes:[]}),U_={single:"min",complete:"max"},H_=function(e){var r=V_(e),n=U_[r.linkage];return n!=null&&(r.linkage=n),r},yp=function(e,r,n,a,i){for(var s=0,o=1/0,u,l=i.attributes,f=function(C,S){return ws(i.distance,l.length,function(A){return l[A](C)},function(A){return l[A](S)},C,S)},c=0;c<e.length;c++){var h=e[c].key,d=n[h][a[h]];d<o&&(s=h,o=d)}if(i.mode==="threshold"&&o>=i.threshold||i.mode==="dendrogram"&&e.length===1)return!1;var v=r[s],g=r[a[s]],p;i.mode==="dendrogram"?p={left:v,right:g,key:v.key}:p={value:v.value.concat(g.value),key:v.key},e[v.index]=p,e.splice(g.index,1),r[v.key]=p;for(var y=0;y<e.length;y++){var m=e[y];v.key===m.key?u=1/0:i.linkage==="min"?(u=n[v.key][m.key],n[v.key][m.key]>n[g.key][m.key]&&(u=n[g.key][m.key])):i.linkage==="max"?(u=n[v.key][m.key],n[v.key][m.key]<n[g.key][m.key]&&(u=n[g.key][m.key])):i.linkage==="mean"?u=(n[v.key][m.key]*v.size+n[g.key][m.key]*g.size)/(v.size+g.size):i.mode==="dendrogram"?u=f(m.value,v.value):u=f(m.value[0],v.value[0]),n[v.key][m.key]=n[m.key][v.key]=u}for(var b=0;b<e.length;b++){var E=e[b].key;if(a[E]===v.key||a[E]===g.key){for(var T=E,I=0;I<e.length;I++){var w=e[I].key;n[E][w]<n[E][T]&&(T=w)}a[E]=T}e[b].index=b}return v.key=g.key=v.index=g.index=null,!0},Hn=function(e,r,n){e&&(e.value?r.push(e.value):(e.left&&Hn(e.left,r),e.right&&Hn(e.right,r)))},Yd=function(e,r){if(!e)return"";if(e.left&&e.right){var n=Yd(e.left,r),a=Yd(e.right,r),i=r.add({group:"nodes",data:{id:n+","+a}});return r.add({group:"edges",data:{source:n,target:i.id()}}),r.add({group:"edges",data:{source:a,target:i.id()}}),i.id()}else if(e.value)return e.value.id()},Wd=function(e,r,n){if(!e)return[];var a=[],i=[],s=[];return r===0?(e.left&&Hn(e.left,a),e.right&&Hn(e.right,i),s=a.concat(i),[n.collection(s)]):r===1?e.value?[n.collection(e.value)]:(e.left&&Hn(e.left,a),e.right&&Hn(e.right,i),[n.collection(a),n.collection(i)]):e.value?[n.collection(e.value)]:(e.left&&(a=Wd(e.left,r-1,n)),e.right&&(i=Wd(e.right,r-1,n)),a.concat(i))},mp=function(e){for(var r=this.cy(),n=this.nodes(),a=H_(e),i=a.attributes,s=function(b,E){return ws(a.distance,i.length,function(T){return i[T](b)},function(T){return i[T](E)},b,E)},o=[],u=[],l=[],f=[],c=0;c<n.length;c++){var h={value:a.mode==="dendrogram"?n[c]:[n[c]],key:c,index:c};o[c]=h,f[c]=h,u[c]=[],l[c]=0}for(var d=0;d<o.length;d++)for(var v=0;v<=d;v++){var g=void 0;a.mode==="dendrogram"?g=d===v?1/0:s(o[d].value,o[v].value):g=d===v?1/0:s(o[d].value[0],o[v].value[0]),u[d][v]=g,u[v][d]=g,g<u[d][l[d]]&&(l[d]=v)}for(var p=yp(o,f,u,l,a);p;)p=yp(o,f,u,l,a);var y;return a.mode==="dendrogram"?(y=Wd(o[0],a.dendrogramDepth,r),a.addDendrogram&&Yd(o[0],r)):(y=new Array(o.length),o.forEach(function(m,b){m.key=m.index=null,y[b]=r.collection(m.value)})),y},Y_={hierarchicalClustering:mp,hca:mp},W_=bt({distance:"euclidean",preference:"median",damping:.8,maxIterations:1e3,minIterations:100,attributes:[]}),X_=function(e){var r=e.damping,n=e.preference;.5<=r&&r<1||je("Damping must range on [0.5, 1).  Got: ".concat(r));var a=["median","mean","min","max"];return a.some(function(i){return i===n})||ae(n)||je("Preference must be one of [".concat(a.map(function(i){return"'".concat(i,"'")}).join(", "),"] or a number.  Got: ").concat(n)),W_(e)},K_=function(e,r,n,a){var i=function(o,u){return a[u](o)};return-ws(e,a.length,function(s){return i(r,s)},function(s){return i(n,s)},r,n)},j_=function(e,r){var n=null;return r==="median"?n=XD(e):r==="mean"?n=WD(e):r==="min"?n=HD(e):r==="max"?n=YD(e):n=r,n},Z_=function(e,r,n){for(var a=[],i=0;i<e;i++)r[i*e+i]+n[i*e+i]>0&&a.push(i);return a},bp=function(e,r,n){for(var a=[],i=0;i<e;i++){for(var s=-1,o=-1/0,u=0;u<n.length;u++){var l=n[u];r[i*e+l]>o&&(s=l,o=r[i*e+l])}s>0&&a.push(s)}for(var f=0;f<n.length;f++)a[n[f]]=n[f];return a},Q_=function(e,r,n){for(var a=bp(e,r,n),i=0;i<n.length;i++){for(var s=[],o=0;o<a.length;o++)a[o]===n[i]&&s.push(o);for(var u=-1,l=-1/0,f=0;f<s.length;f++){for(var c=0,h=0;h<s.length;h++)c+=r[s[h]*e+s[f]];c>l&&(u=f,l=c)}n[i]=s[u]}return a=bp(e,r,n),a},wp=function(e){for(var r=this.cy(),n=this.nodes(),a=X_(e),i={},s=0;s<n.length;s++)i[n[s].id()]=s;var o,u,l,f,c,h;o=n.length,u=o*o,l=new Array(u);for(var d=0;d<u;d++)l[d]=-1/0;for(var v=0;v<o;v++)for(var g=0;g<o;g++)v!==g&&(l[v*o+g]=K_(a.distance,n[v],n[g],a.attributes));f=j_(l,a.preference);for(var p=0;p<o;p++)l[p*o+p]=f;c=new Array(u);for(var y=0;y<u;y++)c[y]=0;h=new Array(u);for(var m=0;m<u;m++)h[m]=0;for(var b=new Array(o),E=new Array(o),T=new Array(o),I=0;I<o;I++)b[I]=0,E[I]=0,T[I]=0;for(var w=new Array(o*a.minIterations),x=0;x<w.length;x++)w[x]=0;var C;for(C=0;C<a.maxIterations;C++){for(var S=0;S<o;S++){for(var A=-1/0,R=-1/0,D=-1,_=0,M=0;M<o;M++)b[M]=c[S*o+M],_=h[S*o+M]+l[S*o+M],_>=A?(R=A,A=_,D=M):_>R&&(R=_);for(var k=0;k<o;k++)c[S*o+k]=(1-a.damping)*(l[S*o+k]-A)+a.damping*b[k];c[S*o+D]=(1-a.damping)*(l[S*o+D]-R)+a.damping*b[D]}for(var O=0;O<o;O++){for(var P=0,B=0;B<o;B++)b[B]=h[B*o+O],E[B]=Math.max(0,c[B*o+O]),P+=E[B];P-=E[O],E[O]=c[O*o+O],P+=E[O];for(var F=0;F<o;F++)h[F*o+O]=(1-a.damping)*Math.min(0,P-E[F])+a.damping*b[F];h[O*o+O]=(1-a.damping)*(P-E[O])+a.damping*b[O]}for(var N=0,q=0;q<o;q++){var V=h[q*o+q]+c[q*o+q]>0?1:0;w[C%a.minIterations*o+q]=V,N+=V}if(N>0&&(C>=a.minIterations-1||C==a.maxIterations-1)){for(var Y=0,H=0;H<o;H++){T[H]=0;for(var Z=0;Z<a.minIterations;Z++)T[H]+=w[Z*o+H];(T[H]===0||T[H]===a.minIterations)&&Y++}if(Y===o)break}}for(var ee=Z_(o,c,h),ie=Q_(o,l,ee),J={},G=0;G<ee.length;G++)J[ee[G]]=[];for(var $=0;$<n.length;$++){var U=i[n[$].id()],j=ie[U];j!=null&&J[j].push(n[$])}for(var ne=new Array(ee.length),re=0;re<ee.length;re++)ne[re]=r.collection(J[ee[re]]);return ne},J_={affinityPropagation:wp,ap:wp},eL=bt({root:void 0,directed:!1}),tL={hierholzer:function(e){if(!qe(e)){var r=arguments;e={root:r[0],directed:r[1]}}var n=eL(e),a=n.root,i=n.directed,s=this,o=!1,u,l,f;a&&(f=we(a)?this.filter(a)[0].id():a[0].id());var c={},h={};i?s.forEach(function(m){var b=m.id();if(m.isNode()){var E=m.indegree(!0),T=m.outdegree(!0),I=E-T,w=T-E;I==1?u?o=!0:u=b:w==1?l?o=!0:l=b:(w>1||I>1)&&(o=!0),c[b]=[],m.outgoers().forEach(function(x){x.isEdge()&&c[b].push(x.id())})}else h[b]=[void 0,m.target().id()]}):s.forEach(function(m){var b=m.id();if(m.isNode()){var E=m.degree(!0);E%2&&(u?l?o=!0:l=b:u=b),c[b]=[],m.connectedEdges().forEach(function(T){return c[b].push(T.id())})}else h[b]=[m.source().id(),m.target().id()]});var d={found:!1,trail:void 0};if(o)return d;if(l&&u)if(i){if(f&&l!=f)return d;f=l}else{if(f&&l!=f&&u!=f)return d;f||(f=l)}else f||(f=s[0].id());var v=function(b){for(var E=b,T=[b],I,w,x;c[E].length;)I=c[E].shift(),w=h[I][0],x=h[I][1],E!=x?(c[x]=c[x].filter(function(C){return C!=I}),E=x):!i&&E!=w&&(c[w]=c[w].filter(function(C){return C!=I}),E=w),T.unshift(I),T.unshift(E);return T},g=[],p=[];for(p=v(f);p.length!=1;)c[p[0]].length==0?(g.unshift(s.getElementById(p.shift())),g.unshift(s.getElementById(p.shift()))):p=v(p.shift()).concat(p);g.unshift(s.getElementById(p.shift()));for(var y in c)if(c[y].length)return d;return d.found=!0,d.trail=this.spawn(g,!0),d}},mi=function(){var e=this,r={},n=0,a=0,i=[],s=[],o={},u=function(h,d){for(var v=s.length-1,g=[],p=e.spawn();s[v].x!=h||s[v].y!=d;)g.push(s.pop().edge),v--;g.push(s.pop().edge),g.forEach(function(y){var m=y.connectedNodes().intersection(e);p.merge(y),m.forEach(function(b){var E=b.id(),T=b.connectedEdges().intersection(e);p.merge(b),r[E].cutVertex?p.merge(T.filter(function(I){return I.isLoop()})):p.merge(T)})}),i.push(p)},l=function(h,d,v){h===v&&(a+=1),r[d]={id:n,low:n++,cutVertex:!1};var g=e.getElementById(d).connectedEdges().intersection(e);if(g.size()===0)i.push(e.spawn(e.getElementById(d)));else{var p,y,m,b;g.forEach(function(E){p=E.source().id(),y=E.target().id(),m=p===d?y:p,m!==v&&(b=E.id(),o[b]||(o[b]=!0,s.push({x:d,y:m,edge:E})),m in r?r[d].low=Math.min(r[d].low,r[m].id):(l(h,m,d),r[d].low=Math.min(r[d].low,r[m].low),r[d].id<=r[m].low&&(r[d].cutVertex=!0,u(d,m))))})}};e.forEach(function(c){if(c.isNode()){var h=c.id();h in r||(a=0,l(h,h),r[h].cutVertex=a>1)}});var f=Object.keys(r).filter(function(c){return r[c].cutVertex}).map(function(c){return e.getElementById(c)});return{cut:e.spawn(f),components:i}},rL={hopcroftTarjanBiconnected:mi,htbc:mi,htb:mi,hopcroftTarjanBiconnectedComponents:mi},bi=function(){var e=this,r={},n=0,a=[],i=[],s=e.spawn(e),o=function(l){i.push(l),r[l]={index:n,low:n++,explored:!1};var f=e.getElementById(l).connectedEdges().intersection(e);if(f.forEach(function(g){var p=g.target().id();p!==l&&(p in r||o(p),r[p].explored||(r[l].low=Math.min(r[l].low,r[p].low)))}),r[l].index===r[l].low){for(var c=e.spawn();;){var h=i.pop();if(c.merge(e.getElementById(h)),r[h].low=r[l].index,r[h].explored=!0,h===l)break}var d=c.edgesWith(c),v=c.merge(d);a.push(v),s=s.difference(v)}};return e.forEach(function(u){if(u.isNode()){var l=u.id();l in r||o(l)}}),{cut:s,components:a}},nL={tarjanStronglyConnected:bi,tsc:bi,tscc:bi,tarjanStronglyConnectedComponents:bi},Lx={};[Ga,OD,PD,ND,FD,GD,VD,p_,Kn,jn,Hd,D_,$_,Y_,J_,tL,rL,nL].forEach(function(t){xe(Lx,t)});/*!
Embeddable Minimum Strictly-Compliant Promises/A+ 1.1.1 Thenable
Copyright (c) 2013-2014 Ralf S. Engelschall (http://engelschall.com)
Licensed under The MIT License (http://opensource.org/licenses/MIT)
*/var Mx=0,Ox=1,Px=2,Zt=function(e){if(!(this instanceof Zt))return new Zt(e);this.id="Thenable/1.0.7",this.state=Mx,this.fulfillValue=void 0,this.rejectReason=void 0,this.onFulfilled=[],this.onRejected=[],this.proxy={then:this.then.bind(this)},typeof e=="function"&&e.call(this,this.fulfill.bind(this),this.reject.bind(this))};Zt.prototype={fulfill:function(e){return Ep(this,Ox,"fulfillValue",e)},reject:function(e){return Ep(this,Px,"rejectReason",e)},then:function(e,r){var n=this,a=new Zt;return n.onFulfilled.push(Tp(e,a,"fulfill")),n.onRejected.push(Tp(r,a,"reject")),kx(n),a.proxy}};var Ep=function(e,r,n,a){return e.state===Mx&&(e.state=r,e[n]=a,kx(e)),e},kx=function(e){e.state===Ox?xp(e,"onFulfilled",e.fulfillValue):e.state===Px&&xp(e,"onRejected",e.rejectReason)},xp=function(e,r,n){if(e[r].length!==0){var a=e[r];e[r]=[];var i=function(){for(var o=0;o<a.length;o++)a[o](n)};typeof setImmediate=="function"?setImmediate(i):setTimeout(i,0)}},Tp=function(e,r,n){return function(a){if(typeof e!="function")r[n].call(r,a);else{var i;try{i=e(a)}catch(s){r.reject(s);return}Nx(r,i)}}},Nx=function(e,r){if(e===r||e.proxy===r){e.reject(new TypeError("cannot resolve promise with itself"));return}var n;if(ft(r)==="object"&&r!==null||typeof r=="function")try{n=r.then}catch(i){e.reject(i);return}if(typeof n=="function"){var a=!1;try{n.call(r,function(i){a||(a=!0,i===r?e.reject(new TypeError("circular thenable chain")):Nx(e,i))},function(i){a||(a=!0,e.reject(i))})}catch(i){a||e.reject(i)}return}e.fulfill(r)};Zt.all=function(t){return new Zt(function(e,r){for(var n=new Array(t.length),a=0,i=function(u,l){n[u]=l,a++,a===t.length&&e(n)},s=0;s<t.length;s++)(function(o){var u=t[o],l=u!=null&&u.then!=null;if(l)u.then(function(c){i(o,c)},function(c){r(c)});else{var f=u;i(o,f)}})(s)})};Zt.resolve=function(t){return new Zt(function(e,r){e(t)})};Zt.reject=function(t){return new Zt(function(e,r){r(t)})};var na=typeof Promise<"u"?Promise:Zt,Xd=function(e,r,n){var a=Tv(e),i=!a,s=this._private=xe({duration:1e3},r,n);if(s.target=e,s.style=s.style||s.css,s.started=!1,s.playing=!1,s.hooked=!1,s.applying=!1,s.progress=0,s.completes=[],s.frames=[],s.complete&&Qe(s.complete)&&s.completes.push(s.complete),i){var o=e.position();s.startPosition=s.startPosition||{x:o.x,y:o.y},s.startStyle=s.startStyle||e.cy().style().getAnimationStartStyle(e,s.style)}if(a){var u=e.pan();s.startPan={x:u.x,y:u.y},s.startZoom=e.zoom()}this.length=1,this[0]=this},Tn=Xd.prototype;xe(Tn,{instanceString:function(){return"animation"},hook:function(){var e=this._private;if(!e.hooked){var r,n=e.target._private.animation;e.queue?r=n.queue:r=n.current,r.push(this),Ft(e.target)&&e.target.cy().addToAnimationPool(e.target),e.hooked=!0}return this},play:function(){var e=this._private;return e.progress===1&&(e.progress=0),e.playing=!0,e.started=!1,e.stopped=!1,this.hook(),this},playing:function(){return this._private.playing},apply:function(){var e=this._private;return e.applying=!0,e.started=!1,e.stopped=!1,this.hook(),this},applying:function(){return this._private.applying},pause:function(){var e=this._private;return e.playing=!1,e.started=!1,this},stop:function(){var e=this._private;return e.playing=!1,e.started=!1,e.stopped=!0,this},rewind:function(){return this.progress(0)},fastforward:function(){return this.progress(1)},time:function(e){var r=this._private;return e===void 0?r.progress*r.duration:this.progress(e/r.duration)},progress:function(e){var r=this._private,n=r.playing;return e===void 0?r.progress:(n&&this.pause(),r.progress=e,r.started=!1,n&&this.play(),this)},completed:function(){return this._private.progress===1},reverse:function(){var e=this._private,r=e.playing;r&&this.pause(),e.progress=1-e.progress,e.started=!1;var n=function(l,f){var c=e[l];c!=null&&(e[l]=e[f],e[f]=c)};if(n("zoom","startZoom"),n("pan","startPan"),n("position","startPosition"),e.style)for(var a=0;a<e.style.length;a++){var i=e.style[a],s=i.name,o=e.startStyle[s];e.startStyle[s]=i,e.style[a]=o}return r&&this.play(),this},promise:function(e){var r=this._private,n;switch(e){case"frame":n=r.frames;break;default:case"complete":case"completed":n=r.completes}return new na(function(a,i){n.push(function(){a()})})}});Tn.complete=Tn.completed;Tn.run=Tn.play;Tn.running=Tn.playing;var aL={animated:function(){return function(){var r=this,n=r.length!==void 0,a=n?r:[r],i=this._private.cy||this;if(!i.styleEnabled())return!1;var s=a[0];if(s)return s._private.animation.current.length>0}},clearQueue:function(){return function(){var r=this,n=r.length!==void 0,a=n?r:[r],i=this._private.cy||this;if(!i.styleEnabled())return this;for(var s=0;s<a.length;s++){var o=a[s];o._private.animation.queue=[]}return this}},delay:function(){return function(r,n){var a=this._private.cy||this;return a.styleEnabled()?this.animate({delay:r,duration:r,complete:n}):this}},delayAnimation:function(){return function(r,n){var a=this._private.cy||this;return a.styleEnabled()?this.animation({delay:r,duration:r,complete:n}):this}},animation:function(){return function(r,n){var a=this,i=a.length!==void 0,s=i?a:[a],o=this._private.cy||this,u=!i,l=!u;if(!o.styleEnabled())return this;var f=o.style();r=xe({},r,n);var c=Object.keys(r).length===0;if(c)return new Xd(s[0],r);switch(r.duration===void 0&&(r.duration=400),r.duration){case"slow":r.duration=600;break;case"fast":r.duration=200;break}if(l&&(r.style=f.getPropsList(r.style||r.css),r.css=void 0),l&&r.renderedPosition!=null){var h=r.renderedPosition,d=o.pan(),v=o.zoom();r.position=Ex(h,v,d)}if(u&&r.panBy!=null){var g=r.panBy,p=o.pan();r.pan={x:p.x+g.x,y:p.y+g.y}}var y=r.center||r.centre;if(u&&y!=null){var m=o.getCenterPan(y.eles,r.zoom);m!=null&&(r.pan=m)}if(u&&r.fit!=null){var b=r.fit,E=o.getFitViewport(b.eles||b.boundingBox,b.padding);E!=null&&(r.pan=E.pan,r.zoom=E.zoom)}if(u&&qe(r.zoom)){var T=o.getZoomedViewport(r.zoom);T!=null?(T.zoomed&&(r.zoom=T.zoom),T.panned&&(r.pan=T.pan)):r.zoom=null}return new Xd(s[0],r)}},animate:function(){return function(r,n){var a=this,i=a.length!==void 0,s=i?a:[a],o=this._private.cy||this;if(!o.styleEnabled())return this;n&&(r=xe({},r,n));for(var u=0;u<s.length;u++){var l=s[u],f=l.animated()&&(r.queue===void 0||r.queue),c=l.animation(r,f?{queue:!0}:void 0);c.play()}return this}},stop:function(){return function(r,n){var a=this,i=a.length!==void 0,s=i?a:[a],o=this._private.cy||this;if(!o.styleEnabled())return this;for(var u=0;u<s.length;u++){for(var l=s[u],f=l._private,c=f.animation.current,h=0;h<c.length;h++){var d=c[h],v=d._private;n&&(v.duration=0)}r&&(f.animation.queue=[]),n||(f.animation.current=[])}return o.notify("draw"),this}}},_o,Cp;function Es(){if(Cp)return _o;Cp=1;var t=Array.isArray;return _o=t,_o}var Lo,Sp;function iL(){if(Sp)return Lo;Sp=1;var t=Es(),e=Ja(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function a(i,s){if(t(i))return!1;var o=typeof i;return o=="number"||o=="symbol"||o=="boolean"||i==null||e(i)?!0:n.test(i)||!r.test(i)||s!=null&&i in Object(s)}return Lo=a,Lo}var Mo,Ap;function sL(){if(Ap)return Mo;Ap=1;var t=hx(),e=Qa(),r="[object AsyncFunction]",n="[object Function]",a="[object GeneratorFunction]",i="[object Proxy]";function s(o){if(!e(o))return!1;var u=t(o);return u==n||u==a||u==r||u==i}return Mo=s,Mo}var Oo,Ip;function oL(){if(Ip)return Oo;Ip=1;var t=ys(),e=t["__core-js_shared__"];return Oo=e,Oo}var Po,Rp;function uL(){if(Rp)return Po;Rp=1;var t=oL(),e=function(){var n=/[^.]+$/.exec(t&&t.keys&&t.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function r(n){return!!e&&e in n}return Po=r,Po}var ko,Dp;function lL(){if(Dp)return ko;Dp=1;var t=Function.prototype,e=t.toString;function r(n){if(n!=null){try{return e.call(n)}catch{}try{return n+""}catch{}}return""}return ko=r,ko}var No,_p;function fL(){if(_p)return No;_p=1;var t=sL(),e=uL(),r=Qa(),n=lL(),a=/[\\^$.*+?()[\]{}|]/g,i=/^\[object .+?Constructor\]$/,s=Function.prototype,o=Object.prototype,u=s.toString,l=o.hasOwnProperty,f=RegExp("^"+u.call(l).replace(a,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function c(h){if(!r(h)||e(h))return!1;var d=t(h)?f:i;return d.test(n(h))}return No=c,No}var Bo,Lp;function cL(){if(Lp)return Bo;Lp=1;function t(e,r){return e==null?void 0:e[r]}return Bo=t,Bo}var Fo,Mp;function Pv(){if(Mp)return Fo;Mp=1;var t=fL(),e=cL();function r(n,a){var i=e(n,a);return t(i)?i:void 0}return Fo=r,Fo}var qo,Op;function xs(){if(Op)return qo;Op=1;var t=Pv(),e=t(Object,"create");return qo=e,qo}var Go,Pp;function hL(){if(Pp)return Go;Pp=1;var t=xs();function e(){this.__data__=t?t(null):{},this.size=0}return Go=e,Go}var zo,kp;function dL(){if(kp)return zo;kp=1;function t(e){var r=this.has(e)&&delete this.__data__[e];return this.size-=r?1:0,r}return zo=t,zo}var $o,Np;function vL(){if(Np)return $o;Np=1;var t=xs(),e="__lodash_hash_undefined__",r=Object.prototype,n=r.hasOwnProperty;function a(i){var s=this.__data__;if(t){var o=s[i];return o===e?void 0:o}return n.call(s,i)?s[i]:void 0}return $o=a,$o}var Vo,Bp;function gL(){if(Bp)return Vo;Bp=1;var t=xs(),e=Object.prototype,r=e.hasOwnProperty;function n(a){var i=this.__data__;return t?i[a]!==void 0:r.call(i,a)}return Vo=n,Vo}var Uo,Fp;function pL(){if(Fp)return Uo;Fp=1;var t=xs(),e="__lodash_hash_undefined__";function r(n,a){var i=this.__data__;return this.size+=this.has(n)?0:1,i[n]=t&&a===void 0?e:a,this}return Uo=r,Uo}var Ho,qp;function yL(){if(qp)return Ho;qp=1;var t=hL(),e=dL(),r=vL(),n=gL(),a=pL();function i(s){var o=-1,u=s==null?0:s.length;for(this.clear();++o<u;){var l=s[o];this.set(l[0],l[1])}}return i.prototype.clear=t,i.prototype.delete=e,i.prototype.get=r,i.prototype.has=n,i.prototype.set=a,Ho=i,Ho}var Yo,Gp;function mL(){if(Gp)return Yo;Gp=1;function t(){this.__data__=[],this.size=0}return Yo=t,Yo}var Wo,zp;function Bx(){if(zp)return Wo;zp=1;function t(e,r){return e===r||e!==e&&r!==r}return Wo=t,Wo}var Xo,$p;function Ts(){if($p)return Xo;$p=1;var t=Bx();function e(r,n){for(var a=r.length;a--;)if(t(r[a][0],n))return a;return-1}return Xo=e,Xo}var Ko,Vp;function bL(){if(Vp)return Ko;Vp=1;var t=Ts(),e=Array.prototype,r=e.splice;function n(a){var i=this.__data__,s=t(i,a);if(s<0)return!1;var o=i.length-1;return s==o?i.pop():r.call(i,s,1),--this.size,!0}return Ko=n,Ko}var jo,Up;function wL(){if(Up)return jo;Up=1;var t=Ts();function e(r){var n=this.__data__,a=t(n,r);return a<0?void 0:n[a][1]}return jo=e,jo}var Zo,Hp;function EL(){if(Hp)return Zo;Hp=1;var t=Ts();function e(r){return t(this.__data__,r)>-1}return Zo=e,Zo}var Qo,Yp;function xL(){if(Yp)return Qo;Yp=1;var t=Ts();function e(r,n){var a=this.__data__,i=t(a,r);return i<0?(++this.size,a.push([r,n])):a[i][1]=n,this}return Qo=e,Qo}var Jo,Wp;function TL(){if(Wp)return Jo;Wp=1;var t=mL(),e=bL(),r=wL(),n=EL(),a=xL();function i(s){var o=-1,u=s==null?0:s.length;for(this.clear();++o<u;){var l=s[o];this.set(l[0],l[1])}}return i.prototype.clear=t,i.prototype.delete=e,i.prototype.get=r,i.prototype.has=n,i.prototype.set=a,Jo=i,Jo}var eu,Xp;function CL(){if(Xp)return eu;Xp=1;var t=Pv(),e=ys(),r=t(e,"Map");return eu=r,eu}var tu,Kp;function SL(){if(Kp)return tu;Kp=1;var t=yL(),e=TL(),r=CL();function n(){this.size=0,this.__data__={hash:new t,map:new(r||e),string:new t}}return tu=n,tu}var ru,jp;function AL(){if(jp)return ru;jp=1;function t(e){var r=typeof e;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?e!=="__proto__":e===null}return ru=t,ru}var nu,Zp;function Cs(){if(Zp)return nu;Zp=1;var t=AL();function e(r,n){var a=r.__data__;return t(n)?a[typeof n=="string"?"string":"hash"]:a.map}return nu=e,nu}var au,Qp;function IL(){if(Qp)return au;Qp=1;var t=Cs();function e(r){var n=t(this,r).delete(r);return this.size-=n?1:0,n}return au=e,au}var iu,Jp;function RL(){if(Jp)return iu;Jp=1;var t=Cs();function e(r){return t(this,r).get(r)}return iu=e,iu}var su,ey;function DL(){if(ey)return su;ey=1;var t=Cs();function e(r){return t(this,r).has(r)}return su=e,su}var ou,ty;function _L(){if(ty)return ou;ty=1;var t=Cs();function e(r,n){var a=t(this,r),i=a.size;return a.set(r,n),this.size+=a.size==i?0:1,this}return ou=e,ou}var uu,ry;function LL(){if(ry)return uu;ry=1;var t=SL(),e=IL(),r=RL(),n=DL(),a=_L();function i(s){var o=-1,u=s==null?0:s.length;for(this.clear();++o<u;){var l=s[o];this.set(l[0],l[1])}}return i.prototype.clear=t,i.prototype.delete=e,i.prototype.get=r,i.prototype.has=n,i.prototype.set=a,uu=i,uu}var lu,ny;function ML(){if(ny)return lu;ny=1;var t=LL(),e="Expected a function";function r(n,a){if(typeof n!="function"||a!=null&&typeof a!="function")throw new TypeError(e);var i=function(){var s=arguments,o=a?a.apply(this,s):s[0],u=i.cache;if(u.has(o))return u.get(o);var l=n.apply(this,s);return i.cache=u.set(o,l)||u,l};return i.cache=new(r.Cache||t),i}return r.Cache=t,lu=r,lu}var fu,ay;function OL(){if(ay)return fu;ay=1;var t=ML(),e=500;function r(n){var a=t(n,function(s){return i.size===e&&i.clear(),s}),i=a.cache;return a}return fu=r,fu}var cu,iy;function Fx(){if(iy)return cu;iy=1;var t=OL(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,r=/\\(\\)?/g,n=t(function(a){var i=[];return a.charCodeAt(0)===46&&i.push(""),a.replace(e,function(s,o,u,l){i.push(u?l.replace(r,"$1"):o||s)}),i});return cu=n,cu}var hu,sy;function qx(){if(sy)return hu;sy=1;function t(e,r){for(var n=-1,a=e==null?0:e.length,i=Array(a);++n<a;)i[n]=r(e[n],n,e);return i}return hu=t,hu}var du,oy;function PL(){if(oy)return du;oy=1;var t=Sv(),e=qx(),r=Es(),n=Ja(),a=t?t.prototype:void 0,i=a?a.toString:void 0;function s(o){if(typeof o=="string")return o;if(r(o))return e(o,s)+"";if(n(o))return i?i.call(o):"";var u=o+"";return u=="0"&&1/o==-1/0?"-0":u}return du=s,du}var vu,uy;function Gx(){if(uy)return vu;uy=1;var t=PL();function e(r){return r==null?"":t(r)}return vu=e,vu}var gu,ly;function zx(){if(ly)return gu;ly=1;var t=Es(),e=iL(),r=Fx(),n=Gx();function a(i,s){return t(i)?i:e(i,s)?[i]:r(n(i))}return gu=a,gu}var pu,fy;function kv(){if(fy)return pu;fy=1;var t=Ja();function e(r){if(typeof r=="string"||t(r))return r;var n=r+"";return n=="0"&&1/r==-1/0?"-0":n}return pu=e,pu}var yu,cy;function kL(){if(cy)return yu;cy=1;var t=zx(),e=kv();function r(n,a){a=t(a,n);for(var i=0,s=a.length;n!=null&&i<s;)n=n[e(a[i++])];return i&&i==s?n:void 0}return yu=r,yu}var mu,hy;function NL(){if(hy)return mu;hy=1;var t=kL();function e(r,n,a){var i=r==null?void 0:t(r,n);return i===void 0?a:i}return mu=e,mu}var BL=NL(),FL=Za(BL),bu,dy;function qL(){if(dy)return bu;dy=1;var t=Pv(),e=function(){try{var r=t(Object,"defineProperty");return r({},"",{}),r}catch{}}();return bu=e,bu}var wu,vy;function GL(){if(vy)return wu;vy=1;var t=qL();function e(r,n,a){n=="__proto__"&&t?t(r,n,{configurable:!0,enumerable:!0,value:a,writable:!0}):r[n]=a}return wu=e,wu}var Eu,gy;function zL(){if(gy)return Eu;gy=1;var t=GL(),e=Bx(),r=Object.prototype,n=r.hasOwnProperty;function a(i,s,o){var u=i[s];(!(n.call(i,s)&&e(u,o))||o===void 0&&!(s in i))&&t(i,s,o)}return Eu=a,Eu}var xu,py;function $L(){if(py)return xu;py=1;var t=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function r(n,a){var i=typeof n;return a=a??t,!!a&&(i=="number"||i!="symbol"&&e.test(n))&&n>-1&&n%1==0&&n<a}return xu=r,xu}var Tu,yy;function VL(){if(yy)return Tu;yy=1;var t=zL(),e=zx(),r=$L(),n=Qa(),a=kv();function i(s,o,u,l){if(!n(s))return s;o=e(o,s);for(var f=-1,c=o.length,h=c-1,d=s;d!=null&&++f<c;){var v=a(o[f]),g=u;if(v==="__proto__"||v==="constructor"||v==="prototype")return s;if(f!=h){var p=d[v];g=l?l(p,v,d):void 0,g===void 0&&(g=n(p)?p:r(o[f+1])?[]:{})}t(d,v,g),d=d[v]}return s}return Tu=i,Tu}var Cu,my;function UL(){if(my)return Cu;my=1;var t=VL();function e(r,n,a){return r==null?r:t(r,n,a)}return Cu=e,Cu}var HL=UL(),YL=Za(HL),Su,by;function WL(){if(by)return Su;by=1;function t(e,r){var n=-1,a=e.length;for(r||(r=Array(a));++n<a;)r[n]=e[n];return r}return Su=t,Su}var Au,wy;function XL(){if(wy)return Au;wy=1;var t=qx(),e=WL(),r=Es(),n=Ja(),a=Fx(),i=kv(),s=Gx();function o(u){return r(u)?t(u,i):n(u)?[u]:e(a(s(u)))}return Au=o,Au}var KL=XL(),jL=Za(KL),ZL={data:function(e){var r={field:"data",bindingEvent:"data",allowBinding:!1,allowSetting:!1,allowGetting:!1,settingEvent:"data",settingTriggersEvent:!1,triggerFnName:"trigger",immutableKeys:{},updateStyle:!1,beforeGet:function(a){},beforeSet:function(a,i){},onSet:function(a){},canSet:function(a){return!0}};return e=xe({},r,e),function(a,i){var s=e,o=this,u=o.length!==void 0,l=u?o:[o],f=u?o[0]:o;if(we(a)){var c=a.indexOf(".")!==-1,h=c&&jL(a);if(s.allowGetting&&i===void 0){var d;return f&&(s.beforeGet(f),h&&f._private[s.field][a]===void 0?d=FL(f._private[s.field],h):d=f._private[s.field][a]),d}else if(s.allowSetting&&i!==void 0){var v=!s.immutableKeys[a];if(v){var g=rx({},a,i);s.beforeSet(o,g);for(var p=0,y=l.length;p<y;p++){var m=l[p];s.canSet(m)&&(h&&f._private[s.field][a]===void 0?YL(m._private[s.field],h,i):m._private[s.field][a]=i)}s.updateStyle&&o.updateStyle(),s.onSet(o),s.settingTriggersEvent&&o[s.triggerFnName](s.settingEvent)}}}else if(s.allowSetting&&qe(a)){var b=a,E,T,I=Object.keys(b);s.beforeSet(o,b);for(var w=0;w<I.length;w++){E=I[w],T=b[E];var x=!s.immutableKeys[E];if(x)for(var C=0;C<l.length;C++){var S=l[C];s.canSet(S)&&(S._private[s.field][E]=T)}}s.updateStyle&&o.updateStyle(),s.onSet(o),s.settingTriggersEvent&&o[s.triggerFnName](s.settingEvent)}else if(s.allowBinding&&Qe(a)){var A=a;o.on(s.bindingEvent,A)}else if(s.allowGetting&&a===void 0){var R;return f&&(s.beforeGet(f),R=f._private[s.field]),R}return o}},removeData:function(e){var r={field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!1,immutableKeys:{}};return e=xe({},r,e),function(a){var i=e,s=this,o=s.length!==void 0,u=o?s:[s];if(we(a)){for(var l=a.split(/\s+/),f=l.length,c=0;c<f;c++){var h=l[c];if(!Hr(h)){var d=!i.immutableKeys[h];if(d)for(var v=0,g=u.length;v<g;v++)u[v]._private[i.field][h]=void 0}}i.triggerEvent&&s[i.triggerFnName](i.event)}else if(a===void 0){for(var p=0,y=u.length;p<y;p++)for(var m=u[p]._private[i.field],b=Object.keys(m),E=0;E<b.length;E++){var T=b[E],I=!i.immutableKeys[T];I&&(m[T]=void 0)}i.triggerEvent&&s[i.triggerFnName](i.event)}return s}}},QL={eventAliasesOn:function(e){var r=e;r.addListener=r.listen=r.bind=r.on,r.unlisten=r.unbind=r.off=r.removeListener,r.trigger=r.emit,r.pon=r.promiseOn=function(n,a){var i=this,s=Array.prototype.slice.call(arguments,0);return new na(function(o,u){var l=function(d){i.off.apply(i,c),o(d)},f=s.concat([l]),c=f.concat([]);i.on.apply(i,f)})}}},$e={};[aL,ZL,QL].forEach(function(t){xe($e,t)});var JL={animate:$e.animate(),animation:$e.animation(),animated:$e.animated(),clearQueue:$e.clearQueue(),delay:$e.delay(),delayAnimation:$e.delayAnimation(),stop:$e.stop()},Mi={classes:function(e){var r=this;if(e===void 0){var n=[];return r[0]._private.classes.forEach(function(v){return n.push(v)}),n}else He(e)||(e=(e||"").match(/\S+/g)||[]);for(var a=[],i=new ra(e),s=0;s<r.length;s++){for(var o=r[s],u=o._private,l=u.classes,f=!1,c=0;c<e.length;c++){var h=e[c],d=l.has(h);if(!d){f=!0;break}}f||(f=l.size!==e.length),f&&(u.classes=i,a.push(o))}return a.length>0&&this.spawn(a).updateStyle().emit("class"),r},addClass:function(e){return this.toggleClass(e,!0)},hasClass:function(e){var r=this[0];return r!=null&&r._private.classes.has(e)},toggleClass:function(e,r){He(e)||(e=e.match(/\S+/g)||[]);for(var n=this,a=r===void 0,i=[],s=0,o=n.length;s<o;s++)for(var u=n[s],l=u._private.classes,f=!1,c=0;c<e.length;c++){var h=e[c],d=l.has(h),v=!1;r||a&&!d?(l.add(h),v=!0):(!r||a&&d)&&(l.delete(h),v=!0),!f&&v&&(i.push(u),f=!0)}return i.length>0&&this.spawn(i).updateStyle().emit("class"),n},removeClass:function(e){return this.toggleClass(e,!1)},flashClass:function(e,r){var n=this;if(r==null)r=250;else if(r===0)return n;return n.addClass(e),setTimeout(function(){n.removeClass(e)},r),n}};Mi.className=Mi.classNames=Mi.classes;var Fe={metaChar:"[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]",comparatorOp:"=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=",boolOp:"\\?|\\!|\\^",string:`"(?:\\\\"|[^"])*"|'(?:\\\\'|[^'])*'`,number:lt,meta:"degree|indegree|outdegree",separator:"\\s*,\\s*",descendant:"\\s+",child:"\\s+>\\s+",subject:"\\$",group:"node|edge|\\*",directedEdge:"\\s+->\\s+",undirectedEdge:"\\s+<->\\s+"};Fe.variable="(?:[\\w-.]|(?:\\\\"+Fe.metaChar+"))+";Fe.className="(?:[\\w-]|(?:\\\\"+Fe.metaChar+"))+";Fe.value=Fe.string+"|"+Fe.number;Fe.id=Fe.variable;(function(){var t,e,r;for(t=Fe.comparatorOp.split("|"),r=0;r<t.length;r++)e=t[r],Fe.comparatorOp+="|@"+e;for(t=Fe.comparatorOp.split("|"),r=0;r<t.length;r++)e=t[r],!(e.indexOf("!")>=0)&&e!=="="&&(Fe.comparatorOp+="|\\!"+e)})();var Ue=function(){return{checks:[]}},le={GROUP:0,COLLECTION:1,FILTER:2,DATA_COMPARE:3,DATA_EXIST:4,DATA_BOOL:5,META_COMPARE:6,STATE:7,ID:8,CLASS:9,UNDIRECTED_EDGE:10,DIRECTED_EDGE:11,NODE_SOURCE:12,NODE_TARGET:13,NODE_NEIGHBOR:14,CHILD:15,DESCENDANT:16,PARENT:17,ANCESTOR:18,COMPOUND_SPLIT:19,TRUE:20},Kd=[{selector:":selected",matches:function(e){return e.selected()}},{selector:":unselected",matches:function(e){return!e.selected()}},{selector:":selectable",matches:function(e){return e.selectable()}},{selector:":unselectable",matches:function(e){return!e.selectable()}},{selector:":locked",matches:function(e){return e.locked()}},{selector:":unlocked",matches:function(e){return!e.locked()}},{selector:":visible",matches:function(e){return e.visible()}},{selector:":hidden",matches:function(e){return!e.visible()}},{selector:":transparent",matches:function(e){return e.transparent()}},{selector:":grabbed",matches:function(e){return e.grabbed()}},{selector:":free",matches:function(e){return!e.grabbed()}},{selector:":removed",matches:function(e){return e.removed()}},{selector:":inside",matches:function(e){return!e.removed()}},{selector:":grabbable",matches:function(e){return e.grabbable()}},{selector:":ungrabbable",matches:function(e){return!e.grabbable()}},{selector:":animated",matches:function(e){return e.animated()}},{selector:":unanimated",matches:function(e){return!e.animated()}},{selector:":parent",matches:function(e){return e.isParent()}},{selector:":childless",matches:function(e){return e.isChildless()}},{selector:":child",matches:function(e){return e.isChild()}},{selector:":orphan",matches:function(e){return e.isOrphan()}},{selector:":nonorphan",matches:function(e){return e.isChild()}},{selector:":compound",matches:function(e){return e.isNode()?e.isParent():e.source().isParent()||e.target().isParent()}},{selector:":loop",matches:function(e){return e.isLoop()}},{selector:":simple",matches:function(e){return e.isSimple()}},{selector:":active",matches:function(e){return e.active()}},{selector:":inactive",matches:function(e){return!e.active()}},{selector:":backgrounding",matches:function(e){return e.backgrounding()}},{selector:":nonbackgrounding",matches:function(e){return!e.backgrounding()}}].sort(function(t,e){return ZR(t.selector,e.selector)}),eM=function(){for(var t={},e,r=0;r<Kd.length;r++)e=Kd[r],t[e.selector]=e.matches;return t}(),tM=function(e,r){return eM[e](r)},rM="("+Kd.map(function(t){return t.selector}).join("|")+")",kn=function(e){return e.replace(new RegExp("\\\\("+Fe.metaChar+")","g"),function(r,n){return n})},Rr=function(e,r,n){e[e.length-1]=n},jd=[{name:"group",query:!0,regex:"("+Fe.group+")",populate:function(e,r,n){var a=at(n,1),i=a[0];r.checks.push({type:le.GROUP,value:i==="*"?i:i+"s"})}},{name:"state",query:!0,regex:rM,populate:function(e,r,n){var a=at(n,1),i=a[0];r.checks.push({type:le.STATE,value:i})}},{name:"id",query:!0,regex:"\\#("+Fe.id+")",populate:function(e,r,n){var a=at(n,1),i=a[0];r.checks.push({type:le.ID,value:kn(i)})}},{name:"className",query:!0,regex:"\\.("+Fe.className+")",populate:function(e,r,n){var a=at(n,1),i=a[0];r.checks.push({type:le.CLASS,value:kn(i)})}},{name:"dataExists",query:!0,regex:"\\[\\s*("+Fe.variable+")\\s*\\]",populate:function(e,r,n){var a=at(n,1),i=a[0];r.checks.push({type:le.DATA_EXIST,field:kn(i)})}},{name:"dataCompare",query:!0,regex:"\\[\\s*("+Fe.variable+")\\s*("+Fe.comparatorOp+")\\s*("+Fe.value+")\\s*\\]",populate:function(e,r,n){var a=at(n,3),i=a[0],s=a[1],o=a[2],u=new RegExp("^"+Fe.string+"$").exec(o)!=null;u?o=o.substring(1,o.length-1):o=parseFloat(o),r.checks.push({type:le.DATA_COMPARE,field:kn(i),operator:s,value:o})}},{name:"dataBool",query:!0,regex:"\\[\\s*("+Fe.boolOp+")\\s*("+Fe.variable+")\\s*\\]",populate:function(e,r,n){var a=at(n,2),i=a[0],s=a[1];r.checks.push({type:le.DATA_BOOL,field:kn(s),operator:i})}},{name:"metaCompare",query:!0,regex:"\\[\\[\\s*("+Fe.meta+")\\s*("+Fe.comparatorOp+")\\s*("+Fe.number+")\\s*\\]\\]",populate:function(e,r,n){var a=at(n,3),i=a[0],s=a[1],o=a[2];r.checks.push({type:le.META_COMPARE,field:kn(i),operator:s,value:parseFloat(o)})}},{name:"nextQuery",separator:!0,regex:Fe.separator,populate:function(e,r){var n=e.currentSubject,a=e.edgeCount,i=e.compoundCount,s=e[e.length-1];n!=null&&(s.subject=n,e.currentSubject=null),s.edgeCount=a,s.compoundCount=i,e.edgeCount=0,e.compoundCount=0;var o=e[e.length++]=Ue();return o}},{name:"directedEdge",separator:!0,regex:Fe.directedEdge,populate:function(e,r){if(e.currentSubject==null){var n=Ue(),a=r,i=Ue();return n.checks.push({type:le.DIRECTED_EDGE,source:a,target:i}),Rr(e,r,n),e.edgeCount++,i}else{var s=Ue(),o=r,u=Ue();return s.checks.push({type:le.NODE_SOURCE,source:o,target:u}),Rr(e,r,s),e.edgeCount++,u}}},{name:"undirectedEdge",separator:!0,regex:Fe.undirectedEdge,populate:function(e,r){if(e.currentSubject==null){var n=Ue(),a=r,i=Ue();return n.checks.push({type:le.UNDIRECTED_EDGE,nodes:[a,i]}),Rr(e,r,n),e.edgeCount++,i}else{var s=Ue(),o=r,u=Ue();return s.checks.push({type:le.NODE_NEIGHBOR,node:o,neighbor:u}),Rr(e,r,s),u}}},{name:"child",separator:!0,regex:Fe.child,populate:function(e,r){if(e.currentSubject==null){var n=Ue(),a=Ue(),i=e[e.length-1];return n.checks.push({type:le.CHILD,parent:i,child:a}),Rr(e,r,n),e.compoundCount++,a}else if(e.currentSubject===r){var s=Ue(),o=e[e.length-1],u=Ue(),l=Ue(),f=Ue(),c=Ue();return s.checks.push({type:le.COMPOUND_SPLIT,left:o,right:u,subject:l}),l.checks=r.checks,r.checks=[{type:le.TRUE}],c.checks.push({type:le.TRUE}),u.checks.push({type:le.PARENT,parent:c,child:f}),Rr(e,o,s),e.currentSubject=l,e.compoundCount++,f}else{var h=Ue(),d=Ue(),v=[{type:le.PARENT,parent:h,child:d}];return h.checks=r.checks,r.checks=v,e.compoundCount++,d}}},{name:"descendant",separator:!0,regex:Fe.descendant,populate:function(e,r){if(e.currentSubject==null){var n=Ue(),a=Ue(),i=e[e.length-1];return n.checks.push({type:le.DESCENDANT,ancestor:i,descendant:a}),Rr(e,r,n),e.compoundCount++,a}else if(e.currentSubject===r){var s=Ue(),o=e[e.length-1],u=Ue(),l=Ue(),f=Ue(),c=Ue();return s.checks.push({type:le.COMPOUND_SPLIT,left:o,right:u,subject:l}),l.checks=r.checks,r.checks=[{type:le.TRUE}],c.checks.push({type:le.TRUE}),u.checks.push({type:le.ANCESTOR,ancestor:c,descendant:f}),Rr(e,o,s),e.currentSubject=l,e.compoundCount++,f}else{var h=Ue(),d=Ue(),v=[{type:le.ANCESTOR,ancestor:h,descendant:d}];return h.checks=r.checks,r.checks=v,e.compoundCount++,d}}},{name:"subject",modifier:!0,regex:Fe.subject,populate:function(e,r){if(e.currentSubject!=null&&e.currentSubject!==r)return Ve("Redefinition of subject in selector `"+e.toString()+"`"),!1;e.currentSubject=r;var n=e[e.length-1],a=n.checks[0],i=a==null?null:a.type;i===le.DIRECTED_EDGE?a.type=le.NODE_TARGET:i===le.UNDIRECTED_EDGE&&(a.type=le.NODE_NEIGHBOR,a.node=a.nodes[1],a.neighbor=a.nodes[0],a.nodes=null)}}];jd.forEach(function(t){return t.regexObj=new RegExp("^"+t.regex)});var nM=function(e){for(var r,n,a,i=0;i<jd.length;i++){var s=jd[i],o=s.name,u=e.match(s.regexObj);if(u!=null){n=u,r=s,a=o;var l=u[0];e=e.substring(l.length);break}}return{expr:r,match:n,name:a,remaining:e}},aM=function(e){var r=e.match(/^\s+/);if(r){var n=r[0];e=e.substring(n.length)}return e},iM=function(e){var r=this,n=r.inputText=e,a=r[0]=Ue();for(r.length=1,n=aM(n);;){var i=nM(n);if(i.expr==null)return Ve("The selector `"+e+"`is invalid"),!1;var s=i.match.slice(1),o=i.expr.populate(r,a,s);if(o===!1)return!1;if(o!=null&&(a=o),n=i.remaining,n.match(/^\s*$/))break}var u=r[r.length-1];r.currentSubject!=null&&(u.subject=r.currentSubject),u.edgeCount=r.edgeCount,u.compoundCount=r.compoundCount;for(var l=0;l<r.length;l++){var f=r[l];if(f.compoundCount>0&&f.edgeCount>0)return Ve("The selector `"+e+"` is invalid because it uses both a compound selector and an edge selector"),!1;if(f.edgeCount>1)return Ve("The selector `"+e+"` is invalid because it uses multiple edge selectors"),!1;f.edgeCount===1&&Ve("The selector `"+e+"` is deprecated.  Edge selectors do not take effect on changes to source and target nodes after an edge is added, for performance reasons.  Use a class or data selector on edges instead, updating the class or data of an edge when your app detects a change in source or target nodes.")}return!0},sM=function(){if(this.toStringCache!=null)return this.toStringCache;for(var e=function(f){return f??""},r=function(f){return we(f)?'"'+f+'"':e(f)},n=function(f){return" "+f+" "},a=function(f,c){var h=f.type,d=f.value;switch(h){case le.GROUP:{var v=e(d);return v.substring(0,v.length-1)}case le.DATA_COMPARE:{var g=f.field,p=f.operator;return"["+g+n(e(p))+r(d)+"]"}case le.DATA_BOOL:{var y=f.operator,m=f.field;return"["+e(y)+m+"]"}case le.DATA_EXIST:{var b=f.field;return"["+b+"]"}case le.META_COMPARE:{var E=f.operator,T=f.field;return"[["+T+n(e(E))+r(d)+"]]"}case le.STATE:return d;case le.ID:return"#"+d;case le.CLASS:return"."+d;case le.PARENT:case le.CHILD:return i(f.parent,c)+n(">")+i(f.child,c);case le.ANCESTOR:case le.DESCENDANT:return i(f.ancestor,c)+" "+i(f.descendant,c);case le.COMPOUND_SPLIT:{var I=i(f.left,c),w=i(f.subject,c),x=i(f.right,c);return I+(I.length>0?" ":"")+w+x}case le.TRUE:return""}},i=function(f,c){return f.checks.reduce(function(h,d,v){return h+(c===f&&v===0?"$":"")+a(d,c)},"")},s="",o=0;o<this.length;o++){var u=this[o];s+=i(u,u.subject),this.length>1&&o<this.length-1&&(s+=", ")}return this.toStringCache=s,s},oM={parse:iM,toString:sM},$x=function(e,r,n){var a,i=we(e),s=ae(e),o=we(n),u,l,f=!1,c=!1,h=!1;switch(r.indexOf("!")>=0&&(r=r.replace("!",""),c=!0),r.indexOf("@")>=0&&(r=r.replace("@",""),f=!0),(i||o||f)&&(u=!i&&!s?"":""+e,l=""+n),f&&(e=u=u.toLowerCase(),n=l=l.toLowerCase()),r){case"*=":a=u.indexOf(l)>=0;break;case"$=":a=u.indexOf(l,u.length-l.length)>=0;break;case"^=":a=u.indexOf(l)===0;break;case"=":a=e===n;break;case">":h=!0,a=e>n;break;case">=":h=!0,a=e>=n;break;case"<":h=!0,a=e<n;break;case"<=":h=!0,a=e<=n;break;default:a=!1;break}return c&&(e!=null||!h)&&(a=!a),a},uM=function(e,r){switch(r){case"?":return!!e;case"!":return!e;case"^":return e===void 0}},lM=function(e){return e!==void 0},Nv=function(e,r){return e.data(r)},fM=function(e,r){return e[r]()},et=[],Ke=function(e,r){return e.checks.every(function(n){return et[n.type](n,r)})};et[le.GROUP]=function(t,e){var r=t.value;return r==="*"||r===e.group()};et[le.STATE]=function(t,e){var r=t.value;return tM(r,e)};et[le.ID]=function(t,e){var r=t.value;return e.id()===r};et[le.CLASS]=function(t,e){var r=t.value;return e.hasClass(r)};et[le.META_COMPARE]=function(t,e){var r=t.field,n=t.operator,a=t.value;return $x(fM(e,r),n,a)};et[le.DATA_COMPARE]=function(t,e){var r=t.field,n=t.operator,a=t.value;return $x(Nv(e,r),n,a)};et[le.DATA_BOOL]=function(t,e){var r=t.field,n=t.operator;return uM(Nv(e,r),n)};et[le.DATA_EXIST]=function(t,e){var r=t.field;return t.operator,lM(Nv(e,r))};et[le.UNDIRECTED_EDGE]=function(t,e){var r=t.nodes[0],n=t.nodes[1],a=e.source(),i=e.target();return Ke(r,a)&&Ke(n,i)||Ke(n,a)&&Ke(r,i)};et[le.NODE_NEIGHBOR]=function(t,e){return Ke(t.node,e)&&e.neighborhood().some(function(r){return r.isNode()&&Ke(t.neighbor,r)})};et[le.DIRECTED_EDGE]=function(t,e){return Ke(t.source,e.source())&&Ke(t.target,e.target())};et[le.NODE_SOURCE]=function(t,e){return Ke(t.source,e)&&e.outgoers().some(function(r){return r.isNode()&&Ke(t.target,r)})};et[le.NODE_TARGET]=function(t,e){return Ke(t.target,e)&&e.incomers().some(function(r){return r.isNode()&&Ke(t.source,r)})};et[le.CHILD]=function(t,e){return Ke(t.child,e)&&Ke(t.parent,e.parent())};et[le.PARENT]=function(t,e){return Ke(t.parent,e)&&e.children().some(function(r){return Ke(t.child,r)})};et[le.DESCENDANT]=function(t,e){return Ke(t.descendant,e)&&e.ancestors().some(function(r){return Ke(t.ancestor,r)})};et[le.ANCESTOR]=function(t,e){return Ke(t.ancestor,e)&&e.descendants().some(function(r){return Ke(t.descendant,r)})};et[le.COMPOUND_SPLIT]=function(t,e){return Ke(t.subject,e)&&Ke(t.left,e)&&Ke(t.right,e)};et[le.TRUE]=function(){return!0};et[le.COLLECTION]=function(t,e){var r=t.value;return r.has(e)};et[le.FILTER]=function(t,e){var r=t.value;return r(e)};var cM=function(e){var r=this;if(r.length===1&&r[0].checks.length===1&&r[0].checks[0].type===le.ID)return e.getElementById(r[0].checks[0].value).collection();var n=function(i){for(var s=0;s<r.length;s++){var o=r[s];if(Ke(o,i))return!0}return!1};return r.text()==null&&(n=function(){return!0}),e.filter(n)},hM=function(e){for(var r=this,n=0;n<r.length;n++){var a=r[n];if(Ke(a,e))return!0}return!1},dM={matches:hM,filter:cM},Xr=function(e){this.inputText=e,this.currentSubject=null,this.compoundCount=0,this.edgeCount=0,this.length=0,e==null||we(e)&&e.match(/^\s*$/)||(Ft(e)?this.addQuery({checks:[{type:le.COLLECTION,value:e.collection()}]}):Qe(e)?this.addQuery({checks:[{type:le.FILTER,value:e}]}):we(e)?this.parse(e)||(this.invalid=!0):je("A selector must be created from a string; found "))},Kr=Xr.prototype;[oM,dM].forEach(function(t){return xe(Kr,t)});Kr.text=function(){return this.inputText};Kr.size=function(){return this.length};Kr.eq=function(t){return this[t]};Kr.sameText=function(t){return!this.invalid&&!t.invalid&&this.text()===t.text()};Kr.addQuery=function(t){this[this.length++]=t};Kr.selector=Kr.toString;var Gr={allAre:function(e){var r=new Xr(e);return this.every(function(n){return r.matches(n)})},is:function(e){var r=new Xr(e);return this.some(function(n){return r.matches(n)})},some:function(e,r){for(var n=0;n<this.length;n++){var a=r?e.apply(r,[this[n],n,this]):e(this[n],n,this);if(a)return!0}return!1},every:function(e,r){for(var n=0;n<this.length;n++){var a=r?e.apply(r,[this[n],n,this]):e(this[n],n,this);if(!a)return!1}return!0},same:function(e){if(this===e)return!0;e=this.cy().collection(e);var r=this.length,n=e.length;return r!==n?!1:r===1?this[0]===e[0]:this.every(function(a){return e.hasElementWithId(a.id())})},anySame:function(e){return e=this.cy().collection(e),this.some(function(r){return e.hasElementWithId(r.id())})},allAreNeighbors:function(e){e=this.cy().collection(e);var r=this.neighborhood();return e.every(function(n){return r.hasElementWithId(n.id())})},contains:function(e){e=this.cy().collection(e);var r=this;return e.every(function(n){return r.hasElementWithId(n.id())})}};Gr.allAreNeighbours=Gr.allAreNeighbors;Gr.has=Gr.contains;Gr.equal=Gr.equals=Gr.same;var $t=function(e,r){return function(a,i,s,o){var u=a,l=this,f;if(u==null?f="":Ft(u)&&u.length===1&&(f=u.id()),l.length===1&&f){var c=l[0]._private,h=c.traversalCache=c.traversalCache||{},d=h[r]=h[r]||[],v=En(f),g=d[v];return g||(d[v]=e.call(l,a,i,s,o))}else return e.call(l,a,i,s,o)}},ta={parent:function(e){var r=[];if(this.length===1){var n=this[0]._private.parent;if(n)return n}for(var a=0;a<this.length;a++){var i=this[a],s=i._private.parent;s&&r.push(s)}return this.spawn(r,!0).filter(e)},parents:function(e){for(var r=[],n=this.parent();n.nonempty();){for(var a=0;a<n.length;a++){var i=n[a];r.push(i)}n=n.parent()}return this.spawn(r,!0).filter(e)},commonAncestors:function(e){for(var r,n=0;n<this.length;n++){var a=this[n],i=a.parents();r=r||i,r=r.intersect(i)}return r.filter(e)},orphans:function(e){return this.stdFilter(function(r){return r.isOrphan()}).filter(e)},nonorphans:function(e){return this.stdFilter(function(r){return r.isChild()}).filter(e)},children:$t(function(t){for(var e=[],r=0;r<this.length;r++)for(var n=this[r],a=n._private.children,i=0;i<a.length;i++)e.push(a[i]);return this.spawn(e,!0).filter(t)},"children"),siblings:function(e){return this.parent().children().not(this).filter(e)},isParent:function(){var e=this[0];if(e)return e.isNode()&&e._private.children.length!==0},isChildless:function(){var e=this[0];if(e)return e.isNode()&&e._private.children.length===0},isChild:function(){var e=this[0];if(e)return e.isNode()&&e._private.parent!=null},isOrphan:function(){var e=this[0];if(e)return e.isNode()&&e._private.parent==null},descendants:function(e){var r=[];function n(a){for(var i=0;i<a.length;i++){var s=a[i];r.push(s),s.children().nonempty()&&n(s.children())}}return n(this.children()),this.spawn(r,!0).filter(e)}};function Bv(t,e,r,n){for(var a=[],i=new ra,s=t.cy(),o=s.hasCompoundNodes(),u=0;u<t.length;u++){var l=t[u];r?a.push(l):o&&n(a,i,l)}for(;a.length>0;){var f=a.shift();e(f),i.add(f.id()),o&&n(a,i,f)}return t}function Vx(t,e,r){if(r.isParent())for(var n=r._private.children,a=0;a<n.length;a++){var i=n[a];e.has(i.id())||t.push(i)}}ta.forEachDown=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return Bv(this,t,e,Vx)};function Ux(t,e,r){if(r.isChild()){var n=r._private.parent;e.has(n.id())||t.push(n)}}ta.forEachUp=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return Bv(this,t,e,Ux)};function vM(t,e,r){Ux(t,e,r),Vx(t,e,r)}ta.forEachUpAndDown=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return Bv(this,t,e,vM)};ta.ancestors=ta.parents;var Va,Hx;Va=Hx={data:$e.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),removeData:$e.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),scratch:$e.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:$e.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),rscratch:$e.data({field:"rscratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeRscratch:$e.removeData({field:"rscratch",triggerEvent:!1}),id:function(){var e=this[0];if(e)return e._private.data.id}};Va.attr=Va.data;Va.removeAttr=Va.removeData;var gM=Hx,Ss={};function Iu(t){return function(e){var r=this;if(e===void 0&&(e=!0),r.length!==0)if(r.isNode()&&!r.removed()){for(var n=0,a=r[0],i=a._private.edges,s=0;s<i.length;s++){var o=i[s];!e&&o.isLoop()||(n+=t(a,o))}return n}else return}}xe(Ss,{degree:Iu(function(t,e){return e.source().same(e.target())?2:1}),indegree:Iu(function(t,e){return e.target().same(t)?1:0}),outdegree:Iu(function(t,e){return e.source().same(t)?1:0})});function Nn(t,e){return function(r){for(var n,a=this.nodes(),i=0;i<a.length;i++){var s=a[i],o=s[t](r);o!==void 0&&(n===void 0||e(o,n))&&(n=o)}return n}}xe(Ss,{minDegree:Nn("degree",function(t,e){return t<e}),maxDegree:Nn("degree",function(t,e){return t>e}),minIndegree:Nn("indegree",function(t,e){return t<e}),maxIndegree:Nn("indegree",function(t,e){return t>e}),minOutdegree:Nn("outdegree",function(t,e){return t<e}),maxOutdegree:Nn("outdegree",function(t,e){return t>e})});xe(Ss,{totalDegree:function(e){for(var r=0,n=this.nodes(),a=0;a<n.length;a++)r+=n[a].degree(e);return r}});var Kt,Yx,Wx=function(e,r,n){for(var a=0;a<e.length;a++){var i=e[a];if(!i.locked()){var s=i._private.position,o={x:r.x!=null?r.x-s.x:0,y:r.y!=null?r.y-s.y:0};i.isParent()&&!(o.x===0&&o.y===0)&&i.children().shift(o,n),i.dirtyBoundingBoxCache()}}},Ey={field:"position",bindingEvent:"position",allowBinding:!0,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!0,triggerFnName:"emitAndNotify",allowGetting:!0,validKeys:["x","y"],beforeGet:function(e){e.updateCompoundBounds()},beforeSet:function(e,r){Wx(e,r,!1)},onSet:function(e){e.dirtyCompoundBoundsCache()},canSet:function(e){return!e.locked()}};Kt=Yx={position:$e.data(Ey),silentPosition:$e.data(xe({},Ey,{allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!1,beforeSet:function(e,r){Wx(e,r,!0)},onSet:function(e){e.dirtyCompoundBoundsCache()}})),positions:function(e,r){if(qe(e))r?this.silentPosition(e):this.position(e);else if(Qe(e)){var n=e,a=this.cy();a.startBatch();for(var i=0;i<this.length;i++){var s=this[i],o=void 0;(o=n(s,i))&&(r?s.silentPosition(o):s.position(o))}a.endBatch()}return this},silentPositions:function(e){return this.positions(e,!0)},shift:function(e,r,n){var a;if(qe(e)?(a={x:ae(e.x)?e.x:0,y:ae(e.y)?e.y:0},n=r):we(e)&&ae(r)&&(a={x:0,y:0},a[e]=r),a!=null){var i=this.cy();i.startBatch();for(var s=0;s<this.length;s++){var o=this[s];if(!(i.hasCompoundNodes()&&o.isChild()&&o.ancestors().anySame(this))){var u=o.position(),l={x:u.x+a.x,y:u.y+a.y};n?o.silentPosition(l):o.position(l)}}i.endBatch()}return this},silentShift:function(e,r){return qe(e)?this.shift(e,!0):we(e)&&ae(r)&&this.shift(e,r,!0),this},renderedPosition:function(e,r){var n=this[0],a=this.cy(),i=a.zoom(),s=a.pan(),o=qe(e)?e:void 0,u=o!==void 0||r!==void 0&&we(e);if(n&&n.isNode())if(u)for(var l=0;l<this.length;l++){var f=this[l];r!==void 0?f.position(e,(r-s[e])/i):o!==void 0&&f.position(Ex(o,i,s))}else{var c=n.position();return o=bs(c,i,s),e===void 0?o:o[e]}else if(!u)return;return this},relativePosition:function(e,r){var n=this[0],a=this.cy(),i=qe(e)?e:void 0,s=i!==void 0||r!==void 0&&we(e),o=a.hasCompoundNodes();if(n&&n.isNode())if(s)for(var u=0;u<this.length;u++){var l=this[u],f=o?l.parent():null,c=f&&f.length>0,h=c;c&&(f=f[0]);var d=h?f.position():{x:0,y:0};r!==void 0?l.position(e,r+d[e]):i!==void 0&&l.position({x:i.x+d.x,y:i.y+d.y})}else{var v=n.position(),g=o?n.parent():null,p=g&&g.length>0,y=p;p&&(g=g[0]);var m=y?g.position():{x:0,y:0};return i={x:v.x-m.x,y:v.y-m.y},e===void 0?i:i[e]}else if(!s)return;return this}};Kt.modelPosition=Kt.point=Kt.position;Kt.modelPositions=Kt.points=Kt.positions;Kt.renderedPoint=Kt.renderedPosition;Kt.relativePoint=Kt.relativePosition;var pM=Yx,Zn,en;Zn=en={};en.renderedBoundingBox=function(t){var e=this.boundingBox(t),r=this.cy(),n=r.zoom(),a=r.pan(),i=e.x1*n+a.x,s=e.x2*n+a.x,o=e.y1*n+a.y,u=e.y2*n+a.y;return{x1:i,x2:s,y1:o,y2:u,w:s-i,h:u-o}};en.dirtyCompoundBoundsCache=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,e=this.cy();return!e.styleEnabled()||!e.hasCompoundNodes()?this:(this.forEachUp(function(r){if(r.isParent()){var n=r._private;n.compoundBoundsClean=!1,n.bbCache=null,t||r.emitAndNotify("bounds")}}),this)};en.updateCompoundBounds=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,e=this.cy();if(!e.styleEnabled()||!e.hasCompoundNodes())return this;if(!t&&e.batching())return this;function r(s){if(!s.isParent())return;var o=s._private,u=s.children(),l=s.pstyle("compound-sizing-wrt-labels").value==="include",f={width:{val:s.pstyle("min-width").pfValue,left:s.pstyle("min-width-bias-left"),right:s.pstyle("min-width-bias-right")},height:{val:s.pstyle("min-height").pfValue,top:s.pstyle("min-height-bias-top"),bottom:s.pstyle("min-height-bias-bottom")}},c=u.boundingBox({includeLabels:l,includeOverlays:!1,useCache:!1}),h=o.position;(c.w===0||c.h===0)&&(c={w:s.pstyle("width").pfValue,h:s.pstyle("height").pfValue},c.x1=h.x-c.w/2,c.x2=h.x+c.w/2,c.y1=h.y-c.h/2,c.y2=h.y+c.h/2);function d(C,S,A){var R=0,D=0,_=S+A;return C>0&&_>0&&(R=S/_*C,D=A/_*C),{biasDiff:R,biasComplementDiff:D}}function v(C,S,A,R){if(A.units==="%")switch(R){case"width":return C>0?A.pfValue*C:0;case"height":return S>0?A.pfValue*S:0;case"average":return C>0&&S>0?A.pfValue*(C+S)/2:0;case"min":return C>0&&S>0?C>S?A.pfValue*S:A.pfValue*C:0;case"max":return C>0&&S>0?C>S?A.pfValue*C:A.pfValue*S:0;default:return 0}else return A.units==="px"?A.pfValue:0}var g=f.width.left.value;f.width.left.units==="px"&&f.width.val>0&&(g=g*100/f.width.val);var p=f.width.right.value;f.width.right.units==="px"&&f.width.val>0&&(p=p*100/f.width.val);var y=f.height.top.value;f.height.top.units==="px"&&f.height.val>0&&(y=y*100/f.height.val);var m=f.height.bottom.value;f.height.bottom.units==="px"&&f.height.val>0&&(m=m*100/f.height.val);var b=d(f.width.val-c.w,g,p),E=b.biasDiff,T=b.biasComplementDiff,I=d(f.height.val-c.h,y,m),w=I.biasDiff,x=I.biasComplementDiff;o.autoPadding=v(c.w,c.h,s.pstyle("padding"),s.pstyle("padding-relative-to").value),o.autoWidth=Math.max(c.w,f.width.val),h.x=(-E+c.x1+c.x2+T)/2,o.autoHeight=Math.max(c.h,f.height.val),h.y=(-w+c.y1+c.y2+x)/2}for(var n=0;n<this.length;n++){var a=this[n],i=a._private;(!i.compoundBoundsClean||t)&&(r(a),e.batching()||(i.compoundBoundsClean=!0))}return this};var zt=function(e){return e===1/0||e===-1/0?0:e},Xt=function(e,r,n,a,i){a-r===0||i-n===0||r==null||n==null||a==null||i==null||(e.x1=r<e.x1?r:e.x1,e.x2=a>e.x2?a:e.x2,e.y1=n<e.y1?n:e.y1,e.y2=i>e.y2?i:e.y2,e.w=e.x2-e.x1,e.h=e.y2-e.y1)},_r=function(e,r){return r==null?e:Xt(e,r.x1,r.y1,r.x2,r.y2)},ya=function(e,r,n){return Mt(e,r,n)},wi=function(e,r,n){if(!r.cy().headless()){var a=r._private,i=a.rstyle,s=i.arrowWidth/2,o=r.pstyle(n+"-arrow-shape").value,u,l;if(o!=="none"){n==="source"?(u=i.srcX,l=i.srcY):n==="target"?(u=i.tgtX,l=i.tgtY):(u=i.midX,l=i.midY);var f=a.arrowBounds=a.arrowBounds||{},c=f[n]=f[n]||{};c.x1=u-s,c.y1=l-s,c.x2=u+s,c.y2=l+s,c.w=c.x2-c.x1,c.h=c.y2-c.y1,_i(c,1),Xt(e,c.x1,c.y1,c.x2,c.y2)}}},Ru=function(e,r,n){if(!r.cy().headless()){var a;n?a=n+"-":a="";var i=r._private,s=i.rstyle,o=r.pstyle(a+"label").strValue;if(o){var u=r.pstyle("text-halign"),l=r.pstyle("text-valign"),f=ya(s,"labelWidth",n),c=ya(s,"labelHeight",n),h=ya(s,"labelX",n),d=ya(s,"labelY",n),v=r.pstyle(a+"text-margin-x").pfValue,g=r.pstyle(a+"text-margin-y").pfValue,p=r.isEdge(),y=r.pstyle(a+"text-rotation"),m=r.pstyle("text-outline-width").pfValue,b=r.pstyle("text-border-width").pfValue,E=b/2,T=r.pstyle("text-background-padding").pfValue,I=2,w=c,x=f,C=x/2,S=w/2,A,R,D,_;if(p)A=h-C,R=h+C,D=d-S,_=d+S;else{switch(u.value){case"left":A=h-x,R=h;break;case"center":A=h-C,R=h+C;break;case"right":A=h,R=h+x;break}switch(l.value){case"top":D=d-w,_=d;break;case"center":D=d-S,_=d+S;break;case"bottom":D=d,_=d+w;break}}var M=v-Math.max(m,E)-T-I,k=v+Math.max(m,E)+T+I,O=g-Math.max(m,E)-T-I,P=g+Math.max(m,E)+T+I;A+=M,R+=k,D+=O,_+=P;var B=n||"main",F=i.labelBounds,N=F[B]=F[B]||{};N.x1=A,N.y1=D,N.x2=R,N.y2=_,N.w=R-A,N.h=_-D,N.leftPad=M,N.rightPad=k,N.topPad=O,N.botPad=P;var q=p&&y.strValue==="autorotate",V=y.pfValue!=null&&y.pfValue!==0;if(q||V){var Y=q?ya(i.rstyle,"labelAngle",n):y.pfValue,H=Math.cos(Y),Z=Math.sin(Y),ee=(A+R)/2,ie=(D+_)/2;if(!p){switch(u.value){case"left":ee=R;break;case"right":ee=A;break}switch(l.value){case"top":ie=_;break;case"bottom":ie=D;break}}var J=function(se,be){return se=se-ee,be=be-ie,{x:se*H-be*Z+ee,y:se*Z+be*H+ie}},G=J(A,D),$=J(A,_),U=J(R,D),j=J(R,_);A=Math.min(G.x,$.x,U.x,j.x),R=Math.max(G.x,$.x,U.x,j.x),D=Math.min(G.y,$.y,U.y,j.y),_=Math.max(G.y,$.y,U.y,j.y)}var ne=B+"Rot",re=F[ne]=F[ne]||{};re.x1=A,re.y1=D,re.x2=R,re.y2=_,re.w=R-A,re.h=_-D,Xt(e,A,D,R,_),Xt(i.labelBounds.all,A,D,R,_)}return e}},xy=function(e,r){if(!r.cy().headless()){var n=r.pstyle("outline-opacity").value,a=r.pstyle("outline-width").value,i=r.pstyle("outline-offset").value,s=a+i;Xx(e,r,n,s,"outside",s/2)}},Xx=function(e,r,n,a,i,s){if(!(n===0||a<=0||i==="inside")){var o=r.cy(),u=r.pstyle("shape").value,l=o.renderer().nodeShapes[u],f=r.position(),c=f.x,h=f.y,d=r.width(),v=r.height();if(l.hasMiterBounds){i==="center"&&(a/=2);var g=l.miterBounds(c,h,d,v,a);_r(e,g)}else s!=null&&s>0&&Li(e,[s,s,s,s])}},yM=function(e,r){if(!r.cy().headless()){var n=r.pstyle("border-opacity").value,a=r.pstyle("border-width").pfValue,i=r.pstyle("border-position").value;Xx(e,r,n,a,i)}},mM=function(e,r){var n=e._private.cy,a=n.styleEnabled(),i=n.headless(),s=Rt(),o=e._private,u=e.isNode(),l=e.isEdge(),f,c,h,d,v,g,p=o.rstyle,y=u&&a?e.pstyle("bounds-expansion").pfValue:[0],m=function(Ie){return Ie.pstyle("display").value!=="none"},b=!a||m(e)&&(!l||m(e.source())&&m(e.target()));if(b){var E=0,T=0;a&&r.includeOverlays&&(E=e.pstyle("overlay-opacity").value,E!==0&&(T=e.pstyle("overlay-padding").value));var I=0,w=0;a&&r.includeUnderlays&&(I=e.pstyle("underlay-opacity").value,I!==0&&(w=e.pstyle("underlay-padding").value));var x=Math.max(T,w),C=0,S=0;if(a&&(C=e.pstyle("width").pfValue,S=C/2),u&&r.includeNodes){var A=e.position();v=A.x,g=A.y;var R=e.outerWidth(),D=R/2,_=e.outerHeight(),M=_/2;f=v-D,c=v+D,h=g-M,d=g+M,Xt(s,f,h,c,d),a&&xy(s,e),a&&r.includeOutlines&&!i&&xy(s,e),a&&yM(s,e)}else if(l&&r.includeEdges)if(a&&!i){var k=e.pstyle("curve-style").strValue;if(f=Math.min(p.srcX,p.midX,p.tgtX),c=Math.max(p.srcX,p.midX,p.tgtX),h=Math.min(p.srcY,p.midY,p.tgtY),d=Math.max(p.srcY,p.midY,p.tgtY),f-=S,c+=S,h-=S,d+=S,Xt(s,f,h,c,d),k==="haystack"){var O=p.haystackPts;if(O&&O.length===2){if(f=O[0].x,h=O[0].y,c=O[1].x,d=O[1].y,f>c){var P=f;f=c,c=P}if(h>d){var B=h;h=d,d=B}Xt(s,f-S,h-S,c+S,d+S)}}else if(k==="bezier"||k==="unbundled-bezier"||Or(k,"segments")||Or(k,"taxi")){var F;switch(k){case"bezier":case"unbundled-bezier":F=p.bezierPts;break;case"segments":case"taxi":case"round-segments":case"round-taxi":F=p.linePts;break}if(F!=null)for(var N=0;N<F.length;N++){var q=F[N];f=q.x-S,c=q.x+S,h=q.y-S,d=q.y+S,Xt(s,f,h,c,d)}}}else{var V=e.source(),Y=V.position(),H=e.target(),Z=H.position();if(f=Y.x,c=Z.x,h=Y.y,d=Z.y,f>c){var ee=f;f=c,c=ee}if(h>d){var ie=h;h=d,d=ie}f-=S,c+=S,h-=S,d+=S,Xt(s,f,h,c,d)}if(a&&r.includeEdges&&l&&(wi(s,e,"mid-source"),wi(s,e,"mid-target"),wi(s,e,"source"),wi(s,e,"target")),a){var J=e.pstyle("ghost").value==="yes";if(J){var G=e.pstyle("ghost-offset-x").pfValue,$=e.pstyle("ghost-offset-y").pfValue;Xt(s,s.x1+G,s.y1+$,s.x2+G,s.y2+$)}}var U=o.bodyBounds=o.bodyBounds||{};op(U,s),Li(U,y),_i(U,1),a&&(f=s.x1,c=s.x2,h=s.y1,d=s.y2,Xt(s,f-x,h-x,c+x,d+x));var j=o.overlayBounds=o.overlayBounds||{};op(j,s),Li(j,y),_i(j,1);var ne=o.labelBounds=o.labelBounds||{};ne.all!=null?JD(ne.all):ne.all=Rt(),a&&r.includeLabels&&(r.includeMainLabels&&Ru(s,e,null),l&&(r.includeSourceLabels&&Ru(s,e,"source"),r.includeTargetLabels&&Ru(s,e,"target")))}return s.x1=zt(s.x1),s.y1=zt(s.y1),s.x2=zt(s.x2),s.y2=zt(s.y2),s.w=zt(s.x2-s.x1),s.h=zt(s.y2-s.y1),s.w>0&&s.h>0&&b&&(Li(s,y),_i(s,1)),s},Kx=function(e){var r=0,n=function(s){return(s?1:0)<<r++},a=0;return a+=n(e.incudeNodes),a+=n(e.includeEdges),a+=n(e.includeLabels),a+=n(e.includeMainLabels),a+=n(e.includeSourceLabels),a+=n(e.includeTargetLabels),a+=n(e.includeOverlays),a+=n(e.includeOutlines),a},jx=function(e){var r=function(o){return Math.round(o)};if(e.isEdge()){var n=e.source().position(),a=e.target().position();return tp([r(n.x),r(n.y),r(a.x),r(a.y)])}else{var i=e.position();return tp([r(i.x),r(i.y)])}},Ty=function(e,r){var n=e._private,a,i=e.isEdge(),s=r==null?Cy:Kx(r),o=s===Cy;if(n.bbCache==null?(a=mM(e,Ua),n.bbCache=a,n.bbCachePosKey=jx(e)):a=n.bbCache,!o){var u=e.isNode();a=Rt(),(r.includeNodes&&u||r.includeEdges&&!u)&&(r.includeOverlays?_r(a,n.overlayBounds):_r(a,n.bodyBounds)),r.includeLabels&&(r.includeMainLabels&&(!i||r.includeSourceLabels&&r.includeTargetLabels)?_r(a,n.labelBounds.all):(r.includeMainLabels&&_r(a,n.labelBounds.mainRot),r.includeSourceLabels&&_r(a,n.labelBounds.sourceRot),r.includeTargetLabels&&_r(a,n.labelBounds.targetRot))),a.w=a.x2-a.x1,a.h=a.y2-a.y1}return a},Ua={includeNodes:!0,includeEdges:!0,includeLabels:!0,includeMainLabels:!0,includeSourceLabels:!0,includeTargetLabels:!0,includeOverlays:!0,includeUnderlays:!0,includeOutlines:!0,useCache:!0},Cy=Kx(Ua),Sy=bt(Ua);en.boundingBox=function(t){var e,r=t===void 0||t.useCache===void 0||t.useCache===!0,n=Jn(function(f){var c=f._private;return c.bbCache==null||c.styleDirty||c.bbCachePosKey!==jx(f)},function(f){return f.id()});if(r&&this.length===1&&!n(this[0]))t===void 0?t=Ua:t=Sy(t),e=Ty(this[0],t);else{e=Rt(),t=t||Ua;var a=Sy(t),i=this,s=i.cy(),o=s.styleEnabled();this.edges().forEach(n),this.nodes().forEach(n),o&&this.recalculateRenderedStyle(r),this.updateCompoundBounds(!r);for(var u=0;u<i.length;u++){var l=i[u];n(l)&&l.dirtyBoundingBoxCache(),_r(e,Ty(l,a))}}return e.x1=zt(e.x1),e.y1=zt(e.y1),e.x2=zt(e.x2),e.y2=zt(e.y2),e.w=zt(e.x2-e.x1),e.h=zt(e.y2-e.y1),e};en.dirtyBoundingBoxCache=function(){for(var t=0;t<this.length;t++){var e=this[t]._private;e.bbCache=null,e.bbCachePosKey=null,e.bodyBounds=null,e.overlayBounds=null,e.labelBounds.all=null,e.labelBounds.source=null,e.labelBounds.target=null,e.labelBounds.main=null,e.labelBounds.sourceRot=null,e.labelBounds.targetRot=null,e.labelBounds.mainRot=null,e.arrowBounds.source=null,e.arrowBounds.target=null,e.arrowBounds["mid-source"]=null,e.arrowBounds["mid-target"]=null}return this.emitAndNotify("bounds"),this};en.boundingBoxAt=function(t){var e=this.nodes(),r=this.cy(),n=r.hasCompoundNodes(),a=r.collection();if(n&&(a=e.filter(function(l){return l.isParent()}),e=e.not(a)),qe(t)){var i=t;t=function(){return i}}var s=function(f,c){return f._private.bbAtOldPos=t(f,c)},o=function(f){return f._private.bbAtOldPos};r.startBatch(),e.forEach(s).silentPositions(t),n&&(a.dirtyCompoundBoundsCache(),a.dirtyBoundingBoxCache(),a.updateCompoundBounds(!0));var u=QD(this.boundingBox({useCache:!1}));return e.silentPositions(o),n&&(a.dirtyCompoundBoundsCache(),a.dirtyBoundingBoxCache(),a.updateCompoundBounds(!0)),r.endBatch(),u};Zn.boundingbox=Zn.bb=Zn.boundingBox;Zn.renderedBoundingbox=Zn.renderedBoundingBox;var bM=en,Ca,ri;Ca=ri={};var Zx=function(e){e.uppercaseName=Gg(e.name),e.autoName="auto"+e.uppercaseName,e.labelName="label"+e.uppercaseName,e.outerName="outer"+e.uppercaseName,e.uppercaseOuterName=Gg(e.outerName),Ca[e.name]=function(){var n=this[0],a=n._private,i=a.cy,s=i._private.styleEnabled;if(n)if(s){if(n.isParent())return n.updateCompoundBounds(),a[e.autoName]||0;var o=n.pstyle(e.name);switch(o.strValue){case"label":return n.recalculateRenderedStyle(),a.rstyle[e.labelName]||0;default:return o.pfValue}}else return 1},Ca["outer"+e.uppercaseName]=function(){var n=this[0],a=n._private,i=a.cy,s=i._private.styleEnabled;if(n)if(s){var o=n[e.name](),u=n.pstyle("border-position").value,l;u==="center"?l=n.pstyle("border-width").pfValue:u==="outside"?l=2*n.pstyle("border-width").pfValue:l=0;var f=2*n.padding();return o+l+f}else return 1},Ca["rendered"+e.uppercaseName]=function(){var n=this[0];if(n){var a=n[e.name]();return a*this.cy().zoom()}},Ca["rendered"+e.uppercaseOuterName]=function(){var n=this[0];if(n){var a=n[e.outerName]();return a*this.cy().zoom()}}};Zx({name:"width"});Zx({name:"height"});ri.padding=function(){var t=this[0],e=t._private;return t.isParent()?(t.updateCompoundBounds(),e.autoPadding!==void 0?e.autoPadding:t.pstyle("padding").pfValue):t.pstyle("padding").pfValue};ri.paddedHeight=function(){var t=this[0];return t.height()+2*t.padding()};ri.paddedWidth=function(){var t=this[0];return t.width()+2*t.padding()};var wM=ri,EM=function(e,r){if(e.isEdge()&&e.takesUpSpace())return r(e)},xM=function(e,r){if(e.isEdge()&&e.takesUpSpace()){var n=e.cy();return bs(r(e),n.zoom(),n.pan())}},TM=function(e,r){if(e.isEdge()&&e.takesUpSpace()){var n=e.cy(),a=n.pan(),i=n.zoom();return r(e).map(function(s){return bs(s,i,a)})}},CM=function(e){return e.renderer().getControlPoints(e)},SM=function(e){return e.renderer().getSegmentPoints(e)},AM=function(e){return e.renderer().getSourceEndpoint(e)},IM=function(e){return e.renderer().getTargetEndpoint(e)},RM=function(e){return e.renderer().getEdgeMidpoint(e)},Ay={controlPoints:{get:CM,mult:!0},segmentPoints:{get:SM,mult:!0},sourceEndpoint:{get:AM},targetEndpoint:{get:IM},midpoint:{get:RM}},DM=function(e){return"rendered"+e[0].toUpperCase()+e.substr(1)},_M=Object.keys(Ay).reduce(function(t,e){var r=Ay[e],n=DM(e);return t[e]=function(){return EM(this,r.get)},r.mult?t[n]=function(){return TM(this,r.get)}:t[n]=function(){return xM(this,r.get)},t},{}),LM=xe({},pM,bM,wM,_M);/*!
Event object based on jQuery events, MIT license

https://jquery.org/license/
https://tldrlegal.com/license/mit-license
https://github.com/jquery/jquery/blob/master/src/event.js
*/var Qx=function(e,r){this.recycle(e,r)};function ma(){return!1}function Ei(){return!0}Qx.prototype={instanceString:function(){return"event"},recycle:function(e,r){if(this.isImmediatePropagationStopped=this.isPropagationStopped=this.isDefaultPrevented=ma,e!=null&&e.preventDefault?(this.type=e.type,this.isDefaultPrevented=e.defaultPrevented?Ei:ma):e!=null&&e.type?r=e:this.type=e,r!=null&&(this.originalEvent=r.originalEvent,this.type=r.type!=null?r.type:this.type,this.cy=r.cy,this.target=r.target,this.position=r.position,this.renderedPosition=r.renderedPosition,this.namespace=r.namespace,this.layout=r.layout),this.cy!=null&&this.position!=null&&this.renderedPosition==null){var n=this.position,a=this.cy.zoom(),i=this.cy.pan();this.renderedPosition={x:n.x*a+i.x,y:n.y*a+i.y}}this.timeStamp=e&&e.timeStamp||Date.now()},preventDefault:function(){this.isDefaultPrevented=Ei;var e=this.originalEvent;e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){this.isPropagationStopped=Ei;var e=this.originalEvent;e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=Ei,this.stopPropagation()},isDefaultPrevented:ma,isPropagationStopped:ma,isImmediatePropagationStopped:ma};var Jx=/^([^.]+)(\.(?:[^.]+))?$/,MM=".*",eT={qualifierCompare:function(e,r){return e===r},eventMatches:function(){return!0},addEventFields:function(){},callbackContext:function(e){return e},beforeEmit:function(){},afterEmit:function(){},bubble:function(){return!1},parent:function(){return null},context:null},Iy=Object.keys(eT),OM={};function As(){for(var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:OM,e=arguments.length>1?arguments[1]:void 0,r=0;r<Iy.length;r++){var n=Iy[r];this[n]=t[n]||eT[n]}this.context=e||this.context,this.listeners=[],this.emitting=0}var jr=As.prototype,tT=function(e,r,n,a,i,s,o){Qe(a)&&(i=a,a=null),o&&(s==null?s=o:s=xe({},s,o));for(var u=He(n)?n:n.split(/\s+/),l=0;l<u.length;l++){var f=u[l];if(!Hr(f)){var c=f.match(Jx);if(c){var h=c[1],d=c[2]?c[2]:null,v=r(e,f,h,d,a,i,s);if(v===!1)break}}}},Ry=function(e,r){return e.addEventFields(e.context,r),new Qx(r.type,r)},PM=function(e,r,n){if(GR(n)){r(e,n);return}else if(qe(n)){r(e,Ry(e,n));return}for(var a=He(n)?n:n.split(/\s+/),i=0;i<a.length;i++){var s=a[i];if(!Hr(s)){var o=s.match(Jx);if(o){var u=o[1],l=o[2]?o[2]:null,f=Ry(e,{type:u,namespace:l,target:e.context});r(e,f)}}}};jr.on=jr.addListener=function(t,e,r,n,a){return tT(this,function(i,s,o,u,l,f,c){Qe(f)&&i.listeners.push({event:s,callback:f,type:o,namespace:u,qualifier:l,conf:c})},t,e,r,n,a),this};jr.one=function(t,e,r,n){return this.on(t,e,r,n,{one:!0})};jr.removeListener=jr.off=function(t,e,r,n){var a=this;this.emitting!==0&&(this.listeners=xD(this.listeners));for(var i=this.listeners,s=function(l){var f=i[l];tT(a,function(c,h,d,v,g,p){if((f.type===d||t==="*")&&(!v&&f.namespace!==".*"||f.namespace===v)&&(!g||c.qualifierCompare(f.qualifier,g))&&(!p||f.callback===p))return i.splice(l,1),!1},t,e,r,n)},o=i.length-1;o>=0;o--)s(o);return this};jr.removeAllListeners=function(){return this.removeListener("*")};jr.emit=jr.trigger=function(t,e,r){var n=this.listeners,a=n.length;return this.emitting++,He(e)||(e=[e]),PM(this,function(i,s){r!=null&&(n=[{event:s.event,type:s.type,namespace:s.namespace,callback:r}],a=n.length);for(var o=function(){var f=n[u];if(f.type===s.type&&(!f.namespace||f.namespace===s.namespace||f.namespace===MM)&&i.eventMatches(i.context,f,s)){var c=[s];e!=null&&CD(c,e),i.beforeEmit(i.context,f,s),f.conf&&f.conf.one&&(i.listeners=i.listeners.filter(function(v){return v!==f}));var h=i.callbackContext(i.context,f,s),d=f.callback.apply(h,c);i.afterEmit(i.context,f,s),d===!1&&(s.stopPropagation(),s.preventDefault())}},u=0;u<a;u++)o();i.bubble(i.context)&&!s.isPropagationStopped()&&i.parent(i.context).emit(s,e)},t),this.emitting--,this};var kM={qualifierCompare:function(e,r){return e==null||r==null?e==null&&r==null:e.sameText(r)},eventMatches:function(e,r,n){var a=r.qualifier;return a!=null?e!==n.target&&ja(n.target)&&a.matches(n.target):!0},addEventFields:function(e,r){r.cy=e.cy(),r.target=e},callbackContext:function(e,r,n){return r.qualifier!=null?n.target:e},beforeEmit:function(e,r){r.conf&&r.conf.once&&r.conf.onceCollection.removeListener(r.event,r.qualifier,r.callback)},bubble:function(){return!0},parent:function(e){return e.isChild()?e.parent():e.cy()}},xi=function(e){return we(e)?new Xr(e):e},rT={createEmitter:function(){for(var e=0;e<this.length;e++){var r=this[e],n=r._private;n.emitter||(n.emitter=new As(kM,r))}return this},emitter:function(){return this._private.emitter},on:function(e,r,n){for(var a=xi(r),i=0;i<this.length;i++){var s=this[i];s.emitter().on(e,a,n)}return this},removeListener:function(e,r,n){for(var a=xi(r),i=0;i<this.length;i++){var s=this[i];s.emitter().removeListener(e,a,n)}return this},removeAllListeners:function(){for(var e=0;e<this.length;e++){var r=this[e];r.emitter().removeAllListeners()}return this},one:function(e,r,n){for(var a=xi(r),i=0;i<this.length;i++){var s=this[i];s.emitter().one(e,a,n)}return this},once:function(e,r,n){for(var a=xi(r),i=0;i<this.length;i++){var s=this[i];s.emitter().on(e,a,n,{once:!0,onceCollection:this})}},emit:function(e,r){for(var n=0;n<this.length;n++){var a=this[n];a.emitter().emit(e,r)}return this},emitAndNotify:function(e,r){if(this.length!==0)return this.cy().notify(e,this),this.emit(e,r),this}};$e.eventAliasesOn(rT);var nT={nodes:function(e){return this.filter(function(r){return r.isNode()}).filter(e)},edges:function(e){return this.filter(function(r){return r.isEdge()}).filter(e)},byGroup:function(){for(var e=this.spawn(),r=this.spawn(),n=0;n<this.length;n++){var a=this[n];a.isNode()?e.push(a):r.push(a)}return{nodes:e,edges:r}},filter:function(e,r){if(e===void 0)return this;if(we(e)||Ft(e))return new Xr(e).filter(this);if(Qe(e)){for(var n=this.spawn(),a=this,i=0;i<a.length;i++){var s=a[i],o=r?e.apply(r,[s,i,a]):e(s,i,a);o&&n.push(s)}return n}return this.spawn()},not:function(e){if(e){we(e)&&(e=this.filter(e));for(var r=this.spawn(),n=0;n<this.length;n++){var a=this[n],i=e.has(a);i||r.push(a)}return r}else return this},absoluteComplement:function(){var e=this.cy();return e.mutableElements().not(this)},intersect:function(e){if(we(e)){var r=e;return this.filter(r)}for(var n=this.spawn(),a=this,i=e,s=this.length<e.length,o=s?a:i,u=s?i:a,l=0;l<o.length;l++){var f=o[l];u.has(f)&&n.push(f)}return n},xor:function(e){var r=this._private.cy;we(e)&&(e=r.$(e));var n=this.spawn(),a=this,i=e,s=function(u,l){for(var f=0;f<u.length;f++){var c=u[f],h=c._private.data.id,d=l.hasElementWithId(h);d||n.push(c)}};return s(a,i),s(i,a),n},diff:function(e){var r=this._private.cy;we(e)&&(e=r.$(e));var n=this.spawn(),a=this.spawn(),i=this.spawn(),s=this,o=e,u=function(f,c,h){for(var d=0;d<f.length;d++){var v=f[d],g=v._private.data.id,p=c.hasElementWithId(g);p?i.merge(v):h.push(v)}};return u(s,o,n),u(o,s,a),{left:n,right:a,both:i}},add:function(e){var r=this._private.cy;if(!e)return this;if(we(e)){var n=e;e=r.mutableElements().filter(n)}for(var a=this.spawnSelf(),i=0;i<e.length;i++){var s=e[i],o=!this.has(s);o&&a.push(s)}return a},merge:function(e){var r=this._private,n=r.cy;if(!e)return this;if(e&&we(e)){var a=e;e=n.mutableElements().filter(a)}for(var i=r.map,s=0;s<e.length;s++){var o=e[s],u=o._private.data.id,l=!i.has(u);if(l){var f=this.length++;this[f]=o,i.set(u,{ele:o,index:f})}}return this},unmergeAt:function(e){var r=this[e],n=r.id(),a=this._private,i=a.map;this[e]=void 0,i.delete(n);var s=e===this.length-1;if(this.length>1&&!s){var o=this.length-1,u=this[o],l=u._private.data.id;this[o]=void 0,this[e]=u,i.set(l,{ele:u,index:e})}return this.length--,this},unmergeOne:function(e){e=e[0];var r=this._private,n=e._private.data.id,a=r.map,i=a.get(n);if(!i)return this;var s=i.index;return this.unmergeAt(s),this},unmerge:function(e){var r=this._private.cy;if(!e)return this;if(e&&we(e)){var n=e;e=r.mutableElements().filter(n)}for(var a=0;a<e.length;a++)this.unmergeOne(e[a]);return this},unmergeBy:function(e){for(var r=this.length-1;r>=0;r--){var n=this[r];e(n)&&this.unmergeAt(r)}return this},map:function(e,r){for(var n=[],a=this,i=0;i<a.length;i++){var s=a[i],o=r?e.apply(r,[s,i,a]):e(s,i,a);n.push(o)}return n},reduce:function(e,r){for(var n=r,a=this,i=0;i<a.length;i++)n=e(n,a[i],i,a);return n},max:function(e,r){for(var n=-1/0,a,i=this,s=0;s<i.length;s++){var o=i[s],u=r?e.apply(r,[o,s,i]):e(o,s,i);u>n&&(n=u,a=o)}return{value:n,ele:a}},min:function(e,r){for(var n=1/0,a,i=this,s=0;s<i.length;s++){var o=i[s],u=r?e.apply(r,[o,s,i]):e(o,s,i);u<n&&(n=u,a=o)}return{value:n,ele:a}}},Ge=nT;Ge.u=Ge["|"]=Ge["+"]=Ge.union=Ge.or=Ge.add;Ge["\\"]=Ge["!"]=Ge["-"]=Ge.difference=Ge.relativeComplement=Ge.subtract=Ge.not;Ge.n=Ge["&"]=Ge["."]=Ge.and=Ge.intersection=Ge.intersect;Ge["^"]=Ge["(+)"]=Ge["(-)"]=Ge.symmetricDifference=Ge.symdiff=Ge.xor;Ge.fnFilter=Ge.filterFn=Ge.stdFilter=Ge.filter;Ge.complement=Ge.abscomp=Ge.absoluteComplement;var NM={isNode:function(){return this.group()==="nodes"},isEdge:function(){return this.group()==="edges"},isLoop:function(){return this.isEdge()&&this.source()[0]===this.target()[0]},isSimple:function(){return this.isEdge()&&this.source()[0]!==this.target()[0]},group:function(){var e=this[0];if(e)return e._private.group}},aT=function(e,r){var n=e.cy(),a=n.hasCompoundNodes();function i(f){var c=f.pstyle("z-compound-depth");return c.value==="auto"?a?f.zDepth():0:c.value==="bottom"?-1:c.value==="top"?Av:0}var s=i(e)-i(r);if(s!==0)return s;function o(f){var c=f.pstyle("z-index-compare");return c.value==="auto"&&f.isNode()?1:0}var u=o(e)-o(r);if(u!==0)return u;var l=e.pstyle("z-index").value-r.pstyle("z-index").value;return l!==0?l:e.poolIndex()-r.poolIndex()},Zi={forEach:function(e,r){if(Qe(e))for(var n=this.length,a=0;a<n;a++){var i=this[a],s=r?e.apply(r,[i,a,this]):e(i,a,this);if(s===!1)break}return this},toArray:function(){for(var e=[],r=0;r<this.length;r++)e.push(this[r]);return e},slice:function(e,r){var n=[],a=this.length;r==null&&(r=a),e==null&&(e=0),e<0&&(e=a+e),r<0&&(r=a+r);for(var i=e;i>=0&&i<r&&i<a;i++)n.push(this[i]);return this.spawn(n)},size:function(){return this.length},eq:function(e){return this[e]||this.spawn()},first:function(){return this[0]||this.spawn()},last:function(){return this[this.length-1]||this.spawn()},empty:function(){return this.length===0},nonempty:function(){return!this.empty()},sort:function(e){if(!Qe(e))return this;var r=this.toArray().sort(e);return this.spawn(r)},sortByZIndex:function(){return this.sort(aT)},zDepth:function(){var e=this[0];if(e){var r=e._private,n=r.group;if(n==="nodes"){var a=r.data.parent?e.parents().size():0;return e.isParent()?a:Av-1}else{var i=r.source,s=r.target,o=i.zDepth(),u=s.zDepth();return Math.max(o,u,0)}}}};Zi.each=Zi.forEach;var BM=function(){var e="undefined",r=(typeof Symbol>"u"?"undefined":ft(Symbol))!=e&&ft(Symbol.iterator)!=e;r&&(Zi[Symbol.iterator]=function(){var n=this,a={value:void 0,done:!1},i=0,s=this.length;return rx({next:function(){return i<s?a.value=n[i++]:(a.value=void 0,a.done=!0),a}},Symbol.iterator,function(){return this})})};BM();var FM=bt({nodeDimensionsIncludeLabels:!1}),Oi={layoutDimensions:function(e){e=FM(e);var r;if(!this.takesUpSpace())r={w:0,h:0};else if(e.nodeDimensionsIncludeLabels){var n=this.boundingBox();r={w:n.w,h:n.h}}else r={w:this.outerWidth(),h:this.outerHeight()};return(r.w===0||r.h===0)&&(r.w=r.h=1),r},layoutPositions:function(e,r,n){var a=this.nodes().filter(function(T){return!T.isParent()}),i=this.cy(),s=r.eles,o=function(I){return I.id()},u=Jn(n,o);e.emit({type:"layoutstart",layout:e}),e.animations=[];var l=function(I,w,x){var C={x:w.x1+w.w/2,y:w.y1+w.h/2},S={x:(x.x-C.x)*I,y:(x.y-C.y)*I};return{x:C.x+S.x,y:C.y+S.y}},f=r.spacingFactor&&r.spacingFactor!==1,c=function(){if(!f)return null;for(var I=Rt(),w=0;w<a.length;w++){var x=a[w],C=u(x,w);xx(I,C.x,C.y)}return I},h=c(),d=Jn(function(T,I){var w=u(T,I);if(f){var x=Math.abs(r.spacingFactor);w=l(x,h,w)}return r.transform!=null&&(w=r.transform(T,w)),w},o);if(r.animate){for(var v=0;v<a.length;v++){var g=a[v],p=d(g,v),y=r.animateFilter==null||r.animateFilter(g,v);if(y){var m=g.animation({position:p,duration:r.animationDuration,easing:r.animationEasing});e.animations.push(m)}else g.position(p)}if(r.fit){var b=i.animation({fit:{boundingBox:s.boundingBoxAt(d),padding:r.padding},duration:r.animationDuration,easing:r.animationEasing});e.animations.push(b)}else if(r.zoom!==void 0&&r.pan!==void 0){var E=i.animation({zoom:r.zoom,pan:r.pan,duration:r.animationDuration,easing:r.animationEasing});e.animations.push(E)}e.animations.forEach(function(T){return T.play()}),e.one("layoutready",r.ready),e.emit({type:"layoutready",layout:e}),na.all(e.animations.map(function(T){return T.promise()})).then(function(){e.one("layoutstop",r.stop),e.emit({type:"layoutstop",layout:e})})}else a.positions(d),r.fit&&i.fit(r.eles,r.padding),r.zoom!=null&&i.zoom(r.zoom),r.pan&&i.pan(r.pan),e.one("layoutready",r.ready),e.emit({type:"layoutready",layout:e}),e.one("layoutstop",r.stop),e.emit({type:"layoutstop",layout:e});return this},layout:function(e){var r=this.cy();return r.makeLayout(xe({},e,{eles:this}))}};Oi.createLayout=Oi.makeLayout=Oi.layout;function iT(t,e,r){var n=r._private,a=n.styleCache=n.styleCache||[],i;return(i=a[t])!=null||(i=a[t]=e(r)),i}function Is(t,e){return t=En(t),function(n){return iT(t,e,n)}}function Rs(t,e){t=En(t);var r=function(a){return e.call(a)};return function(){var a=this[0];if(a)return iT(t,r,a)}}var yt={recalculateRenderedStyle:function(e){var r=this.cy(),n=r.renderer(),a=r.styleEnabled();return n&&a&&n.recalculateRenderedStyle(this,e),this},dirtyStyleCache:function(){var e=this.cy(),r=function(i){return i._private.styleCache=null};if(e.hasCompoundNodes()){var n;n=this.spawnSelf().merge(this.descendants()).merge(this.parents()),n.merge(n.connectedEdges()),n.forEach(r)}else this.forEach(function(a){r(a),a.connectedEdges().forEach(r)});return this},updateStyle:function(e){var r=this._private.cy;if(!r.styleEnabled())return this;if(r.batching()){var n=r._private.batchStyleEles;return n.merge(this),this}var a=r.hasCompoundNodes(),i=this;e=!!(e||e===void 0),a&&(i=this.spawnSelf().merge(this.descendants()).merge(this.parents()));var s=i;return e?s.emitAndNotify("style"):s.emit("style"),i.forEach(function(o){return o._private.styleDirty=!0}),this},cleanStyle:function(){var e=this.cy();if(e.styleEnabled())for(var r=0;r<this.length;r++){var n=this[r];n._private.styleDirty&&(n._private.styleDirty=!1,e.style().apply(n))}},parsedStyle:function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,n=this[0],a=n.cy();if(a.styleEnabled()&&n){n._private.styleDirty&&(n._private.styleDirty=!1,a.style().apply(n));var i=n._private.style[e];return i??(r?a.style().getDefaultProperty(e):null)}},numericStyle:function(e){var r=this[0];if(r.cy().styleEnabled()&&r){var n=r.pstyle(e);return n.pfValue!==void 0?n.pfValue:n.value}},numericStyleUnits:function(e){var r=this[0];if(r.cy().styleEnabled()&&r)return r.pstyle(e).units},renderedStyle:function(e){var r=this.cy();if(!r.styleEnabled())return this;var n=this[0];if(n)return r.style().getRenderedStyle(n,e)},style:function(e,r){var n=this.cy();if(!n.styleEnabled())return this;var a=!1,i=n.style();if(qe(e)){var s=e;i.applyBypass(this,s,a),this.emitAndNotify("style")}else if(we(e))if(r===void 0){var o=this[0];return o?i.getStylePropertyValue(o,e):void 0}else i.applyBypass(this,e,r,a),this.emitAndNotify("style");else if(e===void 0){var u=this[0];return u?i.getRawStyle(u):void 0}return this},removeStyle:function(e){var r=this.cy();if(!r.styleEnabled())return this;var n=!1,a=r.style(),i=this;if(e===void 0)for(var s=0;s<i.length;s++){var o=i[s];a.removeAllBypasses(o,n)}else{e=e.split(/\s+/);for(var u=0;u<i.length;u++){var l=i[u];a.removeBypasses(l,e,n)}}return this.emitAndNotify("style"),this},show:function(){return this.css("display","element"),this},hide:function(){return this.css("display","none"),this},effectiveOpacity:function(){var e=this.cy();if(!e.styleEnabled())return 1;var r=e.hasCompoundNodes(),n=this[0];if(n){var a=n._private,i=n.pstyle("opacity").value;if(!r)return i;var s=a.data.parent?n.parents():null;if(s)for(var o=0;o<s.length;o++){var u=s[o],l=u.pstyle("opacity").value;i=l*i}return i}},transparent:function(){var e=this.cy();if(!e.styleEnabled())return!1;var r=this[0],n=r.cy().hasCompoundNodes();if(r)return n?r.effectiveOpacity()===0:r.pstyle("opacity").value===0},backgrounding:function(){var e=this.cy();if(!e.styleEnabled())return!1;var r=this[0];return!!r._private.backgrounding}};function Du(t,e){var r=t._private,n=r.data.parent?t.parents():null;if(n)for(var a=0;a<n.length;a++){var i=n[a];if(!e(i))return!1}return!0}function Fv(t){var e=t.ok,r=t.edgeOkViaNode||t.ok,n=t.parentOk||t.ok;return function(){var a=this.cy();if(!a.styleEnabled())return!0;var i=this[0],s=a.hasCompoundNodes();if(i){var o=i._private;if(!e(i))return!1;if(i.isNode())return!s||Du(i,n);var u=o.source,l=o.target;return r(u)&&(!s||Du(u,r))&&(u===l||r(l)&&(!s||Du(l,r)))}}}var aa=Is("eleTakesUpSpace",function(t){return t.pstyle("display").value==="element"&&t.width()!==0&&(t.isNode()?t.height()!==0:!0)});yt.takesUpSpace=Rs("takesUpSpace",Fv({ok:aa}));var qM=Is("eleInteractive",function(t){return t.pstyle("events").value==="yes"&&t.pstyle("visibility").value==="visible"&&aa(t)}),GM=Is("parentInteractive",function(t){return t.pstyle("visibility").value==="visible"&&aa(t)});yt.interactive=Rs("interactive",Fv({ok:qM,parentOk:GM,edgeOkViaNode:aa}));yt.noninteractive=function(){var t=this[0];if(t)return!t.interactive()};var zM=Is("eleVisible",function(t){return t.pstyle("visibility").value==="visible"&&t.pstyle("opacity").pfValue!==0&&aa(t)}),$M=aa;yt.visible=Rs("visible",Fv({ok:zM,edgeOkViaNode:$M}));yt.hidden=function(){var t=this[0];if(t)return!t.visible()};yt.isBundledBezier=Rs("isBundledBezier",function(){return this.cy().styleEnabled()?!this.removed()&&this.pstyle("curve-style").value==="bezier"&&this.takesUpSpace():!1});yt.bypass=yt.css=yt.style;yt.renderedCss=yt.renderedStyle;yt.removeBypass=yt.removeCss=yt.removeStyle;yt.pstyle=yt.parsedStyle;var zr={};function Dy(t){return function(){var e=arguments,r=[];if(e.length===2){var n=e[0],a=e[1];this.on(t.event,n,a)}else if(e.length===1&&Qe(e[0])){var i=e[0];this.on(t.event,i)}else if(e.length===0||e.length===1&&He(e[0])){for(var s=e.length===1?e[0]:null,o=0;o<this.length;o++){var u=this[o],l=!t.ableField||u._private[t.ableField],f=u._private[t.field]!=t.value;if(t.overrideAble){var c=t.overrideAble(u);if(c!==void 0&&(l=c,!c))return this}l&&(u._private[t.field]=t.value,f&&r.push(u))}var h=this.spawn(r);h.updateStyle(),h.emit(t.event),s&&h.emit(s)}return this}}function ia(t){zr[t.field]=function(){var e=this[0];if(e){if(t.overrideField){var r=t.overrideField(e);if(r!==void 0)return r}return e._private[t.field]}},zr[t.on]=Dy({event:t.on,field:t.field,ableField:t.ableField,overrideAble:t.overrideAble,value:!0}),zr[t.off]=Dy({event:t.off,field:t.field,ableField:t.ableField,overrideAble:t.overrideAble,value:!1})}ia({field:"locked",overrideField:function(e){return e.cy().autolock()?!0:void 0},on:"lock",off:"unlock"});ia({field:"grabbable",overrideField:function(e){return e.cy().autoungrabify()||e.pannable()?!1:void 0},on:"grabify",off:"ungrabify"});ia({field:"selected",ableField:"selectable",overrideAble:function(e){return e.cy().autounselectify()?!1:void 0},on:"select",off:"unselect"});ia({field:"selectable",overrideField:function(e){return e.cy().autounselectify()?!1:void 0},on:"selectify",off:"unselectify"});zr.deselect=zr.unselect;zr.grabbed=function(){var t=this[0];if(t)return t._private.grabbed};ia({field:"active",on:"activate",off:"unactivate"});ia({field:"pannable",on:"panify",off:"unpanify"});zr.inactive=function(){var t=this[0];if(t)return!t._private.active};var xt={},_y=function(e){return function(n){for(var a=this,i=[],s=0;s<a.length;s++){var o=a[s];if(o.isNode()){for(var u=!1,l=o.connectedEdges(),f=0;f<l.length;f++){var c=l[f],h=c.source(),d=c.target();if(e.noIncomingEdges&&d===o&&h!==o||e.noOutgoingEdges&&h===o&&d!==o){u=!0;break}}u||i.push(o)}}return this.spawn(i,!0).filter(n)}},Ly=function(e){return function(r){for(var n=this,a=[],i=0;i<n.length;i++){var s=n[i];if(s.isNode())for(var o=s.connectedEdges(),u=0;u<o.length;u++){var l=o[u],f=l.source(),c=l.target();e.outgoing&&f===s?(a.push(l),a.push(c)):e.incoming&&c===s&&(a.push(l),a.push(f))}}return this.spawn(a,!0).filter(r)}},My=function(e){return function(r){for(var n=this,a=[],i={};;){var s=e.outgoing?n.outgoers():n.incomers();if(s.length===0)break;for(var o=!1,u=0;u<s.length;u++){var l=s[u],f=l.id();i[f]||(i[f]=!0,a.push(l),o=!0)}if(!o)break;n=s}return this.spawn(a,!0).filter(r)}};xt.clearTraversalCache=function(){for(var t=0;t<this.length;t++)this[t]._private.traversalCache=null};xe(xt,{roots:_y({noIncomingEdges:!0}),leaves:_y({noOutgoingEdges:!0}),outgoers:$t(Ly({outgoing:!0}),"outgoers"),successors:My({outgoing:!0}),incomers:$t(Ly({incoming:!0}),"incomers"),predecessors:My({})});xe(xt,{neighborhood:$t(function(t){for(var e=[],r=this.nodes(),n=0;n<r.length;n++)for(var a=r[n],i=a.connectedEdges(),s=0;s<i.length;s++){var o=i[s],u=o.source(),l=o.target(),f=a===u?l:u;f.length>0&&e.push(f[0]),e.push(o[0])}return this.spawn(e,!0).filter(t)},"neighborhood"),closedNeighborhood:function(e){return this.neighborhood().add(this).filter(e)},openNeighborhood:function(e){return this.neighborhood(e)}});xt.neighbourhood=xt.neighborhood;xt.closedNeighbourhood=xt.closedNeighborhood;xt.openNeighbourhood=xt.openNeighborhood;xe(xt,{source:$t(function(e){var r=this[0],n;return r&&(n=r._private.source||r.cy().collection()),n&&e?n.filter(e):n},"source"),target:$t(function(e){var r=this[0],n;return r&&(n=r._private.target||r.cy().collection()),n&&e?n.filter(e):n},"target"),sources:Oy({attr:"source"}),targets:Oy({attr:"target"})});function Oy(t){return function(r){for(var n=[],a=0;a<this.length;a++){var i=this[a],s=i._private[t.attr];s&&n.push(s)}return this.spawn(n,!0).filter(r)}}xe(xt,{edgesWith:$t(Py(),"edgesWith"),edgesTo:$t(Py({thisIsSrc:!0}),"edgesTo")});function Py(t){return function(r){var n=[],a=this._private.cy,i=t||{};we(r)&&(r=a.$(r));for(var s=0;s<r.length;s++)for(var o=r[s]._private.edges,u=0;u<o.length;u++){var l=o[u],f=l._private.data,c=this.hasElementWithId(f.source)&&r.hasElementWithId(f.target),h=r.hasElementWithId(f.source)&&this.hasElementWithId(f.target),d=c||h;d&&((i.thisIsSrc||i.thisIsTgt)&&(i.thisIsSrc&&!c||i.thisIsTgt&&!h)||n.push(l))}return this.spawn(n,!0)}}xe(xt,{connectedEdges:$t(function(t){for(var e=[],r=this,n=0;n<r.length;n++){var a=r[n];if(a.isNode())for(var i=a._private.edges,s=0;s<i.length;s++){var o=i[s];e.push(o)}}return this.spawn(e,!0).filter(t)},"connectedEdges"),connectedNodes:$t(function(t){for(var e=[],r=this,n=0;n<r.length;n++){var a=r[n];a.isEdge()&&(e.push(a.source()[0]),e.push(a.target()[0]))}return this.spawn(e,!0).filter(t)},"connectedNodes"),parallelEdges:$t(ky(),"parallelEdges"),codirectedEdges:$t(ky({codirected:!0}),"codirectedEdges")});function ky(t){var e={codirected:!1};return t=xe({},e,t),function(n){for(var a=[],i=this.edges(),s=t,o=0;o<i.length;o++)for(var u=i[o],l=u._private,f=l.source,c=f._private.data.id,h=l.data.target,d=f._private.edges,v=0;v<d.length;v++){var g=d[v],p=g._private.data,y=p.target,m=p.source,b=y===h&&m===c,E=c===y&&h===m;(s.codirected&&b||!s.codirected&&(b||E))&&a.push(g)}return this.spawn(a,!0).filter(n)}}xe(xt,{components:function(e){var r=this,n=r.cy(),a=n.collection(),i=e==null?r.nodes():e.nodes(),s=[];e!=null&&i.empty()&&(i=e.sources());var o=function(f,c){a.merge(f),i.unmerge(f),c.merge(f)};if(i.empty())return r.spawn();var u=function(){var f=n.collection();s.push(f);var c=i[0];o(c,f),r.bfs({directed:!1,roots:c,visit:function(d){return o(d,f)}}),f.forEach(function(h){h.connectedEdges().forEach(function(d){r.has(d)&&f.has(d.source())&&f.has(d.target())&&f.merge(d)})})};do u();while(i.length>0);return s},component:function(){var e=this[0];return e.cy().mutableElements().components(e)[0]}});xt.componentsOf=xt.components;var mt=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(e===void 0){je("A collection must have a reference to the core");return}var i=new vr,s=!1;if(!r)r=[];else if(r.length>0&&qe(r[0])&&!ja(r[0])){s=!0;for(var o=[],u=new ra,l=0,f=r.length;l<f;l++){var c=r[l];c.data==null&&(c.data={});var h=c.data;if(h.id==null)h.id=bx();else if(e.hasElementWithId(h.id)||u.has(h.id))continue;var d=new ms(e,c,!1);o.push(d),u.add(h.id)}r=o}this.length=0;for(var v=0,g=r.length;v<g;v++){var p=r[v][0];if(p!=null){var y=p._private.data.id;(!n||!i.has(y))&&(n&&i.set(y,{index:this.length,ele:p}),this[this.length]=p,this.length++)}}this._private={eles:this,cy:e,get map(){return this.lazyMap==null&&this.rebuildMap(),this.lazyMap},set map(m){this.lazyMap=m},rebuildMap:function(){for(var b=this.lazyMap=new vr,E=this.eles,T=0;T<E.length;T++){var I=E[T];b.set(I.id(),{index:T,ele:I})}}},n&&(this._private.map=i),s&&!a&&this.restore()},We=ms.prototype=mt.prototype=Object.create(Array.prototype);We.instanceString=function(){return"collection"};We.spawn=function(t,e){return new mt(this.cy(),t,e)};We.spawnSelf=function(){return this.spawn(this)};We.cy=function(){return this._private.cy};We.renderer=function(){return this._private.cy.renderer()};We.element=function(){return this[0]};We.collection=function(){return ix(this)?this:new mt(this._private.cy,[this])};We.unique=function(){return new mt(this._private.cy,this,!0)};We.hasElementWithId=function(t){return t=""+t,this._private.map.has(t)};We.getElementById=function(t){t=""+t;var e=this._private.cy,r=this._private.map.get(t);return r?r.ele:new mt(e)};We.$id=We.getElementById;We.poolIndex=function(){var t=this._private.cy,e=t._private.elements,r=this[0]._private.data.id;return e._private.map.get(r).index};We.indexOf=function(t){var e=t[0]._private.data.id;return this._private.map.get(e).index};We.indexOfId=function(t){return t=""+t,this._private.map.get(t).index};We.json=function(t){var e=this.element(),r=this.cy();if(e==null&&t)return this;if(e!=null){var n=e._private;if(qe(t)){if(r.startBatch(),t.data){e.data(t.data);var a=n.data;if(e.isEdge()){var i=!1,s={},o=t.data.source,u=t.data.target;o!=null&&o!=a.source&&(s.source=""+o,i=!0),u!=null&&u!=a.target&&(s.target=""+u,i=!0),i&&(e=e.move(s))}else{var l="parent"in t.data,f=t.data.parent;l&&(f!=null||a.parent!=null)&&f!=a.parent&&(f===void 0&&(f=null),f!=null&&(f=""+f),e=e.move({parent:f}))}}t.position&&e.position(t.position);var c=function(g,p,y){var m=t[g];m!=null&&m!==n[g]&&(m?e[p]():e[y]())};return c("removed","remove","restore"),c("selected","select","unselect"),c("selectable","selectify","unselectify"),c("locked","lock","unlock"),c("grabbable","grabify","ungrabify"),c("pannable","panify","unpanify"),t.classes!=null&&e.classes(t.classes),r.endBatch(),this}else if(t===void 0){var h={data:nr(n.data),position:nr(n.position),group:n.group,removed:n.removed,selected:n.selected,selectable:n.selectable,locked:n.locked,grabbable:n.grabbable,pannable:n.pannable,classes:null};h.classes="";var d=0;return n.classes.forEach(function(v){return h.classes+=d++===0?v:" "+v}),h}}};We.jsons=function(){for(var t=[],e=0;e<this.length;e++){var r=this[e],n=r.json();t.push(n)}return t};We.clone=function(){for(var t=this.cy(),e=[],r=0;r<this.length;r++){var n=this[r],a=n.json(),i=new ms(t,a,!1);e.push(i)}return new mt(t,e)};We.copy=We.clone;We.restore=function(){for(var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,r=this,n=r.cy(),a=n._private,i=[],s=[],o,u=0,l=r.length;u<l;u++){var f=r[u];e&&!f.removed()||(f.isNode()?i.push(f):s.push(f))}o=i.concat(s);var c,h=function(){o.splice(c,1),c--};for(c=0;c<o.length;c++){var d=o[c],v=d._private,g=v.data;if(d.clearTraversalCache(),!(!e&&!v.removed)){if(g.id===void 0)g.id=bx();else if(ae(g.id))g.id=""+g.id;else if(Hr(g.id)||!we(g.id)){je("Can not create element with invalid string ID `"+g.id+"`"),h();continue}else if(n.hasElementWithId(g.id)){je("Can not create second element with ID `"+g.id+"`"),h();continue}}var p=g.id;if(d.isNode()){var y=v.position;y.x==null&&(y.x=0),y.y==null&&(y.y=0)}if(d.isEdge()){for(var m=d,b=["source","target"],E=b.length,T=!1,I=0;I<E;I++){var w=b[I],x=g[w];ae(x)&&(x=g[w]=""+g[w]),x==null||x===""?(je("Can not create edge `"+p+"` with unspecified "+w),T=!0):n.hasElementWithId(x)||(je("Can not create edge `"+p+"` with nonexistant "+w+" `"+x+"`"),T=!0)}if(T){h();continue}var C=n.getElementById(g.source),S=n.getElementById(g.target);C.same(S)?C._private.edges.push(m):(C._private.edges.push(m),S._private.edges.push(m)),m._private.source=C,m._private.target=S}v.map=new vr,v.map.set(p,{ele:d,index:0}),v.removed=!1,e&&n.addToPool(d)}for(var A=0;A<i.length;A++){var R=i[A],D=R._private.data;ae(D.parent)&&(D.parent=""+D.parent);var _=D.parent,M=_!=null;if(M||R._private.parent){var k=R._private.parent?n.collection().merge(R._private.parent):n.getElementById(_);if(k.empty())D.parent=void 0;else if(k[0].removed())Ve("Node added with missing parent, reference to parent removed"),D.parent=void 0,R._private.parent=null;else{for(var O=!1,P=k;!P.empty();){if(R.same(P)){O=!0,D.parent=void 0;break}P=P.parent()}O||(k[0]._private.children.push(R),R._private.parent=k[0],a.hasCompoundNodes=!0)}}}if(o.length>0){for(var B=o.length===r.length?r:new mt(n,o),F=0;F<B.length;F++){var N=B[F];N.isNode()||(N.parallelEdges().clearTraversalCache(),N.source().clearTraversalCache(),N.target().clearTraversalCache())}var q;a.hasCompoundNodes?q=n.collection().merge(B).merge(B.connectedNodes()).merge(B.parent()):q=B,q.dirtyCompoundBoundsCache().dirtyBoundingBoxCache().updateStyle(t),t?B.emitAndNotify("add"):e&&B.emit("add")}return r};We.removed=function(){var t=this[0];return t&&t._private.removed};We.inside=function(){var t=this[0];return t&&!t._private.removed};We.remove=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,r=this,n=[],a={},i=r._private.cy;function s(_){for(var M=_._private.edges,k=0;k<M.length;k++)u(M[k])}function o(_){for(var M=_._private.children,k=0;k<M.length;k++)u(M[k])}function u(_){var M=a[_.id()];e&&_.removed()||M||(a[_.id()]=!0,_.isNode()?(n.push(_),s(_),o(_)):n.unshift(_))}for(var l=0,f=r.length;l<f;l++){var c=r[l];u(c)}function h(_,M){var k=_._private.edges;Yr(k,M),_.clearTraversalCache()}function d(_){_.clearTraversalCache()}var v=[];v.ids={};function g(_,M){M=M[0],_=_[0];var k=_._private.children,O=_.id();Yr(k,M),M._private.parent=null,v.ids[O]||(v.ids[O]=!0,v.push(_))}r.dirtyCompoundBoundsCache(),e&&i.removeFromPool(n);for(var p=0;p<n.length;p++){var y=n[p];if(y.isEdge()){var m=y.source()[0],b=y.target()[0];h(m,y),h(b,y);for(var E=y.parallelEdges(),T=0;T<E.length;T++){var I=E[T];d(I),I.isBundledBezier()&&I.dirtyBoundingBoxCache()}}else{var w=y.parent();w.length!==0&&g(w,y)}e&&(y._private.removed=!0)}var x=i._private.elements;i._private.hasCompoundNodes=!1;for(var C=0;C<x.length;C++){var S=x[C];if(S.isParent()){i._private.hasCompoundNodes=!0;break}}var A=new mt(this.cy(),n);A.size()>0&&(t?A.emitAndNotify("remove"):e&&A.emit("remove"));for(var R=0;R<v.length;R++){var D=v[R];(!e||!D.removed())&&D.updateStyle()}return A};We.move=function(t){var e=this._private.cy,r=this,n=!1,a=!1,i=function(v){return v==null?v:""+v};if(t.source!==void 0||t.target!==void 0){var s=i(t.source),o=i(t.target),u=s!=null&&e.hasElementWithId(s),l=o!=null&&e.hasElementWithId(o);(u||l)&&(e.batch(function(){r.remove(n,a),r.emitAndNotify("moveout");for(var d=0;d<r.length;d++){var v=r[d],g=v._private.data;v.isEdge()&&(u&&(g.source=s),l&&(g.target=o))}r.restore(n,a)}),r.emitAndNotify("move"))}else if(t.parent!==void 0){var f=i(t.parent),c=f===null||e.hasElementWithId(f);if(c){var h=f===null?void 0:f;e.batch(function(){var d=r.remove(n,a);d.emitAndNotify("moveout");for(var v=0;v<r.length;v++){var g=r[v],p=g._private.data;g.isNode()&&(p.parent=h)}d.restore(n,a)}),r.emitAndNotify("move")}}return this};[Lx,JL,Mi,Gr,ta,gM,Ss,LM,rT,nT,NM,Zi,Oi,yt,zr,xt].forEach(function(t){xe(We,t)});var VM={add:function(e){var r,n=this;if(Ft(e)){var a=e;if(a._private.cy===n)r=a.restore();else{for(var i=[],s=0;s<a.length;s++){var o=a[s];i.push(o.json())}r=new mt(n,i)}}else if(He(e)){var u=e;r=new mt(n,u)}else if(qe(e)&&(He(e.nodes)||He(e.edges))){for(var l=e,f=[],c=["nodes","edges"],h=0,d=c.length;h<d;h++){var v=c[h],g=l[v];if(He(g))for(var p=0,y=g.length;p<y;p++){var m=xe({group:v},g[p]);f.push(m)}}r=new mt(n,f)}else{var b=e;r=new ms(n,b).collection()}return r},remove:function(e){if(!Ft(e)){if(we(e)){var r=e;e=this.$(r)}}return e.remove()}};/*! Bezier curve function generator. Copyright Gaetan Renaudeau. MIT License: http://en.wikipedia.org/wiki/MIT_License */function UM(t,e,r,n){var a=4,i=.001,s=1e-7,o=10,u=11,l=1/(u-1),f=typeof Float32Array<"u";if(arguments.length!==4)return!1;for(var c=0;c<4;++c)if(typeof arguments[c]!="number"||isNaN(arguments[c])||!isFinite(arguments[c]))return!1;t=Math.min(t,1),r=Math.min(r,1),t=Math.max(t,0),r=Math.max(r,0);var h=f?new Float32Array(u):new Array(u);function d(S,A){return 1-3*A+3*S}function v(S,A){return 3*A-6*S}function g(S){return 3*S}function p(S,A,R){return((d(A,R)*S+v(A,R))*S+g(A))*S}function y(S,A,R){return 3*d(A,R)*S*S+2*v(A,R)*S+g(A)}function m(S,A){for(var R=0;R<a;++R){var D=y(A,t,r);if(D===0)return A;var _=p(A,t,r)-S;A-=_/D}return A}function b(){for(var S=0;S<u;++S)h[S]=p(S*l,t,r)}function E(S,A,R){var D,_,M=0;do _=A+(R-A)/2,D=p(_,t,r)-S,D>0?R=_:A=_;while(Math.abs(D)>s&&++M<o);return _}function T(S){for(var A=0,R=1,D=u-1;R!==D&&h[R]<=S;++R)A+=l;--R;var _=(S-h[R])/(h[R+1]-h[R]),M=A+_*l,k=y(M,t,r);return k>=i?m(S,M):k===0?M:E(S,A,A+l)}var I=!1;function w(){I=!0,(t!==e||r!==n)&&b()}var x=function(A){return I||w(),t===e&&r===n?A:A===0?0:A===1?1:p(T(A),e,n)};x.getControlPoints=function(){return[{x:t,y:e},{x:r,y:n}]};var C="generateBezier("+[t,e,r,n]+")";return x.toString=function(){return C},x}/*! Runge-Kutta spring physics function generator. Adapted from Framer.js, copyright Koen Bok. MIT License: http://en.wikipedia.org/wiki/MIT_License */var HM=function(){function t(n){return-n.tension*n.x-n.friction*n.v}function e(n,a,i){var s={x:n.x+i.dx*a,v:n.v+i.dv*a,tension:n.tension,friction:n.friction};return{dx:s.v,dv:t(s)}}function r(n,a){var i={dx:n.v,dv:t(n)},s=e(n,a*.5,i),o=e(n,a*.5,s),u=e(n,a,o),l=1/6*(i.dx+2*(s.dx+o.dx)+u.dx),f=1/6*(i.dv+2*(s.dv+o.dv)+u.dv);return n.x=n.x+l*a,n.v=n.v+f*a,n}return function n(a,i,s){var o={x:-1,v:0,tension:null,friction:null},u=[0],l=0,f=1/1e4,c=16/1e3,h,d,v;for(a=parseFloat(a)||500,i=parseFloat(i)||20,s=s||null,o.tension=a,o.friction=i,h=s!==null,h?(l=n(a,i),d=l/s*c):d=c;v=r(v||o,d),u.push(1+v.x),l+=16,Math.abs(v.x)>f&&Math.abs(v.v)>f;);return h?function(g){return u[g*(u.length-1)|0]}:l}}(),Ye=function(e,r,n,a){var i=UM(e,r,n,a);return function(s,o,u){return s+(o-s)*i(u)}},Pi={linear:function(e,r,n){return e+(r-e)*n},ease:Ye(.25,.1,.25,1),"ease-in":Ye(.42,0,1,1),"ease-out":Ye(0,0,.58,1),"ease-in-out":Ye(.42,0,.58,1),"ease-in-sine":Ye(.47,0,.745,.715),"ease-out-sine":Ye(.39,.575,.565,1),"ease-in-out-sine":Ye(.445,.05,.55,.95),"ease-in-quad":Ye(.55,.085,.68,.53),"ease-out-quad":Ye(.25,.46,.45,.94),"ease-in-out-quad":Ye(.455,.03,.515,.955),"ease-in-cubic":Ye(.55,.055,.675,.19),"ease-out-cubic":Ye(.215,.61,.355,1),"ease-in-out-cubic":Ye(.645,.045,.355,1),"ease-in-quart":Ye(.895,.03,.685,.22),"ease-out-quart":Ye(.165,.84,.44,1),"ease-in-out-quart":Ye(.77,0,.175,1),"ease-in-quint":Ye(.755,.05,.855,.06),"ease-out-quint":Ye(.23,1,.32,1),"ease-in-out-quint":Ye(.86,0,.07,1),"ease-in-expo":Ye(.95,.05,.795,.035),"ease-out-expo":Ye(.19,1,.22,1),"ease-in-out-expo":Ye(1,0,0,1),"ease-in-circ":Ye(.6,.04,.98,.335),"ease-out-circ":Ye(.075,.82,.165,1),"ease-in-out-circ":Ye(.785,.135,.15,.86),spring:function(e,r,n){if(n===0)return Pi.linear;var a=HM(e,r,n);return function(i,s,o){return i+(s-i)*a(o)}},"cubic-bezier":Ye};function Ny(t,e,r,n,a){if(n===1||e===r)return r;var i=a(e,r,n);return t==null||((t.roundValue||t.color)&&(i=Math.round(i)),t.min!==void 0&&(i=Math.max(i,t.min)),t.max!==void 0&&(i=Math.min(i,t.max))),i}function By(t,e){return t.pfValue!=null||t.value!=null?t.pfValue!=null&&(e==null||e.type.units!=="%")?t.pfValue:t.value:t}function Bn(t,e,r,n,a){var i=a!=null?a.type:null;r<0?r=0:r>1&&(r=1);var s=By(t,a),o=By(e,a);if(ae(s)&&ae(o))return Ny(i,s,o,r,n);if(He(s)&&He(o)){for(var u=[],l=0;l<o.length;l++){var f=s[l],c=o[l];if(f!=null&&c!=null){var h=Ny(i,f,c,r,n);u.push(h)}else u.push(c)}return u}}function YM(t,e,r,n){var a=!n,i=t._private,s=e._private,o=s.easing,u=s.startTime,l=n?t:t.cy(),f=l.style();if(!s.easingImpl)if(o==null)s.easingImpl=Pi.linear;else{var c;if(we(o)){var h=f.parse("transition-timing-function",o);c=h.value}else c=o;var d,v;we(c)?(d=c,v=[]):(d=c[1],v=c.slice(2).map(function(B){return+B})),v.length>0?(d==="spring"&&v.push(s.duration),s.easingImpl=Pi[d].apply(null,v)):s.easingImpl=Pi[d]}var g=s.easingImpl,p;if(s.duration===0?p=1:p=(r-u)/s.duration,s.applying&&(p=s.progress),p<0?p=0:p>1&&(p=1),s.delay==null){var y=s.startPosition,m=s.position;if(m&&a&&!t.locked()){var b={};ba(y.x,m.x)&&(b.x=Bn(y.x,m.x,p,g)),ba(y.y,m.y)&&(b.y=Bn(y.y,m.y,p,g)),t.position(b)}var E=s.startPan,T=s.pan,I=i.pan,w=T!=null&&n;w&&(ba(E.x,T.x)&&(I.x=Bn(E.x,T.x,p,g)),ba(E.y,T.y)&&(I.y=Bn(E.y,T.y,p,g)),t.emit("pan"));var x=s.startZoom,C=s.zoom,S=C!=null&&n;S&&(ba(x,C)&&(i.zoom=za(i.minZoom,Bn(x,C,p,g),i.maxZoom)),t.emit("zoom")),(w||S)&&t.emit("viewport");var A=s.style;if(A&&A.length>0&&a){for(var R=0;R<A.length;R++){var D=A[R],_=D.name,M=D,k=s.startStyle[_],O=f.properties[k.name],P=Bn(k,M,p,g,O);f.overrideBypass(t,_,P)}t.emit("style")}}return s.progress=p,p}function ba(t,e){return t==null||e==null?!1:ae(t)&&ae(e)?!0:!!(t&&e)}function WM(t,e,r,n){var a=e._private;a.started=!0,a.startTime=r-a.progress*a.duration}function Fy(t,e){var r=e._private.aniEles,n=[];function a(f,c){var h=f._private,d=h.animation.current,v=h.animation.queue,g=!1;if(d.length===0){var p=v.shift();p&&d.push(p)}for(var y=function(I){for(var w=I.length-1;w>=0;w--){var x=I[w];x()}I.splice(0,I.length)},m=d.length-1;m>=0;m--){var b=d[m],E=b._private;if(E.stopped){d.splice(m,1),E.hooked=!1,E.playing=!1,E.started=!1,y(E.frames);continue}!E.playing&&!E.applying||(E.playing&&E.applying&&(E.applying=!1),E.started||WM(f,b,t),YM(f,b,t,c),E.applying&&(E.applying=!1),y(E.frames),E.step!=null&&E.step(t),b.completed()&&(d.splice(m,1),E.hooked=!1,E.playing=!1,E.started=!1,y(E.completes)),g=!0)}return!c&&d.length===0&&v.length===0&&n.push(f),g}for(var i=!1,s=0;s<r.length;s++){var o=r[s],u=a(o);i=i||u}var l=a(e,!0);(i||l)&&(r.length>0?e.notify("draw",r):e.notify("draw")),r.unmerge(n),e.emit("step")}var XM={animate:$e.animate(),animation:$e.animation(),animated:$e.animated(),clearQueue:$e.clearQueue(),delay:$e.delay(),delayAnimation:$e.delayAnimation(),stop:$e.stop(),addToAnimationPool:function(e){var r=this;r.styleEnabled()&&r._private.aniEles.merge(e)},stopAnimationLoop:function(){this._private.animationsRunning=!1},startAnimationLoop:function(){var e=this;if(e._private.animationsRunning=!0,!e.styleEnabled())return;function r(){e._private.animationsRunning&&Yi(function(i){Fy(i,e),r()})}var n=e.renderer();n&&n.beforeRender?n.beforeRender(function(i,s){Fy(s,e)},n.beforeRenderPriorities.animations):r()}},KM={qualifierCompare:function(e,r){return e==null||r==null?e==null&&r==null:e.sameText(r)},eventMatches:function(e,r,n){var a=r.qualifier;return a!=null?e!==n.target&&ja(n.target)&&a.matches(n.target):!0},addEventFields:function(e,r){r.cy=e,r.target=e},callbackContext:function(e,r,n){return r.qualifier!=null?n.target:e}},Ti=function(e){return we(e)?new Xr(e):e},sT={createEmitter:function(){var e=this._private;return e.emitter||(e.emitter=new As(KM,this)),this},emitter:function(){return this._private.emitter},on:function(e,r,n){return this.emitter().on(e,Ti(r),n),this},removeListener:function(e,r,n){return this.emitter().removeListener(e,Ti(r),n),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},one:function(e,r,n){return this.emitter().one(e,Ti(r),n),this},once:function(e,r,n){return this.emitter().one(e,Ti(r),n),this},emit:function(e,r){return this.emitter().emit(e,r),this},emitAndNotify:function(e,r){return this.emit(e),this.notify(e,r),this}};$e.eventAliasesOn(sT);var Zd={png:function(e){var r=this._private.renderer;return e=e||{},r.png(e)},jpg:function(e){var r=this._private.renderer;return e=e||{},e.bg=e.bg||"#fff",r.jpg(e)}};Zd.jpeg=Zd.jpg;var ki={layout:function(e){var r=this;if(e==null){je("Layout options must be specified to make a layout");return}if(e.name==null){je("A `name` must be specified to make a layout");return}var n=e.name,a=r.extension("layout",n);if(a==null){je("No such layout `"+n+"` found.  Did you forget to import it and `cytoscape.use()` it?");return}var i;we(e.eles)?i=r.$(e.eles):i=e.eles!=null?e.eles:r.$();var s=new a(xe({},e,{cy:r,eles:i}));return s}};ki.createLayout=ki.makeLayout=ki.layout;var jM={notify:function(e,r){var n=this._private;if(this.batching()){n.batchNotifications=n.batchNotifications||{};var a=n.batchNotifications[e]=n.batchNotifications[e]||this.collection();r!=null&&a.merge(r);return}if(n.notificationsEnabled){var i=this.renderer();this.destroyed()||!i||i.notify(e,r)}},notifications:function(e){var r=this._private;return e===void 0?r.notificationsEnabled:(r.notificationsEnabled=!!e,this)},noNotifications:function(e){this.notifications(!1),e(),this.notifications(!0)},batching:function(){return this._private.batchCount>0},startBatch:function(){var e=this._private;return e.batchCount==null&&(e.batchCount=0),e.batchCount===0&&(e.batchStyleEles=this.collection(),e.batchNotifications={}),e.batchCount++,this},endBatch:function(){var e=this._private;if(e.batchCount===0)return this;if(e.batchCount--,e.batchCount===0){e.batchStyleEles.updateStyle();var r=this.renderer();Object.keys(e.batchNotifications).forEach(function(n){var a=e.batchNotifications[n];a.empty()?r.notify(n):r.notify(n,a)})}return this},batch:function(e){return this.startBatch(),e(),this.endBatch(),this},batchData:function(e){var r=this;return this.batch(function(){for(var n=Object.keys(e),a=0;a<n.length;a++){var i=n[a],s=e[i],o=r.getElementById(i);o.data(s)}})}},ZM=bt({hideEdgesOnViewport:!1,textureOnViewport:!1,motionBlur:!1,motionBlurOpacity:.05,pixelRatio:void 0,desktopTapThreshold:4,touchTapThreshold:8,wheelSensitivity:1,debug:!1,showFps:!1,webgl:!1,webglDebug:!1,webglDebugShowAtlases:!1,webglTexSize:2048,webglTexRows:36,webglTexRowsNodes:18,webglBatchSize:2048,webglTexPerBatch:14,webglBgColor:[255,255,255]}),Qd={renderTo:function(e,r,n,a){var i=this._private.renderer;return i.renderTo(e,r,n,a),this},renderer:function(){return this._private.renderer},forceRender:function(){return this.notify("draw"),this},resize:function(){return this.invalidateSize(),this.emitAndNotify("resize"),this},initRenderer:function(e){var r=this,n=r.extension("renderer",e.name);if(n==null){je("Can not initialise: No such renderer `".concat(e.name,"` found. Did you forget to import it and `cytoscape.use()` it?"));return}e.wheelSensitivity!==void 0&&Ve("You have set a custom wheel sensitivity.  This will make your app zoom unnaturally when using mainstream mice.  You should change this value from the default only if you can guarantee that all your users will use the same hardware and OS configuration as your current machine.");var a=ZM(e);a.cy=r,r._private.renderer=new n(a),this.notify("init")},destroyRenderer:function(){var e=this;e.notify("destroy");var r=e.container();if(r)for(r._cyreg=null;r.childNodes.length>0;)r.removeChild(r.childNodes[0]);e._private.renderer=null,e.mutableElements().forEach(function(n){var a=n._private;a.rscratch={},a.rstyle={},a.animation.current=[],a.animation.queue=[]})},onRender:function(e){return this.on("render",e)},offRender:function(e){return this.off("render",e)}};Qd.invalidateDimensions=Qd.resize;var Ni={collection:function(e,r){return we(e)?this.$(e):Ft(e)?e.collection():He(e)?(r||(r={}),new mt(this,e,r.unique,r.removed)):new mt(this)},nodes:function(e){var r=this.$(function(n){return n.isNode()});return e?r.filter(e):r},edges:function(e){var r=this.$(function(n){return n.isEdge()});return e?r.filter(e):r},$:function(e){var r=this._private.elements;return e?r.filter(e):r.spawnSelf()},mutableElements:function(){return this._private.elements}};Ni.elements=Ni.filter=Ni.$;var gt={},Oa="t",QM="f";gt.apply=function(t){for(var e=this,r=e._private,n=r.cy,a=n.collection(),i=0;i<t.length;i++){var s=t[i],o=e.getContextMeta(s);if(!o.empty){var u=e.getContextStyle(o),l=e.applyContextStyle(o,u,s);s._private.appliedInitStyle?e.updateTransitions(s,l.diffProps):s._private.appliedInitStyle=!0;var f=e.updateStyleHints(s);f&&a.push(s)}}return a};gt.getPropertiesDiff=function(t,e){var r=this,n=r._private.propDiffs=r._private.propDiffs||{},a=t+"-"+e,i=n[a];if(i)return i;for(var s=[],o={},u=0;u<r.length;u++){var l=r[u],f=t[u]===Oa,c=e[u]===Oa,h=f!==c,d=l.mappedProperties.length>0;if(h||c&&d){var v=void 0;h&&d||h?v=l.properties:d&&(v=l.mappedProperties);for(var g=0;g<v.length;g++){for(var p=v[g],y=p.name,m=!1,b=u+1;b<r.length;b++){var E=r[b],T=e[b]===Oa;if(T&&(m=E.properties[p.name]!=null,m))break}!o[y]&&!m&&(o[y]=!0,s.push(y))}}}return n[a]=s,s};gt.getContextMeta=function(t){for(var e=this,r="",n,a=t._private.styleCxtKey||"",i=0;i<e.length;i++){var s=e[i],o=s.selector&&s.selector.matches(t);o?r+=Oa:r+=QM}return n=e.getPropertiesDiff(a,r),t._private.styleCxtKey=r,{key:r,diffPropNames:n,empty:n.length===0}};gt.getContextStyle=function(t){var e=t.key,r=this,n=this._private.contextStyles=this._private.contextStyles||{};if(n[e])return n[e];for(var a={_private:{key:e}},i=0;i<r.length;i++){var s=r[i],o=e[i]===Oa;if(o)for(var u=0;u<s.properties.length;u++){var l=s.properties[u];a[l.name]=l}}return n[e]=a,a};gt.applyContextStyle=function(t,e,r){for(var n=this,a=t.diffPropNames,i={},s=n.types,o=0;o<a.length;o++){var u=a[o],l=e[u],f=r.pstyle(u);if(!l)if(f)f.bypass?l={name:u,deleteBypassed:!0}:l={name:u,delete:!0};else continue;if(f!==l){if(l.mapped===s.fn&&f!=null&&f.mapping!=null&&f.mapping.value===l.value){var c=f.mapping,h=c.fnValue=l.value(r);if(h===c.prevFnValue)continue}var d=i[u]={prev:f};n.applyParsedProperty(r,l),d.next=r.pstyle(u),d.next&&d.next.bypass&&(d.next=d.next.bypassed)}}return{diffProps:i}};gt.updateStyleHints=function(t){var e=t._private,r=this,n=r.propertyGroupNames,a=r.propertyGroupKeys,i=function(U,j,ne){return r.getPropertiesHash(U,j,ne)},s=e.styleKey;if(t.removed())return!1;var o=e.group==="nodes",u=t._private.style;n=Object.keys(u);for(var l=0;l<a.length;l++){var f=a[l];e.styleKeys[f]=[hn,Vn]}for(var c=function(U,j){return e.styleKeys[j][0]=Fa(U,e.styleKeys[j][0])},h=function(U,j){return e.styleKeys[j][1]=qa(U,e.styleKeys[j][1])},d=function(U,j){c(U,j),h(U,j)},v=function(U,j){for(var ne=0;ne<U.length;ne++){var re=U.charCodeAt(ne);c(re,j),h(re,j)}},g=2e9,p=function(U){return-128<U&&U<128&&Math.floor(U)!==U?g-(U*1024|0):U},y=0;y<n.length;y++){var m=n[y],b=u[m];if(b!=null){var E=this.properties[m],T=E.type,I=E.groupKey,w=void 0;E.hashOverride!=null?w=E.hashOverride(t,b):b.pfValue!=null&&(w=b.pfValue);var x=E.enums==null?b.value:null,C=w!=null,S=x!=null,A=C||S,R=b.units;if(T.number&&A&&!T.multiple){var D=C?w:x;d(p(D),I),!C&&R!=null&&v(R,I)}else v(b.strValue,I)}}for(var _=[hn,Vn],M=0;M<a.length;M++){var k=a[M],O=e.styleKeys[k];_[0]=Fa(O[0],_[0]),_[1]=qa(O[1],_[1])}e.styleKey=vD(_[0],_[1]);var P=e.styleKeys;e.labelDimsKey=Ir(P.labelDimensions);var B=i(t,["label"],P.labelDimensions);if(e.labelKey=Ir(B),e.labelStyleKey=Ir(gi(P.commonLabel,B)),!o){var F=i(t,["source-label"],P.labelDimensions);e.sourceLabelKey=Ir(F),e.sourceLabelStyleKey=Ir(gi(P.commonLabel,F));var N=i(t,["target-label"],P.labelDimensions);e.targetLabelKey=Ir(N),e.targetLabelStyleKey=Ir(gi(P.commonLabel,N))}if(o){var q=e.styleKeys,V=q.nodeBody,Y=q.nodeBorder,H=q.nodeOutline,Z=q.backgroundImage,ee=q.compound,ie=q.pie,J=q.stripe,G=[V,Y,H,Z,ee,ie,J].filter(function($){return $!=null}).reduce(gi,[hn,Vn]);e.nodeKey=Ir(G),e.hasPie=ie!=null&&ie[0]!==hn&&ie[1]!==Vn,e.hasStripe=J!=null&&J[0]!==hn&&J[1]!==Vn}return s!==e.styleKey};gt.clearStyleHints=function(t){var e=t._private;e.styleCxtKey="",e.styleKeys={},e.styleKey=null,e.labelKey=null,e.labelStyleKey=null,e.sourceLabelKey=null,e.sourceLabelStyleKey=null,e.targetLabelKey=null,e.targetLabelStyleKey=null,e.nodeKey=null,e.hasPie=null,e.hasStripe=null};gt.applyParsedProperty=function(t,e){var r=this,n=e,a=t._private.style,i,s=r.types,o=r.properties[n.name].type,u=n.bypass,l=a[n.name],f=l&&l.bypass,c=t._private,h="mapping",d=function(V){return V==null?null:V.pfValue!=null?V.pfValue:V.value},v=function(){var V=d(l),Y=d(n);r.checkTriggers(t,n.name,V,Y)};if(e.name==="curve-style"&&t.isEdge()&&(e.value!=="bezier"&&t.isLoop()||e.value==="haystack"&&(t.source().isParent()||t.target().isParent()))&&(n=e=this.parse(e.name,"bezier",u)),n.delete)return a[n.name]=void 0,v(),!0;if(n.deleteBypassed)return l?l.bypass?(l.bypassed=void 0,v(),!0):!1:(v(),!0);if(n.deleteBypass)return l?l.bypass?(a[n.name]=l.bypassed,v(),!0):!1:(v(),!0);var g=function(){Ve("Do not assign mappings to elements without corresponding data (i.e. ele `"+t.id()+"` has no mapping for property `"+n.name+"` with data field `"+n.field+"`); try a `["+n.field+"]` selector to limit scope to elements with `"+n.field+"` defined")};switch(n.mapped){case s.mapData:{for(var p=n.field.split("."),y=c.data,m=0;m<p.length&&y;m++){var b=p[m];y=y[b]}if(y==null)return g(),!1;var E;if(ae(y)){var T=n.fieldMax-n.fieldMin;T===0?E=0:E=(y-n.fieldMin)/T}else return Ve("Do not use continuous mappers without specifying numeric data (i.e. `"+n.field+": "+y+"` for `"+t.id()+"` is non-numeric)"),!1;if(E<0?E=0:E>1&&(E=1),o.color){var I=n.valueMin[0],w=n.valueMax[0],x=n.valueMin[1],C=n.valueMax[1],S=n.valueMin[2],A=n.valueMax[2],R=n.valueMin[3]==null?1:n.valueMin[3],D=n.valueMax[3]==null?1:n.valueMax[3],_=[Math.round(I+(w-I)*E),Math.round(x+(C-x)*E),Math.round(S+(A-S)*E),Math.round(R+(D-R)*E)];i={bypass:n.bypass,name:n.name,value:_,strValue:"rgb("+_[0]+", "+_[1]+", "+_[2]+")"}}else if(o.number){var M=n.valueMin+(n.valueMax-n.valueMin)*E;i=this.parse(n.name,M,n.bypass,h)}else return!1;if(!i)return g(),!1;i.mapping=n,n=i;break}case s.data:{for(var k=n.field.split("."),O=c.data,P=0;P<k.length&&O;P++){var B=k[P];O=O[B]}if(O!=null&&(i=this.parse(n.name,O,n.bypass,h)),!i)return g(),!1;i.mapping=n,n=i;break}case s.fn:{var F=n.value,N=n.fnValue!=null?n.fnValue:F(t);if(n.prevFnValue=N,N==null)return Ve("Custom function mappers may not return null (i.e. `"+n.name+"` for ele `"+t.id()+"` is null)"),!1;if(i=this.parse(n.name,N,n.bypass,h),!i)return Ve("Custom function mappers may not return invalid values for the property type (i.e. `"+n.name+"` for ele `"+t.id()+"` is invalid)"),!1;i.mapping=nr(n),n=i;break}case void 0:break;default:return!1}return u?(f?n.bypassed=l.bypassed:n.bypassed=l,a[n.name]=n):f?l.bypassed=n:a[n.name]=n,v(),!0};gt.cleanElements=function(t,e){for(var r=0;r<t.length;r++){var n=t[r];if(this.clearStyleHints(n),n.dirtyCompoundBoundsCache(),n.dirtyBoundingBoxCache(),!e)n._private.style={};else for(var a=n._private.style,i=Object.keys(a),s=0;s<i.length;s++){var o=i[s],u=a[o];u!=null&&(u.bypass?u.bypassed=null:a[o]=null)}}};gt.update=function(){var t=this._private.cy,e=t.mutableElements();e.updateStyle()};gt.updateTransitions=function(t,e){var r=this,n=t._private,a=t.pstyle("transition-property").value,i=t.pstyle("transition-duration").pfValue,s=t.pstyle("transition-delay").pfValue;if(a.length>0&&i>0){for(var o={},u=!1,l=0;l<a.length;l++){var f=a[l],c=t.pstyle(f),h=e[f];if(h){var d=h.prev,v=d,g=h.next!=null?h.next:c,p=!1,y=void 0,m=1e-6;v&&(ae(v.pfValue)&&ae(g.pfValue)?(p=g.pfValue-v.pfValue,y=v.pfValue+m*p):ae(v.value)&&ae(g.value)?(p=g.value-v.value,y=v.value+m*p):He(v.value)&&He(g.value)&&(p=v.value[0]!==g.value[0]||v.value[1]!==g.value[1]||v.value[2]!==g.value[2],y=v.strValue),p&&(o[f]=g.strValue,this.applyBypass(t,f,y),u=!0))}}if(!u)return;n.transitioning=!0,new na(function(b){s>0?t.delayAnimation(s).play().promise().then(b):b()}).then(function(){return t.animation({style:o,duration:i,easing:t.pstyle("transition-timing-function").value,queue:!1}).play().promise()}).then(function(){r.removeBypasses(t,a),t.emitAndNotify("style"),n.transitioning=!1})}else n.transitioning&&(this.removeBypasses(t,a),t.emitAndNotify("style"),n.transitioning=!1)};gt.checkTrigger=function(t,e,r,n,a,i){var s=this.properties[e],o=a(s);t.removed()||o!=null&&o(r,n,t)&&i(s)};gt.checkZOrderTrigger=function(t,e,r,n){var a=this;this.checkTrigger(t,e,r,n,function(i){return i.triggersZOrder},function(){a._private.cy.notify("zorder",t)})};gt.checkBoundsTrigger=function(t,e,r,n){this.checkTrigger(t,e,r,n,function(a){return a.triggersBounds},function(a){t.dirtyCompoundBoundsCache(),t.dirtyBoundingBoxCache()})};gt.checkConnectedEdgesBoundsTrigger=function(t,e,r,n){this.checkTrigger(t,e,r,n,function(a){return a.triggersBoundsOfConnectedEdges},function(a){t.connectedEdges().forEach(function(i){i.dirtyBoundingBoxCache()})})};gt.checkParallelEdgesBoundsTrigger=function(t,e,r,n){this.checkTrigger(t,e,r,n,function(a){return a.triggersBoundsOfParallelEdges},function(a){t.parallelEdges().forEach(function(i){i.dirtyBoundingBoxCache()})})};gt.checkTriggers=function(t,e,r,n){t.dirtyStyleCache(),this.checkZOrderTrigger(t,e,r,n),this.checkBoundsTrigger(t,e,r,n),this.checkConnectedEdgesBoundsTrigger(t,e,r,n),this.checkParallelEdgesBoundsTrigger(t,e,r,n)};var ni={};ni.applyBypass=function(t,e,r,n){var a=this,i=[],s=!0;if(e==="*"||e==="**"){if(r!==void 0)for(var o=0;o<a.properties.length;o++){var u=a.properties[o],l=u.name,f=this.parse(l,r,!0);f&&i.push(f)}}else if(we(e)){var c=this.parse(e,r,!0);c&&i.push(c)}else if(qe(e)){var h=e;n=r;for(var d=Object.keys(h),v=0;v<d.length;v++){var g=d[v],p=h[g];if(p===void 0&&(p=h[ps(g)]),p!==void 0){var y=this.parse(g,p,!0);y&&i.push(y)}}}else return!1;if(i.length===0)return!1;for(var m=!1,b=0;b<t.length;b++){for(var E=t[b],T={},I=void 0,w=0;w<i.length;w++){var x=i[w];if(n){var C=E.pstyle(x.name);I=T[x.name]={prev:C}}m=this.applyParsedProperty(E,nr(x))||m,n&&(I.next=E.pstyle(x.name))}m&&this.updateStyleHints(E),n&&this.updateTransitions(E,T,s)}return m};ni.overrideBypass=function(t,e,r){e=Cv(e);for(var n=0;n<t.length;n++){var a=t[n],i=a._private.style[e],s=this.properties[e].type,o=s.color,u=s.mutiple,l=i?i.pfValue!=null?i.pfValue:i.value:null;!i||!i.bypass?this.applyBypass(a,e,r):(i.value=r,i.pfValue!=null&&(i.pfValue=r),o?i.strValue="rgb("+r.join(",")+")":u?i.strValue=r.join(" "):i.strValue=""+r,this.updateStyleHints(a)),this.checkTriggers(a,e,l,r)}};ni.removeAllBypasses=function(t,e){return this.removeBypasses(t,this.propertyNames,e)};ni.removeBypasses=function(t,e,r){for(var n=!0,a=0;a<t.length;a++){for(var i=t[a],s={},o=0;o<e.length;o++){var u=e[o],l=this.properties[u],f=i.pstyle(l.name);if(!(!f||!f.bypass)){var c="",h=this.parse(u,c,!0),d=s[l.name]={prev:f};this.applyParsedProperty(i,h),d.next=i.pstyle(l.name)}}this.updateStyleHints(i),r&&this.updateTransitions(i,s,n)}};var qv={};qv.getEmSizeInPixels=function(){var t=this.containerCss("font-size");return t!=null?parseFloat(t):1};qv.containerCss=function(t){var e=this._private.cy,r=e.container(),n=e.window();if(n&&r&&n.getComputedStyle)return n.getComputedStyle(r).getPropertyValue(t)};var ir={};ir.getRenderedStyle=function(t,e){return e?this.getStylePropertyValue(t,e,!0):this.getRawStyle(t,!0)};ir.getRawStyle=function(t,e){var r=this;if(t=t[0],t){for(var n={},a=0;a<r.properties.length;a++){var i=r.properties[a],s=r.getStylePropertyValue(t,i.name,e);s!=null&&(n[i.name]=s,n[ps(i.name)]=s)}return n}};ir.getIndexedStyle=function(t,e,r,n){var a=t.pstyle(e)[r][n];return a??t.cy().style().getDefaultProperty(e)[r][0]};ir.getStylePropertyValue=function(t,e,r){var n=this;if(t=t[0],t){var a=n.properties[e];a.alias&&(a=a.pointsTo);var i=a.type,s=t.pstyle(a.name);if(s){var o=s.value,u=s.units,l=s.strValue;if(r&&i.number&&o!=null&&ae(o)){var f=t.cy().zoom(),c=function(p){return p*f},h=function(p,y){return c(p)+y},d=He(o),v=d?u.every(function(g){return g!=null}):u!=null;return v?d?o.map(function(g,p){return h(g,u[p])}).join(" "):h(o,u):d?o.map(function(g){return we(g)?g:""+c(g)}).join(" "):""+c(o)}else if(l!=null)return l}return null}};ir.getAnimationStartStyle=function(t,e){for(var r={},n=0;n<e.length;n++){var a=e[n],i=a.name,s=t.pstyle(i);s!==void 0&&(qe(s)?s=this.parse(i,s.strValue):s=this.parse(i,s)),s&&(r[i]=s)}return r};ir.getPropsList=function(t){var e=this,r=[],n=t,a=e.properties;if(n)for(var i=Object.keys(n),s=0;s<i.length;s++){var o=i[s],u=n[o],l=a[o]||a[Cv(o)],f=this.parse(l.name,u);f&&r.push(f)}return r};ir.getNonDefaultPropertiesHash=function(t,e,r){var n=r.slice(),a,i,s,o,u,l;for(u=0;u<e.length;u++)if(a=e[u],i=t.pstyle(a,!1),i!=null)if(i.pfValue!=null)n[0]=Fa(o,n[0]),n[1]=qa(o,n[1]);else for(s=i.strValue,l=0;l<s.length;l++)o=s.charCodeAt(l),n[0]=Fa(o,n[0]),n[1]=qa(o,n[1]);return n};ir.getPropertiesHash=ir.getNonDefaultPropertiesHash;var Ds={};Ds.appendFromJson=function(t){for(var e=this,r=0;r<t.length;r++){var n=t[r],a=n.selector,i=n.style||n.css,s=Object.keys(i);e.selector(a);for(var o=0;o<s.length;o++){var u=s[o],l=i[u];e.css(u,l)}}return e};Ds.fromJson=function(t){var e=this;return e.resetToDefault(),e.appendFromJson(t),e};Ds.json=function(){for(var t=[],e=this.defaultLength;e<this.length;e++){for(var r=this[e],n=r.selector,a=r.properties,i={},s=0;s<a.length;s++){var o=a[s];i[o.name]=o.strValue}t.push({selector:n?n.toString():"core",style:i})}return t};var Gv={};Gv.appendFromString=function(t){var e=this,r=this,n=""+t,a,i,s;n=n.replace(/[/][*](\s|.)+?[*][/]/g,"");function o(){n.length>a.length?n=n.substr(a.length):n=""}function u(){i.length>s.length?i=i.substr(s.length):i=""}for(;;){var l=n.match(/^\s*$/);if(l)break;var f=n.match(/^\s*((?:.|\s)+?)\s*\{((?:.|\s)+?)\}/);if(!f){Ve("Halting stylesheet parsing: String stylesheet contains more to parse but no selector and block found in: "+n);break}a=f[0];var c=f[1];if(c!=="core"){var h=new Xr(c);if(h.invalid){Ve("Skipping parsing of block: Invalid selector found in string stylesheet: "+c),o();continue}}var d=f[2],v=!1;i=d;for(var g=[];;){var p=i.match(/^\s*$/);if(p)break;var y=i.match(/^\s*(.+?)\s*:\s*(.+?)(?:\s*;|\s*$)/);if(!y){Ve("Skipping parsing of block: Invalid formatting of style property and value definitions found in:"+d),v=!0;break}s=y[0];var m=y[1],b=y[2],E=e.properties[m];if(!E){Ve("Skipping property: Invalid property name in: "+s),u();continue}var T=r.parse(m,b);if(!T){Ve("Skipping property: Invalid property definition in: "+s),u();continue}g.push({name:m,val:b}),u()}if(v){o();break}r.selector(c);for(var I=0;I<g.length;I++){var w=g[I];r.css(w.name,w.val)}o()}return r};Gv.fromString=function(t){var e=this;return e.resetToDefault(),e.appendFromString(t),e};var nt={};(function(){var t=lt,e=YR,r=XR,n=KR,a=jR,i=function($){return"^"+$+"\\s*\\(\\s*([\\w\\.]+)\\s*\\)$"},s=function($){var U=t+"|\\w+|"+e+"|"+r+"|"+n+"|"+a;return"^"+$+"\\s*\\(([\\w\\.]+)\\s*\\,\\s*("+t+")\\s*\\,\\s*("+t+")\\s*,\\s*("+U+")\\s*\\,\\s*("+U+")\\)$"},o=[`^url\\s*\\(\\s*['"]?(.+?)['"]?\\s*\\)$`,"^(none)$","^(.+)$"];nt.types={time:{number:!0,min:0,units:"s|ms",implicitUnits:"ms"},percent:{number:!0,min:0,max:100,units:"%",implicitUnits:"%"},percentages:{number:!0,min:0,max:100,units:"%",implicitUnits:"%",multiple:!0},zeroOneNumber:{number:!0,min:0,max:1,unitless:!0},zeroOneNumbers:{number:!0,min:0,max:1,unitless:!0,multiple:!0},nOneOneNumber:{number:!0,min:-1,max:1,unitless:!0},nonNegativeInt:{number:!0,min:0,integer:!0,unitless:!0},nonNegativeNumber:{number:!0,min:0,unitless:!0},position:{enums:["parent","origin"]},nodeSize:{number:!0,min:0,enums:["label"]},number:{number:!0,unitless:!0},numbers:{number:!0,unitless:!0,multiple:!0},positiveNumber:{number:!0,unitless:!0,min:0,strictMin:!0},size:{number:!0,min:0},bidirectionalSize:{number:!0},bidirectionalSizeMaybePercent:{number:!0,allowPercent:!0},bidirectionalSizes:{number:!0,multiple:!0},sizeMaybePercent:{number:!0,min:0,allowPercent:!0},axisDirection:{enums:["horizontal","leftward","rightward","vertical","upward","downward","auto"]},axisDirectionExplicit:{enums:["leftward","rightward","upward","downward"]},axisDirectionPrimary:{enums:["horizontal","vertical"]},paddingRelativeTo:{enums:["width","height","average","min","max"]},bgWH:{number:!0,min:0,allowPercent:!0,enums:["auto"],multiple:!0},bgPos:{number:!0,allowPercent:!0,multiple:!0},bgRelativeTo:{enums:["inner","include-padding"],multiple:!0},bgRepeat:{enums:["repeat","repeat-x","repeat-y","no-repeat"],multiple:!0},bgFit:{enums:["none","contain","cover"],multiple:!0},bgCrossOrigin:{enums:["anonymous","use-credentials","null"],multiple:!0},bgClip:{enums:["none","node"],multiple:!0},bgContainment:{enums:["inside","over"],multiple:!0},boxSelection:{enums:["contain","overlap","none"]},color:{color:!0},colors:{color:!0,multiple:!0},fill:{enums:["solid","linear-gradient","radial-gradient"]},bool:{enums:["yes","no"]},bools:{enums:["yes","no"],multiple:!0},lineStyle:{enums:["solid","dotted","dashed"]},lineCap:{enums:["butt","round","square"]},linePosition:{enums:["center","inside","outside"]},lineJoin:{enums:["round","bevel","miter"]},borderStyle:{enums:["solid","dotted","dashed","double"]},curveStyle:{enums:["bezier","unbundled-bezier","haystack","segments","straight","straight-triangle","taxi","round-segments","round-taxi"]},radiusType:{enums:["arc-radius","influence-radius"],multiple:!0},fontFamily:{regex:'^([\\w- \\"]+(?:\\s*,\\s*[\\w- \\"]+)*)$'},fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none","underline","overline","line-through"]},textTransform:{enums:["none","uppercase","lowercase"]},textWrap:{enums:["none","wrap","ellipsis"]},textOverflowWrap:{enums:["whitespace","anywhere"]},textBackgroundShape:{enums:["rectangle","roundrectangle","round-rectangle","circle"]},nodeShape:{enums:["rectangle","roundrectangle","round-rectangle","cutrectangle","cut-rectangle","bottomroundrectangle","bottom-round-rectangle","barrel","ellipse","triangle","round-triangle","square","pentagon","round-pentagon","hexagon","round-hexagon","concavehexagon","concave-hexagon","heptagon","round-heptagon","octagon","round-octagon","tag","round-tag","star","diamond","round-diamond","vee","rhomboid","right-rhomboid","polygon"]},overlayShape:{enums:["roundrectangle","round-rectangle","ellipse"]},cornerRadius:{number:!0,min:0,units:"px|em",implicitUnits:"px",enums:["auto"]},compoundIncludeLabels:{enums:["include","exclude"]},arrowShape:{enums:["tee","triangle","triangle-tee","circle-triangle","triangle-cross","triangle-backcurve","vee","square","circle","diamond","chevron","none"]},arrowFill:{enums:["filled","hollow"]},arrowWidth:{number:!0,units:"%|px|em",implicitUnits:"px",enums:["match-line"]},display:{enums:["element","none"]},visibility:{enums:["hidden","visible"]},zCompoundDepth:{enums:["bottom","orphan","auto","top"]},zIndexCompare:{enums:["auto","manual"]},valign:{enums:["top","center","bottom"]},halign:{enums:["left","center","right"]},justification:{enums:["left","center","right","auto"]},text:{string:!0},data:{mapping:!0,regex:i("data")},layoutData:{mapping:!0,regex:i("layoutData")},scratch:{mapping:!0,regex:i("scratch")},mapData:{mapping:!0,regex:s("mapData")},mapLayoutData:{mapping:!0,regex:s("mapLayoutData")},mapScratch:{mapping:!0,regex:s("mapScratch")},fn:{mapping:!0,fn:!0},url:{regexes:o,singleRegexMatchValue:!0},urls:{regexes:o,singleRegexMatchValue:!0,multiple:!0},propList:{propList:!0},angle:{number:!0,units:"deg|rad",implicitUnits:"rad"},textRotation:{number:!0,units:"deg|rad",implicitUnits:"rad",enums:["none","autorotate"]},polygonPointList:{number:!0,multiple:!0,evenMultiple:!0,min:-1,max:1,unitless:!0},edgeDistances:{enums:["intersection","node-position","endpoints"]},edgeEndpoint:{number:!0,multiple:!0,units:"%|px|em|deg|rad",implicitUnits:"px",enums:["inside-to-node","outside-to-node","outside-to-node-or-label","outside-to-line","outside-to-line-or-label"],singleEnum:!0,validate:function($,U){switch($.length){case 2:return U[0]!=="deg"&&U[0]!=="rad"&&U[1]!=="deg"&&U[1]!=="rad";case 1:return we($[0])||U[0]==="deg"||U[0]==="rad";default:return!1}}},easing:{regexes:["^(spring)\\s*\\(\\s*("+t+")\\s*,\\s*("+t+")\\s*\\)$","^(cubic-bezier)\\s*\\(\\s*("+t+")\\s*,\\s*("+t+")\\s*,\\s*("+t+")\\s*,\\s*("+t+")\\s*\\)$"],enums:["linear","ease","ease-in","ease-out","ease-in-out","ease-in-sine","ease-out-sine","ease-in-out-sine","ease-in-quad","ease-out-quad","ease-in-out-quad","ease-in-cubic","ease-out-cubic","ease-in-out-cubic","ease-in-quart","ease-out-quart","ease-in-out-quart","ease-in-quint","ease-out-quint","ease-in-out-quint","ease-in-expo","ease-out-expo","ease-in-out-expo","ease-in-circ","ease-out-circ","ease-in-out-circ"]},gradientDirection:{enums:["to-bottom","to-top","to-left","to-right","to-bottom-right","to-bottom-left","to-top-right","to-top-left","to-right-bottom","to-left-bottom","to-right-top","to-left-top"]},boundsExpansion:{number:!0,multiple:!0,min:0,validate:function($){var U=$.length;return U===1||U===2||U===4}}};var u={zeroNonZero:function($,U){return($==null||U==null)&&$!==U||$==0&&U!=0?!0:$!=0&&U==0},any:function($,U){return $!=U},emptyNonEmpty:function($,U){var j=Hr($),ne=Hr(U);return j&&!ne||!j&&ne}},l=nt.types,f=[{name:"label",type:l.text,triggersBounds:u.any,triggersZOrder:u.emptyNonEmpty},{name:"text-rotation",type:l.textRotation,triggersBounds:u.any},{name:"text-margin-x",type:l.bidirectionalSize,triggersBounds:u.any},{name:"text-margin-y",type:l.bidirectionalSize,triggersBounds:u.any}],c=[{name:"source-label",type:l.text,triggersBounds:u.any},{name:"source-text-rotation",type:l.textRotation,triggersBounds:u.any},{name:"source-text-margin-x",type:l.bidirectionalSize,triggersBounds:u.any},{name:"source-text-margin-y",type:l.bidirectionalSize,triggersBounds:u.any},{name:"source-text-offset",type:l.size,triggersBounds:u.any}],h=[{name:"target-label",type:l.text,triggersBounds:u.any},{name:"target-text-rotation",type:l.textRotation,triggersBounds:u.any},{name:"target-text-margin-x",type:l.bidirectionalSize,triggersBounds:u.any},{name:"target-text-margin-y",type:l.bidirectionalSize,triggersBounds:u.any},{name:"target-text-offset",type:l.size,triggersBounds:u.any}],d=[{name:"font-family",type:l.fontFamily,triggersBounds:u.any},{name:"font-style",type:l.fontStyle,triggersBounds:u.any},{name:"font-weight",type:l.fontWeight,triggersBounds:u.any},{name:"font-size",type:l.size,triggersBounds:u.any},{name:"text-transform",type:l.textTransform,triggersBounds:u.any},{name:"text-wrap",type:l.textWrap,triggersBounds:u.any},{name:"text-overflow-wrap",type:l.textOverflowWrap,triggersBounds:u.any},{name:"text-max-width",type:l.size,triggersBounds:u.any},{name:"text-outline-width",type:l.size,triggersBounds:u.any},{name:"line-height",type:l.positiveNumber,triggersBounds:u.any}],v=[{name:"text-valign",type:l.valign,triggersBounds:u.any},{name:"text-halign",type:l.halign,triggersBounds:u.any},{name:"color",type:l.color},{name:"text-outline-color",type:l.color},{name:"text-outline-opacity",type:l.zeroOneNumber},{name:"text-background-color",type:l.color},{name:"text-background-opacity",type:l.zeroOneNumber},{name:"text-background-padding",type:l.size,triggersBounds:u.any},{name:"text-border-opacity",type:l.zeroOneNumber},{name:"text-border-color",type:l.color},{name:"text-border-width",type:l.size,triggersBounds:u.any},{name:"text-border-style",type:l.borderStyle,triggersBounds:u.any},{name:"text-background-shape",type:l.textBackgroundShape,triggersBounds:u.any},{name:"text-justification",type:l.justification},{name:"box-select-labels",type:l.bool,triggersBounds:u.any}],g=[{name:"events",type:l.bool,triggersZOrder:u.any},{name:"text-events",type:l.bool,triggersZOrder:u.any},{name:"box-selection",type:l.boxSelection,triggersZOrder:u.any}],p=[{name:"display",type:l.display,triggersZOrder:u.any,triggersBounds:u.any,triggersBoundsOfConnectedEdges:u.any,triggersBoundsOfParallelEdges:function($,U,j){return $===U?!1:j.pstyle("curve-style").value==="bezier"}},{name:"visibility",type:l.visibility,triggersZOrder:u.any},{name:"opacity",type:l.zeroOneNumber,triggersZOrder:u.zeroNonZero},{name:"text-opacity",type:l.zeroOneNumber},{name:"min-zoomed-font-size",type:l.size},{name:"z-compound-depth",type:l.zCompoundDepth,triggersZOrder:u.any},{name:"z-index-compare",type:l.zIndexCompare,triggersZOrder:u.any},{name:"z-index",type:l.number,triggersZOrder:u.any}],y=[{name:"overlay-padding",type:l.size,triggersBounds:u.any},{name:"overlay-color",type:l.color},{name:"overlay-opacity",type:l.zeroOneNumber,triggersBounds:u.zeroNonZero},{name:"overlay-shape",type:l.overlayShape,triggersBounds:u.any},{name:"overlay-corner-radius",type:l.cornerRadius}],m=[{name:"underlay-padding",type:l.size,triggersBounds:u.any},{name:"underlay-color",type:l.color},{name:"underlay-opacity",type:l.zeroOneNumber,triggersBounds:u.zeroNonZero},{name:"underlay-shape",type:l.overlayShape,triggersBounds:u.any},{name:"underlay-corner-radius",type:l.cornerRadius}],b=[{name:"transition-property",type:l.propList},{name:"transition-duration",type:l.time},{name:"transition-delay",type:l.time},{name:"transition-timing-function",type:l.easing}],E=function($,U){return U.value==="label"?-$.poolIndex():U.pfValue},T=[{name:"height",type:l.nodeSize,triggersBounds:u.any,hashOverride:E},{name:"width",type:l.nodeSize,triggersBounds:u.any,hashOverride:E},{name:"shape",type:l.nodeShape,triggersBounds:u.any},{name:"shape-polygon-points",type:l.polygonPointList,triggersBounds:u.any},{name:"corner-radius",type:l.cornerRadius},{name:"background-color",type:l.color},{name:"background-fill",type:l.fill},{name:"background-opacity",type:l.zeroOneNumber},{name:"background-blacken",type:l.nOneOneNumber},{name:"background-gradient-stop-colors",type:l.colors},{name:"background-gradient-stop-positions",type:l.percentages},{name:"background-gradient-direction",type:l.gradientDirection},{name:"padding",type:l.sizeMaybePercent,triggersBounds:u.any},{name:"padding-relative-to",type:l.paddingRelativeTo,triggersBounds:u.any},{name:"bounds-expansion",type:l.boundsExpansion,triggersBounds:u.any}],I=[{name:"border-color",type:l.color},{name:"border-opacity",type:l.zeroOneNumber},{name:"border-width",type:l.size,triggersBounds:u.any},{name:"border-style",type:l.borderStyle},{name:"border-cap",type:l.lineCap},{name:"border-join",type:l.lineJoin},{name:"border-dash-pattern",type:l.numbers},{name:"border-dash-offset",type:l.number},{name:"border-position",type:l.linePosition}],w=[{name:"outline-color",type:l.color},{name:"outline-opacity",type:l.zeroOneNumber},{name:"outline-width",type:l.size,triggersBounds:u.any},{name:"outline-style",type:l.borderStyle},{name:"outline-offset",type:l.size,triggersBounds:u.any}],x=[{name:"background-image",type:l.urls},{name:"background-image-crossorigin",type:l.bgCrossOrigin},{name:"background-image-opacity",type:l.zeroOneNumbers},{name:"background-image-containment",type:l.bgContainment},{name:"background-image-smoothing",type:l.bools},{name:"background-position-x",type:l.bgPos},{name:"background-position-y",type:l.bgPos},{name:"background-width-relative-to",type:l.bgRelativeTo},{name:"background-height-relative-to",type:l.bgRelativeTo},{name:"background-repeat",type:l.bgRepeat},{name:"background-fit",type:l.bgFit},{name:"background-clip",type:l.bgClip},{name:"background-width",type:l.bgWH},{name:"background-height",type:l.bgWH},{name:"background-offset-x",type:l.bgPos},{name:"background-offset-y",type:l.bgPos}],C=[{name:"position",type:l.position,triggersBounds:u.any},{name:"compound-sizing-wrt-labels",type:l.compoundIncludeLabels,triggersBounds:u.any},{name:"min-width",type:l.size,triggersBounds:u.any},{name:"min-width-bias-left",type:l.sizeMaybePercent,triggersBounds:u.any},{name:"min-width-bias-right",type:l.sizeMaybePercent,triggersBounds:u.any},{name:"min-height",type:l.size,triggersBounds:u.any},{name:"min-height-bias-top",type:l.sizeMaybePercent,triggersBounds:u.any},{name:"min-height-bias-bottom",type:l.sizeMaybePercent,triggersBounds:u.any}],S=[{name:"line-style",type:l.lineStyle},{name:"line-color",type:l.color},{name:"line-fill",type:l.fill},{name:"line-cap",type:l.lineCap},{name:"line-opacity",type:l.zeroOneNumber},{name:"line-dash-pattern",type:l.numbers},{name:"line-dash-offset",type:l.number},{name:"line-outline-width",type:l.size},{name:"line-outline-color",type:l.color},{name:"line-gradient-stop-colors",type:l.colors},{name:"line-gradient-stop-positions",type:l.percentages},{name:"curve-style",type:l.curveStyle,triggersBounds:u.any,triggersBoundsOfParallelEdges:function($,U){return $===U?!1:$==="bezier"||U==="bezier"}},{name:"haystack-radius",type:l.zeroOneNumber,triggersBounds:u.any},{name:"source-endpoint",type:l.edgeEndpoint,triggersBounds:u.any},{name:"target-endpoint",type:l.edgeEndpoint,triggersBounds:u.any},{name:"control-point-step-size",type:l.size,triggersBounds:u.any},{name:"control-point-distances",type:l.bidirectionalSizes,triggersBounds:u.any},{name:"control-point-weights",type:l.numbers,triggersBounds:u.any},{name:"segment-distances",type:l.bidirectionalSizes,triggersBounds:u.any},{name:"segment-weights",type:l.numbers,triggersBounds:u.any},{name:"segment-radii",type:l.numbers,triggersBounds:u.any},{name:"radius-type",type:l.radiusType,triggersBounds:u.any},{name:"taxi-turn",type:l.bidirectionalSizeMaybePercent,triggersBounds:u.any},{name:"taxi-turn-min-distance",type:l.size,triggersBounds:u.any},{name:"taxi-direction",type:l.axisDirection,triggersBounds:u.any},{name:"taxi-radius",type:l.number,triggersBounds:u.any},{name:"edge-distances",type:l.edgeDistances,triggersBounds:u.any},{name:"arrow-scale",type:l.positiveNumber,triggersBounds:u.any},{name:"loop-direction",type:l.angle,triggersBounds:u.any},{name:"loop-sweep",type:l.angle,triggersBounds:u.any},{name:"source-distance-from-node",type:l.size,triggersBounds:u.any},{name:"target-distance-from-node",type:l.size,triggersBounds:u.any}],A=[{name:"ghost",type:l.bool,triggersBounds:u.any},{name:"ghost-offset-x",type:l.bidirectionalSize,triggersBounds:u.any},{name:"ghost-offset-y",type:l.bidirectionalSize,triggersBounds:u.any},{name:"ghost-opacity",type:l.zeroOneNumber}],R=[{name:"selection-box-color",type:l.color},{name:"selection-box-opacity",type:l.zeroOneNumber},{name:"selection-box-border-color",type:l.color},{name:"selection-box-border-width",type:l.size},{name:"active-bg-color",type:l.color},{name:"active-bg-opacity",type:l.zeroOneNumber},{name:"active-bg-size",type:l.size},{name:"outside-texture-bg-color",type:l.color},{name:"outside-texture-bg-opacity",type:l.zeroOneNumber}],D=[];nt.pieBackgroundN=16,D.push({name:"pie-size",type:l.sizeMaybePercent}),D.push({name:"pie-hole",type:l.sizeMaybePercent}),D.push({name:"pie-start-angle",type:l.angle});for(var _=1;_<=nt.pieBackgroundN;_++)D.push({name:"pie-"+_+"-background-color",type:l.color}),D.push({name:"pie-"+_+"-background-size",type:l.percent}),D.push({name:"pie-"+_+"-background-opacity",type:l.zeroOneNumber});var M=[];nt.stripeBackgroundN=16,M.push({name:"stripe-size",type:l.sizeMaybePercent}),M.push({name:"stripe-direction",type:l.axisDirectionPrimary});for(var k=1;k<=nt.stripeBackgroundN;k++)M.push({name:"stripe-"+k+"-background-color",type:l.color}),M.push({name:"stripe-"+k+"-background-size",type:l.percent}),M.push({name:"stripe-"+k+"-background-opacity",type:l.zeroOneNumber});var O=[],P=nt.arrowPrefixes=["source","mid-source","target","mid-target"];[{name:"arrow-shape",type:l.arrowShape,triggersBounds:u.any},{name:"arrow-color",type:l.color},{name:"arrow-fill",type:l.arrowFill},{name:"arrow-width",type:l.arrowWidth}].forEach(function(G){P.forEach(function($){var U=$+"-"+G.name,j=G.type,ne=G.triggersBounds;O.push({name:U,type:j,triggersBounds:ne})})},{});var B=nt.properties=[].concat(g,b,p,y,m,A,v,d,f,c,h,T,I,w,x,D,M,C,S,O,R),F=nt.propertyGroups={behavior:g,transition:b,visibility:p,overlay:y,underlay:m,ghost:A,commonLabel:v,labelDimensions:d,mainLabel:f,sourceLabel:c,targetLabel:h,nodeBody:T,nodeBorder:I,nodeOutline:w,backgroundImage:x,pie:D,stripe:M,compound:C,edgeLine:S,edgeArrow:O,core:R},N=nt.propertyGroupNames={},q=nt.propertyGroupKeys=Object.keys(F);q.forEach(function(G){N[G]=F[G].map(function($){return $.name}),F[G].forEach(function($){return $.groupKey=G})});var V=nt.aliases=[{name:"content",pointsTo:"label"},{name:"control-point-distance",pointsTo:"control-point-distances"},{name:"control-point-weight",pointsTo:"control-point-weights"},{name:"segment-distance",pointsTo:"segment-distances"},{name:"segment-weight",pointsTo:"segment-weights"},{name:"segment-radius",pointsTo:"segment-radii"},{name:"edge-text-rotation",pointsTo:"text-rotation"},{name:"padding-left",pointsTo:"padding"},{name:"padding-right",pointsTo:"padding"},{name:"padding-top",pointsTo:"padding"},{name:"padding-bottom",pointsTo:"padding"}];nt.propertyNames=B.map(function(G){return G.name});for(var Y=0;Y<B.length;Y++){var H=B[Y];B[H.name]=H}for(var Z=0;Z<V.length;Z++){var ee=V[Z],ie=B[ee.pointsTo],J={name:ee.name,alias:!0,pointsTo:ie};B.push(J),B[ee.name]=J}})();nt.getDefaultProperty=function(t){return this.getDefaultProperties()[t]};nt.getDefaultProperties=function(){var t=this._private;if(t.defaultProperties!=null)return t.defaultProperties;for(var e=xe({"selection-box-color":"#ddd","selection-box-opacity":.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"active-bg-color":"black","active-bg-opacity":.15,"active-bg-size":30,"outside-texture-bg-color":"#000","outside-texture-bg-opacity":.125,events:"yes","text-events":"no","text-valign":"top","text-halign":"center","text-justification":"auto","line-height":1,color:"#000","box-selection":"contain","text-outline-color":"#000","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,"text-decoration":"none","text-transform":"none","text-wrap":"none","text-overflow-wrap":"whitespace","text-max-width":9999,"text-background-color":"#000","text-background-opacity":0,"text-background-shape":"rectangle","text-background-padding":0,"text-border-opacity":0,"text-border-width":0,"text-border-style":"solid","text-border-color":"#000","font-family":"Helvetica Neue, Helvetica, sans-serif","font-style":"normal","font-weight":"normal","font-size":16,"min-zoomed-font-size":0,"text-rotation":"none","source-text-rotation":"none","target-text-rotation":"none",visibility:"visible",display:"element",opacity:1,"z-compound-depth":"auto","z-index-compare":"auto","z-index":0,label:"","text-margin-x":0,"text-margin-y":0,"source-label":"","source-text-offset":0,"source-text-margin-x":0,"source-text-margin-y":0,"target-label":"","target-text-offset":0,"target-text-margin-x":0,"target-text-margin-y":0,"overlay-opacity":0,"overlay-color":"#000","overlay-padding":10,"overlay-shape":"round-rectangle","overlay-corner-radius":"auto","underlay-opacity":0,"underlay-color":"#000","underlay-padding":10,"underlay-shape":"round-rectangle","underlay-corner-radius":"auto","transition-property":"none","transition-duration":0,"transition-delay":0,"transition-timing-function":"linear","box-select-labels":"no","background-blacken":0,"background-color":"#999","background-fill":"solid","background-opacity":1,"background-image":"none","background-image-crossorigin":"anonymous","background-image-opacity":1,"background-image-containment":"inside","background-image-smoothing":"yes","background-position-x":"50%","background-position-y":"50%","background-offset-x":0,"background-offset-y":0,"background-width-relative-to":"include-padding","background-height-relative-to":"include-padding","background-repeat":"no-repeat","background-fit":"none","background-clip":"node","background-width":"auto","background-height":"auto","border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid","border-dash-pattern":[4,2],"border-dash-offset":0,"border-cap":"butt","border-join":"miter","border-position":"center","outline-color":"#999","outline-opacity":1,"outline-width":0,"outline-offset":0,"outline-style":"solid",height:30,width:30,shape:"ellipse","shape-polygon-points":"-1, -1,   1, -1,   1, 1,   -1, 1","corner-radius":"auto","bounds-expansion":0,"background-gradient-direction":"to-bottom","background-gradient-stop-colors":"#999","background-gradient-stop-positions":"0%",ghost:"no","ghost-offset-y":0,"ghost-offset-x":0,"ghost-opacity":0,padding:0,"padding-relative-to":"width",position:"origin","compound-sizing-wrt-labels":"include","min-width":0,"min-width-bias-left":0,"min-width-bias-right":0,"min-height":0,"min-height-bias-top":0,"min-height-bias-bottom":0},{"pie-size":"100%","pie-hole":0,"pie-start-angle":"0deg"},[{name:"pie-{{i}}-background-color",value:"black"},{name:"pie-{{i}}-background-size",value:"0%"},{name:"pie-{{i}}-background-opacity",value:1}].reduce(function(u,l){for(var f=1;f<=nt.pieBackgroundN;f++){var c=l.name.replace("{{i}}",f),h=l.value;u[c]=h}return u},{}),{"stripe-size":"100%","stripe-direction":"horizontal"},[{name:"stripe-{{i}}-background-color",value:"black"},{name:"stripe-{{i}}-background-size",value:"0%"},{name:"stripe-{{i}}-background-opacity",value:1}].reduce(function(u,l){for(var f=1;f<=nt.stripeBackgroundN;f++){var c=l.name.replace("{{i}}",f),h=l.value;u[c]=h}return u},{}),{"line-style":"solid","line-color":"#999","line-fill":"solid","line-cap":"butt","line-opacity":1,"line-outline-width":0,"line-outline-color":"#000","line-gradient-stop-colors":"#999","line-gradient-stop-positions":"0%","control-point-step-size":40,"control-point-weights":.5,"segment-weights":.5,"segment-distances":20,"segment-radii":15,"radius-type":"arc-radius","taxi-turn":"50%","taxi-radius":15,"taxi-turn-min-distance":10,"taxi-direction":"auto","edge-distances":"intersection","curve-style":"haystack","haystack-radius":0,"arrow-scale":1,"loop-direction":"-45deg","loop-sweep":"-90deg","source-distance-from-node":0,"target-distance-from-node":0,"source-endpoint":"outside-to-node","target-endpoint":"outside-to-node","line-dash-pattern":[6,3],"line-dash-offset":0},[{name:"arrow-shape",value:"none"},{name:"arrow-color",value:"#999"},{name:"arrow-fill",value:"filled"},{name:"arrow-width",value:1}].reduce(function(u,l){return nt.arrowPrefixes.forEach(function(f){var c=f+"-"+l.name,h=l.value;u[c]=h}),u},{})),r={},n=0;n<this.properties.length;n++){var a=this.properties[n];if(!a.pointsTo){var i=a.name,s=e[i],o=this.parse(i,s);r[i]=o}}return t.defaultProperties=r,t.defaultProperties};nt.addDefaultStylesheet=function(){this.selector(":parent").css({shape:"rectangle",padding:10,"background-color":"#eee","border-color":"#ccc","border-width":1}).selector("edge").css({width:3}).selector(":loop").css({"curve-style":"bezier"}).selector("edge:compound").css({"curve-style":"bezier","source-endpoint":"outside-to-line","target-endpoint":"outside-to-line"}).selector(":selected").css({"background-color":"#0169D9","line-color":"#0169D9","source-arrow-color":"#0169D9","target-arrow-color":"#0169D9","mid-source-arrow-color":"#0169D9","mid-target-arrow-color":"#0169D9"}).selector(":parent:selected").css({"background-color":"#CCE1F9","border-color":"#aec8e5"}).selector(":active").css({"overlay-color":"black","overlay-padding":10,"overlay-opacity":.25}),this.defaultLength=this.length};var _s={};_s.parse=function(t,e,r,n){var a=this;if(Qe(e))return a.parseImplWarn(t,e,r,n);var i=n==="mapping"||n===!0||n===!1||n==null?"dontcare":n,s=r?"t":"f",o=""+e,u=px(t,o,s,i),l=a.propCache=a.propCache||[],f;return(f=l[u])||(f=l[u]=a.parseImplWarn(t,e,r,n)),(r||n==="mapping")&&(f=nr(f),f&&(f.value=nr(f.value))),f};_s.parseImplWarn=function(t,e,r,n){var a=this.parseImpl(t,e,r,n);return!a&&e!=null&&Ve("The style property `".concat(t,": ").concat(e,"` is invalid")),a&&(a.name==="width"||a.name==="height")&&e==="label"&&Ve("The style value of `label` is deprecated for `"+a.name+"`"),a};_s.parseImpl=function(t,e,r,n){var a=this;t=Cv(t);var i=a.properties[t],s=e,o=a.types;if(!i||e===void 0)return null;i.alias&&(i=i.pointsTo,t=i.name);var u=we(e);u&&(e=e.trim());var l=i.type;if(!l)return null;if(r&&(e===""||e===null))return{name:t,value:e,bypass:!0,deleteBypass:!0};if(Qe(e))return{name:t,value:e,strValue:"fn",mapped:o.fn,bypass:r};var f,c;if(!(!u||n||e.length<7||e[1]!=="a")){if(e.length>=7&&e[0]==="d"&&(f=new RegExp(o.data.regex).exec(e))){if(r)return!1;var h=o.data;return{name:t,value:f,strValue:""+e,mapped:h,field:f[1],bypass:r}}else if(e.length>=10&&e[0]==="m"&&(c=new RegExp(o.mapData.regex).exec(e))){if(r||l.multiple)return!1;var d=o.mapData;if(!(l.color||l.number))return!1;var v=this.parse(t,c[4]);if(!v||v.mapped)return!1;var g=this.parse(t,c[5]);if(!g||g.mapped)return!1;if(v.pfValue===g.pfValue||v.strValue===g.strValue)return Ve("`"+t+": "+e+"` is not a valid mapper because the output range is zero; converting to `"+t+": "+v.strValue+"`"),this.parse(t,v.strValue);if(l.color){var p=v.value,y=g.value,m=p[0]===y[0]&&p[1]===y[1]&&p[2]===y[2]&&(p[3]===y[3]||(p[3]==null||p[3]===1)&&(y[3]==null||y[3]===1));if(m)return!1}return{name:t,value:c,strValue:""+e,mapped:d,field:c[1],fieldMin:parseFloat(c[2]),fieldMax:parseFloat(c[3]),valueMin:v.value,valueMax:g.value,bypass:r}}}if(l.multiple&&n!=="multiple"){var b;if(u?b=e.split(/\s+/):He(e)?b=e:b=[e],l.evenMultiple&&b.length%2!==0)return null;for(var E=[],T=[],I=[],w="",x=!1,C=0;C<b.length;C++){var S=a.parse(t,b[C],r,"multiple");x=x||we(S.value),E.push(S.value),I.push(S.pfValue!=null?S.pfValue:S.value),T.push(S.units),w+=(C>0?" ":"")+S.strValue}return l.validate&&!l.validate(E,T)?null:l.singleEnum&&x?E.length===1&&we(E[0])?{name:t,value:E[0],strValue:E[0],bypass:r}:null:{name:t,value:E,pfValue:I,strValue:w,bypass:r,units:T}}var A=function(){for(var J=0;J<l.enums.length;J++){var G=l.enums[J];if(G===e)return{name:t,value:e,strValue:""+e,bypass:r}}return null};if(l.number){var R,D="px";if(l.units&&(R=l.units),l.implicitUnits&&(D=l.implicitUnits),!l.unitless)if(u){var _="px|em"+(l.allowPercent?"|\\%":"");R&&(_=R);var M=e.match("^("+lt+")("+_+")?$");M&&(e=M[1],R=M[2]||D)}else(!R||l.implicitUnits)&&(R=D);if(e=parseFloat(e),isNaN(e)&&l.enums===void 0)return null;if(isNaN(e)&&l.enums!==void 0)return e=s,A();if(l.integer&&!qR(e)||l.min!==void 0&&(e<l.min||l.strictMin&&e===l.min)||l.max!==void 0&&(e>l.max||l.strictMax&&e===l.max))return null;var k={name:t,value:e,strValue:""+e+(R||""),units:R,bypass:r};return l.unitless||R!=="px"&&R!=="em"?k.pfValue=e:k.pfValue=R==="px"||!R?e:this.getEmSizeInPixels()*e,(R==="ms"||R==="s")&&(k.pfValue=R==="ms"?e:1e3*e),(R==="deg"||R==="rad")&&(k.pfValue=R==="rad"?e:KD(e)),R==="%"&&(k.pfValue=e/100),k}else if(l.propList){var O=[],P=""+e;if(P!=="none"){for(var B=P.split(/\s*,\s*|\s+/),F=0;F<B.length;F++){var N=B[F].trim();a.properties[N]?O.push(N):Ve("`"+N+"` is not a valid property name")}if(O.length===0)return null}return{name:t,value:O,strValue:O.length===0?"none":O.join(" "),bypass:r}}else if(l.color){var q=lx(e);return q?{name:t,value:q,pfValue:q,strValue:"rgb("+q[0]+","+q[1]+","+q[2]+")",bypass:r}:null}else if(l.regex||l.regexes){if(l.enums){var V=A();if(V)return V}for(var Y=l.regexes?l.regexes:[l.regex],H=0;H<Y.length;H++){var Z=new RegExp(Y[H]),ee=Z.exec(e);if(ee)return{name:t,value:l.singleRegexMatchValue?ee[1]:ee,strValue:""+e,bypass:r}}return null}else return l.string?{name:t,value:""+e,strValue:""+e,bypass:r}:l.enums?A():null};var vt=function(e){if(!(this instanceof vt))return new vt(e);if(!Tv(e)){je("A style must have a core reference");return}this._private={cy:e,coreStyle:{}},this.length=0,this.resetToDefault()},Tt=vt.prototype;Tt.instanceString=function(){return"style"};Tt.clear=function(){for(var t=this._private,e=t.cy,r=e.elements(),n=0;n<this.length;n++)this[n]=void 0;return this.length=0,t.contextStyles={},t.propDiffs={},this.cleanElements(r,!0),r.forEach(function(a){var i=a[0]._private;i.styleDirty=!0,i.appliedInitStyle=!1}),this};Tt.resetToDefault=function(){return this.clear(),this.addDefaultStylesheet(),this};Tt.core=function(t){return this._private.coreStyle[t]||this.getDefaultProperty(t)};Tt.selector=function(t){var e=t==="core"?null:new Xr(t),r=this.length++;return this[r]={selector:e,properties:[],mappedProperties:[],index:r},this};Tt.css=function(){var t=this,e=arguments;if(e.length===1)for(var r=e[0],n=0;n<t.properties.length;n++){var a=t.properties[n],i=r[a.name];i===void 0&&(i=r[ps(a.name)]),i!==void 0&&this.cssRule(a.name,i)}else e.length===2&&this.cssRule(e[0],e[1]);return this};Tt.style=Tt.css;Tt.cssRule=function(t,e){var r=this.parse(t,e);if(r){var n=this.length-1;this[n].properties.push(r),this[n].properties[r.name]=r,r.name.match(/pie-(\d+)-background-size/)&&r.value&&(this._private.hasPie=!0),r.name.match(/stripe-(\d+)-background-size/)&&r.value&&(this._private.hasStripe=!0),r.mapped&&this[n].mappedProperties.push(r);var a=!this[n].selector;a&&(this._private.coreStyle[r.name]=r)}return this};Tt.append=function(t){return sx(t)?t.appendToStyle(this):He(t)?this.appendFromJson(t):we(t)&&this.appendFromString(t),this};vt.fromJson=function(t,e){var r=new vt(t);return r.fromJson(e),r};vt.fromString=function(t,e){return new vt(t).fromString(e)};[gt,ni,qv,ir,Ds,Gv,nt,_s].forEach(function(t){xe(Tt,t)});vt.types=Tt.types;vt.properties=Tt.properties;vt.propertyGroups=Tt.propertyGroups;vt.propertyGroupNames=Tt.propertyGroupNames;vt.propertyGroupKeys=Tt.propertyGroupKeys;var JM={style:function(e){if(e){var r=this.setStyle(e);r.update()}return this._private.style},setStyle:function(e){var r=this._private;return sx(e)?r.style=e.generateStyle(this):He(e)?r.style=vt.fromJson(this,e):we(e)?r.style=vt.fromString(this,e):r.style=vt(this),r.style},updateStyle:function(){this.mutableElements().updateStyle()}},e2="single",Cn={autolock:function(e){if(e!==void 0)this._private.autolock=!!e;else return this._private.autolock;return this},autoungrabify:function(e){if(e!==void 0)this._private.autoungrabify=!!e;else return this._private.autoungrabify;return this},autounselectify:function(e){if(e!==void 0)this._private.autounselectify=!!e;else return this._private.autounselectify;return this},selectionType:function(e){var r=this._private;if(r.selectionType==null&&(r.selectionType=e2),e!==void 0)(e==="additive"||e==="single")&&(r.selectionType=e);else return r.selectionType;return this},panningEnabled:function(e){if(e!==void 0)this._private.panningEnabled=!!e;else return this._private.panningEnabled;return this},userPanningEnabled:function(e){if(e!==void 0)this._private.userPanningEnabled=!!e;else return this._private.userPanningEnabled;return this},zoomingEnabled:function(e){if(e!==void 0)this._private.zoomingEnabled=!!e;else return this._private.zoomingEnabled;return this},userZoomingEnabled:function(e){if(e!==void 0)this._private.userZoomingEnabled=!!e;else return this._private.userZoomingEnabled;return this},boxSelectionEnabled:function(e){if(e!==void 0)this._private.boxSelectionEnabled=!!e;else return this._private.boxSelectionEnabled;return this},pan:function(){var e=arguments,r=this._private.pan,n,a,i,s,o;switch(e.length){case 0:return r;case 1:if(we(e[0]))return n=e[0],r[n];if(qe(e[0])){if(!this._private.panningEnabled)return this;i=e[0],s=i.x,o=i.y,ae(s)&&(r.x=s),ae(o)&&(r.y=o),this.emit("pan viewport")}break;case 2:if(!this._private.panningEnabled)return this;n=e[0],a=e[1],(n==="x"||n==="y")&&ae(a)&&(r[n]=a),this.emit("pan viewport");break}return this.notify("viewport"),this},panBy:function(e,r){var n=arguments,a=this._private.pan,i,s,o,u,l;if(!this._private.panningEnabled)return this;switch(n.length){case 1:qe(e)&&(o=n[0],u=o.x,l=o.y,ae(u)&&(a.x+=u),ae(l)&&(a.y+=l),this.emit("pan viewport"));break;case 2:i=e,s=r,(i==="x"||i==="y")&&ae(s)&&(a[i]+=s),this.emit("pan viewport");break}return this.notify("viewport"),this},gc:function(){this.notify("gc")},fit:function(e,r){var n=this.getFitViewport(e,r);if(n){var a=this._private;a.zoom=n.zoom,a.pan=n.pan,this.emit("pan zoom viewport"),this.notify("viewport")}return this},getFitViewport:function(e,r){if(ae(e)&&r===void 0&&(r=e,e=void 0),!(!this._private.panningEnabled||!this._private.zoomingEnabled)){var n;if(we(e)){var a=e;e=this.$(a)}else if($R(e)){var i=e;n={x1:i.x1,y1:i.y1,x2:i.x2,y2:i.y2},n.w=n.x2-n.x1,n.h=n.y2-n.y1}else Ft(e)||(e=this.mutableElements());if(!(Ft(e)&&e.empty())){n=n||e.boundingBox();var s=this.width(),o=this.height(),u;if(r=ae(r)?r:0,!isNaN(s)&&!isNaN(o)&&s>0&&o>0&&!isNaN(n.w)&&!isNaN(n.h)&&n.w>0&&n.h>0){u=Math.min((s-2*r)/n.w,(o-2*r)/n.h),u=u>this._private.maxZoom?this._private.maxZoom:u,u=u<this._private.minZoom?this._private.minZoom:u;var l={x:(s-u*(n.x1+n.x2))/2,y:(o-u*(n.y1+n.y2))/2};return{zoom:u,pan:l}}}}},zoomRange:function(e,r){var n=this._private;if(r==null){var a=e;e=a.min,r=a.max}return ae(e)&&ae(r)&&e<=r?(n.minZoom=e,n.maxZoom=r):ae(e)&&r===void 0&&e<=n.maxZoom?n.minZoom=e:ae(r)&&e===void 0&&r>=n.minZoom&&(n.maxZoom=r),this},minZoom:function(e){return e===void 0?this._private.minZoom:this.zoomRange({min:e})},maxZoom:function(e){return e===void 0?this._private.maxZoom:this.zoomRange({max:e})},getZoomedViewport:function(e){var r=this._private,n=r.pan,a=r.zoom,i,s,o=!1;if(r.zoomingEnabled||(o=!0),ae(e)?s=e:qe(e)&&(s=e.level,e.position!=null?i=bs(e.position,a,n):e.renderedPosition!=null&&(i=e.renderedPosition),i!=null&&!r.panningEnabled&&(o=!0)),s=s>r.maxZoom?r.maxZoom:s,s=s<r.minZoom?r.minZoom:s,o||!ae(s)||s===a||i!=null&&(!ae(i.x)||!ae(i.y)))return null;if(i!=null){var u=n,l=a,f=s,c={x:-f/l*(i.x-u.x)+i.x,y:-f/l*(i.y-u.y)+i.y};return{zoomed:!0,panned:!0,zoom:f,pan:c}}else return{zoomed:!0,panned:!1,zoom:s,pan:n}},zoom:function(e){if(e===void 0)return this._private.zoom;var r=this.getZoomedViewport(e),n=this._private;return r==null||!r.zoomed?this:(n.zoom=r.zoom,r.panned&&(n.pan.x=r.pan.x,n.pan.y=r.pan.y),this.emit("zoom"+(r.panned?" pan":"")+" viewport"),this.notify("viewport"),this)},viewport:function(e){var r=this._private,n=!0,a=!0,i=[],s=!1,o=!1;if(!e)return this;if(ae(e.zoom)||(n=!1),qe(e.pan)||(a=!1),!n&&!a)return this;if(n){var u=e.zoom;u<r.minZoom||u>r.maxZoom||!r.zoomingEnabled?s=!0:(r.zoom=u,i.push("zoom"))}if(a&&(!s||!e.cancelOnFailedZoom)&&r.panningEnabled){var l=e.pan;ae(l.x)&&(r.pan.x=l.x,o=!1),ae(l.y)&&(r.pan.y=l.y,o=!1),o||i.push("pan")}return i.length>0&&(i.push("viewport"),this.emit(i.join(" ")),this.notify("viewport")),this},center:function(e){var r=this.getCenterPan(e);return r&&(this._private.pan=r,this.emit("pan viewport"),this.notify("viewport")),this},getCenterPan:function(e,r){if(this._private.panningEnabled){if(we(e)){var n=e;e=this.mutableElements().filter(n)}else Ft(e)||(e=this.mutableElements());if(e.length!==0){var a=e.boundingBox(),i=this.width(),s=this.height();r=r===void 0?this._private.zoom:r;var o={x:(i-r*(a.x1+a.x2))/2,y:(s-r*(a.y1+a.y2))/2};return o}}},reset:function(){return!this._private.panningEnabled||!this._private.zoomingEnabled?this:(this.viewport({pan:{x:0,y:0},zoom:1}),this)},invalidateSize:function(){this._private.sizeCache=null},size:function(){var e=this._private,r=e.container,n=this;return e.sizeCache=e.sizeCache||(r?function(){var a=n.window().getComputedStyle(r),i=function(o){return parseFloat(a.getPropertyValue(o))};return{width:r.clientWidth-i("padding-left")-i("padding-right"),height:r.clientHeight-i("padding-top")-i("padding-bottom")}}():{width:1,height:1})},width:function(){return this.size().width},height:function(){return this.size().height},extent:function(){var e=this._private.pan,r=this._private.zoom,n=this.renderedExtent(),a={x1:(n.x1-e.x)/r,x2:(n.x2-e.x)/r,y1:(n.y1-e.y)/r,y2:(n.y2-e.y)/r};return a.w=a.x2-a.x1,a.h=a.y2-a.y1,a},renderedExtent:function(){var e=this.width(),r=this.height();return{x1:0,y1:0,x2:e,y2:r,w:e,h:r}},multiClickDebounceTime:function(e){if(e)this._private.multiClickDebounceTime=e;else return this._private.multiClickDebounceTime;return this}};Cn.centre=Cn.center;Cn.autolockNodes=Cn.autolock;Cn.autoungrabifyNodes=Cn.autoungrabify;var Ha={data:$e.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeData:$e.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),scratch:$e.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:$e.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0})};Ha.attr=Ha.data;Ha.removeAttr=Ha.removeData;var Ya=function(e){var r=this;e=xe({},e);var n=e.container;n&&!Hi(n)&&Hi(n[0])&&(n=n[0]);var a=n?n._cyreg:null;a=a||{},a&&a.cy&&(a.cy.destroy(),a={});var i=a.readies=a.readies||[];n&&(n._cyreg=a),a.cy=r;var s=ut!==void 0&&n!==void 0&&!e.headless,o=e;o.layout=xe({name:s?"grid":"null"},o.layout),o.renderer=xe({name:s?"canvas":"null"},o.renderer);var u=function(v,g,p){return g!==void 0?g:p!==void 0?p:v},l=this._private={container:n,ready:!1,options:o,elements:new mt(this),listeners:[],aniEles:new mt(this),data:o.data||{},scratch:{},layout:null,renderer:null,destroyed:!1,notificationsEnabled:!0,minZoom:1e-50,maxZoom:1e50,zoomingEnabled:u(!0,o.zoomingEnabled),userZoomingEnabled:u(!0,o.userZoomingEnabled),panningEnabled:u(!0,o.panningEnabled),userPanningEnabled:u(!0,o.userPanningEnabled),boxSelectionEnabled:u(!0,o.boxSelectionEnabled),autolock:u(!1,o.autolock,o.autolockNodes),autoungrabify:u(!1,o.autoungrabify,o.autoungrabifyNodes),autounselectify:u(!1,o.autounselectify),styleEnabled:o.styleEnabled===void 0?s:o.styleEnabled,zoom:ae(o.zoom)?o.zoom:1,pan:{x:qe(o.pan)&&ae(o.pan.x)?o.pan.x:0,y:qe(o.pan)&&ae(o.pan.y)?o.pan.y:0},animation:{current:[],queue:[]},hasCompoundNodes:!1,multiClickDebounceTime:u(250,o.multiClickDebounceTime)};this.createEmitter(),this.selectionType(o.selectionType),this.zoomRange({min:o.minZoom,max:o.maxZoom});var f=function(v,g){var p=v.some(VR);if(p)return na.all(v).then(g);g(v)};l.styleEnabled&&r.setStyle([]);var c=xe({},o,o.renderer);r.initRenderer(c);var h=function(v,g,p){r.notifications(!1);var y=r.mutableElements();y.length>0&&y.remove(),v!=null&&(qe(v)||He(v))&&r.add(v),r.one("layoutready",function(b){r.notifications(!0),r.emit(b),r.one("load",g),r.emitAndNotify("load")}).one("layoutstop",function(){r.one("done",p),r.emit("done")});var m=xe({},r._private.options.layout);m.eles=r.elements(),r.layout(m).run()};f([o.style,o.elements],function(d){var v=d[0],g=d[1];l.styleEnabled&&r.style().append(v),h(g,function(){r.startAnimationLoop(),l.ready=!0,Qe(o.ready)&&r.on("ready",o.ready);for(var p=0;p<i.length;p++){var y=i[p];r.on("ready",y)}a&&(a.readies=[]),r.emit("ready")},o.done)})},Qi=Ya.prototype;xe(Qi,{instanceString:function(){return"core"},isReady:function(){return this._private.ready},destroyed:function(){return this._private.destroyed},ready:function(e){return this.isReady()?this.emitter().emit("ready",[],e):this.on("ready",e),this},destroy:function(){var e=this;if(!e.destroyed())return e.stopAnimationLoop(),e.destroyRenderer(),this.emit("destroy"),e._private.destroyed=!0,e},hasElementWithId:function(e){return this._private.elements.hasElementWithId(e)},getElementById:function(e){return this._private.elements.getElementById(e)},hasCompoundNodes:function(){return this._private.hasCompoundNodes},headless:function(){return this._private.renderer.isHeadless()},styleEnabled:function(){return this._private.styleEnabled},addToPool:function(e){return this._private.elements.merge(e),this},removeFromPool:function(e){return this._private.elements.unmerge(e),this},container:function(){return this._private.container||null},window:function(){var e=this._private.container;if(e==null)return ut;var r=this._private.container.ownerDocument;return r===void 0||r==null?ut:r.defaultView||ut},mount:function(e){if(e!=null){var r=this,n=r._private,a=n.options;return!Hi(e)&&Hi(e[0])&&(e=e[0]),r.stopAnimationLoop(),r.destroyRenderer(),n.container=e,n.styleEnabled=!0,r.invalidateSize(),r.initRenderer(xe({},a,a.renderer,{name:a.renderer.name==="null"?"canvas":a.renderer.name})),r.startAnimationLoop(),r.style(a.style),r.emit("mount"),r}},unmount:function(){var e=this;return e.stopAnimationLoop(),e.destroyRenderer(),e.initRenderer({name:"null"}),e.emit("unmount"),e},options:function(){return nr(this._private.options)},json:function(e){var r=this,n=r._private,a=r.mutableElements(),i=function(E){return r.getElementById(E.id())};if(qe(e)){if(r.startBatch(),e.elements){var s={},o=function(E,T){for(var I=[],w=[],x=0;x<E.length;x++){var C=E[x];if(!C.data.id){Ve("cy.json() cannot handle elements without an ID attribute");continue}var S=""+C.data.id,A=r.getElementById(S);s[S]=!0,A.length!==0?w.push({ele:A,json:C}):(T&&(C.group=T),I.push(C))}r.add(I);for(var R=0;R<w.length;R++){var D=w[R],_=D.ele,M=D.json;_.json(M)}};if(He(e.elements))o(e.elements);else for(var u=["nodes","edges"],l=0;l<u.length;l++){var f=u[l],c=e.elements[f];He(c)&&o(c,f)}var h=r.collection();a.filter(function(b){return!s[b.id()]}).forEach(function(b){b.isParent()?h.merge(b):b.remove()}),h.forEach(function(b){return b.children().move({parent:null})}),h.forEach(function(b){return i(b).remove()})}e.style&&r.style(e.style),e.zoom!=null&&e.zoom!==n.zoom&&r.zoom(e.zoom),e.pan&&(e.pan.x!==n.pan.x||e.pan.y!==n.pan.y)&&r.pan(e.pan),e.data&&r.data(e.data);for(var d=["minZoom","maxZoom","zoomingEnabled","userZoomingEnabled","panningEnabled","userPanningEnabled","boxSelectionEnabled","autolock","autoungrabify","autounselectify","multiClickDebounceTime"],v=0;v<d.length;v++){var g=d[v];e[g]!=null&&r[g](e[g])}return r.endBatch(),this}else{var p=!!e,y={};p?y.elements=this.elements().map(function(b){return b.json()}):(y.elements={},a.forEach(function(b){var E=b.group();y.elements[E]||(y.elements[E]=[]),y.elements[E].push(b.json())})),this._private.styleEnabled&&(y.style=r.style().json()),y.data=nr(r.data());var m=n.options;return y.zoomingEnabled=n.zoomingEnabled,y.userZoomingEnabled=n.userZoomingEnabled,y.zoom=n.zoom,y.minZoom=n.minZoom,y.maxZoom=n.maxZoom,y.panningEnabled=n.panningEnabled,y.userPanningEnabled=n.userPanningEnabled,y.pan=nr(n.pan),y.boxSelectionEnabled=n.boxSelectionEnabled,y.renderer=nr(m.renderer),y.hideEdgesOnViewport=m.hideEdgesOnViewport,y.textureOnViewport=m.textureOnViewport,y.wheelSensitivity=m.wheelSensitivity,y.motionBlur=m.motionBlur,y.multiClickDebounceTime=m.multiClickDebounceTime,y}}});Qi.$id=Qi.getElementById;[VM,XM,sT,Zd,ki,jM,Qd,Ni,JM,Cn,Ha].forEach(function(t){xe(Qi,t)});var t2={fit:!0,directed:!1,direction:"downward",padding:30,circle:!1,grid:!1,spacingFactor:1.75,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,roots:void 0,depthSort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,r){return!0},ready:void 0,stop:void 0,transform:function(e,r){return r}},r2={maximal:!1,acyclic:!1},Fn=function(e){return e.scratch("breadthfirst")},qy=function(e,r){return e.scratch("breadthfirst",r)};function oT(t){this.options=xe({},t2,r2,t)}oT.prototype.run=function(){var t=this.options,e=t.cy,r=t.eles,n=r.nodes().filter(function(ge){return ge.isChildless()}),a=r,i=t.directed,s=t.acyclic||t.maximal||t.maximalAdjustments>0,o=!!t.boundingBox,u=Rt(o?t.boundingBox:structuredClone(e.extent())),l;if(Ft(t.roots))l=t.roots;else if(He(t.roots)){for(var f=[],c=0;c<t.roots.length;c++){var h=t.roots[c],d=e.getElementById(h);f.push(d)}l=e.collection(f)}else if(we(t.roots))l=e.$(t.roots);else if(i)l=n.roots();else{var v=r.components();l=e.collection();for(var g=function(){var oe=v[p],de=oe.maxDegree(!1),fe=oe.filter(function(ve){return ve.degree(!1)===de});l=l.add(fe)},p=0;p<v.length;p++)g()}var y=[],m={},b=function(oe,de){y[de]==null&&(y[de]=[]);var fe=y[de].length;y[de].push(oe),qy(oe,{index:fe,depth:de})},E=function(oe,de){var fe=Fn(oe),ve=fe.depth,pe=fe.index;y[ve][pe]=null,oe.isChildless()&&b(oe,de)};a.bfs({roots:l,directed:t.directed,visit:function(oe,de,fe,ve,pe){var Ce=oe[0],Pe=Ce.id();Ce.isChildless()&&b(Ce,pe),m[Pe]=!0}});for(var T=[],I=0;I<n.length;I++){var w=n[I];m[w.id()]||T.push(w)}var x=function(oe){for(var de=y[oe],fe=0;fe<de.length;fe++){var ve=de[fe];if(ve==null){de.splice(fe,1),fe--;continue}qy(ve,{depth:oe,index:fe})}},C=function(oe,de){for(var fe=Fn(oe),ve=oe.incomers().filter(function(Te){return Te.isNode()&&r.has(Te)}),pe=-1,Ce=oe.id(),Pe=0;Pe<ve.length;Pe++){var Ne=ve[Pe],Me=Fn(Ne);pe=Math.max(pe,Me.depth)}if(fe.depth<=pe){if(!t.acyclic&&de[Ce])return null;var Be=pe+1;return E(oe,Be),de[Ce]=Be,!0}return!1};if(i&&s){var S=[],A={},R=function(oe){return S.push(oe)},D=function(){return S.shift()};for(n.forEach(function(ge){return S.push(ge)});S.length>0;){var _=D(),M=C(_,A);if(M)_.outgoers().filter(function(ge){return ge.isNode()&&r.has(ge)}).forEach(R);else if(M===null){Ve("Detected double maximal shift for node `"+_.id()+"`.  Bailing maximal adjustment due to cycle.  Use `options.maximal: true` only on DAGs.");break}}}var k=0;if(t.avoidOverlap)for(var O=0;O<n.length;O++){var P=n[O],B=P.layoutDimensions(t),F=B.w,N=B.h;k=Math.max(k,F,N)}var q={},V=function(oe){if(q[oe.id()])return q[oe.id()];for(var de=Fn(oe).depth,fe=oe.neighborhood(),ve=0,pe=0,Ce=0;Ce<fe.length;Ce++){var Pe=fe[Ce];if(!(Pe.isEdge()||Pe.isParent()||!n.has(Pe))){var Ne=Fn(Pe);if(Ne!=null){var Me=Ne.index,Be=Ne.depth;if(!(Me==null||Be==null)){var Te=y[Be].length;Be<de&&(ve+=Me/Te,pe++)}}}}return pe=Math.max(1,pe),ve=ve/pe,pe===0&&(ve=0),q[oe.id()]=ve,ve},Y=function(oe,de){var fe=V(oe),ve=V(de),pe=fe-ve;return pe===0?ux(oe.id(),de.id()):pe};t.depthSort!==void 0&&(Y=t.depthSort);for(var H=y.length,Z=0;Z<H;Z++)y[Z].sort(Y),x(Z);for(var ee=[],ie=0;ie<T.length;ie++)ee.push(T[ie]);var J=function(){for(var oe=0;oe<H;oe++)x(oe)};ee.length&&(y.unshift(ee),H=y.length,J());for(var G=0,$=0;$<H;$++)G=Math.max(y[$].length,G);var U={x:u.x1+u.w/2,y:u.y1+u.h/2},j=n.reduce(function(ge,oe){return function(de){return{w:ge.w===-1?de.w:(ge.w+de.w)/2,h:ge.h===-1?de.h:(ge.h+de.h)/2}}(oe.boundingBox({includeLabels:t.nodeDimensionsIncludeLabels}))},{w:-1,h:-1}),ne=Math.max(H===1?0:o?(u.h-t.padding*2-j.h)/(H-1):(u.h-t.padding*2-j.h)/(H+1),k),re=y.reduce(function(ge,oe){return Math.max(ge,oe.length)},0),Ie=function(oe){var de=Fn(oe),fe=de.depth,ve=de.index;if(t.circle){var pe=Math.min(u.w/2/H,u.h/2/H);pe=Math.max(pe,k);var Ce=pe*fe+pe-(H>0&&y[0].length<=3?pe/2:0),Pe=2*Math.PI/y[fe].length*ve;return fe===0&&y[0].length===1&&(Ce=1),{x:U.x+Ce*Math.cos(Pe),y:U.y+Ce*Math.sin(Pe)}}else{var Ne=y[fe].length,Me=Math.max(Ne===1?0:o?(u.w-t.padding*2-j.w)/((t.grid?re:Ne)-1):(u.w-t.padding*2-j.w)/((t.grid?re:Ne)+1),k),Be={x:U.x+(ve+1-(Ne+1)/2)*Me,y:U.y+(fe+1-(H+1)/2)*ne};return Be}},se={downward:0,leftward:90,upward:180,rightward:-90};Object.keys(se).indexOf(t.direction)===-1&&je("Invalid direction '".concat(t.direction,"' specified for breadthfirst layout. Valid values are: ").concat(Object.keys(se).join(", ")));var be=function(oe){return mD(Ie(oe),u,se[t.direction])};return r.nodes().layoutPositions(this,t,be),this};var n2={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,radius:void 0,startAngle:3/2*Math.PI,sweep:void 0,clockwise:!0,sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,r){return!0},ready:void 0,stop:void 0,transform:function(e,r){return r}};function uT(t){this.options=xe({},n2,t)}uT.prototype.run=function(){var t=this.options,e=t,r=t.cy,n=e.eles,a=e.counterclockwise!==void 0?!e.counterclockwise:e.clockwise,i=n.nodes().not(":parent");e.sort&&(i=i.sort(e.sort));for(var s=Rt(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()}),o={x:s.x1+s.w/2,y:s.y1+s.h/2},u=e.sweep===void 0?2*Math.PI-2*Math.PI/i.length:e.sweep,l=u/Math.max(1,i.length-1),f,c=0,h=0;h<i.length;h++){var d=i[h],v=d.layoutDimensions(e),g=v.w,p=v.h;c=Math.max(c,g,p)}if(ae(e.radius)?f=e.radius:i.length<=1?f=0:f=Math.min(s.h,s.w)/2-c,i.length>1&&e.avoidOverlap){c*=1.75;var y=Math.cos(l)-Math.cos(0),m=Math.sin(l)-Math.sin(0),b=Math.sqrt(c*c/(y*y+m*m));f=Math.max(b,f)}var E=function(I,w){var x=e.startAngle+w*l*(a?1:-1),C=f*Math.cos(x),S=f*Math.sin(x),A={x:o.x+C,y:o.y+S};return A};return n.nodes().layoutPositions(this,e,E),this};var a2={fit:!0,padding:30,startAngle:3/2*Math.PI,sweep:void 0,clockwise:!0,equidistant:!1,minNodeSpacing:10,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,height:void 0,width:void 0,spacingFactor:void 0,concentric:function(e){return e.degree()},levelWidth:function(e){return e.maxDegree()/4},animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,r){return!0},ready:void 0,stop:void 0,transform:function(e,r){return r}};function lT(t){this.options=xe({},a2,t)}lT.prototype.run=function(){for(var t=this.options,e=t,r=e.counterclockwise!==void 0?!e.counterclockwise:e.clockwise,n=t.cy,a=e.eles,i=a.nodes().not(":parent"),s=Rt(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()}),o={x:s.x1+s.w/2,y:s.y1+s.h/2},u=[],l=0,f=0;f<i.length;f++){var c=i[f],h=void 0;h=e.concentric(c),u.push({value:h,node:c}),c._private.scratch.concentric=h}i.updateStyle();for(var d=0;d<i.length;d++){var v=i[d],g=v.layoutDimensions(e);l=Math.max(l,g.w,g.h)}u.sort(function(ne,re){return re.value-ne.value});for(var p=e.levelWidth(i),y=[[]],m=y[0],b=0;b<u.length;b++){var E=u[b];if(m.length>0){var T=Math.abs(m[0].value-E.value);T>=p&&(m=[],y.push(m))}m.push(E)}var I=l+e.minNodeSpacing;if(!e.avoidOverlap){var w=y.length>0&&y[0].length>1,x=Math.min(s.w,s.h)/2-I,C=x/(y.length+w?1:0);I=Math.min(I,C)}for(var S=0,A=0;A<y.length;A++){var R=y[A],D=e.sweep===void 0?2*Math.PI-2*Math.PI/R.length:e.sweep,_=R.dTheta=D/Math.max(1,R.length-1);if(R.length>1&&e.avoidOverlap){var M=Math.cos(_)-Math.cos(0),k=Math.sin(_)-Math.sin(0),O=Math.sqrt(I*I/(M*M+k*k));S=Math.max(O,S)}R.r=S,S+=I}if(e.equidistant){for(var P=0,B=0,F=0;F<y.length;F++){var N=y[F],q=N.r-B;P=Math.max(P,q)}B=0;for(var V=0;V<y.length;V++){var Y=y[V];V===0&&(B=Y.r),Y.r=B,B+=P}}for(var H={},Z=0;Z<y.length;Z++)for(var ee=y[Z],ie=ee.dTheta,J=ee.r,G=0;G<ee.length;G++){var $=ee[G],U=e.startAngle+(r?1:-1)*ie*G,j={x:o.x+J*Math.cos(U),y:o.y+J*Math.sin(U)};H[$.node.id()]=j}return a.nodes().layoutPositions(this,e,function(ne){var re=ne.id();return H[re]}),this};var _u,i2={ready:function(){},stop:function(){},animate:!0,animationEasing:void 0,animationDuration:void 0,animateFilter:function(e,r){return!0},animationThreshold:250,refresh:20,fit:!0,padding:30,boundingBox:void 0,nodeDimensionsIncludeLabels:!1,randomize:!1,componentSpacing:40,nodeRepulsion:function(e){return 2048},nodeOverlap:4,idealEdgeLength:function(e){return 32},edgeElasticity:function(e){return 32},nestingFactor:1.2,gravity:1,numIter:1e3,initialTemp:1e3,coolingFactor:.99,minTemp:1};function Ls(t){this.options=xe({},i2,t),this.options.layout=this;var e=this.options.eles.nodes(),r=this.options.eles.edges(),n=r.filter(function(a){var i=a.source().data("id"),s=a.target().data("id"),o=e.some(function(l){return l.data("id")===i}),u=e.some(function(l){return l.data("id")===s});return!o||!u});this.options.eles=this.options.eles.not(n)}Ls.prototype.run=function(){var t=this.options,e=t.cy,r=this;r.stopped=!1,(t.animate===!0||t.animate===!1)&&r.emit({type:"layoutstart",layout:r}),t.debug===!0?_u=!0:_u=!1;var n=s2(e,r,t);_u&&u2(n),t.randomize&&l2(n);var a=mr(),i=function(){f2(n,e,t),t.fit===!0&&e.fit(t.padding)},s=function(h){return!(r.stopped||h>=t.numIter||(c2(n,t),n.temperature=n.temperature*t.coolingFactor,n.temperature<t.minTemp))},o=function(){if(t.animate===!0||t.animate===!1)i(),r.one("layoutstop",t.stop),r.emit({type:"layoutstop",layout:r});else{var h=t.eles.nodes(),d=cT(n,t,h);h.layoutPositions(r,t,d)}},u=0,l=!0;if(t.animate===!0){var f=function(){for(var h=0;l&&h<t.refresh;)l=s(u),u++,h++;if(!l)zy(n,t),o();else{var d=mr();d-a>=t.animationThreshold&&i(),Yi(f)}};f()}else{for(;l;)l=s(u),u++;zy(n,t),o()}return this};Ls.prototype.stop=function(){return this.stopped=!0,this.thread&&this.thread.stop(),this.emit("layoutstop"),this};Ls.prototype.destroy=function(){return this.thread&&this.thread.stop(),this};var s2=function(e,r,n){for(var a=n.eles.edges(),i=n.eles.nodes(),s=Rt(n.boundingBox?n.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()}),o={isCompound:e.hasCompoundNodes(),layoutNodes:[],idToIndex:{},nodeSize:i.size(),graphSet:[],indexToGraph:[],layoutEdges:[],edgeSize:a.size(),temperature:n.initialTemp,clientWidth:s.w,clientHeight:s.h,boundingBox:s},u=n.eles.components(),l={},f=0;f<u.length;f++)for(var c=u[f],h=0;h<c.length;h++){var d=c[h];l[d.id()]=f}for(var f=0;f<o.nodeSize;f++){var v=i[f],g=v.layoutDimensions(n),p={};p.isLocked=v.locked(),p.id=v.data("id"),p.parentId=v.data("parent"),p.cmptId=l[v.id()],p.children=[],p.positionX=v.position("x"),p.positionY=v.position("y"),p.offsetX=0,p.offsetY=0,p.height=g.w,p.width=g.h,p.maxX=p.positionX+p.width/2,p.minX=p.positionX-p.width/2,p.maxY=p.positionY+p.height/2,p.minY=p.positionY-p.height/2,p.padLeft=parseFloat(v.style("padding")),p.padRight=parseFloat(v.style("padding")),p.padTop=parseFloat(v.style("padding")),p.padBottom=parseFloat(v.style("padding")),p.nodeRepulsion=Qe(n.nodeRepulsion)?n.nodeRepulsion(v):n.nodeRepulsion,o.layoutNodes.push(p),o.idToIndex[p.id]=f}for(var y=[],m=0,b=-1,E=[],f=0;f<o.nodeSize;f++){var v=o.layoutNodes[f],T=v.parentId;T!=null?o.layoutNodes[o.idToIndex[T]].children.push(v.id):(y[++b]=v.id,E.push(v.id))}for(o.graphSet.push(E);m<=b;){var I=y[m++],w=o.idToIndex[I],d=o.layoutNodes[w],x=d.children;if(x.length>0){o.graphSet.push(x);for(var f=0;f<x.length;f++)y[++b]=x[f]}}for(var f=0;f<o.graphSet.length;f++)for(var C=o.graphSet[f],h=0;h<C.length;h++){var S=o.idToIndex[C[h]];o.indexToGraph[S]=f}for(var f=0;f<o.edgeSize;f++){var A=a[f],R={};R.id=A.data("id"),R.sourceId=A.data("source"),R.targetId=A.data("target");var D=Qe(n.idealEdgeLength)?n.idealEdgeLength(A):n.idealEdgeLength,_=Qe(n.edgeElasticity)?n.edgeElasticity(A):n.edgeElasticity,M=o.idToIndex[R.sourceId],k=o.idToIndex[R.targetId],O=o.indexToGraph[M],P=o.indexToGraph[k];if(O!=P){for(var B=o2(R.sourceId,R.targetId,o),F=o.graphSet[B],N=0,p=o.layoutNodes[M];F.indexOf(p.id)===-1;)p=o.layoutNodes[o.idToIndex[p.parentId]],N++;for(p=o.layoutNodes[k];F.indexOf(p.id)===-1;)p=o.layoutNodes[o.idToIndex[p.parentId]],N++;D*=N*n.nestingFactor}R.idealLength=D,R.elasticity=_,o.layoutEdges.push(R)}return o},o2=function(e,r,n){var a=fT(e,r,0,n);return 2>a.count?0:a.graph},fT=function(e,r,n,a){var i=a.graphSet[n];if(-1<i.indexOf(e)&&-1<i.indexOf(r))return{count:2,graph:n};for(var s=0,o=0;o<i.length;o++){var u=i[o],l=a.idToIndex[u],f=a.layoutNodes[l].children;if(f.length!==0){var c=a.indexToGraph[a.idToIndex[f[0]]],h=fT(e,r,c,a);if(h.count!==0)if(h.count===1){if(s++,s===2)break}else return h}}return{count:s,graph:n}},u2,l2=function(e,r){for(var n=e.clientWidth,a=e.clientHeight,i=0;i<e.nodeSize;i++){var s=e.layoutNodes[i];s.children.length===0&&!s.isLocked&&(s.positionX=Math.random()*n,s.positionY=Math.random()*a)}},cT=function(e,r,n){var a=e.boundingBox,i={x1:1/0,x2:-1/0,y1:1/0,y2:-1/0};return r.boundingBox&&(n.forEach(function(s){var o=e.layoutNodes[e.idToIndex[s.data("id")]];i.x1=Math.min(i.x1,o.positionX),i.x2=Math.max(i.x2,o.positionX),i.y1=Math.min(i.y1,o.positionY),i.y2=Math.max(i.y2,o.positionY)}),i.w=i.x2-i.x1,i.h=i.y2-i.y1),function(s,o){var u=e.layoutNodes[e.idToIndex[s.data("id")]];if(r.boundingBox){var l=i.w===0?.5:(u.positionX-i.x1)/i.w,f=i.h===0?.5:(u.positionY-i.y1)/i.h;return{x:a.x1+l*a.w,y:a.y1+f*a.h}}else return{x:u.positionX,y:u.positionY}}},f2=function(e,r,n){var a=n.layout,i=n.eles.nodes(),s=cT(e,n,i);i.positions(s),e.ready!==!0&&(e.ready=!0,a.one("layoutready",n.ready),a.emit({type:"layoutready",layout:this}))},c2=function(e,r,n){h2(e,r),g2(e),p2(e,r),y2(e),m2(e)},h2=function(e,r){for(var n=0;n<e.graphSet.length;n++)for(var a=e.graphSet[n],i=a.length,s=0;s<i;s++)for(var o=e.layoutNodes[e.idToIndex[a[s]]],u=s+1;u<i;u++){var l=e.layoutNodes[e.idToIndex[a[u]]];d2(o,l,e,r)}},Gy=function(e){return-1+2*e*Math.random()},d2=function(e,r,n,a){var i=e.cmptId,s=r.cmptId;if(!(i!==s&&!n.isCompound)){var o=r.positionX-e.positionX,u=r.positionY-e.positionY,l=1;o===0&&u===0&&(o=Gy(l),u=Gy(l));var f=v2(e,r,o,u);if(f>0)var c=a.nodeOverlap*f,h=Math.sqrt(o*o+u*u),d=c*o/h,v=c*u/h;else var g=Ji(e,o,u),p=Ji(r,-1*o,-1*u),y=p.x-g.x,m=p.y-g.y,b=y*y+m*m,h=Math.sqrt(b),c=(e.nodeRepulsion+r.nodeRepulsion)/b,d=c*y/h,v=c*m/h;e.isLocked||(e.offsetX-=d,e.offsetY-=v),r.isLocked||(r.offsetX+=d,r.offsetY+=v)}},v2=function(e,r,n,a){if(n>0)var i=e.maxX-r.minX;else var i=r.maxX-e.minX;if(a>0)var s=e.maxY-r.minY;else var s=r.maxY-e.minY;return i>=0&&s>=0?Math.sqrt(i*i+s*s):0},Ji=function(e,r,n){var a=e.positionX,i=e.positionY,s=e.height||1,o=e.width||1,u=n/r,l=s/o,f={};return r===0&&0<n||r===0&&0>n?(f.x=a,f.y=i+s/2,f):0<r&&-1*l<=u&&u<=l?(f.x=a+o/2,f.y=i+o*n/2/r,f):0>r&&-1*l<=u&&u<=l?(f.x=a-o/2,f.y=i-o*n/2/r,f):0<n&&(u<=-1*l||u>=l)?(f.x=a+s*r/2/n,f.y=i+s/2,f):(0>n&&(u<=-1*l||u>=l)&&(f.x=a-s*r/2/n,f.y=i-s/2),f)},g2=function(e,r){for(var n=0;n<e.edgeSize;n++){var a=e.layoutEdges[n],i=e.idToIndex[a.sourceId],s=e.layoutNodes[i],o=e.idToIndex[a.targetId],u=e.layoutNodes[o],l=u.positionX-s.positionX,f=u.positionY-s.positionY;if(!(l===0&&f===0)){var c=Ji(s,l,f),h=Ji(u,-1*l,-1*f),d=h.x-c.x,v=h.y-c.y,g=Math.sqrt(d*d+v*v),p=Math.pow(a.idealLength-g,2)/a.elasticity;if(g!==0)var y=p*d/g,m=p*v/g;else var y=0,m=0;s.isLocked||(s.offsetX+=y,s.offsetY+=m),u.isLocked||(u.offsetX-=y,u.offsetY-=m)}}},p2=function(e,r){if(r.gravity!==0)for(var n=1,a=0;a<e.graphSet.length;a++){var i=e.graphSet[a],s=i.length;if(a===0)var o=e.clientHeight/2,u=e.clientWidth/2;else var l=e.layoutNodes[e.idToIndex[i[0]]],f=e.layoutNodes[e.idToIndex[l.parentId]],o=f.positionX,u=f.positionY;for(var c=0;c<s;c++){var h=e.layoutNodes[e.idToIndex[i[c]]];if(!h.isLocked){var d=o-h.positionX,v=u-h.positionY,g=Math.sqrt(d*d+v*v);if(g>n){var p=r.gravity*d/g,y=r.gravity*v/g;h.offsetX+=p,h.offsetY+=y}}}}},y2=function(e,r){var n=[],a=0,i=-1;for(n.push.apply(n,e.graphSet[0]),i+=e.graphSet[0].length;a<=i;){var s=n[a++],o=e.idToIndex[s],u=e.layoutNodes[o],l=u.children;if(0<l.length&&!u.isLocked){for(var f=u.offsetX,c=u.offsetY,h=0;h<l.length;h++){var d=e.layoutNodes[e.idToIndex[l[h]]];d.offsetX+=f,d.offsetY+=c,n[++i]=l[h]}u.offsetX=0,u.offsetY=0}}},m2=function(e,r){for(var n=0;n<e.nodeSize;n++){var a=e.layoutNodes[n];0<a.children.length&&(a.maxX=void 0,a.minX=void 0,a.maxY=void 0,a.minY=void 0)}for(var n=0;n<e.nodeSize;n++){var a=e.layoutNodes[n];if(!(0<a.children.length||a.isLocked)){var i=b2(a.offsetX,a.offsetY,e.temperature);a.positionX+=i.x,a.positionY+=i.y,a.offsetX=0,a.offsetY=0,a.minX=a.positionX-a.width,a.maxX=a.positionX+a.width,a.minY=a.positionY-a.height,a.maxY=a.positionY+a.height,hT(a,e)}}for(var n=0;n<e.nodeSize;n++){var a=e.layoutNodes[n];0<a.children.length&&!a.isLocked&&(a.positionX=(a.maxX+a.minX)/2,a.positionY=(a.maxY+a.minY)/2,a.width=a.maxX-a.minX,a.height=a.maxY-a.minY)}},b2=function(e,r,n){var a=Math.sqrt(e*e+r*r);if(a>n)var i={x:n*e/a,y:n*r/a};else var i={x:e,y:r};return i},hT=function(e,r){var n=e.parentId;if(n!=null){var a=r.layoutNodes[r.idToIndex[n]],i=!1;if((a.maxX==null||e.maxX+a.padRight>a.maxX)&&(a.maxX=e.maxX+a.padRight,i=!0),(a.minX==null||e.minX-a.padLeft<a.minX)&&(a.minX=e.minX-a.padLeft,i=!0),(a.maxY==null||e.maxY+a.padBottom>a.maxY)&&(a.maxY=e.maxY+a.padBottom,i=!0),(a.minY==null||e.minY-a.padTop<a.minY)&&(a.minY=e.minY-a.padTop,i=!0),i)return hT(a,r)}},zy=function(e,r){for(var n=e.layoutNodes,a=[],i=0;i<n.length;i++){var s=n[i],o=s.cmptId,u=a[o]=a[o]||[];u.push(s)}for(var l=0,i=0;i<a.length;i++){var f=a[i];if(f){f.x1=1/0,f.x2=-1/0,f.y1=1/0,f.y2=-1/0;for(var c=0;c<f.length;c++){var h=f[c];f.x1=Math.min(f.x1,h.positionX-h.width/2),f.x2=Math.max(f.x2,h.positionX+h.width/2),f.y1=Math.min(f.y1,h.positionY-h.height/2),f.y2=Math.max(f.y2,h.positionY+h.height/2)}f.w=f.x2-f.x1,f.h=f.y2-f.y1,l+=f.w*f.h}}a.sort(function(m,b){return b.w*b.h-m.w*m.h});for(var d=0,v=0,g=0,p=0,y=Math.sqrt(l)*e.clientWidth/e.clientHeight,i=0;i<a.length;i++){var f=a[i];if(f){for(var c=0;c<f.length;c++){var h=f[c];h.isLocked||(h.positionX+=d-f.x1,h.positionY+=v-f.y1)}d+=f.w+r.componentSpacing,g+=f.w+r.componentSpacing,p=Math.max(p,f.h),g>y&&(v+=p+r.componentSpacing,d=0,g=0,p=0)}}},w2={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,avoidOverlapPadding:10,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,condense:!1,rows:void 0,cols:void 0,position:function(e){},sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,r){return!0},ready:void 0,stop:void 0,transform:function(e,r){return r}};function dT(t){this.options=xe({},w2,t)}dT.prototype.run=function(){var t=this.options,e=t,r=t.cy,n=e.eles,a=n.nodes().not(":parent");e.sort&&(a=a.sort(e.sort));var i=Rt(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()});if(i.h===0||i.w===0)n.nodes().layoutPositions(this,e,function(V){return{x:i.x1,y:i.y1}});else{var s=a.size(),o=Math.sqrt(s*i.h/i.w),u=Math.round(o),l=Math.round(i.w/i.h*o),f=function(Y){if(Y==null)return Math.min(u,l);var H=Math.min(u,l);H==u?u=Y:l=Y},c=function(Y){if(Y==null)return Math.max(u,l);var H=Math.max(u,l);H==u?u=Y:l=Y},h=e.rows,d=e.cols!=null?e.cols:e.columns;if(h!=null&&d!=null)u=h,l=d;else if(h!=null&&d==null)u=h,l=Math.ceil(s/u);else if(h==null&&d!=null)l=d,u=Math.ceil(s/l);else if(l*u>s){var v=f(),g=c();(v-1)*g>=s?f(v-1):(g-1)*v>=s&&c(g-1)}else for(;l*u<s;){var p=f(),y=c();(y+1)*p>=s?c(y+1):f(p+1)}var m=i.w/l,b=i.h/u;if(e.condense&&(m=0,b=0),e.avoidOverlap)for(var E=0;E<a.length;E++){var T=a[E],I=T._private.position;(I.x==null||I.y==null)&&(I.x=0,I.y=0);var w=T.layoutDimensions(e),x=e.avoidOverlapPadding,C=w.w+x,S=w.h+x;m=Math.max(m,C),b=Math.max(b,S)}for(var A={},R=function(Y,H){return!!A["c-"+Y+"-"+H]},D=function(Y,H){A["c-"+Y+"-"+H]=!0},_=0,M=0,k=function(){M++,M>=l&&(M=0,_++)},O={},P=0;P<a.length;P++){var B=a[P],F=e.position(B);if(F&&(F.row!==void 0||F.col!==void 0)){var N={row:F.row,col:F.col};if(N.col===void 0)for(N.col=0;R(N.row,N.col);)N.col++;else if(N.row===void 0)for(N.row=0;R(N.row,N.col);)N.row++;O[B.id()]=N,D(N.row,N.col)}}var q=function(Y,H){var Z,ee;if(Y.locked()||Y.isParent())return!1;var ie=O[Y.id()];if(ie)Z=ie.col*m+m/2+i.x1,ee=ie.row*b+b/2+i.y1;else{for(;R(_,M);)k();Z=M*m+m/2+i.x1,ee=_*b+b/2+i.y1,D(_,M),k()}return{x:Z,y:ee}};a.layoutPositions(this,e,q)}return this};var E2={ready:function(){},stop:function(){}};function zv(t){this.options=xe({},E2,t)}zv.prototype.run=function(){var t=this.options,e=t.eles,r=this;return t.cy,r.emit("layoutstart"),e.nodes().positions(function(){return{x:0,y:0}}),r.one("layoutready",t.ready),r.emit("layoutready"),r.one("layoutstop",t.stop),r.emit("layoutstop"),this};zv.prototype.stop=function(){return this};var x2={positions:void 0,zoom:void 0,pan:void 0,fit:!0,padding:30,spacingFactor:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,r){return!0},ready:void 0,stop:void 0,transform:function(e,r){return r}};function vT(t){this.options=xe({},x2,t)}vT.prototype.run=function(){var t=this.options,e=t.eles,r=e.nodes(),n=Qe(t.positions);function a(i){if(t.positions==null)return UD(i.position());if(n)return t.positions(i);var s=t.positions[i._private.data.id];return s??null}return r.layoutPositions(this,t,function(i,s){var o=a(i);return i.locked()||o==null?!1:o}),this};var T2={fit:!0,padding:30,boundingBox:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,r){return!0},ready:void 0,stop:void 0,transform:function(e,r){return r}};function gT(t){this.options=xe({},T2,t)}gT.prototype.run=function(){var t=this.options,e=t.cy,r=t.eles,n=Rt(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()}),a=function(s,o){return{x:n.x1+Math.round(Math.random()*n.w),y:n.y1+Math.round(Math.random()*n.h)}};return r.nodes().layoutPositions(this,t,a),this};var C2=[{name:"breadthfirst",impl:oT},{name:"circle",impl:uT},{name:"concentric",impl:lT},{name:"cose",impl:Ls},{name:"grid",impl:dT},{name:"null",impl:zv},{name:"preset",impl:vT},{name:"random",impl:gT}];function pT(t){this.options=t,this.notifications=0}var $y=function(){},Vy=function(){throw new Error("A headless instance can not render images")};pT.prototype={recalculateRenderedStyle:$y,notify:function(){this.notifications++},init:$y,isHeadless:function(){return!0},png:Vy,jpg:Vy};var $v={};$v.arrowShapeWidth=.3;$v.registerArrowShapes=function(){var t=this.arrowShapes={},e=this,r=function(l,f,c,h,d,v,g){var p=d.x-c/2-g,y=d.x+c/2+g,m=d.y-c/2-g,b=d.y+c/2+g,E=p<=l&&l<=y&&m<=f&&f<=b;return E},n=function(l,f,c,h,d){var v=l*Math.cos(h)-f*Math.sin(h),g=l*Math.sin(h)+f*Math.cos(h),p=v*c,y=g*c,m=p+d.x,b=y+d.y;return{x:m,y:b}},a=function(l,f,c,h){for(var d=[],v=0;v<l.length;v+=2){var g=l[v],p=l[v+1];d.push(n(g,p,f,c,h))}return d},i=function(l){for(var f=[],c=0;c<l.length;c++){var h=l[c];f.push(h.x,h.y)}return f},s=function(l){return l.pstyle("width").pfValue*l.pstyle("arrow-scale").pfValue*2},o=function(l,f){we(f)&&(f=t[f]),t[l]=xe({name:l,points:[-.15,-.3,.15,-.3,.15,.3,-.15,.3],collide:function(h,d,v,g,p,y){var m=i(a(this.points,v+2*y,g,p)),b=Ot(h,d,m);return b},roughCollide:r,draw:function(h,d,v,g){var p=a(this.points,d,v,g);e.arrowShapeImpl("polygon")(h,p)},spacing:function(h){return 0},gap:s},f)};o("none",{collide:Wi,roughCollide:Wi,draw:Iv,spacing:np,gap:np}),o("triangle",{points:[-.15,-.3,0,0,.15,-.3]}),o("arrow","triangle"),o("triangle-backcurve",{points:t.triangle.points,controlPoint:[0,-.15],roughCollide:r,draw:function(l,f,c,h,d){var v=a(this.points,f,c,h),g=this.controlPoint,p=n(g[0],g[1],f,c,h);e.arrowShapeImpl(this.name)(l,v,p)},gap:function(l){return s(l)*.8}}),o("triangle-tee",{points:[0,0,.15,-.3,-.15,-.3,0,0],pointsTee:[-.15,-.4,-.15,-.5,.15,-.5,.15,-.4],collide:function(l,f,c,h,d,v,g){var p=i(a(this.points,c+2*g,h,d)),y=i(a(this.pointsTee,c+2*g,h,d)),m=Ot(l,f,p)||Ot(l,f,y);return m},draw:function(l,f,c,h,d){var v=a(this.points,f,c,h),g=a(this.pointsTee,f,c,h);e.arrowShapeImpl(this.name)(l,v,g)}}),o("circle-triangle",{radius:.15,pointsTr:[0,-.15,.15,-.45,-.15,-.45,0,-.15],collide:function(l,f,c,h,d,v,g){var p=d,y=Math.pow(p.x-l,2)+Math.pow(p.y-f,2)<=Math.pow((c+2*g)*this.radius,2),m=i(a(this.points,c+2*g,h,d));return Ot(l,f,m)||y},draw:function(l,f,c,h,d){var v=a(this.pointsTr,f,c,h);e.arrowShapeImpl(this.name)(l,v,h.x,h.y,this.radius*f)},spacing:function(l){return e.getArrowWidth(l.pstyle("width").pfValue,l.pstyle("arrow-scale").value)*this.radius}}),o("triangle-cross",{points:[0,0,.15,-.3,-.15,-.3,0,0],baseCrossLinePts:[-.15,-.4,-.15,-.4,.15,-.4,.15,-.4],crossLinePts:function(l,f){var c=this.baseCrossLinePts.slice(),h=f/l,d=3,v=5;return c[d]=c[d]-h,c[v]=c[v]-h,c},collide:function(l,f,c,h,d,v,g){var p=i(a(this.points,c+2*g,h,d)),y=i(a(this.crossLinePts(c,v),c+2*g,h,d)),m=Ot(l,f,p)||Ot(l,f,y);return m},draw:function(l,f,c,h,d){var v=a(this.points,f,c,h),g=a(this.crossLinePts(f,d),f,c,h);e.arrowShapeImpl(this.name)(l,v,g)}}),o("vee",{points:[-.15,-.3,0,0,.15,-.3,0,-.15],gap:function(l){return s(l)*.525}}),o("circle",{radius:.15,collide:function(l,f,c,h,d,v,g){var p=d,y=Math.pow(p.x-l,2)+Math.pow(p.y-f,2)<=Math.pow((c+2*g)*this.radius,2);return y},draw:function(l,f,c,h,d){e.arrowShapeImpl(this.name)(l,h.x,h.y,this.radius*f)},spacing:function(l){return e.getArrowWidth(l.pstyle("width").pfValue,l.pstyle("arrow-scale").value)*this.radius}}),o("tee",{points:[-.15,0,-.15,-.1,.15,-.1,.15,0],spacing:function(l){return 1},gap:function(l){return 1}}),o("square",{points:[-.15,0,.15,0,.15,-.3,-.15,-.3]}),o("diamond",{points:[-.15,-.15,0,-.3,.15,-.15,0,0],gap:function(l){return l.pstyle("width").pfValue*l.pstyle("arrow-scale").value}}),o("chevron",{points:[0,0,-.15,-.15,-.1,-.2,0,-.1,.1,-.2,.15,-.15],gap:function(l){return .95*l.pstyle("width").pfValue*l.pstyle("arrow-scale").value}})};var In={};In.projectIntoViewport=function(t,e){var r=this.cy,n=this.findContainerClientCoords(),a=n[0],i=n[1],s=n[4],o=r.pan(),u=r.zoom(),l=((t-a)/s-o.x)/u,f=((e-i)/s-o.y)/u;return[l,f]};In.findContainerClientCoords=function(){if(this.containerBB)return this.containerBB;var t=this.container,e=t.getBoundingClientRect(),r=this.cy.window().getComputedStyle(t),n=function(y){return parseFloat(r.getPropertyValue(y))},a={left:n("padding-left"),right:n("padding-right"),top:n("padding-top"),bottom:n("padding-bottom")},i={left:n("border-left-width"),right:n("border-right-width"),top:n("border-top-width"),bottom:n("border-bottom-width")},s=t.clientWidth,o=t.clientHeight,u=a.left+a.right,l=a.top+a.bottom,f=i.left+i.right,c=e.width/(s+f),h=s-u,d=o-l,v=e.left+a.left+i.left,g=e.top+a.top+i.top;return this.containerBB=[v,g,h,d,c]};In.invalidateContainerClientCoordsCache=function(){this.containerBB=null};In.findNearestElement=function(t,e,r,n){return this.findNearestElements(t,e,r,n)[0]};In.findNearestElements=function(t,e,r,n){var a=this,i=this,s=i.getCachedZSortedEles(),o=[],u=i.cy.zoom(),l=i.cy.hasCompoundNodes(),f=(n?24:8)/u,c=(n?8:2)/u,h=(n?8:2)/u,d=1/0,v,g;r&&(s=s.interactive);function p(w,x){if(w.isNode()){if(g)return;g=w,o.push(w)}if(w.isEdge()&&(x==null||x<d))if(v){if(v.pstyle("z-compound-depth").value===w.pstyle("z-compound-depth").value&&v.pstyle("z-compound-depth").value===w.pstyle("z-compound-depth").value){for(var C=0;C<o.length;C++)if(o[C].isEdge()){o[C]=w,v=w,d=x??d;break}}}else o.push(w),v=w,d=x??d}function y(w){var x=w.outerWidth()+2*c,C=w.outerHeight()+2*c,S=x/2,A=C/2,R=w.position(),D=w.pstyle("corner-radius").value==="auto"?"auto":w.pstyle("corner-radius").pfValue,_=w._private.rscratch;if(R.x-S<=t&&t<=R.x+S&&R.y-A<=e&&e<=R.y+A){var M=i.nodeShapes[a.getNodeShape(w)];if(M.checkPoint(t,e,0,x,C,R.x,R.y,D,_))return p(w,0),!0}}function m(w){var x=w._private,C=x.rscratch,S=w.pstyle("width").pfValue,A=w.pstyle("arrow-scale").value,R=S/2+f,D=R*R,_=R*2,P=x.source,B=x.target,M;if(C.edgeType==="segments"||C.edgeType==="straight"||C.edgeType==="haystack"){for(var k=C.allpts,O=0;O+3<k.length;O+=2)if(a_(t,e,k[O],k[O+1],k[O+2],k[O+3],_)&&D>(M=l_(t,e,k[O],k[O+1],k[O+2],k[O+3])))return p(w,M),!0}else if(C.edgeType==="bezier"||C.edgeType==="multibezier"||C.edgeType==="self"||C.edgeType==="compound"){for(var k=C.allpts,O=0;O+5<C.allpts.length;O+=4)if(i_(t,e,k[O],k[O+1],k[O+2],k[O+3],k[O+4],k[O+5],_)&&D>(M=u_(t,e,k[O],k[O+1],k[O+2],k[O+3],k[O+4],k[O+5])))return p(w,M),!0}for(var P=P||x.source,B=B||x.target,F=a.getArrowWidth(S,A),N=[{name:"source",x:C.arrowStartX,y:C.arrowStartY,angle:C.srcArrowAngle},{name:"target",x:C.arrowEndX,y:C.arrowEndY,angle:C.tgtArrowAngle},{name:"mid-source",x:C.midX,y:C.midY,angle:C.midsrcArrowAngle},{name:"mid-target",x:C.midX,y:C.midY,angle:C.midtgtArrowAngle}],O=0;O<N.length;O++){var q=N[O],V=i.arrowShapes[w.pstyle(q.name+"-arrow-shape").value],Y=w.pstyle("width").pfValue;if(V.roughCollide(t,e,F,q.angle,{x:q.x,y:q.y},Y,f)&&V.collide(t,e,F,q.angle,{x:q.x,y:q.y},Y,f))return p(w),!0}l&&o.length>0&&(y(P),y(B))}function b(w,x,C){return Mt(w,x,C)}function E(w,x){var C=w._private,S=h,A;x?A=x+"-":A="",w.boundingBox();var R=C.labelBounds[x||"main"],D=w.pstyle(A+"label").value,_=w.pstyle("text-events").strValue==="yes";if(!(!_||!D)){var M=b(C.rscratch,"labelX",x),k=b(C.rscratch,"labelY",x),O=b(C.rscratch,"labelAngle",x),P=w.pstyle(A+"text-margin-x").pfValue,B=w.pstyle(A+"text-margin-y").pfValue,F=R.x1-S-P,N=R.x2+S-P,q=R.y1-S-B,V=R.y2+S-B;if(O){var Y=Math.cos(O),H=Math.sin(O),Z=function(j,ne){return j=j-M,ne=ne-k,{x:j*Y-ne*H+M,y:j*H+ne*Y+k}},ee=Z(F,q),ie=Z(F,V),J=Z(N,q),G=Z(N,V),$=[ee.x+P,ee.y+B,J.x+P,J.y+B,G.x+P,G.y+B,ie.x+P,ie.y+B];if(Ot(t,e,$))return p(w),!0}else if(Pr(R,t,e))return p(w),!0}}for(var T=s.length-1;T>=0;T--){var I=s[T];I.isNode()?y(I)||E(I):m(I)||E(I)||E(I,"source")||E(I,"target")}return o};In.getAllInBox=function(t,e,r,n){var a=this.getCachedZSortedEles().interactive,i=this.cy.zoom(),s=2/i,o=[],u=Math.min(t,r),l=Math.max(t,r),f=Math.min(e,n),c=Math.max(e,n);t=u,r=l,e=f,n=c;var h=Rt({x1:t,y1:e,x2:r,y2:n}),d=[{x:h.x1,y:h.y1},{x:h.x2,y:h.y1},{x:h.x2,y:h.y2},{x:h.x1,y:h.y2}],v=[[d[0],d[1]],[d[1],d[2]],[d[2],d[3]],[d[3],d[0]]];function g(j,ne,re){return Mt(j,ne,re)}function p(j,ne){var re=j._private,Ie=s,se="";j.boundingBox();var be=re.labelBounds.main;if(!be)return null;var ge=g(re.rscratch,"labelX",ne),oe=g(re.rscratch,"labelY",ne),de=g(re.rscratch,"labelAngle",ne),fe=j.pstyle(se+"text-margin-x").pfValue,ve=j.pstyle(se+"text-margin-y").pfValue,pe=be.x1-Ie-fe,Ce=be.x2+Ie-fe,Pe=be.y1-Ie-ve,Ne=be.y2+Ie-ve;if(de){var Me=Math.cos(de),Be=Math.sin(de),Te=function(K,L){return K=K-ge,L=L-oe,{x:K*Me-L*Be+ge,y:K*Be+L*Me+oe}};return[Te(pe,Pe),Te(Ce,Pe),Te(Ce,Ne),Te(pe,Ne)]}else return[{x:pe,y:Pe},{x:Ce,y:Pe},{x:Ce,y:Ne},{x:pe,y:Ne}]}function y(j,ne,re,Ie){function se(be,ge,oe){return(oe.y-be.y)*(ge.x-be.x)>(ge.y-be.y)*(oe.x-be.x)}return se(j,re,Ie)!==se(ne,re,Ie)&&se(j,ne,re)!==se(j,ne,Ie)}for(var m=0;m<a.length;m++){var b=a[m];if(b.isNode()){var E=b,T=E.pstyle("text-events").strValue==="yes",I=E.pstyle("box-selection").strValue,w=E.pstyle("box-select-labels").strValue==="yes";if(I==="none")continue;var x=(I==="overlap"||w)&&T,C=E.boundingBox({includeNodes:!0,includeEdges:!1,includeLabels:x});if(I==="contain"){var S=!1;if(w&&T){var A=p(E);A&&Ro(A,d)&&(o.push(E),S=!0)}!S&&Tx(h,C)&&o.push(E)}else if(I==="overlap"&&Lv(h,C)){var R=E.boundingBox({includeNodes:!0,includeEdges:!0,includeLabels:!1,includeMainLabels:!1,includeSourceLabels:!1,includeTargetLabels:!1}),D=[{x:R.x1,y:R.y1},{x:R.x2,y:R.y1},{x:R.x2,y:R.y2},{x:R.x1,y:R.y2}];if(Ro(D,d))o.push(E);else{var _=p(E);_&&Ro(_,d)&&o.push(E)}}}else{var M=b,k=M._private,O=k.rscratch,P=M.pstyle("box-selection").strValue;if(P==="none")continue;if(P==="contain"){if(O.startX!=null&&O.startY!=null&&!Pr(h,O.startX,O.startY)||O.endX!=null&&O.endY!=null&&!Pr(h,O.endX,O.endY))continue;if(O.edgeType==="bezier"||O.edgeType==="multibezier"||O.edgeType==="self"||O.edgeType==="compound"||O.edgeType==="segments"||O.edgeType==="haystack"){for(var B=k.rstyle.bezierPts||k.rstyle.linePts||k.rstyle.haystackPts,F=!0,N=0;N<B.length;N++)if(!up(h,B[N])){F=!1;break}F&&o.push(M)}else O.edgeType==="straight"&&o.push(M)}else if(P==="overlap"){var q=!1;if(O.startX!=null&&O.startY!=null&&O.endX!=null&&O.endY!=null&&(Pr(h,O.startX,O.startY)||Pr(h,O.endX,O.endY)))o.push(M),q=!0;else if(!q&&O.edgeType==="haystack"){for(var V=k.rstyle.haystackPts,Y=0;Y<V.length;Y++)if(up(h,V[Y])){o.push(M),q=!0;break}}if(!q){var H=k.rstyle.bezierPts||k.rstyle.linePts||k.rstyle.haystackPts;if((!H||H.length<2)&&O.edgeType==="straight"&&O.startX!=null&&O.startY!=null&&O.endX!=null&&O.endY!=null&&(H=[{x:O.startX,y:O.startY},{x:O.endX,y:O.endY}]),!H||H.length<2)continue;for(var Z=0;Z<H.length-1;Z++){for(var ee=H[Z],ie=H[Z+1],J=0;J<v.length;J++){var G=at(v[J],2),$=G[0],U=G[1];if(y(ee,ie,$,U)){o.push(M),q=!0;break}}if(q)break}}}}}return o};var es={};es.calculateArrowAngles=function(t){var e=t._private.rscratch,r=e.edgeType==="haystack",n=e.edgeType==="bezier",a=e.edgeType==="multibezier",i=e.edgeType==="segments",s=e.edgeType==="compound",o=e.edgeType==="self",u,l,f,c,h,d,y,m;if(r?(f=e.haystackPts[0],c=e.haystackPts[1],h=e.haystackPts[2],d=e.haystackPts[3]):(f=e.arrowStartX,c=e.arrowStartY,h=e.arrowEndX,d=e.arrowEndY),y=e.midX,m=e.midY,i)u=f-e.segpts[0],l=c-e.segpts[1];else if(a||s||o||n){var v=e.allpts,g=dt(v[0],v[2],v[4],.1),p=dt(v[1],v[3],v[5],.1);u=f-g,l=c-p}else u=f-y,l=c-m;e.srcArrowAngle=pi(u,l);var y=e.midX,m=e.midY;if(r&&(y=(f+h)/2,m=(c+d)/2),u=h-f,l=d-c,i){var v=e.allpts;if(v.length/2%2===0){var b=v.length/2,E=b-2;u=v[b]-v[E],l=v[b+1]-v[E+1]}else if(e.isRound)u=e.midVector[1],l=-e.midVector[0];else{var b=v.length/2-1,E=b-2;u=v[b]-v[E],l=v[b+1]-v[E+1]}}else if(a||s||o){var v=e.allpts,T=e.ctrlpts,I,w,x,C;if(T.length/2%2===0){var S=v.length/2-1,A=S+2,R=A+2;I=dt(v[S],v[A],v[R],0),w=dt(v[S+1],v[A+1],v[R+1],0),x=dt(v[S],v[A],v[R],1e-4),C=dt(v[S+1],v[A+1],v[R+1],1e-4)}else{var A=v.length/2-1,S=A-2,R=A+2;I=dt(v[S],v[A],v[R],.4999),w=dt(v[S+1],v[A+1],v[R+1],.4999),x=dt(v[S],v[A],v[R],.5),C=dt(v[S+1],v[A+1],v[R+1],.5)}u=x-I,l=C-w}if(e.midtgtArrowAngle=pi(u,l),e.midDispX=u,e.midDispY=l,u*=-1,l*=-1,i){var v=e.allpts;if(v.length/2%2!==0){if(!e.isRound){var b=v.length/2-1,D=b+2;u=-(v[D]-v[b]),l=-(v[D+1]-v[b+1])}}}if(e.midsrcArrowAngle=pi(u,l),i)u=h-e.segpts[e.segpts.length-2],l=d-e.segpts[e.segpts.length-1];else if(a||s||o||n){var v=e.allpts,_=v.length,g=dt(v[_-6],v[_-4],v[_-2],.9),p=dt(v[_-5],v[_-3],v[_-1],.9);u=h-g,l=d-p}else u=h-y,l=d-m;e.tgtArrowAngle=pi(u,l)};es.getArrowWidth=es.getArrowHeight=function(t,e){var r=this.arrowWidthCache=this.arrowWidthCache||{},n=r[t+", "+e];return n||(n=Math.max(Math.pow(t*13.37,.9),29)*e,r[t+", "+e]=n,n)};var Jd,ev,rr={},Gt={},Uy,Hy,dn,Bi,cr,sn,fn,er,qn,Ci,yT,mT,tv,rv,Yy,Wy=function(e,r,n){n.x=r.x-e.x,n.y=r.y-e.y,n.len=Math.sqrt(n.x*n.x+n.y*n.y),n.nx=n.x/n.len,n.ny=n.y/n.len,n.ang=Math.atan2(n.ny,n.nx)},S2=function(e,r){r.x=e.x*-1,r.y=e.y*-1,r.nx=e.nx*-1,r.ny=e.ny*-1,r.ang=e.ang>0?-(Math.PI-e.ang):Math.PI+e.ang},A2=function(e,r,n,a,i){if(e!==Yy?Wy(r,e,rr):S2(Gt,rr),Wy(r,n,Gt),Uy=rr.nx*Gt.ny-rr.ny*Gt.nx,Hy=rr.nx*Gt.nx-rr.ny*-Gt.ny,cr=Math.asin(Math.max(-1,Math.min(1,Uy))),Math.abs(cr)<1e-6){Jd=r.x,ev=r.y,fn=qn=0;return}dn=1,Bi=!1,Hy<0?cr<0?cr=Math.PI+cr:(cr=Math.PI-cr,dn=-1,Bi=!0):cr>0&&(dn=-1,Bi=!0),r.radius!==void 0?qn=r.radius:qn=a,sn=cr/2,Ci=Math.min(rr.len/2,Gt.len/2),i?(er=Math.abs(Math.cos(sn)*qn/Math.sin(sn)),er>Ci?(er=Ci,fn=Math.abs(er*Math.sin(sn)/Math.cos(sn))):fn=qn):(er=Math.min(Ci,qn),fn=Math.abs(er*Math.sin(sn)/Math.cos(sn))),tv=r.x+Gt.nx*er,rv=r.y+Gt.ny*er,Jd=tv-Gt.ny*fn*dn,ev=rv+Gt.nx*fn*dn,yT=r.x+rr.nx*er,mT=r.y+rr.ny*er,Yy=r};function bT(t,e){e.radius===0?t.lineTo(e.cx,e.cy):t.arc(e.cx,e.cy,e.radius,e.startAngle,e.endAngle,e.counterClockwise)}function Vv(t,e,r,n){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0;return n===0||e.radius===0?{cx:e.x,cy:e.y,radius:0,startX:e.x,startY:e.y,stopX:e.x,stopY:e.y,startAngle:void 0,endAngle:void 0,counterClockwise:void 0}:(A2(t,e,r,n,a),{cx:Jd,cy:ev,radius:fn,startX:yT,startY:mT,stopX:tv,stopY:rv,startAngle:rr.ang+Math.PI/2*dn,endAngle:Gt.ang-Math.PI/2*dn,counterClockwise:Bi})}var Wa=.01,I2=Math.sqrt(2*Wa),Ct={};Ct.findMidptPtsEtc=function(t,e){var r=e.posPts,n=e.intersectionPts,a=e.vectorNormInverse,i,s=t.pstyle("source-endpoint"),o=t.pstyle("target-endpoint"),u=s.units!=null&&o.units!=null,l=function(T,I,w,x){var C=x-I,S=w-T,A=Math.sqrt(S*S+C*C);return{x:-C/A,y:S/A}},f=t.pstyle("edge-distances").value;switch(f){case"node-position":i=r;break;case"intersection":i=n;break;case"endpoints":{if(u){var c=this.manualEndptToPx(t.source()[0],s),h=at(c,2),d=h[0],v=h[1],g=this.manualEndptToPx(t.target()[0],o),p=at(g,2),y=p[0],m=p[1],b={x1:d,y1:v,x2:y,y2:m};a=l(d,v,y,m),i=b}else Ve("Edge ".concat(t.id()," has edge-distances:endpoints specified without manual endpoints specified via source-endpoint and target-endpoint.  Falling back on edge-distances:intersection (default).")),i=n;break}}return{midptPts:i,vectorNormInverse:a}};Ct.findHaystackPoints=function(t){for(var e=0;e<t.length;e++){var r=t[e],n=r._private,a=n.rscratch;if(!a.haystack){var i=Math.random()*2*Math.PI;a.source={x:Math.cos(i),y:Math.sin(i)},i=Math.random()*2*Math.PI,a.target={x:Math.cos(i),y:Math.sin(i)}}var s=n.source,o=n.target,u=s.position(),l=o.position(),f=s.width(),c=o.width(),h=s.height(),d=o.height(),v=r.pstyle("haystack-radius").value,g=v/2;a.haystackPts=a.allpts=[a.source.x*f*g+u.x,a.source.y*h*g+u.y,a.target.x*c*g+l.x,a.target.y*d*g+l.y],a.midX=(a.allpts[0]+a.allpts[2])/2,a.midY=(a.allpts[1]+a.allpts[3])/2,a.edgeType="haystack",a.haystack=!0,this.storeEdgeProjections(r),this.calculateArrowAngles(r),this.recalculateEdgeLabelProjections(r),this.calculateLabelAngles(r)}};Ct.findSegmentsPoints=function(t,e){var r=t._private.rscratch,n=t.pstyle("segment-weights"),a=t.pstyle("segment-distances"),i=t.pstyle("segment-radii"),s=t.pstyle("radius-type"),o=Math.min(n.pfValue.length,a.pfValue.length),u=i.pfValue[i.pfValue.length-1],l=s.pfValue[s.pfValue.length-1];r.edgeType="segments",r.segpts=[],r.radii=[],r.isArcRadius=[];for(var f=0;f<o;f++){var c=n.pfValue[f],h=a.pfValue[f],d=1-c,v=c,g=this.findMidptPtsEtc(t,e),p=g.midptPts,y=g.vectorNormInverse,m={x:p.x1*d+p.x2*v,y:p.y1*d+p.y2*v};r.segpts.push(m.x+y.x*h,m.y+y.y*h),r.radii.push(i.pfValue[f]!==void 0?i.pfValue[f]:u),r.isArcRadius.push((s.pfValue[f]!==void 0?s.pfValue[f]:l)==="arc-radius")}};Ct.findLoopPoints=function(t,e,r,n){var a=t._private.rscratch,i=e.dirCounts,s=e.srcPos,o=t.pstyle("control-point-distances"),u=o?o.pfValue[0]:void 0,l=t.pstyle("loop-direction").pfValue,f=t.pstyle("loop-sweep").pfValue,c=t.pstyle("control-point-step-size").pfValue;a.edgeType="self";var h=r,d=c;n&&(h=0,d=u);var v=l-Math.PI/2,g=v-f/2,p=v+f/2,y=l+"_"+f;h=i[y]===void 0?i[y]=0:++i[y],a.ctrlpts=[s.x+Math.cos(g)*1.4*d*(h/3+1),s.y+Math.sin(g)*1.4*d*(h/3+1),s.x+Math.cos(p)*1.4*d*(h/3+1),s.y+Math.sin(p)*1.4*d*(h/3+1)]};Ct.findCompoundLoopPoints=function(t,e,r,n){var a=t._private.rscratch;a.edgeType="compound";var i=e.srcPos,s=e.tgtPos,o=e.srcW,u=e.srcH,l=e.tgtW,f=e.tgtH,c=t.pstyle("control-point-step-size").pfValue,h=t.pstyle("control-point-distances"),d=h?h.pfValue[0]:void 0,v=r,g=c;n&&(v=0,g=d);var p=50,y={x:i.x-o/2,y:i.y-u/2},m={x:s.x-l/2,y:s.y-f/2},b={x:Math.min(y.x,m.x),y:Math.min(y.y,m.y)},E=.5,T=Math.max(E,Math.log(o*Wa)),I=Math.max(E,Math.log(l*Wa));a.ctrlpts=[b.x,b.y-(1+Math.pow(p,1.12)/100)*g*(v/3+1)*T,b.x-(1+Math.pow(p,1.12)/100)*g*(v/3+1)*I,b.y]};Ct.findStraightEdgePoints=function(t){t._private.rscratch.edgeType="straight"};Ct.findBezierPoints=function(t,e,r,n,a){var i=t._private.rscratch,s=t.pstyle("control-point-step-size").pfValue,o=t.pstyle("control-point-distances"),u=t.pstyle("control-point-weights"),l=o&&u?Math.min(o.value.length,u.value.length):1,f=o?o.pfValue[0]:void 0,c=u.value[0],h=n;i.edgeType=h?"multibezier":"bezier",i.ctrlpts=[];for(var d=0;d<l;d++){var v=(.5-e.eles.length/2+r)*s*(a?-1:1),g=void 0,p=_v(v);h&&(f=o?o.pfValue[d]:s,c=u.value[d]),n?g=f:g=f!==void 0?p*f:void 0;var y=g!==void 0?g:v,m=1-c,b=c,E=this.findMidptPtsEtc(t,e),T=E.midptPts,I=E.vectorNormInverse,w={x:T.x1*m+T.x2*b,y:T.y1*m+T.y2*b};i.ctrlpts.push(w.x+I.x*y,w.y+I.y*y)}};Ct.findTaxiPoints=function(t,e){var r=t._private.rscratch;r.edgeType="segments";var n="vertical",a="horizontal",i="leftward",s="rightward",o="downward",u="upward",l="auto",f=e.posPts,c=e.srcW,h=e.srcH,d=e.tgtW,v=e.tgtH,g=t.pstyle("edge-distances").value,p=g!=="node-position",y=t.pstyle("taxi-direction").value,m=y,b=t.pstyle("taxi-turn"),E=b.units==="%",T=b.pfValue,I=T<0,w=t.pstyle("taxi-turn-min-distance").pfValue,x=p?(c+d)/2:0,C=p?(h+v)/2:0,S=f.x2-f.x1,A=f.y2-f.y1,R=function(L,z){return L>0?Math.max(L-z,0):Math.min(L+z,0)},D=R(S,x),_=R(A,C),M=!1;m===l?y=Math.abs(D)>Math.abs(_)?a:n:m===u||m===o?(y=n,M=!0):(m===i||m===s)&&(y=a,M=!0);var k=y===n,O=k?_:D,P=k?A:S,B=_v(P),F=!1;!(M&&(E||I))&&(m===o&&P<0||m===u&&P>0||m===i&&P>0||m===s&&P<0)&&(B*=-1,O=B*Math.abs(O),F=!0);var N;if(E){var q=T<0?1+T:T;N=q*O}else{var V=T<0?O:0;N=V+T*B}var Y=function(L){return Math.abs(L)<w||Math.abs(L)>=Math.abs(O)},H=Y(N),Z=Y(Math.abs(O)-Math.abs(N)),ee=H||Z;if(ee&&!F)if(k){var ie=Math.abs(P)<=h/2,J=Math.abs(S)<=d/2;if(ie){var G=(f.x1+f.x2)/2,$=f.y1,U=f.y2;r.segpts=[G,$,G,U]}else if(J){var j=(f.y1+f.y2)/2,ne=f.x1,re=f.x2;r.segpts=[ne,j,re,j]}else r.segpts=[f.x1,f.y2]}else{var Ie=Math.abs(P)<=c/2,se=Math.abs(A)<=v/2;if(Ie){var be=(f.y1+f.y2)/2,ge=f.x1,oe=f.x2;r.segpts=[ge,be,oe,be]}else if(se){var de=(f.x1+f.x2)/2,fe=f.y1,ve=f.y2;r.segpts=[de,fe,de,ve]}else r.segpts=[f.x2,f.y1]}else if(k){var pe=f.y1+N+(p?h/2*B:0),Ce=f.x1,Pe=f.x2;r.segpts=[Ce,pe,Pe,pe]}else{var Ne=f.x1+N+(p?c/2*B:0),Me=f.y1,Be=f.y2;r.segpts=[Ne,Me,Ne,Be]}if(r.isRound){var Te=t.pstyle("taxi-radius").value,ue=t.pstyle("radius-type").value[0]==="arc-radius";r.radii=new Array(r.segpts.length/2).fill(Te),r.isArcRadius=new Array(r.segpts.length/2).fill(ue)}};Ct.tryToCorrectInvalidPoints=function(t,e){var r=t._private.rscratch;if(r.edgeType==="bezier"){var n=e.srcPos,a=e.tgtPos,i=e.srcW,s=e.srcH,o=e.tgtW,u=e.tgtH,l=e.srcShape,f=e.tgtShape,c=e.srcCornerRadius,h=e.tgtCornerRadius,d=e.srcRs,v=e.tgtRs,g=!ae(r.startX)||!ae(r.startY),p=!ae(r.arrowStartX)||!ae(r.arrowStartY),y=!ae(r.endX)||!ae(r.endY),m=!ae(r.arrowEndX)||!ae(r.arrowEndY),b=3,E=this.getArrowWidth(t.pstyle("width").pfValue,t.pstyle("arrow-scale").value)*this.arrowShapeWidth,T=b*E,I=xn({x:r.ctrlpts[0],y:r.ctrlpts[1]},{x:r.startX,y:r.startY}),w=I<T,x=xn({x:r.ctrlpts[0],y:r.ctrlpts[1]},{x:r.endX,y:r.endY}),C=x<T,S=!1;if(g||p||w){S=!0;var A={x:r.ctrlpts[0]-n.x,y:r.ctrlpts[1]-n.y},R=Math.sqrt(A.x*A.x+A.y*A.y),D={x:A.x/R,y:A.y/R},_=Math.max(i,s),M={x:r.ctrlpts[0]+D.x*2*_,y:r.ctrlpts[1]+D.y*2*_},k=l.intersectLine(n.x,n.y,i,s,M.x,M.y,0,c,d);w?(r.ctrlpts[0]=r.ctrlpts[0]+D.x*(T-I),r.ctrlpts[1]=r.ctrlpts[1]+D.y*(T-I)):(r.ctrlpts[0]=k[0]+D.x*T,r.ctrlpts[1]=k[1]+D.y*T)}if(y||m||C){S=!0;var O={x:r.ctrlpts[0]-a.x,y:r.ctrlpts[1]-a.y},P=Math.sqrt(O.x*O.x+O.y*O.y),B={x:O.x/P,y:O.y/P},F=Math.max(i,s),N={x:r.ctrlpts[0]+B.x*2*F,y:r.ctrlpts[1]+B.y*2*F},q=f.intersectLine(a.x,a.y,o,u,N.x,N.y,0,h,v);C?(r.ctrlpts[0]=r.ctrlpts[0]+B.x*(T-x),r.ctrlpts[1]=r.ctrlpts[1]+B.y*(T-x)):(r.ctrlpts[0]=q[0]+B.x*T,r.ctrlpts[1]=q[1]+B.y*T)}S&&this.findEndpoints(t)}};Ct.storeAllpts=function(t){var e=t._private.rscratch;if(e.edgeType==="multibezier"||e.edgeType==="bezier"||e.edgeType==="self"||e.edgeType==="compound"){e.allpts=[],e.allpts.push(e.startX,e.startY);for(var r=0;r+1<e.ctrlpts.length;r+=2)e.allpts.push(e.ctrlpts[r],e.ctrlpts[r+1]),r+3<e.ctrlpts.length&&e.allpts.push((e.ctrlpts[r]+e.ctrlpts[r+2])/2,(e.ctrlpts[r+1]+e.ctrlpts[r+3])/2);e.allpts.push(e.endX,e.endY);var n,a;e.ctrlpts.length/2%2===0?(n=e.allpts.length/2-1,e.midX=e.allpts[n],e.midY=e.allpts[n+1]):(n=e.allpts.length/2-3,a=.5,e.midX=dt(e.allpts[n],e.allpts[n+2],e.allpts[n+4],a),e.midY=dt(e.allpts[n+1],e.allpts[n+3],e.allpts[n+5],a))}else if(e.edgeType==="straight")e.allpts=[e.startX,e.startY,e.endX,e.endY],e.midX=(e.startX+e.endX+e.arrowStartX+e.arrowEndX)/4,e.midY=(e.startY+e.endY+e.arrowStartY+e.arrowEndY)/4;else if(e.edgeType==="segments"){if(e.allpts=[],e.allpts.push(e.startX,e.startY),e.allpts.push.apply(e.allpts,e.segpts),e.allpts.push(e.endX,e.endY),e.isRound){e.roundCorners=[];for(var i=2;i+3<e.allpts.length;i+=2){var s=e.radii[i/2-1],o=e.isArcRadius[i/2-1];e.roundCorners.push(Vv({x:e.allpts[i-2],y:e.allpts[i-1]},{x:e.allpts[i],y:e.allpts[i+1],radius:s},{x:e.allpts[i+2],y:e.allpts[i+3]},s,o))}}if(e.segpts.length%4===0){var u=e.segpts.length/2,l=u-2;e.midX=(e.segpts[l]+e.segpts[u])/2,e.midY=(e.segpts[l+1]+e.segpts[u+1])/2}else{var f=e.segpts.length/2-1;if(!e.isRound)e.midX=e.segpts[f],e.midY=e.segpts[f+1];else{var c={x:e.segpts[f],y:e.segpts[f+1]},h=e.roundCorners[f/2];if(h.radius===0){var d={x:e.segpts[f+2],y:e.segpts[f+3]};e.midX=c.x,e.midY=c.y,e.midVector=[c.y-d.y,d.x-c.x]}else{var v=[c.x-h.cx,c.y-h.cy],g=h.radius/Math.sqrt(Math.pow(v[0],2)+Math.pow(v[1],2));v=v.map(function(p){return p*g}),e.midX=h.cx+v[0],e.midY=h.cy+v[1],e.midVector=v}}}}};Ct.checkForInvalidEdgeWarning=function(t){var e=t[0]._private.rscratch;e.nodesOverlap||ae(e.startX)&&ae(e.startY)&&ae(e.endX)&&ae(e.endY)?e.loggedErr=!1:e.loggedErr||(e.loggedErr=!0,Ve("Edge `"+t.id()+"` has invalid endpoints and so it is impossible to draw.  Adjust your edge style (e.g. control points) accordingly or use an alternative edge type.  This is expected behaviour when the source node and the target node overlap."))};Ct.findEdgeControlPoints=function(t){var e=this;if(!(!t||t.length===0)){for(var r=this,n=r.cy,a=n.hasCompoundNodes(),i=new vr,s=function(C,S){return[].concat(Ui(C),[S?1:0]).join("-")},o=[],u=[],l=0;l<t.length;l++){var f=t[l],c=f._private,h=f.pstyle("curve-style").value;if(!(f.removed()||!f.takesUpSpace())){if(h==="haystack"){u.push(f);continue}var d=h==="unbundled-bezier"||Or(h,"segments")||h==="straight"||h==="straight-triangle"||Or(h,"taxi"),v=h==="unbundled-bezier"||h==="bezier",g=c.source,p=c.target,y=g.poolIndex(),m=p.poolIndex(),b=[y,m].sort(),E=s(b,d),T=i.get(E);T==null&&(T={eles:[]},o.push({pairId:b,edgeIsUnbundled:d}),i.set(E,T)),T.eles.push(f),d&&(T.hasUnbundled=!0),v&&(T.hasBezier=!0)}}for(var I=function(){var C=o[w],S=C.pairId,A=C.edgeIsUnbundled,R=s(S,A),D=i.get(R),_;if(!D.hasUnbundled){var M=D.eles[0].parallelEdges().filter(function(ue){return ue.isBundledBezier()});Rv(D.eles),M.forEach(function(ue){return D.eles.push(ue)}),D.eles.sort(function(ue,K){return ue.poolIndex()-K.poolIndex()})}var k=D.eles[0],O=k.source(),P=k.target();if(O.poolIndex()>P.poolIndex()){var B=O;O=P,P=B}var F=D.srcPos=O.position(),N=D.tgtPos=P.position(),q=D.srcW=O.outerWidth(),V=D.srcH=O.outerHeight(),Y=D.tgtW=P.outerWidth(),H=D.tgtH=P.outerHeight(),Z=D.srcShape=r.nodeShapes[e.getNodeShape(O)],ee=D.tgtShape=r.nodeShapes[e.getNodeShape(P)],ie=D.srcCornerRadius=O.pstyle("corner-radius").value==="auto"?"auto":O.pstyle("corner-radius").pfValue,J=D.tgtCornerRadius=P.pstyle("corner-radius").value==="auto"?"auto":P.pstyle("corner-radius").pfValue,G=D.tgtRs=P._private.rscratch,$=D.srcRs=O._private.rscratch;D.dirCounts={north:0,west:0,south:0,east:0,northwest:0,southwest:0,northeast:0,southeast:0};for(var U=0;U<D.eles.length;U++){var j=D.eles[U],ne=j[0]._private.rscratch,re=j.pstyle("curve-style").value,Ie=re==="unbundled-bezier"||Or(re,"segments")||Or(re,"taxi"),se=!O.same(j.source());if(!D.calculatedIntersection&&O!==P&&(D.hasBezier||D.hasUnbundled)){D.calculatedIntersection=!0;var be=Z.intersectLine(F.x,F.y,q,V,N.x,N.y,0,ie,$),ge=D.srcIntn=be,oe=ee.intersectLine(N.x,N.y,Y,H,F.x,F.y,0,J,G),de=D.tgtIntn=oe,fe=D.intersectionPts={x1:be[0],x2:oe[0],y1:be[1],y2:oe[1]},ve=D.posPts={x1:F.x,x2:N.x,y1:F.y,y2:N.y},pe=oe[1]-be[1],Ce=oe[0]-be[0],Pe=Math.sqrt(Ce*Ce+pe*pe);ae(Pe)&&Pe>=I2||(Pe=Math.sqrt(Math.max(Ce*Ce,Wa)+Math.max(pe*pe,Wa)));var Ne=D.vector={x:Ce,y:pe},Me=D.vectorNorm={x:Ne.x/Pe,y:Ne.y/Pe},Be={x:-Me.y,y:Me.x};D.nodesOverlap=!ae(Pe)||ee.checkPoint(be[0],be[1],0,Y,H,N.x,N.y,J,G)||Z.checkPoint(oe[0],oe[1],0,q,V,F.x,F.y,ie,$),D.vectorNormInverse=Be,_={nodesOverlap:D.nodesOverlap,dirCounts:D.dirCounts,calculatedIntersection:!0,hasBezier:D.hasBezier,hasUnbundled:D.hasUnbundled,eles:D.eles,srcPos:N,srcRs:G,tgtPos:F,tgtRs:$,srcW:Y,srcH:H,tgtW:q,tgtH:V,srcIntn:de,tgtIntn:ge,srcShape:ee,tgtShape:Z,posPts:{x1:ve.x2,y1:ve.y2,x2:ve.x1,y2:ve.y1},intersectionPts:{x1:fe.x2,y1:fe.y2,x2:fe.x1,y2:fe.y1},vector:{x:-Ne.x,y:-Ne.y},vectorNorm:{x:-Me.x,y:-Me.y},vectorNormInverse:{x:-Be.x,y:-Be.y}}}var Te=se?_:D;ne.nodesOverlap=Te.nodesOverlap,ne.srcIntn=Te.srcIntn,ne.tgtIntn=Te.tgtIntn,ne.isRound=re.startsWith("round"),a&&(O.isParent()||O.isChild()||P.isParent()||P.isChild())&&(O.parents().anySame(P)||P.parents().anySame(O)||O.same(P)&&O.isParent())?e.findCompoundLoopPoints(j,Te,U,Ie):O===P?e.findLoopPoints(j,Te,U,Ie):re.endsWith("segments")?e.findSegmentsPoints(j,Te):re.endsWith("taxi")?e.findTaxiPoints(j,Te):re==="straight"||!Ie&&D.eles.length%2===1&&U===Math.floor(D.eles.length/2)?e.findStraightEdgePoints(j):e.findBezierPoints(j,Te,U,Ie,se),e.findEndpoints(j),e.tryToCorrectInvalidPoints(j,Te),e.checkForInvalidEdgeWarning(j),e.storeAllpts(j),e.storeEdgeProjections(j),e.calculateArrowAngles(j),e.recalculateEdgeLabelProjections(j),e.calculateLabelAngles(j)}},w=0;w<o.length;w++)I();this.findHaystackPoints(u)}};function wT(t){var e=[];if(t!=null){for(var r=0;r<t.length;r+=2){var n=t[r],a=t[r+1];e.push({x:n,y:a})}return e}}Ct.getSegmentPoints=function(t){var e=t[0]._private.rscratch;this.recalculateRenderedStyle(t);var r=e.edgeType;if(r==="segments")return wT(e.segpts)};Ct.getControlPoints=function(t){var e=t[0]._private.rscratch;this.recalculateRenderedStyle(t);var r=e.edgeType;if(r==="bezier"||r==="multibezier"||r==="self"||r==="compound")return wT(e.ctrlpts)};Ct.getEdgeMidpoint=function(t){var e=t[0]._private.rscratch;return this.recalculateRenderedStyle(t),{x:e.midX,y:e.midY}};var ai={};ai.manualEndptToPx=function(t,e){var r=this,n=t.position(),a=t.outerWidth(),i=t.outerHeight(),s=t._private.rscratch;if(e.value.length===2){var o=[e.pfValue[0],e.pfValue[1]];return e.units[0]==="%"&&(o[0]=o[0]*a),e.units[1]==="%"&&(o[1]=o[1]*i),o[0]+=n.x,o[1]+=n.y,o}else{var u=e.pfValue[0];u=-Math.PI/2+u;var l=2*Math.max(a,i),f=[n.x+Math.cos(u)*l,n.y+Math.sin(u)*l];return r.nodeShapes[this.getNodeShape(t)].intersectLine(n.x,n.y,a,i,f[0],f[1],0,t.pstyle("corner-radius").value==="auto"?"auto":t.pstyle("corner-radius").pfValue,s)}};ai.findEndpoints=function(t){var e,r,n,a,i=this,s,o=t.source()[0],u=t.target()[0],l=o.position(),f=u.position(),c=t.pstyle("target-arrow-shape").value,h=t.pstyle("source-arrow-shape").value,d=t.pstyle("target-distance-from-node").pfValue,v=t.pstyle("source-distance-from-node").pfValue,g=o._private.rscratch,p=u._private.rscratch,y=t.pstyle("curve-style").value,m=t._private.rscratch,b=m.edgeType,E=Or(y,"taxi"),T=b==="self"||b==="compound",I=b==="bezier"||b==="multibezier"||T,w=b!=="bezier",x=b==="straight"||b==="segments",C=b==="segments",S=I||w||x,A=T||E,R=t.pstyle("source-endpoint"),D=A?"outside-to-node":R.value,_=o.pstyle("corner-radius").value==="auto"?"auto":o.pstyle("corner-radius").pfValue,M=t.pstyle("target-endpoint"),k=A?"outside-to-node":M.value,O=u.pstyle("corner-radius").value==="auto"?"auto":u.pstyle("corner-radius").pfValue;m.srcManEndpt=R,m.tgtManEndpt=M;var P,B,F,N,q=(e=(M==null||(r=M.pfValue)===null||r===void 0?void 0:r.length)===2?M.pfValue:null)!==null&&e!==void 0?e:[0,0],V=(n=(R==null||(a=R.pfValue)===null||a===void 0?void 0:a.length)===2?R.pfValue:null)!==null&&n!==void 0?n:[0,0];if(I){var Y=[m.ctrlpts[0],m.ctrlpts[1]],H=w?[m.ctrlpts[m.ctrlpts.length-2],m.ctrlpts[m.ctrlpts.length-1]]:Y;P=H,B=Y}else if(x){var Z=C?m.segpts.slice(0,2):[f.x+q[0],f.y+q[1]],ee=C?m.segpts.slice(m.segpts.length-2):[l.x+V[0],l.y+V[1]];P=ee,B=Z}if(k==="inside-to-node")s=[f.x,f.y];else if(M.units)s=this.manualEndptToPx(u,M);else if(k==="outside-to-line")s=m.tgtIntn;else if(k==="outside-to-node"||k==="outside-to-node-or-label"?F=P:(k==="outside-to-line"||k==="outside-to-line-or-label")&&(F=[l.x,l.y]),s=i.nodeShapes[this.getNodeShape(u)].intersectLine(f.x,f.y,u.outerWidth(),u.outerHeight(),F[0],F[1],0,O,p),k==="outside-to-node-or-label"||k==="outside-to-line-or-label"){var ie=u._private.rscratch,J=ie.labelWidth,G=ie.labelHeight,$=ie.labelX,U=ie.labelY,j=J/2,ne=G/2,re=u.pstyle("text-valign").value;re==="top"?U-=ne:re==="bottom"&&(U+=ne);var Ie=u.pstyle("text-halign").value;Ie==="left"?$-=j:Ie==="right"&&($+=j);var se=$a(F[0],F[1],[$-j,U-ne,$+j,U-ne,$+j,U+ne,$-j,U+ne],f.x,f.y);if(se.length>0){var be=l,ge=ln(be,Un(s)),oe=ln(be,Un(se)),de=ge;if(oe<ge&&(s=se,de=oe),se.length>2){var fe=ln(be,{x:se[2],y:se[3]});fe<de&&(s=[se[2],se[3]])}}}var ve=yi(s,P,i.arrowShapes[c].spacing(t)+d),pe=yi(s,P,i.arrowShapes[c].gap(t)+d);if(m.endX=pe[0],m.endY=pe[1],m.arrowEndX=ve[0],m.arrowEndY=ve[1],D==="inside-to-node")s=[l.x,l.y];else if(R.units)s=this.manualEndptToPx(o,R);else if(D==="outside-to-line")s=m.srcIntn;else if(D==="outside-to-node"||D==="outside-to-node-or-label"?N=B:(D==="outside-to-line"||D==="outside-to-line-or-label")&&(N=[f.x,f.y]),s=i.nodeShapes[this.getNodeShape(o)].intersectLine(l.x,l.y,o.outerWidth(),o.outerHeight(),N[0],N[1],0,_,g),D==="outside-to-node-or-label"||D==="outside-to-line-or-label"){var Ce=o._private.rscratch,Pe=Ce.labelWidth,Ne=Ce.labelHeight,Me=Ce.labelX,Be=Ce.labelY,Te=Pe/2,ue=Ne/2,K=o.pstyle("text-valign").value;K==="top"?Be-=ue:K==="bottom"&&(Be+=ue);var L=o.pstyle("text-halign").value;L==="left"?Me-=Te:L==="right"&&(Me+=Te);var z=$a(N[0],N[1],[Me-Te,Be-ue,Me+Te,Be-ue,Me+Te,Be+ue,Me-Te,Be+ue],l.x,l.y);if(z.length>0){var W=f,X=ln(W,Un(s)),Q=ln(W,Un(z)),ce=X;if(Q<X&&(s=[z[0],z[1]],ce=Q),z.length>2){var te=ln(W,{x:z[2],y:z[3]});te<ce&&(s=[z[2],z[3]])}}}var ye=yi(s,B,i.arrowShapes[h].spacing(t)+v),he=yi(s,B,i.arrowShapes[h].gap(t)+v);m.startX=he[0],m.startY=he[1],m.arrowStartX=ye[0],m.arrowStartY=ye[1],S&&(!ae(m.startX)||!ae(m.startY)||!ae(m.endX)||!ae(m.endY)?m.badLine=!0:m.badLine=!1)};ai.getSourceEndpoint=function(t){var e=t[0]._private.rscratch;switch(this.recalculateRenderedStyle(t),e.edgeType){case"haystack":return{x:e.haystackPts[0],y:e.haystackPts[1]};default:return{x:e.arrowStartX,y:e.arrowStartY}}};ai.getTargetEndpoint=function(t){var e=t[0]._private.rscratch;switch(this.recalculateRenderedStyle(t),e.edgeType){case"haystack":return{x:e.haystackPts[2],y:e.haystackPts[3]};default:return{x:e.arrowEndX,y:e.arrowEndY}}};var Uv={};function R2(t,e,r){for(var n=function(l,f,c,h){return dt(l,f,c,h)},a=e._private,i=a.rstyle.bezierPts,s=0;s<t.bezierProjPcts.length;s++){var o=t.bezierProjPcts[s];i.push({x:n(r[0],r[2],r[4],o),y:n(r[1],r[3],r[5],o)})}}Uv.storeEdgeProjections=function(t){var e=t._private,r=e.rscratch,n=r.edgeType;if(e.rstyle.bezierPts=null,e.rstyle.linePts=null,e.rstyle.haystackPts=null,n==="multibezier"||n==="bezier"||n==="self"||n==="compound"){e.rstyle.bezierPts=[];for(var a=0;a+5<r.allpts.length;a+=4)R2(this,t,r.allpts.slice(a,a+6))}else if(n==="segments")for(var i=e.rstyle.linePts=[],a=0;a+1<r.allpts.length;a+=2)i.push({x:r.allpts[a],y:r.allpts[a+1]});else if(n==="haystack"){var s=r.haystackPts;e.rstyle.haystackPts=[{x:s[0],y:s[1]},{x:s[2],y:s[3]}]}e.rstyle.arrowWidth=this.getArrowWidth(t.pstyle("width").pfValue,t.pstyle("arrow-scale").value)*this.arrowShapeWidth};Uv.recalculateEdgeProjections=function(t){this.findEdgeControlPoints(t)};var sr={};sr.recalculateNodeLabelProjection=function(t){var e=t.pstyle("label").strValue;if(!Hr(e)){var r,n,a=t._private,i=t.width(),s=t.height(),o=t.padding(),u=t.position(),l=t.pstyle("text-halign").strValue,f=t.pstyle("text-valign").strValue,c=a.rscratch,h=a.rstyle;switch(l){case"left":r=u.x-i/2-o;break;case"right":r=u.x+i/2+o;break;default:r=u.x}switch(f){case"top":n=u.y-s/2-o;break;case"bottom":n=u.y+s/2+o;break;default:n=u.y}c.labelX=r,c.labelY=n,h.labelX=r,h.labelY=n,this.calculateLabelAngles(t),this.applyLabelDimensions(t)}};var ET=function(e,r){var n=Math.atan(r/e);return e===0&&n<0&&(n=n*-1),n},xT=function(e,r){var n=r.x-e.x,a=r.y-e.y;return ET(n,a)},D2=function(e,r,n,a){var i=za(0,a-.001,1),s=za(0,a+.001,1),o=Xn(e,r,n,i),u=Xn(e,r,n,s);return xT(o,u)};sr.recalculateEdgeLabelProjections=function(t){var e,r=t._private,n=r.rscratch,a=this,i={mid:t.pstyle("label").strValue,source:t.pstyle("source-label").strValue,target:t.pstyle("target-label").strValue};if(i.mid||i.source||i.target){e={x:n.midX,y:n.midY};var s=function(c,h,d){dr(r.rscratch,c,h,d),dr(r.rstyle,c,h,d)};s("labelX",null,e.x),s("labelY",null,e.y);var o=ET(n.midDispX,n.midDispY);s("labelAutoAngle",null,o);var u=function(){if(u.cache)return u.cache;for(var c=[],h=0;h+5<n.allpts.length;h+=4){var d={x:n.allpts[h],y:n.allpts[h+1]},v={x:n.allpts[h+2],y:n.allpts[h+3]},g={x:n.allpts[h+4],y:n.allpts[h+5]};c.push({p0:d,p1:v,p2:g,startDist:0,length:0,segments:[]})}var p=r.rstyle.bezierPts,y=a.bezierProjPcts.length;function m(w,x,C,S,A){var R=xn(x,C),D=w.segments[w.segments.length-1],_={p0:x,p1:C,t0:S,t1:A,startDist:D?D.startDist+D.length:0,length:R};w.segments.push(_),w.length+=R}for(var b=0;b<c.length;b++){var E=c[b],T=c[b-1];T&&(E.startDist=T.startDist+T.length),m(E,E.p0,p[b*y],0,a.bezierProjPcts[0]);for(var I=0;I<y-1;I++)m(E,p[b*y+I],p[b*y+I+1],a.bezierProjPcts[I],a.bezierProjPcts[I+1]);m(E,p[b*y+y-1],E.p2,a.bezierProjPcts[y-1],1)}return u.cache=c},l=function(c){var h,d=c==="source";if(i[c]){var v=t.pstyle(c+"-text-offset").pfValue;switch(n.edgeType){case"self":case"compound":case"bezier":case"multibezier":{for(var g=u(),p,y=0,m=0,b=0;b<g.length;b++){for(var E=g[d?b:g.length-1-b],T=0;T<E.segments.length;T++){var I=E.segments[d?T:E.segments.length-1-T],w=b===g.length-1&&T===E.segments.length-1;if(y=m,m+=I.length,m>=v||w){p={cp:E,segment:I};break}}if(p)break}var x=p.cp,C=p.segment,S=(v-y)/C.length,A=C.t1-C.t0,R=d?C.t0+A*S:C.t1-A*S;R=za(0,R,1),e=Xn(x.p0,x.p1,x.p2,R),h=D2(x.p0,x.p1,x.p2,R);break}case"straight":case"segments":case"haystack":{for(var D=0,_,M,k,O,P=n.allpts.length,B=0;B+3<P&&(d?(k={x:n.allpts[B],y:n.allpts[B+1]},O={x:n.allpts[B+2],y:n.allpts[B+3]}):(k={x:n.allpts[P-2-B],y:n.allpts[P-1-B]},O={x:n.allpts[P-4-B],y:n.allpts[P-3-B]}),_=xn(k,O),M=D,D+=_,!(D>=v));B+=2);var F=v-M,N=F/_;N=za(0,N,1),e=ZD(k,O,N),h=xT(k,O);break}}s("labelX",c,e.x),s("labelY",c,e.y),s("labelAutoAngle",c,h)}};l("source"),l("target"),this.applyLabelDimensions(t)}};sr.applyLabelDimensions=function(t){this.applyPrefixedLabelDimensions(t),t.isEdge()&&(this.applyPrefixedLabelDimensions(t,"source"),this.applyPrefixedLabelDimensions(t,"target"))};sr.applyPrefixedLabelDimensions=function(t,e){var r=t._private,n=this.getLabelText(t,e),a=En(n,t._private.labelDimsKey);if(Mt(r.rscratch,"prefixedLabelDimsKey",e)!==a){dr(r.rscratch,"prefixedLabelDimsKey",e,a);var i=this.calculateLabelDimensions(t,n),s=t.pstyle("line-height").pfValue,o=t.pstyle("text-wrap").strValue,u=Mt(r.rscratch,"labelWrapCachedLines",e)||[],l=o!=="wrap"?1:Math.max(u.length,1),f=i.height/l,c=f*s,h=i.width,d=i.height+(l-1)*(s-1)*f;dr(r.rstyle,"labelWidth",e,h),dr(r.rscratch,"labelWidth",e,h),dr(r.rstyle,"labelHeight",e,d),dr(r.rscratch,"labelHeight",e,d),dr(r.rscratch,"labelLineHeight",e,c)}};sr.getLabelText=function(t,e){var r=t._private,n=e?e+"-":"",a=t.pstyle(n+"label").strValue,i=t.pstyle("text-transform").value,s=function(V,Y){return Y?(dr(r.rscratch,V,e,Y),Y):Mt(r.rscratch,V,e)};if(!a)return"";i=="none"||(i=="uppercase"?a=a.toUpperCase():i=="lowercase"&&(a=a.toLowerCase()));var o=t.pstyle("text-wrap").value;if(o==="wrap"){var u=s("labelKey");if(u!=null&&s("labelWrapKey")===u)return s("labelWrapCachedText");for(var l="",f=a.split(`
`),c=t.pstyle("text-max-width").pfValue,h=t.pstyle("text-overflow-wrap").value,d=h==="anywhere",v=[],g=/[\s\u200b]+|$/g,p=0;p<f.length;p++){var y=f[p],m=this.calculateLabelDimensions(t,y),b=m.width;if(d){var E=y.split("").join(l);y=E}if(b>c){var T=y.matchAll(g),I="",w=0,x=Pt(T),C;try{for(x.s();!(C=x.n()).done;){var S=C.value,A=S[0],R=y.substring(w,S.index);w=S.index+A.length;var D=I.length===0?R:I+R+A,_=this.calculateLabelDimensions(t,D),M=_.width;M<=c?I+=R+A:(I&&v.push(I),I=R+A)}}catch(q){x.e(q)}finally{x.f()}I.match(/^[\s\u200b]+$/)||v.push(I)}else v.push(y)}s("labelWrapCachedLines",v),a=s("labelWrapCachedText",v.join(`
`)),s("labelWrapKey",u)}else if(o==="ellipsis"){var k=t.pstyle("text-max-width").pfValue,O="",P="",B=!1;if(this.calculateLabelDimensions(t,a).width<k)return a;for(var F=0;F<a.length;F++){var N=this.calculateLabelDimensions(t,O+a[F]+P).width;if(N>k)break;O+=a[F],F===a.length-1&&(B=!0)}return B||(O+=P),O}return a};sr.getLabelJustification=function(t){var e=t.pstyle("text-justification").strValue,r=t.pstyle("text-halign").strValue;if(e==="auto")if(t.isNode())switch(r){case"left":return"right";case"right":return"left";default:return"center"}else return"center";else return e};sr.calculateLabelDimensions=function(t,e){var r=this,n=r.cy.window(),a=n.document,i=0,s=t.pstyle("font-style").strValue,o=t.pstyle("font-size").pfValue,u=t.pstyle("font-family").strValue,l=t.pstyle("font-weight").strValue,f=this.labelCalcCanvas,c=this.labelCalcCanvasContext;if(!f){f=this.labelCalcCanvas=a.createElement("canvas"),c=this.labelCalcCanvasContext=f.getContext("2d");var h=f.style;h.position="absolute",h.left="-9999px",h.top="-9999px",h.zIndex="-1",h.visibility="hidden",h.pointerEvents="none"}c.font="".concat(s," ").concat(l," ").concat(o,"px ").concat(u);for(var d=0,v=0,g=e.split(`
`),p=0;p<g.length;p++){var y=g[p],m=c.measureText(y),b=Math.ceil(m.width),E=o;d=Math.max(b,d),v+=E}return d+=i,v+=i,{width:d,height:v}};sr.calculateLabelAngle=function(t,e){var r=t._private,n=r.rscratch,a=t.isEdge(),i=e?e+"-":"",s=t.pstyle(i+"text-rotation"),o=s.strValue;return o==="none"?0:a&&o==="autorotate"?n.labelAutoAngle:o==="autorotate"?0:s.pfValue};sr.calculateLabelAngles=function(t){var e=this,r=t.isEdge(),n=t._private,a=n.rscratch;a.labelAngle=e.calculateLabelAngle(t),r&&(a.sourceLabelAngle=e.calculateLabelAngle(t,"source"),a.targetLabelAngle=e.calculateLabelAngle(t,"target"))};var TT={},Xy=28,Ky=!1;TT.getNodeShape=function(t){var e=this,r=t.pstyle("shape").value;if(r==="cutrectangle"&&(t.width()<Xy||t.height()<Xy))return Ky||(Ve("The `cutrectangle` node shape can not be used at small sizes so `rectangle` is used instead"),Ky=!0),"rectangle";if(t.isParent())return r==="rectangle"||r==="roundrectangle"||r==="round-rectangle"||r==="cutrectangle"||r==="cut-rectangle"||r==="barrel"?r:"rectangle";if(r==="polygon"){var n=t.pstyle("shape-polygon-points").value;return e.nodeShapes.makePolygon(n).name}return r};var Ms={};Ms.registerCalculationListeners=function(){var t=this.cy,e=t.collection(),r=this,n=function(s){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(e.merge(s),o)for(var u=0;u<s.length;u++){var l=s[u],f=l._private,c=f.rstyle;c.clean=!1,c.cleanConnected=!1}};r.binder(t).on("bounds.* dirty.*",function(s){var o=s.target;n(o)}).on("style.* background.*",function(s){var o=s.target;n(o,!1)});var a=function(s){if(s){var o=r.onUpdateEleCalcsFns;e.cleanStyle();for(var u=0;u<e.length;u++){var l=e[u],f=l._private.rstyle;l.isNode()&&!f.cleanConnected&&(n(l.connectedEdges()),f.cleanConnected=!0)}if(o)for(var c=0;c<o.length;c++){var h=o[c];h(s,e)}r.recalculateRenderedStyle(e),e=t.collection()}};r.flushRenderedStyleQueue=function(){a(!0)},r.beforeRender(a,r.beforeRenderPriorities.eleCalcs)};Ms.onUpdateEleCalcs=function(t){var e=this.onUpdateEleCalcsFns=this.onUpdateEleCalcsFns||[];e.push(t)};Ms.recalculateRenderedStyle=function(t,e){var r=function(E){return E._private.rstyle.cleanConnected};if(t.length!==0){var n=[],a=[];if(!this.destroyed){e===void 0&&(e=!0);for(var i=0;i<t.length;i++){var s=t[i],o=s._private,u=o.rstyle;s.isEdge()&&(!r(s.source())||!r(s.target()))&&(u.clean=!1),s.isEdge()&&s.isBundledBezier()&&s.parallelEdges().some(function(b){return!b._private.rstyle.clean&&b.isBundledBezier()})&&(u.clean=!1),!(e&&u.clean||s.removed())&&s.pstyle("display").value!=="none"&&(o.group==="nodes"?a.push(s):n.push(s),u.clean=!0)}for(var l=0;l<a.length;l++){var f=a[l],c=f._private,h=c.rstyle,d=f.position();this.recalculateNodeLabelProjection(f),h.nodeX=d.x,h.nodeY=d.y,h.nodeW=f.pstyle("width").pfValue,h.nodeH=f.pstyle("height").pfValue}this.recalculateEdgeProjections(n);for(var v=0;v<n.length;v++){var g=n[v],p=g._private,y=p.rstyle,m=p.rscratch;y.srcX=m.arrowStartX,y.srcY=m.arrowStartY,y.tgtX=m.arrowEndX,y.tgtY=m.arrowEndY,y.midX=m.midX,y.midY=m.midY,y.labelAngle=m.labelAngle,y.sourceLabelAngle=m.sourceLabelAngle,y.targetLabelAngle=m.targetLabelAngle}}}};var Os={};Os.updateCachedGrabbedEles=function(){var t=this.cachedZSortedEles;if(t){t.drag=[],t.nondrag=[];for(var e=[],r=0;r<t.length;r++){var n=t[r],a=n._private.rscratch;n.grabbed()&&!n.isParent()?e.push(n):a.inDragLayer?t.drag.push(n):t.nondrag.push(n)}for(var r=0;r<e.length;r++){var n=e[r];t.drag.push(n)}}};Os.invalidateCachedZSortedEles=function(){this.cachedZSortedEles=null};Os.getCachedZSortedEles=function(t){if(t||!this.cachedZSortedEles){var e=this.cy.mutableElements().toArray();e.sort(aT),e.interactive=e.filter(function(r){return r.interactive()}),this.cachedZSortedEles=e,this.updateCachedGrabbedEles()}else e=this.cachedZSortedEles;return e};var CT={};[In,es,Ct,ai,Uv,sr,TT,Ms,Os].forEach(function(t){xe(CT,t)});var ST={};ST.getCachedImage=function(t,e,r){var n=this,a=n.imageCache=n.imageCache||{},i=a[t];if(i)return i.image.complete||i.image.addEventListener("load",r),i.image;i=a[t]=a[t]||{};var s=i.image=new Image;s.addEventListener("load",r),s.addEventListener("error",function(){s.error=!0});var o="data:",u=t.substring(0,o.length).toLowerCase()===o;return u||(e=e==="null"?null:e,s.crossOrigin=e),s.src=t,s};var sa={};sa.registerBinding=function(t,e,r,n){var a=Array.prototype.slice.apply(arguments,[1]);if(Array.isArray(t)){for(var i=[],s=0;s<t.length;s++){var o=t[s];if(o!==void 0){var u=this.binder(o);i.push(u.on.apply(u,a))}}return i}var u=this.binder(t);return u.on.apply(u,a)};sa.binder=function(t){var e=this,r=e.cy.window(),n=t===r||t===r.document||t===r.document.body||zR(t);if(e.supportsPassiveEvents==null){var a=!1;try{var i=Object.defineProperty({},"passive",{get:function(){return a=!0,!0}});r.addEventListener("test",null,i)}catch{}e.supportsPassiveEvents=a}var s=function(u,l,f){var c=Array.prototype.slice.call(arguments);return n&&e.supportsPassiveEvents&&(c[2]={capture:f??!1,passive:!1,once:!1}),e.bindings.push({target:t,args:c}),(t.addEventListener||t.on).apply(t,c),this};return{on:s,addEventListener:s,addListener:s,bind:s}};sa.nodeIsDraggable=function(t){return t&&t.isNode()&&!t.locked()&&t.grabbable()};sa.nodeIsGrabbable=function(t){return this.nodeIsDraggable(t)&&t.interactive()};sa.load=function(){var t=this,e=t.cy.window(),r=function(L){return L.selected()},n=function(L){var z=L.getRootNode();if(z&&z.nodeType===11&&z.host!==void 0)return z},a=function(L,z,W,X){L==null&&(L=t.cy);for(var Q=0;Q<z.length;Q++){var ce=z[Q];L.emit({originalEvent:W,type:ce,position:X})}},i=function(L){return L.shiftKey||L.metaKey||L.ctrlKey},s=function(L,z){var W=!0;if(t.cy.hasCompoundNodes()&&L&&L.pannable())for(var X=0;z&&X<z.length;X++){var L=z[X];if(L.isNode()&&L.isParent()&&!L.pannable()){W=!1;break}}else W=!0;return W},o=function(L){L[0]._private.grabbed=!0},u=function(L){L[0]._private.grabbed=!1},l=function(L){L[0]._private.rscratch.inDragLayer=!0},f=function(L){L[0]._private.rscratch.inDragLayer=!1},c=function(L){L[0]._private.rscratch.isGrabTarget=!0},h=function(L){L[0]._private.rscratch.isGrabTarget=!1},d=function(L,z){var W=z.addToList,X=W.has(L);!X&&L.grabbable()&&!L.locked()&&(W.merge(L),o(L))},v=function(L,z){if(L.cy().hasCompoundNodes()&&!(z.inDragLayer==null&&z.addToList==null)){var W=L.descendants();z.inDragLayer&&(W.forEach(l),W.connectedEdges().forEach(l)),z.addToList&&d(W,z)}},g=function(L,z){z=z||{};var W=L.cy().hasCompoundNodes();z.inDragLayer&&(L.forEach(l),L.neighborhood().stdFilter(function(X){return!W||X.isEdge()}).forEach(l)),z.addToList&&L.forEach(function(X){d(X,z)}),v(L,z),m(L,{inDragLayer:z.inDragLayer}),t.updateCachedGrabbedEles()},p=g,y=function(L){L&&(t.getCachedZSortedEles().forEach(function(z){u(z),f(z),h(z)}),t.updateCachedGrabbedEles())},m=function(L,z){if(!(z.inDragLayer==null&&z.addToList==null)&&L.cy().hasCompoundNodes()){var W=L.ancestors().orphans();if(!W.same(L)){var X=W.descendants().spawnSelf().merge(W).unmerge(L).unmerge(L.descendants()),Q=X.connectedEdges();z.inDragLayer&&(Q.forEach(l),X.forEach(l)),z.addToList&&X.forEach(function(ce){d(ce,z)})}}},b=function(){document.activeElement!=null&&document.activeElement.blur!=null&&document.activeElement.blur()},E=typeof MutationObserver<"u",T=typeof ResizeObserver<"u";E?(t.removeObserver=new MutationObserver(function(K){for(var L=0;L<K.length;L++){var z=K[L],W=z.removedNodes;if(W)for(var X=0;X<W.length;X++){var Q=W[X];if(Q===t.container){t.destroy();break}}}}),t.container.parentNode&&t.removeObserver.observe(t.container.parentNode,{childList:!0})):t.registerBinding(t.container,"DOMNodeRemoved",function(K){t.destroy()});var I=ei(function(){t.cy.resize()},100);E&&(t.styleObserver=new MutationObserver(I),t.styleObserver.observe(t.container,{attributes:!0})),t.registerBinding(e,"resize",I),T&&(t.resizeObserver=new ResizeObserver(I),t.resizeObserver.observe(t.container));var w=function(L,z){for(;L!=null;)z(L),L=L.parentNode},x=function(){t.invalidateContainerClientCoordsCache()};w(t.container,function(K){t.registerBinding(K,"transitionend",x),t.registerBinding(K,"animationend",x),t.registerBinding(K,"scroll",x)}),t.registerBinding(t.container,"contextmenu",function(K){K.preventDefault()});var C=function(){return t.selection[4]!==0},S=function(L){for(var z=t.findContainerClientCoords(),W=z[0],X=z[1],Q=z[2],ce=z[3],te=L.touches?L.touches:[L],ye=!1,he=0;he<te.length;he++){var Ee=te[he];if(W<=Ee.clientX&&Ee.clientX<=W+Q&&X<=Ee.clientY&&Ee.clientY<=X+ce){ye=!0;break}}if(!ye)return!1;for(var _e=t.container,Ae=L.target,me=Ae.parentNode,Oe=!1;me;){if(me===_e){Oe=!0;break}me=me.parentNode}return!!Oe};t.registerBinding(t.container,"mousedown",function(L){if(S(L)&&!(t.hoverData.which===1&&L.which!==1)){L.preventDefault(),b(),t.hoverData.capture=!0,t.hoverData.which=L.which;var z=t.cy,W=[L.clientX,L.clientY],X=t.projectIntoViewport(W[0],W[1]),Q=t.selection,ce=t.findNearestElements(X[0],X[1],!0,!1),te=ce[0],ye=t.dragData.possibleDragElements;t.hoverData.mdownPos=X,t.hoverData.mdownGPos=W;var he=function(Le){return{originalEvent:L,type:Le,position:{x:X[0],y:X[1]}}},Ee=function(){t.hoverData.tapholdCancelled=!1,clearTimeout(t.hoverData.tapholdTimeout),t.hoverData.tapholdTimeout=setTimeout(function(){if(!t.hoverData.tapholdCancelled){var Le=t.hoverData.down;Le?Le.emit(he("taphold")):z.emit(he("taphold"))}},t.tapholdDuration)};if(L.which==3){t.hoverData.cxtStarted=!0;var _e={originalEvent:L,type:"cxttapstart",position:{x:X[0],y:X[1]}};te?(te.activate(),te.emit(_e),t.hoverData.down=te):z.emit(_e),t.hoverData.downTime=new Date().getTime(),t.hoverData.cxtDragged=!1}else if(L.which==1){te&&te.activate();{if(te!=null&&t.nodeIsGrabbable(te)){var Ae=function(Le){Le.emit(he("grab"))};if(c(te),!te.selected())ye=t.dragData.possibleDragElements=z.collection(),p(te,{addToList:ye}),te.emit(he("grabon")).emit(he("grab"));else{ye=t.dragData.possibleDragElements=z.collection();var me=z.$(function(Oe){return Oe.isNode()&&Oe.selected()&&t.nodeIsGrabbable(Oe)});g(me,{addToList:ye}),te.emit(he("grabon")),me.forEach(Ae)}t.redrawHint("eles",!0),t.redrawHint("drag",!0)}t.hoverData.down=te,t.hoverData.downs=ce,t.hoverData.downTime=new Date().getTime()}a(te,["mousedown","tapstart","vmousedown"],L,{x:X[0],y:X[1]}),te==null?(Q[4]=1,t.data.bgActivePosistion={x:X[0],y:X[1]},t.redrawHint("select",!0),t.redraw()):te.pannable()&&(Q[4]=1),Ee()}Q[0]=Q[2]=X[0],Q[1]=Q[3]=X[1]}},!1);var A=n(t.container);t.registerBinding([e,A],"mousemove",function(L){var z=t.hoverData.capture;if(!(!z&&!S(L))){var W=!1,X=t.cy,Q=X.zoom(),ce=[L.clientX,L.clientY],te=t.projectIntoViewport(ce[0],ce[1]),ye=t.hoverData.mdownPos,he=t.hoverData.mdownGPos,Ee=t.selection,_e=null;!t.hoverData.draggingEles&&!t.hoverData.dragging&&!t.hoverData.selecting&&(_e=t.findNearestElement(te[0],te[1],!0,!1));var Ae=t.hoverData.last,me=t.hoverData.down,Oe=[te[0]-Ee[2],te[1]-Ee[3]],Le=t.dragData.possibleDragElements,st;if(he){var Je=ce[0]-he[0],St=Je*Je,tt=ce[1]-he[1],ht=tt*tt,ot=St+ht;t.hoverData.isOverThresholdDrag=st=ot>=t.desktopTapThreshold2}var pt=i(L);st&&(t.hoverData.tapholdCancelled=!0);var Ar=function(){var qt=t.hoverData.dragDelta=t.hoverData.dragDelta||[];qt.length===0?(qt.push(Oe[0]),qt.push(Oe[1])):(qt[0]+=Oe[0],qt[1]+=Oe[1])};W=!0,a(_e,["mousemove","vmousemove","tapdrag"],L,{x:te[0],y:te[1]});var rt=function(qt){return{originalEvent:L,type:qt,position:{x:te[0],y:te[1]}}},lr=function(){t.data.bgActivePosistion=void 0,t.hoverData.selecting||X.emit(rt("boxstart")),Ee[4]=1,t.hoverData.selecting=!0,t.redrawHint("select",!0),t.redraw()};if(t.hoverData.which===3){if(st){var fr=rt("cxtdrag");me?me.emit(fr):X.emit(fr),t.hoverData.cxtDragged=!0,(!t.hoverData.cxtOver||_e!==t.hoverData.cxtOver)&&(t.hoverData.cxtOver&&t.hoverData.cxtOver.emit(rt("cxtdragout")),t.hoverData.cxtOver=_e,_e&&_e.emit(rt("cxtdragover")))}}else if(t.hoverData.dragging){if(W=!0,X.panningEnabled()&&X.userPanningEnabled()){var Pn;if(t.hoverData.justStartedPan){var hi=t.hoverData.mdownPos;Pn={x:(te[0]-hi[0])*Q,y:(te[1]-hi[1])*Q},t.hoverData.justStartedPan=!1}else Pn={x:Oe[0]*Q,y:Oe[1]*Q};X.panBy(Pn),X.emit(rt("dragpan")),t.hoverData.dragged=!0}te=t.projectIntoViewport(L.clientX,L.clientY)}else if(Ee[4]==1&&(me==null||me.pannable())){if(st){if(!t.hoverData.dragging&&X.boxSelectionEnabled()&&(pt||!X.panningEnabled()||!X.userPanningEnabled()))lr();else if(!t.hoverData.selecting&&X.panningEnabled()&&X.userPanningEnabled()){var an=s(me,t.hoverData.downs);an&&(t.hoverData.dragging=!0,t.hoverData.justStartedPan=!0,Ee[4]=0,t.data.bgActivePosistion=Un(ye),t.redrawHint("select",!0),t.redraw())}me&&me.pannable()&&me.active()&&me.unactivate()}}else{if(me&&me.pannable()&&me.active()&&me.unactivate(),(!me||!me.grabbed())&&_e!=Ae&&(Ae&&a(Ae,["mouseout","tapdragout"],L,{x:te[0],y:te[1]}),_e&&a(_e,["mouseover","tapdragover"],L,{x:te[0],y:te[1]}),t.hoverData.last=_e),me)if(st){if(X.boxSelectionEnabled()&&pt)me&&me.grabbed()&&(y(Le),me.emit(rt("freeon")),Le.emit(rt("free")),t.dragData.didDrag&&(me.emit(rt("dragfreeon")),Le.emit(rt("dragfree")))),lr();else if(me&&me.grabbed()&&t.nodeIsDraggable(me)){var _t=!t.dragData.didDrag;_t&&t.redrawHint("eles",!0),t.dragData.didDrag=!0,t.hoverData.draggingEles||g(Le,{inDragLayer:!0});var Et={x:0,y:0};if(ae(Oe[0])&&ae(Oe[1])&&(Et.x+=Oe[0],Et.y+=Oe[1],_t)){var Lt=t.hoverData.dragDelta;Lt&&ae(Lt[0])&&ae(Lt[1])&&(Et.x+=Lt[0],Et.y+=Lt[1])}t.hoverData.draggingEles=!0,Le.silentShift(Et).emit(rt("position")).emit(rt("drag")),t.redrawHint("drag",!0),t.redraw()}}else Ar();W=!0}if(Ee[2]=te[0],Ee[3]=te[1],W)return L.stopPropagation&&L.stopPropagation(),L.preventDefault&&L.preventDefault(),!1}},!1);var R,D,_;t.registerBinding(e,"mouseup",function(L){if(!(t.hoverData.which===1&&L.which!==1&&t.hoverData.capture)){var z=t.hoverData.capture;if(z){t.hoverData.capture=!1;var W=t.cy,X=t.projectIntoViewport(L.clientX,L.clientY),Q=t.selection,ce=t.findNearestElement(X[0],X[1],!0,!1),te=t.dragData.possibleDragElements,ye=t.hoverData.down,he=i(L);t.data.bgActivePosistion&&(t.redrawHint("select",!0),t.redraw()),t.hoverData.tapholdCancelled=!0,t.data.bgActivePosistion=void 0,ye&&ye.unactivate();var Ee=function(Je){return{originalEvent:L,type:Je,position:{x:X[0],y:X[1]}}};if(t.hoverData.which===3){var _e=Ee("cxttapend");if(ye?ye.emit(_e):W.emit(_e),!t.hoverData.cxtDragged){var Ae=Ee("cxttap");ye?ye.emit(Ae):W.emit(Ae)}t.hoverData.cxtDragged=!1,t.hoverData.which=null}else if(t.hoverData.which===1){if(a(ce,["mouseup","tapend","vmouseup"],L,{x:X[0],y:X[1]}),!t.dragData.didDrag&&!t.hoverData.dragged&&!t.hoverData.selecting&&!t.hoverData.isOverThresholdDrag&&(a(ye,["click","tap","vclick"],L,{x:X[0],y:X[1]}),D=!1,L.timeStamp-_<=W.multiClickDebounceTime()?(R&&clearTimeout(R),D=!0,_=null,a(ye,["dblclick","dbltap","vdblclick"],L,{x:X[0],y:X[1]})):(R=setTimeout(function(){D||a(ye,["oneclick","onetap","voneclick"],L,{x:X[0],y:X[1]})},W.multiClickDebounceTime()),_=L.timeStamp)),ye==null&&!t.dragData.didDrag&&!t.hoverData.selecting&&!t.hoverData.dragged&&!i(L)&&(W.$(r).unselect(["tapunselect"]),te.length>0&&t.redrawHint("eles",!0),t.dragData.possibleDragElements=te=W.collection()),ce==ye&&!t.dragData.didDrag&&!t.hoverData.selecting&&ce!=null&&ce._private.selectable&&(t.hoverData.dragging||(W.selectionType()==="additive"||he?ce.selected()?ce.unselect(["tapunselect"]):ce.select(["tapselect"]):he||(W.$(r).unmerge(ce).unselect(["tapunselect"]),ce.select(["tapselect"]))),t.redrawHint("eles",!0)),t.hoverData.selecting){var me=W.collection(t.getAllInBox(Q[0],Q[1],Q[2],Q[3]));t.redrawHint("select",!0),me.length>0&&t.redrawHint("eles",!0),W.emit(Ee("boxend"));var Oe=function(Je){return Je.selectable()&&!Je.selected()};W.selectionType()==="additive"||he||W.$(r).unmerge(me).unselect(),me.emit(Ee("box")).stdFilter(Oe).select().emit(Ee("boxselect")),t.redraw()}if(t.hoverData.dragging&&(t.hoverData.dragging=!1,t.redrawHint("select",!0),t.redrawHint("eles",!0),t.redraw()),!Q[4]){t.redrawHint("drag",!0),t.redrawHint("eles",!0);var Le=ye&&ye.grabbed();y(te),Le&&(ye.emit(Ee("freeon")),te.emit(Ee("free")),t.dragData.didDrag&&(ye.emit(Ee("dragfreeon")),te.emit(Ee("dragfree"))))}}Q[4]=0,t.hoverData.down=null,t.hoverData.cxtStarted=!1,t.hoverData.draggingEles=!1,t.hoverData.selecting=!1,t.hoverData.isOverThresholdDrag=!1,t.dragData.didDrag=!1,t.hoverData.dragged=!1,t.hoverData.dragDelta=[],t.hoverData.mdownPos=null,t.hoverData.mdownGPos=null,t.hoverData.which=null}}},!1);var M=[],k=4,O,P=1e5,B=function(L,z){for(var W=0;W<L.length;W++)if(L[W]%z!==0)return!1;return!0},F=function(L){for(var z=Math.abs(L[0]),W=1;W<L.length;W++)if(Math.abs(L[W])!==z)return!1;return!0},N=function(L){var z=!1,W=L.deltaY;if(W==null&&(L.wheelDeltaY!=null?W=L.wheelDeltaY/4:L.wheelDelta!=null&&(W=L.wheelDelta/4)),W!==0){if(O==null)if(M.length>=k){var X=M;if(O=B(X,5),!O){var Q=Math.abs(X[0]);O=F(X)&&Q>5}if(O)for(var ce=0;ce<X.length;ce++)P=Math.min(Math.abs(X[ce]),P)}else M.push(W),z=!0;else O&&(P=Math.min(Math.abs(W),P));if(!t.scrollingPage){var te=t.cy,ye=te.zoom(),he=te.pan(),Ee=t.projectIntoViewport(L.clientX,L.clientY),_e=[Ee[0]*ye+he.x,Ee[1]*ye+he.y];if(t.hoverData.draggingEles||t.hoverData.dragging||t.hoverData.cxtStarted||C()){L.preventDefault();return}if(te.panningEnabled()&&te.userPanningEnabled()&&te.zoomingEnabled()&&te.userZoomingEnabled()){L.preventDefault(),t.data.wheelZooming=!0,clearTimeout(t.data.wheelTimeout),t.data.wheelTimeout=setTimeout(function(){t.data.wheelZooming=!1,t.redrawHint("eles",!0),t.redraw()},150);var Ae;z&&Math.abs(W)>5&&(W=_v(W)*5),Ae=W/-250,O&&(Ae/=P,Ae*=3),Ae=Ae*t.wheelSensitivity;var me=L.deltaMode===1;me&&(Ae*=33);var Oe=te.zoom()*Math.pow(10,Ae);L.type==="gesturechange"&&(Oe=t.gestureStartZoom*L.scale),te.zoom({level:Oe,renderedPosition:{x:_e[0],y:_e[1]}}),te.emit({type:L.type==="gesturechange"?"pinchzoom":"scrollzoom",originalEvent:L,position:{x:Ee[0],y:Ee[1]}})}}}};t.registerBinding(t.container,"wheel",N,!0),t.registerBinding(e,"scroll",function(L){t.scrollingPage=!0,clearTimeout(t.scrollingPageTimeout),t.scrollingPageTimeout=setTimeout(function(){t.scrollingPage=!1},250)},!0),t.registerBinding(t.container,"gesturestart",function(L){t.gestureStartZoom=t.cy.zoom(),t.hasTouchStarted||L.preventDefault()},!0),t.registerBinding(t.container,"gesturechange",function(K){t.hasTouchStarted||N(K)},!0),t.registerBinding(t.container,"mouseout",function(L){var z=t.projectIntoViewport(L.clientX,L.clientY);t.cy.emit({originalEvent:L,type:"mouseout",position:{x:z[0],y:z[1]}})},!1),t.registerBinding(t.container,"mouseover",function(L){var z=t.projectIntoViewport(L.clientX,L.clientY);t.cy.emit({originalEvent:L,type:"mouseover",position:{x:z[0],y:z[1]}})},!1);var q,V,Y,H,Z,ee,ie,J,G,$,U,j,ne,re=function(L,z,W,X){return Math.sqrt((W-L)*(W-L)+(X-z)*(X-z))},Ie=function(L,z,W,X){return(W-L)*(W-L)+(X-z)*(X-z)},se;t.registerBinding(t.container,"touchstart",se=function(L){if(t.hasTouchStarted=!0,!!S(L)){b(),t.touchData.capture=!0,t.data.bgActivePosistion=void 0;var z=t.cy,W=t.touchData.now,X=t.touchData.earlier;if(L.touches[0]){var Q=t.projectIntoViewport(L.touches[0].clientX,L.touches[0].clientY);W[0]=Q[0],W[1]=Q[1]}if(L.touches[1]){var Q=t.projectIntoViewport(L.touches[1].clientX,L.touches[1].clientY);W[2]=Q[0],W[3]=Q[1]}if(L.touches[2]){var Q=t.projectIntoViewport(L.touches[2].clientX,L.touches[2].clientY);W[4]=Q[0],W[5]=Q[1]}var ce=function(pt){return{originalEvent:L,type:pt,position:{x:W[0],y:W[1]}}};if(L.touches[1]){t.touchData.singleTouchMoved=!0,y(t.dragData.touchDragEles);var te=t.findContainerClientCoords();G=te[0],$=te[1],U=te[2],j=te[3],q=L.touches[0].clientX-G,V=L.touches[0].clientY-$,Y=L.touches[1].clientX-G,H=L.touches[1].clientY-$,ne=0<=q&&q<=U&&0<=Y&&Y<=U&&0<=V&&V<=j&&0<=H&&H<=j;var ye=z.pan(),he=z.zoom();Z=re(q,V,Y,H),ee=Ie(q,V,Y,H),ie=[(q+Y)/2,(V+H)/2],J=[(ie[0]-ye.x)/he,(ie[1]-ye.y)/he];var Ee=200,_e=Ee*Ee;if(ee<_e&&!L.touches[2]){var Ae=t.findNearestElement(W[0],W[1],!0,!0),me=t.findNearestElement(W[2],W[3],!0,!0);Ae&&Ae.isNode()?(Ae.activate().emit(ce("cxttapstart")),t.touchData.start=Ae):me&&me.isNode()?(me.activate().emit(ce("cxttapstart")),t.touchData.start=me):z.emit(ce("cxttapstart")),t.touchData.start&&(t.touchData.start._private.grabbed=!1),t.touchData.cxt=!0,t.touchData.cxtDragged=!1,t.data.bgActivePosistion=void 0,t.redraw();return}}if(L.touches[2])z.boxSelectionEnabled()&&L.preventDefault();else if(!L.touches[1]){if(L.touches[0]){var Oe=t.findNearestElements(W[0],W[1],!0,!0),Le=Oe[0];if(Le!=null&&(Le.activate(),t.touchData.start=Le,t.touchData.starts=Oe,t.nodeIsGrabbable(Le))){var st=t.dragData.touchDragEles=z.collection(),Je=null;t.redrawHint("eles",!0),t.redrawHint("drag",!0),Le.selected()?(Je=z.$(function(ot){return ot.selected()&&t.nodeIsGrabbable(ot)}),g(Je,{addToList:st})):p(Le,{addToList:st}),c(Le),Le.emit(ce("grabon")),Je?Je.forEach(function(ot){ot.emit(ce("grab"))}):Le.emit(ce("grab"))}a(Le,["touchstart","tapstart","vmousedown"],L,{x:W[0],y:W[1]}),Le==null&&(t.data.bgActivePosistion={x:Q[0],y:Q[1]},t.redrawHint("select",!0),t.redraw()),t.touchData.singleTouchMoved=!1,t.touchData.singleTouchStartTime=+new Date,clearTimeout(t.touchData.tapholdTimeout),t.touchData.tapholdTimeout=setTimeout(function(){t.touchData.singleTouchMoved===!1&&!t.pinching&&!t.touchData.selecting&&a(t.touchData.start,["taphold"],L,{x:W[0],y:W[1]})},t.tapholdDuration)}}if(L.touches.length>=1){for(var St=t.touchData.startPosition=[null,null,null,null,null,null],tt=0;tt<W.length;tt++)St[tt]=X[tt]=W[tt];var ht=L.touches[0];t.touchData.startGPosition=[ht.clientX,ht.clientY]}}},!1);var be;t.registerBinding(e,"touchmove",be=function(L){var z=t.touchData.capture;if(!(!z&&!S(L))){var W=t.selection,X=t.cy,Q=t.touchData.now,ce=t.touchData.earlier,te=X.zoom();if(L.touches[0]){var ye=t.projectIntoViewport(L.touches[0].clientX,L.touches[0].clientY);Q[0]=ye[0],Q[1]=ye[1]}if(L.touches[1]){var ye=t.projectIntoViewport(L.touches[1].clientX,L.touches[1].clientY);Q[2]=ye[0],Q[3]=ye[1]}if(L.touches[2]){var ye=t.projectIntoViewport(L.touches[2].clientX,L.touches[2].clientY);Q[4]=ye[0],Q[5]=ye[1]}var he=function(AS){return{originalEvent:L,type:AS,position:{x:Q[0],y:Q[1]}}},Ee=t.touchData.startGPosition,_e;if(z&&L.touches[0]&&Ee){for(var Ae=[],me=0;me<Q.length;me++)Ae[me]=Q[me]-ce[me];var Oe=L.touches[0].clientX-Ee[0],Le=Oe*Oe,st=L.touches[0].clientY-Ee[1],Je=st*st,St=Le+Je;_e=St>=t.touchTapThreshold2}if(z&&t.touchData.cxt){L.preventDefault();var tt=L.touches[0].clientX-G,ht=L.touches[0].clientY-$,ot=L.touches[1].clientX-G,pt=L.touches[1].clientY-$,Ar=Ie(tt,ht,ot,pt),rt=Ar/ee,lr=150,fr=lr*lr,Pn=1.5,hi=Pn*Pn;if(rt>=hi||Ar>=fr){t.touchData.cxt=!1,t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);var an=he("cxttapend");t.touchData.start?(t.touchData.start.unactivate().emit(an),t.touchData.start=null):X.emit(an)}}if(z&&t.touchData.cxt){var an=he("cxtdrag");t.data.bgActivePosistion=void 0,t.redrawHint("select",!0),t.touchData.start?t.touchData.start.emit(an):X.emit(an),t.touchData.start&&(t.touchData.start._private.grabbed=!1),t.touchData.cxtDragged=!0;var _t=t.findNearestElement(Q[0],Q[1],!0,!0);(!t.touchData.cxtOver||_t!==t.touchData.cxtOver)&&(t.touchData.cxtOver&&t.touchData.cxtOver.emit(he("cxtdragout")),t.touchData.cxtOver=_t,_t&&_t.emit(he("cxtdragover")))}else if(z&&L.touches[2]&&X.boxSelectionEnabled())L.preventDefault(),t.data.bgActivePosistion=void 0,this.lastThreeTouch=+new Date,t.touchData.selecting||X.emit(he("boxstart")),t.touchData.selecting=!0,t.touchData.didSelect=!0,W[4]=1,!W||W.length===0||W[0]===void 0?(W[0]=(Q[0]+Q[2]+Q[4])/3,W[1]=(Q[1]+Q[3]+Q[5])/3,W[2]=(Q[0]+Q[2]+Q[4])/3+1,W[3]=(Q[1]+Q[3]+Q[5])/3+1):(W[2]=(Q[0]+Q[2]+Q[4])/3,W[3]=(Q[1]+Q[3]+Q[5])/3),t.redrawHint("select",!0),t.redraw();else if(z&&L.touches[1]&&!t.touchData.didSelect&&X.zoomingEnabled()&&X.panningEnabled()&&X.userZoomingEnabled()&&X.userPanningEnabled()){L.preventDefault(),t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);var Et=t.dragData.touchDragEles;if(Et){t.redrawHint("drag",!0);for(var Lt=0;Lt<Et.length;Lt++){var da=Et[Lt]._private;da.grabbed=!1,da.rscratch.inDragLayer=!1}}var qt=t.touchData.start,tt=L.touches[0].clientX-G,ht=L.touches[0].clientY-$,ot=L.touches[1].clientX-G,pt=L.touches[1].clientY-$,pg=re(tt,ht,ot,pt),yS=pg/Z;if(ne){var mS=tt-q,bS=ht-V,wS=ot-Y,ES=pt-H,xS=(mS+wS)/2,TS=(bS+ES)/2,va=X.zoom(),Js=va*yS,di=X.pan(),yg=J[0]*va+di.x,mg=J[1]*va+di.y,CS={x:-Js/va*(yg-di.x-xS)+yg,y:-Js/va*(mg-di.y-TS)+mg};if(qt&&qt.active()){var Et=t.dragData.touchDragEles;y(Et),t.redrawHint("drag",!0),t.redrawHint("eles",!0),qt.unactivate().emit(he("freeon")),Et.emit(he("free")),t.dragData.didDrag&&(qt.emit(he("dragfreeon")),Et.emit(he("dragfree")))}X.viewport({zoom:Js,pan:CS,cancelOnFailedZoom:!0}),X.emit(he("pinchzoom")),Z=pg,q=tt,V=ht,Y=ot,H=pt,t.pinching=!0}if(L.touches[0]){var ye=t.projectIntoViewport(L.touches[0].clientX,L.touches[0].clientY);Q[0]=ye[0],Q[1]=ye[1]}if(L.touches[1]){var ye=t.projectIntoViewport(L.touches[1].clientX,L.touches[1].clientY);Q[2]=ye[0],Q[3]=ye[1]}if(L.touches[2]){var ye=t.projectIntoViewport(L.touches[2].clientX,L.touches[2].clientY);Q[4]=ye[0],Q[5]=ye[1]}}else if(L.touches[0]&&!t.touchData.didSelect){var Yt=t.touchData.start,eo=t.touchData.last,_t;if(!t.hoverData.draggingEles&&!t.swipePanning&&(_t=t.findNearestElement(Q[0],Q[1],!0,!0)),z&&Yt!=null&&L.preventDefault(),z&&Yt!=null&&t.nodeIsDraggable(Yt))if(_e){var Et=t.dragData.touchDragEles,bg=!t.dragData.didDrag;bg&&g(Et,{inDragLayer:!0}),t.dragData.didDrag=!0;var ga={x:0,y:0};if(ae(Ae[0])&&ae(Ae[1])&&(ga.x+=Ae[0],ga.y+=Ae[1],bg)){t.redrawHint("eles",!0);var Wt=t.touchData.dragDelta;Wt&&ae(Wt[0])&&ae(Wt[1])&&(ga.x+=Wt[0],ga.y+=Wt[1])}t.hoverData.draggingEles=!0,Et.silentShift(ga).emit(he("position")).emit(he("drag")),t.redrawHint("drag",!0),t.touchData.startPosition[0]==ce[0]&&t.touchData.startPosition[1]==ce[1]&&t.redrawHint("eles",!0),t.redraw()}else{var Wt=t.touchData.dragDelta=t.touchData.dragDelta||[];Wt.length===0?(Wt.push(Ae[0]),Wt.push(Ae[1])):(Wt[0]+=Ae[0],Wt[1]+=Ae[1])}if(a(Yt||_t,["touchmove","tapdrag","vmousemove"],L,{x:Q[0],y:Q[1]}),(!Yt||!Yt.grabbed())&&_t!=eo&&(eo&&eo.emit(he("tapdragout")),_t&&_t.emit(he("tapdragover"))),t.touchData.last=_t,z)for(var Lt=0;Lt<Q.length;Lt++)Q[Lt]&&t.touchData.startPosition[Lt]&&_e&&(t.touchData.singleTouchMoved=!0);if(z&&(Yt==null||Yt.pannable())&&X.panningEnabled()&&X.userPanningEnabled()){var SS=s(Yt,t.touchData.starts);SS&&(L.preventDefault(),t.data.bgActivePosistion||(t.data.bgActivePosistion=Un(t.touchData.startPosition)),t.swipePanning?(X.panBy({x:Ae[0]*te,y:Ae[1]*te}),X.emit(he("dragpan"))):_e&&(t.swipePanning=!0,X.panBy({x:Oe*te,y:st*te}),X.emit(he("dragpan")),Yt&&(Yt.unactivate(),t.redrawHint("select",!0),t.touchData.start=null)));var ye=t.projectIntoViewport(L.touches[0].clientX,L.touches[0].clientY);Q[0]=ye[0],Q[1]=ye[1]}}for(var me=0;me<Q.length;me++)ce[me]=Q[me];z&&L.touches.length>0&&!t.hoverData.draggingEles&&!t.swipePanning&&t.data.bgActivePosistion!=null&&(t.data.bgActivePosistion=void 0,t.redrawHint("select",!0),t.redraw())}},!1);var ge;t.registerBinding(e,"touchcancel",ge=function(L){var z=t.touchData.start;t.touchData.capture=!1,z&&z.unactivate()});var oe,de,fe,ve;if(t.registerBinding(e,"touchend",oe=function(L){var z=t.touchData.start,W=t.touchData.capture;if(W)L.touches.length===0&&(t.touchData.capture=!1),L.preventDefault();else return;var X=t.selection;t.swipePanning=!1,t.hoverData.draggingEles=!1;var Q=t.cy,ce=Q.zoom(),te=t.touchData.now,ye=t.touchData.earlier;if(L.touches[0]){var he=t.projectIntoViewport(L.touches[0].clientX,L.touches[0].clientY);te[0]=he[0],te[1]=he[1]}if(L.touches[1]){var he=t.projectIntoViewport(L.touches[1].clientX,L.touches[1].clientY);te[2]=he[0],te[3]=he[1]}if(L.touches[2]){var he=t.projectIntoViewport(L.touches[2].clientX,L.touches[2].clientY);te[4]=he[0],te[5]=he[1]}var Ee=function(fr){return{originalEvent:L,type:fr,position:{x:te[0],y:te[1]}}};z&&z.unactivate();var _e;if(t.touchData.cxt){if(_e=Ee("cxttapend"),z?z.emit(_e):Q.emit(_e),!t.touchData.cxtDragged){var Ae=Ee("cxttap");z?z.emit(Ae):Q.emit(Ae)}t.touchData.start&&(t.touchData.start._private.grabbed=!1),t.touchData.cxt=!1,t.touchData.start=null,t.redraw();return}if(!L.touches[2]&&Q.boxSelectionEnabled()&&t.touchData.selecting){t.touchData.selecting=!1;var me=Q.collection(t.getAllInBox(X[0],X[1],X[2],X[3]));X[0]=void 0,X[1]=void 0,X[2]=void 0,X[3]=void 0,X[4]=0,t.redrawHint("select",!0),Q.emit(Ee("boxend"));var Oe=function(fr){return fr.selectable()&&!fr.selected()};me.emit(Ee("box")).stdFilter(Oe).select().emit(Ee("boxselect")),me.nonempty()&&t.redrawHint("eles",!0),t.redraw()}if(z!=null&&z.unactivate(),L.touches[2])t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);else if(!L.touches[1]){if(!L.touches[0]){if(!L.touches[0]){t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);var Le=t.dragData.touchDragEles;if(z!=null){var st=z._private.grabbed;y(Le),t.redrawHint("drag",!0),t.redrawHint("eles",!0),st&&(z.emit(Ee("freeon")),Le.emit(Ee("free")),t.dragData.didDrag&&(z.emit(Ee("dragfreeon")),Le.emit(Ee("dragfree")))),a(z,["touchend","tapend","vmouseup","tapdragout"],L,{x:te[0],y:te[1]}),z.unactivate(),t.touchData.start=null}else{var Je=t.findNearestElement(te[0],te[1],!0,!0);a(Je,["touchend","tapend","vmouseup","tapdragout"],L,{x:te[0],y:te[1]})}var St=t.touchData.startPosition[0]-te[0],tt=St*St,ht=t.touchData.startPosition[1]-te[1],ot=ht*ht,pt=tt+ot,Ar=pt*ce*ce;t.touchData.singleTouchMoved||(z||Q.$(":selected").unselect(["tapunselect"]),a(z,["tap","vclick"],L,{x:te[0],y:te[1]}),de=!1,L.timeStamp-ve<=Q.multiClickDebounceTime()?(fe&&clearTimeout(fe),de=!0,ve=null,a(z,["dbltap","vdblclick"],L,{x:te[0],y:te[1]})):(fe=setTimeout(function(){de||a(z,["onetap","voneclick"],L,{x:te[0],y:te[1]})},Q.multiClickDebounceTime()),ve=L.timeStamp)),z!=null&&!t.dragData.didDrag&&z._private.selectable&&Ar<t.touchTapThreshold2&&!t.pinching&&(Q.selectionType()==="single"?(Q.$(r).unmerge(z).unselect(["tapunselect"]),z.select(["tapselect"])):z.selected()?z.unselect(["tapunselect"]):z.select(["tapselect"]),t.redrawHint("eles",!0)),t.touchData.singleTouchMoved=!0}}}for(var rt=0;rt<te.length;rt++)ye[rt]=te[rt];t.dragData.didDrag=!1,L.touches.length===0&&(t.touchData.dragDelta=[],t.touchData.startPosition=[null,null,null,null,null,null],t.touchData.startGPosition=null,t.touchData.didSelect=!1),L.touches.length<2&&(L.touches.length===1&&(t.touchData.startGPosition=[L.touches[0].clientX,L.touches[0].clientY]),t.pinching=!1,t.redrawHint("eles",!0),t.redraw())},!1),typeof TouchEvent>"u"){var pe=[],Ce=function(L){return{clientX:L.clientX,clientY:L.clientY,force:1,identifier:L.pointerId,pageX:L.pageX,pageY:L.pageY,radiusX:L.width/2,radiusY:L.height/2,screenX:L.screenX,screenY:L.screenY,target:L.target}},Pe=function(L){return{event:L,touch:Ce(L)}},Ne=function(L){pe.push(Pe(L))},Me=function(L){for(var z=0;z<pe.length;z++){var W=pe[z];if(W.event.pointerId===L.pointerId){pe.splice(z,1);return}}},Be=function(L){var z=pe.filter(function(W){return W.event.pointerId===L.pointerId})[0];z.event=L,z.touch=Ce(L)},Te=function(L){L.touches=pe.map(function(z){return z.touch})},ue=function(L){return L.pointerType==="mouse"||L.pointerType===4};t.registerBinding(t.container,"pointerdown",function(K){ue(K)||(K.preventDefault(),Ne(K),Te(K),se(K))}),t.registerBinding(t.container,"pointerup",function(K){ue(K)||(Me(K),Te(K),oe(K))}),t.registerBinding(t.container,"pointercancel",function(K){ue(K)||(Me(K),Te(K),ge(K))}),t.registerBinding(t.container,"pointermove",function(K){ue(K)||(K.preventDefault(),Be(K),Te(K),be(K))})}};var xr={};xr.generatePolygon=function(t,e){return this.nodeShapes[t]={renderer:this,name:t,points:e,draw:function(n,a,i,s,o,u){this.renderer.nodeShapeImpl("polygon",n,a,i,s,o,this.points)},intersectLine:function(n,a,i,s,o,u,l,f){return $a(o,u,this.points,n,a,i/2,s/2,l)},checkPoint:function(n,a,i,s,o,u,l,f){return br(n,a,this.points,u,l,s,o,[0,-1],i)},hasMiterBounds:t!=="rectangle",miterBounds:function(n,a,i,s,o,u){return n_(this.points,n,a,i,s,o)}}};xr.generateEllipse=function(){return this.nodeShapes.ellipse={renderer:this,name:"ellipse",draw:function(e,r,n,a,i,s){this.renderer.nodeShapeImpl(this.name,e,r,n,a,i)},intersectLine:function(e,r,n,a,i,s,o,u){return c_(i,s,e,r,n/2+o,a/2+o)},checkPoint:function(e,r,n,a,i,s,o,u){return gn(e,r,a,i,s,o,n)}}};xr.generateRoundPolygon=function(t,e){return this.nodeShapes[t]={renderer:this,name:t,points:e,getOrCreateCorners:function(n,a,i,s,o,u,l){if(u[l]!==void 0&&u[l+"-cx"]===n&&u[l+"-cy"]===a)return u[l];u[l]=new Array(e.length/2),u[l+"-cx"]=n,u[l+"-cy"]=a;var f=i/2,c=s/2;o=o==="auto"?Ax(i,s):o;for(var h=new Array(e.length/2),d=0;d<e.length/2;d++)h[d]={x:n+f*e[d*2],y:a+c*e[d*2+1]};var v,g,p,y,m=h.length;for(g=h[m-1],v=0;v<m;v++)p=h[v%m],y=h[(v+1)%m],u[l][v]=Vv(g,p,y,o),g=p,p=y;return u[l]},draw:function(n,a,i,s,o,u,l){this.renderer.nodeShapeImpl("round-polygon",n,a,i,s,o,this.points,this.getOrCreateCorners(a,i,s,o,u,l,"drawCorners"))},intersectLine:function(n,a,i,s,o,u,l,f,c){return d_(o,u,this.points,n,a,i,s,l,this.getOrCreateCorners(n,a,i,s,f,c,"corners"))},checkPoint:function(n,a,i,s,o,u,l,f,c){return f_(n,a,this.points,u,l,s,o,this.getOrCreateCorners(u,l,s,o,f,c,"corners"))}}};xr.generateRoundRectangle=function(){return this.nodeShapes["round-rectangle"]=this.nodeShapes.roundrectangle={renderer:this,name:"round-rectangle",points:At(4,0),draw:function(e,r,n,a,i,s){this.renderer.nodeShapeImpl(this.name,e,r,n,a,i,this.points,s)},intersectLine:function(e,r,n,a,i,s,o,u){return Cx(i,s,e,r,n,a,o,u)},checkPoint:function(e,r,n,a,i,s,o,u){var l=a/2,f=i/2;u=u==="auto"?Wr(a,i):u,u=Math.min(l,f,u);var c=u*2;return!!(br(e,r,this.points,s,o,a,i-c,[0,-1],n)||br(e,r,this.points,s,o,a-c,i,[0,-1],n)||gn(e,r,c,c,s-l+u,o-f+u,n)||gn(e,r,c,c,s+l-u,o-f+u,n)||gn(e,r,c,c,s+l-u,o+f-u,n)||gn(e,r,c,c,s-l+u,o+f-u,n))}}};xr.generateCutRectangle=function(){return this.nodeShapes["cut-rectangle"]=this.nodeShapes.cutrectangle={renderer:this,name:"cut-rectangle",cornerLength:Mv(),points:At(4,0),draw:function(e,r,n,a,i,s){this.renderer.nodeShapeImpl(this.name,e,r,n,a,i,null,s)},generateCutTrianglePts:function(e,r,n,a,i){var s=i==="auto"?this.cornerLength:i,o=r/2,u=e/2,l=n-u,f=n+u,c=a-o,h=a+o;return{topLeft:[l,c+s,l+s,c,l+s,c+s],topRight:[f-s,c,f,c+s,f-s,c+s],bottomRight:[f,h-s,f-s,h,f-s,h-s],bottomLeft:[l+s,h,l,h-s,l+s,h-s]}},intersectLine:function(e,r,n,a,i,s,o,u){var l=this.generateCutTrianglePts(n+2*o,a+2*o,e,r,u),f=[].concat.apply([],[l.topLeft.splice(0,4),l.topRight.splice(0,4),l.bottomRight.splice(0,4),l.bottomLeft.splice(0,4)]);return $a(i,s,f,e,r)},checkPoint:function(e,r,n,a,i,s,o,u){var l=u==="auto"?this.cornerLength:u;if(br(e,r,this.points,s,o,a,i-2*l,[0,-1],n)||br(e,r,this.points,s,o,a-2*l,i,[0,-1],n))return!0;var f=this.generateCutTrianglePts(a,i,s,o);return Ot(e,r,f.topLeft)||Ot(e,r,f.topRight)||Ot(e,r,f.bottomRight)||Ot(e,r,f.bottomLeft)}}};xr.generateBarrel=function(){return this.nodeShapes.barrel={renderer:this,name:"barrel",points:At(4,0),draw:function(e,r,n,a,i,s){this.renderer.nodeShapeImpl(this.name,e,r,n,a,i)},intersectLine:function(e,r,n,a,i,s,o,u){var l=.15,f=.5,c=.85,h=this.generateBarrelBezierPts(n+2*o,a+2*o,e,r),d=function(p){var y=Xn({x:p[0],y:p[1]},{x:p[2],y:p[3]},{x:p[4],y:p[5]},l),m=Xn({x:p[0],y:p[1]},{x:p[2],y:p[3]},{x:p[4],y:p[5]},f),b=Xn({x:p[0],y:p[1]},{x:p[2],y:p[3]},{x:p[4],y:p[5]},c);return[p[0],p[1],y.x,y.y,m.x,m.y,b.x,b.y,p[4],p[5]]},v=[].concat(d(h.topLeft),d(h.topRight),d(h.bottomRight),d(h.bottomLeft));return $a(i,s,v,e,r)},generateBarrelBezierPts:function(e,r,n,a){var i=r/2,s=e/2,o=n-s,u=n+s,l=a-i,f=a+i,c=Ud(e,r),h=c.heightOffset,d=c.widthOffset,v=c.ctrlPtOffsetPct*e,g={topLeft:[o,l+h,o+v,l,o+d,l],topRight:[u-d,l,u-v,l,u,l+h],bottomRight:[u,f-h,u-v,f,u-d,f],bottomLeft:[o+d,f,o+v,f,o,f-h]};return g.topLeft.isTop=!0,g.topRight.isTop=!0,g.bottomLeft.isBottom=!0,g.bottomRight.isBottom=!0,g},checkPoint:function(e,r,n,a,i,s,o,u){var l=Ud(a,i),f=l.heightOffset,c=l.widthOffset;if(br(e,r,this.points,s,o,a,i-2*f,[0,-1],n)||br(e,r,this.points,s,o,a-2*c,i,[0,-1],n))return!0;for(var h=this.generateBarrelBezierPts(a,i,s,o),d=function(x,C,S){var A=S[4],R=S[2],D=S[0],_=S[5],M=S[1],k=Math.min(A,D),O=Math.max(A,D),P=Math.min(_,M),B=Math.max(_,M);if(k<=x&&x<=O&&P<=C&&C<=B){var F=v_(A,R,D),N=s_(F[0],F[1],F[2],x),q=N.filter(function(V){return 0<=V&&V<=1});if(q.length>0)return q[0]}return null},v=Object.keys(h),g=0;g<v.length;g++){var p=v[g],y=h[p],m=d(e,r,y);if(m!=null){var b=y[5],E=y[3],T=y[1],I=dt(b,E,T,m);if(y.isTop&&I<=r||y.isBottom&&r<=I)return!0}}return!1}}};xr.generateBottomRoundrectangle=function(){return this.nodeShapes["bottom-round-rectangle"]=this.nodeShapes.bottomroundrectangle={renderer:this,name:"bottom-round-rectangle",points:At(4,0),draw:function(e,r,n,a,i,s){this.renderer.nodeShapeImpl(this.name,e,r,n,a,i,this.points,s)},intersectLine:function(e,r,n,a,i,s,o,u){var l=e-(n/2+o),f=r-(a/2+o),c=f,h=e+(n/2+o),d=kr(i,s,e,r,l,f,h,c,!1);return d.length>0?d:Cx(i,s,e,r,n,a,o,u)},checkPoint:function(e,r,n,a,i,s,o,u){u=u==="auto"?Wr(a,i):u;var l=2*u;if(br(e,r,this.points,s,o,a,i-l,[0,-1],n)||br(e,r,this.points,s,o,a-l,i,[0,-1],n))return!0;var f=a/2+2*n,c=i/2+2*n,h=[s-f,o-c,s-f,o,s+f,o,s+f,o-c];return!!(Ot(e,r,h)||gn(e,r,l,l,s+a/2-u,o+i/2-u,n)||gn(e,r,l,l,s-a/2+u,o+i/2-u,n))}}};xr.registerNodeShapes=function(){var t=this.nodeShapes={},e=this;this.generateEllipse(),this.generatePolygon("triangle",At(3,0)),this.generateRoundPolygon("round-triangle",At(3,0)),this.generatePolygon("rectangle",At(4,0)),t.square=t.rectangle,this.generateRoundRectangle(),this.generateCutRectangle(),this.generateBarrel(),this.generateBottomRoundrectangle();{var r=[0,1,1,0,0,-1,-1,0];this.generatePolygon("diamond",r),this.generateRoundPolygon("round-diamond",r)}this.generatePolygon("pentagon",At(5,0)),this.generateRoundPolygon("round-pentagon",At(5,0)),this.generatePolygon("hexagon",At(6,0)),this.generateRoundPolygon("round-hexagon",At(6,0)),this.generatePolygon("heptagon",At(7,0)),this.generateRoundPolygon("round-heptagon",At(7,0)),this.generatePolygon("octagon",At(8,0)),this.generateRoundPolygon("round-octagon",At(8,0));var n=new Array(20);{var a=Vd(5,0),i=Vd(5,Math.PI/5),s=.5*(3-Math.sqrt(5));s*=1.57;for(var o=0;o<i.length/2;o++)i[o*2]*=s,i[o*2+1]*=s;for(var o=0;o<20/4;o++)n[o*4]=a[o*2],n[o*4+1]=a[o*2+1],n[o*4+2]=i[o*2],n[o*4+3]=i[o*2+1]}n=Sx(n),this.generatePolygon("star",n),this.generatePolygon("vee",[-1,-1,0,-.333,1,-1,0,1]),this.generatePolygon("rhomboid",[-1,-1,.333,-1,1,1,-.333,1]),this.generatePolygon("right-rhomboid",[-.333,-1,1,-1,.333,1,-1,1]),this.nodeShapes.concavehexagon=this.generatePolygon("concave-hexagon",[-1,-.95,-.75,0,-1,.95,1,.95,.75,0,1,-.95]);{var u=[-1,-1,.25,-1,1,0,.25,1,-1,1];this.generatePolygon("tag",u),this.generateRoundPolygon("round-tag",u)}t.makePolygon=function(l){var f=l.join("$"),c="polygon-"+f,h;return(h=this[c])?h:e.generatePolygon(c,l)}};var ii={};ii.timeToRender=function(){return this.redrawTotalTime/this.redrawCount};ii.redraw=function(t){t=t||wx();var e=this;e.averageRedrawTime===void 0&&(e.averageRedrawTime=0),e.lastRedrawTime===void 0&&(e.lastRedrawTime=0),e.lastDrawTime===void 0&&(e.lastDrawTime=0),e.requestedFrame=!0,e.renderOptions=t};ii.beforeRender=function(t,e){if(!this.destroyed){e==null&&je("Priority is not optional for beforeRender");var r=this.beforeRenderCallbacks;r.push({fn:t,priority:e}),r.sort(function(n,a){return a.priority-n.priority})}};var jy=function(e,r,n){for(var a=e.beforeRenderCallbacks,i=0;i<a.length;i++)a[i].fn(r,n)};ii.startRenderLoop=function(){var t=this,e=t.cy;if(!t.renderLoopStarted){t.renderLoopStarted=!0;var r=function(a){if(!t.destroyed){if(!e.batching())if(t.requestedFrame&&!t.skipFrame){jy(t,!0,a);var i=mr();t.render(t.renderOptions);var s=t.lastDrawTime=mr();t.averageRedrawTime===void 0&&(t.averageRedrawTime=s-i),t.redrawCount===void 0&&(t.redrawCount=0),t.redrawCount++,t.redrawTotalTime===void 0&&(t.redrawTotalTime=0);var o=s-i;t.redrawTotalTime+=o,t.lastRedrawTime=o,t.averageRedrawTime=t.averageRedrawTime/2+o/2,t.requestedFrame=!1}else jy(t,!1,a);t.skipFrame=!1,Yi(r)}};Yi(r)}};var _2=function(e){this.init(e)},AT=_2,oa=AT.prototype;oa.clientFunctions=["redrawHint","render","renderTo","matchCanvasSize","nodeShapeImpl","arrowShapeImpl"];oa.init=function(t){var e=this;e.options=t,e.cy=t.cy;var r=e.container=t.cy.container(),n=e.cy.window();if(n){var a=n.document,i=a.head,s="__________cytoscape_stylesheet",o="__________cytoscape_container",u=a.getElementById(s)!=null;if(r.className.indexOf(o)<0&&(r.className=(r.className||"")+" "+o),!u){var l=a.createElement("style");l.id=s,l.textContent="."+o+" { position: relative; }",i.insertBefore(l,i.children[0])}var f=n.getComputedStyle(r),c=f.getPropertyValue("position");c==="static"&&Ve("A Cytoscape container has style position:static and so can not use UI extensions properly")}e.selection=[void 0,void 0,void 0,void 0,0],e.bezierProjPcts=[.05,.225,.4,.5,.6,.775,.95],e.hoverData={down:null,last:null,downTime:null,triggerMode:null,dragging:!1,initialPan:[null,null],capture:!1},e.dragData={possibleDragElements:[]},e.touchData={start:null,capture:!1,startPosition:[null,null,null,null,null,null],singleTouchStartTime:null,singleTouchMoved:!0,now:[null,null,null,null,null,null],earlier:[null,null,null,null,null,null]},e.redraws=0,e.showFps=t.showFps,e.debug=t.debug,e.webgl=t.webgl,e.hideEdgesOnViewport=t.hideEdgesOnViewport,e.textureOnViewport=t.textureOnViewport,e.wheelSensitivity=t.wheelSensitivity,e.motionBlurEnabled=t.motionBlur,e.forcedPixelRatio=ae(t.pixelRatio)?t.pixelRatio:null,e.motionBlur=t.motionBlur,e.motionBlurOpacity=t.motionBlurOpacity,e.motionBlurTransparency=1-e.motionBlurOpacity,e.motionBlurPxRatio=1,e.mbPxRBlurry=1,e.minMbLowQualFrames=4,e.fullQualityMb=!1,e.clearedForMotionBlur=[],e.desktopTapThreshold=t.desktopTapThreshold,e.desktopTapThreshold2=t.desktopTapThreshold*t.desktopTapThreshold,e.touchTapThreshold=t.touchTapThreshold,e.touchTapThreshold2=t.touchTapThreshold*t.touchTapThreshold,e.tapholdDuration=500,e.bindings=[],e.beforeRenderCallbacks=[],e.beforeRenderPriorities={animations:400,eleCalcs:300,eleTxrDeq:200,lyrTxrDeq:150,lyrTxrSkip:100},e.registerNodeShapes(),e.registerArrowShapes(),e.registerCalculationListeners()};oa.notify=function(t,e){var r=this,n=r.cy;if(!this.destroyed){if(t==="init"){r.load();return}if(t==="destroy"){r.destroy();return}(t==="add"||t==="remove"||t==="move"&&n.hasCompoundNodes()||t==="load"||t==="zorder"||t==="mount")&&r.invalidateCachedZSortedEles(),t==="viewport"&&r.redrawHint("select",!0),t==="gc"&&r.redrawHint("gc",!0),(t==="load"||t==="resize"||t==="mount")&&(r.invalidateContainerClientCoordsCache(),r.matchCanvasSize(r.container)),r.redrawHint("eles",!0),r.redrawHint("drag",!0),this.startRenderLoop(),this.redraw()}};oa.destroy=function(){var t=this;t.destroyed=!0,t.cy.stopAnimationLoop();for(var e=0;e<t.bindings.length;e++){var r=t.bindings[e],n=r,a=n.target;(a.off||a.removeEventListener).apply(a,n.args)}if(t.bindings=[],t.beforeRenderCallbacks=[],t.onUpdateEleCalcsFns=[],t.removeObserver&&t.removeObserver.disconnect(),t.styleObserver&&t.styleObserver.disconnect(),t.resizeObserver&&t.resizeObserver.disconnect(),t.labelCalcDiv)try{document.body.removeChild(t.labelCalcDiv)}catch{}};oa.isHeadless=function(){return!1};[$v,CT,ST,sa,xr,ii].forEach(function(t){xe(oa,t)});var Lu=1e3/60,IT={setupDequeueing:function(e){return function(){var n=this,a=this.renderer;if(!n.dequeueingSetup){n.dequeueingSetup=!0;var i=ei(function(){a.redrawHint("eles",!0),a.redrawHint("drag",!0),a.redraw()},e.deqRedrawThreshold),s=function(l,f){var c=mr(),h=a.averageRedrawTime,d=a.lastRedrawTime,v=[],g=a.cy.extent(),p=a.getPixelRatio();for(l||a.flushRenderedStyleQueue();;){var y=mr(),m=y-c,b=y-f;if(d<Lu){var E=Lu-(l?h:0);if(b>=e.deqFastCost*E)break}else if(l){if(m>=e.deqCost*d||m>=e.deqAvgCost*h)break}else if(b>=e.deqNoDrawCost*Lu)break;var T=e.deq(n,p,g);if(T.length>0)for(var I=0;I<T.length;I++)v.push(T[I]);else break}v.length>0&&(e.onDeqd(n,v),!l&&e.shouldRedraw(n,v,p,g)&&i())},o=e.priority||Iv;a.beforeRender(s,o(n))}}}},L2=function(){function t(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Wi;Qr(this,t),this.idsByKey=new vr,this.keyForId=new vr,this.cachesByLvl=new vr,this.lvls=[],this.getKey=e,this.doesEleInvalidateKey=r}return Jr(t,[{key:"getIdsFor",value:function(r){r==null&&je("Can not get id list for null key");var n=this.idsByKey,a=this.idsByKey.get(r);return a||(a=new ra,n.set(r,a)),a}},{key:"addIdForKey",value:function(r,n){r!=null&&this.getIdsFor(r).add(n)}},{key:"deleteIdForKey",value:function(r,n){r!=null&&this.getIdsFor(r).delete(n)}},{key:"getNumberOfIdsForKey",value:function(r){return r==null?0:this.getIdsFor(r).size}},{key:"updateKeyMappingFor",value:function(r){var n=r.id(),a=this.keyForId.get(n),i=this.getKey(r);this.deleteIdForKey(a,n),this.addIdForKey(i,n),this.keyForId.set(n,i)}},{key:"deleteKeyMappingFor",value:function(r){var n=r.id(),a=this.keyForId.get(n);this.deleteIdForKey(a,n),this.keyForId.delete(n)}},{key:"keyHasChangedFor",value:function(r){var n=r.id(),a=this.keyForId.get(n),i=this.getKey(r);return a!==i}},{key:"isInvalid",value:function(r){return this.keyHasChangedFor(r)||this.doesEleInvalidateKey(r)}},{key:"getCachesAt",value:function(r){var n=this.cachesByLvl,a=this.lvls,i=n.get(r);return i||(i=new vr,n.set(r,i),a.push(r)),i}},{key:"getCache",value:function(r,n){return this.getCachesAt(n).get(r)}},{key:"get",value:function(r,n){var a=this.getKey(r),i=this.getCache(a,n);return i!=null&&this.updateKeyMappingFor(r),i}},{key:"getForCachedKey",value:function(r,n){var a=this.keyForId.get(r.id()),i=this.getCache(a,n);return i}},{key:"hasCache",value:function(r,n){return this.getCachesAt(n).has(r)}},{key:"has",value:function(r,n){var a=this.getKey(r);return this.hasCache(a,n)}},{key:"setCache",value:function(r,n,a){a.key=r,this.getCachesAt(n).set(r,a)}},{key:"set",value:function(r,n,a){var i=this.getKey(r);this.setCache(i,n,a),this.updateKeyMappingFor(r)}},{key:"deleteCache",value:function(r,n){this.getCachesAt(n).delete(r)}},{key:"delete",value:function(r,n){var a=this.getKey(r);this.deleteCache(a,n)}},{key:"invalidateKey",value:function(r){var n=this;this.lvls.forEach(function(a){return n.deleteCache(r,a)})}},{key:"invalidate",value:function(r){var n=r.id(),a=this.keyForId.get(n);this.deleteKeyMappingFor(r);var i=this.doesEleInvalidateKey(r);return i&&this.invalidateKey(a),i||this.getNumberOfIdsForKey(a)===0}}])}(),Zy=25,Si=50,Fi=-4,nv=3,RT=7.99,M2=8,O2=1024,P2=1024,k2=1024,N2=.2,B2=.8,F2=10,q2=.15,G2=.1,z2=.9,$2=.9,V2=100,U2=1,Yn={dequeue:"dequeue",downscale:"downscale",highQuality:"highQuality"},H2=bt({getKey:null,doesEleInvalidateKey:Wi,drawElement:null,getBoundingBox:null,getRotationPoint:null,getRotationOffset:null,isVisible:yx,allowEdgeTxrCaching:!0,allowParentTxrCaching:!0}),Sa=function(e,r){var n=this;n.renderer=e,n.onDequeues=[];var a=H2(r);xe(n,a),n.lookup=new L2(a.getKey,a.doesEleInvalidateKey),n.setupDequeueing()},ct=Sa.prototype;ct.reasons=Yn;ct.getTextureQueue=function(t){var e=this;return e.eleImgCaches=e.eleImgCaches||{},e.eleImgCaches[t]=e.eleImgCaches[t]||[]};ct.getRetiredTextureQueue=function(t){var e=this,r=e.eleImgCaches.retired=e.eleImgCaches.retired||{},n=r[t]=r[t]||[];return n};ct.getElementQueue=function(){var t=this,e=t.eleCacheQueue=t.eleCacheQueue||new ti(function(r,n){return n.reqs-r.reqs});return e};ct.getElementKeyToQueue=function(){var t=this,e=t.eleKeyToCacheQueue=t.eleKeyToCacheQueue||{};return e};ct.getElement=function(t,e,r,n,a){var i=this,s=this.renderer,o=s.cy.zoom(),u=this.lookup;if(!e||e.w===0||e.h===0||isNaN(e.w)||isNaN(e.h)||!t.visible()||t.removed()||!i.allowEdgeTxrCaching&&t.isEdge()||!i.allowParentTxrCaching&&t.isParent())return null;if(n==null&&(n=Math.ceil(Dv(o*r))),n<Fi)n=Fi;else if(o>=RT||n>nv)return null;var l=Math.pow(2,n),f=e.h*l,c=e.w*l,h=s.eleTextBiggerThanMin(t,l);if(!this.isVisible(t,h))return null;var d=u.get(t,n);if(d&&d.invalidated&&(d.invalidated=!1,d.texture.invalidatedWidth-=d.width),d)return d;var v;if(f<=Zy?v=Zy:f<=Si?v=Si:v=Math.ceil(f/Si)*Si,f>k2||c>P2)return null;var g=i.getTextureQueue(v),p=g[g.length-2],y=function(){return i.recycleTexture(v,c)||i.addTexture(v,c)};p||(p=g[g.length-1]),p||(p=y()),p.width-p.usedWidth<c&&(p=y());for(var m=function(k){return k&&k.scaledLabelShown===h},b=a&&a===Yn.dequeue,E=a&&a===Yn.highQuality,T=a&&a===Yn.downscale,I,w=n+1;w<=nv;w++){var x=u.get(t,w);if(x){I=x;break}}var C=I&&I.level===n+1?I:null,S=function(){p.context.drawImage(C.texture.canvas,C.x,0,C.width,C.height,p.usedWidth,0,c,f)};if(p.context.setTransform(1,0,0,1,0,0),p.context.clearRect(p.usedWidth,0,c,v),m(C))S();else if(m(I))if(E){for(var A=I.level;A>n;A--)C=i.getElement(t,e,r,A,Yn.downscale);S()}else return i.queueElement(t,I.level-1),I;else{var R;if(!b&&!E&&!T)for(var D=n-1;D>=Fi;D--){var _=u.get(t,D);if(_){R=_;break}}if(m(R))return i.queueElement(t,n),R;p.context.translate(p.usedWidth,0),p.context.scale(l,l),this.drawElement(p.context,t,e,h,!1),p.context.scale(1/l,1/l),p.context.translate(-p.usedWidth,0)}return d={x:p.usedWidth,texture:p,level:n,scale:l,width:c,height:f,scaledLabelShown:h},p.usedWidth+=Math.ceil(c+M2),p.eleCaches.push(d),u.set(t,n,d),i.checkTextureFullness(p),d};ct.invalidateElements=function(t){for(var e=0;e<t.length;e++)this.invalidateElement(t[e])};ct.invalidateElement=function(t){var e=this,r=e.lookup,n=[],a=r.isInvalid(t);if(a){for(var i=Fi;i<=nv;i++){var s=r.getForCachedKey(t,i);s&&n.push(s)}var o=r.invalidate(t);if(o)for(var u=0;u<n.length;u++){var l=n[u],f=l.texture;f.invalidatedWidth+=l.width,l.invalidated=!0,e.checkTextureUtility(f)}e.removeFromQueue(t)}};ct.checkTextureUtility=function(t){t.invalidatedWidth>=N2*t.width&&this.retireTexture(t)};ct.checkTextureFullness=function(t){var e=this,r=e.getTextureQueue(t.height);t.usedWidth/t.width>B2&&t.fullnessChecks>=F2?Yr(r,t):t.fullnessChecks++};ct.retireTexture=function(t){var e=this,r=t.height,n=e.getTextureQueue(r),a=this.lookup;Yr(n,t),t.retired=!0;for(var i=t.eleCaches,s=0;s<i.length;s++){var o=i[s];a.deleteCache(o.key,o.level)}Rv(i);var u=e.getRetiredTextureQueue(r);u.push(t)};ct.addTexture=function(t,e){var r=this,n=r.getTextureQueue(t),a={};return n.push(a),a.eleCaches=[],a.height=t,a.width=Math.max(O2,e),a.usedWidth=0,a.invalidatedWidth=0,a.fullnessChecks=0,a.canvas=r.renderer.makeOffscreenCanvas(a.width,a.height),a.context=a.canvas.getContext("2d"),a};ct.recycleTexture=function(t,e){for(var r=this,n=r.getTextureQueue(t),a=r.getRetiredTextureQueue(t),i=0;i<a.length;i++){var s=a[i];if(s.width>=e)return s.retired=!1,s.usedWidth=0,s.invalidatedWidth=0,s.fullnessChecks=0,Rv(s.eleCaches),s.context.setTransform(1,0,0,1,0,0),s.context.clearRect(0,0,s.width,s.height),Yr(a,s),n.push(s),s}};ct.queueElement=function(t,e){var r=this,n=r.getElementQueue(),a=r.getElementKeyToQueue(),i=this.getKey(t),s=a[i];if(s)s.level=Math.max(s.level,e),s.eles.merge(t),s.reqs++,n.updateItem(s);else{var o={eles:t.spawn().merge(t),level:e,reqs:1,key:i};n.push(o),a[i]=o}};ct.dequeue=function(t){for(var e=this,r=e.getElementQueue(),n=e.getElementKeyToQueue(),a=[],i=e.lookup,s=0;s<U2&&r.size()>0;s++){var o=r.pop(),u=o.key,l=o.eles[0],f=i.hasCache(l,o.level);if(n[u]=null,f)continue;a.push(o);var c=e.getBoundingBox(l);e.getElement(l,c,t,o.level,Yn.dequeue)}return a};ct.removeFromQueue=function(t){var e=this,r=e.getElementQueue(),n=e.getElementKeyToQueue(),a=this.getKey(t),i=n[a];i!=null&&(i.eles.length===1?(i.reqs=Av,r.updateItem(i),r.pop(),n[a]=null):i.eles.unmerge(t))};ct.onDequeue=function(t){this.onDequeues.push(t)};ct.offDequeue=function(t){Yr(this.onDequeues,t)};ct.setupDequeueing=IT.setupDequeueing({deqRedrawThreshold:V2,deqCost:q2,deqAvgCost:G2,deqNoDrawCost:z2,deqFastCost:$2,deq:function(e,r,n){return e.dequeue(r,n)},onDeqd:function(e,r){for(var n=0;n<e.onDequeues.length;n++){var a=e.onDequeues[n];a(r)}},shouldRedraw:function(e,r,n,a){for(var i=0;i<r.length;i++)for(var s=r[i].eles,o=0;o<s.length;o++){var u=s[o].boundingBox();if(Lv(u,a))return!0}return!1},priority:function(e){return e.renderer.beforeRenderPriorities.eleTxrDeq}});var Y2=1,Pa=-4,ts=2,W2=3.99,X2=50,K2=50,j2=.15,Z2=.1,Q2=.9,J2=.9,eO=1,Qy=250,tO=4e3*4e3,Jy=32767,rO=!0,DT=function(e){var r=this,n=r.renderer=e,a=n.cy;r.layersByLevel={},r.firstGet=!0,r.lastInvalidationTime=mr()-2*Qy,r.skipping=!1,r.eleTxrDeqs=a.collection(),r.scheduleElementRefinement=ei(function(){r.refineElementTextures(r.eleTxrDeqs),r.eleTxrDeqs.unmerge(r.eleTxrDeqs)},K2),n.beforeRender(function(s,o){o-r.lastInvalidationTime<=Qy?r.skipping=!0:r.skipping=!1},n.beforeRenderPriorities.lyrTxrSkip);var i=function(o,u){return u.reqs-o.reqs};r.layersQueue=new ti(i),r.setupDequeueing()},wt=DT.prototype,em=0,nO=Math.pow(2,53)-1;wt.makeLayer=function(t,e){var r=Math.pow(2,e),n=Math.ceil(t.w*r),a=Math.ceil(t.h*r),i=this.renderer.makeOffscreenCanvas(n,a),s={id:em=++em%nO,bb:t,level:e,width:n,height:a,canvas:i,context:i.getContext("2d"),eles:[],elesQueue:[],reqs:0},o=s.context,u=-s.bb.x1,l=-s.bb.y1;return o.scale(r,r),o.translate(u,l),s};wt.getLayers=function(t,e,r){var n=this,a=n.renderer,i=a.cy,s=i.zoom(),o=n.firstGet;if(n.firstGet=!1,r==null){if(r=Math.ceil(Dv(s*e)),r<Pa)r=Pa;else if(s>=W2||r>ts)return null}n.validateLayersElesOrdering(r,t);var u=n.layersByLevel,l=Math.pow(2,r),f=u[r]=u[r]||[],c,h=n.levelIsComplete(r,t),d,v=function(){var S=function(M){if(n.validateLayersElesOrdering(M,t),n.levelIsComplete(M,t))return d=u[M],!0},A=function(M){if(!d)for(var k=r+M;Pa<=k&&k<=ts&&!S(k);k+=M);};A(1),A(-1);for(var R=f.length-1;R>=0;R--){var D=f[R];D.invalid&&Yr(f,D)}};if(!h)v();else return f;var g=function(){if(!c){c=Rt();for(var S=0;S<t.length;S++)e_(c,t[S].boundingBox())}return c},p=function(S){S=S||{};var A=S.after;g();var R=Math.ceil(c.w*l),D=Math.ceil(c.h*l);if(R>Jy||D>Jy)return null;var _=R*D;if(_>tO)return null;var M=n.makeLayer(c,r);if(A!=null){var k=f.indexOf(A)+1;f.splice(k,0,M)}else(S.insert===void 0||S.insert)&&f.unshift(M);return M};if(n.skipping&&!o)return null;for(var y=null,m=t.length/Y2,b=!o,E=0;E<t.length;E++){var T=t[E],I=T._private.rscratch,w=I.imgLayerCaches=I.imgLayerCaches||{},x=w[r];if(x){y=x;continue}if((!y||y.eles.length>=m||!Tx(y.bb,T.boundingBox()))&&(y=p({insert:!0,after:y}),!y))return null;d||b?n.queueLayer(y,T):n.drawEleInLayer(y,T,r,e),y.eles.push(T),w[r]=y}return d||(b?null:f)};wt.getEleLevelForLayerLevel=function(t,e){return t};wt.drawEleInLayer=function(t,e,r,n){var a=this,i=this.renderer,s=t.context,o=e.boundingBox();o.w===0||o.h===0||!e.visible()||(r=a.getEleLevelForLayerLevel(r,n),i.setImgSmoothing(s,!1),i.drawCachedElement(s,e,null,null,r,rO),i.setImgSmoothing(s,!0))};wt.levelIsComplete=function(t,e){var r=this,n=r.layersByLevel[t];if(!n||n.length===0)return!1;for(var a=0,i=0;i<n.length;i++){var s=n[i];if(s.reqs>0||s.invalid)return!1;a+=s.eles.length}return a===e.length};wt.validateLayersElesOrdering=function(t,e){var r=this.layersByLevel[t];if(r)for(var n=0;n<r.length;n++){for(var a=r[n],i=-1,s=0;s<e.length;s++)if(a.eles[0]===e[s]){i=s;break}if(i<0){this.invalidateLayer(a);continue}for(var o=i,s=0;s<a.eles.length;s++)if(a.eles[s]!==e[o+s]){this.invalidateLayer(a);break}}};wt.updateElementsInLayers=function(t,e){for(var r=this,n=ja(t[0]),a=0;a<t.length;a++)for(var i=n?null:t[a],s=n?t[a]:t[a].ele,o=s._private.rscratch,u=o.imgLayerCaches=o.imgLayerCaches||{},l=Pa;l<=ts;l++){var f=u[l];f&&(i&&r.getEleLevelForLayerLevel(f.level)!==i.level||e(f,s,i))}};wt.haveLayers=function(){for(var t=this,e=!1,r=Pa;r<=ts;r++){var n=t.layersByLevel[r];if(n&&n.length>0){e=!0;break}}return e};wt.invalidateElements=function(t){var e=this;t.length!==0&&(e.lastInvalidationTime=mr(),!(t.length===0||!e.haveLayers())&&e.updateElementsInLayers(t,function(n,a,i){e.invalidateLayer(n)}))};wt.invalidateLayer=function(t){if(this.lastInvalidationTime=mr(),!t.invalid){var e=t.level,r=t.eles,n=this.layersByLevel[e];Yr(n,t),t.elesQueue=[],t.invalid=!0,t.replacement&&(t.replacement.invalid=!0);for(var a=0;a<r.length;a++){var i=r[a]._private.rscratch.imgLayerCaches;i&&(i[e]=null)}}};wt.refineElementTextures=function(t){var e=this;e.updateElementsInLayers(t,function(n,a,i){var s=n.replacement;if(s||(s=n.replacement=e.makeLayer(n.bb,n.level),s.replaces=n,s.eles=n.eles),!s.reqs)for(var o=0;o<s.eles.length;o++)e.queueLayer(s,s.eles[o])})};wt.enqueueElementRefinement=function(t){this.eleTxrDeqs.merge(t),this.scheduleElementRefinement()};wt.queueLayer=function(t,e){var r=this,n=r.layersQueue,a=t.elesQueue,i=a.hasId=a.hasId||{};if(!t.replacement){if(e){if(i[e.id()])return;a.push(e),i[e.id()]=!0}t.reqs?(t.reqs++,n.updateItem(t)):(t.reqs=1,n.push(t))}};wt.dequeue=function(t){for(var e=this,r=e.layersQueue,n=[],a=0;a<eO&&r.size()!==0;){var i=r.peek();if(i.replacement){r.pop();continue}if(i.replaces&&i!==i.replaces.replacement){r.pop();continue}if(i.invalid){r.pop();continue}var s=i.elesQueue.shift();s&&(e.drawEleInLayer(i,s,i.level,t),a++),n.length===0&&n.push(!0),i.elesQueue.length===0&&(r.pop(),i.reqs=0,i.replaces&&e.applyLayerReplacement(i),e.requestRedraw())}return n};wt.applyLayerReplacement=function(t){var e=this,r=e.layersByLevel[t.level],n=t.replaces,a=r.indexOf(n);if(!(a<0||n.invalid)){r[a]=t;for(var i=0;i<t.eles.length;i++){var s=t.eles[i]._private,o=s.imgLayerCaches=s.imgLayerCaches||{};o&&(o[t.level]=t)}e.requestRedraw()}};wt.requestRedraw=ei(function(){var t=this.renderer;t.redrawHint("eles",!0),t.redrawHint("drag",!0),t.redraw()},100);wt.setupDequeueing=IT.setupDequeueing({deqRedrawThreshold:X2,deqCost:j2,deqAvgCost:Z2,deqNoDrawCost:Q2,deqFastCost:J2,deq:function(e,r){return e.dequeue(r)},onDeqd:Iv,shouldRedraw:yx,priority:function(e){return e.renderer.beforeRenderPriorities.lyrTxrDeq}});var _T={},tm;function aO(t,e){for(var r=0;r<e.length;r++){var n=e[r];t.lineTo(n.x,n.y)}}function iO(t,e,r){for(var n,a=0;a<e.length;a++){var i=e[a];a===0&&(n=i),t.lineTo(i.x,i.y)}t.quadraticCurveTo(r.x,r.y,n.x,n.y)}function rm(t,e,r){t.beginPath&&t.beginPath();for(var n=e,a=0;a<n.length;a++){var i=n[a];t.lineTo(i.x,i.y)}var s=r,o=r[0];t.moveTo(o.x,o.y);for(var a=1;a<s.length;a++){var i=s[a];t.lineTo(i.x,i.y)}t.closePath&&t.closePath()}function sO(t,e,r,n,a){t.beginPath&&t.beginPath(),t.arc(r,n,a,0,Math.PI*2,!1);var i=e,s=i[0];t.moveTo(s.x,s.y);for(var o=0;o<i.length;o++){var u=i[o];t.lineTo(u.x,u.y)}t.closePath&&t.closePath()}function oO(t,e,r,n){t.arc(e,r,n,0,Math.PI*2,!1)}_T.arrowShapeImpl=function(t){return(tm||(tm={polygon:aO,"triangle-backcurve":iO,"triangle-tee":rm,"circle-triangle":sO,"triangle-cross":rm,circle:oO}))[t]};var or={};or.drawElement=function(t,e,r,n,a,i){var s=this;e.isNode()?s.drawNode(t,e,r,n,a,i):s.drawEdge(t,e,r,n,a,i)};or.drawElementOverlay=function(t,e){var r=this;e.isNode()?r.drawNodeOverlay(t,e):r.drawEdgeOverlay(t,e)};or.drawElementUnderlay=function(t,e){var r=this;e.isNode()?r.drawNodeUnderlay(t,e):r.drawEdgeUnderlay(t,e)};or.drawCachedElementPortion=function(t,e,r,n,a,i,s,o){var u=this,l=r.getBoundingBox(e);if(!(l.w===0||l.h===0)){var f=r.getElement(e,l,n,a,i);if(f!=null){var c=o(u,e);if(c===0)return;var h=s(u,e),d=l.x1,v=l.y1,g=l.w,p=l.h,y,m,b,E,T;if(h!==0){var I=r.getRotationPoint(e);b=I.x,E=I.y,t.translate(b,E),t.rotate(h),T=u.getImgSmoothing(t),T||u.setImgSmoothing(t,!0);var w=r.getRotationOffset(e);y=w.x,m=w.y}else y=d,m=v;var x;c!==1&&(x=t.globalAlpha,t.globalAlpha=x*c),t.drawImage(f.texture.canvas,f.x,0,f.width,f.height,y,m,g,p),c!==1&&(t.globalAlpha=x),h!==0&&(t.rotate(-h),t.translate(-b,-E),T||u.setImgSmoothing(t,!1))}else r.drawElement(t,e)}};var uO=function(){return 0},lO=function(e,r){return e.getTextAngle(r,null)},fO=function(e,r){return e.getTextAngle(r,"source")},cO=function(e,r){return e.getTextAngle(r,"target")},hO=function(e,r){return r.effectiveOpacity()},Mu=function(e,r){return r.pstyle("text-opacity").pfValue*r.effectiveOpacity()};or.drawCachedElement=function(t,e,r,n,a,i){var s=this,o=s.data,u=o.eleTxrCache,l=o.lblTxrCache,f=o.slbTxrCache,c=o.tlbTxrCache,h=e.boundingBox(),d=i===!0?u.reasons.highQuality:null;if(!(h.w===0||h.h===0||!e.visible())&&(!n||Lv(h,n))){var v=e.isEdge(),g=e.element()._private.rscratch.badLine;s.drawElementUnderlay(t,e),s.drawCachedElementPortion(t,e,u,r,a,d,uO,hO),(!v||!g)&&s.drawCachedElementPortion(t,e,l,r,a,d,lO,Mu),v&&!g&&(s.drawCachedElementPortion(t,e,f,r,a,d,fO,Mu),s.drawCachedElementPortion(t,e,c,r,a,d,cO,Mu)),s.drawElementOverlay(t,e)}};or.drawElements=function(t,e){for(var r=this,n=0;n<e.length;n++){var a=e[n];r.drawElement(t,a)}};or.drawCachedElements=function(t,e,r,n){for(var a=this,i=0;i<e.length;i++){var s=e[i];a.drawCachedElement(t,s,r,n)}};or.drawCachedNodes=function(t,e,r,n){for(var a=this,i=0;i<e.length;i++){var s=e[i];s.isNode()&&a.drawCachedElement(t,s,r,n)}};or.drawLayeredElements=function(t,e,r,n){var a=this,i=a.data.lyrTxrCache.getLayers(e,r);if(i)for(var s=0;s<i.length;s++){var o=i[s],u=o.bb;u.w===0||u.h===0||t.drawImage(o.canvas,u.x1,u.y1,u.w,u.h)}else a.drawCachedElements(t,e,r,n)};var Tr={};Tr.drawEdge=function(t,e,r){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,s=this,o=e._private.rscratch;if(!(i&&!e.visible())&&!(o.badLine||o.allpts==null||isNaN(o.allpts[0]))){var u;r&&(u=r,t.translate(-u.x1,-u.y1));var l=i?e.pstyle("opacity").value:1,f=i?e.pstyle("line-opacity").value:1,c=e.pstyle("curve-style").value,h=e.pstyle("line-style").value,d=e.pstyle("width").pfValue,v=e.pstyle("line-cap").value,g=e.pstyle("line-outline-width").value,p=e.pstyle("line-outline-color").value,y=l*f,m=l*f,b=function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:y;c==="straight-triangle"?(s.eleStrokeStyle(t,e,M),s.drawEdgeTrianglePath(e,t,o.allpts)):(t.lineWidth=d,t.lineCap=v,s.eleStrokeStyle(t,e,M),s.drawEdgePath(e,t,o.allpts,h),t.lineCap="butt")},E=function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:y;if(t.lineWidth=d+g,t.lineCap=v,g>0)s.colorStrokeStyle(t,p[0],p[1],p[2],M);else{t.lineCap="butt";return}c==="straight-triangle"?s.drawEdgeTrianglePath(e,t,o.allpts):(s.drawEdgePath(e,t,o.allpts,h),t.lineCap="butt")},T=function(){a&&s.drawEdgeOverlay(t,e)},I=function(){a&&s.drawEdgeUnderlay(t,e)},w=function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:m;s.drawArrowheads(t,e,M)},x=function(){s.drawElementText(t,e,null,n)};t.lineJoin="round";var C=e.pstyle("ghost").value==="yes";if(C){var S=e.pstyle("ghost-offset-x").pfValue,A=e.pstyle("ghost-offset-y").pfValue,R=e.pstyle("ghost-opacity").value,D=y*R;t.translate(S,A),b(D),w(D),t.translate(-S,-A)}else E();I(),b(),w(),T(),x(),r&&t.translate(u.x1,u.y1)}};var LT=function(e){if(!["overlay","underlay"].includes(e))throw new Error("Invalid state");return function(r,n){if(n.visible()){var a=n.pstyle("".concat(e,"-opacity")).value;if(a!==0){var i=this,s=i.usePaths(),o=n._private.rscratch,u=n.pstyle("".concat(e,"-padding")).pfValue,l=2*u,f=n.pstyle("".concat(e,"-color")).value;r.lineWidth=l,o.edgeType==="self"&&!s?r.lineCap="butt":r.lineCap="round",i.colorStrokeStyle(r,f[0],f[1],f[2],a),i.drawEdgePath(n,r,o.allpts,"solid")}}}};Tr.drawEdgeOverlay=LT("overlay");Tr.drawEdgeUnderlay=LT("underlay");Tr.drawEdgePath=function(t,e,r,n){var a=t._private.rscratch,i=e,s,o=!1,u=this.usePaths(),l=t.pstyle("line-dash-pattern").pfValue,f=t.pstyle("line-dash-offset").pfValue;if(u){var c=r.join("$"),h=a.pathCacheKey&&a.pathCacheKey===c;h?(s=e=a.pathCache,o=!0):(s=e=new Path2D,a.pathCacheKey=c,a.pathCache=s)}if(i.setLineDash)switch(n){case"dotted":i.setLineDash([1,1]);break;case"dashed":i.setLineDash(l),i.lineDashOffset=f;break;case"solid":i.setLineDash([]);break}if(!o&&!a.badLine)switch(e.beginPath&&e.beginPath(),e.moveTo(r[0],r[1]),a.edgeType){case"bezier":case"self":case"compound":case"multibezier":for(var d=2;d+3<r.length;d+=4)e.quadraticCurveTo(r[d],r[d+1],r[d+2],r[d+3]);break;case"straight":case"haystack":for(var v=2;v+1<r.length;v+=2)e.lineTo(r[v],r[v+1]);break;case"segments":if(a.isRound){var g=Pt(a.roundCorners),p;try{for(g.s();!(p=g.n()).done;){var y=p.value;bT(e,y)}}catch(b){g.e(b)}finally{g.f()}e.lineTo(r[r.length-2],r[r.length-1])}else for(var m=2;m+1<r.length;m+=2)e.lineTo(r[m],r[m+1]);break}e=i,u?e.stroke(s):e.stroke(),e.setLineDash&&e.setLineDash([])};Tr.drawEdgeTrianglePath=function(t,e,r){e.fillStyle=e.strokeStyle;for(var n=t.pstyle("width").pfValue,a=0;a+1<r.length;a+=2){var i=[r[a+2]-r[a],r[a+3]-r[a+1]],s=Math.sqrt(i[0]*i[0]+i[1]*i[1]),o=[i[1]/s,-i[0]/s],u=[o[0]*n/2,o[1]*n/2];e.beginPath(),e.moveTo(r[a]-u[0],r[a+1]-u[1]),e.lineTo(r[a]+u[0],r[a+1]+u[1]),e.lineTo(r[a+2],r[a+3]),e.closePath(),e.fill()}};Tr.drawArrowheads=function(t,e,r){var n=e._private.rscratch,a=n.edgeType==="haystack";a||this.drawArrowhead(t,e,"source",n.arrowStartX,n.arrowStartY,n.srcArrowAngle,r),this.drawArrowhead(t,e,"mid-target",n.midX,n.midY,n.midtgtArrowAngle,r),this.drawArrowhead(t,e,"mid-source",n.midX,n.midY,n.midsrcArrowAngle,r),a||this.drawArrowhead(t,e,"target",n.arrowEndX,n.arrowEndY,n.tgtArrowAngle,r)};Tr.drawArrowhead=function(t,e,r,n,a,i,s){if(!(isNaN(n)||n==null||isNaN(a)||a==null||isNaN(i)||i==null)){var o=this,u=e.pstyle(r+"-arrow-shape").value;if(u!=="none"){var l=e.pstyle(r+"-arrow-fill").value==="hollow"?"both":"filled",f=e.pstyle(r+"-arrow-fill").value,c=e.pstyle("width").pfValue,h=e.pstyle(r+"-arrow-width"),d=h.value==="match-line"?c:h.pfValue;h.units==="%"&&(d*=c);var v=e.pstyle("opacity").value;s===void 0&&(s=v);var g=t.globalCompositeOperation;(s!==1||f==="hollow")&&(t.globalCompositeOperation="destination-out",o.colorFillStyle(t,255,255,255,1),o.colorStrokeStyle(t,255,255,255,1),o.drawArrowShape(e,t,l,c,u,d,n,a,i),t.globalCompositeOperation=g);var p=e.pstyle(r+"-arrow-color").value;o.colorFillStyle(t,p[0],p[1],p[2],s),o.colorStrokeStyle(t,p[0],p[1],p[2],s),o.drawArrowShape(e,t,f,c,u,d,n,a,i)}}};Tr.drawArrowShape=function(t,e,r,n,a,i,s,o,u){var l=this,f=this.usePaths()&&a!=="triangle-cross",c=!1,h,d=e,v={x:s,y:o},g=t.pstyle("arrow-scale").value,p=this.getArrowWidth(n,g),y=l.arrowShapes[a];if(f){var m=l.arrowPathCache=l.arrowPathCache||[],b=En(a),E=m[b];E!=null?(h=e=E,c=!0):(h=e=new Path2D,m[b]=h)}c||(e.beginPath&&e.beginPath(),f?y.draw(e,1,0,{x:0,y:0},1):y.draw(e,p,u,v,n),e.closePath&&e.closePath()),e=d,f&&(e.translate(s,o),e.rotate(u),e.scale(p,p)),(r==="filled"||r==="both")&&(f?e.fill(h):e.fill()),(r==="hollow"||r==="both")&&(e.lineWidth=i/(f?p:1),e.lineJoin="miter",f?e.stroke(h):e.stroke()),f&&(e.scale(1/p,1/p),e.rotate(-u),e.translate(-s,-o))};var Hv={};Hv.safeDrawImage=function(t,e,r,n,a,i,s,o,u,l){if(!(a<=0||i<=0||u<=0||l<=0))try{t.drawImage(e,r,n,a,i,s,o,u,l)}catch(f){Ve(f)}};Hv.drawInscribedImage=function(t,e,r,n,a){var i=this,s=r.position(),o=s.x,u=s.y,l=r.cy().style(),f=l.getIndexedStyle.bind(l),c=f(r,"background-fit","value",n),h=f(r,"background-repeat","value",n),d=r.width(),v=r.height(),g=r.padding()*2,p=d+(f(r,"background-width-relative-to","value",n)==="inner"?0:g),y=v+(f(r,"background-height-relative-to","value",n)==="inner"?0:g),m=r._private.rscratch,b=f(r,"background-clip","value",n),E=b==="node",T=f(r,"background-image-opacity","value",n)*a,I=f(r,"background-image-smoothing","value",n),w=r.pstyle("corner-radius").value;w!=="auto"&&(w=r.pstyle("corner-radius").pfValue);var x=e.width||e.cachedW,C=e.height||e.cachedH;(x==null||C==null)&&(document.body.appendChild(e),x=e.cachedW=e.width||e.offsetWidth,C=e.cachedH=e.height||e.offsetHeight,document.body.removeChild(e));var S=x,A=C;if(f(r,"background-width","value",n)!=="auto"&&(f(r,"background-width","units",n)==="%"?S=f(r,"background-width","pfValue",n)*p:S=f(r,"background-width","pfValue",n)),f(r,"background-height","value",n)!=="auto"&&(f(r,"background-height","units",n)==="%"?A=f(r,"background-height","pfValue",n)*y:A=f(r,"background-height","pfValue",n)),!(S===0||A===0)){if(c==="contain"){var R=Math.min(p/S,y/A);S*=R,A*=R}else if(c==="cover"){var R=Math.max(p/S,y/A);S*=R,A*=R}var D=o-p/2,_=f(r,"background-position-x","units",n),M=f(r,"background-position-x","pfValue",n);_==="%"?D+=(p-S)*M:D+=M;var k=f(r,"background-offset-x","units",n),O=f(r,"background-offset-x","pfValue",n);k==="%"?D+=(p-S)*O:D+=O;var P=u-y/2,B=f(r,"background-position-y","units",n),F=f(r,"background-position-y","pfValue",n);B==="%"?P+=(y-A)*F:P+=F;var N=f(r,"background-offset-y","units",n),q=f(r,"background-offset-y","pfValue",n);N==="%"?P+=(y-A)*q:P+=q,m.pathCache&&(D-=o,P-=u,o=0,u=0);var V=t.globalAlpha;t.globalAlpha=T;var Y=i.getImgSmoothing(t),H=!1;if(I==="no"&&Y?(i.setImgSmoothing(t,!1),H=!0):I==="yes"&&!Y&&(i.setImgSmoothing(t,!0),H=!0),h==="no-repeat")E&&(t.save(),m.pathCache?t.clip(m.pathCache):(i.nodeShapes[i.getNodeShape(r)].draw(t,o,u,p,y,w,m),t.clip())),i.safeDrawImage(t,e,0,0,x,C,D,P,S,A),E&&t.restore();else{var Z=t.createPattern(e,h);t.fillStyle=Z,i.nodeShapes[i.getNodeShape(r)].draw(t,o,u,p,y,w,m),t.translate(D,P),t.fill(),t.translate(-D,-P)}t.globalAlpha=V,H&&i.setImgSmoothing(t,Y)}};var Rn={};Rn.eleTextBiggerThanMin=function(t,e){if(!e){var r=t.cy().zoom(),n=this.getPixelRatio(),a=Math.ceil(Dv(r*n));e=Math.pow(2,a)}var i=t.pstyle("font-size").pfValue*e,s=t.pstyle("min-zoomed-font-size").pfValue;return!(i<s)};Rn.drawElementText=function(t,e,r,n,a){var i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,s=this;if(n==null){if(i&&!s.eleTextBiggerThanMin(e))return}else if(n===!1)return;if(e.isNode()){var o=e.pstyle("label");if(!o||!o.value)return;var u=s.getLabelJustification(e);t.textAlign=u,t.textBaseline="bottom"}else{var l=e.element()._private.rscratch.badLine,f=e.pstyle("label"),c=e.pstyle("source-label"),h=e.pstyle("target-label");if(l||(!f||!f.value)&&(!c||!c.value)&&(!h||!h.value))return;t.textAlign="center",t.textBaseline="bottom"}var d=!r,v;r&&(v=r,t.translate(-v.x1,-v.y1)),a==null?(s.drawText(t,e,null,d,i),e.isEdge()&&(s.drawText(t,e,"source",d,i),s.drawText(t,e,"target",d,i))):s.drawText(t,e,a,d,i),r&&t.translate(v.x1,v.y1)};Rn.getFontCache=function(t){var e;this.fontCaches=this.fontCaches||[];for(var r=0;r<this.fontCaches.length;r++)if(e=this.fontCaches[r],e.context===t)return e;return e={context:t},this.fontCaches.push(e),e};Rn.setupTextStyle=function(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,n=e.pstyle("font-style").strValue,a=e.pstyle("font-size").pfValue+"px",i=e.pstyle("font-family").strValue,s=e.pstyle("font-weight").strValue,o=r?e.effectiveOpacity()*e.pstyle("text-opacity").value:1,u=e.pstyle("text-outline-opacity").value*o,l=e.pstyle("color").value,f=e.pstyle("text-outline-color").value;t.font=n+" "+s+" "+a+" "+i,t.lineJoin="round",this.colorFillStyle(t,l[0],l[1],l[2],o),this.colorStrokeStyle(t,f[0],f[1],f[2],u)};function dO(t,e,r,n,a){var i=Math.min(n,a),s=i/2,o=e+n/2,u=r+a/2;t.beginPath(),t.arc(o,u,s,0,Math.PI*2),t.closePath()}function nm(t,e,r,n,a){var i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:5,s=Math.min(i,n/2,a/2);t.beginPath(),t.moveTo(e+s,r),t.lineTo(e+n-s,r),t.quadraticCurveTo(e+n,r,e+n,r+s),t.lineTo(e+n,r+a-s),t.quadraticCurveTo(e+n,r+a,e+n-s,r+a),t.lineTo(e+s,r+a),t.quadraticCurveTo(e,r+a,e,r+a-s),t.lineTo(e,r+s),t.quadraticCurveTo(e,r,e+s,r),t.closePath()}Rn.getTextAngle=function(t,e){var r,n=t._private,a=n.rscratch,i=e?e+"-":"",s=t.pstyle(i+"text-rotation");if(s.strValue==="autorotate"){var o=Mt(a,"labelAngle",e);r=t.isEdge()?o:0}else s.strValue==="none"?r=0:r=s.pfValue;return r};Rn.drawText=function(t,e,r){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,i=e._private,s=i.rscratch,o=a?e.effectiveOpacity():1;if(!(a&&(o===0||e.pstyle("text-opacity").value===0))){r==="main"&&(r=null);var u=Mt(s,"labelX",r),l=Mt(s,"labelY",r),f,c,h=this.getLabelText(e,r);if(h!=null&&h!==""&&!isNaN(u)&&!isNaN(l)){this.setupTextStyle(t,e,a);var d=r?r+"-":"",v=Mt(s,"labelWidth",r),g=Mt(s,"labelHeight",r),p=e.pstyle(d+"text-margin-x").pfValue,y=e.pstyle(d+"text-margin-y").pfValue,m=e.isEdge(),b=e.pstyle("text-halign").value,E=e.pstyle("text-valign").value;m&&(b="center",E="center"),u+=p,l+=y;var T;switch(n?T=this.getTextAngle(e,r):T=0,T!==0&&(f=u,c=l,t.translate(f,c),t.rotate(T),u=0,l=0),E){case"top":break;case"center":l+=g/2;break;case"bottom":l+=g;break}var I=e.pstyle("text-background-opacity").value,w=e.pstyle("text-border-opacity").value,x=e.pstyle("text-border-width").pfValue,C=e.pstyle("text-background-padding").pfValue,S=e.pstyle("text-background-shape").strValue,A=S==="round-rectangle"||S==="roundrectangle",R=S==="circle",D=2;if(I>0||x>0&&w>0){var _=t.fillStyle,M=t.strokeStyle,k=t.lineWidth,O=e.pstyle("text-background-color").value,P=e.pstyle("text-border-color").value,B=e.pstyle("text-border-style").value,F=I>0,N=x>0&&w>0,q=u-C;switch(b){case"left":q-=v;break;case"center":q-=v/2;break}var V=l-g-C,Y=v+2*C,H=g+2*C;if(F&&(t.fillStyle="rgba(".concat(O[0],",").concat(O[1],",").concat(O[2],",").concat(I*o,")")),N&&(t.strokeStyle="rgba(".concat(P[0],",").concat(P[1],",").concat(P[2],",").concat(w*o,")"),t.lineWidth=x,t.setLineDash))switch(B){case"dotted":t.setLineDash([1,1]);break;case"dashed":t.setLineDash([4,2]);break;case"double":t.lineWidth=x/4,t.setLineDash([]);break;case"solid":default:t.setLineDash([]);break}if(A?(t.beginPath(),nm(t,q,V,Y,H,D)):R?(t.beginPath(),dO(t,q,V,Y,H)):(t.beginPath(),t.rect(q,V,Y,H)),F&&t.fill(),N&&t.stroke(),N&&B==="double"){var Z=x/2;t.beginPath(),A?nm(t,q+Z,V+Z,Y-2*Z,H-2*Z,D):t.rect(q+Z,V+Z,Y-2*Z,H-2*Z),t.stroke()}t.fillStyle=_,t.strokeStyle=M,t.lineWidth=k,t.setLineDash&&t.setLineDash([])}var ee=2*e.pstyle("text-outline-width").pfValue;if(ee>0&&(t.lineWidth=ee),e.pstyle("text-wrap").value==="wrap"){var ie=Mt(s,"labelWrapCachedLines",r),J=Mt(s,"labelLineHeight",r),G=v/2,$=this.getLabelJustification(e);switch($==="auto"||(b==="left"?$==="left"?u+=-v:$==="center"&&(u+=-G):b==="center"?$==="left"?u+=-G:$==="right"&&(u+=G):b==="right"&&($==="center"?u+=G:$==="right"&&(u+=v))),E){case"top":l-=(ie.length-1)*J;break;case"center":case"bottom":l-=(ie.length-1)*J;break}for(var U=0;U<ie.length;U++)ee>0&&t.strokeText(ie[U],u,l),t.fillText(ie[U],u,l),l+=J}else ee>0&&t.strokeText(h,u,l),t.fillText(h,u,l);T!==0&&(t.rotate(-T),t.translate(-f,-c))}}};var tn={};tn.drawNode=function(t,e,r){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,s=this,o,u,l=e._private,f=l.rscratch,c=e.position();if(!(!ae(c.x)||!ae(c.y))&&!(i&&!e.visible())){var h=i?e.effectiveOpacity():1,d=s.usePaths(),v,g=!1,p=e.padding();o=e.width()+2*p,u=e.height()+2*p;var y;r&&(y=r,t.translate(-y.x1,-y.y1));for(var m=e.pstyle("background-image"),b=m.value,E=new Array(b.length),T=new Array(b.length),I=0,w=0;w<b.length;w++){var x=b[w],C=E[w]=x!=null&&x!=="none";if(C){var S=e.cy().style().getIndexedStyle(e,"background-image-crossorigin","value",w);I++,T[w]=s.getCachedImage(x,S,function(){l.backgroundTimestamp=Date.now(),e.emitAndNotify("background")})}}var A=e.pstyle("background-blacken").value,R=e.pstyle("border-width").pfValue,D=e.pstyle("background-opacity").value*h,_=e.pstyle("border-color").value,M=e.pstyle("border-style").value,k=e.pstyle("border-join").value,O=e.pstyle("border-cap").value,P=e.pstyle("border-position").value,B=e.pstyle("border-dash-pattern").pfValue,F=e.pstyle("border-dash-offset").pfValue,N=e.pstyle("border-opacity").value*h,q=e.pstyle("outline-width").pfValue,V=e.pstyle("outline-color").value,Y=e.pstyle("outline-style").value,H=e.pstyle("outline-opacity").value*h,Z=e.pstyle("outline-offset").value,ee=e.pstyle("corner-radius").value;ee!=="auto"&&(ee=e.pstyle("corner-radius").pfValue);var ie=function(){var ue=arguments.length>0&&arguments[0]!==void 0?arguments[0]:D;s.eleFillStyle(t,e,ue)},J=function(){var ue=arguments.length>0&&arguments[0]!==void 0?arguments[0]:N;s.colorStrokeStyle(t,_[0],_[1],_[2],ue)},G=function(){var ue=arguments.length>0&&arguments[0]!==void 0?arguments[0]:H;s.colorStrokeStyle(t,V[0],V[1],V[2],ue)},$=function(ue,K,L,z){var W=s.nodePathCache=s.nodePathCache||[],X=px(L==="polygon"?L+","+z.join(","):L,""+K,""+ue,""+ee),Q=W[X],ce,te=!1;return Q!=null?(ce=Q,te=!0,f.pathCache=ce):(ce=new Path2D,W[X]=f.pathCache=ce),{path:ce,cacheHit:te}},U=e.pstyle("shape").strValue,j=e.pstyle("shape-polygon-points").pfValue;if(d){t.translate(c.x,c.y);var ne=$(o,u,U,j);v=ne.path,g=ne.cacheHit}var re=function(){if(!g){var ue=c;d&&(ue={x:0,y:0}),s.nodeShapes[s.getNodeShape(e)].draw(v||t,ue.x,ue.y,o,u,ee,f)}d?t.fill(v):t.fill()},Ie=function(){for(var ue=arguments.length>0&&arguments[0]!==void 0?arguments[0]:h,K=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,L=l.backgrounding,z=0,W=0;W<T.length;W++){var X=e.cy().style().getIndexedStyle(e,"background-image-containment","value",W);if(K&&X==="over"||!K&&X==="inside"){z++;continue}E[W]&&T[W].complete&&!T[W].error&&(z++,s.drawInscribedImage(t,T[W],e,W,ue))}l.backgrounding=z!==I,L!==l.backgrounding&&e.updateStyle(!1)},se=function(){var ue=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,K=arguments.length>1&&arguments[1]!==void 0?arguments[1]:h;s.hasPie(e)&&(s.drawPie(t,e,K),ue&&(d||s.nodeShapes[s.getNodeShape(e)].draw(t,c.x,c.y,o,u,ee,f)))},be=function(){var ue=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,K=arguments.length>1&&arguments[1]!==void 0?arguments[1]:h;s.hasStripe(e)&&(t.save(),d?t.clip(f.pathCache):(s.nodeShapes[s.getNodeShape(e)].draw(t,c.x,c.y,o,u,ee,f),t.clip()),s.drawStripe(t,e,K),t.restore(),ue&&(d||s.nodeShapes[s.getNodeShape(e)].draw(t,c.x,c.y,o,u,ee,f)))},ge=function(){var ue=arguments.length>0&&arguments[0]!==void 0?arguments[0]:h,K=(A>0?A:-A)*ue,L=A>0?0:255;A!==0&&(s.colorFillStyle(t,L,L,L,K),d?t.fill(v):t.fill())},oe=function(){if(R>0){if(t.lineWidth=R,t.lineCap=O,t.lineJoin=k,t.setLineDash)switch(M){case"dotted":t.setLineDash([1,1]);break;case"dashed":t.setLineDash(B),t.lineDashOffset=F;break;case"solid":case"double":t.setLineDash([]);break}if(P!=="center"){if(t.save(),t.lineWidth*=2,P==="inside")d?t.clip(v):t.clip();else{var ue=new Path2D;ue.rect(-o/2-R,-u/2-R,o+2*R,u+2*R),ue.addPath(v),t.clip(ue,"evenodd")}d?t.stroke(v):t.stroke(),t.restore()}else d?t.stroke(v):t.stroke();if(M==="double"){t.lineWidth=R/3;var K=t.globalCompositeOperation;t.globalCompositeOperation="destination-out",d?t.stroke(v):t.stroke(),t.globalCompositeOperation=K}t.setLineDash&&t.setLineDash([])}},de=function(){if(q>0){if(t.lineWidth=q,t.lineCap="butt",t.setLineDash)switch(Y){case"dotted":t.setLineDash([1,1]);break;case"dashed":t.setLineDash([4,2]);break;case"solid":case"double":t.setLineDash([]);break}var ue=c;d&&(ue={x:0,y:0});var K=s.getNodeShape(e),L=R;P==="inside"&&(L=0),P==="outside"&&(L*=2);var z=(o+L+(q+Z))/o,W=(u+L+(q+Z))/u,X=o*z,Q=u*W,ce=s.nodeShapes[K].points,te;if(d){var ye=$(X,Q,K,ce);te=ye.path}if(K==="ellipse")s.drawEllipsePath(te||t,ue.x,ue.y,X,Q);else if(["round-diamond","round-heptagon","round-hexagon","round-octagon","round-pentagon","round-polygon","round-triangle","round-tag"].includes(K)){var he=0,Ee=0,_e=0;K==="round-diamond"?he=(L+Z+q)*1.4:K==="round-heptagon"?(he=(L+Z+q)*1.075,_e=-(L/2+Z+q)/35):K==="round-hexagon"?he=(L+Z+q)*1.12:K==="round-pentagon"?(he=(L+Z+q)*1.13,_e=-(L/2+Z+q)/15):K==="round-tag"?(he=(L+Z+q)*1.12,Ee=(L/2+q+Z)*.07):K==="round-triangle"&&(he=(L+Z+q)*(Math.PI/2),_e=-(L+Z/2+q)/Math.PI),he!==0&&(z=(o+he)/o,X=o*z,["round-hexagon","round-tag"].includes(K)||(W=(u+he)/u,Q=u*W)),ee=ee==="auto"?Ax(X,Q):ee;for(var Ae=X/2,me=Q/2,Oe=ee+(L+q+Z)/2,Le=new Array(ce.length/2),st=new Array(ce.length/2),Je=0;Je<ce.length/2;Je++)Le[Je]={x:ue.x+Ee+Ae*ce[Je*2],y:ue.y+_e+me*ce[Je*2+1]};var St,tt,ht,ot,pt=Le.length;for(tt=Le[pt-1],St=0;St<pt;St++)ht=Le[St%pt],ot=Le[(St+1)%pt],st[St]=Vv(tt,ht,ot,Oe),tt=ht,ht=ot;s.drawRoundPolygonPath(te||t,ue.x+Ee,ue.y+_e,o*z,u*W,ce,st)}else if(["roundrectangle","round-rectangle"].includes(K))ee=ee==="auto"?Wr(X,Q):ee,s.drawRoundRectanglePath(te||t,ue.x,ue.y,X,Q,ee+(L+q+Z)/2);else if(["cutrectangle","cut-rectangle"].includes(K))ee=ee==="auto"?Mv():ee,s.drawCutRectanglePath(te||t,ue.x,ue.y,X,Q,null,ee+(L+q+Z)/4);else if(["bottomroundrectangle","bottom-round-rectangle"].includes(K))ee=ee==="auto"?Wr(X,Q):ee,s.drawBottomRoundRectanglePath(te||t,ue.x,ue.y,X,Q,ee+(L+q+Z)/2);else if(K==="barrel")s.drawBarrelPath(te||t,ue.x,ue.y,X,Q);else if(K.startsWith("polygon")||["rhomboid","right-rhomboid","round-tag","tag","vee"].includes(K)){var Ar=(L+q+Z)/o;ce=Xi(Ki(ce,Ar)),s.drawPolygonPath(te||t,ue.x,ue.y,o,u,ce)}else{var rt=(L+q+Z)/o;ce=Xi(Ki(ce,-rt)),s.drawPolygonPath(te||t,ue.x,ue.y,o,u,ce)}if(d?t.stroke(te):t.stroke(),Y==="double"){t.lineWidth=L/3;var lr=t.globalCompositeOperation;t.globalCompositeOperation="destination-out",d?t.stroke(te):t.stroke(),t.globalCompositeOperation=lr}t.setLineDash&&t.setLineDash([])}},fe=function(){a&&s.drawNodeOverlay(t,e,c,o,u)},ve=function(){a&&s.drawNodeUnderlay(t,e,c,o,u)},pe=function(){s.drawElementText(t,e,null,n)},Ce=e.pstyle("ghost").value==="yes";if(Ce){var Pe=e.pstyle("ghost-offset-x").pfValue,Ne=e.pstyle("ghost-offset-y").pfValue,Me=e.pstyle("ghost-opacity").value,Be=Me*h;t.translate(Pe,Ne),G(),de(),ie(Me*D),re(),Ie(Be,!0),J(Me*N),oe(),se(A!==0||R!==0),be(A!==0||R!==0),Ie(Be,!1),ge(Be),t.translate(-Pe,-Ne)}d&&t.translate(-c.x,-c.y),ve(),d&&t.translate(c.x,c.y),G(),de(),ie(),re(),Ie(h,!0),J(),oe(),se(A!==0||R!==0),be(A!==0||R!==0),Ie(h,!1),ge(),d&&t.translate(-c.x,-c.y),pe(),fe(),r&&t.translate(y.x1,y.y1)}};var MT=function(e){if(!["overlay","underlay"].includes(e))throw new Error("Invalid state");return function(r,n,a,i,s){var o=this;if(n.visible()){var u=n.pstyle("".concat(e,"-padding")).pfValue,l=n.pstyle("".concat(e,"-opacity")).value,f=n.pstyle("".concat(e,"-color")).value,c=n.pstyle("".concat(e,"-shape")).value,h=n.pstyle("".concat(e,"-corner-radius")).value;if(l>0){if(a=a||n.position(),i==null||s==null){var d=n.padding();i=n.width()+2*d,s=n.height()+2*d}o.colorFillStyle(r,f[0],f[1],f[2],l),o.nodeShapes[c].draw(r,a.x,a.y,i+u*2,s+u*2,h),r.fill()}}}};tn.drawNodeOverlay=MT("overlay");tn.drawNodeUnderlay=MT("underlay");tn.hasPie=function(t){return t=t[0],t._private.hasPie};tn.hasStripe=function(t){return t=t[0],t._private.hasStripe};tn.drawPie=function(t,e,r,n){e=e[0],n=n||e.position();var a=e.cy().style(),i=e.pstyle("pie-size"),s=e.pstyle("pie-hole"),o=e.pstyle("pie-start-angle").pfValue,u=n.x,l=n.y,f=e.width(),c=e.height(),h=Math.min(f,c)/2,d,v=0,g=this.usePaths();if(g&&(u=0,l=0),i.units==="%"?h=h*i.pfValue:i.pfValue!==void 0&&(h=i.pfValue/2),s.units==="%"?d=h*s.pfValue:s.pfValue!==void 0&&(d=s.pfValue/2),!(d>=h))for(var p=1;p<=a.pieBackgroundN;p++){var y=e.pstyle("pie-"+p+"-background-size").value,m=e.pstyle("pie-"+p+"-background-color").value,b=e.pstyle("pie-"+p+"-background-opacity").value*r,E=y/100;E+v>1&&(E=1-v);var T=1.5*Math.PI+2*Math.PI*v;T+=o;var I=2*Math.PI*E,w=T+I;y===0||v>=1||v+E>1||(d===0?(t.beginPath(),t.moveTo(u,l),t.arc(u,l,h,T,w),t.closePath()):(t.beginPath(),t.arc(u,l,h,T,w),t.arc(u,l,d,w,T,!0),t.closePath()),this.colorFillStyle(t,m[0],m[1],m[2],b),t.fill(),v+=E)}};tn.drawStripe=function(t,e,r,n){e=e[0],n=n||e.position();var a=e.cy().style(),i=n.x,s=n.y,o=e.width(),u=e.height(),l=0,f=this.usePaths();t.save();var c=e.pstyle("stripe-direction").value,h=e.pstyle("stripe-size");switch(c){case"vertical":break;case"righward":t.rotate(-Math.PI/2);break}var d=o,v=u;h.units==="%"?(d=d*h.pfValue,v=v*h.pfValue):h.pfValue!==void 0&&(d=h.pfValue,v=h.pfValue),f&&(i=0,s=0),s-=d/2,i-=v/2;for(var g=1;g<=a.stripeBackgroundN;g++){var p=e.pstyle("stripe-"+g+"-background-size").value,y=e.pstyle("stripe-"+g+"-background-color").value,m=e.pstyle("stripe-"+g+"-background-opacity").value*r,b=p/100;b+l>1&&(b=1-l),!(p===0||l>=1||l+b>1)&&(t.beginPath(),t.rect(i,s+v*l,d,v*b),t.closePath(),this.colorFillStyle(t,y[0],y[1],y[2],m),t.fill(),l+=b)}t.restore()};var Dt={},vO=100;Dt.getPixelRatio=function(){var t=this.data.contexts[0];if(this.forcedPixelRatio!=null)return this.forcedPixelRatio;var e=this.cy.window(),r=t.backingStorePixelRatio||t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;return(e.devicePixelRatio||1)/r};Dt.paintCache=function(t){for(var e=this.paintCaches=this.paintCaches||[],r=!0,n,a=0;a<e.length;a++)if(n=e[a],n.context===t){r=!1;break}return r&&(n={context:t},e.push(n)),n};Dt.createGradientStyleFor=function(t,e,r,n,a){var i,s=this.usePaths(),o=r.pstyle(e+"-gradient-stop-colors").value,u=r.pstyle(e+"-gradient-stop-positions").pfValue;if(n==="radial-gradient")if(r.isEdge()){var l=r.sourceEndpoint(),f=r.targetEndpoint(),c=r.midpoint(),h=xn(l,c),d=xn(f,c);i=t.createRadialGradient(c.x,c.y,0,c.x,c.y,Math.max(h,d))}else{var v=s?{x:0,y:0}:r.position(),g=r.paddedWidth(),p=r.paddedHeight();i=t.createRadialGradient(v.x,v.y,0,v.x,v.y,Math.max(g,p))}else if(r.isEdge()){var y=r.sourceEndpoint(),m=r.targetEndpoint();i=t.createLinearGradient(y.x,y.y,m.x,m.y)}else{var b=s?{x:0,y:0}:r.position(),E=r.paddedWidth(),T=r.paddedHeight(),I=E/2,w=T/2,x=r.pstyle("background-gradient-direction").value;switch(x){case"to-bottom":i=t.createLinearGradient(b.x,b.y-w,b.x,b.y+w);break;case"to-top":i=t.createLinearGradient(b.x,b.y+w,b.x,b.y-w);break;case"to-left":i=t.createLinearGradient(b.x+I,b.y,b.x-I,b.y);break;case"to-right":i=t.createLinearGradient(b.x-I,b.y,b.x+I,b.y);break;case"to-bottom-right":case"to-right-bottom":i=t.createLinearGradient(b.x-I,b.y-w,b.x+I,b.y+w);break;case"to-top-right":case"to-right-top":i=t.createLinearGradient(b.x-I,b.y+w,b.x+I,b.y-w);break;case"to-bottom-left":case"to-left-bottom":i=t.createLinearGradient(b.x+I,b.y-w,b.x-I,b.y+w);break;case"to-top-left":case"to-left-top":i=t.createLinearGradient(b.x+I,b.y+w,b.x-I,b.y-w);break}}if(!i)return null;for(var C=u.length===o.length,S=o.length,A=0;A<S;A++)i.addColorStop(C?u[A]:A/(S-1),"rgba("+o[A][0]+","+o[A][1]+","+o[A][2]+","+a+")");return i};Dt.gradientFillStyle=function(t,e,r,n){var a=this.createGradientStyleFor(t,"background",e,r,n);if(!a)return null;t.fillStyle=a};Dt.colorFillStyle=function(t,e,r,n,a){t.fillStyle="rgba("+e+","+r+","+n+","+a+")"};Dt.eleFillStyle=function(t,e,r){var n=e.pstyle("background-fill").value;if(n==="linear-gradient"||n==="radial-gradient")this.gradientFillStyle(t,e,n,r);else{var a=e.pstyle("background-color").value;this.colorFillStyle(t,a[0],a[1],a[2],r)}};Dt.gradientStrokeStyle=function(t,e,r,n){var a=this.createGradientStyleFor(t,"line",e,r,n);if(!a)return null;t.strokeStyle=a};Dt.colorStrokeStyle=function(t,e,r,n,a){t.strokeStyle="rgba("+e+","+r+","+n+","+a+")"};Dt.eleStrokeStyle=function(t,e,r){var n=e.pstyle("line-fill").value;if(n==="linear-gradient"||n==="radial-gradient")this.gradientStrokeStyle(t,e,n,r);else{var a=e.pstyle("line-color").value;this.colorStrokeStyle(t,a[0],a[1],a[2],r)}};Dt.matchCanvasSize=function(t){var e=this,r=e.data,n=e.findContainerClientCoords(),a=n[2],i=n[3],s=e.getPixelRatio(),o=e.motionBlurPxRatio;(t===e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_NODE]||t===e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_DRAG])&&(s=o);var u=a*s,l=i*s,f;if(!(u===e.canvasWidth&&l===e.canvasHeight)){e.fontCaches=null;var c=r.canvasContainer;c.style.width=a+"px",c.style.height=i+"px";for(var h=0;h<e.CANVAS_LAYERS;h++)f=r.canvases[h],f.width=u,f.height=l,f.style.width=a+"px",f.style.height=i+"px";for(var h=0;h<e.BUFFER_COUNT;h++)f=r.bufferCanvases[h],f.width=u,f.height=l,f.style.width=a+"px",f.style.height=i+"px";e.textureMult=1,s<=1&&(f=r.bufferCanvases[e.TEXTURE_BUFFER],e.textureMult=2,f.width=u*e.textureMult,f.height=l*e.textureMult),e.canvasWidth=u,e.canvasHeight=l,e.pixelRatio=s}};Dt.renderTo=function(t,e,r,n){this.render({forcedContext:t,forcedZoom:e,forcedPan:r,drawAllLayers:!0,forcedPxRatio:n})};Dt.clearCanvas=function(){var t=this,e=t.data;function r(n){n.clearRect(0,0,t.canvasWidth,t.canvasHeight)}r(e.contexts[t.NODE]),r(e.contexts[t.DRAG])};Dt.render=function(t){var e=this;t=t||wx();var r=e.cy,n=t.forcedContext,a=t.drawAllLayers,i=t.drawOnlyNodeLayer,s=t.forcedZoom,o=t.forcedPan,u=t.forcedPxRatio===void 0?this.getPixelRatio():t.forcedPxRatio,l=e.data,f=l.canvasNeedsRedraw,c=e.textureOnViewport&&!n&&(e.pinching||e.hoverData.dragging||e.swipePanning||e.data.wheelZooming),h=t.motionBlur!==void 0?t.motionBlur:e.motionBlur,d=e.motionBlurPxRatio,v=r.hasCompoundNodes(),g=e.hoverData.draggingEles,p=!!(e.hoverData.selecting||e.touchData.selecting);h=h&&!n&&e.motionBlurEnabled&&!p;var y=h;n||(e.prevPxRatio!==u&&(e.invalidateContainerClientCoordsCache(),e.matchCanvasSize(e.container),e.redrawHint("eles",!0),e.redrawHint("drag",!0)),e.prevPxRatio=u),!n&&e.motionBlurTimeout&&clearTimeout(e.motionBlurTimeout),h&&(e.mbFrames==null&&(e.mbFrames=0),e.mbFrames++,e.mbFrames<3&&(y=!1),e.mbFrames>e.minMbLowQualFrames&&(e.motionBlurPxRatio=e.mbPxRBlurry)),e.clearingMotionBlur&&(e.motionBlurPxRatio=1),e.textureDrawLastFrame&&!c&&(f[e.NODE]=!0,f[e.SELECT_BOX]=!0);var m=r.style(),b=r.zoom(),E=s!==void 0?s:b,T=r.pan(),I={x:T.x,y:T.y},w={zoom:b,pan:{x:T.x,y:T.y}},x=e.prevViewport,C=x===void 0||w.zoom!==x.zoom||w.pan.x!==x.pan.x||w.pan.y!==x.pan.y;!C&&!(g&&!v)&&(e.motionBlurPxRatio=1),o&&(I=o),E*=u,I.x*=u,I.y*=u;var S=e.getCachedZSortedEles();function A(J,G,$,U,j){var ne=J.globalCompositeOperation;J.globalCompositeOperation="destination-out",e.colorFillStyle(J,255,255,255,e.motionBlurTransparency),J.fillRect(G,$,U,j),J.globalCompositeOperation=ne}function R(J,G){var $,U,j,ne;!e.clearingMotionBlur&&(J===l.bufferContexts[e.MOTIONBLUR_BUFFER_NODE]||J===l.bufferContexts[e.MOTIONBLUR_BUFFER_DRAG])?($={x:T.x*d,y:T.y*d},U=b*d,j=e.canvasWidth*d,ne=e.canvasHeight*d):($=I,U=E,j=e.canvasWidth,ne=e.canvasHeight),J.setTransform(1,0,0,1,0,0),G==="motionBlur"?A(J,0,0,j,ne):!n&&(G===void 0||G)&&J.clearRect(0,0,j,ne),a||(J.translate($.x,$.y),J.scale(U,U)),o&&J.translate(o.x,o.y),s&&J.scale(s,s)}if(c||(e.textureDrawLastFrame=!1),c){if(e.textureDrawLastFrame=!0,!e.textureCache){e.textureCache={},e.textureCache.bb=r.mutableElements().boundingBox(),e.textureCache.texture=e.data.bufferCanvases[e.TEXTURE_BUFFER];var D=e.data.bufferContexts[e.TEXTURE_BUFFER];D.setTransform(1,0,0,1,0,0),D.clearRect(0,0,e.canvasWidth*e.textureMult,e.canvasHeight*e.textureMult),e.render({forcedContext:D,drawOnlyNodeLayer:!0,forcedPxRatio:u*e.textureMult});var w=e.textureCache.viewport={zoom:r.zoom(),pan:r.pan(),width:e.canvasWidth,height:e.canvasHeight};w.mpan={x:(0-w.pan.x)/w.zoom,y:(0-w.pan.y)/w.zoom}}f[e.DRAG]=!1,f[e.NODE]=!1;var _=l.contexts[e.NODE],M=e.textureCache.texture,w=e.textureCache.viewport;_.setTransform(1,0,0,1,0,0),h?A(_,0,0,w.width,w.height):_.clearRect(0,0,w.width,w.height);var k=m.core("outside-texture-bg-color").value,O=m.core("outside-texture-bg-opacity").value;e.colorFillStyle(_,k[0],k[1],k[2],O),_.fillRect(0,0,w.width,w.height);var b=r.zoom();R(_,!1),_.clearRect(w.mpan.x,w.mpan.y,w.width/w.zoom/u,w.height/w.zoom/u),_.drawImage(M,w.mpan.x,w.mpan.y,w.width/w.zoom/u,w.height/w.zoom/u)}else e.textureOnViewport&&!n&&(e.textureCache=null);var P=r.extent(),B=e.pinching||e.hoverData.dragging||e.swipePanning||e.data.wheelZooming||e.hoverData.draggingEles||e.cy.animated(),F=e.hideEdgesOnViewport&&B,N=[];if(N[e.NODE]=!f[e.NODE]&&h&&!e.clearedForMotionBlur[e.NODE]||e.clearingMotionBlur,N[e.NODE]&&(e.clearedForMotionBlur[e.NODE]=!0),N[e.DRAG]=!f[e.DRAG]&&h&&!e.clearedForMotionBlur[e.DRAG]||e.clearingMotionBlur,N[e.DRAG]&&(e.clearedForMotionBlur[e.DRAG]=!0),f[e.NODE]||a||i||N[e.NODE]){var q=h&&!N[e.NODE]&&d!==1,_=n||(q?e.data.bufferContexts[e.MOTIONBLUR_BUFFER_NODE]:l.contexts[e.NODE]),V=h&&!q?"motionBlur":void 0;R(_,V),F?e.drawCachedNodes(_,S.nondrag,u,P):e.drawLayeredElements(_,S.nondrag,u,P),e.debug&&e.drawDebugPoints(_,S.nondrag),!a&&!h&&(f[e.NODE]=!1)}if(!i&&(f[e.DRAG]||a||N[e.DRAG])){var q=h&&!N[e.DRAG]&&d!==1,_=n||(q?e.data.bufferContexts[e.MOTIONBLUR_BUFFER_DRAG]:l.contexts[e.DRAG]);R(_,h&&!q?"motionBlur":void 0),F?e.drawCachedNodes(_,S.drag,u,P):e.drawCachedElements(_,S.drag,u,P),e.debug&&e.drawDebugPoints(_,S.drag),!a&&!h&&(f[e.DRAG]=!1)}if(this.drawSelectionRectangle(t,R),h&&d!==1){var Y=l.contexts[e.NODE],H=e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_NODE],Z=l.contexts[e.DRAG],ee=e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_DRAG],ie=function(G,$,U){G.setTransform(1,0,0,1,0,0),U||!y?G.clearRect(0,0,e.canvasWidth,e.canvasHeight):A(G,0,0,e.canvasWidth,e.canvasHeight);var j=d;G.drawImage($,0,0,e.canvasWidth*j,e.canvasHeight*j,0,0,e.canvasWidth,e.canvasHeight)};(f[e.NODE]||N[e.NODE])&&(ie(Y,H,N[e.NODE]),f[e.NODE]=!1),(f[e.DRAG]||N[e.DRAG])&&(ie(Z,ee,N[e.DRAG]),f[e.DRAG]=!1)}e.prevViewport=w,e.clearingMotionBlur&&(e.clearingMotionBlur=!1,e.motionBlurCleared=!0,e.motionBlur=!0),h&&(e.motionBlurTimeout=setTimeout(function(){e.motionBlurTimeout=null,e.clearedForMotionBlur[e.NODE]=!1,e.clearedForMotionBlur[e.DRAG]=!1,e.motionBlur=!1,e.clearingMotionBlur=!c,e.mbFrames=0,f[e.NODE]=!0,f[e.DRAG]=!0,e.redraw()},vO)),n||r.emit("render")};var wa;Dt.drawSelectionRectangle=function(t,e){var r=this,n=r.cy,a=r.data,i=n.style(),s=t.drawOnlyNodeLayer,o=t.drawAllLayers,u=a.canvasNeedsRedraw,l=t.forcedContext;if(r.showFps||!s&&u[r.SELECT_BOX]&&!o){var f=l||a.contexts[r.SELECT_BOX];if(e(f),r.selection[4]==1&&(r.hoverData.selecting||r.touchData.selecting)){var c=r.cy.zoom(),h=i.core("selection-box-border-width").value/c;f.lineWidth=h,f.fillStyle="rgba("+i.core("selection-box-color").value[0]+","+i.core("selection-box-color").value[1]+","+i.core("selection-box-color").value[2]+","+i.core("selection-box-opacity").value+")",f.fillRect(r.selection[0],r.selection[1],r.selection[2]-r.selection[0],r.selection[3]-r.selection[1]),h>0&&(f.strokeStyle="rgba("+i.core("selection-box-border-color").value[0]+","+i.core("selection-box-border-color").value[1]+","+i.core("selection-box-border-color").value[2]+","+i.core("selection-box-opacity").value+")",f.strokeRect(r.selection[0],r.selection[1],r.selection[2]-r.selection[0],r.selection[3]-r.selection[1]))}if(a.bgActivePosistion&&!r.hoverData.selecting){var c=r.cy.zoom(),d=a.bgActivePosistion;f.fillStyle="rgba("+i.core("active-bg-color").value[0]+","+i.core("active-bg-color").value[1]+","+i.core("active-bg-color").value[2]+","+i.core("active-bg-opacity").value+")",f.beginPath(),f.arc(d.x,d.y,i.core("active-bg-size").pfValue/c,0,2*Math.PI),f.fill()}var v=r.lastRedrawTime;if(r.showFps&&v){v=Math.round(v);var g=Math.round(1e3/v),p="1 frame = "+v+" ms = "+g+" fps";if(f.setTransform(1,0,0,1,0,0),f.fillStyle="rgba(255, 0, 0, 0.75)",f.strokeStyle="rgba(255, 0, 0, 0.75)",f.font="30px Arial",!wa){var y=f.measureText(p);wa=y.actualBoundingBoxAscent}f.fillText(p,0,wa);var m=60;f.strokeRect(0,wa+10,250,20),f.fillRect(0,wa+10,250*Math.min(g/m,1),20)}o||(u[r.SELECT_BOX]=!1)}};function am(t,e,r){var n=t.createShader(e);if(t.shaderSource(n,r),t.compileShader(n),!t.getShaderParameter(n,t.COMPILE_STATUS))throw new Error(t.getShaderInfoLog(n));return n}function gO(t,e,r){var n=am(t,t.VERTEX_SHADER,e),a=am(t,t.FRAGMENT_SHADER,r),i=t.createProgram();if(t.attachShader(i,n),t.attachShader(i,a),t.linkProgram(i),!t.getProgramParameter(i,t.LINK_STATUS))throw new Error("Could not initialize shaders");return i}function pO(t,e,r){r===void 0&&(r=e);var n=t.makeOffscreenCanvas(e,r),a=n.context=n.getContext("2d");return n.clear=function(){return a.clearRect(0,0,n.width,n.height)},n.clear(),n}function Yv(t){var e=t.pixelRatio,r=t.cy.zoom(),n=t.cy.pan();return{zoom:r*e,pan:{x:n.x*e,y:n.y*e}}}function yO(t){var e=t.pixelRatio,r=t.cy.zoom();return r*e}function mO(t,e,r,n,a){var i=n*r+e.x,s=a*r+e.y;return s=Math.round(t.canvasHeight-s),[i,s]}function bO(t){return t.pstyle("background-fill").value!=="solid"||t.pstyle("background-image").strValue!=="none"?!1:t.pstyle("border-width").value===0||t.pstyle("border-opacity").value===0?!0:t.pstyle("border-style").value==="solid"}function wO(t,e){if(t.length!==e.length)return!1;for(var r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}function on(t,e,r){var n=t[0]/255,a=t[1]/255,i=t[2]/255,s=e,o=r||new Array(4);return o[0]=n*s,o[1]=a*s,o[2]=i*s,o[3]=s,o}function Gn(t,e){var r=e||new Array(4);return r[0]=(t>>0&255)/255,r[1]=(t>>8&255)/255,r[2]=(t>>16&255)/255,r[3]=(t>>24&255)/255,r}function EO(t){return t[0]+(t[1]<<8)+(t[2]<<16)+(t[3]<<24)}function xO(t,e){var r=t.createTexture();return r.buffer=function(n){t.bindTexture(t.TEXTURE_2D,r),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR_MIPMAP_NEAREST),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n),t.generateMipmap(t.TEXTURE_2D),t.bindTexture(t.TEXTURE_2D,null)},r.deleteTexture=function(){t.deleteTexture(r)},r}function OT(t,e){switch(e){case"float":return[1,t.FLOAT,4];case"vec2":return[2,t.FLOAT,4];case"vec3":return[3,t.FLOAT,4];case"vec4":return[4,t.FLOAT,4];case"int":return[1,t.INT,4];case"ivec2":return[2,t.INT,4]}}function PT(t,e,r){switch(e){case t.FLOAT:return new Float32Array(r);case t.INT:return new Int32Array(r)}}function TO(t,e,r,n,a,i){switch(e){case t.FLOAT:return new Float32Array(r.buffer,i*n,a);case t.INT:return new Int32Array(r.buffer,i*n,a)}}function CO(t,e,r,n){var a=OT(t,e),i=at(a,2),s=i[0],o=i[1],u=PT(t,o,n),l=t.createBuffer();return t.bindBuffer(t.ARRAY_BUFFER,l),t.bufferData(t.ARRAY_BUFFER,u,t.STATIC_DRAW),o===t.FLOAT?t.vertexAttribPointer(r,s,o,!1,0,0):o===t.INT&&t.vertexAttribIPointer(r,s,o,0,0),t.enableVertexAttribArray(r),t.bindBuffer(t.ARRAY_BUFFER,null),l}function tr(t,e,r,n){var a=OT(t,r),i=at(a,3),s=i[0],o=i[1],u=i[2],l=PT(t,o,e*s),f=s*u,c=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,c),t.bufferData(t.ARRAY_BUFFER,e*f,t.DYNAMIC_DRAW),t.enableVertexAttribArray(n),o===t.FLOAT?t.vertexAttribPointer(n,s,o,!1,f,0):o===t.INT&&t.vertexAttribIPointer(n,s,o,f,0),t.vertexAttribDivisor(n,1),t.bindBuffer(t.ARRAY_BUFFER,null);for(var h=new Array(e),d=0;d<e;d++)h[d]=TO(t,o,l,f,s,d);return c.dataArray=l,c.stride=f,c.size=s,c.getView=function(v){return h[v]},c.setPoint=function(v,g,p){var y=h[v];y[0]=g,y[1]=p},c.bufferSubData=function(v){t.bindBuffer(t.ARRAY_BUFFER,c),v?t.bufferSubData(t.ARRAY_BUFFER,0,l,0,v*s):t.bufferSubData(t.ARRAY_BUFFER,0,l)},c}function SO(t,e,r){for(var n=9,a=new Float32Array(e*n),i=new Array(e),s=0;s<e;s++){var o=s*n*4;i[s]=new Float32Array(a.buffer,o,n)}var u=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,u),t.bufferData(t.ARRAY_BUFFER,a.byteLength,t.DYNAMIC_DRAW);for(var l=0;l<3;l++){var f=r+l;t.enableVertexAttribArray(f),t.vertexAttribPointer(f,3,t.FLOAT,!1,3*12,l*12),t.vertexAttribDivisor(f,1)}return t.bindBuffer(t.ARRAY_BUFFER,null),u.getMatrixView=function(c){return i[c]},u.setData=function(c,h){i[h].set(c,0)},u.bufferSubData=function(){t.bindBuffer(t.ARRAY_BUFFER,u),t.bufferSubData(t.ARRAY_BUFFER,0,a)},u}function AO(t){var e=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,e);var r=t.createTexture();return t.bindTexture(t.TEXTURE_2D,r),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,r,0),t.bindFramebuffer(t.FRAMEBUFFER,null),e.setFramebufferAttachmentSizes=function(n,a){t.bindTexture(t.TEXTURE_2D,r),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,n,a,0,t.RGBA,t.UNSIGNED_BYTE,null)},e}var im=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});function Ou(){var t=new im(9);return im!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function sm(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function IO(t,e,r){var n=e[0],a=e[1],i=e[2],s=e[3],o=e[4],u=e[5],l=e[6],f=e[7],c=e[8],h=r[0],d=r[1],v=r[2],g=r[3],p=r[4],y=r[5],m=r[6],b=r[7],E=r[8];return t[0]=h*n+d*s+v*l,t[1]=h*a+d*o+v*f,t[2]=h*i+d*u+v*c,t[3]=g*n+p*s+y*l,t[4]=g*a+p*o+y*f,t[5]=g*i+p*u+y*c,t[6]=m*n+b*s+E*l,t[7]=m*a+b*o+E*f,t[8]=m*i+b*u+E*c,t}function qi(t,e,r){var n=e[0],a=e[1],i=e[2],s=e[3],o=e[4],u=e[5],l=e[6],f=e[7],c=e[8],h=r[0],d=r[1];return t[0]=n,t[1]=a,t[2]=i,t[3]=s,t[4]=o,t[5]=u,t[6]=h*n+d*s+l,t[7]=h*a+d*o+f,t[8]=h*i+d*u+c,t}function om(t,e,r){var n=e[0],a=e[1],i=e[2],s=e[3],o=e[4],u=e[5],l=e[6],f=e[7],c=e[8],h=Math.sin(r),d=Math.cos(r);return t[0]=d*n+h*s,t[1]=d*a+h*o,t[2]=d*i+h*u,t[3]=d*s-h*n,t[4]=d*o-h*a,t[5]=d*u-h*i,t[6]=l,t[7]=f,t[8]=c,t}function av(t,e,r){var n=r[0],a=r[1];return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=a*e[3],t[4]=a*e[4],t[5]=a*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function RO(t,e,r){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/r,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}var DO=function(){function t(e,r,n,a){Qr(this,t),this.debugID=Math.floor(Math.random()*1e4),this.r=e,this.texSize=r,this.texRows=n,this.texHeight=Math.floor(r/n),this.enableWrapping=!0,this.locked=!1,this.texture=null,this.needsBuffer=!0,this.freePointer={x:0,row:0},this.keyToLocation=new Map,this.canvas=a(e,r,r),this.scratch=a(e,r,this.texHeight,"scratch")}return Jr(t,[{key:"lock",value:function(){this.locked=!0}},{key:"getKeys",value:function(){return new Set(this.keyToLocation.keys())}},{key:"getScale",value:function(r){var n=r.w,a=r.h,i=this.texHeight,s=this.texSize,o=i/a,u=n*o,l=a*o;return u>s&&(o=s/n,u=n*o,l=a*o),{scale:o,texW:u,texH:l}}},{key:"draw",value:function(r,n,a){var i=this;if(this.locked)throw new Error("can't draw, atlas is locked");var s=this.texSize,o=this.texRows,u=this.texHeight,l=this.getScale(n),f=l.scale,c=l.texW,h=l.texH,d=function(b,E){if(a&&E){var T=E.context,I=b.x,w=b.row,x=I,C=u*w;T.save(),T.translate(x,C),T.scale(f,f),a(T,n),T.restore()}},v=[null,null],g=function(){d(i.freePointer,i.canvas),v[0]={x:i.freePointer.x,y:i.freePointer.row*u,w:c,h},v[1]={x:i.freePointer.x+c,y:i.freePointer.row*u,w:0,h},i.freePointer.x+=c,i.freePointer.x==s&&(i.freePointer.x=0,i.freePointer.row++)},p=function(){var b=i.scratch,E=i.canvas;b.clear(),d({x:0,row:0},b);var T=s-i.freePointer.x,I=c-T,w=u;{var x=i.freePointer.x,C=i.freePointer.row*u,S=T;E.context.drawImage(b,0,0,S,w,x,C,S,w),v[0]={x,y:C,w:S,h}}{var A=T,R=(i.freePointer.row+1)*u,D=I;E&&E.context.drawImage(b,A,0,D,w,0,R,D,w),v[1]={x:0,y:R,w:D,h}}i.freePointer.x=I,i.freePointer.row++},y=function(){i.freePointer.x=0,i.freePointer.row++};if(this.freePointer.x+c<=s)g();else{if(this.freePointer.row>=o-1)return!1;this.freePointer.x===s?(y(),g()):this.enableWrapping?p():(y(),g())}return this.keyToLocation.set(r,v),this.needsBuffer=!0,v}},{key:"getOffsets",value:function(r){return this.keyToLocation.get(r)}},{key:"isEmpty",value:function(){return this.freePointer.x===0&&this.freePointer.row===0}},{key:"canFit",value:function(r){if(this.locked)return!1;var n=this.texSize,a=this.texRows,i=this.getScale(r),s=i.texW;return this.freePointer.x+s>n?this.freePointer.row<a-1:!0}},{key:"bufferIfNeeded",value:function(r){this.texture||(this.texture=xO(r,this.debugID)),this.needsBuffer&&(this.texture.buffer(this.canvas),this.needsBuffer=!1,this.locked&&(this.canvas=null,this.scratch=null))}},{key:"dispose",value:function(){this.texture&&(this.texture.deleteTexture(),this.texture=null),this.canvas=null,this.scratch=null,this.locked=!0}}])}(),_O=function(){function t(e,r,n,a){Qr(this,t),this.r=e,this.texSize=r,this.texRows=n,this.createTextureCanvas=a,this.atlases=[],this.styleKeyToAtlas=new Map,this.markedKeys=new Set}return Jr(t,[{key:"getKeys",value:function(){return new Set(this.styleKeyToAtlas.keys())}},{key:"_createAtlas",value:function(){var r=this.r,n=this.texSize,a=this.texRows,i=this.createTextureCanvas;return new DO(r,n,a,i)}},{key:"_getScratchCanvas",value:function(){if(!this.scratch){var r=this.r,n=this.texSize,a=this.texRows,i=this.createTextureCanvas,s=Math.floor(n/a);this.scratch=i(r,n,s,"scratch")}return this.scratch}},{key:"draw",value:function(r,n,a){var i=this.styleKeyToAtlas.get(r);return i||(i=this.atlases[this.atlases.length-1],(!i||!i.canFit(n))&&(i&&i.lock(),i=this._createAtlas(),this.atlases.push(i)),i.draw(r,n,a),this.styleKeyToAtlas.set(r,i)),i}},{key:"getAtlas",value:function(r){return this.styleKeyToAtlas.get(r)}},{key:"hasAtlas",value:function(r){return this.styleKeyToAtlas.has(r)}},{key:"markKeyForGC",value:function(r){this.markedKeys.add(r)}},{key:"gc",value:function(){var r=this,n=this.markedKeys;if(n.size===0){console.log("nothing to garbage collect");return}var a=[],i=new Map,s=null,o=Pt(this.atlases),u;try{var l=function(){var c=u.value,h=c.getKeys(),d=LO(n,h);if(d.size===0)return a.push(c),h.forEach(function(T){return i.set(T,c)}),1;s||(s=r._createAtlas(),a.push(s));var v=Pt(h),g;try{for(v.s();!(g=v.n()).done;){var p=g.value;if(!d.has(p)){var y=c.getOffsets(p),m=at(y,2),b=m[0],E=m[1];s.canFit({w:b.w+E.w,h:b.h})||(s.lock(),s=r._createAtlas(),a.push(s)),c.canvas&&(r._copyTextureToNewAtlas(p,c,s),i.set(p,s))}}}catch(T){v.e(T)}finally{v.f()}c.dispose()};for(o.s();!(u=o.n()).done;)l()}catch(f){o.e(f)}finally{o.f()}this.atlases=a,this.styleKeyToAtlas=i,this.markedKeys=new Set}},{key:"_copyTextureToNewAtlas",value:function(r,n,a){var i=n.getOffsets(r),s=at(i,2),o=s[0],u=s[1];if(u.w===0)a.draw(r,o,function(h){h.drawImage(n.canvas,o.x,o.y,o.w,o.h,0,0,o.w,o.h)});else{var l=this._getScratchCanvas();l.clear(),l.context.drawImage(n.canvas,o.x,o.y,o.w,o.h,0,0,o.w,o.h),l.context.drawImage(n.canvas,u.x,u.y,u.w,u.h,o.w,0,u.w,u.h);var f=o.w+u.w,c=o.h;a.draw(r,{w:f,h:c},function(h){h.drawImage(l,0,0,f,c,0,0,f,c)})}}},{key:"getCounts",value:function(){return{keyCount:this.styleKeyToAtlas.size,atlasCount:new Set(this.styleKeyToAtlas.values()).size}}}])}();function LO(t,e){return t.intersection?t.intersection(e):new Set(Ui(t).filter(function(r){return e.has(r)}))}var MO=function(){function t(e,r){Qr(this,t),this.r=e,this.globalOptions=r,this.atlasSize=r.webglTexSize,this.maxAtlasesPerBatch=r.webglTexPerBatch,this.renderTypes=new Map,this.collections=new Map,this.typeAndIdToKey=new Map}return Jr(t,[{key:"getAtlasSize",value:function(){return this.atlasSize}},{key:"addAtlasCollection",value:function(r,n){var a=this.globalOptions,i=a.webglTexSize,s=a.createTextureCanvas,o=n.texRows,u=this._cacheScratchCanvas(s),l=new _O(this.r,i,o,u);this.collections.set(r,l)}},{key:"addRenderType",value:function(r,n){var a=n.collection;if(!this.collections.has(a))throw new Error("invalid atlas collection name '".concat(a,"'"));var i=this.collections.get(a),s=xe({type:r,atlasCollection:i},n);this.renderTypes.set(r,s)}},{key:"getRenderTypeOpts",value:function(r){return this.renderTypes.get(r)}},{key:"getAtlasCollection",value:function(r){return this.collections.get(r)}},{key:"_cacheScratchCanvas",value:function(r){var n=-1,a=-1,i=null;return function(s,o,u,l){return l?((!i||o!=n||u!=a)&&(n=o,a=u,i=r(s,o,u)),i):r(s,o,u)}}},{key:"_key",value:function(r,n){return"".concat(r,"-").concat(n)}},{key:"invalidate",value:function(r){var n=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=a.forceRedraw,s=i===void 0?!1:i,o=a.filterEle,u=o===void 0?function(){return!0}:o,l=a.filterType,f=l===void 0?function(){return!0}:l,c=!1,h=!1,d=Pt(r),v;try{for(d.s();!(v=d.n()).done;){var g=v.value;if(u(g)){var p=Pt(this.renderTypes.values()),y;try{var m=function(){var E=y.value,T=E.type;if(f(T)){var I=n.collections.get(E.collection),w=E.getKey(g),x=Array.isArray(w)?w:[w];if(s)x.forEach(function(R){return I.markKeyForGC(R)}),h=!0;else{var C=E.getID?E.getID(g):g.id(),S=n._key(T,C),A=n.typeAndIdToKey.get(S);A!==void 0&&!wO(x,A)&&(c=!0,n.typeAndIdToKey.delete(S),A.forEach(function(R){return I.markKeyForGC(R)}))}}};for(p.s();!(y=p.n()).done;)m()}catch(b){p.e(b)}finally{p.f()}}}}catch(b){d.e(b)}finally{d.f()}return h&&(this.gc(),c=!1),c}},{key:"gc",value:function(){var r=Pt(this.collections.values()),n;try{for(r.s();!(n=r.n()).done;){var a=n.value;a.gc()}}catch(i){r.e(i)}finally{r.f()}}},{key:"getOrCreateAtlas",value:function(r,n,a,i){var s=this.renderTypes.get(n),o=this.collections.get(s.collection),u=!1,l=o.draw(i,a,function(h){s.drawClipped?(h.save(),h.beginPath(),h.rect(0,0,a.w,a.h),h.clip(),s.drawElement(h,r,a,!0,!0),h.restore()):s.drawElement(h,r,a,!0,!0),u=!0});if(u){var f=s.getID?s.getID(r):r.id(),c=this._key(n,f);this.typeAndIdToKey.has(c)?this.typeAndIdToKey.get(c).push(i):this.typeAndIdToKey.set(c,[i])}return l}},{key:"getAtlasInfo",value:function(r,n){var a=this,i=this.renderTypes.get(n),s=i.getKey(r),o=Array.isArray(s)?s:[s];return o.map(function(u){var l=i.getBoundingBox(r,u),f=a.getOrCreateAtlas(r,n,l,u),c=f.getOffsets(u),h=at(c,2),d=h[0],v=h[1];return{atlas:f,tex:d,tex1:d,tex2:v,bb:l}})}},{key:"getDebugInfo",value:function(){var r=[],n=Pt(this.collections),a;try{for(n.s();!(a=n.n()).done;){var i=at(a.value,2),s=i[0],o=i[1],u=o.getCounts(),l=u.keyCount,f=u.atlasCount;r.push({type:s,keyCount:l,atlasCount:f})}}catch(c){n.e(c)}finally{n.f()}return r}}])}(),OO=function(){function t(e){Qr(this,t),this.globalOptions=e,this.atlasSize=e.webglTexSize,this.maxAtlasesPerBatch=e.webglTexPerBatch,this.batchAtlases=[]}return Jr(t,[{key:"getMaxAtlasesPerBatch",value:function(){return this.maxAtlasesPerBatch}},{key:"getAtlasSize",value:function(){return this.atlasSize}},{key:"getIndexArray",value:function(){return Array.from({length:this.maxAtlasesPerBatch},function(r,n){return n})}},{key:"startBatch",value:function(){this.batchAtlases=[]}},{key:"getAtlasCount",value:function(){return this.batchAtlases.length}},{key:"getAtlases",value:function(){return this.batchAtlases}},{key:"canAddToCurrentBatch",value:function(r){return this.batchAtlases.length===this.maxAtlasesPerBatch?this.batchAtlases.includes(r):!0}},{key:"getAtlasIndexForBatch",value:function(r){var n=this.batchAtlases.indexOf(r);if(n<0){if(this.batchAtlases.length===this.maxAtlasesPerBatch)throw new Error("cannot add more atlases to batch");this.batchAtlases.push(r),n=this.batchAtlases.length-1}return n}}])}(),PO=`
  float circleSD(vec2 p, float r) {
    return distance(vec2(0), p) - r; // signed distance
  }
`,kO=`
  float rectangleSD(vec2 p, vec2 b) {
    vec2 d = abs(p)-b;
    return distance(vec2(0),max(d,0.0)) + min(max(d.x,d.y),0.0);
  }
`,NO=`
  float roundRectangleSD(vec2 p, vec2 b, vec4 cr) {
    cr.xy = (p.x > 0.0) ? cr.xy : cr.zw;
    cr.x  = (p.y > 0.0) ? cr.x  : cr.y;
    vec2 q = abs(p) - b + cr.x;
    return min(max(q.x, q.y), 0.0) + distance(vec2(0), max(q, 0.0)) - cr.x;
  }
`,BO=`
  float ellipseSD(vec2 p, vec2 ab) {
    p = abs( p ); // symmetry

    // find root with Newton solver
    vec2 q = ab*(p-ab);
    float w = (q.x<q.y)? 1.570796327 : 0.0;
    for( int i=0; i<5; i++ ) {
      vec2 cs = vec2(cos(w),sin(w));
      vec2 u = ab*vec2( cs.x,cs.y);
      vec2 v = ab*vec2(-cs.y,cs.x);
      w = w + dot(p-u,v)/(dot(p-u,u)+dot(v,v));
    }
    
    // compute final point and distance
    float d = length(p-ab*vec2(cos(w),sin(w)));
    
    // return signed distance
    return (dot(p/ab,p/ab)>1.0) ? d : -d;
  }
`,ka={SCREEN:{name:"screen",screen:!0},PICKING:{name:"picking",picking:!0}},rs={IGNORE:1,USE_BB:2},Pu=0,um=1,lm=2,ku=3,zn=4,Ai=5,Ea=6,xa=7,FO=function(){function t(e,r,n){Qr(this,t),this.r=e,this.gl=r,this.maxInstances=n.webglBatchSize,this.atlasSize=n.webglTexSize,this.bgColor=n.bgColor,this.debug=n.webglDebug,this.batchDebugInfo=[],n.enableWrapping=!0,n.createTextureCanvas=pO,this.atlasManager=new MO(e,n),this.batchManager=new OO(n),this.simpleShapeOptions=new Map,this.program=this._createShaderProgram(ka.SCREEN),this.pickingProgram=this._createShaderProgram(ka.PICKING),this.vao=this._createVAO()}return Jr(t,[{key:"addAtlasCollection",value:function(r,n){this.atlasManager.addAtlasCollection(r,n)}},{key:"addTextureAtlasRenderType",value:function(r,n){this.atlasManager.addRenderType(r,n)}},{key:"addSimpleShapeRenderType",value:function(r,n){this.simpleShapeOptions.set(r,n)}},{key:"invalidate",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=n.type,i=this.atlasManager;return a?i.invalidate(r,{filterType:function(o){return o===a},forceRedraw:!0}):i.invalidate(r)}},{key:"gc",value:function(){this.atlasManager.gc()}},{key:"_createShaderProgram",value:function(r){var n=this.gl,a=`#version 300 es
      precision highp float;

      uniform mat3 uPanZoomMatrix;
      uniform int  uAtlasSize;
      
      // instanced
      in vec2 aPosition; // a vertex from the unit square
      
      in mat3 aTransform; // used to transform verticies, eg into a bounding box
      in int aVertType; // the type of thing we are rendering

      // the z-index that is output when using picking mode
      in vec4 aIndex;
      
      // For textures
      in int aAtlasId; // which shader unit/atlas to use
      in vec4 aTex; // x/y/w/h of texture in atlas

      // for edges
      in vec4 aPointAPointB;
      in vec4 aPointCPointD;
      in vec2 aLineWidth; // also used for node border width

      // simple shapes
      in vec4 aCornerRadius; // for round-rectangle [top-right, bottom-right, top-left, bottom-left]
      in vec4 aColor; // also used for edges
      in vec4 aBorderColor; // aLineWidth is used for border width

      // output values passed to the fragment shader
      out vec2 vTexCoord;
      out vec4 vColor;
      out vec2 vPosition;
      // flat values are not interpolated
      flat out int vAtlasId; 
      flat out int vVertType;
      flat out vec2 vTopRight;
      flat out vec2 vBotLeft;
      flat out vec4 vCornerRadius;
      flat out vec4 vBorderColor;
      flat out vec2 vBorderWidth;
      flat out vec4 vIndex;
      
      void main(void) {
        int vid = gl_VertexID;
        vec2 position = aPosition; // TODO make this a vec3, simplifies some code below

        if(aVertType == `.concat(Pu,`) {
          float texX = aTex.x; // texture coordinates
          float texY = aTex.y;
          float texW = aTex.z;
          float texH = aTex.w;

          if(vid == 1 || vid == 2 || vid == 4) {
            texX += texW;
          }
          if(vid == 2 || vid == 4 || vid == 5) {
            texY += texH;
          }

          float d = float(uAtlasSize);
          vTexCoord = vec2(texX / d, texY / d); // tex coords must be between 0 and 1

          gl_Position = vec4(uPanZoomMatrix * aTransform * vec3(position, 1.0), 1.0);
        }
        else if(aVertType == `).concat(zn," || aVertType == ").concat(xa,` 
             || aVertType == `).concat(Ai," || aVertType == ").concat(Ea,`) { // simple shapes

          // the bounding box is needed by the fragment shader
          vBotLeft  = (aTransform * vec3(0, 0, 1)).xy; // flat
          vTopRight = (aTransform * vec3(1, 1, 1)).xy; // flat
          vPosition = (aTransform * vec3(position, 1)).xy; // will be interpolated

          // calculations are done in the fragment shader, just pass these along
          vColor = aColor;
          vCornerRadius = aCornerRadius;
          vBorderColor = aBorderColor;
          vBorderWidth = aLineWidth;

          gl_Position = vec4(uPanZoomMatrix * aTransform * vec3(position, 1.0), 1.0);
        }
        else if(aVertType == `).concat(um,`) {
          vec2 source = aPointAPointB.xy;
          vec2 target = aPointAPointB.zw;

          // adjust the geometry so that the line is centered on the edge
          position.y = position.y - 0.5;

          // stretch the unit square into a long skinny rectangle
          vec2 xBasis = target - source;
          vec2 yBasis = normalize(vec2(-xBasis.y, xBasis.x));
          vec2 point = source + xBasis * position.x + yBasis * aLineWidth[0] * position.y;

          gl_Position = vec4(uPanZoomMatrix * vec3(point, 1.0), 1.0);
          vColor = aColor;
        } 
        else if(aVertType == `).concat(lm,`) {
          vec2 pointA = aPointAPointB.xy;
          vec2 pointB = aPointAPointB.zw;
          vec2 pointC = aPointCPointD.xy;
          vec2 pointD = aPointCPointD.zw;

          // adjust the geometry so that the line is centered on the edge
          position.y = position.y - 0.5;

          vec2 p0, p1, p2, pos;
          if(position.x == 0.0) { // The left side of the unit square
            p0 = pointA;
            p1 = pointB;
            p2 = pointC;
            pos = position;
          } else { // The right side of the unit square, use same approach but flip the geometry upside down
            p0 = pointD;
            p1 = pointC;
            p2 = pointB;
            pos = vec2(0.0, -position.y);
          }

          vec2 p01 = p1 - p0;
          vec2 p12 = p2 - p1;
          vec2 p21 = p1 - p2;

          // Find the normal vector.
          vec2 tangent = normalize(normalize(p12) + normalize(p01));
          vec2 normal = vec2(-tangent.y, tangent.x);

          // Find the vector perpendicular to p0 -> p1.
          vec2 p01Norm = normalize(vec2(-p01.y, p01.x));

          // Determine the bend direction.
          float sigma = sign(dot(p01 + p21, normal));
          float width = aLineWidth[0];

          if(sign(pos.y) == -sigma) {
            // This is an intersecting vertex. Adjust the position so that there's no overlap.
            vec2 point = 0.5 * width * normal * -sigma / dot(normal, p01Norm);
            gl_Position = vec4(uPanZoomMatrix * vec3(p1 + point, 1.0), 1.0);
          } else {
            // This is a non-intersecting vertex. Treat it like a mitre join.
            vec2 point = 0.5 * width * normal * sigma * dot(normal, p01Norm);
            gl_Position = vec4(uPanZoomMatrix * vec3(p1 + point, 1.0), 1.0);
          }

          vColor = aColor;
        } 
        else if(aVertType == `).concat(ku,` && vid < 3) {
          // massage the first triangle into an edge arrow
          if(vid == 0)
            position = vec2(-0.15, -0.3);
          if(vid == 1)
            position = vec2(  0.0,  0.0);
          if(vid == 2)
            position = vec2( 0.15, -0.3);

          gl_Position = vec4(uPanZoomMatrix * aTransform * vec3(position, 1.0), 1.0);
          vColor = aColor;
        }
        else {
          gl_Position = vec4(2.0, 0.0, 0.0, 1.0); // discard vertex by putting it outside webgl clip space
        }

        vAtlasId = aAtlasId;
        vVertType = aVertType;
        vIndex = aIndex;
      }
    `),i=this.batchManager.getIndexArray(),s=`#version 300 es
      precision highp float;

      // declare texture unit for each texture atlas in the batch
      `.concat(i.map(function(l){return"uniform sampler2D uTexture".concat(l,";")}).join(`
	`),`

      uniform vec4 uBGColor;
      uniform float uZoom;

      in vec2 vTexCoord;
      in vec4 vColor;
      in vec2 vPosition; // model coordinates

      flat in int vAtlasId;
      flat in vec4 vIndex;
      flat in int vVertType;
      flat in vec2 vTopRight;
      flat in vec2 vBotLeft;
      flat in vec4 vCornerRadius;
      flat in vec4 vBorderColor;
      flat in vec2 vBorderWidth;

      out vec4 outColor;

      `).concat(PO,`
      `).concat(kO,`
      `).concat(NO,`
      `).concat(BO,`

      vec4 blend(vec4 top, vec4 bot) { // blend colors with premultiplied alpha
        return vec4( 
          top.rgb + (bot.rgb * (1.0 - top.a)),
          top.a   + (bot.a   * (1.0 - top.a)) 
        );
      }

      vec4 distInterp(vec4 cA, vec4 cB, float d) { // interpolate color using Signed Distance
        // scale to the zoom level so that borders don't look blurry when zoomed in
        // note 1.5 is an aribitrary value chosen because it looks good
        return mix(cA, cB, 1.0 - smoothstep(0.0, 1.5 / uZoom, abs(d))); 
      }

      void main(void) {
        if(vVertType == `).concat(Pu,`) {
          // look up the texel from the texture unit
          `).concat(i.map(function(l){return"if(vAtlasId == ".concat(l,") outColor = texture(uTexture").concat(l,", vTexCoord);")}).join(`
	else `),`
        } 
        else if(vVertType == `).concat(ku,`) {
          // mimics how canvas renderer uses context.globalCompositeOperation = 'destination-out';
          outColor = blend(vColor, uBGColor);
          outColor.a = 1.0; // make opaque, masks out line under arrow
        }
        else if(vVertType == `).concat(zn,` && vBorderWidth == vec2(0.0)) { // simple rectangle with no border
          outColor = vColor; // unit square is already transformed to the rectangle, nothing else needs to be done
        }
        else if(vVertType == `).concat(zn," || vVertType == ").concat(xa,` 
          || vVertType == `).concat(Ai," || vVertType == ").concat(Ea,`) { // use SDF

          float outerBorder = vBorderWidth[0];
          float innerBorder = vBorderWidth[1];
          float borderPadding = outerBorder * 2.0;
          float w = vTopRight.x - vBotLeft.x - borderPadding;
          float h = vTopRight.y - vBotLeft.y - borderPadding;
          vec2 b = vec2(w/2.0, h/2.0); // half width, half height
          vec2 p = vPosition - vec2(vTopRight.x - b[0] - outerBorder, vTopRight.y - b[1] - outerBorder); // translate to center

          float d; // signed distance
          if(vVertType == `).concat(zn,`) {
            d = rectangleSD(p, b);
          } else if(vVertType == `).concat(xa,` && w == h) {
            d = circleSD(p, b.x); // faster than ellipse
          } else if(vVertType == `).concat(xa,`) {
            d = ellipseSD(p, b);
          } else {
            d = roundRectangleSD(p, b, vCornerRadius.wzyx);
          }

          // use the distance to interpolate a color to smooth the edges of the shape, doesn't need multisampling
          // we must smooth colors inwards, because we can't change pixels outside the shape's bounding box
          if(d > 0.0) {
            if(d > outerBorder) {
              discard;
            } else {
              outColor = distInterp(vBorderColor, vec4(0), d - outerBorder);
            }
          } else {
            if(d > innerBorder) {
              vec4 outerColor = outerBorder == 0.0 ? vec4(0) : vBorderColor;
              vec4 innerBorderColor = blend(vBorderColor, vColor);
              outColor = distInterp(innerBorderColor, outerColor, d);
            } 
            else {
              vec4 outerColor;
              if(innerBorder == 0.0 && outerBorder == 0.0) {
                outerColor = vec4(0);
              } else if(innerBorder == 0.0) {
                outerColor = vBorderColor;
              } else {
                outerColor = blend(vBorderColor, vColor);
              }
              outColor = distInterp(vColor, outerColor, d - innerBorder);
            }
          }
        }
        else {
          outColor = vColor;
        }

        `).concat(r.picking?`if(outColor.a == 0.0) discard;
             else outColor = vIndex;`:"",`
      }
    `),o=gO(n,a,s);o.aPosition=n.getAttribLocation(o,"aPosition"),o.aIndex=n.getAttribLocation(o,"aIndex"),o.aVertType=n.getAttribLocation(o,"aVertType"),o.aTransform=n.getAttribLocation(o,"aTransform"),o.aAtlasId=n.getAttribLocation(o,"aAtlasId"),o.aTex=n.getAttribLocation(o,"aTex"),o.aPointAPointB=n.getAttribLocation(o,"aPointAPointB"),o.aPointCPointD=n.getAttribLocation(o,"aPointCPointD"),o.aLineWidth=n.getAttribLocation(o,"aLineWidth"),o.aColor=n.getAttribLocation(o,"aColor"),o.aCornerRadius=n.getAttribLocation(o,"aCornerRadius"),o.aBorderColor=n.getAttribLocation(o,"aBorderColor"),o.uPanZoomMatrix=n.getUniformLocation(o,"uPanZoomMatrix"),o.uAtlasSize=n.getUniformLocation(o,"uAtlasSize"),o.uBGColor=n.getUniformLocation(o,"uBGColor"),o.uZoom=n.getUniformLocation(o,"uZoom"),o.uTextures=[];for(var u=0;u<this.batchManager.getMaxAtlasesPerBatch();u++)o.uTextures.push(n.getUniformLocation(o,"uTexture".concat(u)));return o}},{key:"_createVAO",value:function(){var r=[0,0,1,0,1,1,0,0,1,1,0,1];this.vertexCount=r.length/2;var n=this.maxInstances,a=this.gl,i=this.program,s=a.createVertexArray();return a.bindVertexArray(s),CO(a,"vec2",i.aPosition,r),this.transformBuffer=SO(a,n,i.aTransform),this.indexBuffer=tr(a,n,"vec4",i.aIndex),this.vertTypeBuffer=tr(a,n,"int",i.aVertType),this.atlasIdBuffer=tr(a,n,"int",i.aAtlasId),this.texBuffer=tr(a,n,"vec4",i.aTex),this.pointAPointBBuffer=tr(a,n,"vec4",i.aPointAPointB),this.pointCPointDBuffer=tr(a,n,"vec4",i.aPointCPointD),this.lineWidthBuffer=tr(a,n,"vec2",i.aLineWidth),this.colorBuffer=tr(a,n,"vec4",i.aColor),this.cornerRadiusBuffer=tr(a,n,"vec4",i.aCornerRadius),this.borderColorBuffer=tr(a,n,"vec4",i.aBorderColor),a.bindVertexArray(null),s}},{key:"buffers",get:function(){var r=this;return this._buffers||(this._buffers=Object.keys(this).filter(function(n){return Or(n,"Buffer")}).map(function(n){return r[n]})),this._buffers}},{key:"startFrame",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ka.SCREEN;this.panZoomMatrix=r,this.renderTarget=n,this.batchDebugInfo=[],this.wrappedCount=0,this.simpleCount=0,this.startBatch()}},{key:"startBatch",value:function(){this.instanceCount=0,this.batchManager.startBatch()}},{key:"endFrame",value:function(){this.endBatch()}},{key:"_isVisible",value:function(r,n){return r.visible()?n&&n.isVisible?n.isVisible(r):!0:!1}},{key:"drawTexture",value:function(r,n,a){var i=this.atlasManager,s=this.batchManager,o=i.getRenderTypeOpts(a);if(this._isVisible(r,o)&&!(r.isEdge()&&!this._isValidEdge(r))){if(this.renderTarget.picking&&o.getTexPickingMode){var u=o.getTexPickingMode(r);if(u===rs.IGNORE)return;if(u==rs.USE_BB){this.drawPickingRectangle(r,n,a);return}}var l=i.getAtlasInfo(r,a),f=Pt(l),c;try{for(f.s();!(c=f.n()).done;){var h=c.value,d=h.atlas,v=h.tex1,g=h.tex2;s.canAddToCurrentBatch(d)||this.endBatch();for(var p=s.getAtlasIndexForBatch(d),y=0,m=[[v,!0],[g,!1]];y<m.length;y++){var b=at(m[y],2),E=b[0],T=b[1];if(E.w!=0){var I=this.instanceCount;this.vertTypeBuffer.getView(I)[0]=Pu;var w=this.indexBuffer.getView(I);Gn(n,w);var x=this.atlasIdBuffer.getView(I);x[0]=p;var C=this.texBuffer.getView(I);C[0]=E.x,C[1]=E.y,C[2]=E.w,C[3]=E.h;var S=this.transformBuffer.getMatrixView(I);this.setTransformMatrix(r,S,o,h,T),this.instanceCount++,T||this.wrappedCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}}}catch(A){f.e(A)}finally{f.f()}}}},{key:"setTransformMatrix",value:function(r,n,a,i){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,o=0;if(a.shapeProps&&a.shapeProps.padding&&(o=r.pstyle(a.shapeProps.padding).pfValue),i){var u=i.bb,l=i.tex1,f=i.tex2,c=l.w/(l.w+f.w);s||(c=1-c);var h=this._getAdjustedBB(u,o,s,c);this._applyTransformMatrix(n,h,a,r)}else{var d=a.getBoundingBox(r),v=this._getAdjustedBB(d,o,!0,1);this._applyTransformMatrix(n,v,a,r)}}},{key:"_applyTransformMatrix",value:function(r,n,a,i){var s,o;sm(r);var u=a.getRotation?a.getRotation(i):0;if(u!==0){var l=a.getRotationPoint(i),f=l.x,c=l.y;qi(r,r,[f,c]),om(r,r,u);var h=a.getRotationOffset(i);s=h.x+(n.xOffset||0),o=h.y+(n.yOffset||0)}else s=n.x1,o=n.y1;qi(r,r,[s,o]),av(r,r,[n.w,n.h])}},{key:"_getAdjustedBB",value:function(r,n,a,i){var s=r.x1,o=r.y1,u=r.w,l=r.h,f=r.yOffset;n&&(s-=n,o-=n,u+=2*n,l+=2*n);var c=0,h=u*i;return a&&i<1?u=h:!a&&i<1&&(c=u-h,s+=c,u=h),{x1:s,y1:o,w:u,h:l,xOffset:c,yOffset:f}}},{key:"drawPickingRectangle",value:function(r,n,a){var i=this.atlasManager.getRenderTypeOpts(a),s=this.instanceCount;this.vertTypeBuffer.getView(s)[0]=zn;var o=this.indexBuffer.getView(s);Gn(n,o);var u=this.colorBuffer.getView(s);on([0,0,0],1,u);var l=this.transformBuffer.getMatrixView(s);this.setTransformMatrix(r,l,i),this.simpleCount++,this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}},{key:"drawNode",value:function(r,n,a){var i=this.simpleShapeOptions.get(a);if(this._isVisible(r,i)){var s=i.shapeProps,o=this._getVertTypeForShape(r,s.shape);if(o===void 0||i.isSimple&&!i.isSimple(r)){this.drawTexture(r,n,a);return}var u=this.instanceCount;if(this.vertTypeBuffer.getView(u)[0]=o,o===Ai||o===Ea){var l=i.getBoundingBox(r),f=this._getCornerRadius(r,s.radius,l),c=this.cornerRadiusBuffer.getView(u);c[0]=f,c[1]=f,c[2]=f,c[3]=f,o===Ea&&(c[0]=0,c[2]=0)}var h=this.indexBuffer.getView(u);Gn(n,h);var d=r.pstyle(s.color).value,v=r.pstyle(s.opacity).value,g=this.colorBuffer.getView(u);on(d,v,g);var p=this.lineWidthBuffer.getView(u);if(p[0]=0,p[1]=0,s.border){var y=r.pstyle("border-width").value;if(y>0){var m=r.pstyle("border-color").value,b=r.pstyle("border-opacity").value,E=this.borderColorBuffer.getView(u);on(m,b,E);var T=r.pstyle("border-position").value;if(T==="inside")p[0]=0,p[1]=-y;else if(T==="outside")p[0]=y,p[1]=0;else{var I=y/2;p[0]=I,p[1]=-I}}}var w=this.transformBuffer.getMatrixView(u);this.setTransformMatrix(r,w,i),this.simpleCount++,this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}},{key:"_getVertTypeForShape",value:function(r,n){var a=r.pstyle(n).value;switch(a){case"rectangle":return zn;case"ellipse":return xa;case"roundrectangle":case"round-rectangle":return Ai;case"bottom-round-rectangle":return Ea;default:return}}},{key:"_getCornerRadius",value:function(r,n,a){var i=a.w,s=a.h;if(r.pstyle(n).value==="auto")return Wr(i,s);var o=r.pstyle(n).pfValue,u=i/2,l=s/2;return Math.min(o,l,u)}},{key:"drawEdgeArrow",value:function(r,n,a){if(r.visible()){var i=r._private.rscratch,s,o,u;if(a==="source"?(s=i.arrowStartX,o=i.arrowStartY,u=i.srcArrowAngle):(s=i.arrowEndX,o=i.arrowEndY,u=i.tgtArrowAngle),!(isNaN(s)||s==null||isNaN(o)||o==null||isNaN(u)||u==null)){var l=r.pstyle(a+"-arrow-shape").value;if(l!=="none"){var f=r.pstyle(a+"-arrow-color").value,c=r.pstyle("opacity").value,h=r.pstyle("line-opacity").value,d=c*h,v=r.pstyle("width").pfValue,g=r.pstyle("arrow-scale").value,p=this.r.getArrowWidth(v,g),y=this.instanceCount,m=this.transformBuffer.getMatrixView(y);sm(m),qi(m,m,[s,o]),av(m,m,[p,p]),om(m,m,u),this.vertTypeBuffer.getView(y)[0]=ku;var b=this.indexBuffer.getView(y);Gn(n,b);var E=this.colorBuffer.getView(y);on(f,d,E),this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}}}},{key:"drawEdgeLine",value:function(r,n){if(r.visible()){var a=this._getEdgePoints(r);if(a){var i=r.pstyle("opacity").value,s=r.pstyle("line-opacity").value,o=r.pstyle("width").pfValue,u=r.pstyle("line-color").value,l=i*s;if(a.length/2+this.instanceCount>this.maxInstances&&this.endBatch(),a.length==4){var f=this.instanceCount;this.vertTypeBuffer.getView(f)[0]=um;var c=this.indexBuffer.getView(f);Gn(n,c);var h=this.colorBuffer.getView(f);on(u,l,h);var d=this.lineWidthBuffer.getView(f);d[0]=o;var v=this.pointAPointBBuffer.getView(f);v[0]=a[0],v[1]=a[1],v[2]=a[2],v[3]=a[3],this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}else for(var g=0;g<a.length-2;g+=2){var p=this.instanceCount;this.vertTypeBuffer.getView(p)[0]=lm;var y=this.indexBuffer.getView(p);Gn(n,y);var m=this.colorBuffer.getView(p);on(u,l,m);var b=this.lineWidthBuffer.getView(p);b[0]=o;var E=a[g-2],T=a[g-1],I=a[g],w=a[g+1],x=a[g+2],C=a[g+3],S=a[g+4],A=a[g+5];g==0&&(E=2*I-x+.001,T=2*w-C+.001),g==a.length-4&&(S=2*x-I+.001,A=2*C-w+.001);var R=this.pointAPointBBuffer.getView(p);R[0]=E,R[1]=T,R[2]=I,R[3]=w;var D=this.pointCPointDBuffer.getView(p);D[0]=x,D[1]=C,D[2]=S,D[3]=A,this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}}}},{key:"_isValidEdge",value:function(r){var n=r._private.rscratch;return!(n.badLine||n.allpts==null||isNaN(n.allpts[0]))}},{key:"_getEdgePoints",value:function(r){var n=r._private.rscratch;if(this._isValidEdge(r)){var a=n.allpts;if(a.length==4)return a;var i=this._getNumSegments(r);return this._getCurveSegmentPoints(a,i)}}},{key:"_getNumSegments",value:function(r){var n=15;return Math.min(Math.max(n,5),this.maxInstances)}},{key:"_getCurveSegmentPoints",value:function(r,n){if(r.length==4)return r;for(var a=Array((n+1)*2),i=0;i<=n;i++)if(i==0)a[0]=r[0],a[1]=r[1];else if(i==n)a[i*2]=r[r.length-2],a[i*2+1]=r[r.length-1];else{var s=i/n;this._setCurvePoint(r,s,a,i*2)}return a}},{key:"_setCurvePoint",value:function(r,n,a,i){if(r.length<=2)a[i]=r[0],a[i+1]=r[1];else{for(var s=Array(r.length-2),o=0;o<s.length;o+=2){var u=(1-n)*r[o]+n*r[o+2],l=(1-n)*r[o+1]+n*r[o+3];s[o]=u,s[o+1]=l}return this._setCurvePoint(s,n,a,i)}}},{key:"endBatch",value:function(){var r=this.gl,n=this.vao,a=this.vertexCount,i=this.instanceCount;if(i!==0){var s=this.renderTarget.picking?this.pickingProgram:this.program;r.useProgram(s),r.bindVertexArray(n);var o=Pt(this.buffers),u;try{for(o.s();!(u=o.n()).done;){var l=u.value;l.bufferSubData(i)}}catch(v){o.e(v)}finally{o.f()}for(var f=this.batchManager.getAtlases(),c=0;c<f.length;c++)f[c].bufferIfNeeded(r);for(var h=0;h<f.length;h++)r.activeTexture(r.TEXTURE0+h),r.bindTexture(r.TEXTURE_2D,f[h].texture),r.uniform1i(s.uTextures[h],h);r.uniform1f(s.uZoom,yO(this.r)),r.uniformMatrix3fv(s.uPanZoomMatrix,!1,this.panZoomMatrix),r.uniform1i(s.uAtlasSize,this.batchManager.getAtlasSize());var d=on(this.bgColor,1);r.uniform4fv(s.uBGColor,d),r.drawArraysInstanced(r.TRIANGLES,0,a,i),r.bindVertexArray(null),r.bindTexture(r.TEXTURE_2D,null),this.debug&&this.batchDebugInfo.push({count:i,atlasCount:f.length}),this.startBatch()}}},{key:"getDebugInfo",value:function(){var r=this.atlasManager.getDebugInfo(),n=r.reduce(function(s,o){return s+o.atlasCount},0),a=this.batchDebugInfo,i=a.reduce(function(s,o){return s+o.count},0);return{atlasInfo:r,totalAtlases:n,wrappedCount:this.wrappedCount,simpleCount:this.simpleCount,batchCount:a.length,batchInfo:a,totalInstances:i}}}])}(),kT={};kT.initWebgl=function(t,e){var r=this,n=r.data.contexts[r.WEBGL];t.bgColor=qO(r),t.webglTexSize=Math.min(t.webglTexSize,n.getParameter(n.MAX_TEXTURE_SIZE)),t.webglTexRows=Math.min(t.webglTexRows,54),t.webglTexRowsNodes=Math.min(t.webglTexRowsNodes,54),t.webglBatchSize=Math.min(t.webglBatchSize,16384),t.webglTexPerBatch=Math.min(t.webglTexPerBatch,n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS)),r.webglDebug=t.webglDebug,r.webglDebugShowAtlases=t.webglDebugShowAtlases,r.pickingFrameBuffer=AO(n),r.pickingFrameBuffer.needsDraw=!0,r.drawing=new FO(r,n,t);var a=function(c){return function(h){return r.getTextAngle(h,c)}},i=function(c){return function(h){var d=h.pstyle(c);return d&&d.value}},s=function(c){return function(h){return h.pstyle("".concat(c,"-opacity")).value>0}},o=function(c){var h=c.pstyle("text-events").strValue==="yes";return h?rs.USE_BB:rs.IGNORE},u=function(c){var h=c.position(),d=h.x,v=h.y,g=c.outerWidth(),p=c.outerHeight();return{w:g,h:p,x1:d-g/2,y1:v-p/2}};r.drawing.addAtlasCollection("node",{texRows:t.webglTexRowsNodes}),r.drawing.addAtlasCollection("label",{texRows:t.webglTexRows}),r.drawing.addTextureAtlasRenderType("node-body",{collection:"node",getKey:e.getStyleKey,getBoundingBox:e.getElementBox,drawElement:e.drawElement}),r.drawing.addSimpleShapeRenderType("node-body",{getBoundingBox:u,isSimple:bO,shapeProps:{shape:"shape",color:"background-color",opacity:"background-opacity",radius:"corner-radius",border:!0}}),r.drawing.addSimpleShapeRenderType("node-overlay",{getBoundingBox:u,isVisible:s("overlay"),shapeProps:{shape:"overlay-shape",color:"overlay-color",opacity:"overlay-opacity",padding:"overlay-padding",radius:"overlay-corner-radius"}}),r.drawing.addSimpleShapeRenderType("node-underlay",{getBoundingBox:u,isVisible:s("underlay"),shapeProps:{shape:"underlay-shape",color:"underlay-color",opacity:"underlay-opacity",padding:"underlay-padding",radius:"underlay-corner-radius"}}),r.drawing.addTextureAtlasRenderType("label",{collection:"label",getTexPickingMode:o,getKey:Nu(e.getLabelKey,null),getBoundingBox:Bu(e.getLabelBox,null),drawClipped:!0,drawElement:e.drawLabel,getRotation:a(null),getRotationPoint:e.getLabelRotationPoint,getRotationOffset:e.getLabelRotationOffset,isVisible:i("label")}),r.drawing.addTextureAtlasRenderType("edge-source-label",{collection:"label",getTexPickingMode:o,getKey:Nu(e.getSourceLabelKey,"source"),getBoundingBox:Bu(e.getSourceLabelBox,"source"),drawClipped:!0,drawElement:e.drawSourceLabel,getRotation:a("source"),getRotationPoint:e.getSourceLabelRotationPoint,getRotationOffset:e.getSourceLabelRotationOffset,isVisible:i("source-label")}),r.drawing.addTextureAtlasRenderType("edge-target-label",{collection:"label",getTexPickingMode:o,getKey:Nu(e.getTargetLabelKey,"target"),getBoundingBox:Bu(e.getTargetLabelBox,"target"),drawClipped:!0,drawElement:e.drawTargetLabel,getRotation:a("target"),getRotationPoint:e.getTargetLabelRotationPoint,getRotationOffset:e.getTargetLabelRotationOffset,isVisible:i("target-label")});var l=ei(function(){console.log("garbage collect flag set"),r.data.gc=!0},1e4);r.onUpdateEleCalcs(function(f,c){var h=!1;c&&c.length>0&&(h|=r.drawing.invalidate(c)),h&&l()}),GO(r)};function qO(t){var e=t.cy.container(),r=e&&e.style&&e.style.backgroundColor||"white";return lx(r)}function NT(t,e){var r=t._private.rscratch;return Mt(r,"labelWrapCachedLines",e)||[]}var Nu=function(e,r){return function(n){var a=e(n),i=NT(n,r);return i.length>1?i.map(function(s,o){return"".concat(a,"_").concat(o)}):a}},Bu=function(e,r){return function(n,a){var i=e(n);if(typeof a=="string"){var s=a.indexOf("_");if(s>0){var o=Number(a.substring(s+1)),u=NT(n,r),l=i.h/u.length,f=l*o,c=i.y1+f;return{x1:i.x1,w:i.w,y1:c,h:l,yOffset:f}}}return i}};function GO(t){{var e=t.render;t.render=function(i){i=i||{};var s=t.cy;t.webgl&&(s.zoom()>RT?(zO(t),e.call(t,i)):($O(t),FT(t,i,ka.SCREEN)))}}{var r=t.matchCanvasSize;t.matchCanvasSize=function(i){r.call(t,i),t.pickingFrameBuffer.setFramebufferAttachmentSizes(t.canvasWidth,t.canvasHeight),t.pickingFrameBuffer.needsDraw=!0}}t.findNearestElements=function(i,s,o,u){return XO(t,i,s)};{var n=t.invalidateCachedZSortedEles;t.invalidateCachedZSortedEles=function(){n.call(t),t.pickingFrameBuffer.needsDraw=!0}}{var a=t.notify;t.notify=function(i,s){a.call(t,i,s),i==="viewport"||i==="bounds"?t.pickingFrameBuffer.needsDraw=!0:i==="background"&&t.drawing.invalidate(s,{type:"node-body"})}}}function zO(t){var e=t.data.contexts[t.WEBGL];e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT)}function $O(t){var e=function(n){n.save(),n.setTransform(1,0,0,1,0,0),n.clearRect(0,0,t.canvasWidth,t.canvasHeight),n.restore()};e(t.data.contexts[t.NODE]),e(t.data.contexts[t.DRAG])}function VO(t){var e=t.canvasWidth,r=t.canvasHeight,n=Yv(t),a=n.pan,i=n.zoom,s=Ou();qi(s,s,[a.x,a.y]),av(s,s,[i,i]);var o=Ou();RO(o,e,r);var u=Ou();return IO(u,o,s),u}function BT(t,e){var r=t.canvasWidth,n=t.canvasHeight,a=Yv(t),i=a.pan,s=a.zoom;e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,r,n),e.translate(i.x,i.y),e.scale(s,s)}function UO(t,e){t.drawSelectionRectangle(e,function(r){return BT(t,r)})}function HO(t){var e=t.data.contexts[t.NODE];e.save(),BT(t,e),e.strokeStyle="rgba(0, 0, 0, 0.3)",e.beginPath(),e.moveTo(-1e3,0),e.lineTo(1e3,0),e.stroke(),e.beginPath(),e.moveTo(0,-1e3),e.lineTo(0,1e3),e.stroke(),e.restore()}function YO(t){var e=function(a,i,s){for(var o=a.atlasManager.getAtlasCollection(i),u=t.data.contexts[t.NODE],l=o.atlases,f=0;f<l.length;f++){var c=l[f],h=c.canvas;if(h){var d=h.width,v=h.height,g=d*f,p=h.height*s,y=.4;u.save(),u.scale(y,y),u.drawImage(h,g,p),u.strokeStyle="black",u.rect(g,p,d,v),u.stroke(),u.restore()}}},r=0;e(t.drawing,"node",r++),e(t.drawing,"label",r++)}function WO(t,e,r,n,a){var i,s,o,u,l=Yv(t),f=l.pan,c=l.zoom;{var h=mO(t,f,c,e,r),d=at(h,2),v=d[0],g=d[1],p=6;i=v-p/2,s=g-p/2,o=p,u=p}if(o===0||u===0)return[];var y=t.data.contexts[t.WEBGL];y.bindFramebuffer(y.FRAMEBUFFER,t.pickingFrameBuffer),t.pickingFrameBuffer.needsDraw&&(y.viewport(0,0,y.canvas.width,y.canvas.height),FT(t,null,ka.PICKING),t.pickingFrameBuffer.needsDraw=!1);var m=o*u,b=new Uint8Array(m*4);y.readPixels(i,s,o,u,y.RGBA,y.UNSIGNED_BYTE,b),y.bindFramebuffer(y.FRAMEBUFFER,null);for(var E=new Set,T=0;T<m;T++){var I=b.slice(T*4,T*4+4),w=EO(I)-1;w>=0&&E.add(w)}return E}function XO(t,e,r){var n=WO(t,e,r),a=t.getCachedZSortedEles(),i,s,o=Pt(n),u;try{for(o.s();!(u=o.n()).done;){var l=u.value,f=a[l];if(!i&&f.isNode()&&(i=f),!s&&f.isEdge()&&(s=f),i&&s)break}}catch(c){o.e(c)}finally{o.f()}return[i,s].filter(Boolean)}function Fu(t,e,r){var n=t.drawing;e+=1,r.isNode()?(n.drawNode(r,e,"node-underlay"),n.drawNode(r,e,"node-body"),n.drawTexture(r,e,"label"),n.drawNode(r,e,"node-overlay")):(n.drawEdgeLine(r,e),n.drawEdgeArrow(r,e,"source"),n.drawEdgeArrow(r,e,"target"),n.drawTexture(r,e,"label"),n.drawTexture(r,e,"edge-source-label"),n.drawTexture(r,e,"edge-target-label"))}function FT(t,e,r){var n;t.webglDebug&&(n=performance.now());var a=t.drawing,i=0;if(r.screen&&t.data.canvasNeedsRedraw[t.SELECT_BOX]&&UO(t,e),t.data.canvasNeedsRedraw[t.NODE]||r.picking){var s=t.data.contexts[t.WEBGL];r.screen?(s.clearColor(0,0,0,0),s.enable(s.BLEND),s.blendFunc(s.ONE,s.ONE_MINUS_SRC_ALPHA)):s.disable(s.BLEND),s.clear(s.COLOR_BUFFER_BIT|s.DEPTH_BUFFER_BIT),s.viewport(0,0,s.canvas.width,s.canvas.height);var o=VO(t),u=t.getCachedZSortedEles();if(i=u.length,a.startFrame(o,r),r.screen){for(var l=0;l<u.nondrag.length;l++)Fu(t,l,u.nondrag[l]);for(var f=0;f<u.drag.length;f++)Fu(t,f,u.drag[f])}else if(r.picking)for(var c=0;c<u.length;c++)Fu(t,c,u[c]);a.endFrame(),r.screen&&t.webglDebugShowAtlases&&(HO(t),YO(t)),t.data.canvasNeedsRedraw[t.NODE]=!1,t.data.canvasNeedsRedraw[t.DRAG]=!1}if(t.webglDebug){var h=performance.now(),d=!1,v=Math.ceil(h-n),g=a.getDebugInfo(),p=["".concat(i," elements"),"".concat(g.totalInstances," instances"),"".concat(g.batchCount," batches"),"".concat(g.totalAtlases," atlases"),"".concat(g.wrappedCount," wrapped textures"),"".concat(g.simpleCount," simple shapes")].join(", ");if(d)console.log("WebGL (".concat(r.name,") - time ").concat(v,"ms, ").concat(p));else{console.log("WebGL (".concat(r.name,") - frame time ").concat(v,"ms")),console.log("Totals:"),console.log("  ".concat(p)),console.log("Texture Atlases Used:");var y=g.atlasInfo,m=Pt(y),b;try{for(m.s();!(b=m.n()).done;){var E=b.value;console.log("  ".concat(E.type,": ").concat(E.keyCount," keys, ").concat(E.atlasCount," atlases"))}}catch(T){m.e(T)}finally{m.f()}console.log("")}}t.data.gc&&(console.log("Garbage Collect!"),t.data.gc=!1,a.gc())}var rn={};rn.drawPolygonPath=function(t,e,r,n,a,i){var s=n/2,o=a/2;t.beginPath&&t.beginPath(),t.moveTo(e+s*i[0],r+o*i[1]);for(var u=1;u<i.length/2;u++)t.lineTo(e+s*i[u*2],r+o*i[u*2+1]);t.closePath()};rn.drawRoundPolygonPath=function(t,e,r,n,a,i,s){s.forEach(function(o){return bT(t,o)}),t.closePath()};rn.drawRoundRectanglePath=function(t,e,r,n,a,i){var s=n/2,o=a/2,u=i==="auto"?Wr(n,a):Math.min(i,o,s);t.beginPath&&t.beginPath(),t.moveTo(e,r-o),t.arcTo(e+s,r-o,e+s,r,u),t.arcTo(e+s,r+o,e,r+o,u),t.arcTo(e-s,r+o,e-s,r,u),t.arcTo(e-s,r-o,e,r-o,u),t.lineTo(e,r-o),t.closePath()};rn.drawBottomRoundRectanglePath=function(t,e,r,n,a,i){var s=n/2,o=a/2,u=i==="auto"?Wr(n,a):i;t.beginPath&&t.beginPath(),t.moveTo(e,r-o),t.lineTo(e+s,r-o),t.lineTo(e+s,r),t.arcTo(e+s,r+o,e,r+o,u),t.arcTo(e-s,r+o,e-s,r,u),t.lineTo(e-s,r-o),t.lineTo(e,r-o),t.closePath()};rn.drawCutRectanglePath=function(t,e,r,n,a,i,s){var o=n/2,u=a/2,l=s==="auto"?Mv():s;t.beginPath&&t.beginPath(),t.moveTo(e-o+l,r-u),t.lineTo(e+o-l,r-u),t.lineTo(e+o,r-u+l),t.lineTo(e+o,r+u-l),t.lineTo(e+o-l,r+u),t.lineTo(e-o+l,r+u),t.lineTo(e-o,r+u-l),t.lineTo(e-o,r-u+l),t.closePath()};rn.drawBarrelPath=function(t,e,r,n,a){var i=n/2,s=a/2,o=e-i,u=e+i,l=r-s,f=r+s,c=Ud(n,a),h=c.widthOffset,d=c.heightOffset,v=c.ctrlPtOffsetPct*h;t.beginPath&&t.beginPath(),t.moveTo(o,l+d),t.lineTo(o,f-d),t.quadraticCurveTo(o+v,f,o+h,f),t.lineTo(u-h,f),t.quadraticCurveTo(u-v,f,u,f-d),t.lineTo(u,l+d),t.quadraticCurveTo(u-v,l,u-h,l),t.lineTo(o+h,l),t.quadraticCurveTo(o+v,l,o,l+d),t.closePath()};var fm=Math.sin(0),cm=Math.cos(0),iv={},sv={},qT=Math.PI/40;for(var $n=0*Math.PI;$n<2*Math.PI;$n+=qT)iv[$n]=Math.sin($n),sv[$n]=Math.cos($n);rn.drawEllipsePath=function(t,e,r,n,a){if(t.beginPath&&t.beginPath(),t.ellipse)t.ellipse(e,r,n/2,a/2,0,0,2*Math.PI);else for(var i,s,o=n/2,u=a/2,l=0*Math.PI;l<2*Math.PI;l+=qT)i=e-o*iv[l]*fm+o*sv[l]*cm,s=r+u*sv[l]*fm+u*iv[l]*cm,l===0?t.moveTo(i,s):t.lineTo(i,s);t.closePath()};var si={};si.createBuffer=function(t,e){var r=document.createElement("canvas");return r.width=t,r.height=e,[r,r.getContext("2d")]};si.bufferCanvasImage=function(t){var e=this.cy,r=e.mutableElements(),n=r.boundingBox(),a=this.findContainerClientCoords(),i=t.full?Math.ceil(n.w):a[2],s=t.full?Math.ceil(n.h):a[3],o=ae(t.maxWidth)||ae(t.maxHeight),u=this.getPixelRatio(),l=1;if(t.scale!==void 0)i*=t.scale,s*=t.scale,l=t.scale;else if(o){var f=1/0,c=1/0;ae(t.maxWidth)&&(f=l*t.maxWidth/i),ae(t.maxHeight)&&(c=l*t.maxHeight/s),l=Math.min(f,c),i*=l,s*=l}o||(i*=u,s*=u,l*=u);var h=document.createElement("canvas");h.width=i,h.height=s,h.style.width=i+"px",h.style.height=s+"px";var d=h.getContext("2d");if(i>0&&s>0){d.clearRect(0,0,i,s),d.globalCompositeOperation="source-over";var v=this.getCachedZSortedEles();if(t.full)d.translate(-n.x1*l,-n.y1*l),d.scale(l,l),this.drawElements(d,v),d.scale(1/l,1/l),d.translate(n.x1*l,n.y1*l);else{var g=e.pan(),p={x:g.x*l,y:g.y*l};l*=e.zoom(),d.translate(p.x,p.y),d.scale(l,l),this.drawElements(d,v),d.scale(1/l,1/l),d.translate(-p.x,-p.y)}t.bg&&(d.globalCompositeOperation="destination-over",d.fillStyle=t.bg,d.rect(0,0,i,s),d.fill())}return h};function KO(t,e){for(var r=atob(t),n=new ArrayBuffer(r.length),a=new Uint8Array(n),i=0;i<r.length;i++)a[i]=r.charCodeAt(i);return new Blob([n],{type:e})}function hm(t){var e=t.indexOf(",");return t.substr(e+1)}function GT(t,e,r){var n=function(){return e.toDataURL(r,t.quality)};switch(t.output){case"blob-promise":return new na(function(a,i){try{e.toBlob(function(s){s!=null?a(s):i(new Error("`canvas.toBlob()` sent a null value in its callback"))},r,t.quality)}catch(s){i(s)}});case"blob":return KO(hm(n()),r);case"base64":return hm(n());case"base64uri":default:return n()}}si.png=function(t){return GT(t,this.bufferCanvasImage(t),"image/png")};si.jpg=function(t){return GT(t,this.bufferCanvasImage(t),"image/jpeg")};var zT={};zT.nodeShapeImpl=function(t,e,r,n,a,i,s,o){switch(t){case"ellipse":return this.drawEllipsePath(e,r,n,a,i);case"polygon":return this.drawPolygonPath(e,r,n,a,i,s);case"round-polygon":return this.drawRoundPolygonPath(e,r,n,a,i,s,o);case"roundrectangle":case"round-rectangle":return this.drawRoundRectanglePath(e,r,n,a,i,o);case"cutrectangle":case"cut-rectangle":return this.drawCutRectanglePath(e,r,n,a,i,s,o);case"bottomroundrectangle":case"bottom-round-rectangle":return this.drawBottomRoundRectanglePath(e,r,n,a,i,o);case"barrel":return this.drawBarrelPath(e,r,n,a,i)}};var jO=$T,Re=$T.prototype;Re.CANVAS_LAYERS=3;Re.SELECT_BOX=0;Re.DRAG=1;Re.NODE=2;Re.WEBGL=3;Re.CANVAS_TYPES=["2d","2d","2d","webgl2"];Re.BUFFER_COUNT=3;Re.TEXTURE_BUFFER=0;Re.MOTIONBLUR_BUFFER_NODE=1;Re.MOTIONBLUR_BUFFER_DRAG=2;function $T(t){var e=this,r=e.cy.window(),n=r.document;t.webgl&&(Re.CANVAS_LAYERS=e.CANVAS_LAYERS=4,console.log("webgl rendering enabled")),e.data={canvases:new Array(Re.CANVAS_LAYERS),contexts:new Array(Re.CANVAS_LAYERS),canvasNeedsRedraw:new Array(Re.CANVAS_LAYERS),bufferCanvases:new Array(Re.BUFFER_COUNT),bufferContexts:new Array(Re.CANVAS_LAYERS)};var a="-webkit-tap-highlight-color",i="rgba(0,0,0,0)";e.data.canvasContainer=n.createElement("div");var s=e.data.canvasContainer.style;e.data.canvasContainer.style[a]=i,s.position="relative",s.zIndex="0",s.overflow="hidden";var o=t.cy.container();o.appendChild(e.data.canvasContainer),o.style[a]=i;var u={"-webkit-user-select":"none","-moz-user-select":"-moz-none","user-select":"none","-webkit-tap-highlight-color":"rgba(0,0,0,0)","outline-style":"none"};UR()&&(u["-ms-touch-action"]="none",u["touch-action"]="none");for(var l=0;l<Re.CANVAS_LAYERS;l++){var f=e.data.canvases[l]=n.createElement("canvas"),c=Re.CANVAS_TYPES[l];e.data.contexts[l]=f.getContext(c),e.data.contexts[l]||je("Could not create canvas of type "+c),Object.keys(u).forEach(function(J){f.style[J]=u[J]}),f.style.position="absolute",f.setAttribute("data-id","layer"+l),f.style.zIndex=String(Re.CANVAS_LAYERS-l),e.data.canvasContainer.appendChild(f),e.data.canvasNeedsRedraw[l]=!1}e.data.topCanvas=e.data.canvases[0],e.data.canvases[Re.NODE].setAttribute("data-id","layer"+Re.NODE+"-node"),e.data.canvases[Re.SELECT_BOX].setAttribute("data-id","layer"+Re.SELECT_BOX+"-selectbox"),e.data.canvases[Re.DRAG].setAttribute("data-id","layer"+Re.DRAG+"-drag"),e.data.canvases[Re.WEBGL]&&e.data.canvases[Re.WEBGL].setAttribute("data-id","layer"+Re.WEBGL+"-webgl");for(var l=0;l<Re.BUFFER_COUNT;l++)e.data.bufferCanvases[l]=n.createElement("canvas"),e.data.bufferContexts[l]=e.data.bufferCanvases[l].getContext("2d"),e.data.bufferCanvases[l].style.position="absolute",e.data.bufferCanvases[l].setAttribute("data-id","buffer"+l),e.data.bufferCanvases[l].style.zIndex=String(-l-1),e.data.bufferCanvases[l].style.visibility="hidden";e.pathsEnabled=!0;var h=Rt(),d=function(G){return{x:(G.x1+G.x2)/2,y:(G.y1+G.y2)/2}},v=function(G){return{x:-G.w/2,y:-G.h/2}},g=function(G){var $=G[0]._private,U=$.oldBackgroundTimestamp===$.backgroundTimestamp;return!U},p=function(G){return G[0]._private.nodeKey},y=function(G){return G[0]._private.labelStyleKey},m=function(G){return G[0]._private.sourceLabelStyleKey},b=function(G){return G[0]._private.targetLabelStyleKey},E=function(G,$,U,j,ne){return e.drawElement(G,$,U,!1,!1,ne)},T=function(G,$,U,j,ne){return e.drawElementText(G,$,U,j,"main",ne)},I=function(G,$,U,j,ne){return e.drawElementText(G,$,U,j,"source",ne)},w=function(G,$,U,j,ne){return e.drawElementText(G,$,U,j,"target",ne)},x=function(G){return G.boundingBox(),G[0]._private.bodyBounds},C=function(G){return G.boundingBox(),G[0]._private.labelBounds.main||h},S=function(G){return G.boundingBox(),G[0]._private.labelBounds.source||h},A=function(G){return G.boundingBox(),G[0]._private.labelBounds.target||h},R=function(G,$){return $},D=function(G){return d(x(G))},_=function(G,$,U){var j=G?G+"-":"";return{x:$.x+U.pstyle(j+"text-margin-x").pfValue,y:$.y+U.pstyle(j+"text-margin-y").pfValue}},M=function(G,$,U){var j=G[0]._private.rscratch;return{x:j[$],y:j[U]}},k=function(G){return _("",M(G,"labelX","labelY"),G)},O=function(G){return _("source",M(G,"sourceLabelX","sourceLabelY"),G)},P=function(G){return _("target",M(G,"targetLabelX","targetLabelY"),G)},B=function(G){return v(x(G))},F=function(G){return v(S(G))},N=function(G){return v(A(G))},q=function(G){var $=C(G),U=v(C(G));if(G.isNode()){switch(G.pstyle("text-halign").value){case"left":U.x=-$.w-($.leftPad||0);break;case"right":U.x=-($.rightPad||0);break}switch(G.pstyle("text-valign").value){case"top":U.y=-$.h-($.topPad||0);break;case"bottom":U.y=-($.botPad||0);break}}return U},V=e.data.eleTxrCache=new Sa(e,{getKey:p,doesEleInvalidateKey:g,drawElement:E,getBoundingBox:x,getRotationPoint:D,getRotationOffset:B,allowEdgeTxrCaching:!1,allowParentTxrCaching:!1}),Y=e.data.lblTxrCache=new Sa(e,{getKey:y,drawElement:T,getBoundingBox:C,getRotationPoint:k,getRotationOffset:q,isVisible:R}),H=e.data.slbTxrCache=new Sa(e,{getKey:m,drawElement:I,getBoundingBox:S,getRotationPoint:O,getRotationOffset:F,isVisible:R}),Z=e.data.tlbTxrCache=new Sa(e,{getKey:b,drawElement:w,getBoundingBox:A,getRotationPoint:P,getRotationOffset:N,isVisible:R}),ee=e.data.lyrTxrCache=new DT(e);e.onUpdateEleCalcs(function(G,$){V.invalidateElements($),Y.invalidateElements($),H.invalidateElements($),Z.invalidateElements($),ee.invalidateElements($);for(var U=0;U<$.length;U++){var j=$[U]._private;j.oldBackgroundTimestamp=j.backgroundTimestamp}});var ie=function(G){for(var $=0;$<G.length;$++)ee.enqueueElementRefinement(G[$].ele)};V.onDequeue(ie),Y.onDequeue(ie),H.onDequeue(ie),Z.onDequeue(ie),t.webgl&&e.initWebgl(t,{getStyleKey:p,getLabelKey:y,getSourceLabelKey:m,getTargetLabelKey:b,drawElement:E,drawLabel:T,drawSourceLabel:I,drawTargetLabel:w,getElementBox:x,getLabelBox:C,getSourceLabelBox:S,getTargetLabelBox:A,getElementRotationPoint:D,getElementRotationOffset:B,getLabelRotationPoint:k,getSourceLabelRotationPoint:O,getTargetLabelRotationPoint:P,getLabelRotationOffset:q,getSourceLabelRotationOffset:F,getTargetLabelRotationOffset:N})}Re.redrawHint=function(t,e){var r=this;switch(t){case"eles":r.data.canvasNeedsRedraw[Re.NODE]=e;break;case"drag":r.data.canvasNeedsRedraw[Re.DRAG]=e;break;case"select":r.data.canvasNeedsRedraw[Re.SELECT_BOX]=e;break;case"gc":r.data.gc=!0;break}};var ZO=typeof Path2D<"u";Re.path2dEnabled=function(t){if(t===void 0)return this.pathsEnabled;this.pathsEnabled=!!t};Re.usePaths=function(){return ZO&&this.pathsEnabled};Re.setImgSmoothing=function(t,e){t.imageSmoothingEnabled!=null?t.imageSmoothingEnabled=e:(t.webkitImageSmoothingEnabled=e,t.mozImageSmoothingEnabled=e,t.msImageSmoothingEnabled=e)};Re.getImgSmoothing=function(t){return t.imageSmoothingEnabled!=null?t.imageSmoothingEnabled:t.webkitImageSmoothingEnabled||t.mozImageSmoothingEnabled||t.msImageSmoothingEnabled};Re.makeOffscreenCanvas=function(t,e){var r;if((typeof OffscreenCanvas>"u"?"undefined":ft(OffscreenCanvas))!=="undefined")r=new OffscreenCanvas(t,e);else{var n=this.cy.window(),a=n.document;r=a.createElement("canvas"),r.width=t,r.height=e}return r};[_T,or,Tr,Hv,Rn,tn,Dt,kT,rn,si,zT].forEach(function(t){xe(Re,t)});var QO=[{name:"null",impl:pT},{name:"base",impl:AT},{name:"canvas",impl:jO}],JO=[{type:"layout",extensions:C2},{type:"renderer",extensions:QO}],VT={},UT={};function HT(t,e,r){var n=r,a=function(x){Ve("Can not register `"+e+"` for `"+t+"` since `"+x+"` already exists in the prototype and can not be overridden")};if(t==="core"){if(Ya.prototype[e])return a(e);Ya.prototype[e]=r}else if(t==="collection"){if(mt.prototype[e])return a(e);mt.prototype[e]=r}else if(t==="layout"){for(var i=function(x){this.options=x,r.call(this,x),qe(this._private)||(this._private={}),this._private.cy=x.cy,this._private.listeners=[],this.createEmitter()},s=i.prototype=Object.create(r.prototype),o=[],u=0;u<o.length;u++){var l=o[u];s[l]=s[l]||function(){return this}}s.start&&!s.run?s.run=function(){return this.start(),this}:!s.start&&s.run&&(s.start=function(){return this.run(),this});var f=r.prototype.stop;s.stop=function(){var w=this.options;if(w&&w.animate){var x=this.animations;if(x)for(var C=0;C<x.length;C++)x[C].stop()}return f?f.call(this):this.emit("layoutstop"),this},s.destroy||(s.destroy=function(){return this}),s.cy=function(){return this._private.cy};var c=function(x){return x._private.cy},h={addEventFields:function(x,C){C.layout=x,C.cy=c(x),C.target=x},bubble:function(){return!0},parent:function(x){return c(x)}};xe(s,{createEmitter:function(){return this._private.emitter=new As(h,this),this},emitter:function(){return this._private.emitter},on:function(x,C){return this.emitter().on(x,C),this},one:function(x,C){return this.emitter().one(x,C),this},once:function(x,C){return this.emitter().one(x,C),this},removeListener:function(x,C){return this.emitter().removeListener(x,C),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},emit:function(x,C){return this.emitter().emit(x,C),this}}),$e.eventAliasesOn(s),n=i}else if(t==="renderer"&&e!=="null"&&e!=="base"){var d=YT("renderer","base"),v=d.prototype,g=r,p=r.prototype,y=function(){d.apply(this,arguments),g.apply(this,arguments)},m=y.prototype;for(var b in v){var E=v[b],T=p[b]!=null;if(T)return a(b);m[b]=E}for(var I in p)m[I]=p[I];v.clientFunctions.forEach(function(w){m[w]=m[w]||function(){je("Renderer does not implement `renderer."+w+"()` on its prototype")}}),n=y}else if(t==="__proto__"||t==="constructor"||t==="prototype")return je(t+" is an illegal type to be registered, possibly lead to prototype pollutions");return fx({map:VT,keys:[t,e],value:n})}function YT(t,e){return cx({map:VT,keys:[t,e]})}function eP(t,e,r,n,a){return fx({map:UT,keys:[t,e,r,n],value:a})}function tP(t,e,r,n){return cx({map:UT,keys:[t,e,r,n]})}var ov=function(){if(arguments.length===2)return YT.apply(null,arguments);if(arguments.length===3)return HT.apply(null,arguments);if(arguments.length===4)return tP.apply(null,arguments);if(arguments.length===5)return eP.apply(null,arguments);je("Invalid extension access syntax")};Ya.prototype.extension=ov;JO.forEach(function(t){t.extensions.forEach(function(e){HT(t.type,e.name,e.impl)})});var ns=function(){if(!(this instanceof ns))return new ns;this.length=0},Sn=ns.prototype;Sn.instanceString=function(){return"stylesheet"};Sn.selector=function(t){var e=this.length++;return this[e]={selector:t,properties:[]},this};Sn.css=function(t,e){var r=this.length-1;if(we(t))this[r].properties.push({name:t,value:e});else if(qe(t))for(var n=t,a=Object.keys(n),i=0;i<a.length;i++){var s=a[i],o=n[s];if(o!=null){var u=vt.properties[s]||vt.properties[ps(s)];if(u!=null){var l=u.name,f=o;this[r].properties.push({name:l,value:f})}}}return this};Sn.style=Sn.css;Sn.generateStyle=function(t){var e=new vt(t);return this.appendToStyle(e)};Sn.appendToStyle=function(t){for(var e=0;e<this.length;e++){var r=this[e],n=r.selector,a=r.properties;t.selector(n);for(var i=0;i<a.length;i++){var s=a[i];t.css(s.name,s.value)}}return t};var rP="3.33.1",wr=function(e){if(e===void 0&&(e={}),qe(e))return new Ya(e);if(we(e))return ov.apply(ov,arguments)};wr.use=function(t){var e=Array.prototype.slice.call(arguments,1);return e.unshift(wr),t.apply(null,e),this};wr.warnings=function(t){return mx(t)};wr.version=rP;wr.stylesheet=wr.Stylesheet=ns;var Nr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Wv(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Xv(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var qu,dm;function nP(){if(dm)return qu;dm=1;function t(){this.__data__=[],this.size=0}return qu=t,qu}var Gu,vm;function ua(){if(vm)return Gu;vm=1;function t(e,r){return e===r||e!==e&&r!==r}return Gu=t,Gu}var zu,gm;function Ps(){if(gm)return zu;gm=1;var t=ua();function e(r,n){for(var a=r.length;a--;)if(t(r[a][0],n))return a;return-1}return zu=e,zu}var $u,pm;function aP(){if(pm)return $u;pm=1;var t=Ps(),e=Array.prototype,r=e.splice;function n(a){var i=this.__data__,s=t(i,a);if(s<0)return!1;var o=i.length-1;return s==o?i.pop():r.call(i,s,1),--this.size,!0}return $u=n,$u}var Vu,ym;function iP(){if(ym)return Vu;ym=1;var t=Ps();function e(r){var n=this.__data__,a=t(n,r);return a<0?void 0:n[a][1]}return Vu=e,Vu}var Uu,mm;function sP(){if(mm)return Uu;mm=1;var t=Ps();function e(r){return t(this.__data__,r)>-1}return Uu=e,Uu}var Hu,bm;function oP(){if(bm)return Hu;bm=1;var t=Ps();function e(r,n){var a=this.__data__,i=t(a,r);return i<0?(++this.size,a.push([r,n])):a[i][1]=n,this}return Hu=e,Hu}var Yu,wm;function ks(){if(wm)return Yu;wm=1;var t=nP(),e=aP(),r=iP(),n=sP(),a=oP();function i(s){var o=-1,u=s==null?0:s.length;for(this.clear();++o<u;){var l=s[o];this.set(l[0],l[1])}}return i.prototype.clear=t,i.prototype.delete=e,i.prototype.get=r,i.prototype.has=n,i.prototype.set=a,Yu=i,Yu}var Wu,Em;function uP(){if(Em)return Wu;Em=1;var t=ks();function e(){this.__data__=new t,this.size=0}return Wu=e,Wu}var Xu,xm;function lP(){if(xm)return Xu;xm=1;function t(e){var r=this.__data__,n=r.delete(e);return this.size=r.size,n}return Xu=t,Xu}var Ku,Tm;function fP(){if(Tm)return Ku;Tm=1;function t(e){return this.__data__.get(e)}return Ku=t,Ku}var ju,Cm;function cP(){if(Cm)return ju;Cm=1;function t(e){return this.__data__.has(e)}return ju=t,ju}var Zu,Sm;function WT(){if(Sm)return Zu;Sm=1;var t=typeof Nr=="object"&&Nr&&Nr.Object===Object&&Nr;return Zu=t,Zu}var Qu,Am;function Qt(){if(Am)return Qu;Am=1;var t=WT(),e=typeof self=="object"&&self&&self.Object===Object&&self,r=t||e||Function("return this")();return Qu=r,Qu}var Ju,Im;function la(){if(Im)return Ju;Im=1;var t=Qt(),e=t.Symbol;return Ju=e,Ju}var el,Rm;function hP(){if(Rm)return el;Rm=1;var t=la(),e=Object.prototype,r=e.hasOwnProperty,n=e.toString,a=t?t.toStringTag:void 0;function i(s){var o=r.call(s,a),u=s[a];try{s[a]=void 0;var l=!0}catch{}var f=n.call(s);return l&&(o?s[a]=u:delete s[a]),f}return el=i,el}var tl,Dm;function dP(){if(Dm)return tl;Dm=1;var t=Object.prototype,e=t.toString;function r(n){return e.call(n)}return tl=r,tl}var rl,_m;function Dn(){if(_m)return rl;_m=1;var t=la(),e=hP(),r=dP(),n="[object Null]",a="[object Undefined]",i=t?t.toStringTag:void 0;function s(o){return o==null?o===void 0?a:n:i&&i in Object(o)?e(o):r(o)}return rl=s,rl}var nl,Lm;function Ut(){if(Lm)return nl;Lm=1;function t(e){var r=typeof e;return e!=null&&(r=="object"||r=="function")}return nl=t,nl}var al,Mm;function oi(){if(Mm)return al;Mm=1;var t=Dn(),e=Ut(),r="[object AsyncFunction]",n="[object Function]",a="[object GeneratorFunction]",i="[object Proxy]";function s(o){if(!e(o))return!1;var u=t(o);return u==n||u==a||u==r||u==i}return al=s,al}var il,Om;function vP(){if(Om)return il;Om=1;var t=Qt(),e=t["__core-js_shared__"];return il=e,il}var sl,Pm;function gP(){if(Pm)return sl;Pm=1;var t=vP(),e=function(){var n=/[^.]+$/.exec(t&&t.keys&&t.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function r(n){return!!e&&e in n}return sl=r,sl}var ol,km;function XT(){if(km)return ol;km=1;var t=Function.prototype,e=t.toString;function r(n){if(n!=null){try{return e.call(n)}catch{}try{return n+""}catch{}}return""}return ol=r,ol}var ul,Nm;function pP(){if(Nm)return ul;Nm=1;var t=oi(),e=gP(),r=Ut(),n=XT(),a=/[\\^$.*+?()[\]{}|]/g,i=/^\[object .+?Constructor\]$/,s=Function.prototype,o=Object.prototype,u=s.toString,l=o.hasOwnProperty,f=RegExp("^"+u.call(l).replace(a,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function c(h){if(!r(h)||e(h))return!1;var d=t(h)?f:i;return d.test(n(h))}return ul=c,ul}var ll,Bm;function yP(){if(Bm)return ll;Bm=1;function t(e,r){return e==null?void 0:e[r]}return ll=t,ll}var fl,Fm;function _n(){if(Fm)return fl;Fm=1;var t=pP(),e=yP();function r(n,a){var i=e(n,a);return t(i)?i:void 0}return fl=r,fl}var cl,qm;function Kv(){if(qm)return cl;qm=1;var t=_n(),e=Qt(),r=t(e,"Map");return cl=r,cl}var hl,Gm;function Ns(){if(Gm)return hl;Gm=1;var t=_n(),e=t(Object,"create");return hl=e,hl}var dl,zm;function mP(){if(zm)return dl;zm=1;var t=Ns();function e(){this.__data__=t?t(null):{},this.size=0}return dl=e,dl}var vl,$m;function bP(){if($m)return vl;$m=1;function t(e){var r=this.has(e)&&delete this.__data__[e];return this.size-=r?1:0,r}return vl=t,vl}var gl,Vm;function wP(){if(Vm)return gl;Vm=1;var t=Ns(),e="__lodash_hash_undefined__",r=Object.prototype,n=r.hasOwnProperty;function a(i){var s=this.__data__;if(t){var o=s[i];return o===e?void 0:o}return n.call(s,i)?s[i]:void 0}return gl=a,gl}var pl,Um;function EP(){if(Um)return pl;Um=1;var t=Ns(),e=Object.prototype,r=e.hasOwnProperty;function n(a){var i=this.__data__;return t?i[a]!==void 0:r.call(i,a)}return pl=n,pl}var yl,Hm;function xP(){if(Hm)return yl;Hm=1;var t=Ns(),e="__lodash_hash_undefined__";function r(n,a){var i=this.__data__;return this.size+=this.has(n)?0:1,i[n]=t&&a===void 0?e:a,this}return yl=r,yl}var ml,Ym;function TP(){if(Ym)return ml;Ym=1;var t=mP(),e=bP(),r=wP(),n=EP(),a=xP();function i(s){var o=-1,u=s==null?0:s.length;for(this.clear();++o<u;){var l=s[o];this.set(l[0],l[1])}}return i.prototype.clear=t,i.prototype.delete=e,i.prototype.get=r,i.prototype.has=n,i.prototype.set=a,ml=i,ml}var bl,Wm;function CP(){if(Wm)return bl;Wm=1;var t=TP(),e=ks(),r=Kv();function n(){this.size=0,this.__data__={hash:new t,map:new(r||e),string:new t}}return bl=n,bl}var wl,Xm;function SP(){if(Xm)return wl;Xm=1;function t(e){var r=typeof e;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?e!=="__proto__":e===null}return wl=t,wl}var El,Km;function Bs(){if(Km)return El;Km=1;var t=SP();function e(r,n){var a=r.__data__;return t(n)?a[typeof n=="string"?"string":"hash"]:a.map}return El=e,El}var xl,jm;function AP(){if(jm)return xl;jm=1;var t=Bs();function e(r){var n=t(this,r).delete(r);return this.size-=n?1:0,n}return xl=e,xl}var Tl,Zm;function IP(){if(Zm)return Tl;Zm=1;var t=Bs();function e(r){return t(this,r).get(r)}return Tl=e,Tl}var Cl,Qm;function RP(){if(Qm)return Cl;Qm=1;var t=Bs();function e(r){return t(this,r).has(r)}return Cl=e,Cl}var Sl,Jm;function DP(){if(Jm)return Sl;Jm=1;var t=Bs();function e(r,n){var a=t(this,r),i=a.size;return a.set(r,n),this.size+=a.size==i?0:1,this}return Sl=e,Sl}var Al,e0;function jv(){if(e0)return Al;e0=1;var t=CP(),e=AP(),r=IP(),n=RP(),a=DP();function i(s){var o=-1,u=s==null?0:s.length;for(this.clear();++o<u;){var l=s[o];this.set(l[0],l[1])}}return i.prototype.clear=t,i.prototype.delete=e,i.prototype.get=r,i.prototype.has=n,i.prototype.set=a,Al=i,Al}var Il,t0;function _P(){if(t0)return Il;t0=1;var t=ks(),e=Kv(),r=jv(),n=200;function a(i,s){var o=this.__data__;if(o instanceof t){var u=o.__data__;if(!e||u.length<n-1)return u.push([i,s]),this.size=++o.size,this;o=this.__data__=new r(u)}return o.set(i,s),this.size=o.size,this}return Il=a,Il}var Rl,r0;function Fs(){if(r0)return Rl;r0=1;var t=ks(),e=uP(),r=lP(),n=fP(),a=cP(),i=_P();function s(o){var u=this.__data__=new t(o);this.size=u.size}return s.prototype.clear=e,s.prototype.delete=r,s.prototype.get=n,s.prototype.has=a,s.prototype.set=i,Rl=s,Rl}var Dl,n0;function Zv(){if(n0)return Dl;n0=1;function t(e,r){for(var n=-1,a=e==null?0:e.length;++n<a&&r(e[n],n,e)!==!1;);return e}return Dl=t,Dl}var _l,a0;function KT(){if(a0)return _l;a0=1;var t=_n(),e=function(){try{var r=t(Object,"defineProperty");return r({},"",{}),r}catch{}}();return _l=e,_l}var Ll,i0;function qs(){if(i0)return Ll;i0=1;var t=KT();function e(r,n,a){n=="__proto__"&&t?t(r,n,{configurable:!0,enumerable:!0,value:a,writable:!0}):r[n]=a}return Ll=e,Ll}var Ml,s0;function Gs(){if(s0)return Ml;s0=1;var t=qs(),e=ua(),r=Object.prototype,n=r.hasOwnProperty;function a(i,s,o){var u=i[s];(!(n.call(i,s)&&e(u,o))||o===void 0&&!(s in i))&&t(i,s,o)}return Ml=a,Ml}var Ol,o0;function ui(){if(o0)return Ol;o0=1;var t=Gs(),e=qs();function r(n,a,i,s){var o=!i;i||(i={});for(var u=-1,l=a.length;++u<l;){var f=a[u],c=s?s(i[f],n[f],f,i,n):void 0;c===void 0&&(c=n[f]),o?e(i,f,c):t(i,f,c)}return i}return Ol=r,Ol}var Pl,u0;function LP(){if(u0)return Pl;u0=1;function t(e,r){for(var n=-1,a=Array(e);++n<e;)a[n]=r(n);return a}return Pl=t,Pl}var kl,l0;function ur(){if(l0)return kl;l0=1;function t(e){return e!=null&&typeof e=="object"}return kl=t,kl}var Nl,f0;function MP(){if(f0)return Nl;f0=1;var t=Dn(),e=ur(),r="[object Arguments]";function n(a){return e(a)&&t(a)==r}return Nl=n,Nl}var Bl,c0;function li(){if(c0)return Bl;c0=1;var t=MP(),e=ur(),r=Object.prototype,n=r.hasOwnProperty,a=r.propertyIsEnumerable,i=t(function(){return arguments}())?t:function(s){return e(s)&&n.call(s,"callee")&&!a.call(s,"callee")};return Bl=i,Bl}var Fl,h0;function it(){if(h0)return Fl;h0=1;var t=Array.isArray;return Fl=t,Fl}var Aa={exports:{}},ql,d0;function OP(){if(d0)return ql;d0=1;function t(){return!1}return ql=t,ql}Aa.exports;var v0;function fa(){return v0||(v0=1,function(t,e){var r=Qt(),n=OP(),a=e&&!e.nodeType&&e,i=a&&!0&&t&&!t.nodeType&&t,s=i&&i.exports===a,o=s?r.Buffer:void 0,u=o?o.isBuffer:void 0,l=u||n;t.exports=l}(Aa,Aa.exports)),Aa.exports}var Gl,g0;function zs(){if(g0)return Gl;g0=1;var t=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function r(n,a){var i=typeof n;return a=a??t,!!a&&(i=="number"||i!="symbol"&&e.test(n))&&n>-1&&n%1==0&&n<a}return Gl=r,Gl}var zl,p0;function Qv(){if(p0)return zl;p0=1;var t=9007199254740991;function e(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=t}return zl=e,zl}var $l,y0;function PP(){if(y0)return $l;y0=1;var t=Dn(),e=Qv(),r=ur(),n="[object Arguments]",a="[object Array]",i="[object Boolean]",s="[object Date]",o="[object Error]",u="[object Function]",l="[object Map]",f="[object Number]",c="[object Object]",h="[object RegExp]",d="[object Set]",v="[object String]",g="[object WeakMap]",p="[object ArrayBuffer]",y="[object DataView]",m="[object Float32Array]",b="[object Float64Array]",E="[object Int8Array]",T="[object Int16Array]",I="[object Int32Array]",w="[object Uint8Array]",x="[object Uint8ClampedArray]",C="[object Uint16Array]",S="[object Uint32Array]",A={};A[m]=A[b]=A[E]=A[T]=A[I]=A[w]=A[x]=A[C]=A[S]=!0,A[n]=A[a]=A[p]=A[i]=A[y]=A[s]=A[o]=A[u]=A[l]=A[f]=A[c]=A[h]=A[d]=A[v]=A[g]=!1;function R(D){return r(D)&&e(D.length)&&!!A[t(D)]}return $l=R,$l}var Vl,m0;function $s(){if(m0)return Vl;m0=1;function t(e){return function(r){return e(r)}}return Vl=t,Vl}var Ia={exports:{}};Ia.exports;var b0;function Jv(){return b0||(b0=1,function(t,e){var r=WT(),n=e&&!e.nodeType&&e,a=n&&!0&&t&&!t.nodeType&&t,i=a&&a.exports===n,s=i&&r.process,o=function(){try{var u=a&&a.require&&a.require("util").types;return u||s&&s.binding&&s.binding("util")}catch{}}();t.exports=o}(Ia,Ia.exports)),Ia.exports}var Ul,w0;function fi(){if(w0)return Ul;w0=1;var t=PP(),e=$s(),r=Jv(),n=r&&r.isTypedArray,a=n?e(n):t;return Ul=a,Ul}var Hl,E0;function jT(){if(E0)return Hl;E0=1;var t=LP(),e=li(),r=it(),n=fa(),a=zs(),i=fi(),s=Object.prototype,o=s.hasOwnProperty;function u(l,f){var c=r(l),h=!c&&e(l),d=!c&&!h&&n(l),v=!c&&!h&&!d&&i(l),g=c||h||d||v,p=g?t(l.length,String):[],y=p.length;for(var m in l)(f||o.call(l,m))&&!(g&&(m=="length"||d&&(m=="offset"||m=="parent")||v&&(m=="buffer"||m=="byteLength"||m=="byteOffset")||a(m,y)))&&p.push(m);return p}return Hl=u,Hl}var Yl,x0;function Vs(){if(x0)return Yl;x0=1;var t=Object.prototype;function e(r){var n=r&&r.constructor,a=typeof n=="function"&&n.prototype||t;return r===a}return Yl=e,Yl}var Wl,T0;function ZT(){if(T0)return Wl;T0=1;function t(e,r){return function(n){return e(r(n))}}return Wl=t,Wl}var Xl,C0;function kP(){if(C0)return Xl;C0=1;var t=ZT(),e=t(Object.keys,Object);return Xl=e,Xl}var Kl,S0;function eg(){if(S0)return Kl;S0=1;var t=Vs(),e=kP(),r=Object.prototype,n=r.hasOwnProperty;function a(i){if(!t(i))return e(i);var s=[];for(var o in Object(i))n.call(i,o)&&o!="constructor"&&s.push(o);return s}return Kl=a,Kl}var jl,A0;function Cr(){if(A0)return jl;A0=1;var t=oi(),e=Qv();function r(n){return n!=null&&e(n.length)&&!t(n)}return jl=r,jl}var Zl,I0;function nn(){if(I0)return Zl;I0=1;var t=jT(),e=eg(),r=Cr();function n(a){return r(a)?t(a):e(a)}return Zl=n,Zl}var Ql,R0;function NP(){if(R0)return Ql;R0=1;var t=ui(),e=nn();function r(n,a){return n&&t(a,e(a),n)}return Ql=r,Ql}var Jl,D0;function BP(){if(D0)return Jl;D0=1;function t(e){var r=[];if(e!=null)for(var n in Object(e))r.push(n);return r}return Jl=t,Jl}var ef,_0;function FP(){if(_0)return ef;_0=1;var t=Ut(),e=Vs(),r=BP(),n=Object.prototype,a=n.hasOwnProperty;function i(s){if(!t(s))return r(s);var o=e(s),u=[];for(var l in s)l=="constructor"&&(o||!a.call(s,l))||u.push(l);return u}return ef=i,ef}var tf,L0;function Ln(){if(L0)return tf;L0=1;var t=jT(),e=FP(),r=Cr();function n(a){return r(a)?t(a,!0):e(a)}return tf=n,tf}var rf,M0;function qP(){if(M0)return rf;M0=1;var t=ui(),e=Ln();function r(n,a){return n&&t(a,e(a),n)}return rf=r,rf}var Ra={exports:{}};Ra.exports;var O0;function QT(){return O0||(O0=1,function(t,e){var r=Qt(),n=e&&!e.nodeType&&e,a=n&&!0&&t&&!t.nodeType&&t,i=a&&a.exports===n,s=i?r.Buffer:void 0,o=s?s.allocUnsafe:void 0;function u(l,f){if(f)return l.slice();var c=l.length,h=o?o(c):new l.constructor(c);return l.copy(h),h}t.exports=u}(Ra,Ra.exports)),Ra.exports}var nf,P0;function JT(){if(P0)return nf;P0=1;function t(e,r){var n=-1,a=e.length;for(r||(r=Array(a));++n<a;)r[n]=e[n];return r}return nf=t,nf}var af,k0;function eC(){if(k0)return af;k0=1;function t(e,r){for(var n=-1,a=e==null?0:e.length,i=0,s=[];++n<a;){var o=e[n];r(o,n,e)&&(s[i++]=o)}return s}return af=t,af}var sf,N0;function tC(){if(N0)return sf;N0=1;function t(){return[]}return sf=t,sf}var of,B0;function tg(){if(B0)return of;B0=1;var t=eC(),e=tC(),r=Object.prototype,n=r.propertyIsEnumerable,a=Object.getOwnPropertySymbols,i=a?function(s){return s==null?[]:(s=Object(s),t(a(s),function(o){return n.call(s,o)}))}:e;return of=i,of}var uf,F0;function GP(){if(F0)return uf;F0=1;var t=ui(),e=tg();function r(n,a){return t(n,e(n),a)}return uf=r,uf}var lf,q0;function rg(){if(q0)return lf;q0=1;function t(e,r){for(var n=-1,a=r.length,i=e.length;++n<a;)e[i+n]=r[n];return e}return lf=t,lf}var ff,G0;function Us(){if(G0)return ff;G0=1;var t=ZT(),e=t(Object.getPrototypeOf,Object);return ff=e,ff}var cf,z0;function rC(){if(z0)return cf;z0=1;var t=rg(),e=Us(),r=tg(),n=tC(),a=Object.getOwnPropertySymbols,i=a?function(s){for(var o=[];s;)t(o,r(s)),s=e(s);return o}:n;return cf=i,cf}var hf,$0;function zP(){if($0)return hf;$0=1;var t=ui(),e=rC();function r(n,a){return t(n,e(n),a)}return hf=r,hf}var df,V0;function nC(){if(V0)return df;V0=1;var t=rg(),e=it();function r(n,a,i){var s=a(n);return e(n)?s:t(s,i(n))}return df=r,df}var vf,U0;function aC(){if(U0)return vf;U0=1;var t=nC(),e=tg(),r=nn();function n(a){return t(a,r,e)}return vf=n,vf}var gf,H0;function $P(){if(H0)return gf;H0=1;var t=nC(),e=rC(),r=Ln();function n(a){return t(a,r,e)}return gf=n,gf}var pf,Y0;function VP(){if(Y0)return pf;Y0=1;var t=_n(),e=Qt(),r=t(e,"DataView");return pf=r,pf}var yf,W0;function UP(){if(W0)return yf;W0=1;var t=_n(),e=Qt(),r=t(e,"Promise");return yf=r,yf}var mf,X0;function iC(){if(X0)return mf;X0=1;var t=_n(),e=Qt(),r=t(e,"Set");return mf=r,mf}var bf,K0;function HP(){if(K0)return bf;K0=1;var t=_n(),e=Qt(),r=t(e,"WeakMap");return bf=r,bf}var wf,j0;function ca(){if(j0)return wf;j0=1;var t=VP(),e=Kv(),r=UP(),n=iC(),a=HP(),i=Dn(),s=XT(),o="[object Map]",u="[object Object]",l="[object Promise]",f="[object Set]",c="[object WeakMap]",h="[object DataView]",d=s(t),v=s(e),g=s(r),p=s(n),y=s(a),m=i;return(t&&m(new t(new ArrayBuffer(1)))!=h||e&&m(new e)!=o||r&&m(r.resolve())!=l||n&&m(new n)!=f||a&&m(new a)!=c)&&(m=function(b){var E=i(b),T=E==u?b.constructor:void 0,I=T?s(T):"";if(I)switch(I){case d:return h;case v:return o;case g:return l;case p:return f;case y:return c}return E}),wf=m,wf}var Ef,Z0;function YP(){if(Z0)return Ef;Z0=1;var t=Object.prototype,e=t.hasOwnProperty;function r(n){var a=n.length,i=new n.constructor(a);return a&&typeof n[0]=="string"&&e.call(n,"index")&&(i.index=n.index,i.input=n.input),i}return Ef=r,Ef}var xf,Q0;function sC(){if(Q0)return xf;Q0=1;var t=Qt(),e=t.Uint8Array;return xf=e,xf}var Tf,J0;function ng(){if(J0)return Tf;J0=1;var t=sC();function e(r){var n=new r.constructor(r.byteLength);return new t(n).set(new t(r)),n}return Tf=e,Tf}var Cf,eb;function WP(){if(eb)return Cf;eb=1;var t=ng();function e(r,n){var a=n?t(r.buffer):r.buffer;return new r.constructor(a,r.byteOffset,r.byteLength)}return Cf=e,Cf}var Sf,tb;function XP(){if(tb)return Sf;tb=1;var t=/\w*$/;function e(r){var n=new r.constructor(r.source,t.exec(r));return n.lastIndex=r.lastIndex,n}return Sf=e,Sf}var Af,rb;function KP(){if(rb)return Af;rb=1;var t=la(),e=t?t.prototype:void 0,r=e?e.valueOf:void 0;function n(a){return r?Object(r.call(a)):{}}return Af=n,Af}var If,nb;function oC(){if(nb)return If;nb=1;var t=ng();function e(r,n){var a=n?t(r.buffer):r.buffer;return new r.constructor(a,r.byteOffset,r.length)}return If=e,If}var Rf,ab;function jP(){if(ab)return Rf;ab=1;var t=ng(),e=WP(),r=XP(),n=KP(),a=oC(),i="[object Boolean]",s="[object Date]",o="[object Map]",u="[object Number]",l="[object RegExp]",f="[object Set]",c="[object String]",h="[object Symbol]",d="[object ArrayBuffer]",v="[object DataView]",g="[object Float32Array]",p="[object Float64Array]",y="[object Int8Array]",m="[object Int16Array]",b="[object Int32Array]",E="[object Uint8Array]",T="[object Uint8ClampedArray]",I="[object Uint16Array]",w="[object Uint32Array]";function x(C,S,A){var R=C.constructor;switch(S){case d:return t(C);case i:case s:return new R(+C);case v:return e(C,A);case g:case p:case y:case m:case b:case E:case T:case I:case w:return a(C,A);case o:return new R;case u:case c:return new R(C);case l:return r(C);case f:return new R;case h:return n(C)}}return Rf=x,Rf}var Df,ib;function uC(){if(ib)return Df;ib=1;var t=Ut(),e=Object.create,r=function(){function n(){}return function(a){if(!t(a))return{};if(e)return e(a);n.prototype=a;var i=new n;return n.prototype=void 0,i}}();return Df=r,Df}var _f,sb;function lC(){if(sb)return _f;sb=1;var t=uC(),e=Us(),r=Vs();function n(a){return typeof a.constructor=="function"&&!r(a)?t(e(a)):{}}return _f=n,_f}var Lf,ob;function ZP(){if(ob)return Lf;ob=1;var t=ca(),e=ur(),r="[object Map]";function n(a){return e(a)&&t(a)==r}return Lf=n,Lf}var Mf,ub;function QP(){if(ub)return Mf;ub=1;var t=ZP(),e=$s(),r=Jv(),n=r&&r.isMap,a=n?e(n):t;return Mf=a,Mf}var Of,lb;function JP(){if(lb)return Of;lb=1;var t=ca(),e=ur(),r="[object Set]";function n(a){return e(a)&&t(a)==r}return Of=n,Of}var Pf,fb;function ek(){if(fb)return Pf;fb=1;var t=JP(),e=$s(),r=Jv(),n=r&&r.isSet,a=n?e(n):t;return Pf=a,Pf}var kf,cb;function fC(){if(cb)return kf;cb=1;var t=Fs(),e=Zv(),r=Gs(),n=NP(),a=qP(),i=QT(),s=JT(),o=GP(),u=zP(),l=aC(),f=$P(),c=ca(),h=YP(),d=jP(),v=lC(),g=it(),p=fa(),y=QP(),m=Ut(),b=ek(),E=nn(),T=Ln(),I=1,w=2,x=4,C="[object Arguments]",S="[object Array]",A="[object Boolean]",R="[object Date]",D="[object Error]",_="[object Function]",M="[object GeneratorFunction]",k="[object Map]",O="[object Number]",P="[object Object]",B="[object RegExp]",F="[object Set]",N="[object String]",q="[object Symbol]",V="[object WeakMap]",Y="[object ArrayBuffer]",H="[object DataView]",Z="[object Float32Array]",ee="[object Float64Array]",ie="[object Int8Array]",J="[object Int16Array]",G="[object Int32Array]",$="[object Uint8Array]",U="[object Uint8ClampedArray]",j="[object Uint16Array]",ne="[object Uint32Array]",re={};re[C]=re[S]=re[Y]=re[H]=re[A]=re[R]=re[Z]=re[ee]=re[ie]=re[J]=re[G]=re[k]=re[O]=re[P]=re[B]=re[F]=re[N]=re[q]=re[$]=re[U]=re[j]=re[ne]=!0,re[D]=re[_]=re[V]=!1;function Ie(se,be,ge,oe,de,fe){var ve,pe=be&I,Ce=be&w,Pe=be&x;if(ge&&(ve=de?ge(se,oe,de,fe):ge(se)),ve!==void 0)return ve;if(!m(se))return se;var Ne=g(se);if(Ne){if(ve=h(se),!pe)return s(se,ve)}else{var Me=c(se),Be=Me==_||Me==M;if(p(se))return i(se,pe);if(Me==P||Me==C||Be&&!de){if(ve=Ce||Be?{}:v(se),!pe)return Ce?u(se,a(ve,se)):o(se,n(ve,se))}else{if(!re[Me])return de?se:{};ve=d(se,Me,pe)}}fe||(fe=new t);var Te=fe.get(se);if(Te)return Te;fe.set(se,ve),b(se)?se.forEach(function(L){ve.add(Ie(L,be,ge,L,se,fe))}):y(se)&&se.forEach(function(L,z){ve.set(z,Ie(L,be,ge,z,se,fe))});var ue=Pe?Ce?f:l:Ce?T:E,K=Ne?void 0:ue(se);return e(K||se,function(L,z){K&&(z=L,L=se[z]),r(ve,z,Ie(L,be,ge,z,se,fe))}),ve}return kf=Ie,kf}var Nf,hb;function tk(){if(hb)return Nf;hb=1;var t=fC(),e=4;function r(n){return t(n,e)}return Nf=r,Nf}var Bf,db;function ag(){if(db)return Bf;db=1;function t(e){return function(){return e}}return Bf=t,Bf}var Ff,vb;function rk(){if(vb)return Ff;vb=1;function t(e){return function(r,n,a){for(var i=-1,s=Object(r),o=a(r),u=o.length;u--;){var l=o[e?u:++i];if(n(s[l],l,s)===!1)break}return r}}return Ff=t,Ff}var qf,gb;function ig(){if(gb)return qf;gb=1;var t=rk(),e=t();return qf=e,qf}var Gf,pb;function sg(){if(pb)return Gf;pb=1;var t=ig(),e=nn();function r(n,a){return n&&t(n,a,e)}return Gf=r,Gf}var zf,yb;function nk(){if(yb)return zf;yb=1;var t=Cr();function e(r,n){return function(a,i){if(a==null)return a;if(!t(a))return r(a,i);for(var s=a.length,o=n?s:-1,u=Object(a);(n?o--:++o<s)&&i(u[o],o,u)!==!1;);return a}}return zf=e,zf}var $f,mb;function Hs(){if(mb)return $f;mb=1;var t=sg(),e=nk(),r=e(t);return $f=r,$f}var Vf,bb;function Mn(){if(bb)return Vf;bb=1;function t(e){return e}return Vf=t,Vf}var Uf,wb;function cC(){if(wb)return Uf;wb=1;var t=Mn();function e(r){return typeof r=="function"?r:t}return Uf=e,Uf}var Hf,Eb;function hC(){if(Eb)return Hf;Eb=1;var t=Zv(),e=Hs(),r=cC(),n=it();function a(i,s){var o=n(i)?t:e;return o(i,r(s))}return Hf=a,Hf}var Yf,xb;function dC(){return xb||(xb=1,Yf=hC()),Yf}var Wf,Tb;function ak(){if(Tb)return Wf;Tb=1;var t=Hs();function e(r,n){var a=[];return t(r,function(i,s,o){n(i,s,o)&&a.push(i)}),a}return Wf=e,Wf}var Xf,Cb;function ik(){if(Cb)return Xf;Cb=1;var t="__lodash_hash_undefined__";function e(r){return this.__data__.set(r,t),this}return Xf=e,Xf}var Kf,Sb;function sk(){if(Sb)return Kf;Sb=1;function t(e){return this.__data__.has(e)}return Kf=t,Kf}var jf,Ab;function vC(){if(Ab)return jf;Ab=1;var t=jv(),e=ik(),r=sk();function n(a){var i=-1,s=a==null?0:a.length;for(this.__data__=new t;++i<s;)this.add(a[i])}return n.prototype.add=n.prototype.push=e,n.prototype.has=r,jf=n,jf}var Zf,Ib;function ok(){if(Ib)return Zf;Ib=1;function t(e,r){for(var n=-1,a=e==null?0:e.length;++n<a;)if(r(e[n],n,e))return!0;return!1}return Zf=t,Zf}var Qf,Rb;function gC(){if(Rb)return Qf;Rb=1;function t(e,r){return e.has(r)}return Qf=t,Qf}var Jf,Db;function pC(){if(Db)return Jf;Db=1;var t=vC(),e=ok(),r=gC(),n=1,a=2;function i(s,o,u,l,f,c){var h=u&n,d=s.length,v=o.length;if(d!=v&&!(h&&v>d))return!1;var g=c.get(s),p=c.get(o);if(g&&p)return g==o&&p==s;var y=-1,m=!0,b=u&a?new t:void 0;for(c.set(s,o),c.set(o,s);++y<d;){var E=s[y],T=o[y];if(l)var I=h?l(T,E,y,o,s,c):l(E,T,y,s,o,c);if(I!==void 0){if(I)continue;m=!1;break}if(b){if(!e(o,function(w,x){if(!r(b,x)&&(E===w||f(E,w,u,l,c)))return b.push(x)})){m=!1;break}}else if(!(E===T||f(E,T,u,l,c))){m=!1;break}}return c.delete(s),c.delete(o),m}return Jf=i,Jf}var ec,_b;function uk(){if(_b)return ec;_b=1;function t(e){var r=-1,n=Array(e.size);return e.forEach(function(a,i){n[++r]=[i,a]}),n}return ec=t,ec}var tc,Lb;function og(){if(Lb)return tc;Lb=1;function t(e){var r=-1,n=Array(e.size);return e.forEach(function(a){n[++r]=a}),n}return tc=t,tc}var rc,Mb;function lk(){if(Mb)return rc;Mb=1;var t=la(),e=sC(),r=ua(),n=pC(),a=uk(),i=og(),s=1,o=2,u="[object Boolean]",l="[object Date]",f="[object Error]",c="[object Map]",h="[object Number]",d="[object RegExp]",v="[object Set]",g="[object String]",p="[object Symbol]",y="[object ArrayBuffer]",m="[object DataView]",b=t?t.prototype:void 0,E=b?b.valueOf:void 0;function T(I,w,x,C,S,A,R){switch(x){case m:if(I.byteLength!=w.byteLength||I.byteOffset!=w.byteOffset)return!1;I=I.buffer,w=w.buffer;case y:return!(I.byteLength!=w.byteLength||!A(new e(I),new e(w)));case u:case l:case h:return r(+I,+w);case f:return I.name==w.name&&I.message==w.message;case d:case g:return I==w+"";case c:var D=a;case v:var _=C&s;if(D||(D=i),I.size!=w.size&&!_)return!1;var M=R.get(I);if(M)return M==w;C|=o,R.set(I,w);var k=n(D(I),D(w),C,S,A,R);return R.delete(I),k;case p:if(E)return E.call(I)==E.call(w)}return!1}return rc=T,rc}var nc,Ob;function fk(){if(Ob)return nc;Ob=1;var t=aC(),e=1,r=Object.prototype,n=r.hasOwnProperty;function a(i,s,o,u,l,f){var c=o&e,h=t(i),d=h.length,v=t(s),g=v.length;if(d!=g&&!c)return!1;for(var p=d;p--;){var y=h[p];if(!(c?y in s:n.call(s,y)))return!1}var m=f.get(i),b=f.get(s);if(m&&b)return m==s&&b==i;var E=!0;f.set(i,s),f.set(s,i);for(var T=c;++p<d;){y=h[p];var I=i[y],w=s[y];if(u)var x=c?u(w,I,y,s,i,f):u(I,w,y,i,s,f);if(!(x===void 0?I===w||l(I,w,o,u,f):x)){E=!1;break}T||(T=y=="constructor")}if(E&&!T){var C=i.constructor,S=s.constructor;C!=S&&"constructor"in i&&"constructor"in s&&!(typeof C=="function"&&C instanceof C&&typeof S=="function"&&S instanceof S)&&(E=!1)}return f.delete(i),f.delete(s),E}return nc=a,nc}var ac,Pb;function ck(){if(Pb)return ac;Pb=1;var t=Fs(),e=pC(),r=lk(),n=fk(),a=ca(),i=it(),s=fa(),o=fi(),u=1,l="[object Arguments]",f="[object Array]",c="[object Object]",h=Object.prototype,d=h.hasOwnProperty;function v(g,p,y,m,b,E){var T=i(g),I=i(p),w=T?f:a(g),x=I?f:a(p);w=w==l?c:w,x=x==l?c:x;var C=w==c,S=x==c,A=w==x;if(A&&s(g)){if(!s(p))return!1;T=!0,C=!1}if(A&&!C)return E||(E=new t),T||o(g)?e(g,p,y,m,b,E):r(g,p,w,y,m,b,E);if(!(y&u)){var R=C&&d.call(g,"__wrapped__"),D=S&&d.call(p,"__wrapped__");if(R||D){var _=R?g.value():g,M=D?p.value():p;return E||(E=new t),b(_,M,y,m,E)}}return A?(E||(E=new t),n(g,p,y,m,b,E)):!1}return ac=v,ac}var ic,kb;function yC(){if(kb)return ic;kb=1;var t=ck(),e=ur();function r(n,a,i,s,o){return n===a?!0:n==null||a==null||!e(n)&&!e(a)?n!==n&&a!==a:t(n,a,i,s,r,o)}return ic=r,ic}var sc,Nb;function hk(){if(Nb)return sc;Nb=1;var t=Fs(),e=yC(),r=1,n=2;function a(i,s,o,u){var l=o.length,f=l,c=!u;if(i==null)return!f;for(i=Object(i);l--;){var h=o[l];if(c&&h[2]?h[1]!==i[h[0]]:!(h[0]in i))return!1}for(;++l<f;){h=o[l];var d=h[0],v=i[d],g=h[1];if(c&&h[2]){if(v===void 0&&!(d in i))return!1}else{var p=new t;if(u)var y=u(v,g,d,i,s,p);if(!(y===void 0?e(g,v,r|n,u,p):y))return!1}}return!0}return sc=a,sc}var oc,Bb;function mC(){if(Bb)return oc;Bb=1;var t=Ut();function e(r){return r===r&&!t(r)}return oc=e,oc}var uc,Fb;function dk(){if(Fb)return uc;Fb=1;var t=mC(),e=nn();function r(n){for(var a=e(n),i=a.length;i--;){var s=a[i],o=n[s];a[i]=[s,o,t(o)]}return a}return uc=r,uc}var lc,qb;function bC(){if(qb)return lc;qb=1;function t(e,r){return function(n){return n==null?!1:n[e]===r&&(r!==void 0||e in Object(n))}}return lc=t,lc}var fc,Gb;function vk(){if(Gb)return fc;Gb=1;var t=hk(),e=dk(),r=bC();function n(a){var i=e(a);return i.length==1&&i[0][2]?r(i[0][0],i[0][1]):function(s){return s===a||t(s,a,i)}}return fc=n,fc}var cc,zb;function ha(){if(zb)return cc;zb=1;var t=Dn(),e=ur(),r="[object Symbol]";function n(a){return typeof a=="symbol"||e(a)&&t(a)==r}return cc=n,cc}var hc,$b;function ug(){if($b)return hc;$b=1;var t=it(),e=ha(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function a(i,s){if(t(i))return!1;var o=typeof i;return o=="number"||o=="symbol"||o=="boolean"||i==null||e(i)?!0:n.test(i)||!r.test(i)||s!=null&&i in Object(s)}return hc=a,hc}var dc,Vb;function gk(){if(Vb)return dc;Vb=1;var t=jv(),e="Expected a function";function r(n,a){if(typeof n!="function"||a!=null&&typeof a!="function")throw new TypeError(e);var i=function(){var s=arguments,o=a?a.apply(this,s):s[0],u=i.cache;if(u.has(o))return u.get(o);var l=n.apply(this,s);return i.cache=u.set(o,l)||u,l};return i.cache=new(r.Cache||t),i}return r.Cache=t,dc=r,dc}var vc,Ub;function pk(){if(Ub)return vc;Ub=1;var t=gk(),e=500;function r(n){var a=t(n,function(s){return i.size===e&&i.clear(),s}),i=a.cache;return a}return vc=r,vc}var gc,Hb;function yk(){if(Hb)return gc;Hb=1;var t=pk(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,r=/\\(\\)?/g,n=t(function(a){var i=[];return a.charCodeAt(0)===46&&i.push(""),a.replace(e,function(s,o,u,l){i.push(u?l.replace(r,"$1"):o||s)}),i});return gc=n,gc}var pc,Yb;function Ys(){if(Yb)return pc;Yb=1;function t(e,r){for(var n=-1,a=e==null?0:e.length,i=Array(a);++n<a;)i[n]=r(e[n],n,e);return i}return pc=t,pc}var yc,Wb;function mk(){if(Wb)return yc;Wb=1;var t=la(),e=Ys(),r=it(),n=ha(),a=t?t.prototype:void 0,i=a?a.toString:void 0;function s(o){if(typeof o=="string")return o;if(r(o))return e(o,s)+"";if(n(o))return i?i.call(o):"";var u=o+"";return u=="0"&&1/o==-1/0?"-0":u}return yc=s,yc}var mc,Xb;function wC(){if(Xb)return mc;Xb=1;var t=mk();function e(r){return r==null?"":t(r)}return mc=e,mc}var bc,Kb;function Ws(){if(Kb)return bc;Kb=1;var t=it(),e=ug(),r=yk(),n=wC();function a(i,s){return t(i)?i:e(i,s)?[i]:r(n(i))}return bc=a,bc}var wc,jb;function ci(){if(jb)return wc;jb=1;var t=ha();function e(r){if(typeof r=="string"||t(r))return r;var n=r+"";return n=="0"&&1/r==-1/0?"-0":n}return wc=e,wc}var Ec,Zb;function Xs(){if(Zb)return Ec;Zb=1;var t=Ws(),e=ci();function r(n,a){a=t(a,n);for(var i=0,s=a.length;n!=null&&i<s;)n=n[e(a[i++])];return i&&i==s?n:void 0}return Ec=r,Ec}var xc,Qb;function bk(){if(Qb)return xc;Qb=1;var t=Xs();function e(r,n,a){var i=r==null?void 0:t(r,n);return i===void 0?a:i}return xc=e,xc}var Tc,Jb;function wk(){if(Jb)return Tc;Jb=1;function t(e,r){return e!=null&&r in Object(e)}return Tc=t,Tc}var Cc,e1;function EC(){if(e1)return Cc;e1=1;var t=Ws(),e=li(),r=it(),n=zs(),a=Qv(),i=ci();function s(o,u,l){u=t(u,o);for(var f=-1,c=u.length,h=!1;++f<c;){var d=i(u[f]);if(!(h=o!=null&&l(o,d)))break;o=o[d]}return h||++f!=c?h:(c=o==null?0:o.length,!!c&&a(c)&&n(d,c)&&(r(o)||e(o)))}return Cc=s,Cc}var Sc,t1;function xC(){if(t1)return Sc;t1=1;var t=wk(),e=EC();function r(n,a){return n!=null&&e(n,a,t)}return Sc=r,Sc}var Ac,r1;function Ek(){if(r1)return Ac;r1=1;var t=yC(),e=bk(),r=xC(),n=ug(),a=mC(),i=bC(),s=ci(),o=1,u=2;function l(f,c){return n(f)&&a(c)?i(s(f),c):function(h){var d=e(h,f);return d===void 0&&d===c?r(h,f):t(c,d,o|u)}}return Ac=l,Ac}var Ic,n1;function TC(){if(n1)return Ic;n1=1;function t(e){return function(r){return r==null?void 0:r[e]}}return Ic=t,Ic}var Rc,a1;function xk(){if(a1)return Rc;a1=1;var t=Xs();function e(r){return function(n){return t(n,r)}}return Rc=e,Rc}var Dc,i1;function Tk(){if(i1)return Dc;i1=1;var t=TC(),e=xk(),r=ug(),n=ci();function a(i){return r(i)?t(n(i)):e(i)}return Dc=a,Dc}var _c,s1;function Sr(){if(s1)return _c;s1=1;var t=vk(),e=Ek(),r=Mn(),n=it(),a=Tk();function i(s){return typeof s=="function"?s:s==null?r:typeof s=="object"?n(s)?e(s[0],s[1]):t(s):a(s)}return _c=i,_c}var Lc,o1;function CC(){if(o1)return Lc;o1=1;var t=eC(),e=ak(),r=Sr(),n=it();function a(i,s){var o=n(i)?t:e;return o(i,r(s,3))}return Lc=a,Lc}var Mc,u1;function Ck(){if(u1)return Mc;u1=1;var t=Object.prototype,e=t.hasOwnProperty;function r(n,a){return n!=null&&e.call(n,a)}return Mc=r,Mc}var Oc,l1;function SC(){if(l1)return Oc;l1=1;var t=Ck(),e=EC();function r(n,a){return n!=null&&e(n,a,t)}return Oc=r,Oc}var Pc,f1;function Sk(){if(f1)return Pc;f1=1;var t=eg(),e=ca(),r=li(),n=it(),a=Cr(),i=fa(),s=Vs(),o=fi(),u="[object Map]",l="[object Set]",f=Object.prototype,c=f.hasOwnProperty;function h(d){if(d==null)return!0;if(a(d)&&(n(d)||typeof d=="string"||typeof d.splice=="function"||i(d)||o(d)||r(d)))return!d.length;var v=e(d);if(v==u||v==l)return!d.size;if(s(d))return!t(d).length;for(var g in d)if(c.call(d,g))return!1;return!0}return Pc=h,Pc}var kc,c1;function AC(){if(c1)return kc;c1=1;function t(e){return e===void 0}return kc=t,kc}var Nc,h1;function IC(){if(h1)return Nc;h1=1;var t=Hs(),e=Cr();function r(n,a){var i=-1,s=e(n)?Array(n.length):[];return t(n,function(o,u,l){s[++i]=a(o,u,l)}),s}return Nc=r,Nc}var Bc,d1;function RC(){if(d1)return Bc;d1=1;var t=Ys(),e=Sr(),r=IC(),n=it();function a(i,s){var o=n(i)?t:r;return o(i,e(s,3))}return Bc=a,Bc}var Fc,v1;function Ak(){if(v1)return Fc;v1=1;function t(e,r,n,a){var i=-1,s=e==null?0:e.length;for(a&&s&&(n=e[++i]);++i<s;)n=r(n,e[i],i,e);return n}return Fc=t,Fc}var qc,g1;function Ik(){if(g1)return qc;g1=1;function t(e,r,n,a,i){return i(e,function(s,o,u){n=a?(a=!1,s):r(n,s,o,u)}),n}return qc=t,qc}var Gc,p1;function DC(){if(p1)return Gc;p1=1;var t=Ak(),e=Hs(),r=Sr(),n=Ik(),a=it();function i(s,o,u){var l=a(s)?t:n,f=arguments.length<3;return l(s,r(o,4),u,f,e)}return Gc=i,Gc}var zc,y1;function Rk(){if(y1)return zc;y1=1;var t=Dn(),e=it(),r=ur(),n="[object String]";function a(i){return typeof i=="string"||!e(i)&&r(i)&&t(i)==n}return zc=a,zc}var $c,m1;function Dk(){if(m1)return $c;m1=1;var t=TC(),e=t("length");return $c=e,$c}var Vc,b1;function _k(){if(b1)return Vc;b1=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",a=e+r+n,i="\\ufe0e\\ufe0f",s="\\u200d",o=RegExp("["+s+t+a+i+"]");function u(l){return o.test(l)}return Vc=u,Vc}var Uc,w1;function Lk(){if(w1)return Uc;w1=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",a=e+r+n,i="\\ufe0e\\ufe0f",s="["+t+"]",o="["+a+"]",u="\\ud83c[\\udffb-\\udfff]",l="(?:"+o+"|"+u+")",f="[^"+t+"]",c="(?:\\ud83c[\\udde6-\\uddff]){2}",h="[\\ud800-\\udbff][\\udc00-\\udfff]",d="\\u200d",v=l+"?",g="["+i+"]?",p="(?:"+d+"(?:"+[f,c,h].join("|")+")"+g+v+")*",y=g+v+p,m="(?:"+[f+o+"?",o,c,h,s].join("|")+")",b=RegExp(u+"(?="+u+")|"+m+y,"g");function E(T){for(var I=b.lastIndex=0;b.test(T);)++I;return I}return Uc=E,Uc}var Hc,E1;function Mk(){if(E1)return Hc;E1=1;var t=Dk(),e=_k(),r=Lk();function n(a){return e(a)?r(a):t(a)}return Hc=n,Hc}var Yc,x1;function Ok(){if(x1)return Yc;x1=1;var t=eg(),e=ca(),r=Cr(),n=Rk(),a=Mk(),i="[object Map]",s="[object Set]";function o(u){if(u==null)return 0;if(r(u))return n(u)?a(u):u.length;var l=e(u);return l==i||l==s?u.size:t(u).length}return Yc=o,Yc}var Wc,T1;function Pk(){if(T1)return Wc;T1=1;var t=Zv(),e=uC(),r=sg(),n=Sr(),a=Us(),i=it(),s=fa(),o=oi(),u=Ut(),l=fi();function f(c,h,d){var v=i(c),g=v||s(c)||l(c);if(h=n(h,4),d==null){var p=c&&c.constructor;g?d=v?new p:[]:u(c)?d=o(p)?e(a(c)):{}:d={}}return(g?t:r)(c,function(y,m,b){return h(d,y,m,b)}),d}return Wc=f,Wc}var Xc,C1;function kk(){if(C1)return Xc;C1=1;var t=la(),e=li(),r=it(),n=t?t.isConcatSpreadable:void 0;function a(i){return r(i)||e(i)||!!(n&&i&&i[n])}return Xc=a,Xc}var Kc,S1;function lg(){if(S1)return Kc;S1=1;var t=rg(),e=kk();function r(n,a,i,s,o){var u=-1,l=n.length;for(i||(i=e),o||(o=[]);++u<l;){var f=n[u];a>0&&i(f)?a>1?r(f,a-1,i,s,o):t(o,f):s||(o[o.length]=f)}return o}return Kc=r,Kc}var jc,A1;function Nk(){if(A1)return jc;A1=1;function t(e,r,n){switch(n.length){case 0:return e.call(r);case 1:return e.call(r,n[0]);case 2:return e.call(r,n[0],n[1]);case 3:return e.call(r,n[0],n[1],n[2])}return e.apply(r,n)}return jc=t,jc}var Zc,I1;function _C(){if(I1)return Zc;I1=1;var t=Nk(),e=Math.max;function r(n,a,i){return a=e(a===void 0?n.length-1:a,0),function(){for(var s=arguments,o=-1,u=e(s.length-a,0),l=Array(u);++o<u;)l[o]=s[a+o];o=-1;for(var f=Array(a+1);++o<a;)f[o]=s[o];return f[a]=i(l),t(n,this,f)}}return Zc=r,Zc}var Qc,R1;function Bk(){if(R1)return Qc;R1=1;var t=ag(),e=KT(),r=Mn(),n=e?function(a,i){return e(a,"toString",{configurable:!0,enumerable:!1,value:t(i),writable:!0})}:r;return Qc=n,Qc}var Jc,D1;function Fk(){if(D1)return Jc;D1=1;var t=800,e=16,r=Date.now;function n(a){var i=0,s=0;return function(){var o=r(),u=e-(o-s);if(s=o,u>0){if(++i>=t)return arguments[0]}else i=0;return a.apply(void 0,arguments)}}return Jc=n,Jc}var eh,_1;function LC(){if(_1)return eh;_1=1;var t=Bk(),e=Fk(),r=e(t);return eh=r,eh}var th,L1;function Ks(){if(L1)return th;L1=1;var t=Mn(),e=_C(),r=LC();function n(a,i){return r(e(a,i,t),a+"")}return th=n,th}var rh,M1;function MC(){if(M1)return rh;M1=1;function t(e,r,n,a){for(var i=e.length,s=n+(a?1:-1);a?s--:++s<i;)if(r(e[s],s,e))return s;return-1}return rh=t,rh}var nh,O1;function qk(){if(O1)return nh;O1=1;function t(e){return e!==e}return nh=t,nh}var ah,P1;function Gk(){if(P1)return ah;P1=1;function t(e,r,n){for(var a=n-1,i=e.length;++a<i;)if(e[a]===r)return a;return-1}return ah=t,ah}var ih,k1;function zk(){if(k1)return ih;k1=1;var t=MC(),e=qk(),r=Gk();function n(a,i,s){return i===i?r(a,i,s):t(a,e,s)}return ih=n,ih}var sh,N1;function $k(){if(N1)return sh;N1=1;var t=zk();function e(r,n){var a=r==null?0:r.length;return!!a&&t(r,n,0)>-1}return sh=e,sh}var oh,B1;function Vk(){if(B1)return oh;B1=1;function t(e,r,n){for(var a=-1,i=e==null?0:e.length;++a<i;)if(n(r,e[a]))return!0;return!1}return oh=t,oh}var uh,F1;function Uk(){if(F1)return uh;F1=1;function t(){}return uh=t,uh}var lh,q1;function Hk(){if(q1)return lh;q1=1;var t=iC(),e=Uk(),r=og(),n=1/0,a=t&&1/r(new t([,-0]))[1]==n?function(i){return new t(i)}:e;return lh=a,lh}var fh,G1;function Yk(){if(G1)return fh;G1=1;var t=vC(),e=$k(),r=Vk(),n=gC(),a=Hk(),i=og(),s=200;function o(u,l,f){var c=-1,h=e,d=u.length,v=!0,g=[],p=g;if(f)v=!1,h=r;else if(d>=s){var y=l?null:a(u);if(y)return i(y);v=!1,h=n,p=new t}else p=l?[]:g;e:for(;++c<d;){var m=u[c],b=l?l(m):m;if(m=f||m!==0?m:0,v&&b===b){for(var E=p.length;E--;)if(p[E]===b)continue e;l&&p.push(b),g.push(m)}else h(p,b,f)||(p!==g&&p.push(b),g.push(m))}return g}return fh=o,fh}var ch,z1;function OC(){if(z1)return ch;z1=1;var t=Cr(),e=ur();function r(n){return e(n)&&t(n)}return ch=r,ch}var hh,$1;function Wk(){if($1)return hh;$1=1;var t=lg(),e=Ks(),r=Yk(),n=OC(),a=e(function(i){return r(t(i,1,n,!0))});return hh=a,hh}var dh,V1;function Xk(){if(V1)return dh;V1=1;var t=Ys();function e(r,n){return t(n,function(a){return r[a]})}return dh=e,dh}var vh,U1;function PC(){if(U1)return vh;U1=1;var t=Xk(),e=nn();function r(n){return n==null?[]:t(n,e(n))}return vh=r,vh}var gh,H1;function Ht(){if(H1)return gh;H1=1;var t;if(typeof Xv=="function")try{t={clone:tk(),constant:ag(),each:dC(),filter:CC(),has:SC(),isArray:it(),isEmpty:Sk(),isFunction:oi(),isUndefined:AC(),keys:nn(),map:RC(),reduce:DC(),size:Ok(),transform:Pk(),union:Wk(),values:PC()}}catch{}return t||(t=window._),gh=t,gh}var ph,Y1;function fg(){if(Y1)return ph;Y1=1;var t=Ht();ph=a;var e="\0",r="\0",n="";function a(f){this._isDirected=t.has(f,"directed")?f.directed:!0,this._isMultigraph=t.has(f,"multigraph")?f.multigraph:!1,this._isCompound=t.has(f,"compound")?f.compound:!1,this._label=void 0,this._defaultNodeLabelFn=t.constant(void 0),this._defaultEdgeLabelFn=t.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[r]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}a.prototype._nodeCount=0,a.prototype._edgeCount=0,a.prototype.isDirected=function(){return this._isDirected},a.prototype.isMultigraph=function(){return this._isMultigraph},a.prototype.isCompound=function(){return this._isCompound},a.prototype.setGraph=function(f){return this._label=f,this},a.prototype.graph=function(){return this._label},a.prototype.setDefaultNodeLabel=function(f){return t.isFunction(f)||(f=t.constant(f)),this._defaultNodeLabelFn=f,this},a.prototype.nodeCount=function(){return this._nodeCount},a.prototype.nodes=function(){return t.keys(this._nodes)},a.prototype.sources=function(){var f=this;return t.filter(this.nodes(),function(c){return t.isEmpty(f._in[c])})},a.prototype.sinks=function(){var f=this;return t.filter(this.nodes(),function(c){return t.isEmpty(f._out[c])})},a.prototype.setNodes=function(f,c){var h=arguments,d=this;return t.each(f,function(v){h.length>1?d.setNode(v,c):d.setNode(v)}),this},a.prototype.setNode=function(f,c){return t.has(this._nodes,f)?(arguments.length>1&&(this._nodes[f]=c),this):(this._nodes[f]=arguments.length>1?c:this._defaultNodeLabelFn(f),this._isCompound&&(this._parent[f]=r,this._children[f]={},this._children[r][f]=!0),this._in[f]={},this._preds[f]={},this._out[f]={},this._sucs[f]={},++this._nodeCount,this)},a.prototype.node=function(f){return this._nodes[f]},a.prototype.hasNode=function(f){return t.has(this._nodes,f)},a.prototype.removeNode=function(f){var c=this;if(t.has(this._nodes,f)){var h=function(d){c.removeEdge(c._edgeObjs[d])};delete this._nodes[f],this._isCompound&&(this._removeFromParentsChildList(f),delete this._parent[f],t.each(this.children(f),function(d){c.setParent(d)}),delete this._children[f]),t.each(t.keys(this._in[f]),h),delete this._in[f],delete this._preds[f],t.each(t.keys(this._out[f]),h),delete this._out[f],delete this._sucs[f],--this._nodeCount}return this},a.prototype.setParent=function(f,c){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(t.isUndefined(c))c=r;else{c+="";for(var h=c;!t.isUndefined(h);h=this.parent(h))if(h===f)throw new Error("Setting "+c+" as parent of "+f+" would create a cycle");this.setNode(c)}return this.setNode(f),this._removeFromParentsChildList(f),this._parent[f]=c,this._children[c][f]=!0,this},a.prototype._removeFromParentsChildList=function(f){delete this._children[this._parent[f]][f]},a.prototype.parent=function(f){if(this._isCompound){var c=this._parent[f];if(c!==r)return c}},a.prototype.children=function(f){if(t.isUndefined(f)&&(f=r),this._isCompound){var c=this._children[f];if(c)return t.keys(c)}else{if(f===r)return this.nodes();if(this.hasNode(f))return[]}},a.prototype.predecessors=function(f){var c=this._preds[f];if(c)return t.keys(c)},a.prototype.successors=function(f){var c=this._sucs[f];if(c)return t.keys(c)},a.prototype.neighbors=function(f){var c=this.predecessors(f);if(c)return t.union(c,this.successors(f))},a.prototype.isLeaf=function(f){var c;return this.isDirected()?c=this.successors(f):c=this.neighbors(f),c.length===0},a.prototype.filterNodes=function(f){var c=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});c.setGraph(this.graph());var h=this;t.each(this._nodes,function(g,p){f(p)&&c.setNode(p,g)}),t.each(this._edgeObjs,function(g){c.hasNode(g.v)&&c.hasNode(g.w)&&c.setEdge(g,h.edge(g))});var d={};function v(g){var p=h.parent(g);return p===void 0||c.hasNode(p)?(d[g]=p,p):p in d?d[p]:v(p)}return this._isCompound&&t.each(c.nodes(),function(g){c.setParent(g,v(g))}),c},a.prototype.setDefaultEdgeLabel=function(f){return t.isFunction(f)||(f=t.constant(f)),this._defaultEdgeLabelFn=f,this},a.prototype.edgeCount=function(){return this._edgeCount},a.prototype.edges=function(){return t.values(this._edgeObjs)},a.prototype.setPath=function(f,c){var h=this,d=arguments;return t.reduce(f,function(v,g){return d.length>1?h.setEdge(v,g,c):h.setEdge(v,g),g}),this},a.prototype.setEdge=function(){var f,c,h,d,v=!1,g=arguments[0];typeof g=="object"&&g!==null&&"v"in g?(f=g.v,c=g.w,h=g.name,arguments.length===2&&(d=arguments[1],v=!0)):(f=g,c=arguments[1],h=arguments[3],arguments.length>2&&(d=arguments[2],v=!0)),f=""+f,c=""+c,t.isUndefined(h)||(h=""+h);var p=o(this._isDirected,f,c,h);if(t.has(this._edgeLabels,p))return v&&(this._edgeLabels[p]=d),this;if(!t.isUndefined(h)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(f),this.setNode(c),this._edgeLabels[p]=v?d:this._defaultEdgeLabelFn(f,c,h);var y=u(this._isDirected,f,c,h);return f=y.v,c=y.w,Object.freeze(y),this._edgeObjs[p]=y,i(this._preds[c],f),i(this._sucs[f],c),this._in[c][p]=y,this._out[f][p]=y,this._edgeCount++,this},a.prototype.edge=function(f,c,h){var d=arguments.length===1?l(this._isDirected,arguments[0]):o(this._isDirected,f,c,h);return this._edgeLabels[d]},a.prototype.hasEdge=function(f,c,h){var d=arguments.length===1?l(this._isDirected,arguments[0]):o(this._isDirected,f,c,h);return t.has(this._edgeLabels,d)},a.prototype.removeEdge=function(f,c,h){var d=arguments.length===1?l(this._isDirected,arguments[0]):o(this._isDirected,f,c,h),v=this._edgeObjs[d];return v&&(f=v.v,c=v.w,delete this._edgeLabels[d],delete this._edgeObjs[d],s(this._preds[c],f),s(this._sucs[f],c),delete this._in[c][d],delete this._out[f][d],this._edgeCount--),this},a.prototype.inEdges=function(f,c){var h=this._in[f];if(h){var d=t.values(h);return c?t.filter(d,function(v){return v.v===c}):d}},a.prototype.outEdges=function(f,c){var h=this._out[f];if(h){var d=t.values(h);return c?t.filter(d,function(v){return v.w===c}):d}},a.prototype.nodeEdges=function(f,c){var h=this.inEdges(f,c);if(h)return h.concat(this.outEdges(f,c))};function i(f,c){f[c]?f[c]++:f[c]=1}function s(f,c){--f[c]||delete f[c]}function o(f,c,h,d){var v=""+c,g=""+h;if(!f&&v>g){var p=v;v=g,g=p}return v+n+g+n+(t.isUndefined(d)?e:d)}function u(f,c,h,d){var v=""+c,g=""+h;if(!f&&v>g){var p=v;v=g,g=p}var y={v,w:g};return d&&(y.name=d),y}function l(f,c){return o(f,c.v,c.w,c.name)}return ph}var yh,W1;function Kk(){return W1||(W1=1,yh="2.1.8"),yh}var mh,X1;function jk(){return X1||(X1=1,mh={Graph:fg(),version:Kk()}),mh}var bh,K1;function Zk(){if(K1)return bh;K1=1;var t=Ht(),e=fg();bh={write:r,read:i};function r(s){var o={options:{directed:s.isDirected(),multigraph:s.isMultigraph(),compound:s.isCompound()},nodes:n(s),edges:a(s)};return t.isUndefined(s.graph())||(o.value=t.clone(s.graph())),o}function n(s){return t.map(s.nodes(),function(o){var u=s.node(o),l=s.parent(o),f={v:o};return t.isUndefined(u)||(f.value=u),t.isUndefined(l)||(f.parent=l),f})}function a(s){return t.map(s.edges(),function(o){var u=s.edge(o),l={v:o.v,w:o.w};return t.isUndefined(o.name)||(l.name=o.name),t.isUndefined(u)||(l.value=u),l})}function i(s){var o=new e(s.options).setGraph(s.value);return t.each(s.nodes,function(u){o.setNode(u.v,u.value),u.parent&&o.setParent(u.v,u.parent)}),t.each(s.edges,function(u){o.setEdge({v:u.v,w:u.w,name:u.name},u.value)}),o}return bh}var wh,j1;function Qk(){if(j1)return wh;j1=1;var t=Ht();wh=e;function e(r){var n={},a=[],i;function s(o){t.has(n,o)||(n[o]=!0,i.push(o),t.each(r.successors(o),s),t.each(r.predecessors(o),s))}return t.each(r.nodes(),function(o){i=[],s(o),i.length&&a.push(i)}),a}return wh}var Eh,Z1;function kC(){if(Z1)return Eh;Z1=1;var t=Ht();Eh=e;function e(){this._arr=[],this._keyIndices={}}return e.prototype.size=function(){return this._arr.length},e.prototype.keys=function(){return this._arr.map(function(r){return r.key})},e.prototype.has=function(r){return t.has(this._keyIndices,r)},e.prototype.priority=function(r){var n=this._keyIndices[r];if(n!==void 0)return this._arr[n].priority},e.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},e.prototype.add=function(r,n){var a=this._keyIndices;if(r=String(r),!t.has(a,r)){var i=this._arr,s=i.length;return a[r]=s,i.push({key:r,priority:n}),this._decrease(s),!0}return!1},e.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var r=this._arr.pop();return delete this._keyIndices[r.key],this._heapify(0),r.key},e.prototype.decrease=function(r,n){var a=this._keyIndices[r];if(n>this._arr[a].priority)throw new Error("New priority is greater than current priority. Key: "+r+" Old: "+this._arr[a].priority+" New: "+n);this._arr[a].priority=n,this._decrease(a)},e.prototype._heapify=function(r){var n=this._arr,a=2*r,i=a+1,s=r;a<n.length&&(s=n[a].priority<n[s].priority?a:s,i<n.length&&(s=n[i].priority<n[s].priority?i:s),s!==r&&(this._swap(r,s),this._heapify(s)))},e.prototype._decrease=function(r){for(var n=this._arr,a=n[r].priority,i;r!==0&&(i=r>>1,!(n[i].priority<a));)this._swap(r,i),r=i},e.prototype._swap=function(r,n){var a=this._arr,i=this._keyIndices,s=a[r],o=a[n];a[r]=o,a[n]=s,i[o.key]=r,i[s.key]=n},Eh}var xh,Q1;function NC(){if(Q1)return xh;Q1=1;var t=Ht(),e=kC();xh=n;var r=t.constant(1);function n(i,s,o,u){return a(i,String(s),o||r,u||function(l){return i.outEdges(l)})}function a(i,s,o,u){var l={},f=new e,c,h,d=function(v){var g=v.v!==c?v.v:v.w,p=l[g],y=o(v),m=h.distance+y;if(y<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+v+" Weight: "+y);m<p.distance&&(p.distance=m,p.predecessor=c,f.decrease(g,m))};for(i.nodes().forEach(function(v){var g=v===s?0:Number.POSITIVE_INFINITY;l[v]={distance:g},f.add(v,g)});f.size()>0&&(c=f.removeMin(),h=l[c],h.distance!==Number.POSITIVE_INFINITY);)u(c).forEach(d);return l}return xh}var Th,J1;function Jk(){if(J1)return Th;J1=1;var t=NC(),e=Ht();Th=r;function r(n,a,i){return e.transform(n.nodes(),function(s,o){s[o]=t(n,o,a,i)},{})}return Th}var Ch,ew;function BC(){if(ew)return Ch;ew=1;var t=Ht();Ch=e;function e(r){var n=0,a=[],i={},s=[];function o(u){var l=i[u]={onStack:!0,lowlink:n,index:n++};if(a.push(u),r.successors(u).forEach(function(h){t.has(i,h)?i[h].onStack&&(l.lowlink=Math.min(l.lowlink,i[h].index)):(o(h),l.lowlink=Math.min(l.lowlink,i[h].lowlink))}),l.lowlink===l.index){var f=[],c;do c=a.pop(),i[c].onStack=!1,f.push(c);while(u!==c);s.push(f)}}return r.nodes().forEach(function(u){t.has(i,u)||o(u)}),s}return Ch}var Sh,tw;function eN(){if(tw)return Sh;tw=1;var t=Ht(),e=BC();Sh=r;function r(n){return t.filter(e(n),function(a){return a.length>1||a.length===1&&n.hasEdge(a[0],a[0])})}return Sh}var Ah,rw;function tN(){if(rw)return Ah;rw=1;var t=Ht();Ah=r;var e=t.constant(1);function r(a,i,s){return n(a,i||e,s||function(o){return a.outEdges(o)})}function n(a,i,s){var o={},u=a.nodes();return u.forEach(function(l){o[l]={},o[l][l]={distance:0},u.forEach(function(f){l!==f&&(o[l][f]={distance:Number.POSITIVE_INFINITY})}),s(l).forEach(function(f){var c=f.v===l?f.w:f.v,h=i(f);o[l][c]={distance:h,predecessor:l}})}),u.forEach(function(l){var f=o[l];u.forEach(function(c){var h=o[c];u.forEach(function(d){var v=h[l],g=f[d],p=h[d],y=v.distance+g.distance;y<p.distance&&(p.distance=y,p.predecessor=g.predecessor)})})}),o}return Ah}var Ih,nw;function FC(){if(nw)return Ih;nw=1;var t=Ht();Ih=e,e.CycleException=r;function e(n){var a={},i={},s=[];function o(u){if(t.has(i,u))throw new r;t.has(a,u)||(i[u]=!0,a[u]=!0,t.each(n.predecessors(u),o),delete i[u],s.push(u))}if(t.each(n.sinks(),o),t.size(a)!==n.nodeCount())throw new r;return s}function r(){}return r.prototype=new Error,Ih}var Rh,aw;function rN(){if(aw)return Rh;aw=1;var t=FC();Rh=e;function e(r){try{t(r)}catch(n){if(n instanceof t.CycleException)return!1;throw n}return!0}return Rh}var Dh,iw;function qC(){if(iw)return Dh;iw=1;var t=Ht();Dh=e;function e(n,a,i){t.isArray(a)||(a=[a]);var s=(n.isDirected()?n.successors:n.neighbors).bind(n),o=[],u={};return t.each(a,function(l){if(!n.hasNode(l))throw new Error("Graph does not have node: "+l);r(n,l,i==="post",u,s,o)}),o}function r(n,a,i,s,o,u){t.has(s,a)||(s[a]=!0,i||u.push(a),t.each(o(a),function(l){r(n,l,i,s,o,u)}),i&&u.push(a))}return Dh}var _h,sw;function nN(){if(sw)return _h;sw=1;var t=qC();_h=e;function e(r,n){return t(r,n,"post")}return _h}var Lh,ow;function aN(){if(ow)return Lh;ow=1;var t=qC();Lh=e;function e(r,n){return t(r,n,"pre")}return Lh}var Mh,uw;function iN(){if(uw)return Mh;uw=1;var t=Ht(),e=fg(),r=kC();Mh=n;function n(a,i){var s=new e,o={},u=new r,l;function f(h){var d=h.v===l?h.w:h.v,v=u.priority(d);if(v!==void 0){var g=i(h);g<v&&(o[d]=l,u.decrease(d,g))}}if(a.nodeCount()===0)return s;t.each(a.nodes(),function(h){u.add(h,Number.POSITIVE_INFINITY),s.setNode(h)}),u.decrease(a.nodes()[0],0);for(var c=!1;u.size()>0;){if(l=u.removeMin(),t.has(o,l))s.setEdge(l,o[l]);else{if(c)throw new Error("Input graph is not connected: "+a);c=!0}a.nodeEdges(l).forEach(f)}return s}return Mh}var Oh,lw;function sN(){return lw||(lw=1,Oh={components:Qk(),dijkstra:NC(),dijkstraAll:Jk(),findCycles:eN(),floydWarshall:tN(),isAcyclic:rN(),postorder:nN(),preorder:aN(),prim:iN(),tarjan:BC(),topsort:FC()}),Oh}var Ph,fw;function oN(){if(fw)return Ph;fw=1;var t=jk();return Ph={Graph:t.Graph,json:Zk(),alg:sN(),version:t.version},Ph}var as;if(typeof Xv=="function")try{as=oN()}catch{}as||(as=window.graphlib);var Jt=as,kh,cw;function uN(){if(cw)return kh;cw=1;var t=fC(),e=1,r=4;function n(a){return t(a,e|r)}return kh=n,kh}var Nh,hw;function js(){if(hw)return Nh;hw=1;var t=ua(),e=Cr(),r=zs(),n=Ut();function a(i,s,o){if(!n(o))return!1;var u=typeof s;return(u=="number"?e(o)&&r(s,o.length):u=="string"&&s in o)?t(o[s],i):!1}return Nh=a,Nh}var Bh,dw;function lN(){if(dw)return Bh;dw=1;var t=Ks(),e=ua(),r=js(),n=Ln(),a=Object.prototype,i=a.hasOwnProperty,s=t(function(o,u){o=Object(o);var l=-1,f=u.length,c=f>2?u[2]:void 0;for(c&&r(u[0],u[1],c)&&(f=1);++l<f;)for(var h=u[l],d=n(h),v=-1,g=d.length;++v<g;){var p=d[v],y=o[p];(y===void 0||e(y,a[p])&&!i.call(o,p))&&(o[p]=h[p])}return o});return Bh=s,Bh}var Fh,vw;function fN(){if(vw)return Fh;vw=1;var t=Sr(),e=Cr(),r=nn();function n(a){return function(i,s,o){var u=Object(i);if(!e(i)){var l=t(s,3);i=r(i),s=function(c){return l(u[c],c,u)}}var f=a(i,s,o);return f>-1?u[l?i[f]:f]:void 0}}return Fh=n,Fh}var qh,gw;function cN(){if(gw)return qh;gw=1;var t=/\s/;function e(r){for(var n=r.length;n--&&t.test(r.charAt(n)););return n}return qh=e,qh}var Gh,pw;function hN(){if(pw)return Gh;pw=1;var t=cN(),e=/^\s+/;function r(n){return n&&n.slice(0,t(n)+1).replace(e,"")}return Gh=r,Gh}var zh,yw;function dN(){if(yw)return zh;yw=1;var t=hN(),e=Ut(),r=ha(),n=NaN,a=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,s=/^0o[0-7]+$/i,o=parseInt;function u(l){if(typeof l=="number")return l;if(r(l))return n;if(e(l)){var f=typeof l.valueOf=="function"?l.valueOf():l;l=e(f)?f+"":f}if(typeof l!="string")return l===0?l:+l;l=t(l);var c=i.test(l);return c||s.test(l)?o(l.slice(2),c?2:8):a.test(l)?n:+l}return zh=u,zh}var $h,mw;function GC(){if(mw)return $h;mw=1;var t=dN(),e=1/0,r=17976931348623157e292;function n(a){if(!a)return a===0?a:0;if(a=t(a),a===e||a===-e){var i=a<0?-1:1;return i*r}return a===a?a:0}return $h=n,$h}var Vh,bw;function vN(){if(bw)return Vh;bw=1;var t=GC();function e(r){var n=t(r),a=n%1;return n===n?a?n-a:n:0}return Vh=e,Vh}var Uh,ww;function gN(){if(ww)return Uh;ww=1;var t=MC(),e=Sr(),r=vN(),n=Math.max;function a(i,s,o){var u=i==null?0:i.length;if(!u)return-1;var l=o==null?0:r(o);return l<0&&(l=n(u+l,0)),t(i,e(s,3),l)}return Uh=a,Uh}var Hh,Ew;function pN(){if(Ew)return Hh;Ew=1;var t=fN(),e=gN(),r=t(e);return Hh=r,Hh}var Yh,xw;function zC(){if(xw)return Yh;xw=1;var t=lg();function e(r){var n=r==null?0:r.length;return n?t(r,1):[]}return Yh=e,Yh}var Wh,Tw;function yN(){if(Tw)return Wh;Tw=1;var t=ig(),e=cC(),r=Ln();function n(a,i){return a==null?a:t(a,e(i),r)}return Wh=n,Wh}var Xh,Cw;function mN(){if(Cw)return Xh;Cw=1;function t(e){var r=e==null?0:e.length;return r?e[r-1]:void 0}return Xh=t,Xh}var Kh,Sw;function bN(){if(Sw)return Kh;Sw=1;var t=qs(),e=sg(),r=Sr();function n(a,i){var s={};return i=r(i,3),e(a,function(o,u,l){t(s,u,i(o,u,l))}),s}return Kh=n,Kh}var jh,Aw;function cg(){if(Aw)return jh;Aw=1;var t=ha();function e(r,n,a){for(var i=-1,s=r.length;++i<s;){var o=r[i],u=n(o);if(u!=null&&(l===void 0?u===u&&!t(u):a(u,l)))var l=u,f=o}return f}return jh=e,jh}var Zh,Iw;function wN(){if(Iw)return Zh;Iw=1;function t(e,r){return e>r}return Zh=t,Zh}var Qh,Rw;function EN(){if(Rw)return Qh;Rw=1;var t=cg(),e=wN(),r=Mn();function n(a){return a&&a.length?t(a,r,e):void 0}return Qh=n,Qh}var Jh,Dw;function $C(){if(Dw)return Jh;Dw=1;var t=qs(),e=ua();function r(n,a,i){(i!==void 0&&!e(n[a],i)||i===void 0&&!(a in n))&&t(n,a,i)}return Jh=r,Jh}var ed,_w;function xN(){if(_w)return ed;_w=1;var t=Dn(),e=Us(),r=ur(),n="[object Object]",a=Function.prototype,i=Object.prototype,s=a.toString,o=i.hasOwnProperty,u=s.call(Object);function l(f){if(!r(f)||t(f)!=n)return!1;var c=e(f);if(c===null)return!0;var h=o.call(c,"constructor")&&c.constructor;return typeof h=="function"&&h instanceof h&&s.call(h)==u}return ed=l,ed}var td,Lw;function VC(){if(Lw)return td;Lw=1;function t(e,r){if(!(r==="constructor"&&typeof e[r]=="function")&&r!="__proto__")return e[r]}return td=t,td}var rd,Mw;function TN(){if(Mw)return rd;Mw=1;var t=ui(),e=Ln();function r(n){return t(n,e(n))}return rd=r,rd}var nd,Ow;function CN(){if(Ow)return nd;Ow=1;var t=$C(),e=QT(),r=oC(),n=JT(),a=lC(),i=li(),s=it(),o=OC(),u=fa(),l=oi(),f=Ut(),c=xN(),h=fi(),d=VC(),v=TN();function g(p,y,m,b,E,T,I){var w=d(p,m),x=d(y,m),C=I.get(x);if(C){t(p,m,C);return}var S=T?T(w,x,m+"",p,y,I):void 0,A=S===void 0;if(A){var R=s(x),D=!R&&u(x),_=!R&&!D&&h(x);S=x,R||D||_?s(w)?S=w:o(w)?S=n(w):D?(A=!1,S=e(x,!0)):_?(A=!1,S=r(x,!0)):S=[]:c(x)||i(x)?(S=w,i(w)?S=v(w):(!f(w)||l(w))&&(S=a(x))):A=!1}A&&(I.set(x,S),E(S,x,b,T,I),I.delete(x)),t(p,m,S)}return nd=g,nd}var ad,Pw;function SN(){if(Pw)return ad;Pw=1;var t=Fs(),e=$C(),r=ig(),n=CN(),a=Ut(),i=Ln(),s=VC();function o(u,l,f,c,h){u!==l&&r(l,function(d,v){if(h||(h=new t),a(d))n(u,l,v,f,o,c,h);else{var g=c?c(s(u,v),d,v+"",u,l,h):void 0;g===void 0&&(g=d),e(u,v,g)}},i)}return ad=o,ad}var id,kw;function AN(){if(kw)return id;kw=1;var t=Ks(),e=js();function r(n){return t(function(a,i){var s=-1,o=i.length,u=o>1?i[o-1]:void 0,l=o>2?i[2]:void 0;for(u=n.length>3&&typeof u=="function"?(o--,u):void 0,l&&e(i[0],i[1],l)&&(u=o<3?void 0:u,o=1),a=Object(a);++s<o;){var f=i[s];f&&n(a,f,s,u)}return a})}return id=r,id}var sd,Nw;function IN(){if(Nw)return sd;Nw=1;var t=SN(),e=AN(),r=e(function(n,a,i){t(n,a,i)});return sd=r,sd}var od,Bw;function UC(){if(Bw)return od;Bw=1;function t(e,r){return e<r}return od=t,od}var ud,Fw;function RN(){if(Fw)return ud;Fw=1;var t=cg(),e=UC(),r=Mn();function n(a){return a&&a.length?t(a,r,e):void 0}return ud=n,ud}var ld,qw;function DN(){if(qw)return ld;qw=1;var t=cg(),e=Sr(),r=UC();function n(a,i){return a&&a.length?t(a,e(i,2),r):void 0}return ld=n,ld}var fd,Gw;function _N(){if(Gw)return fd;Gw=1;var t=Qt(),e=function(){return t.Date.now()};return fd=e,fd}var cd,zw;function LN(){if(zw)return cd;zw=1;var t=Gs(),e=Ws(),r=zs(),n=Ut(),a=ci();function i(s,o,u,l){if(!n(s))return s;o=e(o,s);for(var f=-1,c=o.length,h=c-1,d=s;d!=null&&++f<c;){var v=a(o[f]),g=u;if(v==="__proto__"||v==="constructor"||v==="prototype")return s;if(f!=h){var p=d[v];g=l?l(p,v,d):void 0,g===void 0&&(g=n(p)?p:r(o[f+1])?[]:{})}t(d,v,g),d=d[v]}return s}return cd=i,cd}var hd,$w;function MN(){if($w)return hd;$w=1;var t=Xs(),e=LN(),r=Ws();function n(a,i,s){for(var o=-1,u=i.length,l={};++o<u;){var f=i[o],c=t(a,f);s(c,f)&&e(l,r(f,a),c)}return l}return hd=n,hd}var dd,Vw;function ON(){if(Vw)return dd;Vw=1;var t=MN(),e=xC();function r(n,a){return t(n,a,function(i,s){return e(n,s)})}return dd=r,dd}var vd,Uw;function PN(){if(Uw)return vd;Uw=1;var t=zC(),e=_C(),r=LC();function n(a){return r(e(a,void 0,t),a+"")}return vd=n,vd}var gd,Hw;function kN(){if(Hw)return gd;Hw=1;var t=ON(),e=PN(),r=e(function(n,a){return n==null?{}:t(n,a)});return gd=r,gd}var pd,Yw;function NN(){if(Yw)return pd;Yw=1;var t=Math.ceil,e=Math.max;function r(n,a,i,s){for(var o=-1,u=e(t((a-n)/(i||1)),0),l=Array(u);u--;)l[s?u:++o]=n,n+=i;return l}return pd=r,pd}var yd,Ww;function BN(){if(Ww)return yd;Ww=1;var t=NN(),e=js(),r=GC();function n(a){return function(i,s,o){return o&&typeof o!="number"&&e(i,s,o)&&(s=o=void 0),i=r(i),s===void 0?(s=i,i=0):s=r(s),o=o===void 0?i<s?1:-1:r(o),t(i,s,o,a)}}return yd=n,yd}var md,Xw;function FN(){if(Xw)return md;Xw=1;var t=BN(),e=t();return md=e,md}var bd,Kw;function qN(){if(Kw)return bd;Kw=1;function t(e,r){var n=e.length;for(e.sort(r);n--;)e[n]=e[n].value;return e}return bd=t,bd}var wd,jw;function GN(){if(jw)return wd;jw=1;var t=ha();function e(r,n){if(r!==n){var a=r!==void 0,i=r===null,s=r===r,o=t(r),u=n!==void 0,l=n===null,f=n===n,c=t(n);if(!l&&!c&&!o&&r>n||o&&u&&f&&!l&&!c||i&&u&&f||!a&&f||!s)return 1;if(!i&&!o&&!c&&r<n||c&&a&&s&&!i&&!o||l&&a&&s||!u&&s||!f)return-1}return 0}return wd=e,wd}var Ed,Zw;function zN(){if(Zw)return Ed;Zw=1;var t=GN();function e(r,n,a){for(var i=-1,s=r.criteria,o=n.criteria,u=s.length,l=a.length;++i<u;){var f=t(s[i],o[i]);if(f){if(i>=l)return f;var c=a[i];return f*(c=="desc"?-1:1)}}return r.index-n.index}return Ed=e,Ed}var xd,Qw;function $N(){if(Qw)return xd;Qw=1;var t=Ys(),e=Xs(),r=Sr(),n=IC(),a=qN(),i=$s(),s=zN(),o=Mn(),u=it();function l(f,c,h){c.length?c=t(c,function(g){return u(g)?function(p){return e(p,g.length===1?g[0]:g)}:g}):c=[o];var d=-1;c=t(c,i(r));var v=n(f,function(g,p,y){var m=t(c,function(b){return b(g)});return{criteria:m,index:++d,value:g}});return a(v,function(g,p){return s(g,p,h)})}return xd=l,xd}var Td,Jw;function VN(){if(Jw)return Td;Jw=1;var t=lg(),e=$N(),r=Ks(),n=js(),a=r(function(i,s){if(i==null)return[];var o=s.length;return o>1&&n(i,s[0],s[1])?s=[]:o>2&&n(s[0],s[1],s[2])&&(s=[s[0]]),e(i,t(s,1),[])});return Td=a,Td}var Cd,eE;function UN(){if(eE)return Cd;eE=1;var t=wC(),e=0;function r(n){var a=++e;return t(n)+a}return Cd=r,Cd}var Sd,tE;function HN(){if(tE)return Sd;tE=1;function t(e,r,n){for(var a=-1,i=e.length,s=r.length,o={};++a<i;){var u=a<s?r[a]:void 0;n(o,e[a],u)}return o}return Sd=t,Sd}var Ad,rE;function YN(){if(rE)return Ad;rE=1;var t=Gs(),e=HN();function r(n,a){return e(n||[],a||[],t)}return Ad=r,Ad}var is;if(typeof Xv=="function")try{is={cloneDeep:uN(),constant:ag(),defaults:lN(),each:dC(),filter:CC(),find:pN(),flatten:zC(),forEach:hC(),forIn:yN(),has:SC(),isUndefined:AC(),last:mN(),map:RC(),mapValues:bN(),max:EN(),merge:IN(),min:RN(),minBy:DN(),now:_N(),pick:kN(),range:FN(),reduce:DC(),sortBy:VN(),uniqueId:UN(),values:PC(),zipObject:YN()}}catch{}is||(is=window._);var Ze=is,WN=Zs;function Zs(){var t={};t._next=t._prev=t,this._sentinel=t}Zs.prototype.dequeue=function(){var t=this._sentinel,e=t._prev;if(e!==t)return HC(e),e};Zs.prototype.enqueue=function(t){var e=this._sentinel;t._prev&&t._next&&HC(t),t._next=e._next,e._next._prev=t,e._next=t,t._prev=e};Zs.prototype.toString=function(){for(var t=[],e=this._sentinel,r=e._prev;r!==e;)t.push(JSON.stringify(r,XN)),r=r._prev;return"["+t.join(", ")+"]"};function HC(t){t._prev._next=t._next,t._next._prev=t._prev,delete t._next,delete t._prev}function XN(t,e){if(t!=="_next"&&t!=="_prev")return e}var gr=Ze,KN=Jt.Graph,jN=WN,ZN=JN,QN=gr.constant(1);function JN(t,e){if(t.nodeCount()<=1)return[];var r=tB(t,e||QN),n=eB(r.graph,r.buckets,r.zeroIdx);return gr.flatten(gr.map(n,function(a){return t.outEdges(a.v,a.w)}),!0)}function eB(t,e,r){for(var n=[],a=e[e.length-1],i=e[0],s;t.nodeCount();){for(;s=i.dequeue();)Id(t,e,r,s);for(;s=a.dequeue();)Id(t,e,r,s);if(t.nodeCount()){for(var o=e.length-2;o>0;--o)if(s=e[o].dequeue(),s){n=n.concat(Id(t,e,r,s,!0));break}}}return n}function Id(t,e,r,n,a){var i=a?[]:void 0;return gr.forEach(t.inEdges(n.v),function(s){var o=t.edge(s),u=t.node(s.v);a&&i.push({v:s.v,w:s.w}),u.out-=o,uv(e,r,u)}),gr.forEach(t.outEdges(n.v),function(s){var o=t.edge(s),u=s.w,l=t.node(u);l.in-=o,uv(e,r,l)}),t.removeNode(n.v),i}function tB(t,e){var r=new KN,n=0,a=0;gr.forEach(t.nodes(),function(o){r.setNode(o,{v:o,in:0,out:0})}),gr.forEach(t.edges(),function(o){var u=r.edge(o.v,o.w)||0,l=e(o),f=u+l;r.setEdge(o.v,o.w,f),a=Math.max(a,r.node(o.v).out+=l),n=Math.max(n,r.node(o.w).in+=l)});var i=gr.range(a+n+3).map(function(){return new jN}),s=n+1;return gr.forEach(r.nodes(),function(o){uv(i,s,r.node(o))}),{graph:r,buckets:i,zeroIdx:s}}function uv(t,e,r){r.out?r.in?t[r.out-r.in+e].enqueue(r):t[t.length-1].enqueue(r):t[0].enqueue(r)}var pn=Ze,rB=ZN,nB={run:aB,undo:sB};function aB(t){var e=t.graph().acyclicer==="greedy"?rB(t,r(t)):iB(t);pn.forEach(e,function(n){var a=t.edge(n);t.removeEdge(n),a.forwardName=n.name,a.reversed=!0,t.setEdge(n.w,n.v,a,pn.uniqueId("rev"))});function r(n){return function(a){return n.edge(a).weight}}}function iB(t){var e=[],r={},n={};function a(i){pn.has(n,i)||(n[i]=!0,r[i]=!0,pn.forEach(t.outEdges(i),function(s){pn.has(r,s.w)?e.push(s):a(s.w)}),delete r[i])}return pn.forEach(t.nodes(),a),e}function sB(t){pn.forEach(t.edges(),function(e){var r=t.edge(e);if(r.reversed){t.removeEdge(e);var n=r.forwardName;delete r.reversed,delete r.forwardName,t.setEdge(e.w,e.v,r,n)}})}var ze=Ze,YC=Jt.Graph,kt={addDummyNode:WC,simplify:oB,asNonCompoundGraph:uB,successorWeights:lB,predecessorWeights:fB,intersectRect:cB,buildLayerMatrix:hB,normalizeRanks:dB,removeEmptyRanks:vB,addBorderNode:gB,maxRank:XC,partition:pB,time:yB,notime:mB};function WC(t,e,r,n){var a;do a=ze.uniqueId(n);while(t.hasNode(a));return r.dummy=e,t.setNode(a,r),a}function oB(t){var e=new YC().setGraph(t.graph());return ze.forEach(t.nodes(),function(r){e.setNode(r,t.node(r))}),ze.forEach(t.edges(),function(r){var n=e.edge(r.v,r.w)||{weight:0,minlen:1},a=t.edge(r);e.setEdge(r.v,r.w,{weight:n.weight+a.weight,minlen:Math.max(n.minlen,a.minlen)})}),e}function uB(t){var e=new YC({multigraph:t.isMultigraph()}).setGraph(t.graph());return ze.forEach(t.nodes(),function(r){t.children(r).length||e.setNode(r,t.node(r))}),ze.forEach(t.edges(),function(r){e.setEdge(r,t.edge(r))}),e}function lB(t){var e=ze.map(t.nodes(),function(r){var n={};return ze.forEach(t.outEdges(r),function(a){n[a.w]=(n[a.w]||0)+t.edge(a).weight}),n});return ze.zipObject(t.nodes(),e)}function fB(t){var e=ze.map(t.nodes(),function(r){var n={};return ze.forEach(t.inEdges(r),function(a){n[a.v]=(n[a.v]||0)+t.edge(a).weight}),n});return ze.zipObject(t.nodes(),e)}function cB(t,e){var r=t.x,n=t.y,a=e.x-r,i=e.y-n,s=t.width/2,o=t.height/2;if(!a&&!i)throw new Error("Not possible to find intersection inside of the rectangle");var u,l;return Math.abs(i)*s>Math.abs(a)*o?(i<0&&(o=-o),u=o*a/i,l=o):(a<0&&(s=-s),u=s,l=s*i/a),{x:r+u,y:n+l}}function hB(t){var e=ze.map(ze.range(XC(t)+1),function(){return[]});return ze.forEach(t.nodes(),function(r){var n=t.node(r),a=n.rank;ze.isUndefined(a)||(e[a][n.order]=r)}),e}function dB(t){var e=ze.min(ze.map(t.nodes(),function(r){return t.node(r).rank}));ze.forEach(t.nodes(),function(r){var n=t.node(r);ze.has(n,"rank")&&(n.rank-=e)})}function vB(t){var e=ze.min(ze.map(t.nodes(),function(i){return t.node(i).rank})),r=[];ze.forEach(t.nodes(),function(i){var s=t.node(i).rank-e;r[s]||(r[s]=[]),r[s].push(i)});var n=0,a=t.graph().nodeRankFactor;ze.forEach(r,function(i,s){ze.isUndefined(i)&&s%a!==0?--n:n&&ze.forEach(i,function(o){t.node(o).rank+=n})})}function gB(t,e,r,n){var a={width:0,height:0};return arguments.length>=4&&(a.rank=r,a.order=n),WC(t,"border",a,e)}function XC(t){return ze.max(ze.map(t.nodes(),function(e){var r=t.node(e).rank;if(!ze.isUndefined(r))return r}))}function pB(t,e){var r={lhs:[],rhs:[]};return ze.forEach(t,function(n){e(n)?r.lhs.push(n):r.rhs.push(n)}),r}function yB(t,e){var r=ze.now();try{return e()}finally{console.log(t+" time: "+(ze.now()-r)+"ms")}}function mB(t,e){return e()}var KC=Ze,bB=kt,wB={run:EB,undo:TB};function EB(t){t.graph().dummyChains=[],KC.forEach(t.edges(),function(e){xB(t,e)})}function xB(t,e){var r=e.v,n=t.node(r).rank,a=e.w,i=t.node(a).rank,s=e.name,o=t.edge(e),u=o.labelRank;if(i!==n+1){t.removeEdge(e);var l,f,c;for(c=0,++n;n<i;++c,++n)o.points=[],f={width:0,height:0,edgeLabel:o,edgeObj:e,rank:n},l=bB.addDummyNode(t,"edge",f,"_d"),n===u&&(f.width=o.width,f.height=o.height,f.dummy="edge-label",f.labelpos=o.labelpos),t.setEdge(r,l,{weight:o.weight},s),c===0&&t.graph().dummyChains.push(l),r=l;t.setEdge(r,a,{weight:o.weight},s)}}function TB(t){KC.forEach(t.graph().dummyChains,function(e){var r=t.node(e),n=r.edgeLabel,a;for(t.setEdge(r.edgeObj,n);r.dummy;)a=t.successors(e)[0],t.removeNode(e),n.points.push({x:r.x,y:r.y}),r.dummy==="edge-label"&&(n.x=r.x,n.y=r.y,n.width=r.width,n.height=r.height),e=a,r=t.node(e)})}var Ii=Ze,Qs={longestPath:CB,slack:SB};function CB(t){var e={};function r(n){var a=t.node(n);if(Ii.has(e,n))return a.rank;e[n]=!0;var i=Ii.min(Ii.map(t.outEdges(n),function(s){return r(s.w)-t.edge(s).minlen}));return(i===Number.POSITIVE_INFINITY||i===void 0||i===null)&&(i=0),a.rank=i}Ii.forEach(t.sources(),r)}function SB(t,e){return t.node(e.w).rank-t.node(e.v).rank-t.edge(e).minlen}var ss=Ze,AB=Jt.Graph,os=Qs.slack,jC=IB;function IB(t){var e=new AB({directed:!1}),r=t.nodes()[0],n=t.nodeCount();e.setNode(r,{});for(var a,i;RB(e,t)<n;)a=DB(e,t),i=e.hasNode(a.v)?os(t,a):-os(t,a),_B(e,t,i);return e}function RB(t,e){function r(n){ss.forEach(e.nodeEdges(n),function(a){var i=a.v,s=n===i?a.w:i;!t.hasNode(s)&&!os(e,a)&&(t.setNode(s,{}),t.setEdge(n,s,{}),r(s))})}return ss.forEach(t.nodes(),r),t.nodeCount()}function DB(t,e){return ss.minBy(e.edges(),function(r){if(t.hasNode(r.v)!==t.hasNode(r.w))return os(e,r)})}function _B(t,e,r){ss.forEach(t.nodes(),function(n){e.node(n).rank+=r})}var Er=Ze,LB=jC,MB=Qs.slack,OB=Qs.longestPath,PB=Jt.alg.preorder,kB=Jt.alg.postorder,NB=kt.simplify,BB=On;On.initLowLimValues=dg;On.initCutValues=hg;On.calcCutValue=ZC;On.leaveEdge=JC;On.enterEdge=eS;On.exchangeEdges=tS;function On(t){t=NB(t),OB(t);var e=LB(t);dg(e),hg(e,t);for(var r,n;r=JC(e);)n=eS(e,t,r),tS(e,t,r,n)}function hg(t,e){var r=kB(t,t.nodes());r=r.slice(0,r.length-1),Er.forEach(r,function(n){FB(t,e,n)})}function FB(t,e,r){var n=t.node(r),a=n.parent;t.edge(r,a).cutvalue=ZC(t,e,r)}function ZC(t,e,r){var n=t.node(r),a=n.parent,i=!0,s=e.edge(r,a),o=0;return s||(i=!1,s=e.edge(a,r)),o=s.weight,Er.forEach(e.nodeEdges(r),function(u){var l=u.v===r,f=l?u.w:u.v;if(f!==a){var c=l===i,h=e.edge(u).weight;if(o+=c?h:-h,GB(t,r,f)){var d=t.edge(r,f).cutvalue;o+=c?-d:d}}}),o}function dg(t,e){arguments.length<2&&(e=t.nodes()[0]),QC(t,{},1,e)}function QC(t,e,r,n,a){var i=r,s=t.node(n);return e[n]=!0,Er.forEach(t.neighbors(n),function(o){Er.has(e,o)||(r=QC(t,e,r,o,n))}),s.low=i,s.lim=r++,a?s.parent=a:delete s.parent,r}function JC(t){return Er.find(t.edges(),function(e){return t.edge(e).cutvalue<0})}function eS(t,e,r){var n=r.v,a=r.w;e.hasEdge(n,a)||(n=r.w,a=r.v);var i=t.node(n),s=t.node(a),o=i,u=!1;i.lim>s.lim&&(o=s,u=!0);var l=Er.filter(e.edges(),function(f){return u===nE(t,t.node(f.v),o)&&u!==nE(t,t.node(f.w),o)});return Er.minBy(l,function(f){return MB(e,f)})}function tS(t,e,r,n){var a=r.v,i=r.w;t.removeEdge(a,i),t.setEdge(n.v,n.w,{}),dg(t),hg(t,e),qB(t,e)}function qB(t,e){var r=Er.find(t.nodes(),function(a){return!e.node(a).parent}),n=PB(t,r);n=n.slice(1),Er.forEach(n,function(a){var i=t.node(a).parent,s=e.edge(a,i),o=!1;s||(s=e.edge(i,a),o=!0),e.node(a).rank=e.node(i).rank+(o?s.minlen:-s.minlen)})}function GB(t,e,r){return t.hasEdge(e,r)}function nE(t,e,r){return r.low<=e.lim&&e.lim<=r.lim}var zB=Qs,rS=zB.longestPath,$B=jC,VB=BB,UB=HB;function HB(t){switch(t.graph().ranker){case"network-simplex":aE(t);break;case"tight-tree":WB(t);break;case"longest-path":YB(t);break;default:aE(t)}}var YB=rS;function WB(t){rS(t),$B(t)}function aE(t){VB(t)}var lv=Ze,XB=KB;function KB(t){var e=ZB(t);lv.forEach(t.graph().dummyChains,function(r){for(var n=t.node(r),a=n.edgeObj,i=jB(t,e,a.v,a.w),s=i.path,o=i.lca,u=0,l=s[u],f=!0;r!==a.w;){if(n=t.node(r),f){for(;(l=s[u])!==o&&t.node(l).maxRank<n.rank;)u++;l===o&&(f=!1)}if(!f){for(;u<s.length-1&&t.node(l=s[u+1]).minRank<=n.rank;)u++;l=s[u]}t.setParent(r,l),r=t.successors(r)[0]}})}function jB(t,e,r,n){var a=[],i=[],s=Math.min(e[r].low,e[n].low),o=Math.max(e[r].lim,e[n].lim),u,l;u=r;do u=t.parent(u),a.push(u);while(u&&(e[u].low>s||o>e[u].lim));for(l=u,u=n;(u=t.parent(u))!==l;)i.push(u);return{path:a.concat(i.reverse()),lca:l}}function ZB(t){var e={},r=0;function n(a){var i=r;lv.forEach(t.children(a),n),e[a]={low:i,lim:r++}}return lv.forEach(t.children(),n),e}var pr=Ze,fv=kt,QB={run:JB,cleanup:rF};function JB(t){var e=fv.addDummyNode(t,"root",{},"_root"),r=eF(t),n=pr.max(pr.values(r))-1,a=2*n+1;t.graph().nestingRoot=e,pr.forEach(t.edges(),function(s){t.edge(s).minlen*=a});var i=tF(t)+1;pr.forEach(t.children(),function(s){nS(t,e,a,i,n,r,s)}),t.graph().nodeRankFactor=a}function nS(t,e,r,n,a,i,s){var o=t.children(s);if(!o.length){s!==e&&t.setEdge(e,s,{weight:0,minlen:r});return}var u=fv.addBorderNode(t,"_bt"),l=fv.addBorderNode(t,"_bb"),f=t.node(s);t.setParent(u,s),f.borderTop=u,t.setParent(l,s),f.borderBottom=l,pr.forEach(o,function(c){nS(t,e,r,n,a,i,c);var h=t.node(c),d=h.borderTop?h.borderTop:c,v=h.borderBottom?h.borderBottom:c,g=h.borderTop?n:2*n,p=d!==v?1:a-i[s]+1;t.setEdge(u,d,{weight:g,minlen:p,nestingEdge:!0}),t.setEdge(v,l,{weight:g,minlen:p,nestingEdge:!0})}),t.parent(s)||t.setEdge(e,u,{weight:0,minlen:a+i[s]})}function eF(t){var e={};function r(n,a){var i=t.children(n);i&&i.length&&pr.forEach(i,function(s){r(s,a+1)}),e[n]=a}return pr.forEach(t.children(),function(n){r(n,1)}),e}function tF(t){return pr.reduce(t.edges(),function(e,r){return e+t.edge(r).weight},0)}function rF(t){var e=t.graph();t.removeNode(e.nestingRoot),delete e.nestingRoot,pr.forEach(t.edges(),function(r){var n=t.edge(r);n.nestingEdge&&t.removeEdge(r)})}var Rd=Ze,nF=kt,aF=iF;function iF(t){function e(r){var n=t.children(r),a=t.node(r);if(n.length&&Rd.forEach(n,e),Rd.has(a,"minRank")){a.borderLeft=[],a.borderRight=[];for(var i=a.minRank,s=a.maxRank+1;i<s;++i)iE(t,"borderLeft","_bl",r,a,i),iE(t,"borderRight","_br",r,a,i)}}Rd.forEach(t.children(),e)}function iE(t,e,r,n,a,i){var s={width:0,height:0,rank:i,borderType:e},o=a[e][i-1],u=nF.addDummyNode(t,"border",s,r);a[e][i]=u,t.setParent(u,n),o&&t.setEdge(o,u,{weight:1})}var ar=Ze,sF={adjust:oF,undo:uF};function oF(t){var e=t.graph().rankdir.toLowerCase();(e==="lr"||e==="rl")&&aS(t)}function uF(t){var e=t.graph().rankdir.toLowerCase();(e==="bt"||e==="rl")&&lF(t),(e==="lr"||e==="rl")&&(fF(t),aS(t))}function aS(t){ar.forEach(t.nodes(),function(e){sE(t.node(e))}),ar.forEach(t.edges(),function(e){sE(t.edge(e))})}function sE(t){var e=t.width;t.width=t.height,t.height=e}function lF(t){ar.forEach(t.nodes(),function(e){Dd(t.node(e))}),ar.forEach(t.edges(),function(e){var r=t.edge(e);ar.forEach(r.points,Dd),ar.has(r,"y")&&Dd(r)})}function Dd(t){t.y=-t.y}function fF(t){ar.forEach(t.nodes(),function(e){_d(t.node(e))}),ar.forEach(t.edges(),function(e){var r=t.edge(e);ar.forEach(r.points,_d),ar.has(r,"x")&&_d(r)})}function _d(t){var e=t.x;t.x=t.y,t.y=e}var hr=Ze,cF=hF;function hF(t){var e={},r=hr.filter(t.nodes(),function(o){return!t.children(o).length}),n=hr.max(hr.map(r,function(o){return t.node(o).rank})),a=hr.map(hr.range(n+1),function(){return[]});function i(o){if(!hr.has(e,o)){e[o]=!0;var u=t.node(o);a[u.rank].push(o),hr.forEach(t.successors(o),i)}}var s=hr.sortBy(r,function(o){return t.node(o).rank});return hr.forEach(s,i),a}var Dr=Ze,dF=vF;function vF(t,e){for(var r=0,n=1;n<e.length;++n)r+=gF(t,e[n-1],e[n]);return r}function gF(t,e,r){for(var n=Dr.zipObject(r,Dr.map(r,function(l,f){return f})),a=Dr.flatten(Dr.map(e,function(l){return Dr.sortBy(Dr.map(t.outEdges(l),function(f){return{pos:n[f.w],weight:t.edge(f).weight}}),"pos")}),!0),i=1;i<r.length;)i<<=1;var s=2*i-1;i-=1;var o=Dr.map(new Array(s),function(){return 0}),u=0;return Dr.forEach(a.forEach(function(l){var f=l.pos+i;o[f]+=l.weight;for(var c=0;f>0;)f%2&&(c+=o[f+1]),f=f-1>>1,o[f]+=l.weight;u+=l.weight*c})),u}var oE=Ze,pF=yF;function yF(t,e){return oE.map(e,function(r){var n=t.inEdges(r);if(n.length){var a=oE.reduce(n,function(i,s){var o=t.edge(s),u=t.node(s.v);return{sum:i.sum+o.weight*u.order,weight:i.weight+o.weight}},{sum:0,weight:0});return{v:r,barycenter:a.sum/a.weight,weight:a.weight}}else return{v:r}})}var Nt=Ze,mF=bF;function bF(t,e){var r={};Nt.forEach(t,function(a,i){var s=r[a.v]={indegree:0,in:[],out:[],vs:[a.v],i};Nt.isUndefined(a.barycenter)||(s.barycenter=a.barycenter,s.weight=a.weight)}),Nt.forEach(e.edges(),function(a){var i=r[a.v],s=r[a.w];!Nt.isUndefined(i)&&!Nt.isUndefined(s)&&(s.indegree++,i.out.push(r[a.w]))});var n=Nt.filter(r,function(a){return!a.indegree});return wF(n)}function wF(t){var e=[];function r(i){return function(s){s.merged||(Nt.isUndefined(s.barycenter)||Nt.isUndefined(i.barycenter)||s.barycenter>=i.barycenter)&&EF(i,s)}}function n(i){return function(s){s.in.push(i),--s.indegree===0&&t.push(s)}}for(;t.length;){var a=t.pop();e.push(a),Nt.forEach(a.in.reverse(),r(a)),Nt.forEach(a.out,n(a))}return Nt.map(Nt.filter(e,function(i){return!i.merged}),function(i){return Nt.pick(i,["vs","i","barycenter","weight"])})}function EF(t,e){var r=0,n=0;t.weight&&(r+=t.barycenter*t.weight,n+=t.weight),e.weight&&(r+=e.barycenter*e.weight,n+=e.weight),t.vs=e.vs.concat(t.vs),t.barycenter=r/n,t.weight=n,t.i=Math.min(e.i,t.i),e.merged=!0}var Da=Ze,xF=kt,TF=CF;function CF(t,e){var r=xF.partition(t,function(f){return Da.has(f,"barycenter")}),n=r.lhs,a=Da.sortBy(r.rhs,function(f){return-f.i}),i=[],s=0,o=0,u=0;n.sort(SF(!!e)),u=uE(i,a,u),Da.forEach(n,function(f){u+=f.vs.length,i.push(f.vs),s+=f.barycenter*f.weight,o+=f.weight,u=uE(i,a,u)});var l={vs:Da.flatten(i,!0)};return o&&(l.barycenter=s/o,l.weight=o),l}function uE(t,e,r){for(var n;e.length&&(n=Da.last(e)).i<=r;)e.pop(),t.push(n.vs),r++;return r}function SF(t){return function(e,r){return e.barycenter<r.barycenter?-1:e.barycenter>r.barycenter?1:t?r.i-e.i:e.i-r.i}}var Mr=Ze,AF=pF,IF=mF,RF=TF,DF=iS;function iS(t,e,r,n){var a=t.children(e),i=t.node(e),s=i?i.borderLeft:void 0,o=i?i.borderRight:void 0,u={};s&&(a=Mr.filter(a,function(v){return v!==s&&v!==o}));var l=AF(t,a);Mr.forEach(l,function(v){if(t.children(v.v).length){var g=iS(t,v.v,r,n);u[v.v]=g,Mr.has(g,"barycenter")&&LF(v,g)}});var f=IF(l,r);_F(f,u);var c=RF(f,n);if(s&&(c.vs=Mr.flatten([s,c.vs,o],!0),t.predecessors(s).length)){var h=t.node(t.predecessors(s)[0]),d=t.node(t.predecessors(o)[0]);Mr.has(c,"barycenter")||(c.barycenter=0,c.weight=0),c.barycenter=(c.barycenter*c.weight+h.order+d.order)/(c.weight+2),c.weight+=2}return c}function _F(t,e){Mr.forEach(t,function(r){r.vs=Mr.flatten(r.vs.map(function(n){return e[n]?e[n].vs:n}),!0)})}function LF(t,e){Mr.isUndefined(t.barycenter)?(t.barycenter=e.barycenter,t.weight=e.weight):(t.barycenter=(t.barycenter*t.weight+e.barycenter*e.weight)/(t.weight+e.weight),t.weight+=e.weight)}var _a=Ze,MF=Jt.Graph,OF=PF;function PF(t,e,r){var n=kF(t),a=new MF({compound:!0}).setGraph({root:n}).setDefaultNodeLabel(function(i){return t.node(i)});return _a.forEach(t.nodes(),function(i){var s=t.node(i),o=t.parent(i);(s.rank===e||s.minRank<=e&&e<=s.maxRank)&&(a.setNode(i),a.setParent(i,o||n),_a.forEach(t[r](i),function(u){var l=u.v===i?u.w:u.v,f=a.edge(l,i),c=_a.isUndefined(f)?0:f.weight;a.setEdge(l,i,{weight:t.edge(u).weight+c})}),_a.has(s,"minRank")&&a.setNode(i,{borderLeft:s.borderLeft[e],borderRight:s.borderRight[e]}))}),a}function kF(t){for(var e;t.hasNode(e=_a.uniqueId("_root")););return e}var NF=Ze,BF=FF;function FF(t,e,r){var n={},a;NF.forEach(r,function(i){for(var s=t.parent(i),o,u;s;){if(o=t.parent(s),o?(u=n[o],n[o]=s):(u=a,a=s),u&&u!==s){e.setEdge(u,s);return}s=o}})}var $r=Ze,qF=cF,GF=dF,zF=DF,$F=OF,VF=BF,UF=Jt.Graph,lE=kt,HF=YF;function YF(t){var e=lE.maxRank(t),r=fE(t,$r.range(1,e+1),"inEdges"),n=fE(t,$r.range(e-1,-1,-1),"outEdges"),a=qF(t);cE(t,a);for(var i=Number.POSITIVE_INFINITY,s,o=0,u=0;u<4;++o,++u){WF(o%2?r:n,o%4>=2),a=lE.buildLayerMatrix(t);var l=GF(t,a);l<i&&(u=0,s=$r.cloneDeep(a),i=l)}cE(t,s)}function fE(t,e,r){return $r.map(e,function(n){return $F(t,n,r)})}function WF(t,e){var r=new UF;$r.forEach(t,function(n){var a=n.graph().root,i=zF(n,a,r,e);$r.forEach(i.vs,function(s,o){n.node(s).order=o}),VF(n,r,i.vs)})}function cE(t,e){$r.forEach(e,function(r){$r.forEach(r,function(n,a){t.node(n).order=a})})}var Se=Ze,XF=Jt.Graph,KF=kt,jF={positionX:oq};function ZF(t,e){var r={};function n(a,i){var s=0,o=0,u=a.length,l=Se.last(i);return Se.forEach(i,function(f,c){var h=JF(t,f),d=h?t.node(h).order:u;(h||f===l)&&(Se.forEach(i.slice(o,c+1),function(v){Se.forEach(t.predecessors(v),function(g){var p=t.node(g),y=p.order;(y<s||d<y)&&!(p.dummy&&t.node(v).dummy)&&sS(r,g,v)})}),o=c+1,s=d)}),i}return Se.reduce(e,n),r}function QF(t,e){var r={};function n(i,s,o,u,l){var f;Se.forEach(Se.range(s,o),function(c){f=i[c],t.node(f).dummy&&Se.forEach(t.predecessors(f),function(h){var d=t.node(h);d.dummy&&(d.order<u||d.order>l)&&sS(r,h,f)})})}function a(i,s){var o=-1,u,l=0;return Se.forEach(s,function(f,c){if(t.node(f).dummy==="border"){var h=t.predecessors(f);h.length&&(u=t.node(h[0]).order,n(s,l,c,o,u),l=c,o=u)}n(s,l,s.length,u,i.length)}),s}return Se.reduce(e,a),r}function JF(t,e){if(t.node(e).dummy)return Se.find(t.predecessors(e),function(r){return t.node(r).dummy})}function sS(t,e,r){if(e>r){var n=e;e=r,r=n}var a=t[e];a||(t[e]=a={}),a[r]=!0}function eq(t,e,r){if(e>r){var n=e;e=r,r=n}return Se.has(t[e],r)}function tq(t,e,r,n){var a={},i={},s={};return Se.forEach(e,function(o){Se.forEach(o,function(u,l){a[u]=u,i[u]=u,s[u]=l})}),Se.forEach(e,function(o){var u=-1;Se.forEach(o,function(l){var f=n(l);if(f.length){f=Se.sortBy(f,function(g){return s[g]});for(var c=(f.length-1)/2,h=Math.floor(c),d=Math.ceil(c);h<=d;++h){var v=f[h];i[l]===l&&u<s[v]&&!eq(r,l,v)&&(i[v]=l,i[l]=a[l]=a[v],u=s[v])}}})}),{root:a,align:i}}function rq(t,e,r,n,a){var i={},s=nq(t,e,r,a),o=a?"borderLeft":"borderRight";function u(c,h){for(var d=s.nodes(),v=d.pop(),g={};v;)g[v]?c(v):(g[v]=!0,d.push(v),d=d.concat(h(v))),v=d.pop()}function l(c){i[c]=s.inEdges(c).reduce(function(h,d){return Math.max(h,i[d.v]+s.edge(d))},0)}function f(c){var h=s.outEdges(c).reduce(function(v,g){return Math.min(v,i[g.w]-s.edge(g))},Number.POSITIVE_INFINITY),d=t.node(c);h!==Number.POSITIVE_INFINITY&&d.borderType!==o&&(i[c]=Math.max(i[c],h))}return u(l,s.predecessors.bind(s)),u(f,s.successors.bind(s)),Se.forEach(n,function(c){i[c]=i[r[c]]}),i}function nq(t,e,r,n){var a=new XF,i=t.graph(),s=uq(i.nodesep,i.edgesep,n);return Se.forEach(e,function(o){var u;Se.forEach(o,function(l){var f=r[l];if(a.setNode(f),u){var c=r[u],h=a.edge(c,f);a.setEdge(c,f,Math.max(s(t,l,u),h||0))}u=l})}),a}function aq(t,e){return Se.minBy(Se.values(e),function(r){var n=Number.NEGATIVE_INFINITY,a=Number.POSITIVE_INFINITY;return Se.forIn(r,function(i,s){var o=lq(t,s)/2;n=Math.max(i+o,n),a=Math.min(i-o,a)}),n-a})}function iq(t,e){var r=Se.values(e),n=Se.min(r),a=Se.max(r);Se.forEach(["u","d"],function(i){Se.forEach(["l","r"],function(s){var o=i+s,u=t[o],l;if(u!==e){var f=Se.values(u);l=s==="l"?n-Se.min(f):a-Se.max(f),l&&(t[o]=Se.mapValues(u,function(c){return c+l}))}})})}function sq(t,e){return Se.mapValues(t.ul,function(r,n){if(e)return t[e.toLowerCase()][n];var a=Se.sortBy(Se.map(t,n));return(a[1]+a[2])/2})}function oq(t){var e=KF.buildLayerMatrix(t),r=Se.merge(ZF(t,e),QF(t,e)),n={},a;Se.forEach(["u","d"],function(s){a=s==="u"?e:Se.values(e).reverse(),Se.forEach(["l","r"],function(o){o==="r"&&(a=Se.map(a,function(c){return Se.values(c).reverse()}));var u=(s==="u"?t.predecessors:t.successors).bind(t),l=tq(t,a,r,u),f=rq(t,a,l.root,l.align,o==="r");o==="r"&&(f=Se.mapValues(f,function(c){return-c})),n[s+o]=f})});var i=aq(t,n);return iq(n,i),sq(n,t.graph().align)}function uq(t,e,r){return function(n,a,i){var s=n.node(a),o=n.node(i),u=0,l;if(u+=s.width/2,Se.has(s,"labelpos"))switch(s.labelpos.toLowerCase()){case"l":l=-s.width/2;break;case"r":l=s.width/2;break}if(l&&(u+=r?l:-l),l=0,u+=(s.dummy?e:t)/2,u+=(o.dummy?e:t)/2,u+=o.width/2,Se.has(o,"labelpos"))switch(o.labelpos.toLowerCase()){case"l":l=o.width/2;break;case"r":l=-o.width/2;break}return l&&(u+=r?l:-l),l=0,u}}function lq(t,e){return t.node(e).width}var La=Ze,oS=kt,fq=jF.positionX,cq=hq;function hq(t){t=oS.asNonCompoundGraph(t),dq(t),La.forEach(fq(t),function(e,r){t.node(r).x=e})}function dq(t){var e=oS.buildLayerMatrix(t),r=t.graph().ranksep,n=0;La.forEach(e,function(a){var i=La.max(La.map(a,function(s){return t.node(s).height}));La.forEach(a,function(s){t.node(s).y=n+i/2}),n+=i+r})}var De=Ze,hE=nB,dE=wB,vq=UB,gq=kt.normalizeRanks,pq=XB,yq=kt.removeEmptyRanks,vE=QB,mq=aF,gE=sF,bq=HF,wq=cq,Zr=kt,Eq=Jt.Graph,xq=Tq;function Tq(t,e){var r=e&&e.debugTiming?Zr.time:Zr.notime;r("layout",function(){var n=r("  buildLayoutGraph",function(){return Pq(t)});r("  runLayout",function(){Cq(n,r)}),r("  updateInputGraph",function(){Sq(t,n)})})}function Cq(t,e){e("    makeSpaceForEdgeLabels",function(){kq(t)}),e("    removeSelfEdges",function(){Uq(t)}),e("    acyclic",function(){hE.run(t)}),e("    nestingGraph.run",function(){vE.run(t)}),e("    rank",function(){vq(Zr.asNonCompoundGraph(t))}),e("    injectEdgeLabelProxies",function(){Nq(t)}),e("    removeEmptyRanks",function(){yq(t)}),e("    nestingGraph.cleanup",function(){vE.cleanup(t)}),e("    normalizeRanks",function(){gq(t)}),e("    assignRankMinMax",function(){Bq(t)}),e("    removeEdgeLabelProxies",function(){Fq(t)}),e("    normalize.run",function(){dE.run(t)}),e("    parentDummyChains",function(){pq(t)}),e("    addBorderSegments",function(){mq(t)}),e("    order",function(){bq(t)}),e("    insertSelfEdges",function(){Hq(t)}),e("    adjustCoordinateSystem",function(){gE.adjust(t)}),e("    position",function(){wq(t)}),e("    positionSelfEdges",function(){Yq(t)}),e("    removeBorderNodes",function(){Vq(t)}),e("    normalize.undo",function(){dE.undo(t)}),e("    fixupEdgeLabelCoords",function(){zq(t)}),e("    undoCoordinateSystem",function(){gE.undo(t)}),e("    translateGraph",function(){qq(t)}),e("    assignNodeIntersects",function(){Gq(t)}),e("    reversePoints",function(){$q(t)}),e("    acyclic.undo",function(){hE.undo(t)})}function Sq(t,e){De.forEach(t.nodes(),function(r){var n=t.node(r),a=e.node(r);n&&(n.x=a.x,n.y=a.y,e.children(r).length&&(n.width=a.width,n.height=a.height))}),De.forEach(t.edges(),function(r){var n=t.edge(r),a=e.edge(r);n.points=a.points,De.has(a,"x")&&(n.x=a.x,n.y=a.y)}),t.graph().width=e.graph().width,t.graph().height=e.graph().height}var Aq=["nodesep","edgesep","ranksep","marginx","marginy"],Iq={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},Rq=["acyclicer","ranker","rankdir","align"],Dq=["width","height"],_q={width:0,height:0},Lq=["minlen","weight","width","height","labeloffset"],Mq={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},Oq=["labelpos"];function Pq(t){var e=new Eq({multigraph:!0,compound:!0}),r=Md(t.graph());return e.setGraph(De.merge({},Iq,Ld(r,Aq),De.pick(r,Rq))),De.forEach(t.nodes(),function(n){var a=Md(t.node(n));e.setNode(n,De.defaults(Ld(a,Dq),_q)),e.setParent(n,t.parent(n))}),De.forEach(t.edges(),function(n){var a=Md(t.edge(n));e.setEdge(n,De.merge({},Mq,Ld(a,Lq),De.pick(a,Oq)))}),e}function kq(t){var e=t.graph();e.ranksep/=2,De.forEach(t.edges(),function(r){var n=t.edge(r);n.minlen*=2,n.labelpos.toLowerCase()!=="c"&&(e.rankdir==="TB"||e.rankdir==="BT"?n.width+=n.labeloffset:n.height+=n.labeloffset)})}function Nq(t){De.forEach(t.edges(),function(e){var r=t.edge(e);if(r.width&&r.height){var n=t.node(e.v),a=t.node(e.w),i={rank:(a.rank-n.rank)/2+n.rank,e};Zr.addDummyNode(t,"edge-proxy",i,"_ep")}})}function Bq(t){var e=0;De.forEach(t.nodes(),function(r){var n=t.node(r);n.borderTop&&(n.minRank=t.node(n.borderTop).rank,n.maxRank=t.node(n.borderBottom).rank,e=De.max(e,n.maxRank))}),t.graph().maxRank=e}function Fq(t){De.forEach(t.nodes(),function(e){var r=t.node(e);r.dummy==="edge-proxy"&&(t.edge(r.e).labelRank=r.rank,t.removeNode(e))})}function qq(t){var e=Number.POSITIVE_INFINITY,r=0,n=Number.POSITIVE_INFINITY,a=0,i=t.graph(),s=i.marginx||0,o=i.marginy||0;function u(l){var f=l.x,c=l.y,h=l.width,d=l.height;e=Math.min(e,f-h/2),r=Math.max(r,f+h/2),n=Math.min(n,c-d/2),a=Math.max(a,c+d/2)}De.forEach(t.nodes(),function(l){u(t.node(l))}),De.forEach(t.edges(),function(l){var f=t.edge(l);De.has(f,"x")&&u(f)}),e-=s,n-=o,De.forEach(t.nodes(),function(l){var f=t.node(l);f.x-=e,f.y-=n}),De.forEach(t.edges(),function(l){var f=t.edge(l);De.forEach(f.points,function(c){c.x-=e,c.y-=n}),De.has(f,"x")&&(f.x-=e),De.has(f,"y")&&(f.y-=n)}),i.width=r-e+s,i.height=a-n+o}function Gq(t){De.forEach(t.edges(),function(e){var r=t.edge(e),n=t.node(e.v),a=t.node(e.w),i,s;r.points?(i=r.points[0],s=r.points[r.points.length-1]):(r.points=[],i=a,s=n),r.points.unshift(Zr.intersectRect(n,i)),r.points.push(Zr.intersectRect(a,s))})}function zq(t){De.forEach(t.edges(),function(e){var r=t.edge(e);if(De.has(r,"x"))switch((r.labelpos==="l"||r.labelpos==="r")&&(r.width-=r.labeloffset),r.labelpos){case"l":r.x-=r.width/2+r.labeloffset;break;case"r":r.x+=r.width/2+r.labeloffset;break}})}function $q(t){De.forEach(t.edges(),function(e){var r=t.edge(e);r.reversed&&r.points.reverse()})}function Vq(t){De.forEach(t.nodes(),function(e){if(t.children(e).length){var r=t.node(e),n=t.node(r.borderTop),a=t.node(r.borderBottom),i=t.node(De.last(r.borderLeft)),s=t.node(De.last(r.borderRight));r.width=Math.abs(s.x-i.x),r.height=Math.abs(a.y-n.y),r.x=i.x+r.width/2,r.y=n.y+r.height/2}}),De.forEach(t.nodes(),function(e){t.node(e).dummy==="border"&&t.removeNode(e)})}function Uq(t){De.forEach(t.edges(),function(e){if(e.v===e.w){var r=t.node(e.v);r.selfEdges||(r.selfEdges=[]),r.selfEdges.push({e,label:t.edge(e)}),t.removeEdge(e)}})}function Hq(t){var e=Zr.buildLayerMatrix(t);De.forEach(e,function(r){var n=0;De.forEach(r,function(a,i){var s=t.node(a);s.order=i+n,De.forEach(s.selfEdges,function(o){Zr.addDummyNode(t,"selfedge",{width:o.label.width,height:o.label.height,rank:s.rank,order:i+ ++n,e:o.e,label:o.label},"_se")}),delete s.selfEdges})})}function Yq(t){De.forEach(t.nodes(),function(e){var r=t.node(e);if(r.dummy==="selfedge"){var n=t.node(r.e.v),a=n.x+n.width/2,i=n.y,s=r.x-a,o=n.height/2;t.setEdge(r.e,r.label),t.removeNode(e),r.label.points=[{x:a+2*s/3,y:i-o},{x:a+5*s/6,y:i-o},{x:a+s,y:i},{x:a+5*s/6,y:i+o},{x:a+2*s/3,y:i+o}],r.label.x=r.x,r.label.y=r.y}})}function Ld(t,e){return De.mapValues(De.pick(t,e),Number)}function Md(t){var e={};return De.forEach(t,function(r,n){e[n.toLowerCase()]=r}),e}var Ri=Ze,Wq=kt,Xq=Jt.Graph,Kq={debugOrdering:jq};function jq(t){var e=Wq.buildLayerMatrix(t),r=new Xq({compound:!0,multigraph:!0}).setGraph({});return Ri.forEach(t.nodes(),function(n){r.setNode(n,{label:n}),r.setParent(n,"layer"+t.node(n).rank)}),Ri.forEach(t.edges(),function(n){r.setEdge(n.v,n.w,{},n.name)}),Ri.forEach(e,function(n,a){var i="layer"+a;r.setNode(i,{rank:"same"}),Ri.reduce(n,function(s,o){return r.setEdge(s,o,{style:"invis"}),o})}),r}var Zq="0.8.5",uS={graphlib:Jt,layout:xq,debug:Kq,util:{time:kt.time,notime:kt.notime},version:Zq};const Qq=Wv(uS);var lS={exports:{}};(function(t,e){(function(n,a){t.exports=a(uS)})(Nr,function(r){return function(n){var a={};function i(s){if(a[s])return a[s].exports;var o=a[s]={i:s,l:!1,exports:{}};return n[s].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=n,i.c=a,i.d=function(s,o,u){i.o(s,o)||Object.defineProperty(s,o,{enumerable:!0,get:u})},i.r=function(s){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})},i.t=function(s,o){if(o&1&&(s=i(s)),o&8||o&4&&typeof s=="object"&&s&&s.__esModule)return s;var u=Object.create(null);if(i.r(u),Object.defineProperty(u,"default",{enumerable:!0,value:s}),o&2&&typeof s!="string")for(var l in s)i.d(u,l,(function(f){return s[f]}).bind(null,l));return u},i.n=function(s){var o=s&&s.__esModule?function(){return s.default}:function(){return s};return i.d(o,"a",o),o},i.o=function(s,o){return Object.prototype.hasOwnProperty.call(s,o)},i.p="",i(i.s=0)}([function(n,a,i){var s=i(1),o=function(l){l&&l("layout","dagre",s)};typeof cytoscape<"u"&&o(cytoscape),n.exports=o},function(n,a,i){function s(h){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?s=function(v){return typeof v}:s=function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v},s(h)}var o=function(d){return typeof d=="function"},u=i(2),l=i(3),f=i(4);function c(h){this.options=l({},u,h)}c.prototype.run=function(){var h=this.options,d=this,v=h.cy,g=h.eles,p=function(N,q){return o(q)?q.apply(N,[N]):q},y=h.boundingBox||{x1:0,y1:0,w:v.width(),h:v.height()};y.x2===void 0&&(y.x2=y.x1+y.w),y.w===void 0&&(y.w=y.x2-y.x1),y.y2===void 0&&(y.y2=y.y1+y.h),y.h===void 0&&(y.h=y.y2-y.y1);var m=new f.graphlib.Graph({multigraph:!0,compound:!0}),b={},E=function(N,q){q!=null&&(b[N]=q)};E("nodesep",h.nodeSep),E("edgesep",h.edgeSep),E("ranksep",h.rankSep),E("rankdir",h.rankDir),E("align",h.align),E("ranker",h.ranker),E("acyclicer",h.acyclicer),m.setGraph(b),m.setDefaultEdgeLabel(function(){return{}}),m.setDefaultNodeLabel(function(){return{}});var T=g.nodes();o(h.sort)&&(T=T.sort(h.sort));for(var I=0;I<T.length;I++){var w=T[I],x=w.layoutDimensions(h);m.setNode(w.id(),{width:x.w,height:x.h,name:w.id()})}for(var C=0;C<T.length;C++){var S=T[C];S.isChild()&&m.setParent(S.id(),S.parent().id())}var A=g.edges().stdFilter(function(F){return!F.source().isParent()&&!F.target().isParent()});o(h.sort)&&(A=A.sort(h.sort));for(var R=0;R<A.length;R++){var D=A[R];m.setEdge(D.source().id(),D.target().id(),{minlen:p(D,h.minLen),weight:p(D,h.edgeWeight),name:D.id()},D.id())}f.layout(m);for(var _=m.nodes(),M=0;M<_.length;M++){var k=_[M],O=m.node(k);v.getElementById(k).scratch().dagre=O}var P;h.boundingBox?(P={x1:1/0,x2:-1/0,y1:1/0,y2:-1/0},T.forEach(function(F){var N=F.scratch().dagre;P.x1=Math.min(P.x1,N.x),P.x2=Math.max(P.x2,N.x),P.y1=Math.min(P.y1,N.y),P.y2=Math.max(P.y2,N.y)}),P.w=P.x2-P.x1,P.h=P.y2-P.y1):P=y;var B=function(N){if(h.boundingBox){var q=P.w===0?0:(N.x-P.x1)/P.w,V=P.h===0?0:(N.y-P.y1)/P.h;return{x:y.x1+q*y.w,y:y.y1+V*y.h}}else return N};return T.layoutPositions(d,h,function(F){F=s(F)==="object"?F:this;var N=F.scratch().dagre;return B({x:N.x,y:N.y})}),this},n.exports=c},function(n,a){var i={nodeSep:void 0,edgeSep:void 0,rankSep:void 0,rankDir:void 0,align:void 0,acyclicer:void 0,ranker:void 0,minLen:function(o){return 1},edgeWeight:function(o){return 1},fit:!0,padding:30,spacingFactor:void 0,nodeDimensionsIncludeLabels:!1,animate:!1,animateFilter:function(o,u){return!0},animationDuration:500,animationEasing:void 0,boundingBox:void 0,transform:function(o,u){return u},ready:function(){},sort:void 0,stop:function(){}};n.exports=i},function(n,a){n.exports=Object.assign!=null?Object.assign.bind(Object):function(i){for(var s=arguments.length,o=new Array(s>1?s-1:0),u=1;u<s;u++)o[u-1]=arguments[u];return o.forEach(function(l){Object.keys(l).forEach(function(f){return i[f]=l[f]})}),i}},function(n,a){n.exports=r}])})})(lS);var Jq=lS.exports;const eG=Wv(Jq);var fS={exports:{}},Od={exports:{}},Pd={exports:{}},pE;function tG(){return pE||(pE=1,function(t,e){(function(n,a){t.exports=a()})(Nr,function(){return function(r){var n={};function a(i){if(n[i])return n[i].exports;var s=n[i]={i,l:!1,exports:{}};return r[i].call(s.exports,s,s.exports,a),s.l=!0,s.exports}return a.m=r,a.c=n,a.i=function(i){return i},a.d=function(i,s,o){a.o(i,s)||Object.defineProperty(i,s,{configurable:!1,enumerable:!0,get:o})},a.n=function(i){var s=i&&i.__esModule?function(){return i.default}:function(){return i};return a.d(s,"a",s),s},a.o=function(i,s){return Object.prototype.hasOwnProperty.call(i,s)},a.p="",a(a.s=26)}([function(r,n,a){function i(){}i.QUALITY=1,i.DEFAULT_CREATE_BENDS_AS_NEEDED=!1,i.DEFAULT_INCREMENTAL=!1,i.DEFAULT_ANIMATION_ON_LAYOUT=!0,i.DEFAULT_ANIMATION_DURING_LAYOUT=!1,i.DEFAULT_ANIMATION_PERIOD=50,i.DEFAULT_UNIFORM_LEAF_NODE_SIZES=!1,i.DEFAULT_GRAPH_MARGIN=15,i.NODE_DIMENSIONS_INCLUDE_LABELS=!1,i.SIMPLE_NODE_SIZE=40,i.SIMPLE_NODE_HALF_SIZE=i.SIMPLE_NODE_SIZE/2,i.EMPTY_COMPOUND_NODE_SIZE=40,i.MIN_EDGE_LENGTH=1,i.WORLD_BOUNDARY=1e6,i.INITIAL_WORLD_BOUNDARY=i.WORLD_BOUNDARY/1e3,i.WORLD_CENTER_X=1200,i.WORLD_CENTER_Y=900,r.exports=i},function(r,n,a){var i=a(2),s=a(8),o=a(9);function u(f,c,h){i.call(this,h),this.isOverlapingSourceAndTarget=!1,this.vGraphObject=h,this.bendpoints=[],this.source=f,this.target=c}u.prototype=Object.create(i.prototype);for(var l in i)u[l]=i[l];u.prototype.getSource=function(){return this.source},u.prototype.getTarget=function(){return this.target},u.prototype.isInterGraph=function(){return this.isInterGraph},u.prototype.getLength=function(){return this.length},u.prototype.isOverlapingSourceAndTarget=function(){return this.isOverlapingSourceAndTarget},u.prototype.getBendpoints=function(){return this.bendpoints},u.prototype.getLca=function(){return this.lca},u.prototype.getSourceInLca=function(){return this.sourceInLca},u.prototype.getTargetInLca=function(){return this.targetInLca},u.prototype.getOtherEnd=function(f){if(this.source===f)return this.target;if(this.target===f)return this.source;throw"Node is not incident with this edge"},u.prototype.getOtherEndInGraph=function(f,c){for(var h=this.getOtherEnd(f),d=c.getGraphManager().getRoot();;){if(h.getOwner()==c)return h;if(h.getOwner()==d)break;h=h.getOwner().getParent()}return null},u.prototype.updateLength=function(){var f=new Array(4);this.isOverlapingSourceAndTarget=s.getIntersection(this.target.getRect(),this.source.getRect(),f),this.isOverlapingSourceAndTarget||(this.lengthX=f[0]-f[2],this.lengthY=f[1]-f[3],Math.abs(this.lengthX)<1&&(this.lengthX=o.sign(this.lengthX)),Math.abs(this.lengthY)<1&&(this.lengthY=o.sign(this.lengthY)),this.length=Math.sqrt(this.lengthX*this.lengthX+this.lengthY*this.lengthY))},u.prototype.updateLengthSimple=function(){this.lengthX=this.target.getCenterX()-this.source.getCenterX(),this.lengthY=this.target.getCenterY()-this.source.getCenterY(),Math.abs(this.lengthX)<1&&(this.lengthX=o.sign(this.lengthX)),Math.abs(this.lengthY)<1&&(this.lengthY=o.sign(this.lengthY)),this.length=Math.sqrt(this.lengthX*this.lengthX+this.lengthY*this.lengthY)},r.exports=u},function(r,n,a){function i(s){this.vGraphObject=s}r.exports=i},function(r,n,a){var i=a(2),s=a(10),o=a(13),u=a(0),l=a(16),f=a(4);function c(d,v,g,p){g==null&&p==null&&(p=v),i.call(this,p),d.graphManager!=null&&(d=d.graphManager),this.estimatedSize=s.MIN_VALUE,this.inclusionTreeDepth=s.MAX_VALUE,this.vGraphObject=p,this.edges=[],this.graphManager=d,g!=null&&v!=null?this.rect=new o(v.x,v.y,g.width,g.height):this.rect=new o}c.prototype=Object.create(i.prototype);for(var h in i)c[h]=i[h];c.prototype.getEdges=function(){return this.edges},c.prototype.getChild=function(){return this.child},c.prototype.getOwner=function(){return this.owner},c.prototype.getWidth=function(){return this.rect.width},c.prototype.setWidth=function(d){this.rect.width=d},c.prototype.getHeight=function(){return this.rect.height},c.prototype.setHeight=function(d){this.rect.height=d},c.prototype.getCenterX=function(){return this.rect.x+this.rect.width/2},c.prototype.getCenterY=function(){return this.rect.y+this.rect.height/2},c.prototype.getCenter=function(){return new f(this.rect.x+this.rect.width/2,this.rect.y+this.rect.height/2)},c.prototype.getLocation=function(){return new f(this.rect.x,this.rect.y)},c.prototype.getRect=function(){return this.rect},c.prototype.getDiagonal=function(){return Math.sqrt(this.rect.width*this.rect.width+this.rect.height*this.rect.height)},c.prototype.getHalfTheDiagonal=function(){return Math.sqrt(this.rect.height*this.rect.height+this.rect.width*this.rect.width)/2},c.prototype.setRect=function(d,v){this.rect.x=d.x,this.rect.y=d.y,this.rect.width=v.width,this.rect.height=v.height},c.prototype.setCenter=function(d,v){this.rect.x=d-this.rect.width/2,this.rect.y=v-this.rect.height/2},c.prototype.setLocation=function(d,v){this.rect.x=d,this.rect.y=v},c.prototype.moveBy=function(d,v){this.rect.x+=d,this.rect.y+=v},c.prototype.getEdgeListToNode=function(d){var v=[],g=this;return g.edges.forEach(function(p){if(p.target==d){if(p.source!=g)throw"Incorrect edge source!";v.push(p)}}),v},c.prototype.getEdgesBetween=function(d){var v=[],g=this;return g.edges.forEach(function(p){if(!(p.source==g||p.target==g))throw"Incorrect edge source and/or target";(p.target==d||p.source==d)&&v.push(p)}),v},c.prototype.getNeighborsList=function(){var d=new Set,v=this;return v.edges.forEach(function(g){if(g.source==v)d.add(g.target);else{if(g.target!=v)throw"Incorrect incidency!";d.add(g.source)}}),d},c.prototype.withChildren=function(){var d=new Set,v,g;if(d.add(this),this.child!=null)for(var p=this.child.getNodes(),y=0;y<p.length;y++)v=p[y],g=v.withChildren(),g.forEach(function(m){d.add(m)});return d},c.prototype.getNoOfChildren=function(){var d=0,v;if(this.child==null)d=1;else for(var g=this.child.getNodes(),p=0;p<g.length;p++)v=g[p],d+=v.getNoOfChildren();return d==0&&(d=1),d},c.prototype.getEstimatedSize=function(){if(this.estimatedSize==s.MIN_VALUE)throw"assert failed";return this.estimatedSize},c.prototype.calcEstimatedSize=function(){return this.child==null?this.estimatedSize=(this.rect.width+this.rect.height)/2:(this.estimatedSize=this.child.calcEstimatedSize(),this.rect.width=this.estimatedSize,this.rect.height=this.estimatedSize,this.estimatedSize)},c.prototype.scatter=function(){var d,v,g=-u.INITIAL_WORLD_BOUNDARY,p=u.INITIAL_WORLD_BOUNDARY;d=u.WORLD_CENTER_X+l.nextDouble()*(p-g)+g;var y=-u.INITIAL_WORLD_BOUNDARY,m=u.INITIAL_WORLD_BOUNDARY;v=u.WORLD_CENTER_Y+l.nextDouble()*(m-y)+y,this.rect.x=d,this.rect.y=v},c.prototype.updateBounds=function(){if(this.getChild()==null)throw"assert failed";if(this.getChild().getNodes().length!=0){var d=this.getChild();if(d.updateBounds(!0),this.rect.x=d.getLeft(),this.rect.y=d.getTop(),this.setWidth(d.getRight()-d.getLeft()),this.setHeight(d.getBottom()-d.getTop()),u.NODE_DIMENSIONS_INCLUDE_LABELS){var v=d.getRight()-d.getLeft(),g=d.getBottom()-d.getTop();this.labelWidth>v&&(this.rect.x-=(this.labelWidth-v)/2,this.setWidth(this.labelWidth)),this.labelHeight>g&&(this.labelPos=="center"?this.rect.y-=(this.labelHeight-g)/2:this.labelPos=="top"&&(this.rect.y-=this.labelHeight-g),this.setHeight(this.labelHeight))}}},c.prototype.getInclusionTreeDepth=function(){if(this.inclusionTreeDepth==s.MAX_VALUE)throw"assert failed";return this.inclusionTreeDepth},c.prototype.transform=function(d){var v=this.rect.x;v>u.WORLD_BOUNDARY?v=u.WORLD_BOUNDARY:v<-u.WORLD_BOUNDARY&&(v=-u.WORLD_BOUNDARY);var g=this.rect.y;g>u.WORLD_BOUNDARY?g=u.WORLD_BOUNDARY:g<-u.WORLD_BOUNDARY&&(g=-u.WORLD_BOUNDARY);var p=new f(v,g),y=d.inverseTransformPoint(p);this.setLocation(y.x,y.y)},c.prototype.getLeft=function(){return this.rect.x},c.prototype.getRight=function(){return this.rect.x+this.rect.width},c.prototype.getTop=function(){return this.rect.y},c.prototype.getBottom=function(){return this.rect.y+this.rect.height},c.prototype.getParent=function(){return this.owner==null?null:this.owner.getParent()},r.exports=c},function(r,n,a){function i(s,o){s==null&&o==null?(this.x=0,this.y=0):(this.x=s,this.y=o)}i.prototype.getX=function(){return this.x},i.prototype.getY=function(){return this.y},i.prototype.setX=function(s){this.x=s},i.prototype.setY=function(s){this.y=s},i.prototype.getDifference=function(s){return new DimensionD(this.x-s.x,this.y-s.y)},i.prototype.getCopy=function(){return new i(this.x,this.y)},i.prototype.translate=function(s){return this.x+=s.width,this.y+=s.height,this},r.exports=i},function(r,n,a){var i=a(2),s=a(10),o=a(0),u=a(6),l=a(3),f=a(1),c=a(13),h=a(12),d=a(11);function v(p,y,m){i.call(this,m),this.estimatedSize=s.MIN_VALUE,this.margin=o.DEFAULT_GRAPH_MARGIN,this.edges=[],this.nodes=[],this.isConnected=!1,this.parent=p,y!=null&&y instanceof u?this.graphManager=y:y!=null&&y instanceof Layout&&(this.graphManager=y.graphManager)}v.prototype=Object.create(i.prototype);for(var g in i)v[g]=i[g];v.prototype.getNodes=function(){return this.nodes},v.prototype.getEdges=function(){return this.edges},v.prototype.getGraphManager=function(){return this.graphManager},v.prototype.getParent=function(){return this.parent},v.prototype.getLeft=function(){return this.left},v.prototype.getRight=function(){return this.right},v.prototype.getTop=function(){return this.top},v.prototype.getBottom=function(){return this.bottom},v.prototype.isConnected=function(){return this.isConnected},v.prototype.add=function(p,y,m){if(y==null&&m==null){var b=p;if(this.graphManager==null)throw"Graph has no graph mgr!";if(this.getNodes().indexOf(b)>-1)throw"Node already in graph!";return b.owner=this,this.getNodes().push(b),b}else{var E=p;if(!(this.getNodes().indexOf(y)>-1&&this.getNodes().indexOf(m)>-1))throw"Source or target not in graph!";if(!(y.owner==m.owner&&y.owner==this))throw"Both owners must be this graph!";return y.owner!=m.owner?null:(E.source=y,E.target=m,E.isInterGraph=!1,this.getEdges().push(E),y.edges.push(E),m!=y&&m.edges.push(E),E)}},v.prototype.remove=function(p){var y=p;if(p instanceof l){if(y==null)throw"Node is null!";if(!(y.owner!=null&&y.owner==this))throw"Owner graph is invalid!";if(this.graphManager==null)throw"Owner graph manager is invalid!";for(var m=y.edges.slice(),b,E=m.length,T=0;T<E;T++)b=m[T],b.isInterGraph?this.graphManager.remove(b):b.source.owner.remove(b);var I=this.nodes.indexOf(y);if(I==-1)throw"Node not in owner node list!";this.nodes.splice(I,1)}else if(p instanceof f){var b=p;if(b==null)throw"Edge is null!";if(!(b.source!=null&&b.target!=null))throw"Source and/or target is null!";if(!(b.source.owner!=null&&b.target.owner!=null&&b.source.owner==this&&b.target.owner==this))throw"Source and/or target owner is invalid!";var w=b.source.edges.indexOf(b),x=b.target.edges.indexOf(b);if(!(w>-1&&x>-1))throw"Source and/or target doesn't know this edge!";b.source.edges.splice(w,1),b.target!=b.source&&b.target.edges.splice(x,1);var I=b.source.owner.getEdges().indexOf(b);if(I==-1)throw"Not in owner's edge list!";b.source.owner.getEdges().splice(I,1)}},v.prototype.updateLeftTop=function(){for(var p=s.MAX_VALUE,y=s.MAX_VALUE,m,b,E,T=this.getNodes(),I=T.length,w=0;w<I;w++){var x=T[w];m=x.getTop(),b=x.getLeft(),p>m&&(p=m),y>b&&(y=b)}return p==s.MAX_VALUE?null:(T[0].getParent().paddingLeft!=null?E=T[0].getParent().paddingLeft:E=this.margin,this.left=y-E,this.top=p-E,new h(this.left,this.top))},v.prototype.updateBounds=function(p){for(var y=s.MAX_VALUE,m=-s.MAX_VALUE,b=s.MAX_VALUE,E=-s.MAX_VALUE,T,I,w,x,C,S=this.nodes,A=S.length,R=0;R<A;R++){var D=S[R];p&&D.child!=null&&D.updateBounds(),T=D.getLeft(),I=D.getRight(),w=D.getTop(),x=D.getBottom(),y>T&&(y=T),m<I&&(m=I),b>w&&(b=w),E<x&&(E=x)}var _=new c(y,b,m-y,E-b);y==s.MAX_VALUE&&(this.left=this.parent.getLeft(),this.right=this.parent.getRight(),this.top=this.parent.getTop(),this.bottom=this.parent.getBottom()),S[0].getParent().paddingLeft!=null?C=S[0].getParent().paddingLeft:C=this.margin,this.left=_.x-C,this.right=_.x+_.width+C,this.top=_.y-C,this.bottom=_.y+_.height+C},v.calculateBounds=function(p){for(var y=s.MAX_VALUE,m=-s.MAX_VALUE,b=s.MAX_VALUE,E=-s.MAX_VALUE,T,I,w,x,C=p.length,S=0;S<C;S++){var A=p[S];T=A.getLeft(),I=A.getRight(),w=A.getTop(),x=A.getBottom(),y>T&&(y=T),m<I&&(m=I),b>w&&(b=w),E<x&&(E=x)}var R=new c(y,b,m-y,E-b);return R},v.prototype.getInclusionTreeDepth=function(){return this==this.graphManager.getRoot()?1:this.parent.getInclusionTreeDepth()},v.prototype.getEstimatedSize=function(){if(this.estimatedSize==s.MIN_VALUE)throw"assert failed";return this.estimatedSize},v.prototype.calcEstimatedSize=function(){for(var p=0,y=this.nodes,m=y.length,b=0;b<m;b++){var E=y[b];p+=E.calcEstimatedSize()}return p==0?this.estimatedSize=o.EMPTY_COMPOUND_NODE_SIZE:this.estimatedSize=p/Math.sqrt(this.nodes.length),this.estimatedSize},v.prototype.updateConnected=function(){var p=this;if(this.nodes.length==0){this.isConnected=!0;return}var y=new d,m=new Set,b=this.nodes[0],E,T,I=b.withChildren();for(I.forEach(function(R){y.push(R),m.add(R)});y.length!==0;){b=y.shift(),E=b.getEdges();for(var w=E.length,x=0;x<w;x++){var C=E[x];if(T=C.getOtherEndInGraph(b,this),T!=null&&!m.has(T)){var S=T.withChildren();S.forEach(function(R){y.push(R),m.add(R)})}}}if(this.isConnected=!1,m.size>=this.nodes.length){var A=0;m.forEach(function(R){R.owner==p&&A++}),A==this.nodes.length&&(this.isConnected=!0)}},r.exports=v},function(r,n,a){var i,s=a(1);function o(u){i=a(5),this.layout=u,this.graphs=[],this.edges=[]}o.prototype.addRoot=function(){var u=this.layout.newGraph(),l=this.layout.newNode(null),f=this.add(u,l);return this.setRootGraph(f),this.rootGraph},o.prototype.add=function(u,l,f,c,h){if(f==null&&c==null&&h==null){if(u==null)throw"Graph is null!";if(l==null)throw"Parent node is null!";if(this.graphs.indexOf(u)>-1)throw"Graph already in this graph mgr!";if(this.graphs.push(u),u.parent!=null)throw"Already has a parent!";if(l.child!=null)throw"Already has a child!";return u.parent=l,l.child=u,u}else{h=f,c=l,f=u;var d=c.getOwner(),v=h.getOwner();if(!(d!=null&&d.getGraphManager()==this))throw"Source not in this graph mgr!";if(!(v!=null&&v.getGraphManager()==this))throw"Target not in this graph mgr!";if(d==v)return f.isInterGraph=!1,d.add(f,c,h);if(f.isInterGraph=!0,f.source=c,f.target=h,this.edges.indexOf(f)>-1)throw"Edge already in inter-graph edge list!";if(this.edges.push(f),!(f.source!=null&&f.target!=null))throw"Edge source and/or target is null!";if(!(f.source.edges.indexOf(f)==-1&&f.target.edges.indexOf(f)==-1))throw"Edge already in source and/or target incidency list!";return f.source.edges.push(f),f.target.edges.push(f),f}},o.prototype.remove=function(u){if(u instanceof i){var l=u;if(l.getGraphManager()!=this)throw"Graph not in this graph mgr";if(!(l==this.rootGraph||l.parent!=null&&l.parent.graphManager==this))throw"Invalid parent node!";var f=[];f=f.concat(l.getEdges());for(var c,h=f.length,d=0;d<h;d++)c=f[d],l.remove(c);var v=[];v=v.concat(l.getNodes());var g;h=v.length;for(var d=0;d<h;d++)g=v[d],l.remove(g);l==this.rootGraph&&this.setRootGraph(null);var p=this.graphs.indexOf(l);this.graphs.splice(p,1),l.parent=null}else if(u instanceof s){if(c=u,c==null)throw"Edge is null!";if(!c.isInterGraph)throw"Not an inter-graph edge!";if(!(c.source!=null&&c.target!=null))throw"Source and/or target is null!";if(!(c.source.edges.indexOf(c)!=-1&&c.target.edges.indexOf(c)!=-1))throw"Source and/or target doesn't know this edge!";var p=c.source.edges.indexOf(c);if(c.source.edges.splice(p,1),p=c.target.edges.indexOf(c),c.target.edges.splice(p,1),!(c.source.owner!=null&&c.source.owner.getGraphManager()!=null))throw"Edge owner graph or owner graph manager is null!";if(c.source.owner.getGraphManager().edges.indexOf(c)==-1)throw"Not in owner graph manager's edge list!";var p=c.source.owner.getGraphManager().edges.indexOf(c);c.source.owner.getGraphManager().edges.splice(p,1)}},o.prototype.updateBounds=function(){this.rootGraph.updateBounds(!0)},o.prototype.getGraphs=function(){return this.graphs},o.prototype.getAllNodes=function(){if(this.allNodes==null){for(var u=[],l=this.getGraphs(),f=l.length,c=0;c<f;c++)u=u.concat(l[c].getNodes());this.allNodes=u}return this.allNodes},o.prototype.resetAllNodes=function(){this.allNodes=null},o.prototype.resetAllEdges=function(){this.allEdges=null},o.prototype.resetAllNodesToApplyGravitation=function(){this.allNodesToApplyGravitation=null},o.prototype.getAllEdges=function(){if(this.allEdges==null){var u=[],l=this.getGraphs();l.length;for(var f=0;f<l.length;f++)u=u.concat(l[f].getEdges());u=u.concat(this.edges),this.allEdges=u}return this.allEdges},o.prototype.getAllNodesToApplyGravitation=function(){return this.allNodesToApplyGravitation},o.prototype.setAllNodesToApplyGravitation=function(u){if(this.allNodesToApplyGravitation!=null)throw"assert failed";this.allNodesToApplyGravitation=u},o.prototype.getRoot=function(){return this.rootGraph},o.prototype.setRootGraph=function(u){if(u.getGraphManager()!=this)throw"Root not in this graph mgr!";this.rootGraph=u,u.parent==null&&(u.parent=this.layout.newNode("Root node"))},o.prototype.getLayout=function(){return this.layout},o.prototype.isOneAncestorOfOther=function(u,l){if(!(u!=null&&l!=null))throw"assert failed";if(u==l)return!0;var f=u.getOwner(),c;do{if(c=f.getParent(),c==null)break;if(c==l)return!0;if(f=c.getOwner(),f==null)break}while(!0);f=l.getOwner();do{if(c=f.getParent(),c==null)break;if(c==u)return!0;if(f=c.getOwner(),f==null)break}while(!0);return!1},o.prototype.calcLowestCommonAncestors=function(){for(var u,l,f,c,h,d=this.getAllEdges(),v=d.length,g=0;g<v;g++){if(u=d[g],l=u.source,f=u.target,u.lca=null,u.sourceInLca=l,u.targetInLca=f,l==f){u.lca=l.getOwner();continue}for(c=l.getOwner();u.lca==null;){for(u.targetInLca=f,h=f.getOwner();u.lca==null;){if(h==c){u.lca=h;break}if(h==this.rootGraph)break;if(u.lca!=null)throw"assert failed";u.targetInLca=h.getParent(),h=u.targetInLca.getOwner()}if(c==this.rootGraph)break;u.lca==null&&(u.sourceInLca=c.getParent(),c=u.sourceInLca.getOwner())}if(u.lca==null)throw"assert failed"}},o.prototype.calcLowestCommonAncestor=function(u,l){if(u==l)return u.getOwner();var f=u.getOwner();do{if(f==null)break;var c=l.getOwner();do{if(c==null)break;if(c==f)return c;c=c.getParent().getOwner()}while(!0);f=f.getParent().getOwner()}while(!0);return f},o.prototype.calcInclusionTreeDepths=function(u,l){u==null&&l==null&&(u=this.rootGraph,l=1);for(var f,c=u.getNodes(),h=c.length,d=0;d<h;d++)f=c[d],f.inclusionTreeDepth=l,f.child!=null&&this.calcInclusionTreeDepths(f.child,l+1)},o.prototype.includesInvalidEdge=function(){for(var u,l=this.edges.length,f=0;f<l;f++)if(u=this.edges[f],this.isOneAncestorOfOther(u.source,u.target))return!0;return!1},r.exports=o},function(r,n,a){var i=a(0);function s(){}for(var o in i)s[o]=i[o];s.MAX_ITERATIONS=2500,s.DEFAULT_EDGE_LENGTH=50,s.DEFAULT_SPRING_STRENGTH=.45,s.DEFAULT_REPULSION_STRENGTH=4500,s.DEFAULT_GRAVITY_STRENGTH=.4,s.DEFAULT_COMPOUND_GRAVITY_STRENGTH=1,s.DEFAULT_GRAVITY_RANGE_FACTOR=3.8,s.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=1.5,s.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION=!0,s.DEFAULT_USE_SMART_REPULSION_RANGE_CALCULATION=!0,s.DEFAULT_COOLING_FACTOR_INCREMENTAL=.3,s.COOLING_ADAPTATION_FACTOR=.33,s.ADAPTATION_LOWER_NODE_LIMIT=1e3,s.ADAPTATION_UPPER_NODE_LIMIT=5e3,s.MAX_NODE_DISPLACEMENT_INCREMENTAL=100,s.MAX_NODE_DISPLACEMENT=s.MAX_NODE_DISPLACEMENT_INCREMENTAL*3,s.MIN_REPULSION_DIST=s.DEFAULT_EDGE_LENGTH/10,s.CONVERGENCE_CHECK_PERIOD=100,s.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=.1,s.MIN_EDGE_LENGTH=1,s.GRID_CALCULATION_CHECK_PERIOD=10,r.exports=s},function(r,n,a){var i=a(12);function s(){}s.calcSeparationAmount=function(o,u,l,f){if(!o.intersects(u))throw"assert failed";var c=new Array(2);this.decideDirectionsForOverlappingNodes(o,u,c),l[0]=Math.min(o.getRight(),u.getRight())-Math.max(o.x,u.x),l[1]=Math.min(o.getBottom(),u.getBottom())-Math.max(o.y,u.y),o.getX()<=u.getX()&&o.getRight()>=u.getRight()?l[0]+=Math.min(u.getX()-o.getX(),o.getRight()-u.getRight()):u.getX()<=o.getX()&&u.getRight()>=o.getRight()&&(l[0]+=Math.min(o.getX()-u.getX(),u.getRight()-o.getRight())),o.getY()<=u.getY()&&o.getBottom()>=u.getBottom()?l[1]+=Math.min(u.getY()-o.getY(),o.getBottom()-u.getBottom()):u.getY()<=o.getY()&&u.getBottom()>=o.getBottom()&&(l[1]+=Math.min(o.getY()-u.getY(),u.getBottom()-o.getBottom()));var h=Math.abs((u.getCenterY()-o.getCenterY())/(u.getCenterX()-o.getCenterX()));u.getCenterY()===o.getCenterY()&&u.getCenterX()===o.getCenterX()&&(h=1);var d=h*l[0],v=l[1]/h;l[0]<v?v=l[0]:d=l[1],l[0]=-1*c[0]*(v/2+f),l[1]=-1*c[1]*(d/2+f)},s.decideDirectionsForOverlappingNodes=function(o,u,l){o.getCenterX()<u.getCenterX()?l[0]=-1:l[0]=1,o.getCenterY()<u.getCenterY()?l[1]=-1:l[1]=1},s.getIntersection2=function(o,u,l){var f=o.getCenterX(),c=o.getCenterY(),h=u.getCenterX(),d=u.getCenterY();if(o.intersects(u))return l[0]=f,l[1]=c,l[2]=h,l[3]=d,!0;var v=o.getX(),g=o.getY(),p=o.getRight(),y=o.getX(),m=o.getBottom(),b=o.getRight(),E=o.getWidthHalf(),T=o.getHeightHalf(),I=u.getX(),w=u.getY(),x=u.getRight(),C=u.getX(),S=u.getBottom(),A=u.getRight(),R=u.getWidthHalf(),D=u.getHeightHalf(),_=!1,M=!1;if(f===h){if(c>d)return l[0]=f,l[1]=g,l[2]=h,l[3]=S,!1;if(c<d)return l[0]=f,l[1]=m,l[2]=h,l[3]=w,!1}else if(c===d){if(f>h)return l[0]=v,l[1]=c,l[2]=x,l[3]=d,!1;if(f<h)return l[0]=p,l[1]=c,l[2]=I,l[3]=d,!1}else{var k=o.height/o.width,O=u.height/u.width,P=(d-c)/(h-f),B=void 0,F=void 0,N=void 0,q=void 0,V=void 0,Y=void 0;if(-k===P?f>h?(l[0]=y,l[1]=m,_=!0):(l[0]=p,l[1]=g,_=!0):k===P&&(f>h?(l[0]=v,l[1]=g,_=!0):(l[0]=b,l[1]=m,_=!0)),-O===P?h>f?(l[2]=C,l[3]=S,M=!0):(l[2]=x,l[3]=w,M=!0):O===P&&(h>f?(l[2]=I,l[3]=w,M=!0):(l[2]=A,l[3]=S,M=!0)),_&&M)return!1;if(f>h?c>d?(B=this.getCardinalDirection(k,P,4),F=this.getCardinalDirection(O,P,2)):(B=this.getCardinalDirection(-k,P,3),F=this.getCardinalDirection(-O,P,1)):c>d?(B=this.getCardinalDirection(-k,P,1),F=this.getCardinalDirection(-O,P,3)):(B=this.getCardinalDirection(k,P,2),F=this.getCardinalDirection(O,P,4)),!_)switch(B){case 1:q=g,N=f+-T/P,l[0]=N,l[1]=q;break;case 2:N=b,q=c+E*P,l[0]=N,l[1]=q;break;case 3:q=m,N=f+T/P,l[0]=N,l[1]=q;break;case 4:N=y,q=c+-E*P,l[0]=N,l[1]=q;break}if(!M)switch(F){case 1:Y=w,V=h+-D/P,l[2]=V,l[3]=Y;break;case 2:V=A,Y=d+R*P,l[2]=V,l[3]=Y;break;case 3:Y=S,V=h+D/P,l[2]=V,l[3]=Y;break;case 4:V=C,Y=d+-R*P,l[2]=V,l[3]=Y;break}}return!1},s.getCardinalDirection=function(o,u,l){return o>u?l:1+l%4},s.getIntersection=function(o,u,l,f){if(f==null)return this.getIntersection2(o,u,l);var c=o.x,h=o.y,d=u.x,v=u.y,g=l.x,p=l.y,y=f.x,m=f.y,b=void 0,E=void 0,T=void 0,I=void 0,w=void 0,x=void 0,C=void 0,S=void 0,A=void 0;return T=v-h,w=c-d,C=d*h-c*v,I=m-p,x=g-y,S=y*p-g*m,A=T*x-I*w,A===0?null:(b=(w*S-x*C)/A,E=(I*C-T*S)/A,new i(b,E))},s.angleOfVector=function(o,u,l,f){var c=void 0;return o!==l?(c=Math.atan((f-u)/(l-o)),l<o?c+=Math.PI:f<u&&(c+=this.TWO_PI)):f<u?c=this.ONE_AND_HALF_PI:c=this.HALF_PI,c},s.doIntersect=function(o,u,l,f){var c=o.x,h=o.y,d=u.x,v=u.y,g=l.x,p=l.y,y=f.x,m=f.y,b=(d-c)*(m-p)-(y-g)*(v-h);if(b===0)return!1;var E=((m-p)*(y-c)+(g-y)*(m-h))/b,T=((h-v)*(y-c)+(d-c)*(m-h))/b;return 0<E&&E<1&&0<T&&T<1},s.HALF_PI=.5*Math.PI,s.ONE_AND_HALF_PI=1.5*Math.PI,s.TWO_PI=2*Math.PI,s.THREE_PI=3*Math.PI,r.exports=s},function(r,n,a){function i(){}i.sign=function(s){return s>0?1:s<0?-1:0},i.floor=function(s){return s<0?Math.ceil(s):Math.floor(s)},i.ceil=function(s){return s<0?Math.floor(s):Math.ceil(s)},r.exports=i},function(r,n,a){function i(){}i.MAX_VALUE=2147483647,i.MIN_VALUE=-2147483648,r.exports=i},function(r,n,a){var i=function(){function c(h,d){for(var v=0;v<d.length;v++){var g=d[v];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(h,g.key,g)}}return function(h,d,v){return d&&c(h.prototype,d),v&&c(h,v),h}}();function s(c,h){if(!(c instanceof h))throw new TypeError("Cannot call a class as a function")}var o=function(h){return{value:h,next:null,prev:null}},u=function(h,d,v,g){return h!==null?h.next=d:g.head=d,v!==null?v.prev=d:g.tail=d,d.prev=h,d.next=v,g.length++,d},l=function(h,d){var v=h.prev,g=h.next;return v!==null?v.next=g:d.head=g,g!==null?g.prev=v:d.tail=v,h.prev=h.next=null,d.length--,h},f=function(){function c(h){var d=this;s(this,c),this.length=0,this.head=null,this.tail=null,h!=null&&h.forEach(function(v){return d.push(v)})}return i(c,[{key:"size",value:function(){return this.length}},{key:"insertBefore",value:function(d,v){return u(v.prev,o(d),v,this)}},{key:"insertAfter",value:function(d,v){return u(v,o(d),v.next,this)}},{key:"insertNodeBefore",value:function(d,v){return u(v.prev,d,v,this)}},{key:"insertNodeAfter",value:function(d,v){return u(v,d,v.next,this)}},{key:"push",value:function(d){return u(this.tail,o(d),null,this)}},{key:"unshift",value:function(d){return u(null,o(d),this.head,this)}},{key:"remove",value:function(d){return l(d,this)}},{key:"pop",value:function(){return l(this.tail,this).value}},{key:"popNode",value:function(){return l(this.tail,this)}},{key:"shift",value:function(){return l(this.head,this).value}},{key:"shiftNode",value:function(){return l(this.head,this)}},{key:"get_object_at",value:function(d){if(d<=this.length()){for(var v=1,g=this.head;v<d;)g=g.next,v++;return g.value}}},{key:"set_object_at",value:function(d,v){if(d<=this.length()){for(var g=1,p=this.head;g<d;)p=p.next,g++;p.value=v}}}]),c}();r.exports=f},function(r,n,a){function i(s,o,u){this.x=null,this.y=null,s==null&&o==null&&u==null?(this.x=0,this.y=0):typeof s=="number"&&typeof o=="number"&&u==null?(this.x=s,this.y=o):s.constructor.name=="Point"&&o==null&&u==null&&(u=s,this.x=u.x,this.y=u.y)}i.prototype.getX=function(){return this.x},i.prototype.getY=function(){return this.y},i.prototype.getLocation=function(){return new i(this.x,this.y)},i.prototype.setLocation=function(s,o,u){s.constructor.name=="Point"&&o==null&&u==null?(u=s,this.setLocation(u.x,u.y)):typeof s=="number"&&typeof o=="number"&&u==null&&(parseInt(s)==s&&parseInt(o)==o?this.move(s,o):(this.x=Math.floor(s+.5),this.y=Math.floor(o+.5)))},i.prototype.move=function(s,o){this.x=s,this.y=o},i.prototype.translate=function(s,o){this.x+=s,this.y+=o},i.prototype.equals=function(s){if(s.constructor.name=="Point"){var o=s;return this.x==o.x&&this.y==o.y}return this==s},i.prototype.toString=function(){return new i().constructor.name+"[x="+this.x+",y="+this.y+"]"},r.exports=i},function(r,n,a){function i(s,o,u,l){this.x=0,this.y=0,this.width=0,this.height=0,s!=null&&o!=null&&u!=null&&l!=null&&(this.x=s,this.y=o,this.width=u,this.height=l)}i.prototype.getX=function(){return this.x},i.prototype.setX=function(s){this.x=s},i.prototype.getY=function(){return this.y},i.prototype.setY=function(s){this.y=s},i.prototype.getWidth=function(){return this.width},i.prototype.setWidth=function(s){this.width=s},i.prototype.getHeight=function(){return this.height},i.prototype.setHeight=function(s){this.height=s},i.prototype.getRight=function(){return this.x+this.width},i.prototype.getBottom=function(){return this.y+this.height},i.prototype.intersects=function(s){return!(this.getRight()<s.x||this.getBottom()<s.y||s.getRight()<this.x||s.getBottom()<this.y)},i.prototype.getCenterX=function(){return this.x+this.width/2},i.prototype.getMinX=function(){return this.getX()},i.prototype.getMaxX=function(){return this.getX()+this.width},i.prototype.getCenterY=function(){return this.y+this.height/2},i.prototype.getMinY=function(){return this.getY()},i.prototype.getMaxY=function(){return this.getY()+this.height},i.prototype.getWidthHalf=function(){return this.width/2},i.prototype.getHeightHalf=function(){return this.height/2},r.exports=i},function(r,n,a){var i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o};function s(){}s.lastID=0,s.createID=function(o){return s.isPrimitive(o)?o:(o.uniqueID!=null||(o.uniqueID=s.getString(),s.lastID++),o.uniqueID)},s.getString=function(o){return o==null&&(o=s.lastID),"Object#"+o},s.isPrimitive=function(o){var u=typeof o>"u"?"undefined":i(o);return o==null||u!="object"&&u!="function"},r.exports=s},function(r,n,a){function i(g){if(Array.isArray(g)){for(var p=0,y=Array(g.length);p<g.length;p++)y[p]=g[p];return y}else return Array.from(g)}var s=a(0),o=a(6),u=a(3),l=a(1),f=a(5),c=a(4),h=a(17),d=a(27);function v(g){d.call(this),this.layoutQuality=s.QUALITY,this.createBendsAsNeeded=s.DEFAULT_CREATE_BENDS_AS_NEEDED,this.incremental=s.DEFAULT_INCREMENTAL,this.animationOnLayout=s.DEFAULT_ANIMATION_ON_LAYOUT,this.animationDuringLayout=s.DEFAULT_ANIMATION_DURING_LAYOUT,this.animationPeriod=s.DEFAULT_ANIMATION_PERIOD,this.uniformLeafNodeSizes=s.DEFAULT_UNIFORM_LEAF_NODE_SIZES,this.edgeToDummyNodes=new Map,this.graphManager=new o(this),this.isLayoutFinished=!1,this.isSubLayout=!1,this.isRemoteUse=!1,g!=null&&(this.isRemoteUse=g)}v.RANDOM_SEED=1,v.prototype=Object.create(d.prototype),v.prototype.getGraphManager=function(){return this.graphManager},v.prototype.getAllNodes=function(){return this.graphManager.getAllNodes()},v.prototype.getAllEdges=function(){return this.graphManager.getAllEdges()},v.prototype.getAllNodesToApplyGravitation=function(){return this.graphManager.getAllNodesToApplyGravitation()},v.prototype.newGraphManager=function(){var g=new o(this);return this.graphManager=g,g},v.prototype.newGraph=function(g){return new f(null,this.graphManager,g)},v.prototype.newNode=function(g){return new u(this.graphManager,g)},v.prototype.newEdge=function(g){return new l(null,null,g)},v.prototype.checkLayoutSuccess=function(){return this.graphManager.getRoot()==null||this.graphManager.getRoot().getNodes().length==0||this.graphManager.includesInvalidEdge()},v.prototype.runLayout=function(){this.isLayoutFinished=!1,this.tilingPreLayout&&this.tilingPreLayout(),this.initParameters();var g;return this.checkLayoutSuccess()?g=!1:g=this.layout(),s.ANIMATE==="during"?!1:(g&&(this.isSubLayout||this.doPostLayout()),this.tilingPostLayout&&this.tilingPostLayout(),this.isLayoutFinished=!0,g)},v.prototype.doPostLayout=function(){this.incremental||this.transform(),this.update()},v.prototype.update2=function(){if(this.createBendsAsNeeded&&(this.createBendpointsFromDummyNodes(),this.graphManager.resetAllEdges()),!this.isRemoteUse){for(var g=this.graphManager.getAllEdges(),p=0;p<g.length;p++)g[p];for(var y=this.graphManager.getRoot().getNodes(),p=0;p<y.length;p++)y[p];this.update(this.graphManager.getRoot())}},v.prototype.update=function(g){if(g==null)this.update2();else if(g instanceof u){var p=g;if(p.getChild()!=null)for(var y=p.getChild().getNodes(),m=0;m<y.length;m++)update(y[m]);if(p.vGraphObject!=null){var b=p.vGraphObject;b.update(p)}}else if(g instanceof l){var E=g;if(E.vGraphObject!=null){var T=E.vGraphObject;T.update(E)}}else if(g instanceof f){var I=g;if(I.vGraphObject!=null){var w=I.vGraphObject;w.update(I)}}},v.prototype.initParameters=function(){this.isSubLayout||(this.layoutQuality=s.QUALITY,this.animationDuringLayout=s.DEFAULT_ANIMATION_DURING_LAYOUT,this.animationPeriod=s.DEFAULT_ANIMATION_PERIOD,this.animationOnLayout=s.DEFAULT_ANIMATION_ON_LAYOUT,this.incremental=s.DEFAULT_INCREMENTAL,this.createBendsAsNeeded=s.DEFAULT_CREATE_BENDS_AS_NEEDED,this.uniformLeafNodeSizes=s.DEFAULT_UNIFORM_LEAF_NODE_SIZES),this.animationDuringLayout&&(this.animationOnLayout=!1)},v.prototype.transform=function(g){if(g==null)this.transform(new c(0,0));else{var p=new h,y=this.graphManager.getRoot().updateLeftTop();if(y!=null){p.setWorldOrgX(g.x),p.setWorldOrgY(g.y),p.setDeviceOrgX(y.x),p.setDeviceOrgY(y.y);for(var m=this.getAllNodes(),b,E=0;E<m.length;E++)b=m[E],b.transform(p)}}},v.prototype.positionNodesRandomly=function(g){if(g==null)this.positionNodesRandomly(this.getGraphManager().getRoot()),this.getGraphManager().getRoot().updateBounds(!0);else for(var p,y,m=g.getNodes(),b=0;b<m.length;b++)p=m[b],y=p.getChild(),y==null||y.getNodes().length==0?p.scatter():(this.positionNodesRandomly(y),p.updateBounds())},v.prototype.getFlatForest=function(){for(var g=[],p=!0,y=this.graphManager.getRoot().getNodes(),m=!0,b=0;b<y.length;b++)y[b].getChild()!=null&&(m=!1);if(!m)return g;var E=new Set,T=[],I=new Map,w=[];for(w=w.concat(y);w.length>0&&p;){for(T.push(w[0]);T.length>0&&p;){var x=T[0];T.splice(0,1),E.add(x);for(var C=x.getEdges(),b=0;b<C.length;b++){var S=C[b].getOtherEnd(x);if(I.get(x)!=S)if(!E.has(S))T.push(S),I.set(S,x);else{p=!1;break}}}if(!p)g=[];else{var A=[].concat(i(E));g.push(A);for(var b=0;b<A.length;b++){var R=A[b],D=w.indexOf(R);D>-1&&w.splice(D,1)}E=new Set,I=new Map}}return g},v.prototype.createDummyNodesForBendpoints=function(g){for(var p=[],y=g.source,m=this.graphManager.calcLowestCommonAncestor(g.source,g.target),b=0;b<g.bendpoints.length;b++){var E=this.newNode(null);E.setRect(new Point(0,0),new Dimension(1,1)),m.add(E);var T=this.newEdge(null);this.graphManager.add(T,y,E),p.add(E),y=E}var T=this.newEdge(null);return this.graphManager.add(T,y,g.target),this.edgeToDummyNodes.set(g,p),g.isInterGraph()?this.graphManager.remove(g):m.remove(g),p},v.prototype.createBendpointsFromDummyNodes=function(){var g=[];g=g.concat(this.graphManager.getAllEdges()),g=[].concat(i(this.edgeToDummyNodes.keys())).concat(g);for(var p=0;p<g.length;p++){var y=g[p];if(y.bendpoints.length>0){for(var m=this.edgeToDummyNodes.get(y),b=0;b<m.length;b++){var E=m[b],T=new c(E.getCenterX(),E.getCenterY()),I=y.bendpoints.get(b);I.x=T.x,I.y=T.y,E.getOwner().remove(E)}this.graphManager.add(y,y.source,y.target)}}},v.transform=function(g,p,y,m){if(y!=null&&m!=null){var b=p;if(g<=50){var E=p/y;b-=(p-E)/50*(50-g)}else{var T=p*m;b+=(T-p)/50*(g-50)}return b}else{var I,w;return g<=50?(I=9*p/500,w=p/10):(I=9*p/50,w=-8*p),I*g+w}},v.findCenterOfTree=function(g){var p=[];p=p.concat(g);var y=[],m=new Map,b=!1,E=null;(p.length==1||p.length==2)&&(b=!0,E=p[0]);for(var T=0;T<p.length;T++){var I=p[T],w=I.getNeighborsList().size;m.set(I,I.getNeighborsList().size),w==1&&y.push(I)}var x=[];for(x=x.concat(y);!b;){var C=[];C=C.concat(x),x=[];for(var T=0;T<p.length;T++){var I=p[T],S=p.indexOf(I);S>=0&&p.splice(S,1);var A=I.getNeighborsList();A.forEach(function(_){if(y.indexOf(_)<0){var M=m.get(_),k=M-1;k==1&&x.push(_),m.set(_,k)}})}y=y.concat(x),(p.length==1||p.length==2)&&(b=!0,E=p[0])}return E},v.prototype.setGraphManager=function(g){this.graphManager=g},r.exports=v},function(r,n,a){function i(){}i.seed=1,i.x=0,i.nextDouble=function(){return i.x=Math.sin(i.seed++)*1e4,i.x-Math.floor(i.x)},r.exports=i},function(r,n,a){var i=a(4);function s(o,u){this.lworldOrgX=0,this.lworldOrgY=0,this.ldeviceOrgX=0,this.ldeviceOrgY=0,this.lworldExtX=1,this.lworldExtY=1,this.ldeviceExtX=1,this.ldeviceExtY=1}s.prototype.getWorldOrgX=function(){return this.lworldOrgX},s.prototype.setWorldOrgX=function(o){this.lworldOrgX=o},s.prototype.getWorldOrgY=function(){return this.lworldOrgY},s.prototype.setWorldOrgY=function(o){this.lworldOrgY=o},s.prototype.getWorldExtX=function(){return this.lworldExtX},s.prototype.setWorldExtX=function(o){this.lworldExtX=o},s.prototype.getWorldExtY=function(){return this.lworldExtY},s.prototype.setWorldExtY=function(o){this.lworldExtY=o},s.prototype.getDeviceOrgX=function(){return this.ldeviceOrgX},s.prototype.setDeviceOrgX=function(o){this.ldeviceOrgX=o},s.prototype.getDeviceOrgY=function(){return this.ldeviceOrgY},s.prototype.setDeviceOrgY=function(o){this.ldeviceOrgY=o},s.prototype.getDeviceExtX=function(){return this.ldeviceExtX},s.prototype.setDeviceExtX=function(o){this.ldeviceExtX=o},s.prototype.getDeviceExtY=function(){return this.ldeviceExtY},s.prototype.setDeviceExtY=function(o){this.ldeviceExtY=o},s.prototype.transformX=function(o){var u=0,l=this.lworldExtX;return l!=0&&(u=this.ldeviceOrgX+(o-this.lworldOrgX)*this.ldeviceExtX/l),u},s.prototype.transformY=function(o){var u=0,l=this.lworldExtY;return l!=0&&(u=this.ldeviceOrgY+(o-this.lworldOrgY)*this.ldeviceExtY/l),u},s.prototype.inverseTransformX=function(o){var u=0,l=this.ldeviceExtX;return l!=0&&(u=this.lworldOrgX+(o-this.ldeviceOrgX)*this.lworldExtX/l),u},s.prototype.inverseTransformY=function(o){var u=0,l=this.ldeviceExtY;return l!=0&&(u=this.lworldOrgY+(o-this.ldeviceOrgY)*this.lworldExtY/l),u},s.prototype.inverseTransformPoint=function(o){var u=new i(this.inverseTransformX(o.x),this.inverseTransformY(o.y));return u},r.exports=s},function(r,n,a){function i(d){if(Array.isArray(d)){for(var v=0,g=Array(d.length);v<d.length;v++)g[v]=d[v];return g}else return Array.from(d)}var s=a(15),o=a(7),u=a(0),l=a(8),f=a(9);function c(){s.call(this),this.useSmartIdealEdgeLengthCalculation=o.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION,this.idealEdgeLength=o.DEFAULT_EDGE_LENGTH,this.springConstant=o.DEFAULT_SPRING_STRENGTH,this.repulsionConstant=o.DEFAULT_REPULSION_STRENGTH,this.gravityConstant=o.DEFAULT_GRAVITY_STRENGTH,this.compoundGravityConstant=o.DEFAULT_COMPOUND_GRAVITY_STRENGTH,this.gravityRangeFactor=o.DEFAULT_GRAVITY_RANGE_FACTOR,this.compoundGravityRangeFactor=o.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR,this.displacementThresholdPerNode=3*o.DEFAULT_EDGE_LENGTH/100,this.coolingFactor=o.DEFAULT_COOLING_FACTOR_INCREMENTAL,this.initialCoolingFactor=o.DEFAULT_COOLING_FACTOR_INCREMENTAL,this.totalDisplacement=0,this.oldTotalDisplacement=0,this.maxIterations=o.MAX_ITERATIONS}c.prototype=Object.create(s.prototype);for(var h in s)c[h]=s[h];c.prototype.initParameters=function(){s.prototype.initParameters.call(this,arguments),this.totalIterations=0,this.notAnimatedIterations=0,this.useFRGridVariant=o.DEFAULT_USE_SMART_REPULSION_RANGE_CALCULATION,this.grid=[]},c.prototype.calcIdealEdgeLengths=function(){for(var d,v,g,p,y,m,b=this.getGraphManager().getAllEdges(),E=0;E<b.length;E++)d=b[E],d.idealLength=this.idealEdgeLength,d.isInterGraph&&(g=d.getSource(),p=d.getTarget(),y=d.getSourceInLca().getEstimatedSize(),m=d.getTargetInLca().getEstimatedSize(),this.useSmartIdealEdgeLengthCalculation&&(d.idealLength+=y+m-2*u.SIMPLE_NODE_SIZE),v=d.getLca().getInclusionTreeDepth(),d.idealLength+=o.DEFAULT_EDGE_LENGTH*o.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR*(g.getInclusionTreeDepth()+p.getInclusionTreeDepth()-2*v))},c.prototype.initSpringEmbedder=function(){var d=this.getAllNodes().length;this.incremental?(d>o.ADAPTATION_LOWER_NODE_LIMIT&&(this.coolingFactor=Math.max(this.coolingFactor*o.COOLING_ADAPTATION_FACTOR,this.coolingFactor-(d-o.ADAPTATION_LOWER_NODE_LIMIT)/(o.ADAPTATION_UPPER_NODE_LIMIT-o.ADAPTATION_LOWER_NODE_LIMIT)*this.coolingFactor*(1-o.COOLING_ADAPTATION_FACTOR))),this.maxNodeDisplacement=o.MAX_NODE_DISPLACEMENT_INCREMENTAL):(d>o.ADAPTATION_LOWER_NODE_LIMIT?this.coolingFactor=Math.max(o.COOLING_ADAPTATION_FACTOR,1-(d-o.ADAPTATION_LOWER_NODE_LIMIT)/(o.ADAPTATION_UPPER_NODE_LIMIT-o.ADAPTATION_LOWER_NODE_LIMIT)*(1-o.COOLING_ADAPTATION_FACTOR)):this.coolingFactor=1,this.initialCoolingFactor=this.coolingFactor,this.maxNodeDisplacement=o.MAX_NODE_DISPLACEMENT),this.maxIterations=Math.max(this.getAllNodes().length*5,this.maxIterations),this.totalDisplacementThreshold=this.displacementThresholdPerNode*this.getAllNodes().length,this.repulsionRange=this.calcRepulsionRange()},c.prototype.calcSpringForces=function(){for(var d=this.getAllEdges(),v,g=0;g<d.length;g++)v=d[g],this.calcSpringForce(v,v.idealLength)},c.prototype.calcRepulsionForces=function(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,g,p,y,m,b=this.getAllNodes(),E;if(this.useFRGridVariant)for(this.totalIterations%o.GRID_CALCULATION_CHECK_PERIOD==1&&d&&this.updateGrid(),E=new Set,g=0;g<b.length;g++)y=b[g],this.calculateRepulsionForceOfANode(y,E,d,v),E.add(y);else for(g=0;g<b.length;g++)for(y=b[g],p=g+1;p<b.length;p++)m=b[p],y.getOwner()==m.getOwner()&&this.calcRepulsionForce(y,m)},c.prototype.calcGravitationalForces=function(){for(var d,v=this.getAllNodesToApplyGravitation(),g=0;g<v.length;g++)d=v[g],this.calcGravitationalForce(d)},c.prototype.moveNodes=function(){for(var d=this.getAllNodes(),v,g=0;g<d.length;g++)v=d[g],v.move()},c.prototype.calcSpringForce=function(d,v){var g=d.getSource(),p=d.getTarget(),y,m,b,E;if(this.uniformLeafNodeSizes&&g.getChild()==null&&p.getChild()==null)d.updateLengthSimple();else if(d.updateLength(),d.isOverlapingSourceAndTarget)return;y=d.getLength(),y!=0&&(m=this.springConstant*(y-v),b=m*(d.lengthX/y),E=m*(d.lengthY/y),g.springForceX+=b,g.springForceY+=E,p.springForceX-=b,p.springForceY-=E)},c.prototype.calcRepulsionForce=function(d,v){var g=d.getRect(),p=v.getRect(),y=new Array(2),m=new Array(4),b,E,T,I,w,x,C;if(g.intersects(p)){l.calcSeparationAmount(g,p,y,o.DEFAULT_EDGE_LENGTH/2),x=2*y[0],C=2*y[1];var S=d.noOfChildren*v.noOfChildren/(d.noOfChildren+v.noOfChildren);d.repulsionForceX-=S*x,d.repulsionForceY-=S*C,v.repulsionForceX+=S*x,v.repulsionForceY+=S*C}else this.uniformLeafNodeSizes&&d.getChild()==null&&v.getChild()==null?(b=p.getCenterX()-g.getCenterX(),E=p.getCenterY()-g.getCenterY()):(l.getIntersection(g,p,m),b=m[2]-m[0],E=m[3]-m[1]),Math.abs(b)<o.MIN_REPULSION_DIST&&(b=f.sign(b)*o.MIN_REPULSION_DIST),Math.abs(E)<o.MIN_REPULSION_DIST&&(E=f.sign(E)*o.MIN_REPULSION_DIST),T=b*b+E*E,I=Math.sqrt(T),w=this.repulsionConstant*d.noOfChildren*v.noOfChildren/T,x=w*b/I,C=w*E/I,d.repulsionForceX-=x,d.repulsionForceY-=C,v.repulsionForceX+=x,v.repulsionForceY+=C},c.prototype.calcGravitationalForce=function(d){var v,g,p,y,m,b,E,T;v=d.getOwner(),g=(v.getRight()+v.getLeft())/2,p=(v.getTop()+v.getBottom())/2,y=d.getCenterX()-g,m=d.getCenterY()-p,b=Math.abs(y)+d.getWidth()/2,E=Math.abs(m)+d.getHeight()/2,d.getOwner()==this.graphManager.getRoot()?(T=v.getEstimatedSize()*this.gravityRangeFactor,(b>T||E>T)&&(d.gravitationForceX=-this.gravityConstant*y,d.gravitationForceY=-this.gravityConstant*m)):(T=v.getEstimatedSize()*this.compoundGravityRangeFactor,(b>T||E>T)&&(d.gravitationForceX=-this.gravityConstant*y*this.compoundGravityConstant,d.gravitationForceY=-this.gravityConstant*m*this.compoundGravityConstant))},c.prototype.isConverged=function(){var d,v=!1;return this.totalIterations>this.maxIterations/3&&(v=Math.abs(this.totalDisplacement-this.oldTotalDisplacement)<2),d=this.totalDisplacement<this.totalDisplacementThreshold,this.oldTotalDisplacement=this.totalDisplacement,d||v},c.prototype.animate=function(){this.animationDuringLayout&&!this.isSubLayout&&(this.notAnimatedIterations==this.animationPeriod?(this.update(),this.notAnimatedIterations=0):this.notAnimatedIterations++)},c.prototype.calcNoOfChildrenForAllNodes=function(){for(var d,v=this.graphManager.getAllNodes(),g=0;g<v.length;g++)d=v[g],d.noOfChildren=d.getNoOfChildren()},c.prototype.calcGrid=function(d){var v=0,g=0;v=parseInt(Math.ceil((d.getRight()-d.getLeft())/this.repulsionRange)),g=parseInt(Math.ceil((d.getBottom()-d.getTop())/this.repulsionRange));for(var p=new Array(v),y=0;y<v;y++)p[y]=new Array(g);for(var y=0;y<v;y++)for(var m=0;m<g;m++)p[y][m]=new Array;return p},c.prototype.addNodeToGrid=function(d,v,g){var p=0,y=0,m=0,b=0;p=parseInt(Math.floor((d.getRect().x-v)/this.repulsionRange)),y=parseInt(Math.floor((d.getRect().width+d.getRect().x-v)/this.repulsionRange)),m=parseInt(Math.floor((d.getRect().y-g)/this.repulsionRange)),b=parseInt(Math.floor((d.getRect().height+d.getRect().y-g)/this.repulsionRange));for(var E=p;E<=y;E++)for(var T=m;T<=b;T++)this.grid[E][T].push(d),d.setGridCoordinates(p,y,m,b)},c.prototype.updateGrid=function(){var d,v,g=this.getAllNodes();for(this.grid=this.calcGrid(this.graphManager.getRoot()),d=0;d<g.length;d++)v=g[d],this.addNodeToGrid(v,this.graphManager.getRoot().getLeft(),this.graphManager.getRoot().getTop())},c.prototype.calculateRepulsionForceOfANode=function(d,v,g,p){if(this.totalIterations%o.GRID_CALCULATION_CHECK_PERIOD==1&&g||p){var y=new Set;d.surrounding=new Array;for(var m,b=this.grid,E=d.startX-1;E<d.finishX+2;E++)for(var T=d.startY-1;T<d.finishY+2;T++)if(!(E<0||T<0||E>=b.length||T>=b[0].length)){for(var I=0;I<b[E][T].length;I++)if(m=b[E][T][I],!(d.getOwner()!=m.getOwner()||d==m)&&!v.has(m)&&!y.has(m)){var w=Math.abs(d.getCenterX()-m.getCenterX())-(d.getWidth()/2+m.getWidth()/2),x=Math.abs(d.getCenterY()-m.getCenterY())-(d.getHeight()/2+m.getHeight()/2);w<=this.repulsionRange&&x<=this.repulsionRange&&y.add(m)}}d.surrounding=[].concat(i(y))}for(E=0;E<d.surrounding.length;E++)this.calcRepulsionForce(d,d.surrounding[E])},c.prototype.calcRepulsionRange=function(){return 0},r.exports=c},function(r,n,a){var i=a(1),s=a(7);function o(l,f,c){i.call(this,l,f,c),this.idealLength=s.DEFAULT_EDGE_LENGTH}o.prototype=Object.create(i.prototype);for(var u in i)o[u]=i[u];r.exports=o},function(r,n,a){var i=a(3);function s(u,l,f,c){i.call(this,u,l,f,c),this.springForceX=0,this.springForceY=0,this.repulsionForceX=0,this.repulsionForceY=0,this.gravitationForceX=0,this.gravitationForceY=0,this.displacementX=0,this.displacementY=0,this.startX=0,this.finishX=0,this.startY=0,this.finishY=0,this.surrounding=[]}s.prototype=Object.create(i.prototype);for(var o in i)s[o]=i[o];s.prototype.setGridCoordinates=function(u,l,f,c){this.startX=u,this.finishX=l,this.startY=f,this.finishY=c},r.exports=s},function(r,n,a){function i(s,o){this.width=0,this.height=0,s!==null&&o!==null&&(this.height=o,this.width=s)}i.prototype.getWidth=function(){return this.width},i.prototype.setWidth=function(s){this.width=s},i.prototype.getHeight=function(){return this.height},i.prototype.setHeight=function(s){this.height=s},r.exports=i},function(r,n,a){var i=a(14);function s(){this.map={},this.keys=[]}s.prototype.put=function(o,u){var l=i.createID(o);this.contains(l)||(this.map[l]=u,this.keys.push(o))},s.prototype.contains=function(o){return i.createID(o),this.map[o]!=null},s.prototype.get=function(o){var u=i.createID(o);return this.map[u]},s.prototype.keySet=function(){return this.keys},r.exports=s},function(r,n,a){var i=a(14);function s(){this.set={}}s.prototype.add=function(o){var u=i.createID(o);this.contains(u)||(this.set[u]=o)},s.prototype.remove=function(o){delete this.set[i.createID(o)]},s.prototype.clear=function(){this.set={}},s.prototype.contains=function(o){return this.set[i.createID(o)]==o},s.prototype.isEmpty=function(){return this.size()===0},s.prototype.size=function(){return Object.keys(this.set).length},s.prototype.addAllTo=function(o){for(var u=Object.keys(this.set),l=u.length,f=0;f<l;f++)o.push(this.set[u[f]])},s.prototype.size=function(){return Object.keys(this.set).length},s.prototype.addAll=function(o){for(var u=o.length,l=0;l<u;l++){var f=o[l];this.add(f)}},r.exports=s},function(r,n,a){var i=function(){function l(f,c){for(var h=0;h<c.length;h++){var d=c[h];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(f,d.key,d)}}return function(f,c,h){return c&&l(f.prototype,c),h&&l(f,h),f}}();function s(l,f){if(!(l instanceof f))throw new TypeError("Cannot call a class as a function")}var o=a(11),u=function(){function l(f,c){s(this,l),(c!==null||c!==void 0)&&(this.compareFunction=this._defaultCompareFunction);var h=void 0;f instanceof o?h=f.size():h=f.length,this._quicksort(f,0,h-1)}return i(l,[{key:"_quicksort",value:function(c,h,d){if(h<d){var v=this._partition(c,h,d);this._quicksort(c,h,v),this._quicksort(c,v+1,d)}}},{key:"_partition",value:function(c,h,d){for(var v=this._get(c,h),g=h,p=d;;){for(;this.compareFunction(v,this._get(c,p));)p--;for(;this.compareFunction(this._get(c,g),v);)g++;if(g<p)this._swap(c,g,p),g++,p--;else return p}}},{key:"_get",value:function(c,h){return c instanceof o?c.get_object_at(h):c[h]}},{key:"_set",value:function(c,h,d){c instanceof o?c.set_object_at(h,d):c[h]=d}},{key:"_swap",value:function(c,h,d){var v=this._get(c,h);this._set(c,h,this._get(c,d)),this._set(c,d,v)}},{key:"_defaultCompareFunction",value:function(c,h){return h>c}}]),l}();r.exports=u},function(r,n,a){var i=function(){function u(l,f){for(var c=0;c<f.length;c++){var h=f[c];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(l,h.key,h)}}return function(l,f,c){return f&&u(l.prototype,f),c&&u(l,c),l}}();function s(u,l){if(!(u instanceof l))throw new TypeError("Cannot call a class as a function")}var o=function(){function u(l,f){var c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,h=arguments.length>3&&arguments[3]!==void 0?arguments[3]:-1,d=arguments.length>4&&arguments[4]!==void 0?arguments[4]:-1;s(this,u),this.sequence1=l,this.sequence2=f,this.match_score=c,this.mismatch_penalty=h,this.gap_penalty=d,this.iMax=l.length+1,this.jMax=f.length+1,this.grid=new Array(this.iMax);for(var v=0;v<this.iMax;v++){this.grid[v]=new Array(this.jMax);for(var g=0;g<this.jMax;g++)this.grid[v][g]=0}this.tracebackGrid=new Array(this.iMax);for(var p=0;p<this.iMax;p++){this.tracebackGrid[p]=new Array(this.jMax);for(var y=0;y<this.jMax;y++)this.tracebackGrid[p][y]=[null,null,null]}this.alignments=[],this.score=-1,this.computeGrids()}return i(u,[{key:"getScore",value:function(){return this.score}},{key:"getAlignments",value:function(){return this.alignments}},{key:"computeGrids",value:function(){for(var f=1;f<this.jMax;f++)this.grid[0][f]=this.grid[0][f-1]+this.gap_penalty,this.tracebackGrid[0][f]=[!1,!1,!0];for(var c=1;c<this.iMax;c++)this.grid[c][0]=this.grid[c-1][0]+this.gap_penalty,this.tracebackGrid[c][0]=[!1,!0,!1];for(var h=1;h<this.iMax;h++)for(var d=1;d<this.jMax;d++){var v=void 0;this.sequence1[h-1]===this.sequence2[d-1]?v=this.grid[h-1][d-1]+this.match_score:v=this.grid[h-1][d-1]+this.mismatch_penalty;var g=this.grid[h-1][d]+this.gap_penalty,p=this.grid[h][d-1]+this.gap_penalty,y=[v,g,p],m=this.arrayAllMaxIndexes(y);this.grid[h][d]=y[m[0]],this.tracebackGrid[h][d]=[m.includes(0),m.includes(1),m.includes(2)]}this.score=this.grid[this.iMax-1][this.jMax-1]}},{key:"alignmentTraceback",value:function(){var f=[];for(f.push({pos:[this.sequence1.length,this.sequence2.length],seq1:"",seq2:""});f[0];){var c=f[0],h=this.tracebackGrid[c.pos[0]][c.pos[1]];h[0]&&f.push({pos:[c.pos[0]-1,c.pos[1]-1],seq1:this.sequence1[c.pos[0]-1]+c.seq1,seq2:this.sequence2[c.pos[1]-1]+c.seq2}),h[1]&&f.push({pos:[c.pos[0]-1,c.pos[1]],seq1:this.sequence1[c.pos[0]-1]+c.seq1,seq2:"-"+c.seq2}),h[2]&&f.push({pos:[c.pos[0],c.pos[1]-1],seq1:"-"+c.seq1,seq2:this.sequence2[c.pos[1]-1]+c.seq2}),c.pos[0]===0&&c.pos[1]===0&&this.alignments.push({sequence1:c.seq1,sequence2:c.seq2}),f.shift()}return this.alignments}},{key:"getAllIndexes",value:function(f,c){for(var h=[],d=-1;(d=f.indexOf(c,d+1))!==-1;)h.push(d);return h}},{key:"arrayAllMaxIndexes",value:function(f){return this.getAllIndexes(f,Math.max.apply(null,f))}}]),u}();r.exports=o},function(r,n,a){var i=function(){};i.FDLayout=a(18),i.FDLayoutConstants=a(7),i.FDLayoutEdge=a(19),i.FDLayoutNode=a(20),i.DimensionD=a(21),i.HashMap=a(22),i.HashSet=a(23),i.IGeometry=a(8),i.IMath=a(9),i.Integer=a(10),i.Point=a(12),i.PointD=a(4),i.RandomSeed=a(16),i.RectangleD=a(13),i.Transform=a(17),i.UniqueIDGeneretor=a(14),i.Quicksort=a(24),i.LinkedList=a(11),i.LGraphObject=a(2),i.LGraph=a(5),i.LEdge=a(1),i.LGraphManager=a(6),i.LNode=a(3),i.Layout=a(15),i.LayoutConstants=a(0),i.NeedlemanWunsch=a(25),r.exports=i},function(r,n,a){function i(){this.listeners=[]}var s=i.prototype;s.addListener=function(o,u){this.listeners.push({event:o,callback:u})},s.removeListener=function(o,u){for(var l=this.listeners.length;l>=0;l--){var f=this.listeners[l];f.event===o&&f.callback===u&&this.listeners.splice(l,1)}},s.emit=function(o,u){for(var l=0;l<this.listeners.length;l++){var f=this.listeners[l];o===f.event&&f.callback(u)}},r.exports=i}])})}(Pd)),Pd.exports}var yE;function rG(){return yE||(yE=1,function(t,e){(function(n,a){t.exports=a(tG())})(Nr,function(r){return function(n){var a={};function i(s){if(a[s])return a[s].exports;var o=a[s]={i:s,l:!1,exports:{}};return n[s].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=n,i.c=a,i.i=function(s){return s},i.d=function(s,o,u){i.o(s,o)||Object.defineProperty(s,o,{configurable:!1,enumerable:!0,get:u})},i.n=function(s){var o=s&&s.__esModule?function(){return s.default}:function(){return s};return i.d(o,"a",o),o},i.o=function(s,o){return Object.prototype.hasOwnProperty.call(s,o)},i.p="",i(i.s=7)}([function(n,a){n.exports=r},function(n,a,i){var s=i(0).FDLayoutConstants;function o(){}for(var u in s)o[u]=s[u];o.DEFAULT_USE_MULTI_LEVEL_SCALING=!1,o.DEFAULT_RADIAL_SEPARATION=s.DEFAULT_EDGE_LENGTH,o.DEFAULT_COMPONENT_SEPERATION=60,o.TILE=!0,o.TILING_PADDING_VERTICAL=10,o.TILING_PADDING_HORIZONTAL=10,o.TREE_REDUCTION_ON_INCREMENTAL=!1,n.exports=o},function(n,a,i){var s=i(0).FDLayoutEdge;function o(l,f,c){s.call(this,l,f,c)}o.prototype=Object.create(s.prototype);for(var u in s)o[u]=s[u];n.exports=o},function(n,a,i){var s=i(0).LGraph;function o(l,f,c){s.call(this,l,f,c)}o.prototype=Object.create(s.prototype);for(var u in s)o[u]=s[u];n.exports=o},function(n,a,i){var s=i(0).LGraphManager;function o(l){s.call(this,l)}o.prototype=Object.create(s.prototype);for(var u in s)o[u]=s[u];n.exports=o},function(n,a,i){var s=i(0).FDLayoutNode,o=i(0).IMath;function u(f,c,h,d){s.call(this,f,c,h,d)}u.prototype=Object.create(s.prototype);for(var l in s)u[l]=s[l];u.prototype.move=function(){var f=this.graphManager.getLayout();this.displacementX=f.coolingFactor*(this.springForceX+this.repulsionForceX+this.gravitationForceX)/this.noOfChildren,this.displacementY=f.coolingFactor*(this.springForceY+this.repulsionForceY+this.gravitationForceY)/this.noOfChildren,Math.abs(this.displacementX)>f.coolingFactor*f.maxNodeDisplacement&&(this.displacementX=f.coolingFactor*f.maxNodeDisplacement*o.sign(this.displacementX)),Math.abs(this.displacementY)>f.coolingFactor*f.maxNodeDisplacement&&(this.displacementY=f.coolingFactor*f.maxNodeDisplacement*o.sign(this.displacementY)),this.child==null?this.moveBy(this.displacementX,this.displacementY):this.child.getNodes().length==0?this.moveBy(this.displacementX,this.displacementY):this.propogateDisplacementToChildren(this.displacementX,this.displacementY),f.totalDisplacement+=Math.abs(this.displacementX)+Math.abs(this.displacementY),this.springForceX=0,this.springForceY=0,this.repulsionForceX=0,this.repulsionForceY=0,this.gravitationForceX=0,this.gravitationForceY=0,this.displacementX=0,this.displacementY=0},u.prototype.propogateDisplacementToChildren=function(f,c){for(var h=this.getChild().getNodes(),d,v=0;v<h.length;v++)d=h[v],d.getChild()==null?(d.moveBy(f,c),d.displacementX+=f,d.displacementY+=c):d.propogateDisplacementToChildren(f,c)},u.prototype.setPred1=function(f){this.pred1=f},u.prototype.getPred1=function(){return pred1},u.prototype.getPred2=function(){return pred2},u.prototype.setNext=function(f){this.next=f},u.prototype.getNext=function(){return next},u.prototype.setProcessed=function(f){this.processed=f},u.prototype.isProcessed=function(){return processed},n.exports=u},function(n,a,i){var s=i(0).FDLayout,o=i(4),u=i(3),l=i(5),f=i(2),c=i(1),h=i(0).FDLayoutConstants,d=i(0).LayoutConstants,v=i(0).Point,g=i(0).PointD,p=i(0).Layout,y=i(0).Integer,m=i(0).IGeometry,b=i(0).LGraph,E=i(0).Transform;function T(){s.call(this),this.toBeTiled={}}T.prototype=Object.create(s.prototype);for(var I in s)T[I]=s[I];T.prototype.newGraphManager=function(){var w=new o(this);return this.graphManager=w,w},T.prototype.newGraph=function(w){return new u(null,this.graphManager,w)},T.prototype.newNode=function(w){return new l(this.graphManager,w)},T.prototype.newEdge=function(w){return new f(null,null,w)},T.prototype.initParameters=function(){s.prototype.initParameters.call(this,arguments),this.isSubLayout||(c.DEFAULT_EDGE_LENGTH<10?this.idealEdgeLength=10:this.idealEdgeLength=c.DEFAULT_EDGE_LENGTH,this.useSmartIdealEdgeLengthCalculation=c.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION,this.springConstant=h.DEFAULT_SPRING_STRENGTH,this.repulsionConstant=h.DEFAULT_REPULSION_STRENGTH,this.gravityConstant=h.DEFAULT_GRAVITY_STRENGTH,this.compoundGravityConstant=h.DEFAULT_COMPOUND_GRAVITY_STRENGTH,this.gravityRangeFactor=h.DEFAULT_GRAVITY_RANGE_FACTOR,this.compoundGravityRangeFactor=h.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR,this.prunedNodesAll=[],this.growTreeIterations=0,this.afterGrowthIterations=0,this.isTreeGrowing=!1,this.isGrowthFinished=!1,this.coolingCycle=0,this.maxCoolingCycle=this.maxIterations/h.CONVERGENCE_CHECK_PERIOD,this.finalTemperature=h.CONVERGENCE_CHECK_PERIOD/this.maxIterations,this.coolingAdjuster=1)},T.prototype.layout=function(){var w=d.DEFAULT_CREATE_BENDS_AS_NEEDED;return w&&(this.createBendpoints(),this.graphManager.resetAllEdges()),this.level=0,this.classicLayout()},T.prototype.classicLayout=function(){if(this.nodesWithGravity=this.calculateNodesToApplyGravitationTo(),this.graphManager.setAllNodesToApplyGravitation(this.nodesWithGravity),this.calcNoOfChildrenForAllNodes(),this.graphManager.calcLowestCommonAncestors(),this.graphManager.calcInclusionTreeDepths(),this.graphManager.getRoot().calcEstimatedSize(),this.calcIdealEdgeLengths(),this.incremental){if(c.TREE_REDUCTION_ON_INCREMENTAL){this.reduceTrees(),this.graphManager.resetAllNodesToApplyGravitation();var x=new Set(this.getAllNodes()),C=this.nodesWithGravity.filter(function(R){return x.has(R)});this.graphManager.setAllNodesToApplyGravitation(C)}}else{var w=this.getFlatForest();if(w.length>0)this.positionNodesRadially(w);else{this.reduceTrees(),this.graphManager.resetAllNodesToApplyGravitation();var x=new Set(this.getAllNodes()),C=this.nodesWithGravity.filter(function(S){return x.has(S)});this.graphManager.setAllNodesToApplyGravitation(C),this.positionNodesRandomly()}}return this.initSpringEmbedder(),this.runSpringEmbedder(),!0},T.prototype.tick=function(){if(this.totalIterations++,this.totalIterations===this.maxIterations&&!this.isTreeGrowing&&!this.isGrowthFinished)if(this.prunedNodesAll.length>0)this.isTreeGrowing=!0;else return!0;if(this.totalIterations%h.CONVERGENCE_CHECK_PERIOD==0&&!this.isTreeGrowing&&!this.isGrowthFinished){if(this.isConverged())if(this.prunedNodesAll.length>0)this.isTreeGrowing=!0;else return!0;this.coolingCycle++,this.layoutQuality==0?this.coolingAdjuster=this.coolingCycle:this.layoutQuality==1&&(this.coolingAdjuster=this.coolingCycle/3),this.coolingFactor=Math.max(this.initialCoolingFactor-Math.pow(this.coolingCycle,Math.log(100*(this.initialCoolingFactor-this.finalTemperature))/Math.log(this.maxCoolingCycle))/100*this.coolingAdjuster,this.finalTemperature),this.animationPeriod=Math.ceil(this.initialAnimationPeriod*Math.sqrt(this.coolingFactor))}if(this.isTreeGrowing){if(this.growTreeIterations%10==0)if(this.prunedNodesAll.length>0){this.graphManager.updateBounds(),this.updateGrid(),this.growTree(this.prunedNodesAll),this.graphManager.resetAllNodesToApplyGravitation();var w=new Set(this.getAllNodes()),x=this.nodesWithGravity.filter(function(A){return w.has(A)});this.graphManager.setAllNodesToApplyGravitation(x),this.graphManager.updateBounds(),this.updateGrid(),this.coolingFactor=h.DEFAULT_COOLING_FACTOR_INCREMENTAL}else this.isTreeGrowing=!1,this.isGrowthFinished=!0;this.growTreeIterations++}if(this.isGrowthFinished){if(this.isConverged())return!0;this.afterGrowthIterations%10==0&&(this.graphManager.updateBounds(),this.updateGrid()),this.coolingFactor=h.DEFAULT_COOLING_FACTOR_INCREMENTAL*((100-this.afterGrowthIterations)/100),this.afterGrowthIterations++}var C=!this.isTreeGrowing&&!this.isGrowthFinished,S=this.growTreeIterations%10==1&&this.isTreeGrowing||this.afterGrowthIterations%10==1&&this.isGrowthFinished;return this.totalDisplacement=0,this.graphManager.updateBounds(),this.calcSpringForces(),this.calcRepulsionForces(C,S),this.calcGravitationalForces(),this.moveNodes(),this.animate(),!1},T.prototype.getPositionsData=function(){for(var w=this.graphManager.getAllNodes(),x={},C=0;C<w.length;C++){var S=w[C].rect,A=w[C].id;x[A]={id:A,x:S.getCenterX(),y:S.getCenterY(),w:S.width,h:S.height}}return x},T.prototype.runSpringEmbedder=function(){this.initialAnimationPeriod=25,this.animationPeriod=this.initialAnimationPeriod;var w=!1;if(h.ANIMATE==="during")this.emit("layoutstarted");else{for(;!w;)w=this.tick();this.graphManager.updateBounds()}},T.prototype.calculateNodesToApplyGravitationTo=function(){var w=[],x,C=this.graphManager.getGraphs(),S=C.length,A;for(A=0;A<S;A++)x=C[A],x.updateConnected(),x.isConnected||(w=w.concat(x.getNodes()));return w},T.prototype.createBendpoints=function(){var w=[];w=w.concat(this.graphManager.getAllEdges());var x=new Set,C;for(C=0;C<w.length;C++){var S=w[C];if(!x.has(S)){var A=S.getSource(),R=S.getTarget();if(A==R)S.getBendpoints().push(new g),S.getBendpoints().push(new g),this.createDummyNodesForBendpoints(S),x.add(S);else{var D=[];if(D=D.concat(A.getEdgeListToNode(R)),D=D.concat(R.getEdgeListToNode(A)),!x.has(D[0])){if(D.length>1){var _;for(_=0;_<D.length;_++){var M=D[_];M.getBendpoints().push(new g),this.createDummyNodesForBendpoints(M)}}D.forEach(function(k){x.add(k)})}}}if(x.size==w.length)break}},T.prototype.positionNodesRadially=function(w){for(var x=new v(0,0),C=Math.ceil(Math.sqrt(w.length)),S=0,A=0,R=0,D=new g(0,0),_=0;_<w.length;_++){_%C==0&&(R=0,A=S,_!=0&&(A+=c.DEFAULT_COMPONENT_SEPERATION),S=0);var M=w[_],k=p.findCenterOfTree(M);x.x=R,x.y=A,D=T.radialLayout(M,k,x),D.y>S&&(S=Math.floor(D.y)),R=Math.floor(D.x+c.DEFAULT_COMPONENT_SEPERATION)}this.transform(new g(d.WORLD_CENTER_X-D.x/2,d.WORLD_CENTER_Y-D.y/2))},T.radialLayout=function(w,x,C){var S=Math.max(this.maxDiagonalInTree(w),c.DEFAULT_RADIAL_SEPARATION);T.branchRadialLayout(x,null,0,359,0,S);var A=b.calculateBounds(w),R=new E;R.setDeviceOrgX(A.getMinX()),R.setDeviceOrgY(A.getMinY()),R.setWorldOrgX(C.x),R.setWorldOrgY(C.y);for(var D=0;D<w.length;D++){var _=w[D];_.transform(R)}var M=new g(A.getMaxX(),A.getMaxY());return R.inverseTransformPoint(M)},T.branchRadialLayout=function(w,x,C,S,A,R){var D=(S-C+1)/2;D<0&&(D+=180);var _=(D+C)%360,M=_*m.TWO_PI/360,k=A*Math.cos(M),O=A*Math.sin(M);w.setCenter(k,O);var P=[];P=P.concat(w.getEdges());var B=P.length;x!=null&&B--;for(var F=0,N=P.length,q,V=w.getEdgesBetween(x);V.length>1;){var Y=V[0];V.splice(0,1);var H=P.indexOf(Y);H>=0&&P.splice(H,1),N--,B--}x!=null?q=(P.indexOf(V[0])+1)%N:q=0;for(var Z=Math.abs(S-C)/B,ee=q;F!=B;ee=++ee%N){var ie=P[ee].getOtherEnd(w);if(ie!=x){var J=(C+F*Z)%360,G=(J+Z)%360;T.branchRadialLayout(ie,w,J,G,A+R,R),F++}}},T.maxDiagonalInTree=function(w){for(var x=y.MIN_VALUE,C=0;C<w.length;C++){var S=w[C],A=S.getDiagonal();A>x&&(x=A)}return x},T.prototype.calcRepulsionRange=function(){return 2*(this.level+1)*this.idealEdgeLength},T.prototype.groupZeroDegreeMembers=function(){var w=this,x={};this.memberGroups={},this.idToDummyNode={};for(var C=[],S=this.graphManager.getAllNodes(),A=0;A<S.length;A++){var R=S[A],D=R.getParent();this.getNodeDegreeWithChildren(R)===0&&(D.id==null||!this.getToBeTiled(D))&&C.push(R)}for(var A=0;A<C.length;A++){var R=C[A],_=R.getParent().id;typeof x[_]>"u"&&(x[_]=[]),x[_]=x[_].concat(R)}Object.keys(x).forEach(function(M){if(x[M].length>1){var k="DummyCompound_"+M;w.memberGroups[k]=x[M];var O=x[M][0].getParent(),P=new l(w.graphManager);P.id=k,P.paddingLeft=O.paddingLeft||0,P.paddingRight=O.paddingRight||0,P.paddingBottom=O.paddingBottom||0,P.paddingTop=O.paddingTop||0,w.idToDummyNode[k]=P;var B=w.getGraphManager().add(w.newGraph(),P),F=O.getChild();F.add(P);for(var N=0;N<x[M].length;N++){var q=x[M][N];F.remove(q),B.add(q)}}})},T.prototype.clearCompounds=function(){var w={},x={};this.performDFSOnCompounds();for(var C=0;C<this.compoundOrder.length;C++)x[this.compoundOrder[C].id]=this.compoundOrder[C],w[this.compoundOrder[C].id]=[].concat(this.compoundOrder[C].getChild().getNodes()),this.graphManager.remove(this.compoundOrder[C].getChild()),this.compoundOrder[C].child=null;this.graphManager.resetAllNodes(),this.tileCompoundMembers(w,x)},T.prototype.clearZeroDegreeMembers=function(){var w=this,x=this.tiledZeroDegreePack=[];Object.keys(this.memberGroups).forEach(function(C){var S=w.idToDummyNode[C];x[C]=w.tileNodes(w.memberGroups[C],S.paddingLeft+S.paddingRight),S.rect.width=x[C].width,S.rect.height=x[C].height})},T.prototype.repopulateCompounds=function(){for(var w=this.compoundOrder.length-1;w>=0;w--){var x=this.compoundOrder[w],C=x.id,S=x.paddingLeft,A=x.paddingTop;this.adjustLocations(this.tiledMemberPack[C],x.rect.x,x.rect.y,S,A)}},T.prototype.repopulateZeroDegreeMembers=function(){var w=this,x=this.tiledZeroDegreePack;Object.keys(x).forEach(function(C){var S=w.idToDummyNode[C],A=S.paddingLeft,R=S.paddingTop;w.adjustLocations(x[C],S.rect.x,S.rect.y,A,R)})},T.prototype.getToBeTiled=function(w){var x=w.id;if(this.toBeTiled[x]!=null)return this.toBeTiled[x];var C=w.getChild();if(C==null)return this.toBeTiled[x]=!1,!1;for(var S=C.getNodes(),A=0;A<S.length;A++){var R=S[A];if(this.getNodeDegree(R)>0)return this.toBeTiled[x]=!1,!1;if(R.getChild()==null){this.toBeTiled[R.id]=!1;continue}if(!this.getToBeTiled(R))return this.toBeTiled[x]=!1,!1}return this.toBeTiled[x]=!0,!0},T.prototype.getNodeDegree=function(w){w.id;for(var x=w.getEdges(),C=0,S=0;S<x.length;S++){var A=x[S];A.getSource().id!==A.getTarget().id&&(C=C+1)}return C},T.prototype.getNodeDegreeWithChildren=function(w){var x=this.getNodeDegree(w);if(w.getChild()==null)return x;for(var C=w.getChild().getNodes(),S=0;S<C.length;S++){var A=C[S];x+=this.getNodeDegreeWithChildren(A)}return x},T.prototype.performDFSOnCompounds=function(){this.compoundOrder=[],this.fillCompexOrderByDFS(this.graphManager.getRoot().getNodes())},T.prototype.fillCompexOrderByDFS=function(w){for(var x=0;x<w.length;x++){var C=w[x];C.getChild()!=null&&this.fillCompexOrderByDFS(C.getChild().getNodes()),this.getToBeTiled(C)&&this.compoundOrder.push(C)}},T.prototype.adjustLocations=function(w,x,C,S,A){x+=S,C+=A;for(var R=x,D=0;D<w.rows.length;D++){var _=w.rows[D];x=R;for(var M=0,k=0;k<_.length;k++){var O=_[k];O.rect.x=x,O.rect.y=C,x+=O.rect.width+w.horizontalPadding,O.rect.height>M&&(M=O.rect.height)}C+=M+w.verticalPadding}},T.prototype.tileCompoundMembers=function(w,x){var C=this;this.tiledMemberPack=[],Object.keys(w).forEach(function(S){var A=x[S];C.tiledMemberPack[S]=C.tileNodes(w[S],A.paddingLeft+A.paddingRight),A.rect.width=C.tiledMemberPack[S].width,A.rect.height=C.tiledMemberPack[S].height})},T.prototype.tileNodes=function(w,x){var C=c.TILING_PADDING_VERTICAL,S=c.TILING_PADDING_HORIZONTAL,A={rows:[],rowWidth:[],rowHeight:[],width:0,height:x,verticalPadding:C,horizontalPadding:S};w.sort(function(_,M){return _.rect.width*_.rect.height>M.rect.width*M.rect.height?-1:_.rect.width*_.rect.height<M.rect.width*M.rect.height?1:0});for(var R=0;R<w.length;R++){var D=w[R];A.rows.length==0?this.insertNodeToRow(A,D,0,x):this.canAddHorizontal(A,D.rect.width,D.rect.height)?this.insertNodeToRow(A,D,this.getShortestRowIndex(A),x):this.insertNodeToRow(A,D,A.rows.length,x),this.shiftToLastRow(A)}return A},T.prototype.insertNodeToRow=function(w,x,C,S){var A=S;if(C==w.rows.length){var R=[];w.rows.push(R),w.rowWidth.push(A),w.rowHeight.push(0)}var D=w.rowWidth[C]+x.rect.width;w.rows[C].length>0&&(D+=w.horizontalPadding),w.rowWidth[C]=D,w.width<D&&(w.width=D);var _=x.rect.height;C>0&&(_+=w.verticalPadding);var M=0;_>w.rowHeight[C]&&(M=w.rowHeight[C],w.rowHeight[C]=_,M=w.rowHeight[C]-M),w.height+=M,w.rows[C].push(x)},T.prototype.getShortestRowIndex=function(w){for(var x=-1,C=Number.MAX_VALUE,S=0;S<w.rows.length;S++)w.rowWidth[S]<C&&(x=S,C=w.rowWidth[S]);return x},T.prototype.getLongestRowIndex=function(w){for(var x=-1,C=Number.MIN_VALUE,S=0;S<w.rows.length;S++)w.rowWidth[S]>C&&(x=S,C=w.rowWidth[S]);return x},T.prototype.canAddHorizontal=function(w,x,C){var S=this.getShortestRowIndex(w);if(S<0)return!0;var A=w.rowWidth[S];if(A+w.horizontalPadding+x<=w.width)return!0;var R=0;w.rowHeight[S]<C&&S>0&&(R=C+w.verticalPadding-w.rowHeight[S]);var D;w.width-A>=x+w.horizontalPadding?D=(w.height+R)/(A+x+w.horizontalPadding):D=(w.height+R)/w.width,R=C+w.verticalPadding;var _;return w.width<x?_=(w.height+R)/x:_=(w.height+R)/w.width,_<1&&(_=1/_),D<1&&(D=1/D),D<_},T.prototype.shiftToLastRow=function(w){var x=this.getLongestRowIndex(w),C=w.rowWidth.length-1,S=w.rows[x],A=S[S.length-1],R=A.width+w.horizontalPadding;if(w.width-w.rowWidth[C]>R&&x!=C){S.splice(-1,1),w.rows[C].push(A),w.rowWidth[x]=w.rowWidth[x]-R,w.rowWidth[C]=w.rowWidth[C]+R,w.width=w.rowWidth[instance.getLongestRowIndex(w)];for(var D=Number.MIN_VALUE,_=0;_<S.length;_++)S[_].height>D&&(D=S[_].height);x>0&&(D+=w.verticalPadding);var M=w.rowHeight[x]+w.rowHeight[C];w.rowHeight[x]=D,w.rowHeight[C]<A.height+w.verticalPadding&&(w.rowHeight[C]=A.height+w.verticalPadding);var k=w.rowHeight[x]+w.rowHeight[C];w.height+=k-M,this.shiftToLastRow(w)}},T.prototype.tilingPreLayout=function(){c.TILE&&(this.groupZeroDegreeMembers(),this.clearCompounds(),this.clearZeroDegreeMembers())},T.prototype.tilingPostLayout=function(){c.TILE&&(this.repopulateZeroDegreeMembers(),this.repopulateCompounds())},T.prototype.reduceTrees=function(){for(var w=[],x=!0,C;x;){var S=this.graphManager.getAllNodes(),A=[];x=!1;for(var R=0;R<S.length;R++)C=S[R],C.getEdges().length==1&&!C.getEdges()[0].isInterGraph&&C.getChild()==null&&(A.push([C,C.getEdges()[0],C.getOwner()]),x=!0);if(x==!0){for(var D=[],_=0;_<A.length;_++)A[_][0].getEdges().length==1&&(D.push(A[_]),A[_][0].getOwner().remove(A[_][0]));w.push(D),this.graphManager.resetAllNodes(),this.graphManager.resetAllEdges()}}this.prunedNodesAll=w},T.prototype.growTree=function(w){for(var x=w.length,C=w[x-1],S,A=0;A<C.length;A++)S=C[A],this.findPlaceforPrunedNode(S),S[2].add(S[0]),S[2].add(S[1],S[1].source,S[1].target);w.splice(w.length-1,1),this.graphManager.resetAllNodes(),this.graphManager.resetAllEdges()},T.prototype.findPlaceforPrunedNode=function(w){var x,C,S=w[0];S==w[1].source?C=w[1].target:C=w[1].source;var A=C.startX,R=C.finishX,D=C.startY,_=C.finishY,M=0,k=0,O=0,P=0,B=[M,O,k,P];if(D>0)for(var F=A;F<=R;F++)B[0]+=this.grid[F][D-1].length+this.grid[F][D].length-1;if(R<this.grid.length-1)for(var F=D;F<=_;F++)B[1]+=this.grid[R+1][F].length+this.grid[R][F].length-1;if(_<this.grid[0].length-1)for(var F=A;F<=R;F++)B[2]+=this.grid[F][_+1].length+this.grid[F][_].length-1;if(A>0)for(var F=D;F<=_;F++)B[3]+=this.grid[A-1][F].length+this.grid[A][F].length-1;for(var N=y.MAX_VALUE,q,V,Y=0;Y<B.length;Y++)B[Y]<N?(N=B[Y],q=1,V=Y):B[Y]==N&&q++;if(q==3&&N==0)B[0]==0&&B[1]==0&&B[2]==0?x=1:B[0]==0&&B[1]==0&&B[3]==0?x=0:B[0]==0&&B[2]==0&&B[3]==0?x=3:B[1]==0&&B[2]==0&&B[3]==0&&(x=2);else if(q==2&&N==0){var H=Math.floor(Math.random()*2);B[0]==0&&B[1]==0?H==0?x=0:x=1:B[0]==0&&B[2]==0?H==0?x=0:x=2:B[0]==0&&B[3]==0?H==0?x=0:x=3:B[1]==0&&B[2]==0?H==0?x=1:x=2:B[1]==0&&B[3]==0?H==0?x=1:x=3:H==0?x=2:x=3}else if(q==4&&N==0){var H=Math.floor(Math.random()*4);x=H}else x=V;x==0?S.setCenter(C.getCenterX(),C.getCenterY()-C.getHeight()/2-h.DEFAULT_EDGE_LENGTH-S.getHeight()/2):x==1?S.setCenter(C.getCenterX()+C.getWidth()/2+h.DEFAULT_EDGE_LENGTH+S.getWidth()/2,C.getCenterY()):x==2?S.setCenter(C.getCenterX(),C.getCenterY()+C.getHeight()/2+h.DEFAULT_EDGE_LENGTH+S.getHeight()/2):S.setCenter(C.getCenterX()-C.getWidth()/2-h.DEFAULT_EDGE_LENGTH-S.getWidth()/2,C.getCenterY())},n.exports=T},function(n,a,i){var s={};s.layoutBase=i(0),s.CoSEConstants=i(1),s.CoSEEdge=i(2),s.CoSEGraph=i(3),s.CoSEGraphManager=i(4),s.CoSELayout=i(6),s.CoSENode=i(5),n.exports=s}])})}(Od)),Od.exports}(function(t,e){(function(n,a){t.exports=a(rG())})(Nr,function(r){return function(n){var a={};function i(s){if(a[s])return a[s].exports;var o=a[s]={i:s,l:!1,exports:{}};return n[s].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=n,i.c=a,i.i=function(s){return s},i.d=function(s,o,u){i.o(s,o)||Object.defineProperty(s,o,{configurable:!1,enumerable:!0,get:u})},i.n=function(s){var o=s&&s.__esModule?function(){return s.default}:function(){return s};return i.d(o,"a",o),o},i.o=function(s,o){return Object.prototype.hasOwnProperty.call(s,o)},i.p="",i(i.s=1)}([function(n,a){n.exports=r},function(n,a,i){var s=i(0).layoutBase.LayoutConstants,o=i(0).layoutBase.FDLayoutConstants,u=i(0).CoSEConstants,l=i(0).CoSELayout,f=i(0).CoSENode,c=i(0).layoutBase.PointD,h=i(0).layoutBase.DimensionD,d={ready:function(){},stop:function(){},quality:"default",nodeDimensionsIncludeLabels:!1,refresh:30,fit:!0,padding:10,randomize:!0,nodeRepulsion:4500,idealEdgeLength:50,edgeElasticity:.45,nestingFactor:.1,gravity:.25,numIter:2500,tile:!0,animate:"end",animationDuration:500,tilingPaddingVertical:10,tilingPaddingHorizontal:10,gravityRangeCompound:1.5,gravityCompound:1,gravityRange:3.8,initialEnergyOnIncremental:.5};function v(m,b){var E={};for(var T in m)E[T]=m[T];for(var T in b)E[T]=b[T];return E}function g(m){this.options=v(d,m),p(this.options)}var p=function(b){b.nodeRepulsion!=null&&(u.DEFAULT_REPULSION_STRENGTH=o.DEFAULT_REPULSION_STRENGTH=b.nodeRepulsion),b.idealEdgeLength!=null&&(u.DEFAULT_EDGE_LENGTH=o.DEFAULT_EDGE_LENGTH=b.idealEdgeLength),b.edgeElasticity!=null&&(u.DEFAULT_SPRING_STRENGTH=o.DEFAULT_SPRING_STRENGTH=b.edgeElasticity),b.nestingFactor!=null&&(u.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=o.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=b.nestingFactor),b.gravity!=null&&(u.DEFAULT_GRAVITY_STRENGTH=o.DEFAULT_GRAVITY_STRENGTH=b.gravity),b.numIter!=null&&(u.MAX_ITERATIONS=o.MAX_ITERATIONS=b.numIter),b.gravityRange!=null&&(u.DEFAULT_GRAVITY_RANGE_FACTOR=o.DEFAULT_GRAVITY_RANGE_FACTOR=b.gravityRange),b.gravityCompound!=null&&(u.DEFAULT_COMPOUND_GRAVITY_STRENGTH=o.DEFAULT_COMPOUND_GRAVITY_STRENGTH=b.gravityCompound),b.gravityRangeCompound!=null&&(u.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=o.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=b.gravityRangeCompound),b.initialEnergyOnIncremental!=null&&(u.DEFAULT_COOLING_FACTOR_INCREMENTAL=o.DEFAULT_COOLING_FACTOR_INCREMENTAL=b.initialEnergyOnIncremental),b.quality=="draft"?s.QUALITY=0:b.quality=="proof"?s.QUALITY=2:s.QUALITY=1,u.NODE_DIMENSIONS_INCLUDE_LABELS=o.NODE_DIMENSIONS_INCLUDE_LABELS=s.NODE_DIMENSIONS_INCLUDE_LABELS=b.nodeDimensionsIncludeLabels,u.DEFAULT_INCREMENTAL=o.DEFAULT_INCREMENTAL=s.DEFAULT_INCREMENTAL=!b.randomize,u.ANIMATE=o.ANIMATE=s.ANIMATE=b.animate,u.TILE=b.tile,u.TILING_PADDING_VERTICAL=typeof b.tilingPaddingVertical=="function"?b.tilingPaddingVertical.call():b.tilingPaddingVertical,u.TILING_PADDING_HORIZONTAL=typeof b.tilingPaddingHorizontal=="function"?b.tilingPaddingHorizontal.call():b.tilingPaddingHorizontal};g.prototype.run=function(){var m,b,E=this.options;this.idToLNode={};var T=this.layout=new l,I=this;I.stopped=!1,this.cy=this.options.cy,this.cy.trigger({type:"layoutstart",layout:this});var w=T.newGraphManager();this.gm=w;var x=this.options.eles.nodes(),C=this.options.eles.edges();this.root=w.addRoot(),this.processChildrenList(this.root,this.getTopMostNodes(x),T);for(var S=0;S<C.length;S++){var A=C[S],R=this.idToLNode[A.data("source")],D=this.idToLNode[A.data("target")];if(R!==D&&R.getEdgesBetween(D).length==0){var _=w.add(T.newEdge(),R,D);_.id=A.id()}}var M=function(P,B){typeof P=="number"&&(P=B);var F=P.data("id"),N=I.idToLNode[F];return{x:N.getRect().getCenterX(),y:N.getRect().getCenterY()}},k=function O(){for(var P=function(){E.fit&&E.cy.fit(E.eles,E.padding),m||(m=!0,I.cy.one("layoutready",E.ready),I.cy.trigger({type:"layoutready",layout:I}))},B=I.options.refresh,F,N=0;N<B&&!F;N++)F=I.stopped||I.layout.tick();if(F){T.checkLayoutSuccess()&&!T.isSubLayout&&T.doPostLayout(),T.tilingPostLayout&&T.tilingPostLayout(),T.isLayoutFinished=!0,I.options.eles.nodes().positions(M),P(),I.cy.one("layoutstop",I.options.stop),I.cy.trigger({type:"layoutstop",layout:I}),b&&cancelAnimationFrame(b),m=!1;return}var q=I.layout.getPositionsData();E.eles.nodes().positions(function(V,Y){if(typeof V=="number"&&(V=Y),!V.isParent()){for(var H=V.id(),Z=q[H],ee=V;Z==null&&(Z=q[ee.data("parent")]||q["DummyCompound_"+ee.data("parent")],q[H]=Z,ee=ee.parent()[0],ee!=null););return Z!=null?{x:Z.x,y:Z.y}:{x:V.position("x"),y:V.position("y")}}}),P(),b=requestAnimationFrame(O)};return T.addListener("layoutstarted",function(){I.options.animate==="during"&&(b=requestAnimationFrame(k))}),T.runLayout(),this.options.animate!=="during"&&(I.options.eles.nodes().not(":parent").layoutPositions(I,I.options,M),m=!1),this},g.prototype.getTopMostNodes=function(m){for(var b={},E=0;E<m.length;E++)b[m[E].id()]=!0;var T=m.filter(function(I,w){typeof I=="number"&&(I=w);for(var x=I.parent()[0];x!=null;){if(b[x.id()])return!1;x=x.parent()[0]}return!0});return T},g.prototype.processChildrenList=function(m,b,E){for(var T=b.length,I=0;I<T;I++){var w=b[I],x=w.children(),C,S=w.layoutDimensions({nodeDimensionsIncludeLabels:this.options.nodeDimensionsIncludeLabels});if(w.outerWidth()!=null&&w.outerHeight()!=null?C=m.add(new f(E.graphManager,new c(w.position("x")-S.w/2,w.position("y")-S.h/2),new h(parseFloat(S.w),parseFloat(S.h)))):C=m.add(new f(this.graphManager)),C.id=w.data("id"),C.paddingLeft=parseInt(w.css("padding")),C.paddingTop=parseInt(w.css("padding")),C.paddingRight=parseInt(w.css("padding")),C.paddingBottom=parseInt(w.css("padding")),this.options.nodeDimensionsIncludeLabels&&w.isParent()){var A=w.boundingBox({includeLabels:!0,includeNodes:!1}).w,R=w.boundingBox({includeLabels:!0,includeNodes:!1}).h,D=w.css("text-halign");C.labelWidth=A,C.labelHeight=R,C.labelPos=D}if(this.idToLNode[w.data("id")]=C,isNaN(C.rect.x)&&(C.rect.x=0),isNaN(C.rect.y)&&(C.rect.y=0),x!=null&&x.length>0){var _;_=E.getGraphManager().add(E.newGraph(),C),this.processChildrenList(_,x,E)}}},g.prototype.stop=function(){return this.stopped=!0,this};var y=function(b){b("layout","cose-bilkent",g)};typeof cytoscape<"u"&&y(cytoscape),n.exports=y}])})})(fS);var nG=fS.exports;const aG=Wv(nG);let Vr=[],cS=[],cv=new Map,us=null,ke=null,Lr="cose",cn="name",Ma="asc",yn=new Map,Qn="",ls="characters",jt=!1;function hS(){return jt=window.innerWidth<=768,jt}async function iG(){try{hS(),window.addEventListener("resize",sG);const t=await fetch("matchups.json");if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);if(Vr=await t.json(),!Array.isArray(Vr)||Vr.length===0)throw new Error("Invalid data format or empty data");oG(),vg(),cG(),hG(),gG(),dG(),dS(),await fG();try{pG()}catch(e){console.warn("Graph initialization failed:",e);const r=document.querySelector('.view-btn[data-view="graph"]');r&&(r.style.display="none")}gg("Naruto Uzumaki")}catch(t){console.error("Error loading matchups data:",t),document.body.innerHTML=`<div style="text-align: center; padding: 50px; color: white;">
            <h1>Error loading data</h1>
            <p>Please make sure matchups.json exists and contains valid JSON.</p>
            <p style="font-size: 0.8em; opacity: 0.7;">${t.message}</p>
            <p style="font-size: 0.6em; opacity: 0.5; white-space: pre-wrap; text-align: left; max-width: 800px; margin: 20px auto;">${t.stack}</p>
        </div>`}}function sG(){const t=jt;hS(),t!==jt&&dS()}function dS(){const t=document.getElementById("charactersPanel"),e=document.getElementById("detailsPanel");jt?ls==="characters"?(t==null||t.classList.add("active"),e==null||e.classList.remove("active")):(t==null||t.classList.remove("active"),e==null||e.classList.add("active")):(t==null||t.classList.remove("active"),e==null||e.classList.remove("active")),vS()}function vS(){const t=document.getElementById("charactersTab"),e=document.getElementById("detailsTab");ls==="characters"?(t==null||t.classList.add("active"),e==null||e.classList.remove("active")):(t==null||t.classList.remove("active"),e==null||e.classList.add("active"))}function oG(){const t=new Set;Vr.forEach(e=>{!e||typeof e!="object"||Object.keys(e).forEach(r=>{t.add(r)})}),cS=Array.from(t),uG()}function uG(){cv.clear(),Vr.forEach(t=>{!t||typeof t!="object"||Object.keys(t).forEach(e=>{const r=t[e];if(!Array.isArray(r))return;let n=0,a=0,i=0;r.forEach(o=>{if(!o||typeof o!="object")return;let u;o.result?u=o.result:u=Object.values(o)[0],u==="win"?n++:u==="lose"?a++:u==="draw"&&i++});const s=n+a+i;cv.set(e,{wins:n,losses:a,draws:i,total:s})})})}function kd(t){return cv.get(t)||{wins:0,losses:0,draws:0,total:0}}const fs={"Danz Shimura":"Danz_Shimura","Danzo Shimura":"Danz_Shimura","Yugito Nii":"Yugito_Nii","Hiruzen Sarutobi":"Hiruzen_Sarutobi","Third Hokage Hiruzen Sarutobi":"Hiruzen_Sarutobi","Gengetsu Hzuki (Second Mizukage)":"Gengetsu_Hzuki","Gengetsu Hozuki (Second Mizukage)":"Gengetsu_Hzuki","Second Mizukage":"Second_Mizukage","Rshi (Four-Tails)":"Rshi","Roshi (Four-Tails)":"Rshi",Rshi:"Rshi",Roshi:"Rshi",Nagato:"Nagato","Pain (Nagato)":"Nagato",Pain:"Nagato","Rasa (Fourth Kazekage)":"Rasa",Rasa:"Rasa","Fourth Kazekage":"Rasa",noki:"noki",Onoki:"noki","Neji Hyga":"Neji_Hyga","Neji Hyuga":"Neji_Hyga","M (Second Tsuchikage)":"M","Mu (Second Tsuchikage)":"M",M:"M",Mu:"M","Mei Terum (Fifth Mizukage)":"Mei_Terum","Mei Terumi (Fifth Mizukage)":"Mei_Terum","Fifth Mizukage":"Mei_Terum","Kurenai Yhi":"Kurenai_Yhi","Kurenai Yuhi":"Kurenai_Yhi",Kidmaru:"Kidmaru",Kidomaru:"Kidmaru",Kankur:"Kankur",Kankuro:"Kankur",Jirb:"Jirb",Jirobo:"Jirb","Hinata Hyga":"Hinata_Hyga","Hinata Hyuga":"Hinata_Hyga","F (Seven-Tails)":"F","Fu (Seven-Tails)":"F",F:"F",Fu:"F","Yagura Karatachi":"Yagura_Karatachi","Fourth Raikage A":"Fourth_Raikage_A","A (Fourth Raikage)":"Fourth_Raikage_A","A (Third Raikage)":"A","Third Raikage":"A","Kaguya tsutsuki":"Kaguya_tsutsuki","Kaguya Otsutsuki":"Kaguya_tsutsuki",Hanz:"Hanz",Hanzo:"Hanz"};function gS(t,e=!1){if(!t)return"none";const r=t.split("(")[0].trim();if(e&&yn.has(r)){const a=yn.get(r);return a||"none"}let n=fs[t]||fs[r];return n||(n=r.replace(/\s+/g,"_")),`img/${n}.png`}function lG(t){return new Promise(e=>{if(!t){e(null);return}const r=t.split("(")[0].trim();if(yn.has(r)){e(yn.get(r));return}const n=new Image,a=gS(t,!1);n.onload=()=>{yn.set(r,a),e(a)},n.onerror=()=>{yn.set(r,null),e(null)},n.src=a})}async function fG(){const t=new Set;Vr.forEach(n=>{!n||typeof n!="object"||Object.keys(n).forEach(a=>{if(a){const i=a.split("(")[0].trim();t.add(i)}})});const e=Array.from(t),r=10;for(let n=0;n<e.length;n+=r){const a=e.slice(n,n+r);await Promise.all(a.map(i=>lG(i)))}console.log(`Preloaded ${yn.size} images`)}function hv(t,e=""){const r=document.createElement("img");if(!t)return r;const n=t.split("(")[0].trim(),a=encodeURIComponent(n);let i=fs[t]||fs[n];i||(i=n.replace(/\s+/g,"_"));const s=n.toLowerCase().replace(/\s+/g,"_").replace(/[^a-z0-9_]/g,"").replace(/_+/g,"_"),o=[`img/${i}.png`,`img/${i}.jpg`,`img/${i}.jpeg`,`img/${i}.gif`,`https://vignette.wikia.nocookie.net/naruto/images/thumb/${s.charAt(0)}/${s}/revision/latest/scale-to-width-down/200`,`https://static.wikia.nocookie.net/naruto/images/thumb/${s.charAt(0)}/${s}/revision/latest/scale-to-width-down/200`,`https://ui-avatars.com/api/?name=${a}&background=ff6b35&color=fff&size=200&bold=true&font-size=0.4`];let u=0;r.className=e,r.alt=t,r.loading="lazy";function l(){u<o.length&&(r.src=o[u],u++)}return r.onerror=()=>{u<o.length-1&&setTimeout(()=>l(),100)},l(),r}function vg(){const t=document.getElementById("characterGrid");if(!t)return;t.innerHTML="";const e=[...cS].sort((n,a)=>{const i=kd(n),s=kd(a);let o=0;switch(cn){case"name":o=n.localeCompare(a);break;case"wins":o=i.wins-s.wins;break;case"losses":o=i.losses-s.losses;break;case"draws":o=i.draws-s.draws;break;case"total":o=i.total-s.total;break}return Ma==="asc"?o:-o}),r=Qn?e.filter(n=>n.toLowerCase().includes(Qn)):e;if(r.length===0&&Qn){t.innerHTML='<div class="no-results" style="grid-column: 1/-1; text-align: center; color: var(--text-secondary); padding: 40px;">No characters found matching your search.</div>';return}r.forEach(n=>{const a=kd(n),i=document.createElement("div");i.className="character-card",i.dataset.character=n,n===us&&i.classList.add("active");const s=hv(n);i.innerHTML=`
            <h3>${n}</h3>
            <div class="card-stats">
                <span class="card-stat win">W: ${a.wins}</span>
                <span class="card-stat lose">L: ${a.losses}</span>
                <span class="card-stat draw">D: ${a.draws}</span>
            </div>
        `,i.insertBefore(s,i.firstChild),i.addEventListener("click",()=>{gg(n),jt&&Na("details")}),t.appendChild(i)})}let mE=null;function cG(){const t=document.getElementById("characterSearch");t&&t.addEventListener("input",e=>{Qn=e.target.value.toLowerCase().trim(),vg(),clearTimeout(mE),Qn.length>=2&&(mE=setTimeout(()=>{AR(Qn)},1e3))})}function hG(){const t=document.getElementById("sortSelect"),e={name:"Sort by: Name",wins:"Sort by: Wins",losses:"Sort by: Losses",draws:"Sort by: Draws",total:"Sort by: Total Fights"};function r(a){if(!a)return;const i=Ma==="asc"?" ":" ",s=a.querySelector(`option[value="${cn}"]`);s&&(s.textContent=e[cn]+i),Object.keys(e).forEach(o=>{if(o!==cn){const u=a.querySelector(`option[value="${o}"]`);u&&(u.textContent=e[o])}})}function n(a){cn===a?Ma=Ma==="asc"?"desc":"asc":(cn=a,Ma=a==="name"?"asc":"desc"),r(t),vg(),us&&document.querySelectorAll(".character-card").forEach(i=>{i.classList.remove("active"),i.dataset.character===us&&i.classList.add("active")})}t&&(t.value=cn,t.addEventListener("change",a=>n(a.target.value)))}function dG(){const t=document.getElementById("charactersTab"),e=document.getElementById("detailsTab"),r=document.getElementById("backToCharacters");t&&t.addEventListener("click",()=>{jt&&Na("characters",!0)}),e&&e.addEventListener("click",()=>{jt&&!e.disabled&&Na("details")}),r&&r.addEventListener("click",()=>{jt&&Na("characters",!0)})}function Na(t,e=!1){if(!jt||ls===t)return;const r=document.getElementById("charactersPanel"),n=document.getElementById("detailsPanel");document.startViewTransition?(e&&document.documentElement.classList.add("going-back"),document.startViewTransition(()=>{bE(t,r,n)}).finished.then(()=>{document.documentElement.classList.remove("going-back")})):bE(t,r,n),ls=t,vS()}function bE(t,e,r){t==="characters"?(e==null||e.classList.add("active"),r==null||r.classList.remove("active")):(e==null||e.classList.remove("active"),r==null||r.classList.add("active"))}function gg(t){if(!t)return;us=t,CR(t),document.querySelectorAll(".character-card").forEach(i=>{i.classList.remove("active"),i.dataset.character===t&&i.classList.add("active")});const e=document.getElementById("detailsTab"),r=document.getElementById("selectedTabName");if(e&&(e.disabled=!1),r){const i=t.split(" ")[0];r.textContent=i}const n=Vr.find(i=>i&&i[t]),a=n?n[t]:[];vG(t,a)}function vG(t,e){const r=document.getElementById("selectedCharacterName"),n=document.getElementById("selectedCharacterImage"),a=document.getElementById("matchupsList");if(!r||!n||!a)return;r.textContent=t;const i=hv(t,"character-profile-large");i.id="selectedCharacterImage",n.replaceWith(i);let s=0,o=0,u=0;Array.isArray(e)&&e.forEach(p=>{if(!p)return;let y;p.result?y=p.result:y=Object.values(p)[0],y==="win"?s++:y==="lose"?o++:y==="draw"&&u++});const l=s+o+u,f=l>0?(s/l*100).toFixed(1):0,c=document.getElementById("totalFights");c&&(c.textContent=l);const h=document.getElementById("winsCount");h&&(h.textContent=s);const d=document.getElementById("lossesCount");d&&(d.textContent=o);const v=document.getElementById("drawsCount");v&&(v.textContent=u);const g=document.getElementById("winPercentage");g&&(g.textContent=`${f}%`),a.innerHTML="",!e||e.length===0?a.innerHTML='<p style="text-align: center; color: var(--text-secondary); padding: 40px;">No matchups found for this character.</p>':e.forEach(p=>{if(!p)return;let y,m,b,E,T;if(p.opponent&&p.result)y=p.opponent,m=p.result,b=p.summary||"",E=p.manga_chapter||"",T=p.anime_episode||"";else{if(y=Object.keys(p)[0],!y)return;m=p[y],b="",E="",T=""}const I=document.createElement("div");I.className=`matchup-item ${m}`;const w=y.match(/\((.+)\)/),x=w?y.replace(/\(.+\)/,"").trim():y,C=w?w[1]:null,S=hv(x,"matchup-opponent-image");let A="";(b||E||T)&&(A='<div class="matchup-details">',b&&(A+=`<div class="matchup-summary">${b}</div>`),(E||T)&&(A+='<div class="matchup-references">',E&&E!=="N/A"&&(A+=`<span class="matchup-reference"><span class="reference-label"> Manga:</span> ${E}</span>`),T&&T!=="N/A"&&(A+=`<span class="matchup-reference"><span class="reference-label"> Anime:</span> ${T}</span>`),A+="</div>"),A+="</div>"),I.innerHTML=`
                <div class="matchup-info">
                    <div class="matchup-opponent-name">${x}</div>
                    ${C?`<div class="matchup-context">${C}</div>`:""}
                    ${A}
                </div>
                <div class="matchup-result ${m}">${m}</div>
            `,I.insertBefore(S,I.firstChild),a.appendChild(I)})}function gG(){const t=document.querySelectorAll(".view-btn"),e=document.getElementById("listViewContainer"),r=document.getElementById("graphVisualization");t.forEach(n=>{n.addEventListener("click",()=>{const a=n.dataset.view;document.startViewTransition?document.startViewTransition(()=>{wE(a,t,e,r)}):wE(a,t,e,r)})})}function wE(t,e,r,n){var a;SR(t),e.forEach(i=>i.classList.remove("active")),(a=document.querySelector(`.view-btn[data-view="${t}"]`))==null||a.classList.add("active"),t==="list"?(r&&(r.style.display="flex"),n&&(n.style.display="none")):(r&&(r.style.display="none"),n&&(n.style.display="flex"),setTimeout(()=>{ke&&(ke.resize(),ke.fit(),Vt())},100))}function pS(){const t=new Map,e=[],r=new Map,n=new Set;let a=0;function i(s){if(!s)return-1;const o=s.split("(")[0].trim();return r.has(o)||r.set(o,a++),r.get(o)}return Vr.forEach(s=>{!s||typeof s!="object"||Object.keys(s).forEach(o=>{const u=s[o];if(!Array.isArray(u))return;const l=o.split("(")[0].trim(),f=i(o);t.has(f)||t.set(f,{id:f.toString(),label:l,name:l,wins:0,losses:0,draws:0}),u.forEach(c=>{if(!c||typeof c!="object")return;let h,d;if(c.opponent&&c.result)h=c.opponent,d=c.result;else{if(h=Object.keys(c)[0],!h)return;d=c[h]}const v=h.split("(")[0].trim(),g=i(v);t.has(g)||t.set(g,{id:g.toString(),label:v,name:v,wins:0,losses:0,draws:0});let p=null;if(d==="win")p={source:f.toString(),target:g.toString(),type:"win",label:"wins"};else if(d==="lose")p={source:g.toString(),target:f.toString(),type:"win",label:"wins"};else if(d==="draw"){const y=f<g?f:g,m=f<g?g:f;p={source:y.toString(),target:m.toString(),type:"draw",label:"draws",bidirectional:!0}}if(p){const y=`${p.source}-${p.target}-${p.type}`;if(!n.has(y)){n.add(y),e.push(p);const m=t.get(parseInt(p.source)),b=t.get(parseInt(p.target));p.type==="win"?(m&&m.wins++,b&&b.losses++):p.type==="draw"&&(m&&m.draws++,b&&b.draws++)}}})})}),{nodes:Array.from(t.values()),edges:e}}function pG(){const t=pS(),e=new Map;t.edges.forEach((s,o)=>{const u=`${s.source}-${s.target}-${s.type}`;e.has(u)||(s.id=`e${o}`,e.set(u,s))});function r(){var u,l;const s=((u=document.getElementById("showDraws"))==null?void 0:u.checked)??!0,o=((l=document.getElementById("showLosses"))==null?void 0:l.checked)??!0;return t.edges.filter(f=>f.type==="draw"?s:f.type==="win"?o:!0)}const n=document.getElementById("cy");if(!n)return;ke=cytoscape({container:n,elements:[...t.nodes.map(s=>({data:{id:s.id,label:s.label,name:s.name,wins:s.wins,losses:s.losses,draws:s.draws,imageUrl:gS(s.name,!0)}})),...r().map((s,o)=>({data:{id:s.id||`e${o}-${s.source}-${s.target}`,source:s.source,target:s.target,type:s.type,label:s.label}}))],style:[{selector:"node",style:{"background-color":"#ff6b35",label:"data(label)",width:80,height:80,shape:"ellipse","border-width":3,"border-color":"#f7931e",color:"#ffffff","text-valign":"bottom","text-halign":"center","font-size":"11px","font-weight":"bold","text-wrap":"wrap","text-max-width":"90px","text-outline-width":2,"text-outline-color":"#000000","text-margin-y":-5}},{selector:'node[imageUrl != "none"]',style:{"background-image":"data(imageUrl)","background-fit":"cover","background-clip":"node","background-image-opacity":1}},{selector:"node[wins > 10]",style:{"border-color":"#4caf50",width:100,height:100,"font-size":"12px","border-width":4}},{selector:"node[losses > 5]",style:{"border-color":"#f44336",width:90,height:90,"border-width":4}},{selector:'edge[type = "win"]',style:{width:3,"line-color":"#4caf50","target-arrow-color":"#4caf50","target-arrow-shape":"triangle","arrow-scale":1.5,"curve-style":"bezier",opacity:.7}},{selector:'edge[type = "draw"]',style:{width:2,"line-color":"#ff9800","line-style":"dashed","target-arrow-shape":"none",opacity:.5}},{selector:"node:selected",style:{"border-width":5,"border-color":"#ffffff"}},{selector:"edge:selected",style:{width:5,opacity:1}}],layout:{name:Lr,animate:!0,animationDuration:1e3,fit:!0,padding:50}}),ke.on("tap","node",function(s){const u=s.target.data("name"),l=document.querySelector('.view-btn[data-view="list"]');l&&l.click(),setTimeout(()=>{gg(u),jt&&Na("details")},100)});const a=document.getElementById("nodeCount");a&&(a.textContent=`Nodes: ${t.nodes.length}`);const i=document.getElementById("edgeCount");i&&(i.textContent=`Edges: ${r().length}`),yG(),mG(),Vt()}function yG(){if(!ke)return;const t=document.getElementById("zoomIn");t&&t.addEventListener("click",()=>{const n=ke.zoom(),a=Math.min(3,n*1.2);ke.zoom(a),Vt()});const e=document.getElementById("zoomOut");e&&e.addEventListener("click",()=>{const n=ke.zoom(),a=Math.max(.1,n*.8);ke.zoom(a),Vt()}),ke.on("wheel",n=>{n.preventDefault();const a=n.originalEvent,i=a.deltaY,o=(a.buttons&4)===4,u=ke.zoom(),l=o?.1:.05,f=i>0?1-l:1+l;let c=u*f;c=Math.max(.1,Math.min(3,c)),ke.zoom(c),Vt()}),ke.on("mousedown",n=>{const a=n.originalEvent;a.button===1&&a.preventDefault()});const r=document.getElementById("cy");r&&(r.addEventListener("mousedown",n=>{n.button===1&&n.preventDefault()}),r.addEventListener("contextmenu",n=>{n.preventDefault()})),ke.on("zoom",()=>{Vt()})}function Vt(){if(!ke)return;const t=Math.round(ke.zoom()*100),e=document.getElementById("zoomLevel");e&&(e.textContent=`Zoom: ${t}%`)}function mG(){const t=document.getElementById("resetGraph");t&&t.addEventListener("click",()=>{ke&&(ke.fit(),ke.center(),Vt())});const e=document.getElementById("layoutGraph");e&&e.addEventListener("click",()=>{const u=["cose","breadthfirst","grid","circle","concentric"],f=(u.indexOf(Lr)+1)%u.length;Lr=u[f];const c=document.getElementById("layoutSelect");c&&(c.value=Lr),dv(Lr)});const r=document.getElementById("layoutSelect");r&&r.addEventListener("change",u=>{Lr=u.target.value,dv(Lr)});const n=document.getElementById("showDraws");n&&n.addEventListener("change",()=>{EE()});const a=document.getElementById("showLosses");a&&a.addEventListener("change",()=>{EE()});const i=document.getElementById("fullscreenBtn"),s=document.querySelector(".graph-visualization");i&&s&&i.addEventListener("click",()=>{document.fullscreenElement?(document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen(),s.classList.remove("fullscreen"),i.textContent=" Fullscreen",setTimeout(()=>{ke&&(ke.resize(),ke.fit(),Vt())},100)):(s.requestFullscreen?s.requestFullscreen():s.webkitRequestFullscreen?s.webkitRequestFullscreen():s.msRequestFullscreen&&s.msRequestFullscreen(),s.classList.add("fullscreen"),i.textContent=" Exit Fullscreen",setTimeout(()=>{ke&&(ke.resize(),ke.fit(),Vt())},100))}),document.addEventListener("fullscreenchange",o),document.addEventListener("webkitfullscreenchange",o),document.addEventListener("msfullscreenchange",o);function o(){!document.fullscreenElement&&!document.webkitFullscreenElement&&!document.msFullscreenElement&&(s&&s.classList.remove("fullscreen"),i&&(i.textContent=" Fullscreen"),setTimeout(()=>{ke&&(ke.resize(),Vt())},100))}}function dv(t){if(!ke)return;const e={name:t,animate:!0,animationDuration:1e3,fit:!0,padding:50};t==="breadthfirst"?(e.directed=!0,e.spacingFactor=1.5):t==="cose"?(e.nodeRepulsion=4500,e.idealEdgeLength=100,e.edgeElasticity=.45):t==="grid"?e.rows=Math.ceil(Math.sqrt(ke.nodes().length)):t==="concentric"&&(e.minNodeSpacing=50),ke.layout(e).run(),Vt()}function EE(){if(!ke)return;const t=pS(),e=document.getElementById("showDraws"),r=document.getElementById("showLosses"),n=e?e.checked:!0,a=r?r.checked:!0;ke.elements("edge").remove();const i=t.edges.filter(o=>o.type==="draw"?n:o.type==="win"?a:!0);i.forEach((o,u)=>{ke.add({data:{id:`e${u}-${o.source}-${o.target}`,source:o.source,target:o.target,type:o.type,label:o.label}})});const s=document.getElementById("edgeCount");s&&(s.textContent=`Edges: ${i.length}`),dv(Lr),Vt()}document.addEventListener("DOMContentLoaded",iG);eG(wr,Qq);aG(wr);window.cytoscape=wr;
