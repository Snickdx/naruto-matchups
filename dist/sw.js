const CACHE_VERSION="1.5.0",CACHE_NAME=`naruto-matchups-v${CACHE_VERSION}`,STATIC_ASSETS=["./","./index.html","./style.css","./script.js","./matchups.json","./manifest.json"];self.addEventListener("install",t=>{console.log(`[SW] Installing version ${CACHE_VERSION}`),self.skipWaiting(),t.waitUntil(caches.open(CACHE_NAME).then(e=>(console.log("[SW] Caching static assets"),e.addAll(STATIC_ASSETS))))}),self.addEventListener("activate",t=>{console.log(`[SW] Activating version ${CACHE_VERSION}`),t.waitUntil(caches.keys().then(e=>Promise.all(e.filter(s=>s.startsWith("naruto-matchups-")&&s!==CACHE_NAME).map(s=>(console.log(`[SW] Deleting old cache: ${s}`),caches.delete(s))))).then(()=>self.clients.claim()))}),self.addEventListener("fetch",t=>{t.request.method==="GET"&&t.request.url.startsWith(self.location.origin)&&t.respondWith(fetch(t.request).then(e=>{const s=e.clone();return caches.open(CACHE_NAME).then(n=>{n.put(t.request,s)}),e}).catch(()=>caches.match(t.request).then(e=>e||(t.request.mode==="navigate"?caches.match("./index.html"):new Response("Offline",{status:503})))))}),self.addEventListener("message",t=>{t.data==="skipWaiting"&&self.skipWaiting()});
